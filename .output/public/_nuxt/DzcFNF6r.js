const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CxCf8Xzc.js","./C0VE3x8l.js","./C4iS2aBk.js","./B1q6798D.js","./d3txBZ36.js","./index.B09IHu_1.css","./B6Snywrb.js","./CDanQfvN.js","./AchievementCard.DIPBvmTw.css","./BrQ7MC5_.js","./BuQDW0-O.js","./index.4iF0p84D.css","./BtvKvUED.js","./Df4BwJnZ.js","./CwXImgea.js","./oneiromancy.D5JIcBwv.css","./jnGyy80o.js","./slow-quiz.XCwighz9.css","./p7njLLKJ.js","./topic.rIgFsbOT.css","./I8HyxLFO.js","./index.BZVQuXzV.css","./smOkWYbc.js","./default.5rRBYkF3.css","./Dz8BV0r5.js","./CID2Xw0y.js","./error-404.CoZKRZXM.css","./BAW5KCig.js","./error-500.D6506J9O.css"])))=>i.map(i=>d[i]);
var kI=Object.defineProperty;var OI=(t,e,n)=>e in t?kI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var gr=(t,e,n)=>OI(t,typeof e!="symbol"?e+"":e,n);/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function af(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Le={},ui=[],Dn=()=>{},j_=()=>!1,ma=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),cf=t=>t.startsWith("onUpdate:"),mt=Object.assign,lf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},MI=Object.prototype.hasOwnProperty,Ve=(t,e)=>MI.call(t,e),fe=Array.isArray,hi=t=>ji(t)==="[object Map]",$_=t=>ji(t)==="[object Set]",Hp=t=>ji(t)==="[object Date]",LI=t=>ji(t)==="[object RegExp]",me=t=>typeof t=="function",We=t=>typeof t=="string",In=t=>typeof t=="symbol",Ne=t=>t!==null&&typeof t=="object",q_=t=>(Ne(t)||me(t))&&me(t.then)&&me(t.catch),G_=Object.prototype.toString,ji=t=>G_.call(t),FI=t=>ji(t).slice(8,-1),H_=t=>ji(t)==="[object Object]",uf=t=>We(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,fi=af(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},BI=/-\w/g,mn=hl(t=>t.replace(BI,e=>e.slice(1).toUpperCase())),UI=/\B([A-Z])/g,Ds=hl(t=>t.replace(UI,"-$1").toLowerCase()),fl=hl(t=>t.charAt(0).toUpperCase()+t.slice(1)),hu=hl(t=>t?`on${fl(t)}`:""),Cr=(t,e)=>!Object.is(t,e),di=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},K_=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},jI=t=>{const e=parseFloat(t);return isNaN(e)?t:e},z_=t=>{const e=We(t)?Number(t):NaN;return isNaN(e)?t:e};let Kp;const dl=()=>Kp||(Kp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function pl(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=We(r)?HI(r):pl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(We(t)||Ne(t))return t}const $I=/;(?![^(]*\))/g,qI=/:([^]+)/,GI=/\/\*[^]*?\*\//g;function HI(t){const e={};return t.replace(GI,"").split($I).forEach(n=>{if(n){const r=n.split(qI);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ml(t){let e="";if(We(t))e=t;else if(fe(t))for(let n=0;n<t.length;n++){const r=ml(t[n]);r&&(e+=r+" ")}else if(Ne(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function KI(t){if(!t)return null;let{class:e,style:n}=t;return e&&!We(e)&&(t.class=ml(e)),n&&(t.style=pl(n)),t}const zI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",WI=af(zI);function W_(t){return!!t||t===""}function QI(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ac(t[r],e[r]);return n}function Ac(t,e){if(t===e)return!0;let n=Hp(t),r=Hp(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=In(t),r=In(e),n||r)return t===e;if(n=fe(t),r=fe(e),n||r)return n&&r?QI(t,e):!1;if(n=Ne(t),r=Ne(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Ac(t[o],e[o]))return!1}}return String(t)===String(e)}const Q_=t=>!!(t&&t.__v_isRef===!0),JI=t=>We(t)?t:t==null?"":fe(t)||Ne(t)&&(t.toString===G_||!me(t.toString))?Q_(t)?JI(t.value):JSON.stringify(t,J_,2):String(t),J_=(t,e)=>Q_(e)?J_(t,e.value):hi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[fu(r,i)+" =>"]=s,n),{})}:$_(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>fu(n))}:In(e)?fu(e):Ne(e)&&!fe(e)&&!H_(e)?String(e):e,fu=(t,e="")=>{var n;return In(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ht;class Y_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ht,!e&&Ht&&(this.index=(Ht.scopes||(Ht.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ht;try{return Ht=this,e()}finally{Ht=n}}}on(){++this._on===1&&(this.prevScope=Ht,Ht=this)}off(){this._on>0&&--this._on===0&&(Ht=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function X_(t){return new Y_(t)}function Z_(){return Ht}let Be;const du=new WeakSet;class ey{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ht&&Ht.active&&Ht.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,du.has(this)&&(du.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ny(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,zp(this),ry(this);const e=Be,n=Tn;Be=this,Tn=!0;try{return this.fn()}finally{sy(this),Be=e,Tn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)df(e);this.deps=this.depsTail=void 0,zp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?du.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){zu(this)&&this.run()}get dirty(){return zu(this)}}let ty=0,Co,xo;function ny(t,e=!1){if(t.flags|=8,e){t.next=xo,xo=t;return}t.next=Co,Co=t}function hf(){ty++}function ff(){if(--ty>0)return;if(xo){let e=xo;for(xo=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Co;){let e=Co;for(Co=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function ry(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function sy(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),df(r),YI(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function zu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(iy(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function iy(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===$o)||(t.globalVersion=$o,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!zu(t))))return;t.flags|=2;const e=t.dep,n=Be,r=Tn;Be=t,Tn=!0;try{ry(t);const s=t.fn(t._value);(e.version===0||Cr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Be=n,Tn=r,sy(t),t.flags&=-3}}function df(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)df(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function YI(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Tn=!0;const oy=[];function Zn(){oy.push(Tn),Tn=!1}function er(){const t=oy.pop();Tn=t===void 0?!0:t}function zp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Be;Be=void 0;try{e()}finally{Be=n}}}let $o=0;class XI{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class pf{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Be||!Tn||Be===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Be)n=this.activeLink=new XI(Be,this),Be.deps?(n.prevDep=Be.depsTail,Be.depsTail.nextDep=n,Be.depsTail=n):Be.deps=Be.depsTail=n,ay(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Be.depsTail,n.nextDep=void 0,Be.depsTail.nextDep=n,Be.depsTail=n,Be.deps===n&&(Be.deps=r)}return n}trigger(e){this.version++,$o++,this.notify(e)}notify(e){hf();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ff()}}}function ay(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)ay(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Rc=new WeakMap,ms=Symbol(""),Wu=Symbol(""),qo=Symbol("");function xt(t,e,n){if(Tn&&Be){let r=Rc.get(t);r||Rc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new pf),s.map=r,s.key=n),s.track()}}function zn(t,e,n,r,s,i){const o=Rc.get(t);if(!o){$o++;return}const a=c=>{c&&c.trigger()};if(hf(),e==="clear")o.forEach(a);else{const c=fe(t),u=c&&uf(n);if(c&&n==="length"){const h=Number(r);o.forEach((f,p)=>{(p==="length"||p===qo||!In(p)&&p>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(qo)),e){case"add":c?u&&a(o.get("length")):(a(o.get(ms)),hi(t)&&a(o.get(Wu)));break;case"delete":c||(a(o.get(ms)),hi(t)&&a(o.get(Wu)));break;case"set":hi(t)&&a(o.get(ms));break}}ff()}function ZI(t,e){const n=Rc.get(t);return n&&n.get(e)}function zs(t){const e=Se(t);return e===t?e:(xt(e,"iterate",qo),fn(t)?e:e.map(wt))}function gl(t){return xt(t=Se(t),"iterate",qo),t}const eb={__proto__:null,[Symbol.iterator](){return pu(this,Symbol.iterator,wt)},concat(...t){return zs(this).concat(...t.map(e=>fe(e)?zs(e):e))},entries(){return pu(this,"entries",t=>(t[1]=wt(t[1]),t))},every(t,e){return $n(this,"every",t,e,void 0,arguments)},filter(t,e){return $n(this,"filter",t,e,n=>n.map(wt),arguments)},find(t,e){return $n(this,"find",t,e,wt,arguments)},findIndex(t,e){return $n(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return $n(this,"findLast",t,e,wt,arguments)},findLastIndex(t,e){return $n(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return $n(this,"forEach",t,e,void 0,arguments)},includes(...t){return mu(this,"includes",t)},indexOf(...t){return mu(this,"indexOf",t)},join(t){return zs(this).join(t)},lastIndexOf(...t){return mu(this,"lastIndexOf",t)},map(t,e){return $n(this,"map",t,e,void 0,arguments)},pop(){return fo(this,"pop")},push(...t){return fo(this,"push",t)},reduce(t,...e){return Wp(this,"reduce",t,e)},reduceRight(t,...e){return Wp(this,"reduceRight",t,e)},shift(){return fo(this,"shift")},some(t,e){return $n(this,"some",t,e,void 0,arguments)},splice(...t){return fo(this,"splice",t)},toReversed(){return zs(this).toReversed()},toSorted(t){return zs(this).toSorted(t)},toSpliced(...t){return zs(this).toSpliced(...t)},unshift(...t){return fo(this,"unshift",t)},values(){return pu(this,"values",wt)}};function pu(t,e,n){const r=gl(t),s=r[e]();return r!==t&&!fn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const tb=Array.prototype;function $n(t,e,n,r,s,i){const o=gl(t),a=o!==t&&!fn(t),c=o[e];if(c!==tb[e]){const f=c.apply(t,i);return a?wt(f):f}let u=n;o!==t&&(a?u=function(f,p){return n.call(this,wt(f),p,t)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,t)}));const h=c.call(o,u,r);return a&&s?s(h):h}function Wp(t,e,n,r){const s=gl(t);let i=n;return s!==t&&(fn(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,wt(a),c,t)}),s[e](i,...r)}function mu(t,e,n){const r=Se(t);xt(r,"iterate",qo);const s=r[e](...n);return(s===-1||s===!1)&&_f(n[0])?(n[0]=Se(n[0]),r[e](...n)):s}function fo(t,e,n=[]){Zn(),hf();const r=Se(t)[e].apply(t,n);return ff(),er(),r}const nb=af("__proto__,__v_isRef,__isVue"),cy=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(In));function rb(t){In(t)||(t=String(t));const e=Se(this);return xt(e,"has",t),e.hasOwnProperty(t)}class ly{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?db:dy:i?fy:hy).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=fe(e);if(!s){let c;if(o&&(c=eb[n]))return c;if(n==="hasOwnProperty")return rb}const a=Reflect.get(e,n,pt(e)?e:r);if((In(n)?cy.has(n):nb(n))||(s||xt(e,"get",n),i))return a;if(pt(a)){const c=o&&uf(n)?a:a.value;return s&&Ne(c)?Ju(c):c}return Ne(a)?s?Ju(a):or(a):a}}class uy extends ly{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const c=tr(i);if(!fn(r)&&!tr(r)&&(i=Se(i),r=Se(r)),!fe(e)&&pt(i)&&!pt(r))return c||(i.value=r),!0}const o=fe(e)&&uf(n)?Number(n)<e.length:Ve(e,n),a=Reflect.set(e,n,r,pt(e)?e:s);return e===Se(s)&&(o?Cr(r,i)&&zn(e,"set",n,r):zn(e,"add",n,r)),a}deleteProperty(e,n){const r=Ve(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&zn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!In(n)||!cy.has(n))&&xt(e,"has",n),r}ownKeys(e){return xt(e,"iterate",fe(e)?"length":ms),Reflect.ownKeys(e)}}class sb extends ly{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const ib=new uy,ob=new sb,ab=new uy(!0);const Qu=t=>t,Qa=t=>Reflect.getPrototypeOf(t);function cb(t,e,n){return function(...r){const s=this.__v_raw,i=Se(s),o=hi(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),h=n?Qu:e?Sc:wt;return!e&&xt(i,"iterate",c?Wu:ms),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Ja(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function lb(t,e){const n={get(s){const i=this.__v_raw,o=Se(i),a=Se(s);t||(Cr(s,a)&&xt(o,"get",s),xt(o,"get",a));const{has:c}=Qa(o),u=e?Qu:t?Sc:wt;if(c.call(o,s))return u(i.get(s));if(c.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&xt(Se(s),"iterate",ms),s.size},has(s){const i=this.__v_raw,o=Se(i),a=Se(s);return t||(Cr(s,a)&&xt(o,"has",s),xt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Se(a),u=e?Qu:t?Sc:wt;return!t&&xt(c,"iterate",ms),a.forEach((h,f)=>s.call(i,u(h),u(f),o))}};return mt(n,t?{add:Ja("add"),set:Ja("set"),delete:Ja("delete"),clear:Ja("clear")}:{add(s){!e&&!fn(s)&&!tr(s)&&(s=Se(s));const i=Se(this);return Qa(i).has.call(i,s)||(i.add(s),zn(i,"add",s,s)),this},set(s,i){!e&&!fn(i)&&!tr(i)&&(i=Se(i));const o=Se(this),{has:a,get:c}=Qa(o);let u=a.call(o,s);u||(s=Se(s),u=a.call(o,s));const h=c.call(o,s);return o.set(s,i),u?Cr(i,h)&&zn(o,"set",s,i):zn(o,"add",s,i),this},delete(s){const i=Se(this),{has:o,get:a}=Qa(i);let c=o.call(i,s);c||(s=Se(s),c=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return c&&zn(i,"delete",s,void 0),u},clear(){const s=Se(this),i=s.size!==0,o=s.clear();return i&&zn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=cb(s,t,e)}),n}function mf(t,e){const n=lb(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ve(n,s)&&s in r?n:r,s,i)}const ub={get:mf(!1,!1)},hb={get:mf(!1,!0)},fb={get:mf(!0,!1)};const hy=new WeakMap,fy=new WeakMap,dy=new WeakMap,db=new WeakMap;function pb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mb(t){return t.__v_skip||!Object.isExtensible(t)?0:pb(FI(t))}function or(t){return tr(t)?t:gf(t,!1,ib,ub,hy)}function Qn(t){return gf(t,!1,ab,hb,fy)}function Ju(t){return gf(t,!0,ob,fb,dy)}function gf(t,e,n,r,s){if(!Ne(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=mb(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function gs(t){return tr(t)?gs(t.__v_raw):!!(t&&t.__v_isReactive)}function tr(t){return!!(t&&t.__v_isReadonly)}function fn(t){return!!(t&&t.__v_isShallow)}function _f(t){return t?!!t.__v_raw:!1}function Se(t){const e=t&&t.__v_raw;return e?Se(e):t}function gb(t){return!Ve(t,"__v_skip")&&Object.isExtensible(t)&&K_(t,"__v_skip",!0),t}const wt=t=>Ne(t)?or(t):t,Sc=t=>Ne(t)?Ju(t):t;function pt(t){return t?t.__v_isRef===!0:!1}function Yn(t){return py(t,!1)}function Go(t){return py(t,!0)}function py(t,e){return pt(t)?t:new _b(t,e)}class _b{constructor(e,n){this.dep=new pf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Se(e),this._value=n?e:wt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||fn(e)||tr(e);e=r?e:Se(e),Cr(e,n)&&(this._rawValue=e,this._value=r?e:wt(e),this.dep.trigger())}}function Ue(t){return pt(t)?t.value:t}const yb={get:(t,e,n)=>e==="__v_raw"?t:Ue(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return pt(s)&&!pt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function my(t){return gs(t)?t:new Proxy(t,yb)}class vb{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ZI(Se(this._object),this._key)}}class Eb{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function wb(t,e,n){return pt(t)?t:me(t)?new Eb(t):Ne(t)&&arguments.length>1?Tb(t,e,n):Yn(t)}function Tb(t,e,n){const r=t[e];return pt(r)?r:new vb(t,e,n)}class Ib{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new pf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$o-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Be!==this)return ny(this,!0),!0}get value(){const e=this.dep.track();return iy(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function bb(t,e,n=!1){let r,s;return me(t)?r=t:(r=t.get,s=t.set),new Ib(r,s,n)}const Ya={},Pc=new WeakMap;let ss;function Ab(t,e=!1,n=ss){if(n){let r=Pc.get(n);r||Pc.set(n,r=[]),r.push(t)}}function Rb(t,e,n=Le){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,u=C=>s?C:fn(C)||s===!1||s===0?Wn(C,1):Wn(C);let h,f,p,g,w=!1,R=!1;if(pt(t)?(f=()=>t.value,w=fn(t)):gs(t)?(f=()=>u(t),w=!0):fe(t)?(R=!0,w=t.some(C=>gs(C)||fn(C)),f=()=>t.map(C=>{if(pt(C))return C.value;if(gs(C))return u(C);if(me(C))return c?c(C,2):C()})):me(t)?e?f=c?()=>c(t,2):t:f=()=>{if(p){Zn();try{p()}finally{er()}}const C=ss;ss=h;try{return c?c(t,3,[g]):t(g)}finally{ss=C}}:f=Dn,e&&s){const C=f,k=s===!0?1/0:s;f=()=>Wn(C(),k)}const V=Z_(),N=()=>{h.stop(),V&&V.active&&lf(V.effects,h)};if(i&&e){const C=e;e=(...k)=>{C(...k),N()}}let D=R?new Array(t.length).fill(Ya):Ya;const E=C=>{if(!(!(h.flags&1)||!h.dirty&&!C))if(e){const k=h.run();if(s||w||(R?k.some((F,I)=>Cr(F,D[I])):Cr(k,D))){p&&p();const F=ss;ss=h;try{const I=[k,D===Ya?void 0:R&&D[0]===Ya?[]:D,g];D=k,c?c(e,3,I):e(...I)}finally{ss=F}}}else h.run()};return a&&a(E),h=new ey(f),h.scheduler=o?()=>o(E,!1):E,g=C=>Ab(C,!1,h),p=h.onStop=()=>{const C=Pc.get(h);if(C){if(c)c(C,4);else for(const k of C)k();Pc.delete(h)}},e?r?E(!0):D=h.run():o?o(E.bind(null,!0),!0):h.run(),N.pause=h.pause.bind(h),N.resume=h.resume.bind(h),N.stop=N,N}function Wn(t,e=1/0,n){if(e<=0||!Ne(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,pt(t))Wn(t.value,e,n);else if(fe(t))for(let r=0;r<t.length;r++)Wn(t[r],e,n);else if($_(t)||hi(t))t.forEach(r=>{Wn(r,e,n)});else if(H_(t)){for(const r in t)Wn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Wn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ga(t,e,n,r){try{return r?t(...r):t()}catch(s){$i(s,e,n)}}function bn(t,e,n,r){if(me(t)){const s=ga(t,e,n,r);return s&&q_(s)&&s.catch(i=>{$i(i,e,n)}),s}if(fe(t)){const s=[];for(let i=0;i<t.length;i++)s.push(bn(t[i],e,n,r));return s}}function $i(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Le;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,c,u)===!1)return}a=a.parent}if(i){Zn(),ga(i,null,10,[t,c,u]),er();return}}Sb(t,n,s,r,o)}function Sb(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Bt=[];let Sn=-1;const pi=[];let wr=null,ti=0;const gy=Promise.resolve();let Cc=null;function qi(t){const e=Cc||gy;return t?e.then(this?t.bind(this):t):e}function Pb(t){let e=Sn+1,n=Bt.length;for(;e<n;){const r=e+n>>>1,s=Bt[r],i=Ho(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function yf(t){if(!(t.flags&1)){const e=Ho(t),n=Bt[Bt.length-1];!n||!(t.flags&2)&&e>=Ho(n)?Bt.push(t):Bt.splice(Pb(e),0,t),t.flags|=1,_y()}}function _y(){Cc||(Cc=gy.then(yy))}function Yu(t){fe(t)?pi.push(...t):wr&&t.id===-1?wr.splice(ti+1,0,t):t.flags&1||(pi.push(t),t.flags|=1),_y()}function Qp(t,e,n=Sn+1){for(;n<Bt.length;n++){const r=Bt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Bt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function xc(t){if(pi.length){const e=[...new Set(pi)].sort((n,r)=>Ho(n)-Ho(r));if(pi.length=0,wr){wr.push(...e);return}for(wr=e,ti=0;ti<wr.length;ti++){const n=wr[ti];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}wr=null,ti=0}}const Ho=t=>t.id==null?t.flags&2?-1:1/0:t.id;function yy(t){try{for(Sn=0;Sn<Bt.length;Sn++){const e=Bt[Sn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ga(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Sn<Bt.length;Sn++){const e=Bt[Sn];e&&(e.flags&=-2)}Sn=-1,Bt.length=0,xc(),Cc=null,(Bt.length||pi.length)&&yy()}}let bt=null,vy=null;function Vc(t){const e=bt;return bt=t,vy=t&&t.type.__scopeId||null,e}function vf(t,e=bt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Mc(-1);const i=Vc(e);let o;try{o=t(...s)}finally{Vc(i),r._d&&Mc(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function pM(t,e){if(bt===null)return t;const n=El(bt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=Le]=e[s];i&&(me(i)&&(i={mounted:i,updated:i}),i.deep&&Wn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Pn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Zn(),bn(c,n,8,[t.el,a,t,e]),er())}}const Cb=Symbol("_vte"),Ey=t=>t.__isTeleport,Kn=Symbol("_leaveCb"),Xa=Symbol("_enterCb");function xb(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return wf(()=>{t.isMounted=!0}),Tf(()=>{t.isUnmounting=!0}),t}const cn=[Function,Array],wy={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:cn,onEnter:cn,onAfterEnter:cn,onEnterCancelled:cn,onBeforeLeave:cn,onLeave:cn,onAfterLeave:cn,onLeaveCancelled:cn,onBeforeAppear:cn,onAppear:cn,onAfterAppear:cn,onAppearCancelled:cn},Ty=t=>{const e=t.subTree;return e.component?Ty(e.component):e},Vb={name:"BaseTransition",props:wy,setup(t,{slots:e}){const n=ya(),r=xb();return()=>{const s=e.default&&Ay(e.default(),!0);if(!s||!s.length)return;const i=Iy(s),o=Se(t),{mode:a}=o;if(r.isLeaving)return gu(i);const c=Jp(i);if(!c)return gu(i);let u=Xu(c,o,r,n,f=>u=f);c.type!==at&&Ei(c,u);let h=n.subTree&&Jp(n.subTree);if(h&&h.type!==at&&!wn(h,c)&&Ty(n).type!==at){let f=Xu(h,o,r,n);if(Ei(h,f),a==="out-in"&&c.type!==at)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},gu(i);a==="in-out"&&c.type!==at?f.delayLeave=(p,g,w)=>{const R=by(r,h);R[String(h.key)]=h,p[Kn]=()=>{g(),p[Kn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function Iy(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==at){e=n;break}}return e}const Db=Vb;function by(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Xu(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:w,onLeaveCancelled:R,onBeforeAppear:V,onAppear:N,onAfterAppear:D,onAppearCancelled:E}=e,C=String(t.key),k=by(n,t),F=(v,b)=>{v&&bn(v,r,9,b)},I=(v,b)=>{const P=b[1];F(v,b),fe(v)?v.every(S=>S.length<=1)&&P():v.length<=1&&P()},y={mode:o,persisted:a,beforeEnter(v){let b=c;if(!n.isMounted)if(i)b=V||c;else return;v[Kn]&&v[Kn](!0);const P=k[C];P&&wn(t,P)&&P.el[Kn]&&P.el[Kn](),F(b,[v])},enter(v){let b=u,P=h,S=f;if(!n.isMounted)if(i)b=N||u,P=D||h,S=E||f;else return;let T=!1;const ge=v[Xa]=Ee=>{T||(T=!0,Ee?F(S,[v]):F(P,[v]),y.delayedLeave&&y.delayedLeave(),v[Xa]=void 0)};b?I(b,[v,ge]):ge()},leave(v,b){const P=String(t.key);if(v[Xa]&&v[Xa](!0),n.isUnmounting)return b();F(p,[v]);let S=!1;const T=v[Kn]=ge=>{S||(S=!0,b(),ge?F(R,[v]):F(w,[v]),v[Kn]=void 0,k[P]===t&&delete k[P])};k[P]=t,g?I(g,[v,T]):T()},clone(v){const b=Xu(v,e,n,r,s);return s&&s(b),b}};return y}function gu(t){if(_a(t))return t=nr(t),t.children=null,t}function Jp(t){if(!_a(t))return Ey(t.type)&&t.children?Iy(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&me(n.default))return n.default()}}function Ei(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ei(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ay(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Vt?(o.patchFlag&128&&s++,r=r.concat(Ay(o.children,e,a))):(e||o.type!==at)&&r.push(a!=null?nr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Gr(t,e){return me(t)?mt({name:t.name},e,{setup:t}):t}function Ef(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Dc=new WeakMap;function mi(t,e,n,r,s=!1){if(fe(t)){t.forEach((w,R)=>mi(w,e&&(fe(e)?e[R]:e),n,r,s));return}if(xr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&mi(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?El(r.component):r.el,o=s?null:i,{i:a,r:c}=t,u=e&&e.r,h=a.refs===Le?a.refs={}:a.refs,f=a.setupState,p=Se(f),g=f===Le?j_:w=>Ve(p,w);if(u!=null&&u!==c){if(Yp(e),We(u))h[u]=null,g(u)&&(f[u]=null);else if(pt(u)){u.value=null;const w=e;w.k&&(h[w.k]=null)}}if(me(c))ga(c,a,12,[o,h]);else{const w=We(c),R=pt(c);if(w||R){const V=()=>{if(t.f){const N=w?g(c)?f[c]:h[c]:c.value;if(s)fe(N)&&lf(N,i);else if(fe(N))N.includes(i)||N.push(i);else if(w)h[c]=[i],g(c)&&(f[c]=h[c]);else{const D=[i];c.value=D,t.k&&(h[t.k]=D)}}else w?(h[c]=o,g(c)&&(f[c]=o)):R&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const N=()=>{V(),Dc.delete(t)};N.id=-1,Dc.set(t,N),vt(N,n)}else Yp(t),V()}}}function Yp(t){const e=Dc.get(t);e&&(e.flags|=8,Dc.delete(t))}let Xp=!1;const Ws=()=>{Xp||(console.error("Hydration completed but contains mismatches."),Xp=!0)},Nb=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",kb=t=>t.namespaceURI.includes("MathML"),Za=t=>{if(t.nodeType===1){if(Nb(t))return"svg";if(kb(t))return"mathml"}},ci=t=>t.nodeType===8;function Ob(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:c,createComment:u}}=t,h=(E,C)=>{if(!C.hasChildNodes()){n(null,E,C),xc(),C._vnode=E;return}f(C.firstChild,E,null,null,null),xc(),C._vnode=E},f=(E,C,k,F,I,y=!1)=>{y=y||!!C.dynamicChildren;const v=ci(E)&&E.data==="[",b=()=>R(E,C,k,F,I,v),{type:P,ref:S,shapeFlag:T,patchFlag:ge}=C;let Ee=E.nodeType;C.el=E,ge===-2&&(y=!1,C.dynamicChildren=null);let ie=null;switch(P){case vs:Ee!==3?C.children===""?(c(C.el=s(""),o(E),E),ie=E):ie=b():(E.data!==C.children&&(Ws(),E.data=C.children),ie=i(E));break;case at:D(E)?(ie=i(E),N(C.el=E.content.firstChild,E,k)):Ee!==8||v?ie=b():ie=i(E);break;case hc:if(v&&(E=i(E),Ee=E.nodeType),Ee===1||Ee===3){ie=E;const pe=!C.children.length;for(let re=0;re<C.staticCount;re++)pe&&(C.children+=ie.nodeType===1?ie.outerHTML:ie.data),re===C.staticCount-1&&(C.anchor=ie),ie=i(ie);return v?i(ie):ie}else b();break;case Vt:v?ie=w(E,C,k,F,I,y):ie=b();break;default:if(T&1)(Ee!==1||C.type.toLowerCase()!==E.tagName.toLowerCase())&&!D(E)?ie=b():ie=p(E,C,k,F,I,y);else if(T&6){C.slotScopeIds=I;const pe=o(E);if(v?ie=V(E):ci(E)&&E.data==="teleport start"?ie=V(E,E.data,"teleport end"):ie=i(E),e(C,pe,null,k,F,Za(pe),y),xr(C)&&!C.type.__asyncResolved){let re;v?(re=et(Vt),re.anchor=ie?ie.previousSibling:pe.lastChild):re=E.nodeType===3?iv(""):et("div"),re.el=E,C.component.subTree=re}}else T&64?Ee!==8?ie=b():ie=C.type.hydrate(E,C,k,F,I,y,t,g):T&128&&(ie=C.type.hydrate(E,C,k,F,Za(o(E)),I,y,t,f))}return S!=null&&mi(S,null,F,C),ie},p=(E,C,k,F,I,y)=>{y=y||!!C.dynamicChildren;const{type:v,props:b,patchFlag:P,shapeFlag:S,dirs:T,transition:ge}=C,Ee=v==="input"||v==="option";if(Ee||P!==-1){T&&Pn(C,null,k,"created");let ie=!1;if(D(E)){ie=zy(null,ge)&&k&&k.vnode.props&&k.vnode.props.appear;const re=E.content.firstChild;if(ie){const Fe=re.getAttribute("class");Fe&&(re.$cls=Fe),ge.beforeEnter(re)}N(re,E,k),C.el=E=re}if(S&16&&!(b&&(b.innerHTML||b.textContent))){let re=g(E.firstChild,C,E,k,F,I,y);for(;re;){ec(E,1)||Ws();const Fe=re;re=re.nextSibling,a(Fe)}}else if(S&8){let re=C.children;re[0]===`
`&&(E.tagName==="PRE"||E.tagName==="TEXTAREA")&&(re=re.slice(1)),E.textContent!==re&&(ec(E,0)||Ws(),E.textContent=C.children)}if(b){if(Ee||!y||P&48){const re=E.tagName.includes("-");for(const Fe in b)(Ee&&(Fe.endsWith("value")||Fe==="indeterminate")||ma(Fe)&&!fi(Fe)||Fe[0]==="."||re)&&r(E,Fe,null,b[Fe],void 0,k)}else if(b.onClick)r(E,"onClick",null,b.onClick,void 0,k);else if(P&4&&gs(b.style))for(const re in b.style)b.style[re]}let pe;(pe=b&&b.onVnodeBeforeMount)&&Kt(pe,k,C),T&&Pn(C,null,k,"beforeMount"),((pe=b&&b.onVnodeMounted)||T||ie)&&Zy(()=>{pe&&Kt(pe,k,C),ie&&ge.enter(E),T&&Pn(C,null,k,"mounted")},F)}return E.nextSibling},g=(E,C,k,F,I,y,v)=>{v=v||!!C.dynamicChildren;const b=C.children,P=b.length;for(let S=0;S<P;S++){const T=v?b[S]:b[S]=nn(b[S]),ge=T.type===vs;E?(ge&&!v&&S+1<P&&nn(b[S+1]).type===vs&&(c(s(E.data.slice(T.children.length)),k,i(E)),E.data=T.children),E=f(E,T,F,I,y,v)):ge&&!T.children?c(T.el=s(""),k):(ec(k,1)||Ws(),n(null,T,k,null,F,I,Za(k),y))}return E},w=(E,C,k,F,I,y)=>{const{slotScopeIds:v}=C;v&&(I=I?I.concat(v):v);const b=o(E),P=g(i(E),C,b,k,F,I,y);return P&&ci(P)&&P.data==="]"?i(C.anchor=P):(Ws(),c(C.anchor=u("]"),b,P),P)},R=(E,C,k,F,I,y)=>{if(ec(E.parentElement,1)||Ws(),C.el=null,y){const P=V(E);for(;;){const S=i(E);if(S&&S!==P)a(S);else break}}const v=i(E),b=o(E);return a(E),n(null,C,b,v,k,F,Za(b),I),k&&(k.vnode.el=C.el,vl(k,C.el)),v},V=(E,C="[",k="]")=>{let F=0;for(;E;)if(E=i(E),E&&ci(E)&&(E.data===C&&F++,E.data===k)){if(F===0)return i(E);F--}return E},N=(E,C,k)=>{const F=C.parentNode;F&&F.replaceChild(E,C);let I=k;for(;I;)I.vnode.el===C&&(I.vnode.el=I.subTree.el=E),I=I.parent},D=E=>E.nodeType===1&&E.tagName==="TEMPLATE";return[h,f]}const Zp="data-allow-mismatch",Mb={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function ec(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Zp);)t=t.parentElement;const n=t&&t.getAttribute(Zp);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(Mb[e])}}dl().requestIdleCallback;dl().cancelIdleCallback;function Lb(t,e){if(ci(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(ci(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const xr=t=>!!t.type.__asyncLoader;function em(t){me(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:c}=t;let u=null,h,f=0;const p=()=>(f++,u=null,g()),g=()=>{let w;return u||(w=u=e().catch(R=>{if(R=R instanceof Error?R:new Error(String(R)),c)return new Promise((V,N)=>{c(R,()=>V(p()),()=>N(R),f+1)});throw R}).then(R=>w!==u&&u?u:(R&&(R.__esModule||R[Symbol.toStringTag]==="Module")&&(R=R.default),h=R,R)))};return Gr({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(w,R,V){let N=!1;(R.bu||(R.bu=[])).push(()=>N=!0);const D=()=>{N||V()},E=i?()=>{const C=i(D,k=>Lb(w,k));C&&(R.bum||(R.bum=[])).push(C)}:D;h?E():g().then(()=>!R.isUnmounted&&E())},get __asyncResolved(){return h},setup(){const w=Tt;if(Ef(w),h)return()=>_u(h,w);const R=E=>{u=null,$i(E,w,13,!r)};if(a&&w.suspense||Ti)return g().then(E=>()=>_u(E,w)).catch(E=>(R(E),()=>r?et(r,{error:E}):null));const V=Yn(!1),N=Yn(),D=Yn(!!s);return s&&setTimeout(()=>{D.value=!1},s),o!=null&&setTimeout(()=>{if(!V.value&&!N.value){const E=new Error(`Async component timed out after ${o}ms.`);R(E),N.value=E}},o),g().then(()=>{V.value=!0,w.parent&&_a(w.parent.vnode)&&w.parent.update()}).catch(E=>{R(E),N.value=E}),()=>{if(V.value&&h)return _u(h,w);if(N.value&&r)return et(r,{error:N.value});if(n&&!D.value)return et(n)}}})}function _u(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=et(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const _a=t=>t.type.__isKeepAlive,Fb={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=ya(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:c,m:u,um:h,o:{createElement:f}}}=r,p=f("div");r.activate=(D,E,C,k,F)=>{const I=D.component;u(D,E,C,0,a),c(I.vnode,D,E,C,I,a,k,D.slotScopeIds,F),vt(()=>{I.isDeactivated=!1,I.a&&di(I.a);const y=D.props&&D.props.onVnodeMounted;y&&Kt(y,I.parent,D)},a)},r.deactivate=D=>{const E=D.component;kc(E.m),kc(E.a),u(D,p,null,1,a),vt(()=>{E.da&&di(E.da);const C=D.props&&D.props.onVnodeUnmounted;C&&Kt(C,E.parent,D),E.isDeactivated=!0},a)};function g(D){yu(D),h(D,n,a,!0)}function w(D){s.forEach((E,C)=>{const k=oh(E.type);k&&!D(k)&&R(C)})}function R(D){const E=s.get(D);E&&(!o||!wn(E,o))?g(E):o&&yu(o),s.delete(D),i.delete(D)}Vr(()=>[t.include,t.exclude],([D,E])=>{D&&w(C=>Io(D,C)),E&&w(C=>!Io(E,C))},{flush:"post",deep:!0});let V=null;const N=()=>{V!=null&&(Oc(n.subTree.type)?vt(()=>{s.set(V,tc(n.subTree))},n.subTree.suspense):s.set(V,tc(n.subTree)))};return wf(N),Sy(N),Tf(()=>{s.forEach(D=>{const{subTree:E,suspense:C}=n,k=tc(E);if(D.type===k.type&&D.key===k.key){yu(k);const F=k.component.da;F&&vt(F,C);return}g(D)})}),()=>{if(V=null,!e.default)return o=null;const D=e.default(),E=D[0];if(D.length>1)return o=null,D;if(!ws(E)||!(E.shapeFlag&4)&&!(E.shapeFlag&128))return o=null,E;let C=tc(E);if(C.type===at)return o=null,C;const k=C.type,F=oh(xr(C)?C.type.__asyncResolved||{}:k),{include:I,exclude:y,max:v}=t;if(I&&(!F||!Io(I,F))||y&&F&&Io(y,F))return C.shapeFlag&=-257,o=C,E;const b=C.key==null?k:C.key,P=s.get(b);return C.el&&(C=nr(C),E.shapeFlag&128&&(E.ssContent=C)),V=b,P?(C.el=P.el,C.component=P.component,C.transition&&Ei(C,C.transition),C.shapeFlag|=512,i.delete(b),i.add(b)):(i.add(b),v&&i.size>parseInt(v,10)&&R(i.values().next().value)),C.shapeFlag|=256,o=C,Oc(E.type)?E:C}}},Bb=Fb;function Io(t,e){return fe(t)?t.some(n=>Io(n,e)):We(t)?t.split(",").includes(e):LI(t)?(t.lastIndex=0,t.test(e)):!1}function Ub(t,e){Ry(t,"a",e)}function jb(t,e){Ry(t,"da",e)}function Ry(t,e,n=Tt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(_l(e,r,n),n){let s=n.parent;for(;s&&s.parent;)_a(s.parent.vnode)&&$b(r,e,n,s),s=s.parent}}function $b(t,e,n,r){const s=_l(e,t,r,!0);Py(()=>{lf(r[e],s)},n)}function yu(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function tc(t){return t.shapeFlag&128?t.ssContent:t}function _l(t,e,n=Tt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Zn();const a=va(n),c=bn(e,n,t,o);return a(),er(),c});return r?s.unshift(i):s.push(i),i}}const ar=t=>(e,n=Tt)=>{(!Ti||t==="sp")&&_l(t,(...r)=>e(...r),n)},qb=ar("bm"),wf=ar("m"),Gb=ar("bu"),Sy=ar("u"),Tf=ar("bum"),Py=ar("um"),Hb=ar("sp"),Kb=ar("rtg"),zb=ar("rtc");function Cy(t,e=Tt){_l("ec",t,e)}const xy="components";function mM(t,e){return Dy(xy,t,!0,e)||t}const Vy=Symbol.for("v-ndc");function Wb(t){return We(t)?Dy(xy,t,!1)||t:t||Vy}function Dy(t,e,n=!0,r=!1){const s=bt||Tt;if(s){const i=s.type;{const a=oh(i,!1);if(a&&(a===e||a===mn(e)||a===fl(mn(e))))return i}const o=tm(s[t]||i[t],e)||tm(s.appContext[t],e);return!o&&r?i:o}}function tm(t,e){return t&&(t[e]||t[mn(e)]||t[fl(mn(e))])}function gM(t,e,n,r){let s;const i=n,o=fe(t);if(o||We(t)){const a=o&&gs(t);let c=!1,u=!1;a&&(c=!fn(t),u=tr(t),t=gl(t)),s=new Array(t.length);for(let h=0,f=t.length;h<f;h++)s[h]=e(c?u?Sc(wt(t[h])):wt(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(Ne(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const h=a[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}function _M(t,e,n={},r,s){if(bt.ce||bt.parent&&xr(bt.parent)&&bt.parent.ce){const u=Object.keys(n).length>0;return un(),Cn(Vt,null,[et("slot",n,r)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),un();const o=i&&Ny(i(n)),a=n.key||o&&o.key,c=Cn(Vt,{key:(a&&!In(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function Ny(t){return t.some(e=>ws(e)?!(e.type===at||e.type===Vt&&!Ny(e.children)):!0)?t:null}const Zu=t=>t?av(t)?El(t):Zu(t.parent):null,Vo=mt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zu(t.parent),$root:t=>Zu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Oy(t),$forceUpdate:t=>t.f||(t.f=()=>{yf(t.update)}),$nextTick:t=>t.n||(t.n=qi.bind(t.proxy)),$watch:t=>pA.bind(t)}),vu=(t,e)=>t!==Le&&!t.__isScriptSetup&&Ve(t,e),Qb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(vu(r,e))return o[e]=1,r[e];if(s!==Le&&Ve(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Ve(u,e))return o[e]=3,i[e];if(n!==Le&&Ve(n,e))return o[e]=4,n[e];eh&&(o[e]=0)}}const h=Vo[e];let f,p;if(h)return e==="$attrs"&&xt(t.attrs,"get",""),h(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==Le&&Ve(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Ve(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return vu(s,e)?(s[e]=n,!0):r!==Le&&Ve(r,e)?(r[e]=n,!0):Ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},a){let c,u;return!!(n[a]||t!==Le&&a[0]!=="$"&&Ve(t,a)||vu(e,a)||(c=i[0])&&Ve(c,a)||Ve(r,a)||Ve(Vo,a)||Ve(s.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ve(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function nm(t){return fe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let eh=!0;function Jb(t){const e=Oy(t),n=t.proxy,r=t.ctx;eh=!1,e.beforeCreate&&rm(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:h,beforeMount:f,mounted:p,beforeUpdate:g,updated:w,activated:R,deactivated:V,beforeDestroy:N,beforeUnmount:D,destroyed:E,unmounted:C,render:k,renderTracked:F,renderTriggered:I,errorCaptured:y,serverPrefetch:v,expose:b,inheritAttrs:P,components:S,directives:T,filters:ge}=e;if(u&&Yb(u,r,null),o)for(const pe in o){const re=o[pe];me(re)&&(r[pe]=re.bind(n))}if(s){const pe=s.call(n,n);Ne(pe)&&(t.data=or(pe))}if(eh=!0,i)for(const pe in i){const re=i[pe],Fe=me(re)?re.bind(n,n):me(re.get)?re.get.bind(n,n):Dn,_n=!me(re)&&me(re.set)?re.set.bind(n):Dn,on=rn({get:Fe,set:_n});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>on.value,set:Qe=>on.value=Qe})}if(a)for(const pe in a)ky(a[pe],r,n,pe);if(c){const pe=me(c)?c.call(n):c;Reflect.ownKeys(pe).forEach(re=>{ys(re,pe[re])})}h&&rm(h,t,"c");function ie(pe,re){fe(re)?re.forEach(Fe=>pe(Fe.bind(n))):re&&pe(re.bind(n))}if(ie(qb,f),ie(wf,p),ie(Gb,g),ie(Sy,w),ie(Ub,R),ie(jb,V),ie(Cy,y),ie(zb,F),ie(Kb,I),ie(Tf,D),ie(Py,C),ie(Hb,v),fe(b))if(b.length){const pe=t.exposed||(t.exposed={});b.forEach(re=>{Object.defineProperty(pe,re,{get:()=>n[re],set:Fe=>n[re]=Fe,enumerable:!0})})}else t.exposed||(t.exposed={});k&&t.render===Dn&&(t.render=k),P!=null&&(t.inheritAttrs=P),S&&(t.components=S),T&&(t.directives=T),v&&Ef(t)}function Yb(t,e,n=Dn){fe(t)&&(t=th(t));for(const r in t){const s=t[r];let i;Ne(s)?"default"in s?i=Ut(s.from||r,s.default,!0):i=Ut(s.from||r):i=Ut(s),pt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function rm(t,e,n){bn(fe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function ky(t,e,n,r){let s=r.includes(".")?Jy(n,r):()=>n[r];if(We(t)){const i=e[t];me(i)&&Vr(s,i)}else if(me(t))Vr(s,t.bind(n));else if(Ne(t))if(fe(t))t.forEach(i=>ky(i,e,n,r));else{const i=me(t.handler)?t.handler.bind(n):e[t.handler];me(i)&&Vr(s,i,t)}}function Oy(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>Nc(c,u,o,!0)),Nc(c,e,o)),Ne(e)&&i.set(e,c),c}function Nc(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Nc(t,i,n,!0),s&&s.forEach(o=>Nc(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=Xb[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Xb={data:sm,props:im,emits:im,methods:bo,computed:bo,beforeCreate:Ot,created:Ot,beforeMount:Ot,mounted:Ot,beforeUpdate:Ot,updated:Ot,beforeDestroy:Ot,beforeUnmount:Ot,destroyed:Ot,unmounted:Ot,activated:Ot,deactivated:Ot,errorCaptured:Ot,serverPrefetch:Ot,components:bo,directives:bo,watch:eA,provide:sm,inject:Zb};function sm(t,e){return e?t?function(){return mt(me(t)?t.call(this,this):t,me(e)?e.call(this,this):e)}:e:t}function Zb(t,e){return bo(th(t),th(e))}function th(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ot(t,e){return t?[...new Set([].concat(t,e))]:e}function bo(t,e){return t?mt(Object.create(null),t,e):e}function im(t,e){return t?fe(t)&&fe(e)?[...new Set([...t,...e])]:mt(Object.create(null),nm(t),nm(e??{})):e}function eA(t,e){if(!t)return e;if(!e)return t;const n=mt(Object.create(null),t);for(const r in e)n[r]=Ot(t[r],e[r]);return n}function My(){return{app:null,config:{isNativeTag:j_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tA=0;function nA(t,e){return function(r,s=null){me(r)||(r=mt({},r)),s!=null&&!Ne(s)&&(s=null);const i=My(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:tA++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:lv,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&me(h.install)?(o.add(h),h.install(u,...f)):me(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,p){if(!c){const g=u._ceVNode||et(r,s);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(g,h):t(g,h,p),c=!0,u._container=h,h.__vue_app__=u,El(g.component)}},onUnmount(h){a.push(h)},unmount(){c&&(bn(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=_s;_s=u;try{return h()}finally{_s=f}}};return u}}let _s=null;function ys(t,e){if(Tt){let n=Tt.provides;const r=Tt.parent&&Tt.parent.provides;r===n&&(n=Tt.provides=Object.create(r)),n[t]=e}}function Ut(t,e,n=!1){const r=ya();if(r||_s){let s=_s?_s._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&me(e)?e.call(r&&r.proxy):e}}function Ly(){return!!(ya()||_s)}const Fy={},By=()=>Object.create(Fy),Uy=t=>Object.getPrototypeOf(t)===Fy;function rA(t,e,n,r=!1){const s={},i=By();t.propsDefaults=Object.create(null),jy(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Qn(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function sA(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Se(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(yl(t.emitsOptions,p))continue;const g=e[p];if(c)if(Ve(i,p))g!==i[p]&&(i[p]=g,u=!0);else{const w=mn(p);s[w]=nh(c,a,w,g,t,!1)}else g!==i[p]&&(i[p]=g,u=!0)}}}else{jy(t,e,s,i)&&(u=!0);let h;for(const f in a)(!e||!Ve(e,f)&&((h=Ds(f))===f||!Ve(e,h)))&&(c?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=nh(c,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!Ve(e,f))&&(delete i[f],u=!0)}u&&zn(t.attrs,"set","")}function jy(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(fi(c))continue;const u=e[c];let h;s&&Ve(s,h=mn(c))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:yl(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Se(n),u=a||Le;for(let h=0;h<i.length;h++){const f=i[h];n[f]=nh(s,c,f,u[f],t,!Ve(u,f))}}return o}function nh(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ve(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&me(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=va(s);r=u[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Ds(n))&&(r=!0))}return r}const iA=new WeakMap;function $y(t,e,n=!1){const r=n?iA:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!me(t)){const h=f=>{c=!0;const[p,g]=$y(f,e,!0);mt(o,p),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Ne(t)&&r.set(t,ui),ui;if(fe(i))for(let h=0;h<i.length;h++){const f=mn(i[h]);om(f)&&(o[f]=Le)}else if(i)for(const h in i){const f=mn(h);if(om(f)){const p=i[h],g=o[f]=fe(p)||me(p)?{type:p}:mt({},p),w=g.type;let R=!1,V=!0;if(fe(w))for(let N=0;N<w.length;++N){const D=w[N],E=me(D)&&D.name;if(E==="Boolean"){R=!0;break}else E==="String"&&(V=!1)}else R=me(w)&&w.name==="Boolean";g[0]=R,g[1]=V,(R||Ve(g,"default"))&&a.push(f)}}const u=[o,a];return Ne(t)&&r.set(t,u),u}function om(t){return t[0]!=="$"&&!fi(t)}const If=t=>t==="_"||t==="_ctx"||t==="$stable",bf=t=>fe(t)?t.map(nn):[nn(t)],oA=(t,e,n)=>{if(e._n)return e;const r=vf((...s)=>bf(e(...s)),n);return r._c=!1,r},qy=(t,e,n)=>{const r=t._ctx;for(const s in t){if(If(s))continue;const i=t[s];if(me(i))e[s]=oA(s,i,r);else if(i!=null){const o=bf(i);e[s]=()=>o}}},Gy=(t,e)=>{const n=bf(e);t.slots.default=()=>n},Hy=(t,e,n)=>{for(const r in e)(n||!If(r))&&(t[r]=e[r])},aA=(t,e,n)=>{const r=t.slots=By();if(t.vnode.shapeFlag&32){const s=e._;s?(Hy(r,e,n),n&&K_(r,"_",s,!0)):qy(e,r)}else e&&Gy(t,e)},cA=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Le;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Hy(s,e,n):(i=!e.$stable,qy(e,s)),o=e}else e&&(Gy(t,e),o={default:1});if(i)for(const a in s)!If(a)&&o[a]==null&&delete s[a]},vt=Zy;function lA(t){return Ky(t)}function uA(t){return Ky(t,Ob)}function Ky(t,e){const n=dl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:h,parentNode:f,nextSibling:p,setScopeId:g=Dn,insertStaticContent:w}=t,R=(A,x,L,H=null,j=null,K=null,Z=void 0,Q=null,W=!!x.dynamicChildren)=>{if(A===x)return;A&&!wn(A,x)&&(H=$(A),Qe(A,j,K,!0),A=null),x.patchFlag===-2&&(W=!1,x.dynamicChildren=null);const{type:z,ref:he,shapeFlag:te}=x;switch(z){case vs:V(A,x,L,H);break;case at:N(A,x,L,H);break;case hc:A==null&&D(x,L,H,Z);break;case Vt:S(A,x,L,H,j,K,Z,Q,W);break;default:te&1?k(A,x,L,H,j,K,Z,Q,W):te&6?T(A,x,L,H,j,K,Z,Q,W):(te&64||te&128)&&z.process(A,x,L,H,j,K,Z,Q,W,ce)}he!=null&&j?mi(he,A&&A.ref,K,x||A,!x):he==null&&A&&A.ref!=null&&mi(A.ref,null,K,A,!0)},V=(A,x,L,H)=>{if(A==null)r(x.el=a(x.children),L,H);else{const j=x.el=A.el;x.children!==A.children&&u(j,x.children)}},N=(A,x,L,H)=>{A==null?r(x.el=c(x.children||""),L,H):x.el=A.el},D=(A,x,L,H)=>{[A.el,A.anchor]=w(A.children,x,L,H,A.el,A.anchor)},E=({el:A,anchor:x},L,H)=>{let j;for(;A&&A!==x;)j=p(A),r(A,L,H),A=j;r(x,L,H)},C=({el:A,anchor:x})=>{let L;for(;A&&A!==x;)L=p(A),s(A),A=L;s(x)},k=(A,x,L,H,j,K,Z,Q,W)=>{x.type==="svg"?Z="svg":x.type==="math"&&(Z="mathml"),A==null?F(x,L,H,j,K,Z,Q,W):v(A,x,j,K,Z,Q,W)},F=(A,x,L,H,j,K,Z,Q)=>{let W,z;const{props:he,shapeFlag:te,transition:le,dirs:oe}=A;if(W=A.el=o(A.type,K,he&&he.is,he),te&8?h(W,A.children):te&16&&y(A.children,W,null,H,j,Eu(A,K),Z,Q),oe&&Pn(A,null,H,"created"),I(W,A,A.scopeId,Z,H),he){for(const Ce in he)Ce!=="value"&&!fi(Ce)&&i(W,Ce,null,he[Ce],K,H);"value"in he&&i(W,"value",null,he.value,K),(z=he.onVnodeBeforeMount)&&Kt(z,H,A)}oe&&Pn(A,null,H,"beforeMount");const de=zy(j,le);de&&le.beforeEnter(W),r(W,x,L),((z=he&&he.onVnodeMounted)||de||oe)&&vt(()=>{z&&Kt(z,H,A),de&&le.enter(W),oe&&Pn(A,null,H,"mounted")},j)},I=(A,x,L,H,j)=>{if(L&&g(A,L),H)for(let K=0;K<H.length;K++)g(A,H[K]);if(j){let K=j.subTree;if(x===K||Oc(K.type)&&(K.ssContent===x||K.ssFallback===x)){const Z=j.vnode;I(A,Z,Z.scopeId,Z.slotScopeIds,j.parent)}}},y=(A,x,L,H,j,K,Z,Q,W=0)=>{for(let z=W;z<A.length;z++){const he=A[z]=Q?Tr(A[z]):nn(A[z]);R(null,he,x,L,H,j,K,Z,Q)}},v=(A,x,L,H,j,K,Z)=>{const Q=x.el=A.el;let{patchFlag:W,dynamicChildren:z,dirs:he}=x;W|=A.patchFlag&16;const te=A.props||Le,le=x.props||Le;let oe;if(L&&Zr(L,!1),(oe=le.onVnodeBeforeUpdate)&&Kt(oe,L,x,A),he&&Pn(x,A,L,"beforeUpdate"),L&&Zr(L,!0),(te.innerHTML&&le.innerHTML==null||te.textContent&&le.textContent==null)&&h(Q,""),z?b(A.dynamicChildren,z,Q,L,H,Eu(x,j),K):Z||re(A,x,Q,null,L,H,Eu(x,j),K,!1),W>0){if(W&16)P(Q,te,le,L,j);else if(W&2&&te.class!==le.class&&i(Q,"class",null,le.class,j),W&4&&i(Q,"style",te.style,le.style,j),W&8){const de=x.dynamicProps;for(let Ce=0;Ce<de.length;Ce++){const Ae=de[Ce],gt=te[Ae],ht=le[Ae];(ht!==gt||Ae==="value")&&i(Q,Ae,gt,ht,j,L)}}W&1&&A.children!==x.children&&h(Q,x.children)}else!Z&&z==null&&P(Q,te,le,L,j);((oe=le.onVnodeUpdated)||he)&&vt(()=>{oe&&Kt(oe,L,x,A),he&&Pn(x,A,L,"updated")},H)},b=(A,x,L,H,j,K,Z)=>{for(let Q=0;Q<x.length;Q++){const W=A[Q],z=x[Q],he=W.el&&(W.type===Vt||!wn(W,z)||W.shapeFlag&198)?f(W.el):L;R(W,z,he,null,H,j,K,Z,!0)}},P=(A,x,L,H,j)=>{if(x!==L){if(x!==Le)for(const K in x)!fi(K)&&!(K in L)&&i(A,K,x[K],null,j,H);for(const K in L){if(fi(K))continue;const Z=L[K],Q=x[K];Z!==Q&&K!=="value"&&i(A,K,Q,Z,j,H)}"value"in L&&i(A,"value",x.value,L.value,j)}},S=(A,x,L,H,j,K,Z,Q,W)=>{const z=x.el=A?A.el:a(""),he=x.anchor=A?A.anchor:a("");let{patchFlag:te,dynamicChildren:le,slotScopeIds:oe}=x;oe&&(Q=Q?Q.concat(oe):oe),A==null?(r(z,L,H),r(he,L,H),y(x.children||[],L,he,j,K,Z,Q,W)):te>0&&te&64&&le&&A.dynamicChildren?(b(A.dynamicChildren,le,L,j,K,Z,Q),(x.key!=null||j&&x===j.subTree)&&Wy(A,x,!0)):re(A,x,L,he,j,K,Z,Q,W)},T=(A,x,L,H,j,K,Z,Q,W)=>{x.slotScopeIds=Q,A==null?x.shapeFlag&512?j.ctx.activate(x,L,H,Z,W):ge(x,L,H,j,K,Z,W):Ee(A,x,W)},ge=(A,x,L,H,j,K,Z)=>{const Q=A.component=DA(A,H,j);if(_a(A)&&(Q.ctx.renderer=ce),NA(Q,!1,Z),Q.asyncDep){if(j&&j.registerDep(Q,ie,Z),!A.el){const W=Q.subTree=et(at);N(null,W,x,L),A.placeholder=W.el}}else ie(Q,A,x,L,j,K,Z)},Ee=(A,x,L)=>{const H=x.component=A.component;if(wA(A,x,L))if(H.asyncDep&&!H.asyncResolved){pe(H,x,L);return}else H.next=x,H.update();else x.el=A.el,H.vnode=x},ie=(A,x,L,H,j,K,Z)=>{const Q=()=>{if(A.isMounted){let{next:te,bu:le,u:oe,parent:de,vnode:Ce}=A;{const Rt=Qy(A);if(Rt){te&&(te.el=Ce.el,pe(A,te,Z)),Rt.asyncDep.then(()=>{A.isUnmounted||Q()});return}}let Ae=te,gt;Zr(A,!1),te?(te.el=Ce.el,pe(A,te,Z)):te=Ce,le&&di(le),(gt=te.props&&te.props.onVnodeBeforeUpdate)&&Kt(gt,de,te,Ce),Zr(A,!0);const ht=wu(A),_t=A.subTree;A.subTree=ht,R(_t,ht,f(_t.el),$(_t),A,j,K),te.el=ht.el,Ae===null&&vl(A,ht.el),oe&&vt(oe,j),(gt=te.props&&te.props.onVnodeUpdated)&&vt(()=>Kt(gt,de,te,Ce),j)}else{let te;const{el:le,props:oe}=x,{bm:de,m:Ce,parent:Ae,root:gt,type:ht}=A,_t=xr(x);if(Zr(A,!1),de&&di(de),!_t&&(te=oe&&oe.onVnodeBeforeMount)&&Kt(te,Ae,x),Zr(A,!0),le&&ke){const Rt=()=>{A.subTree=wu(A),ke(le,A.subTree,A,j,null)};_t&&ht.__asyncHydrate?ht.__asyncHydrate(le,A,Rt):Rt()}else{gt.ce&&gt.ce._def.shadowRoot!==!1&&gt.ce._injectChildStyle(ht);const Rt=A.subTree=wu(A);R(null,Rt,L,H,A,j,K),x.el=Rt.el}if(Ce&&vt(Ce,j),!_t&&(te=oe&&oe.onVnodeMounted)){const Rt=x;vt(()=>Kt(te,Ae,Rt),j)}(x.shapeFlag&256||Ae&&xr(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&A.a&&vt(A.a,j),A.isMounted=!0,x=L=H=null}};A.scope.on();const W=A.effect=new ey(Q);A.scope.off();const z=A.update=W.run.bind(W),he=A.job=W.runIfDirty.bind(W);he.i=A,he.id=A.uid,W.scheduler=()=>yf(he),Zr(A,!0),z()},pe=(A,x,L)=>{x.component=A;const H=A.vnode.props;A.vnode=x,A.next=null,sA(A,x.props,H,L),cA(A,x.children,L),Zn(),Qp(A),er()},re=(A,x,L,H,j,K,Z,Q,W=!1)=>{const z=A&&A.children,he=A?A.shapeFlag:0,te=x.children,{patchFlag:le,shapeFlag:oe}=x;if(le>0){if(le&128){_n(z,te,L,H,j,K,Z,Q,W);return}else if(le&256){Fe(z,te,L,H,j,K,Z,Q,W);return}}oe&8?(he&16&&Gt(z,j,K),te!==z&&h(L,te)):he&16?oe&16?_n(z,te,L,H,j,K,Z,Q,W):Gt(z,j,K,!0):(he&8&&h(L,""),oe&16&&y(te,L,H,j,K,Z,Q,W))},Fe=(A,x,L,H,j,K,Z,Q,W)=>{A=A||ui,x=x||ui;const z=A.length,he=x.length,te=Math.min(z,he);let le;for(le=0;le<te;le++){const oe=x[le]=W?Tr(x[le]):nn(x[le]);R(A[le],oe,L,null,j,K,Z,Q,W)}z>he?Gt(A,j,K,!0,!1,te):y(x,L,H,j,K,Z,Q,W,te)},_n=(A,x,L,H,j,K,Z,Q,W)=>{let z=0;const he=x.length;let te=A.length-1,le=he-1;for(;z<=te&&z<=le;){const oe=A[z],de=x[z]=W?Tr(x[z]):nn(x[z]);if(wn(oe,de))R(oe,de,L,null,j,K,Z,Q,W);else break;z++}for(;z<=te&&z<=le;){const oe=A[te],de=x[le]=W?Tr(x[le]):nn(x[le]);if(wn(oe,de))R(oe,de,L,null,j,K,Z,Q,W);else break;te--,le--}if(z>te){if(z<=le){const oe=le+1,de=oe<he?x[oe].el:H;for(;z<=le;)R(null,x[z]=W?Tr(x[z]):nn(x[z]),L,de,j,K,Z,Q,W),z++}}else if(z>le)for(;z<=te;)Qe(A[z],j,K,!0),z++;else{const oe=z,de=z,Ce=new Map;for(z=de;z<=le;z++){const Nt=x[z]=W?Tr(x[z]):nn(x[z]);Nt.key!=null&&Ce.set(Nt.key,z)}let Ae,gt=0;const ht=le-de+1;let _t=!1,Rt=0;const fr=new Array(ht);for(z=0;z<ht;z++)fr[z]=0;for(z=oe;z<=te;z++){const Nt=A[z];if(gt>=ht){Qe(Nt,j,K,!0);continue}let an;if(Nt.key!=null)an=Ce.get(Nt.key);else for(Ae=de;Ae<=le;Ae++)if(fr[Ae-de]===0&&wn(Nt,x[Ae])){an=Ae;break}an===void 0?Qe(Nt,j,K,!0):(fr[an-de]=z+1,an>=Rt?Rt=an:_t=!0,R(Nt,x[an],L,null,j,K,Z,Q,W),gt++)}const js=_t?hA(fr):ui;for(Ae=js.length-1,z=ht-1;z>=0;z--){const Nt=de+z,an=x[Nt],$s=x[Nt+1],Zi=Nt+1<he?$s.el||$s.placeholder:H;fr[z]===0?R(null,an,L,Zi,j,K,Z,Q,W):_t&&(Ae<0||z!==js[Ae]?on(an,L,Zi,2):Ae--)}}},on=(A,x,L,H,j=null)=>{const{el:K,type:Z,transition:Q,children:W,shapeFlag:z}=A;if(z&6){on(A.component.subTree,x,L,H);return}if(z&128){A.suspense.move(x,L,H);return}if(z&64){Z.move(A,x,L,ce);return}if(Z===Vt){r(K,x,L);for(let te=0;te<W.length;te++)on(W[te],x,L,H);r(A.anchor,x,L);return}if(Z===hc){E(A,x,L);return}if(H!==2&&z&1&&Q)if(H===0)Q.beforeEnter(K),r(K,x,L),vt(()=>Q.enter(K),j);else{const{leave:te,delayLeave:le,afterLeave:oe}=Q,de=()=>{A.ctx.isUnmounted?s(K):r(K,x,L)},Ce=()=>{K._isLeaving&&K[Kn](!0),te(K,()=>{de(),oe&&oe()})};le?le(K,de,Ce):Ce()}else r(K,x,L)},Qe=(A,x,L,H=!1,j=!1)=>{const{type:K,props:Z,ref:Q,children:W,dynamicChildren:z,shapeFlag:he,patchFlag:te,dirs:le,cacheIndex:oe}=A;if(te===-2&&(j=!1),Q!=null&&(Zn(),mi(Q,null,L,A,!0),er()),oe!=null&&(x.renderCache[oe]=void 0),he&256){x.ctx.deactivate(A);return}const de=he&1&&le,Ce=!xr(A);let Ae;if(Ce&&(Ae=Z&&Z.onVnodeBeforeUnmount)&&Kt(Ae,x,A),he&6)en(A.component,L,H);else{if(he&128){A.suspense.unmount(L,H);return}de&&Pn(A,null,x,"beforeUnmount"),he&64?A.type.remove(A,x,L,ce,H):z&&!z.hasOnce&&(K!==Vt||te>0&&te&64)?Gt(z,x,L,!1,!0):(K===Vt&&te&384||!j&&he&16)&&Gt(W,x,L),H&&Je(A)}(Ce&&(Ae=Z&&Z.onVnodeUnmounted)||de)&&vt(()=>{Ae&&Kt(Ae,x,A),de&&Pn(A,null,x,"unmounted")},L)},Je=A=>{const{type:x,el:L,anchor:H,transition:j}=A;if(x===Vt){hr(L,H);return}if(x===hc){C(A);return}const K=()=>{s(L),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(A.shapeFlag&1&&j&&!j.persisted){const{leave:Z,delayLeave:Q}=j,W=()=>Z(L,K);Q?Q(A.el,K,W):W()}else K()},hr=(A,x)=>{let L;for(;A!==x;)L=p(A),s(A),A=L;s(x)},en=(A,x,L)=>{const{bum:H,scope:j,job:K,subTree:Z,um:Q,m:W,a:z}=A;kc(W),kc(z),H&&di(H),j.stop(),K&&(K.flags|=8,Qe(Z,A,x,L)),Q&&vt(Q,x),vt(()=>{A.isUnmounted=!0},x)},Gt=(A,x,L,H=!1,j=!1,K=0)=>{for(let Z=K;Z<A.length;Z++)Qe(A[Z],x,L,H,j)},$=A=>{if(A.shapeFlag&6)return $(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const x=p(A.anchor||A.el),L=x&&x[Cb];return L?p(L):x};let se=!1;const ee=(A,x,L)=>{A==null?x._vnode&&Qe(x._vnode,null,null,!0):R(x._vnode||null,A,x,null,null,null,L),x._vnode=A,se||(se=!0,Qp(),xc(),se=!1)},ce={p:R,um:Qe,m:on,r:Je,mt:ge,mc:y,pc:re,pbc:b,n:$,o:t};let ye,ke;return e&&([ye,ke]=e(ce)),{render:ee,hydrate:ye,createApp:nA(ee,ye)}}function Eu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Zr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function zy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Wy(t,e,n=!1){const r=t.children,s=e.children;if(fe(r)&&fe(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Tr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Wy(o,a)),a.type===vs&&a.patchFlag!==-1&&(a.el=o.el),a.type===at&&!a.el&&(a.el=o.el)}}function hA(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Qy(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Qy(e)}function kc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const fA=Symbol.for("v-scx"),dA=()=>Ut(fA);function yM(t,e){return Af(t,null,e)}function Vr(t,e,n){return Af(t,e,n)}function Af(t,e,n=Le){const{immediate:r,deep:s,flush:i,once:o}=n,a=mt({},n),c=e&&r||!e&&i!=="post";let u;if(Ti){if(i==="sync"){const g=dA();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=Dn,g.resume=Dn,g.pause=Dn,g}}const h=Tt;a.call=(g,w,R)=>bn(g,h,w,R);let f=!1;i==="post"?a.scheduler=g=>{vt(g,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(g,w)=>{w?g():yf(g)}),a.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const p=Rb(t,e,a);return Ti&&(u?u.push(p):c&&p()),p}function pA(t,e,n){const r=this.proxy,s=We(t)?t.includes(".")?Jy(r,t):()=>r[t]:t.bind(r,r);let i;me(e)?i=e:(i=e.handler,n=e);const o=va(this),a=Af(s,i.bind(r),n);return o(),a}function Jy(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const mA=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${mn(e)}Modifiers`]||t[`${Ds(e)}Modifiers`];function gA(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Le;let s=n;const i=e.startsWith("update:"),o=i&&mA(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>We(h)?h.trim():h)),o.number&&(s=n.map(jI)));let a,c=r[a=hu(e)]||r[a=hu(mn(e))];!c&&i&&(c=r[a=hu(Ds(e))]),c&&bn(c,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,bn(u,t,6,s)}}const _A=new WeakMap;function Yy(t,e,n=!1){const r=n?_A:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!me(t)){const c=u=>{const h=Yy(u,e,!0);h&&(a=!0,mt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Ne(t)&&r.set(t,null),null):(fe(i)?i.forEach(c=>o[c]=null):mt(o,i),Ne(t)&&r.set(t,o),o)}function yl(t,e){return!t||!ma(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ve(t,e[0].toLowerCase()+e.slice(1))||Ve(t,Ds(e))||Ve(t,e))}function wu(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:h,props:f,data:p,setupState:g,ctx:w,inheritAttrs:R}=t,V=Vc(t);let N,D;try{if(n.shapeFlag&4){const C=s||r,k=C;N=nn(u.call(k,C,h,f,g,p,w)),D=a}else{const C=e;N=nn(C.length>1?C(f,{attrs:a,slots:o,emit:c}):C(f,null)),D=e.props?a:vA(a)}}catch(C){Do.length=0,$i(C,t,1),N=et(at)}let E=N;if(D&&R!==!1){const C=Object.keys(D),{shapeFlag:k}=E;C.length&&k&7&&(i&&C.some(cf)&&(D=EA(D,i)),E=nr(E,D,!1,!0))}return n.dirs&&(E=nr(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&Ei(E,n.transition),N=E,Vc(V),N}function yA(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(ws(s)){if(s.type!==at||s.children==="v-if"){if(n)return;n=s}}else return}return n}const vA=t=>{let e;for(const n in t)(n==="class"||n==="style"||ma(n))&&((e||(e={}))[n]=t[n]);return e},EA=(t,e)=>{const n={};for(const r in t)(!cf(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function wA(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?am(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==r[p]&&!yl(u,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?am(r,o,u):!0:!!o;return!1}function am(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!yl(n,i))return!0}return!1}function vl({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Oc=t=>t.__isSuspense;let rh=0;const TA={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,c,u){if(t==null)IA(e,n,r,s,i,o,a,c,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}bA(t,e,n,r,s,o,a,c,u)}},hydrate:AA,normalize:RA},Rf=TA;function Ko(t,e){const n=t.props&&t.props[e];me(n)&&n()}function IA(t,e,n,r,s,i,o,a,c){const{p:u,o:{createElement:h}}=c,f=h("div"),p=t.suspense=Xy(t,s,r,e,f,n,i,o,a,c);u(null,p.pendingBranch=t.ssContent,f,null,r,p,i,o),p.deps>0?(Ko(t,"onPending"),Ko(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,i,o),gi(p,t.ssFallback)):p.resolve(!1,!0)}function bA(t,e,n,r,s,i,o,a,{p:c,um:u,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,g=e.ssFallback,{activeBranch:w,pendingBranch:R,isInFallback:V,isHydrating:N}=f;if(R)f.pendingBranch=p,wn(R,p)?(c(R,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():V&&(N||(c(w,g,n,r,s,null,i,o,a),gi(f,g)))):(f.pendingId=rh++,N?(f.isHydrating=!1,f.activeBranch=R):u(R,s,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),V?(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():(c(w,g,n,r,s,null,i,o,a),gi(f,g))):w&&wn(w,p)?(c(w,p,n,r,s,f,i,o,a),f.resolve(!0)):(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0&&f.resolve()));else if(w&&wn(w,p))c(w,p,n,r,s,f,i,o,a),gi(f,p);else if(Ko(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=rh++,c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:D,pendingId:E}=f;D>0?setTimeout(()=>{f.pendingId===E&&f.fallback(g)},D):D===0&&f.fallback(g)}}function Xy(t,e,n,r,s,i,o,a,c,u,h=!1){const{p:f,m:p,um:g,n:w,o:{parentNode:R,remove:V}}=u;let N;const D=SA(t);D&&e&&e.pendingBranch&&(N=e.pendingId,e.deps++);const E=t.props?z_(t.props.timeout):void 0,C=i,k={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:rh++,timeout:typeof E=="number"?E:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(F=!1,I=!1){const{vnode:y,activeBranch:v,pendingBranch:b,pendingId:P,effects:S,parentComponent:T,container:ge}=k;let Ee=!1;k.isHydrating?k.isHydrating=!1:F||(Ee=v&&b.transition&&b.transition.mode==="out-in",Ee&&(v.transition.afterLeave=()=>{P===k.pendingId&&(p(b,ge,i===C?w(v):i,0),Yu(S))}),v&&(R(v.el)===ge&&(i=w(v)),g(v,T,k,!0)),Ee||p(b,ge,i,0)),gi(k,b),k.pendingBranch=null,k.isInFallback=!1;let ie=k.parent,pe=!1;for(;ie;){if(ie.pendingBranch){ie.effects.push(...S),pe=!0;break}ie=ie.parent}!pe&&!Ee&&Yu(S),k.effects=[],D&&e&&e.pendingBranch&&N===e.pendingId&&(e.deps--,e.deps===0&&!I&&e.resolve()),Ko(y,"onResolve")},fallback(F){if(!k.pendingBranch)return;const{vnode:I,activeBranch:y,parentComponent:v,container:b,namespace:P}=k;Ko(I,"onFallback");const S=w(y),T=()=>{k.isInFallback&&(f(null,F,b,S,v,null,P,a,c),gi(k,F))},ge=F.transition&&F.transition.mode==="out-in";ge&&(y.transition.afterLeave=T),k.isInFallback=!0,g(y,v,null,!0),ge||T()},move(F,I,y){k.activeBranch&&p(k.activeBranch,F,I,y),k.container=F},next(){return k.activeBranch&&w(k.activeBranch)},registerDep(F,I,y){const v=!!k.pendingBranch;v&&k.deps++;const b=F.vnode.el;F.asyncDep.catch(P=>{$i(P,F,0)}).then(P=>{if(F.isUnmounted||k.isUnmounted||k.pendingId!==F.suspenseId)return;F.asyncResolved=!0;const{vnode:S}=F;ih(F,P),b&&(S.el=b);const T=!b&&F.subTree.el;I(F,S,R(b||F.subTree.el),b?null:w(F.subTree),k,o,y),T&&V(T),vl(F,S.el),v&&--k.deps===0&&k.resolve()})},unmount(F,I){k.isUnmounted=!0,k.activeBranch&&g(k.activeBranch,n,F,I),k.pendingBranch&&g(k.pendingBranch,n,F,I)}};return k}function AA(t,e,n,r,s,i,o,a,c){const u=e.suspense=Xy(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=c(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function RA(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=cm(r?n.default:n),t.ssFallback=r?cm(n.fallback):et(at)}function cm(t){let e;if(me(t)){const n=wi&&t._c;n&&(t._d=!1,un()),t=t(),n&&(t._d=!0,e=Wt,ev())}return fe(t)&&(t=yA(t)),t=nn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Zy(t,e){e&&e.pendingBranch?fe(t)?e.effects.push(...t):e.effects.push(t):Yu(t)}function gi(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,vl(r,s))}function SA(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Vt=Symbol.for("v-fgt"),vs=Symbol.for("v-txt"),at=Symbol.for("v-cmt"),hc=Symbol.for("v-stc"),Do=[];let Wt=null;function un(t=!1){Do.push(Wt=t?null:[])}function ev(){Do.pop(),Wt=Do[Do.length-1]||null}let wi=1;function Mc(t,e=!1){wi+=t,t<0&&Wt&&e&&(Wt.hasOnce=!0)}function tv(t){return t.dynamicChildren=wi>0?Wt||ui:null,ev(),wi>0&&Wt&&Wt.push(t),t}function PA(t,e,n,r,s,i){return tv(rv(t,e,n,r,s,i,!0))}function Cn(t,e,n,r,s){return tv(et(t,e,n,r,s,!0))}function ws(t){return t?t.__v_isVNode===!0:!1}function wn(t,e){return t.type===e.type&&t.key===e.key}const nv=({key:t})=>t??null,fc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?We(t)||pt(t)||me(t)?{i:bt,r:t,k:e,f:!!n}:t:null);function rv(t,e=null,n=null,r=0,s=null,i=t===Vt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&nv(e),ref:e&&fc(e),scopeId:vy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:bt};return a?(Sf(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=We(n)?8:16),wi>0&&!o&&Wt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Wt.push(c),c}const et=CA;function CA(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Vy)&&(t=at),ws(t)){const a=nr(t,e,!0);return n&&Sf(a,n),wi>0&&!i&&Wt&&(a.shapeFlag&6?Wt[Wt.indexOf(t)]=a:Wt.push(a)),a.patchFlag=-2,a}if(LA(t)&&(t=t.__vccOpts),e){e=sv(e);let{class:a,style:c}=e;a&&!We(a)&&(e.class=ml(a)),Ne(c)&&(_f(c)&&!fe(c)&&(c=mt({},c)),e.style=pl(c))}const o=We(t)?1:Oc(t)?128:Ey(t)?64:Ne(t)?4:me(t)?2:0;return rv(t,e,n,r,s,o,i,!0)}function sv(t){return t?_f(t)||Uy(t)?mt({},t):t:null}function nr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,u=e?ov(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&nv(u),ref:e&&e.ref?n&&i?fe(i)?i.concat(fc(e)):[i,fc(e)]:fc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Vt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&nr(t.ssContent),ssFallback:t.ssFallback&&nr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Ei(h,c.clone(h)),h}function iv(t=" ",e=0){return et(vs,null,t,e)}function vM(t="",e=!1){return e?(un(),Cn(at,null,t)):et(at,null,t)}function nn(t){return t==null||typeof t=="boolean"?et(at):fe(t)?et(Vt,null,t.slice()):ws(t)?Tr(t):et(vs,null,String(t))}function Tr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:nr(t)}function Sf(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(fe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Sf(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Uy(e)?e._ctx=bt:s===3&&bt&&(bt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else me(e)?(e={default:e,_ctx:bt},n=32):(e=String(e),r&64?(n=16,e=[iv(e)]):n=8);t.children=e,t.shapeFlag|=n}function ov(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=ml([e.class,r.class]));else if(s==="style")e.style=pl([e.style,r.style]);else if(ma(s)){const i=e[s],o=r[s];o&&i!==o&&!(fe(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Kt(t,e,n,r=null){bn(t,e,7,[n,r])}const xA=My();let VA=0;function DA(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||xA,i={uid:VA++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Y_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$y(r,s),emitsOptions:Yy(r,s),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:r.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=gA.bind(null,i),t.ce&&t.ce(i),i}let Tt=null;const ya=()=>Tt||bt;let Lc,sh;{const t=dl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Lc=e("__VUE_INSTANCE_SETTERS__",n=>Tt=n),sh=e("__VUE_SSR_SETTERS__",n=>Ti=n)}const va=t=>{const e=Tt;return Lc(t),t.scope.on(),()=>{t.scope.off(),Lc(e)}},lm=()=>{Tt&&Tt.scope.off(),Lc(null)};function av(t){return t.vnode.shapeFlag&4}let Ti=!1;function NA(t,e=!1,n=!1){e&&sh(e);const{props:r,children:s}=t.vnode,i=av(t);rA(t,r,i,e),aA(t,s,n||e);const o=i?kA(t,e):void 0;return e&&sh(!1),o}function kA(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Qb);const{setup:r}=n;if(r){Zn();const s=t.setupContext=r.length>1?MA(t):null,i=va(t),o=ga(r,t,0,[t.props,s]),a=q_(o);if(er(),i(),(a||t.sp)&&!xr(t)&&Ef(t),a){if(o.then(lm,lm),e)return o.then(c=>{ih(t,c)}).catch(c=>{$i(c,t,0)});t.asyncDep=o}else ih(t,o)}else cv(t)}function ih(t,e,n){me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ne(e)&&(t.setupState=my(e)),cv(t)}function cv(t,e,n){const r=t.type;t.render||(t.render=r.render||Dn);{const s=va(t);Zn();try{Jb(t)}finally{er(),s()}}}const OA={get(t,e){return xt(t,"get",""),t[e]}};function MA(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,OA),slots:t.slots,emit:t.emit,expose:e}}function El(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(my(gb(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Vo)return Vo[n](t)},has(e,n){return n in e||n in Vo}})):t.proxy}function oh(t,e=!0){return me(t)?t.displayName||t.name:t.name||e&&t.__name}function LA(t){return me(t)&&"__vccOpts"in t}const rn=(t,e)=>bb(t,e,Ti);function Qt(t,e,n){try{Mc(-1);const r=arguments.length;return r===2?Ne(e)&&!fe(e)?ws(e)?et(t,null,[e]):et(t,e):et(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ws(n)&&(n=[n]),et(t,e,n))}finally{Mc(1)}}const lv="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ah;const um=typeof window<"u"&&window.trustedTypes;if(um)try{ah=um.createPolicy("vue",{createHTML:t=>t})}catch{}const uv=ah?t=>ah.createHTML(t):t=>t,FA="http://www.w3.org/2000/svg",BA="http://www.w3.org/1998/Math/MathML",Hn=typeof document<"u"?document:null,hm=Hn&&Hn.createElement("template"),UA={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Hn.createElementNS(FA,t):e==="mathml"?Hn.createElementNS(BA,t):n?Hn.createElement(t,{is:n}):Hn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Hn.createTextNode(t),createComment:t=>Hn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Hn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{hm.innerHTML=uv(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=hm.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},_r="transition",po="animation",zo=Symbol("_vtc"),hv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},jA=mt({},wy,hv),$A=t=>(t.displayName="Transition",t.props=jA,t),fv=$A((t,{slots:e})=>Qt(Db,qA(t),e)),es=(t,e=[])=>{fe(t)?t.forEach(n=>n(...e)):t&&t(...e)},fm=t=>t?fe(t)?t.some(e=>e.length>1):t.length>1:!1;function qA(t){const e={};for(const S in t)S in hv||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,w=GA(s),R=w&&w[0],V=w&&w[1],{onBeforeEnter:N,onEnter:D,onEnterCancelled:E,onLeave:C,onLeaveCancelled:k,onBeforeAppear:F=N,onAppear:I=D,onAppearCancelled:y=E}=e,v=(S,T,ge,Ee)=>{S._enterCancelled=Ee,ts(S,T?h:a),ts(S,T?u:o),ge&&ge()},b=(S,T)=>{S._isLeaving=!1,ts(S,f),ts(S,g),ts(S,p),T&&T()},P=S=>(T,ge)=>{const Ee=S?I:D,ie=()=>v(T,S,ge);es(Ee,[T,ie]),dm(()=>{ts(T,S?c:i),qn(T,S?h:a),fm(Ee)||pm(T,r,R,ie)})};return mt(e,{onBeforeEnter(S){es(N,[S]),qn(S,i),qn(S,o)},onBeforeAppear(S){es(F,[S]),qn(S,c),qn(S,u)},onEnter:P(!1),onAppear:P(!0),onLeave(S,T){S._isLeaving=!0;const ge=()=>b(S,T);qn(S,f),S._enterCancelled?(qn(S,p),_m(S)):(_m(S),qn(S,p)),dm(()=>{S._isLeaving&&(ts(S,f),qn(S,g),fm(C)||pm(S,r,V,ge))}),es(C,[S,ge])},onEnterCancelled(S){v(S,!1,void 0,!0),es(E,[S])},onAppearCancelled(S){v(S,!0,void 0,!0),es(y,[S])},onLeaveCancelled(S){b(S),es(k,[S])}})}function GA(t){if(t==null)return null;if(Ne(t))return[Tu(t.enter),Tu(t.leave)];{const e=Tu(t);return[e,e]}}function Tu(t){return z_(t)}function qn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[zo]||(t[zo]=new Set)).add(e)}function ts(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[zo];n&&(n.delete(e),n.size||(t[zo]=void 0))}function dm(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let HA=0;function pm(t,e,n,r){const s=t._endId=++HA,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=KA(t,e);if(!o)return r();const u=o+"end";let h=0;const f=()=>{t.removeEventListener(u,p),i()},p=g=>{g.target===t&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},a+1),t.addEventListener(u,p)}function KA(t,e){const n=window.getComputedStyle(t),r=w=>(n[w]||"").split(", "),s=r(`${_r}Delay`),i=r(`${_r}Duration`),o=mm(s,i),a=r(`${po}Delay`),c=r(`${po}Duration`),u=mm(a,c);let h=null,f=0,p=0;e===_r?o>0&&(h=_r,f=o,p=i.length):e===po?u>0&&(h=po,f=u,p=c.length):(f=Math.max(o,u),h=f>0?o>u?_r:po:null,p=h?h===_r?i.length:c.length:0);const g=h===_r&&/\b(?:transform|all)(?:,|$)/.test(r(`${_r}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:g}}function mm(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>gm(n)+gm(t[r])))}function gm(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function _m(t){return(t?t.ownerDocument:document).body.offsetHeight}function zA(t,e,n){const r=t[zo];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ym=Symbol("_vod"),WA=Symbol("_vsh"),QA=Symbol(""),JA=/(?:^|;)\s*display\s*:/;function YA(t,e,n){const r=t.style,s=We(n);let i=!1;if(n&&!s){if(e)if(We(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&dc(r,a,"")}else for(const o in e)n[o]==null&&dc(r,o,"");for(const o in n)o==="display"&&(i=!0),dc(r,o,n[o])}else if(s){if(e!==n){const o=r[QA];o&&(n+=";"+o),r.cssText=n,i=JA.test(n)}}else e&&t.removeAttribute("style");ym in t&&(t[ym]=i?r.display:"",t[WA]&&(r.display="none"))}const vm=/\s*!important$/;function dc(t,e,n){if(fe(n))n.forEach(r=>dc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=XA(t,e);vm.test(n)?t.setProperty(Ds(r),n.replace(vm,""),"important"):t[r]=n}}const Em=["Webkit","Moz","ms"],Iu={};function XA(t,e){const n=Iu[e];if(n)return n;let r=mn(e);if(r!=="filter"&&r in t)return Iu[e]=r;r=fl(r);for(let s=0;s<Em.length;s++){const i=Em[s]+r;if(i in t)return Iu[e]=i}return e}const wm="http://www.w3.org/1999/xlink";function Tm(t,e,n,r,s,i=WI(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(wm,e.slice(6,e.length)):t.setAttributeNS(wm,e,n):n==null||i&&!W_(n)?t.removeAttribute(e):t.setAttribute(e,i?"":In(n)?String(n):n)}function Im(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?uv(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=W_(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function dv(t,e,n,r){t.addEventListener(e,n,r)}function ZA(t,e,n,r){t.removeEventListener(e,n,r)}const bm=Symbol("_vei");function eR(t,e,n,r,s=null){const i=t[bm]||(t[bm]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=tR(e);if(r){const u=i[e]=sR(r,s);dv(t,a,u,c)}else o&&(ZA(t,a,o,c),i[e]=void 0)}}const Am=/(?:Once|Passive|Capture)$/;function tR(t){let e;if(Am.test(t)){e={};let r;for(;r=t.match(Am);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ds(t.slice(2)),e]}let bu=0;const nR=Promise.resolve(),rR=()=>bu||(nR.then(()=>bu=0),bu=Date.now());function sR(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;bn(iR(r,n.value),e,5,[r])};return n.value=t,n.attached=rR(),n}function iR(t,e){if(fe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Rm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,oR=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?zA(t,r,o):e==="style"?YA(t,n,r):ma(e)?cf(e)||eR(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):aR(t,e,r,o))?(Im(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Tm(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!We(r))?Im(t,mn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Tm(t,e,r,o))};function aR(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Rm(e)&&me(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Rm(e)&&We(n)?!1:e in t}const Sm=t=>{const e=t.props["onUpdate:modelValue"]||!1;return fe(e)?n=>di(e,n):e},Au=Symbol("_assign"),EM={created(t,{value:e},n){t.checked=Ac(e,n.props.value),t[Au]=Sm(n),dv(t,"change",()=>{t[Au](cR(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Au]=Sm(r),e!==n&&(t.checked=Ac(e,r.props.value))}};function cR(t){return"_value"in t?t._value:t.value}const pv=mt({patchProp:oR},UA);let No,Pm=!1;function lR(){return No||(No=lA(pv))}function uR(){return No=Pm?No:uA(pv),Pm=!0,No}const hR=(...t)=>{const e=lR().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=gv(r);if(!s)return;const i=e._component;!me(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,mv(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e},fR=(...t)=>{const e=uR().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=gv(r);if(s)return n(s,!0,mv(s))},e};function mv(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function gv(t){return We(t)?document.querySelector(t):t}const dR=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,pR=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,mR=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function gR(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){_R(t);return}return e}function _R(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Fc(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!mR.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(dR.test(t)||pR.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,gR)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const yR=/#/g,vR=/&/g,ER=/\//g,wR=/=/g,Pf=/\+/g,TR=/%5e/gi,IR=/%60/gi,bR=/%7c/gi,AR=/%20/gi;function RR(t){return encodeURI(""+t).replace(bR,"|")}function ch(t){return RR(typeof t=="string"?t:JSON.stringify(t)).replace(Pf,"%2B").replace(AR,"+").replace(yR,"%23").replace(vR,"%26").replace(IR,"`").replace(TR,"^").replace(ER,"%2F")}function Ru(t){return ch(t).replace(wR,"%3D")}function Bc(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function SR(t){return Bc(t.replace(Pf," "))}function PR(t){return Bc(t.replace(Pf," "))}function CR(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=SR(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=PR(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function xR(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${Ru(t)}=${ch(n)}`).join("&"):`${Ru(t)}=${ch(e)}`:Ru(t)}function VR(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>xR(e,t[e])).filter(Boolean).join("&")}const DR=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,NR=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,kR=/^([/\\]\s*){2,}[^/\\]/,OR=/^[\s\0]*(blob|data|javascript|vbscript):$/i,MR=/\/$|\/\?|\/#/,LR=/^\.?\//;function Ns(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?DR.test(t):NR.test(t)||(e.acceptRelative?kR.test(t):!1)}function FR(t){return!!t&&OR.test(t)}function lh(t="",e){return e?MR.test(t):t.endsWith("/")}function Cf(t="",e){if(!e)return(lh(t)?t.slice(0,-1):t)||"/";if(!lh(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");s!==-1&&(n=t.slice(0,s),r=t.slice(s));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function uh(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(lh(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");if(s!==-1&&(n=t.slice(0,s),r=t.slice(s),!n))return r;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function BR(t=""){return t.startsWith("/")}function Cm(t=""){return BR(t)?t:"/"+t}function UR(t,e){if(yv(e)||Ns(t))return t;const n=Cf(e);return t.startsWith(n)?t:xf(n,t)}function xm(t,e){if(yv(e))return t;const n=Cf(e);if(!t.startsWith(n))return t;const r=t.slice(n.length);return r[0]==="/"?r:"/"+r}function _v(t,e){const n=qR(t),r={...CR(n.search),...e};return n.search=VR(r),GR(n)}function yv(t){return!t||t==="/"}function jR(t){return t&&t!=="/"}function xf(t,...e){let n=t||"";for(const r of e.filter(s=>jR(s)))if(n){const s=r.replace(LR,"");n=uh(n)+s}else n=r;return n}function vv(...t){var o,a,c,u;const e=/\/(?!\/)/,n=t.filter(Boolean),r=[];let s=0;for(const h of n)if(!(!h||h==="/")){for(const[f,p]of h.split(e).entries())if(!(!p||p===".")){if(p===".."){if(r.length===1&&Ns(r[0]))continue;r.pop(),s--;continue}if(f===1&&((o=r[r.length-1])!=null&&o.endsWith(":/"))){r[r.length-1]+="/"+p;continue}r.push(p),s++}}let i=r.join("/");return s>=0?(a=n[0])!=null&&a.startsWith("/")&&!i.startsWith("/")?i="/"+i:(c=n[0])!=null&&c.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,(u=n[n.length-1])!=null&&u.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function $R(t,e,n={}){return n.trailingSlash||(t=uh(t),e=uh(e)),n.leadingSlash||(t=Cm(t),e=Cm(e)),n.encoding||(t=Bc(t),e=Bc(e)),t===e}const Ev=Symbol.for("ufo:protocolRelative");function qR(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,p=""]=n;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!Ns(t,{acceptRelative:!0}))return Vm(t);const[,r="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:u,hash:h}=Vm(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:u,hash:h,[Ev]:!r}}function Vm(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function GR(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[Ev]?(t.protocol||"")+"//":"")+s+i+e+n+r}class HR extends Error{constructor(e,n){super(e,n),this.name="FetchError",n!=null&&n.cause&&!this.cause&&(this.cause=n.cause)}}function KR(t){var c,u,h,f,p;const e=((c=t.error)==null?void 0:c.message)||((u=t.error)==null?void 0:u.toString())||"",n=((h=t.request)==null?void 0:h.method)||((f=t.options)==null?void 0:f.method)||"GET",r=((p=t.request)==null?void 0:p.url)||String(t.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new HR(o,t.error?{cause:t.error}:void 0);for(const g of["request","options","response"])Object.defineProperty(a,g,{get(){return t[g]}});for(const[g,w]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,g,{get(){return t.response&&t.response[w]}});return a}const zR=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Dm(t="GET"){return zR.has(t.toUpperCase())}function WR(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const QR=new Set(["image/svg","application/xml","application/xhtml","application/html"]),JR=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function YR(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return JR.test(e)?"json":QR.has(e)||e.startsWith("text/")?"text":"blob"}function XR(t,e,n,r){const s=ZR((e==null?void 0:e.headers)??(t==null?void 0:t.headers),n==null?void 0:n.headers,r);let i;return(n!=null&&n.query||n!=null&&n.params||e!=null&&e.params||e!=null&&e.query)&&(i={...n==null?void 0:n.params,...n==null?void 0:n.query,...e==null?void 0:e.params,...e==null?void 0:e.query}),{...n,...e,query:i,params:i,headers:s}}function ZR(t,e,n){if(!e)return new n(t);const r=new n(e);if(t)for(const[s,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))r.set(s,i);return r}async function nc(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const eS=new Set([408,409,425,429,500,502,503,504]),tS=new Set([101,204,205,304]);function wv(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function s(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let h;typeof a.options.retry=="number"?h=a.options.retry:h=Dm(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):eS.has(f))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(g=>setTimeout(g,p)),i(a.request,{...a.options,retry:h-1})}}const u=KR(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(c,u={}){const h={request:c,options:XR(c,u,t.defaults,n),response:void 0,error:void 0};h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&await nc(h,h.options.onRequest),typeof h.request=="string"&&(h.options.baseURL&&(h.request=UR(h.request,h.options.baseURL)),h.options.query&&(h.request=_v(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&Dm(h.options.method)&&(WR(h.options.body)?(h.options.body=typeof h.options.body=="string"?h.options.body:JSON.stringify(h.options.body),h.options.headers=new n(h.options.headers||{}),h.options.headers.has("content-type")||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")):("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half")));let f;if(!h.options.signal&&h.options.timeout){const g=new r;f=setTimeout(()=>{const w=new Error("[TimeoutError]: The operation was aborted due to timeout");w.name="TimeoutError",w.code=23,g.abort(w)},h.options.timeout),h.options.signal=g.signal}try{h.response=await e(h.request,h.options)}catch(g){return h.error=g,h.options.onRequestError&&await nc(h,h.options.onRequestError),await s(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!tS.has(h.response.status)&&h.options.method!=="HEAD"){const g=(h.options.parseResponse?"json":h.options.responseType)||YR(h.response.headers.get("content-type")||"");switch(g){case"json":{const w=await h.response.text(),R=h.options.parseResponse||Fc;h.response._data=R(w);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[g]()}}return h.options.onResponse&&await nc(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await nc(h,h.options.onResponseError),await s(h)):h.response},o=async function(c,u){return(await i(c,u))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},c={})=>wv({...t,...c,defaults:{...t.defaults,...c.defaults,...a}}),o}const Uc=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),nS=Uc.fetch?(...t)=>Uc.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),rS=Uc.Headers,sS=Uc.AbortController,iS=wv({fetch:nS,Headers:rS,AbortController:sS}),oS=iS,aS=()=>{var t;return((t=window==null?void 0:window.__NUXT__)==null?void 0:t.config)||{}},jc=aS().app,cS=()=>jc.baseURL,lS=()=>jc.buildAssetsDir,Vf=(...t)=>vv(Tv(),lS(),...t),Tv=(...t)=>{const e=jc.cdnURL||jc.baseURL;return t.length?vv(e,...t):e};globalThis.__buildAssetsURL=Vf,globalThis.__publicAssetsURL=Tv;globalThis.$fetch||(globalThis.$fetch=oS.create({baseURL:cS()}));function hh(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?hh(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const uS={run:t=>t()},hS=()=>uS,Iv=typeof console.createTask<"u"?console.createTask:hS;function fS(t,e){const n=e.shift(),r=Iv(n);return t.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function dS(t,e){const n=e.shift(),r=Iv(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}function Su(t,e){for(const n of[...t])n(e)}class pS{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=hh(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const n=hh(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(fS,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(dS,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&Su(this._before,s);const i=e(n in this._hooks?[...this._hooks[n]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&Su(this._after,s)}):(this._after&&s&&Su(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function bv(){return new pS}function mS(t={}){let e,n=!1;const r=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||r(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{r(o),e=o;try{return s?s.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const c=()=>{e=o},u=()=>e===o?c:void 0;fh.add(u);try{const h=s?s.run(o,a):a();return n||(e=void 0),await h}finally{fh.delete(u)}}}}function gS(t={}){const e={};return{get(n,r={}){return e[n]||(e[n]=mS({...t,...r})),e[n]}}}const $c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Nm="__unctx__",_S=$c[Nm]||($c[Nm]=gS()),yS=(t,e={})=>_S.get(t,e),km="__unctx_async_handlers__",fh=$c[km]||($c[km]=new Set);function _i(t){const e=[];for(const s of fh){const i=s();i&&e.push(i)}const n=()=>{for(const s of e)s()};let r=t();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const vS=!1,dh=!1,ES=!1,wM={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},wS=null,TS="#__nuxt",Av="nuxt-app",Om=36e5,IS="vite:preloadError";function Rv(t=Av){return yS(t,{asyncContext:!1})}const bS="__nuxt_plugin";function AS(t){var s;let e=0;const n={_id:t.id||Av||"nuxt-app",_scope:X_(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.14.0"},get vue(){return n.vueApp.version}},payload:Qn({...((s=t.ssrContext)==null?void 0:s.payload)||{},data:Qn({}),state:or({}),once:new Set,_errors:Qn({})}),static:{data:{}},runWithContext(i){return n._scope.active&&!Z_()?n._scope.run(()=>Mm(n,i)):Mm(n,i)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let i=!1;return()=>{if(!i&&(i=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Qn({}),_payloadRevivers:{},...t};{const i=window.__NUXT__;if(i)for(const o in i)switch(o){case"data":case"state":case"_errors":Object.assign(n.payload[o],i[o]);break;default:n.payload[o]=i[o]}}n.hooks=bv(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(i,o)=>{const a="$"+i;rc(n,a,o),rc(n.vueApp.config.globalProperties,a,o)},rc(n.vueApp,"$nuxt",n),rc(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(IS,o=>{n.callHook("app:chunkError",{error:o.payload}),(n.isHydrating||o.payload.message.includes("Unable to preload CSS"))&&o.preventDefault()}),window.useNuxtApp=window.useNuxtApp||st;const i=n.hook("app:error",(...o)=>{console.error("[nuxt] error caught during app initialization",...o)});n.hook("app:mounted",i)}const r=n.payload.config;return n.provide("config",r),n}function RS(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function SS(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}}async function PS(t,e){const n=[],r=[],s=[],i=[];let o=0;async function a(c){var h;const u=((h=c.dependsOn)==null?void 0:h.filter(f=>e.some(p=>p._name===f)&&!n.includes(f)))??[];if(u.length>0)r.push([new Set(u),c]);else{const f=SS(t,c).then(async()=>{c._name&&(n.push(c._name),await Promise.all(r.map(async([p,g])=>{p.has(c._name)&&(p.delete(c._name),p.size===0&&(o++,await a(g)))})))});c.parallel?s.push(f.catch(p=>i.push(p))):await f}}for(const c of e)RS(t,c);for(const c of e)await a(c);if(await Promise.all(s),o)for(let c=0;c<o;c++)await Promise.all(s);if(i.length)throw i[0]}function Fn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[bS]:!0,_name:e})}function Mm(t,e,n){const r=()=>e();return Rv(t._id).set(t),t.vueApp.runWithContext(r)}function CS(t){var n;let e;return Ly()&&(e=(n=ya())==null?void 0:n.appContext.app.$nuxt),e=e||Rv(t).tryUse(),e||null}function st(t){const e=CS(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function wl(t){return st().$config}function rc(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function xS(t,e){return{ctx:{table:t},matchAll:n=>Pv(n,t)}}function Sv(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([r,s])=>[r,Sv(s)])):new Map(Object.entries(t[n]));return e}function VS(t){return xS(Sv(t))}function Pv(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const r=[];for(const[i,o]of Lm(e.wildcard))(t===i||t.startsWith(i+"/"))&&r.push(o);for(const[i,o]of Lm(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");r.push(...Pv(a,o))}const s=e.static.get(t);return s&&r.push(s),r.filter(Boolean)}function Lm(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function Pu(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function ph(t,e,n=".",r){if(!Pu(e))return ph(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:Pu(o)&&Pu(s[i])?s[i]=ph(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function DS(t){return(...e)=>e.reduce((n,r)=>ph(n,r,"",t),{})}const Cv=DS();function NS(t,e){try{return e in t}catch{return!1}}class mh extends Error{constructor(n,r={}){super(n,r);gr(this,"statusCode",500);gr(this,"fatal",!1);gr(this,"unhandled",!1);gr(this,"statusMessage");gr(this,"data");gr(this,"cause");r.cause&&!this.cause&&(this.cause=r.cause)}toJSON(){const n={message:this.message,statusCode:_h(this.statusCode,500)};return this.statusMessage&&(n.statusMessage=xv(this.statusMessage)),this.data!==void 0&&(n.data=this.data),n}}gr(mh,"__h3_error__",!0);function gh(t){if(typeof t=="string")return new mh(t);if(kS(t))return t;const e=new mh(t.message??t.statusMessage??"",{cause:t.cause||t});if(NS(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=_h(t.statusCode,e.statusCode):t.status&&(e.statusCode=_h(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;xv(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function kS(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.__h3_error__)===!0}const OS=/[^\u0009\u0020-\u007E]/g;function xv(t=""){return t.replace(OS,"")}function _h(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const Vv=Symbol("layout-meta"),Ea=Symbol("route"),gn=()=>{var t;return(t=st())==null?void 0:t.$router},Df=()=>Ly()?Ut(Ea,st()._route):st()._route;const MS=()=>{try{if(st()._processingMiddleware)return!0}catch{return!1}return!1},TM=(t,e)=>{t||(t="/");const n=typeof t=="string"?t:"path"in t?LS(t):gn().resolve(t).href;if(e!=null&&e.open){const{target:c="_blank",windowFeatures:u={}}=e.open,h=Object.entries(u).filter(([f,p])=>p!==void 0).map(([f,p])=>`${f.toLowerCase()}=${p}`).join(", ");return open(n,c,h),Promise.resolve()}const r=Ns(n,{acceptRelative:!0}),s=(e==null?void 0:e.external)||r;if(s){if(!(e!=null&&e.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(n,window.location.href);if(c&&FR(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const i=MS();if(!s&&i)return t;const o=gn(),a=st();return s?(a._scope.stop(),e!=null&&e.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e!=null&&e.replace?o.replace(t):o.push(t)};function LS(t){return _v(t.path||"",t.query||{})+(t.hash||"")}const Dv="__nuxt_error",Tl=()=>wb(st().payload,"error"),li=t=>{const e=Il(t);try{const n=st(),r=Tl();n.hooks.callHook("app:error",e),r.value=r.value||e}catch{throw e}return e},FS=async(t={})=>{const e=st(),n=Tl();e.callHook("app:error:cleared",t),t.redirect&&await gn().replace(t.redirect),n.value=wS},BS=t=>!!t&&typeof t=="object"&&Dv in t,Il=t=>{const e=gh(t);return Object.defineProperty(e,Dv,{value:!0,configurable:!1,writable:!1}),e};function US(t){const e=$S(t),n=new ArrayBuffer(e.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return n}const jS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function $S(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,r=0;for(let s=0;s<t.length;s++)n<<=6,n|=jS.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,e+=String.fromCharCode(n)):r===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const qS=-1,GS=-2,HS=-3,KS=-4,zS=-5,WS=-6;function QS(t,e){return JS(JSON.parse(t),e)}function JS(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);function s(i,o=!1){if(i===qS)return;if(i===HS)return NaN;if(i===KS)return 1/0;if(i===zS)return-1/0;if(i===WS)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in r)return r[i];const a=n[i];if(!a||typeof a!="object")r[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],u=e==null?void 0:e[c];if(u){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),r[i]=u(s(h))}switch(c){case"Date":r[i]=new Date(a[1]);break;case"Set":const h=new Set;r[i]=h;for(let g=1;g<a.length;g+=1)h.add(s(a[g]));break;case"Map":const f=new Map;r[i]=f;for(let g=1;g<a.length;g+=2)f.set(s(a[g]),s(a[g+1]));break;case"RegExp":r[i]=new RegExp(a[1],a[2]);break;case"Object":r[i]=Object(a[1]);break;case"BigInt":r[i]=BigInt(a[1]);break;case"null":const p=Object.create(null);r[i]=p;for(let g=1;g<a.length;g+=2)p[a[g]]=s(a[g+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const g=globalThis[c],w=new g(s(a[1]));r[i]=a[2]!==void 0?w.subarray(a[2],a[3]):w;break}case"ArrayBuffer":{const g=a[1],w=US(g);r[i]=w;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const g=c.slice(9);r[i]=Temporal[g].from(a[1]);break}case"URL":{const g=new URL(a[1]);r[i]=g;break}case"URLSearchParams":{const g=new URLSearchParams(a[1]);r[i]=g;break}default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);r[i]=c;for(let u=0;u<a.length;u+=1){const h=a[u];h!==GS&&(c[u]=s(h))}}else{const c={};r[i]=c;for(const u in a){if(u==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[u];c[u]=s(h)}}return r[i]}return s(0)}const YS=new Set(["title","titleTemplate","script","style","noscript"]),pc=new Set(["base","meta","link","style","script","noscript"]),XS=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),ZS=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),Nv=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),e0=typeof window<"u";function qc(t){let e=9;for(let n=0;n<t.length;)e=Math.imul(e^t.charCodeAt(n++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function yh(t){if(t._h)return t._h;if(t._d)return qc(t._d);let e=`${t.tag}:${t.textContent||t.innerHTML||""}:`;for(const n in t.props)e+=`${n}:${String(t.props[n])},`;return qc(e)}function t0(t,e){return t instanceof Promise?t.then(e):e(t)}function vh(t,e,n,r){const s=r||Ov(typeof e=="object"&&typeof e!="function"&&!(e instanceof Promise)?{...e}:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},t==="templateParams"||t==="titleTemplate");if(s instanceof Promise)return s.then(o=>vh(t,e,n,o));const i={tag:t,props:s};for(const o of Nv){const a=i.props[o]!==void 0?i.props[o]:n[o];a!==void 0&&((!(o==="innerHTML"||o==="textContent"||o==="children")||YS.has(i.tag))&&(i[o==="children"?"innerHTML":o]=a),delete i.props[o])}return i.props.body&&(i.tagPosition="bodyClose",delete i.props.body),i.tag==="script"&&typeof i.innerHTML=="object"&&(i.innerHTML=JSON.stringify(i.innerHTML),i.props.type=i.props.type||"application/json"),Array.isArray(i.props.content)?i.props.content.map(o=>({...i,props:{...i.props,content:o}})):i}function n0(t,e){var r;const n=t==="class"?" ":";";return e&&typeof e=="object"&&!Array.isArray(e)&&(e=Object.entries(e).filter(([,s])=>s).map(([s,i])=>t==="style"?`${s}:${i}`:s)),(r=String(Array.isArray(e)?e.join(n):e))==null?void 0:r.split(n).filter(s=>!!s.trim()).join(n)}function kv(t,e,n,r){for(let s=r;s<n.length;s+=1){const i=n[s];if(i==="class"||i==="style"){t[i]=n0(i,t[i]);continue}if(t[i]instanceof Promise)return t[i].then(o=>(t[i]=o,kv(t,e,n,s)));if(!e&&!Nv.has(i)){const o=String(t[i]),a=i.startsWith("data-");o==="true"||o===""?t[i]=a?"true":!0:t[i]||(a&&o==="false"?t[i]="false":delete t[i])}}}function Ov(t,e=!1){const n=kv(t,e,Object.keys(t),0);return n instanceof Promise?n.then(()=>t):t}const r0=10;function Mv(t,e,n){for(let r=n;r<e.length;r+=1){const s=e[r];if(s instanceof Promise)return s.then(i=>(e[r]=i,Mv(t,e,r)));Array.isArray(s)?t.push(...s):t.push(s)}}function s0(t){const e=[],n=t.resolvedInput;for(const s in n){if(!Object.prototype.hasOwnProperty.call(n,s))continue;const i=n[s];if(!(i===void 0||!XS.has(s))){if(Array.isArray(i)){for(const o of i)e.push(vh(s,o,t));continue}e.push(vh(s,i,t))}}if(e.length===0)return[];const r=[];return t0(Mv(r,e,0),()=>r.map((s,i)=>(s._e=t._i,t.mode&&(s._m=t.mode),s._p=(t._i<<r0)+i,s)))}const Fm=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),Bm={base:-10,title:10},Um={critical:-80,high:-10,low:20};function Gc(t){const e=t.tagPriority;if(typeof e=="number")return e;let n=100;return t.tag==="meta"?t.props["http-equiv"]==="content-security-policy"?n=-30:t.props.charset?n=-20:t.props.name==="viewport"&&(n=-15):t.tag==="link"&&t.props.rel==="preconnect"?n=20:t.tag in Bm&&(n=Bm[t.tag]),e&&e in Um?n+Um[e]:n}const i0=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],o0=["name","property","http-equiv"];function Lv(t){const{props:e,tag:n}=t;if(ZS.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(e.id)return`${n}:id:${e.id}`;for(const r of o0)if(e[r]!==void 0)return`${n}:${r}:${e[r]}`;return!1}const Ir="%separator";function a0(t,e,n=!1){var s;let r;if(e==="s"||e==="pageTitle")r=t.pageTitle;else if(e.includes(".")){const i=e.indexOf(".");r=(s=t[e.substring(0,i)])==null?void 0:s[e.substring(i+1)]}else r=t[e];if(r!==void 0)return n?(r||"").replace(/"/g,'\\"'):r||""}const c0=new RegExp(`${Ir}(?:\\s*${Ir})*`,"g");function sc(t,e,n,r=!1){if(typeof t!="string"||!t.includes("%"))return t;let s=t;try{s=decodeURI(t)}catch{}const i=s.match(/%\w+(?:\.\w+)?/g);if(!i)return t;const o=t.includes(Ir);return t=t.replace(/%\w+(?:\.\w+)?/g,a=>{if(a===Ir||!i.includes(a))return a;const c=a0(e,a.slice(1),r);return c!==void 0?c:a}).trim(),o&&(t.endsWith(Ir)&&(t=t.slice(0,-Ir.length)),t.startsWith(Ir)&&(t=t.slice(Ir.length)),t=t.replace(c0,n).trim()),t}function jm(t,e){return t==null?e||null:typeof t=="function"?t(e):t}async function Fv(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{var f;const i=(await t.resolveTags()).map(p=>({tag:p,id:pc.has(p.tag)?yh(p):p.tag,shouldRender:!0}));let o=t._dom;if(!o){o={elMap:{htmlAttrs:n.documentElement,bodyAttrs:n.body}};const p=new Set;for(const g of["body","head"]){const w=(f=n[g])==null?void 0:f.children;for(const R of w){const V=R.tagName.toLowerCase();if(!pc.has(V))continue;const N={tag:V,props:await Ov(R.getAttributeNames().reduce((k,F)=>({...k,[F]:R.getAttribute(F)}),{})),innerHTML:R.innerHTML},D=Lv(N);let E=D,C=1;for(;E&&p.has(E);)E=`${D}:${C++}`;E&&(N._d=E,p.add(E)),o.elMap[R.getAttribute("data-hid")||yh(N)]=R}}}o.pendingSideEffects={...o.sideEffects},o.sideEffects={};function a(p,g,w){const R=`${p}:${g}`;o.sideEffects[R]=w,delete o.pendingSideEffects[R]}function c({id:p,$el:g,tag:w}){const R=w.tag.endsWith("Attrs");if(o.elMap[p]=g,R||(w.textContent&&w.textContent!==g.textContent&&(g.textContent=w.textContent),w.innerHTML&&w.innerHTML!==g.innerHTML&&(g.innerHTML=w.innerHTML),a(p,"el",()=>{var V;(V=o.elMap[p])==null||V.remove(),delete o.elMap[p]})),w._eventHandlers)for(const V in w._eventHandlers)Object.prototype.hasOwnProperty.call(w._eventHandlers,V)&&g.getAttribute(`data-${V}`)!==""&&((w.tag==="bodyAttrs"?n.defaultView:g).addEventListener(V.substring(2),w._eventHandlers[V].bind(g)),g.setAttribute(`data-${V}`,""));for(const V in w.props){if(!Object.prototype.hasOwnProperty.call(w.props,V))continue;const N=w.props[V],D=`attr:${V}`;if(V==="class"){if(!N)continue;for(const E of N.split(" "))R&&a(p,`${D}:${E}`,()=>g.classList.remove(E)),!g.classList.contains(E)&&g.classList.add(E)}else if(V==="style"){if(!N)continue;for(const E of N.split(";")){const C=E.indexOf(":"),k=E.substring(0,C).trim(),F=E.substring(C+1).trim();a(p,`${D}:${k}`,()=>{g.style.removeProperty(k)}),g.style.setProperty(k,F)}}else g.getAttribute(V)!==N&&g.setAttribute(V,N===!0?"":String(N)),R&&a(p,D,()=>g.removeAttribute(V))}}const u=[],h={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const p of i){const{tag:g,shouldRender:w,id:R}=p;if(w){if(g.tag==="title"){n.title=g.textContent;continue}p.$el=p.$el||o.elMap[R],p.$el?c(p):pc.has(g.tag)&&u.push(p)}}for(const p of u){const g=p.tag.tagPosition||"head";p.$el=n.createElement(p.tag.tag),c(p),h[g]=h[g]||n.createDocumentFragment(),h[g].appendChild(p.$el)}for(const p of i)await t.hooks.callHook("dom:renderTag",p,n,a);h.head&&n.head.appendChild(h.head),h.bodyOpen&&n.body.insertBefore(h.bodyOpen,n.body.firstChild),h.bodyClose&&n.body.appendChild(h.bodyClose);for(const p in o.pendingSideEffects)o.pendingSideEffects[p]();t._dom=o,await t.hooks.callHook("dom:rendered",{renders:i}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function l0(t,e={}){const n=e.delayFn||(r=>setTimeout(r,10));return t._domDebouncedUpdatePromise=t._domDebouncedUpdatePromise||new Promise(r=>n(()=>Fv(t,e).then(()=>{delete t._domDebouncedUpdatePromise,r()})))}function u0(t){return e=>{var r,s;const n=((s=(r=e.resolvedOptions.document)==null?void 0:r.head.querySelector('script[id="unhead:payload"]'))==null?void 0:s.innerHTML)||!1;return n&&e.push(JSON.parse(n)),{mode:"client",hooks:{"entries:updated":i=>{l0(i,t)}}}}}const h0=new Set(["templateParams","htmlAttrs","bodyAttrs"]),f0={hooks:{"tag:normalise":({tag:t})=>{t.props.hid&&(t.key=t.props.hid,delete t.props.hid),t.props.vmid&&(t.key=t.props.vmid,delete t.props.vmid),t.props.key&&(t.key=t.props.key,delete t.props.key);const e=Lv(t);e&&!e.startsWith("meta:og:")&&!e.startsWith("meta:twitter:")&&delete t.key;const n=e||(t.key?`${t.tag}:${t.key}`:!1);n&&(t._d=n)},"tags:resolve":t=>{const e=Object.create(null);for(const r of t.tags){const s=(r.key?`${r.tag}:${r.key}`:r._d)||yh(r),i=e[s];if(i){let a=r==null?void 0:r.tagDuplicateStrategy;if(!a&&h0.has(r.tag)&&(a="merge"),a==="merge"){const c=i.props;c.style&&r.props.style&&(c.style[c.style.length-1]!==";"&&(c.style+=";"),r.props.style=`${c.style} ${r.props.style}`),c.class&&r.props.class?r.props.class=`${c.class} ${r.props.class}`:c.class&&(r.props.class=c.class),e[s].props={...c,...r.props};continue}else if(r._e===i._e){i._duped=i._duped||[],r._d=`${i._d}:${i._duped.length+1}`,i._duped.push(r);continue}else if(Gc(r)>Gc(i))continue}if(!(r.innerHTML||r.textContent||Object.keys(r.props).length!==0)&&pc.has(r.tag)){delete e[s];continue}e[s]=r}const n=[];for(const r in e){const s=e[r],i=s._duped;n.push(s),i&&(delete s._duped,n.push(...i))}t.tags=n,t.tags=t.tags.filter(r=>!(r.tag==="meta"&&(r.props.name||r.props.property)&&!r.props.content))}}},d0=new Set(["script","link","bodyAttrs"]),p0=t=>({hooks:{"tags:resolve":e=>{for(const n of e.tags){if(!d0.has(n.tag))continue;const r=n.props;for(const s in r){if(s[0]!=="o"||s[1]!=="n"||!Object.prototype.hasOwnProperty.call(r,s))continue;const i=r[s];typeof i=="function"&&(t.ssr&&Fm.has(s)?r[s]=`this.dataset.${s}fired = true`:delete r[s],n._eventHandlers=n._eventHandlers||{},n._eventHandlers[s]=i)}t.ssr&&n._eventHandlers&&(n.props.src||n.props.href)&&(n.key=n.key||qc(n.props.src||n.props.href))}},"dom:renderTag":({$el:e,tag:n})=>{var s,i;const r=e==null?void 0:e.dataset;if(r)for(const o in r){if(!o.endsWith("fired"))continue;const a=o.slice(0,-5);Fm.has(a)&&((i=(s=n._eventHandlers)==null?void 0:s[a])==null||i.call(e,new Event(a.substring(2))))}}}}),m0=new Set(["link","style","script","noscript"]),g0={hooks:{"tag:normalise":({tag:t})=>{t.key&&m0.has(t.tag)&&(t.props["data-hid"]=t._h=qc(t.key))}}},_0={mode:"server",hooks:{"tags:beforeResolve":t=>{const e={};let n=!1;for(const r of t.tags)r._m!=="server"||r.tag!=="titleTemplate"&&r.tag!=="templateParams"&&r.tag!=="title"||(e[r.tag]=r.tag==="title"||r.tag==="titleTemplate"?r.textContent:r.props,n=!0);n&&t.tags.push({tag:"script",innerHTML:JSON.stringify(e),props:{id:"unhead:payload",type:"application/json"}})}}},y0={hooks:{"tags:resolve":t=>{var e;for(const n of t.tags)if(typeof n.tagPriority=="string")for(const{prefix:r,offset:s}of i0){if(!n.tagPriority.startsWith(r))continue;const i=n.tagPriority.substring(r.length),o=(e=t.tags.find(a=>a._d===i))==null?void 0:e._p;if(o!==void 0){n._p=o+s;break}}t.tags.sort((n,r)=>{const s=Gc(n),i=Gc(r);return s<i?-1:s>i?1:n._p-r._p})}}},v0={meta:"content",link:"href",htmlAttrs:"lang"},E0=["innerHTML","textContent"],w0=t=>({hooks:{"tags:resolve":e=>{var o;const{tags:n}=e;let r;for(let a=0;a<n.length;a+=1)n[a].tag==="templateParams"&&(r=e.tags.splice(a,1)[0].props,a-=1);const s=r||{},i=s.separator||"|";delete s.separator,s.pageTitle=sc(s.pageTitle||((o=n.find(a=>a.tag==="title"))==null?void 0:o.textContent)||"",s,i);for(const a of n){if(a.processTemplateParams===!1)continue;const c=v0[a.tag];if(c&&typeof a.props[c]=="string")a.props[c]=sc(a.props[c],s,i);else if(a.processTemplateParams||a.tag==="titleTemplate"||a.tag==="title")for(const u of E0)typeof a[u]=="string"&&(a[u]=sc(a[u],s,i,a.tag==="script"&&a.props.type.endsWith("json")))}t._templateParams=s,t._separator=i},"tags:afterResolve":({tags:e})=>{let n;for(let r=0;r<e.length;r+=1){const s=e[r];s.tag==="title"&&s.processTemplateParams!==!1&&(n=s)}n!=null&&n.textContent&&(n.textContent=sc(n.textContent,t._templateParams,t._separator))}}}),T0={hooks:{"tags:resolve":t=>{const{tags:e}=t;let n,r;for(let s=0;s<e.length;s+=1){const i=e[s];i.tag==="title"?n=i:i.tag==="titleTemplate"&&(r=i)}if(r&&n){const s=jm(r.textContent,n.textContent);s!==null?n.textContent=s||n.textContent:t.tags.splice(t.tags.indexOf(n),1)}else if(r){const s=jm(r.textContent);s!==null&&(r.textContent=s,r.tag="title",r=void 0)}r&&t.tags.splice(t.tags.indexOf(r),1)}}},I0={hooks:{"tags:afterResolve":t=>{for(const e of t.tags)typeof e.innerHTML=="string"&&(e.innerHTML&&(e.props.type==="application/ld+json"||e.props.type==="application/json")?e.innerHTML=e.innerHTML.replace(/</g,"\\u003C"):e.innerHTML=e.innerHTML.replace(new RegExp(`</${e.tag}`,"g"),`<\\/${e.tag}`))}}};let Bv;function b0(t={}){const e=A0(t);return e.use(u0()),Bv=e}function $m(t,e){return!t||t==="server"&&e||t==="client"&&!e}function A0(t={}){const e=bv();e.addHooks(t.hooks||{}),t.document=t.document||(e0?document:void 0);const n=!t.document,r=()=>{a.dirty=!0,e.callHook("entries:updated",a)};let s=0,i=[];const o=[],a={plugins:o,dirty:!1,resolvedOptions:t,hooks:e,headEntries(){return i},use(c){const u=typeof c=="function"?c(a):c;(!u.key||!o.some(h=>h.key===u.key))&&(o.push(u),$m(u.mode,n)&&e.addHooks(u.hooks||{}))},push(c,u){u==null||delete u.head;const h={_i:s++,input:c,...u};return $m(h.mode,n)&&(i.push(h),r()),{dispose(){i=i.filter(f=>f._i!==h._i),r()},patch(f){for(const p of i)p._i===h._i&&(p.input=h.input=f);r()}}},async resolveTags(){const c={tags:[],entries:[...i]};await e.callHook("entries:resolve",c);for(const u of c.entries){const h=u.resolvedInput||u.input;if(u.resolvedInput=await(u.transform?u.transform(h):h),u.resolvedInput)for(const f of await s0(u)){const p={tag:f,entry:u,resolvedOptions:a.resolvedOptions};await e.callHook("tag:normalise",p),c.tags.push(p.tag)}}return await e.callHook("tags:beforeResolve",c),await e.callHook("tags:resolve",c),await e.callHook("tags:afterResolve",c),c.tags},ssr:n};return[f0,_0,p0,g0,y0,w0,T0,I0,...(t==null?void 0:t.plugins)||[]].forEach(c=>a.use(c)),a.hooks.callHook("init",a),a}function R0(){return Bv}const S0=lv[0]==="3";function P0(t){return typeof t=="function"?t():Ue(t)}function Eh(t){if(t instanceof Promise||t instanceof Date||t instanceof RegExp)return t;const e=P0(t);if(!t||!e)return e;if(Array.isArray(e))return e.map(n=>Eh(n));if(typeof e=="object"){const n={};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(r==="titleTemplate"||r[0]==="o"&&r[1]==="n"){n[r]=Ue(e[r]);continue}n[r]=Eh(e[r])}return n}return e}const C0={hooks:{"entries:resolve":t=>{for(const e of t.entries)e.resolvedInput=Eh(e.input)}}},Uv="usehead";function x0(t){return{install(n){S0&&(n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(Uv,t))}}.install}function V0(t={}){t.domDelayFn=t.domDelayFn||(n=>qi(()=>setTimeout(()=>n(),0)));const e=b0(t);return e.use(C0),e.install=x0(e),e}const wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Th="__unhead_injection_handler__";function D0(t){wh[Th]=t}function IM(){return Th in wh?wh[Th]():Ut(Uv)||R0()}let mc,gc;function N0(){return mc=$fetch(Vf(`builds/meta/${wl().app.buildId}.json`),{responseType:"json"}),mc.then(t=>{gc=VS(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),mc}function bl(){return mc||N0()}async function Nf(t){if(await bl(),!gc)return console.error("[nuxt] Error creating app manifest matcher.",gc),{};try{return Cv({},...gc.matchAll(t).reverse())}catch(e){return console.error("[nuxt] Error matching route rules.",e),{}}}async function qm(t,e={}){const n=await O0(t,e),r=st(),s=r._payloadCache=r._payloadCache||{};return n in s?s[n]||null:(s[n]=$v(t).then(i=>i?jv(n).then(o=>o||(delete s[n],null)):(s[n]=null,null)),s[n])}const k0="_payload.json";async function O0(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||Ns(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const r=wl(),s=e.hash||(e.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await $v(t)?i:r.app.baseURL;return xf(o,n.pathname,k0+(s?`?${s}`:""))}async function jv(t){const e=fetch(t).then(n=>n.text().then(qv));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function $v(t=Df().path){if(t=Cf(t),(await bl()).prerendered.includes(t))return!0;const n=await Nf(t);return!!n.prerender&&!n.redirect}let ns=null;async function M0(){var r;if(ns)return ns;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await qv(t.textContent||""),n=t.dataset.src?await jv(t.dataset.src):void 0;return ns={...e,...n,...window.__NUXT__},(r=ns.config)!=null&&r.public&&(ns.config.public=or(ns.config.public)),ns}async function qv(t){return await QS(t,st()._payloadRevivers)}function L0(t,e){st()._payloadRevivers[t]=e}const F0=[["NuxtError",t=>Il(t)],["EmptyShallowRef",t=>Go(t==="_"?void 0:t==="0n"?BigInt(0):Fc(t))],["EmptyRef",t=>Yn(t==="_"?void 0:t==="0n"?BigInt(0):Fc(t))],["ShallowRef",t=>Go(t)],["ShallowReactive",t=>Qn(t)],["Ref",t=>Yn(t)],["Reactive",t=>or(t)]],B0=Fn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[r,s]of F0)L0(r,s);Object.assign(t.payload,([e,n]=_i(()=>t.runWithContext(M0)),e=await e,n(),e)),window.__NUXT__=t.payload}}),U0=[],j0=Fn({name:"nuxt:head",enforce:"pre",setup(t){const e=V0({plugins:U0});D0(()=>st().vueApp._context.provides.usehead),t.vueApp.use(e);{let n=!0;const r=async()=>{n=!1,await Fv(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||r()}),t.hooks.hook("app:error",r),t.hooks.hook("app:suspense:resolve",r)}}});function $0(){return Gv().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Gv(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const q0=typeof Proxy=="function",G0="devtools-plugin:setup",H0="plugin:settings:set";let Qs,Ih;function K0(){var t;return Qs!==void 0||(typeof window<"u"&&window.performance?(Qs=!0,Ih=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(Qs=!0,Ih=globalThis.perf_hooks.performance):Qs=!1),Qs}function z0(){return K0()?Ih.now():Date.now()}class W0{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),a=JSON.parse(o);Object.assign(i,a)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return z0()}},n&&n.on(H0,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...c)=>{this.onQueue.push({method:a,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...c)=>(this.targetQueue.push({method:a,args:c,resolve:()=>{}}),this.fallbacks[a](...c)):(...c)=>new Promise(u=>{this.targetQueue.push({method:a,args:c,resolve:u})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function Q0(t,e){const n=t,r=Gv(),s=$0(),i=q0&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(G0,t,e);else{const o=i?new W0(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const ni=typeof document<"u";function Hv(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function J0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Hv(t.default)}const xe=Object.assign;function Cu(t,e){const n={};for(const r in e){const s=e[r];n[r]=An(s)?s.map(t):t(s)}return n}const ko=()=>{},An=Array.isArray;function Gm(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Kv=/#/g,Y0=/&/g,X0=/\//g,Z0=/=/g,eP=/\?/g,zv=/\+/g,tP=/%5B/g,nP=/%5D/g,Wv=/%5E/g,rP=/%60/g,Qv=/%7B/g,sP=/%7C/g,Jv=/%7D/g,iP=/%20/g;function kf(t){return t==null?"":encodeURI(""+t).replace(sP,"|").replace(tP,"[").replace(nP,"]")}function oP(t){return kf(t).replace(Qv,"{").replace(Jv,"}").replace(Wv,"^")}function bh(t){return kf(t).replace(zv,"%2B").replace(iP,"+").replace(Kv,"%23").replace(Y0,"%26").replace(rP,"`").replace(Qv,"{").replace(Jv,"}").replace(Wv,"^")}function aP(t){return bh(t).replace(Z0,"%3D")}function cP(t){return kf(t).replace(Kv,"%23").replace(eP,"%3F")}function lP(t){return cP(t).replace(X0,"%2F")}function Wo(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const uP=/\/$/,hP=t=>t.replace(uP,"");function xu(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return c=a>=0&&c>a?-1:c,c>=0&&(r=e.slice(0,c),i=e.slice(c,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=mP(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Wo(o)}}function fP(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Hm(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function dP(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ii(e.matched[r],n.matched[s])&&Yv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ii(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Yv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!pP(t[n],e[n]))return!1;return!0}function pP(t,e){return An(t)?Km(t,e):An(e)?Km(e,t):t===e}function Km(t,e){return An(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function mP(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const vn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ah=function(t){return t.pop="pop",t.push="push",t}({}),Vu=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function gP(t){if(!t)if(ni){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),hP(t)}const _P=/^[^#]+#/;function yP(t,e){return t.replace(_P,"#")+e}function vP(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Al=()=>({left:window.scrollX,top:window.scrollY});function EP(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=vP(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function zm(t,e){return(history.state?history.state.position-e:-1)+t}const Rh=new Map;function wP(t,e){Rh.set(t,e)}function TP(t){const e=Rh.get(t);return Rh.delete(t),e}function IP(t){return typeof t=="string"||t&&typeof t=="object"}function Xv(t){return typeof t=="string"||typeof t=="symbol"}let Ze=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const Zv=Symbol("");Ze.MATCHER_NOT_FOUND+"",Ze.NAVIGATION_GUARD_REDIRECT+"",Ze.NAVIGATION_ABORTED+"",Ze.NAVIGATION_CANCELLED+"",Ze.NAVIGATION_DUPLICATED+"";function bi(t,e){return xe(new Error,{type:t,[Zv]:!0},e)}function Gn(t,e){return t instanceof Error&&Zv in t&&(e==null||!!(t.type&e))}const bP=["params","query","hash"];function AP(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of bP)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function RP(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(zv," "),i=s.indexOf("="),o=Wo(i<0?s:s.slice(0,i)),a=i<0?null:Wo(s.slice(i+1));if(o in e){let c=e[o];An(c)||(c=e[o]=[c]),c.push(a)}else e[o]=a}return e}function Wm(t){let e="";for(let n in t){const r=t[n];if(n=aP(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(An(r)?r.map(s=>s&&bh(s)):[r&&bh(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function SP(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=An(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const PP=Symbol(""),Qm=Symbol(""),Of=Symbol(""),Mf=Symbol(""),Sh=Symbol("");function mo(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function br(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const u=p=>{p===!1?c(bi(Ze.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?c(p):IP(p)?c(bi(Ze.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(p=>c(p))})}function Du(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Hv(c)){const u=(c.__vccOpts||c)[e];u&&i.push(br(u,n,r,o,a,s))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=J0(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&br(p,n,r,o,a,s)()}))}}return i}function CP(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Ii(u,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(u=>Ii(u,c))||s.push(c))}return[n,r,s]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let xP=()=>location.protocol+"//"+location.host;function eE(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),Hm(a,"")}return Hm(n,t)+r+s}function VP(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const g=eE(t,location),w=n.value,R=e.value;let V=0;if(p){if(n.value=g,e.value=p,o&&o===w){o=null;return}V=R?p.position-R.position:0}else r(g);s.forEach(N=>{N(n.value,w,{delta:V,type:Ah.pop,direction:V?V>0?Vu.forward:Vu.back:Vu.unknown})})};function c(){o=n.value}function u(p){s.push(p);const g=()=>{const w=s.indexOf(p);w>-1&&s.splice(w,1)};return i.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(xe({},p.state,{scroll:Al()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:c,listen:u,destroy:f}}function Jm(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Al():null}}function DP(t){const{history:e,location:n}=window,r={value:eE(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:xP()+t+c;try{e[h?"replaceState":"pushState"](u,"",p),s.value=u}catch(g){console.error(g),n[h?"replace":"assign"](p)}}function o(c,u){i(c,xe({},e.state,Jm(s.value.back,c,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=c}function a(c,u){const h=xe({},s.value,e.state,{forward:c,scroll:Al()});i(h.current,h,!0),i(c,xe({},Jm(r.value,c,null),{position:h.position+1},u),!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function tE(t){t=gP(t);const e=DP(t),n=VP(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=xe({location:"",base:t,go:r,createHref:yP.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function NP(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),tE(t)}let fs=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var lt=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(lt||{});const kP={type:fs.Static,value:""},OP=/[a-zA-Z0-9_]/;function MP(t){if(!t)return[[]];if(t==="/")return[[kP]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=lt.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,u="",h="";function f(){u&&(n===lt.Static?i.push({type:fs.Static,value:u}):n===lt.Param||n===lt.ParamRegExp||n===lt.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:fs.Param,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==lt.ParamRegExp){r=n,n=lt.EscapeNext;continue}switch(n){case lt.Static:c==="/"?(u&&f(),o()):c===":"?(f(),n=lt.Param):p();break;case lt.EscapeNext:p(),n=r;break;case lt.Param:c==="("?n=lt.ParamRegExp:OP.test(c)?p():(f(),n=lt.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case lt.ParamRegExp:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=lt.ParamRegExpEnd:h+=c;break;case lt.ParamRegExpEnd:f(),n=lt.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===lt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),s}const Ym="[^/]+?",LP={sensitive:!1,strict:!1,start:!0,end:!0};var Mt=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(Mt||{});const FP=/[.+*?^${}()[\]/\\]/g;function BP(t,e){const n=xe({},LP,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[Mt.Root];n.strict&&!u.length&&(s+="/");for(let f=0;f<u.length;f++){const p=u[f];let g=Mt.Segment+(n.sensitive?Mt.BonusCaseSensitive:0);if(p.type===fs.Static)f||(s+="/"),s+=p.value.replace(FP,"\\$&"),g+=Mt.Static;else if(p.type===fs.Param){const{value:w,repeatable:R,optional:V,regexp:N}=p;i.push({name:w,repeatable:R,optional:V});const D=N||Ym;if(D!==Ym){g+=Mt.BonusCustomRegExp;try{`${D}`}catch(C){throw new Error(`Invalid custom RegExp for param "${w}" (${D}): `+C.message)}}let E=R?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;f||(E=V&&u.length<2?`(?:/${E})`:"/"+E),V&&(E+="?"),s+=E,g+=Mt.Dynamic,V&&(g+=Mt.BonusOptional),R&&(g+=Mt.BonusRepeatable),D===".*"&&(g+=Mt.BonusWildcard)}h.push(g)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Mt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const g=h[p]||"",w=i[p-1];f[w.name]=g&&w.repeatable?g.split("/"):g}return f}function c(u){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const g of p)if(g.type===fs.Static)h+=g.value;else if(g.type===fs.Param){const{value:w,repeatable:R,optional:V}=g,N=w in u?u[w]:"";if(An(N)&&!R)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const D=An(N)?N.join("/"):N;if(!D)if(V)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${w}"`);h+=D}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function UP(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Mt.Static+Mt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Mt.Static+Mt.Segment?1:-1:0}function nE(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=UP(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Xm(r))return 1;if(Xm(s))return-1}return s.length-r.length}function Xm(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const jP={strict:!1,end:!0,sensitive:!1};function $P(t,e,n){const r=BP(MP(t.path),n),s=xe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function qP(t,e){const n=[],r=new Map;e=Gm(jP,e);function s(f){return r.get(f)}function i(f,p,g){const w=!g,R=eg(f);R.aliasOf=g&&g.record;const V=Gm(e,f),N=[R];if("alias"in f){const C=typeof f.alias=="string"?[f.alias]:f.alias;for(const k of C)N.push(eg(xe({},R,{components:g?g.record.components:R.components,path:k,aliasOf:g?g.record:R})))}let D,E;for(const C of N){const{path:k}=C;if(p&&k[0]!=="/"){const F=p.record.path,I=F[F.length-1]==="/"?"":"/";C.path=p.record.path+(k&&I+k)}if(D=$P(C,p,V),g?g.alias.push(D):(E=E||D,E!==D&&E.alias.push(D),w&&f.name&&!tg(D)&&o(f.name)),rE(D)&&c(D),R.children){const F=R.children;for(let I=0;I<F.length;I++)i(F[I],D,g&&g.children[I])}g=g||D}return E?()=>{o(E)}:ko}function o(f){if(Xv(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function c(f){const p=KP(f,n);n.splice(p,0,f),f.record.name&&!tg(f)&&r.set(f.record.name,f)}function u(f,p){let g,w={},R,V;if("name"in f&&f.name){if(g=r.get(f.name),!g)throw bi(Ze.MATCHER_NOT_FOUND,{location:f});V=g.record.name,w=xe(Zm(p.params,g.keys.filter(E=>!E.optional).concat(g.parent?g.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),f.params&&Zm(f.params,g.keys.map(E=>E.name))),R=g.stringify(w)}else if(f.path!=null)R=f.path,g=n.find(E=>E.re.test(R)),g&&(w=g.parse(R),V=g.record.name);else{if(g=p.name?r.get(p.name):n.find(E=>E.re.test(p.path)),!g)throw bi(Ze.MATCHER_NOT_FOUND,{location:f,currentLocation:p});V=g.record.name,w=xe({},p.params,f.params),R=g.stringify(w)}const N=[];let D=g;for(;D;)N.unshift(D.record),D=D.parent;return{name:V,path:R,params:w,matched:N,meta:HP(N)}}t.forEach(f=>i(f));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function Zm(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function eg(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:GP(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function GP(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function tg(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function HP(t){return t.reduce((e,n)=>xe(e,n.meta),{})}function KP(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;nE(t,e[i])<0?r=i:n=i+1}const s=zP(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function zP(t){let e=t;for(;e=e.parent;)if(rE(e)&&nE(t,e)===0)return e}function rE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function ng(t){const e=Ut(Of),n=Ut(Mf),r=rn(()=>{const c=Ue(t.to);return e.resolve(c)}),s=rn(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(Ii.bind(null,h));if(p>-1)return p;const g=rg(c[u-2]);return u>1&&rg(h)===g&&f[f.length-1].path!==g?f.findIndex(Ii.bind(null,c[u-2])):p}),i=rn(()=>s.value>-1&&XP(n.params,r.value.params)),o=rn(()=>s.value>-1&&s.value===n.matched.length-1&&Yv(n.params,r.value.params));function a(c={}){if(YP(c)){const u=e[Ue(t.replace)?"replace":"push"](Ue(t.to)).catch(ko);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:rn(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function WP(t){return t.length===1?t[0]:t}const QP=Gr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ng,setup(t,{slots:e}){const n=or(ng(t)),{options:r}=Ut(Of),s=rn(()=>({[sg(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[sg(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&WP(e.default(n));return t.custom?i:Qt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),JP=QP;function YP(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function XP(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!An(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function rg(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const sg=(t,e,n)=>t??e??n,ZP=Gr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Ut(Sh),s=rn(()=>t.route||r.value),i=Ut(Qm,0),o=rn(()=>{let u=Ue(i);const{matched:h}=s.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=rn(()=>s.value.matched[o.value]);ys(Qm,rn(()=>o.value+1)),ys(PP,a),ys(Sh,s);const c=Yn();return Vr(()=>[c.value,a.value,t.name],([u,h,f],[p,g,w])=>{h&&(h.instances[f]=u,g&&g!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!Ii(h,g)||!p)&&(h.enterCallbacks[f]||[]).forEach(R=>R(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return ig(n.default,{Component:p,route:u});const g=f.props[h],w=g?g===!0?u.params:typeof g=="function"?g(u):g:null,V=Qt(p,xe({},w,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return ig(n.default,{Component:V,route:u})||V}}});function ig(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const sE=ZP;function eC(t){const e=qP(t.routes,t),n=t.parseQuery||RP,r=t.stringifyQuery||Wm,s=t.history,i=mo(),o=mo(),a=mo(),c=Go(vn);let u=vn;ni&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Cu.bind(null,$=>""+$),f=Cu.bind(null,lP),p=Cu.bind(null,Wo);function g($,se){let ee,ce;return Xv($)?(ee=e.getRecordMatcher($),ce=se):ce=$,e.addRoute(ce,ee)}function w($){const se=e.getRecordMatcher($);se&&e.removeRoute(se)}function R(){return e.getRoutes().map($=>$.record)}function V($){return!!e.getRecordMatcher($)}function N($,se){if(se=xe({},se||c.value),typeof $=="string"){const x=xu(n,$,se.path),L=e.resolve({path:x.path},se),H=s.createHref(x.fullPath);return xe(x,L,{params:p(L.params),hash:Wo(x.hash),redirectedFrom:void 0,href:H})}let ee;if($.path!=null)ee=xe({},$,{path:xu(n,$.path,se.path).path});else{const x=xe({},$.params);for(const L in x)x[L]==null&&delete x[L];ee=xe({},$,{params:f(x)}),se.params=f(se.params)}const ce=e.resolve(ee,se),ye=$.hash||"";ce.params=h(p(ce.params));const ke=fP(r,xe({},$,{hash:oP(ye),path:ce.path})),A=s.createHref(ke);return xe({fullPath:ke,hash:ye,query:r===Wm?SP($.query):$.query||{}},ce,{redirectedFrom:void 0,href:A})}function D($){return typeof $=="string"?xu(n,$,c.value.path):xe({},$)}function E($,se){if(u!==$)return bi(Ze.NAVIGATION_CANCELLED,{from:se,to:$})}function C($){return I($)}function k($){return C(xe(D($),{replace:!0}))}function F($,se){const ee=$.matched[$.matched.length-1];if(ee&&ee.redirect){const{redirect:ce}=ee;let ye=typeof ce=="function"?ce($,se):ce;return typeof ye=="string"&&(ye=ye.includes("?")||ye.includes("#")?ye=D(ye):{path:ye},ye.params={}),xe({query:$.query,hash:$.hash,params:ye.path!=null?{}:$.params},ye)}}function I($,se){const ee=u=N($),ce=c.value,ye=$.state,ke=$.force,A=$.replace===!0,x=F(ee,ce);if(x)return I(xe(D(x),{state:typeof x=="object"?xe({},ye,x.state):ye,force:ke,replace:A}),se||ee);const L=ee;L.redirectedFrom=se;let H;return!ke&&dP(r,ce,ee)&&(H=bi(Ze.NAVIGATION_DUPLICATED,{to:L,from:ce}),on(ce,ce,!0,!1)),(H?Promise.resolve(H):b(L,ce)).catch(j=>Gn(j)?Gn(j,Ze.NAVIGATION_GUARD_REDIRECT)?j:_n(j):re(j,L,ce)).then(j=>{if(j){if(Gn(j,Ze.NAVIGATION_GUARD_REDIRECT))return I(xe({replace:A},D(j.to),{state:typeof j.to=="object"?xe({},ye,j.to.state):ye,force:ke}),se||L)}else j=S(L,ce,!0,A,ye);return P(L,ce,j),j})}function y($,se){const ee=E($,se);return ee?Promise.reject(ee):Promise.resolve()}function v($){const se=hr.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext($):$()}function b($,se){let ee;const[ce,ye,ke]=CP($,se);ee=Du(ce.reverse(),"beforeRouteLeave",$,se);for(const x of ce)x.leaveGuards.forEach(L=>{ee.push(br(L,$,se))});const A=y.bind(null,$,se);return ee.push(A),Gt(ee).then(()=>{ee=[];for(const x of i.list())ee.push(br(x,$,se));return ee.push(A),Gt(ee)}).then(()=>{ee=Du(ye,"beforeRouteUpdate",$,se);for(const x of ye)x.updateGuards.forEach(L=>{ee.push(br(L,$,se))});return ee.push(A),Gt(ee)}).then(()=>{ee=[];for(const x of ke)if(x.beforeEnter)if(An(x.beforeEnter))for(const L of x.beforeEnter)ee.push(br(L,$,se));else ee.push(br(x.beforeEnter,$,se));return ee.push(A),Gt(ee)}).then(()=>($.matched.forEach(x=>x.enterCallbacks={}),ee=Du(ke,"beforeRouteEnter",$,se,v),ee.push(A),Gt(ee))).then(()=>{ee=[];for(const x of o.list())ee.push(br(x,$,se));return ee.push(A),Gt(ee)}).catch(x=>Gn(x,Ze.NAVIGATION_CANCELLED)?x:Promise.reject(x))}function P($,se,ee){a.list().forEach(ce=>v(()=>ce($,se,ee)))}function S($,se,ee,ce,ye){const ke=E($,se);if(ke)return ke;const A=se===vn,x=ni?history.state:{};ee&&(ce||A?s.replace($.fullPath,xe({scroll:A&&x&&x.scroll},ye)):s.push($.fullPath,ye)),c.value=$,on($,se,ee,A),_n()}let T;function ge(){T||(T=s.listen(($,se,ee)=>{if(!en.listening)return;const ce=N($),ye=F(ce,en.currentRoute.value);if(ye){I(xe(ye,{replace:!0,force:!0}),ce).catch(ko);return}u=ce;const ke=c.value;ni&&wP(zm(ke.fullPath,ee.delta),Al()),b(ce,ke).catch(A=>Gn(A,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_CANCELLED)?A:Gn(A,Ze.NAVIGATION_GUARD_REDIRECT)?(I(xe(D(A.to),{force:!0}),ce).then(x=>{Gn(x,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===Ah.pop&&s.go(-1,!1)}).catch(ko),Promise.reject()):(ee.delta&&s.go(-ee.delta,!1),re(A,ce,ke))).then(A=>{A=A||S(ce,ke,!1),A&&(ee.delta&&!Gn(A,Ze.NAVIGATION_CANCELLED)?s.go(-ee.delta,!1):ee.type===Ah.pop&&Gn(A,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),P(ce,ke,A)}).catch(ko)}))}let Ee=mo(),ie=mo(),pe;function re($,se,ee){_n($);const ce=ie.list();return ce.length?ce.forEach(ye=>ye($,se,ee)):console.error($),Promise.reject($)}function Fe(){return pe&&c.value!==vn?Promise.resolve():new Promise(($,se)=>{Ee.add([$,se])})}function _n($){return pe||(pe=!$,ge(),Ee.list().forEach(([se,ee])=>$?ee($):se()),Ee.reset()),$}function on($,se,ee,ce){const{scrollBehavior:ye}=t;if(!ni||!ye)return Promise.resolve();const ke=!ee&&TP(zm($.fullPath,0))||(ce||!ee)&&history.state&&history.state.scroll||null;return qi().then(()=>ye($,se,ke)).then(A=>A&&EP(A)).catch(A=>re(A,$,se))}const Qe=$=>s.go($);let Je;const hr=new Set,en={currentRoute:c,listening:!0,addRoute:g,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:V,getRoutes:R,resolve:N,options:t,push:C,replace:k,go:Qe,back:()=>Qe(-1),forward:()=>Qe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ie.add,isReady:Fe,install($){$.component("RouterLink",JP),$.component("RouterView",sE),$.config.globalProperties.$router=en,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>Ue(c)}),ni&&!Je&&c.value===vn&&(Je=!0,C(s.location).catch(ce=>{}));const se={};for(const ce in vn)Object.defineProperty(se,ce,{get:()=>c.value[ce],enumerable:!0});$.provide(Of,en),$.provide(Mf,Qn(se)),$.provide(Sh,c);const ee=$.unmount;hr.add($),$.unmount=function(){hr.delete($),hr.size<1&&(u=vn,T&&T(),T=null,c.value=vn,Je=!1,pe=!1),ee()}}};function Gt($){return $.reduce((se,ee)=>se.then(()=>v(ee)),Promise.resolve())}return en}function tC(t){return Ut(Mf)}const nC=/(:\w+)\([^)]+\)/g,rC=/(:\w+)[?+*]/g,sC=/:\w+/g,iC=(t,e)=>e.path.replace(nC,"$1").replace(rC,"$1").replace(sC,n=>{var r;return((r=t.params[n.slice(1)])==null?void 0:r.toString())||""}),Ph=(t,e)=>{const n=t.route.matched.find(s=>{var i;return((i=s.components)==null?void 0:i.default)===t.Component.type}),r=e??(n==null?void 0:n.meta.key)??(n&&iC(t.route,n));return typeof r=="function"?r(t.route):r},oC=(t,e)=>({default:()=>t?Qt(Bb,t===!0?{}:t,e):e});function Lf(t){return Array.isArray(t)?t:[t]}const aC="modulepreload",cC=function(t,e){return new URL(t,e).href},og={},En=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=cC(u,r),u in og)return;og[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(!!r)for(let w=o.length-1;w>=0;w--){const R=o[w];if(R.href===u&&(!h||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":aC,h||(g.as="script"),g.crossOrigin="",g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),h)return new Promise((w,R)=>{g.addEventListener("load",w),g.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Nu=[{name:"achievements-_id",path:"/achievements/_id",component:()=>En(()=>import("./CxCf8Xzc.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)},{name:"achievements",path:"/achievements",component:()=>En(()=>import("./B6Snywrb.js"),__vite__mapDeps([6,7,4,2,3,8]),import.meta.url)},{name:"categories-_id",path:"/categories/_id",component:()=>En(()=>import("./BrQ7MC5_.js"),__vite__mapDeps([9,7,4,2,3,8]),import.meta.url)},{name:"index",path:"/",component:()=>En(()=>import("./BuQDW0-O.js"),__vite__mapDeps([10,1,2,3,4,11]),import.meta.url)},{name:"records-oneiromancy",path:"/records/oneiromancy",component:()=>En(()=>import("./BtvKvUED.js"),__vite__mapDeps([12,1,2,3,13,14,15]),import.meta.url)},{name:"records-slow-quiz",path:"/records/slow-quiz",component:()=>En(()=>import("./jnGyy80o.js"),__vite__mapDeps([16,1,2,13,14,17]),import.meta.url)},{name:"records-topic",path:"/records/topic",component:()=>En(()=>import("./p7njLLKJ.js"),__vite__mapDeps([18,1,2,3,13,14,19]),import.meta.url)},{name:"users-_id",path:"/users/_id",component:()=>En(()=>import("./I8HyxLFO.js"),__vite__mapDeps([20,1,2,4,3,14,21]),import.meta.url)}],iE=(t,e,n)=>(e=e===!0?{}:e,{default:()=>{var r;return e?Qt(t,e,n):(r=n.default)==null?void 0:r.call(n)}}),lC=/(:\w+)\([^)]+\)/g,uC=/(:\w+)[?+*]/g,hC=/:\w+/g;function ag(t){const e=(t==null?void 0:t.meta.key)??t.path.replace(lC,"$1").replace(uC,"$1").replace(hC,n=>{var r;return((r=t.params[n.slice(1)])==null?void 0:r.toString())||""});return typeof e=="function"?e(t):e}function fC(t,e){return t===e||e===vn?!1:ag(t)!==ag(e)?!0:!t.matched.every((r,s)=>{var i,o;return r.components&&r.components.default===((o=(i=e.matched[s])==null?void 0:i.components)==null?void 0:o.default)})}const dC={scrollBehavior(t,e,n){var u;const r=st(),s=((u=gn().options)==null?void 0:u.scrollBehaviorType)??"auto";let i=n||void 0;const o=typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop;if(!i&&e&&t&&o!==!1&&fC(t,e)&&(i={left:0,top:0}),t.path===e.path)return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:cg(t.hash),behavior:s}:!1;const a=h=>!!(h.meta.pageTransition??dh),c=a(e)&&a(t)?"page:transition:finish":"page:finish";return new Promise(h=>{r.hooks.hookOnce(c,async()=>{await new Promise(f=>setTimeout(f,0)),t.hash&&(i={el:t.hash,top:cg(t.hash),behavior:s}),h(i)})})}};function cg(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}const pC={hashMode:!1,scrollBehaviorType:"auto"},ln={...pC,...dC},mC=async t=>{var c;let e,n;if(!((c=t.meta)!=null&&c.validate))return;const r=st(),s=gn(),i=([e,n]=_i(()=>Promise.resolve(t.meta.validate(t))),e=await e,n(),e);if(i===!0)return;const o=Il({statusCode:i&&i.statusCode||404,statusMessage:i&&i.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}}),a=s.beforeResolve(u=>{if(a(),u===t){const h=s.afterEach(async()=>{h(),await r.runWithContext(()=>li(o)),window==null||window.history.pushState({},"",t.fullPath)});return!1}})},gC=async t=>{let e,n;const r=([e,n]=_i(()=>Nf(t.path)),e=await e,n(),e);if(r.redirect)return Ns(r.redirect,{acceptRelative:!0})?(window.location.href=r.redirect,!1):r.redirect},_C=[mC,gC],Oo={};function yC(t,e,n){const{pathname:r,search:s,hash:i}=e,o=t.indexOf("#");if(o>-1){const u=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(u);return h[0]!=="/"&&(h="/"+h),xm(h,"")}const a=xm(r,t),c=!n||$R(a,n,{trailingSlash:!0})?a:n;return c+(c.includes("?")?"":s)+i}const vC=Fn({name:"nuxt:router",enforce:"pre",async setup(t){var V;let e,n,r=wl().app.baseURL;ln.hashMode&&!r.includes("#")&&(r+="#");const s=((V=ln.history)==null?void 0:V.call(ln,r))??(ln.hashMode?NP(r):tE(r)),i=ln.routes?([e,n]=_i(()=>ln.routes(Nu)),e=await e,n(),e??Nu):Nu;let o;const a=eC({...ln,scrollBehavior:(N,D,E)=>{if(D===vn){o=E;return}if(ln.scrollBehavior){if(a.options.scrollBehavior=ln.scrollBehavior,"scrollRestoration"in window.history){const C=a.beforeEach(()=>{C(),window.history.scrollRestoration="manual"})}return ln.scrollBehavior(N,vn,o||E)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const c=Go(a.currentRoute.value);a.afterEach((N,D)=>{c.value=D}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const u=yC(r,window.location,t.payload.path),h=Go(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};t.hook("page:finish",f),a.afterEach((N,D)=>{var E,C,k,F;((C=(E=N.matched[0])==null?void 0:E.components)==null?void 0:C.default)===((F=(k=D.matched[0])==null?void 0:k.components)==null?void 0:F.default)&&f()});const p={};for(const N in h.value)Object.defineProperty(p,N,{get:()=>h.value[N],enumerable:!0});t._route=Qn(p),t._middleware=t._middleware||{global:[],named:{}};const g=Tl();a.afterEach(async(N,D,E)=>{delete t._processingMiddleware,!t.isHydrating&&g.value&&await t.runWithContext(FS),E&&await t.callHook("page:loading:end")});try{[e,n]=_i(()=>a.isReady()),await e,n()}catch(N){[e,n]=_i(()=>t.runWithContext(()=>li(N))),await e,n()}const w=u!==a.currentRoute.value.fullPath?a.resolve(u):a.currentRoute.value;f();const R=t.payload.state._layout;return a.beforeEach(async(N,D)=>{var E;await t.callHook("page:loading:start"),N.meta=or(N.meta),t.isHydrating&&R&&!tr(N.meta.layout)&&(N.meta.layout=R),t._processingMiddleware=!0;{const C=new Set([..._C,...t._middleware.global]);for(const k of N.matched){const F=k.meta.middleware;if(F)for(const I of Lf(F))C.add(I)}{const k=await t.runWithContext(()=>Nf(N.path));if(k.appMiddleware)for(const F in k.appMiddleware)k.appMiddleware[F]?C.add(F):C.delete(F)}for(const k of C){const F=typeof k=="string"?t._middleware.named[k]||await((E=Oo[k])==null?void 0:E.call(Oo).then(y=>y.default||y)):k;if(!F)throw new Error(`Unknown route middleware: '${k}'.`);const I=await t.runWithContext(()=>F(N,D));if(!t.payload.serverRendered&&t.isHydrating&&(I===!1||I instanceof Error)){const y=I||gh({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await t.runWithContext(()=>li(y)),!1}if(I!==!0&&(I||I===!1))return I}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(async(N,D)=>{N.matched.length===0&&await t.runWithContext(()=>li(gh({statusCode:404,fatal:!1,statusMessage:`Page not found: ${N.fullPath}`,data:{path:N.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in w&&(w.name=void 0),await a.replace({...w,force:!0}),a.options.scrollBehavior=ln.scrollBehavior}catch(N){await t.runWithContext(()=>li(N))}}),{provide:{router:a}}}}),lg=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),bM=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),Ff=t=>{const e=st();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{lg(()=>t())}):lg(()=>t())},EC=Fn({name:"nuxt:payload",setup(t){gn().beforeResolve(async(e,n)=>{if(e.path===n.path)return;const r=await qm(e.path);r&&Object.assign(t.static.data,r.data)}),Ff(()=>{var e;t.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await qm(n)}),((e=navigator.connection)==null?void 0:e.effectiveType)!=="slow-2g"&&setTimeout(bl,1e3)})}}),wC=Fn(()=>{const t=gn();Ff(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),TC=Fn(t=>{let e;async function n(){const r=await bl();e&&clearTimeout(e),e=setTimeout(n,Om);try{const s=await $fetch(Vf("builds/latest.json")+`?${Date.now()}`);s.id!==r.id&&t.hooks.callHook("app:manifest:update",s)}catch{}}Ff(()=>{e=setTimeout(n,Om)})});function IC(t={}){const e=t.path||window.location.pathname;let n={};try{n=Fc(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||(n==null?void 0:n.path)!==e||(n==null?void 0:n.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:st().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const bC=Fn({name:"nuxt:chunk-reload",setup(t){const e=gn(),n=wl(),r=new Set;e.beforeEach(()=>{r.clear()}),t.hook("app:chunkError",({error:i})=>{r.add(i)});function s(i){const a="href"in i&&i.href[0]==="#"?n.app.baseURL+i.href:xf(n.app.baseURL,i.fullPath);IC({path:a,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{r.has(i)&&s(o)})}}),AC=Fn({name:"nuxt:global-components"}),Sr={default:()=>En(()=>import("./smOkWYbc.js"),__vite__mapDeps([22,3,23]),import.meta.url)},RC=Fn({name:"nuxt:prefetch",setup(t){const e=gn();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{var s;const r=(s=n==null?void 0:n.meta)==null?void 0:s.layout;r&&typeof Sr[r]=="function"&&await Sr[r]()})}),t.hooks.hook("link:prefetch",n=>{if(Ns(n))return;const r=e.resolve(n);if(!r)return;const s=r.meta.layout;let i=Lf(r.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof Oo[o]=="function"&&Oo[o]();s&&typeof Sr[s]=="function"&&Sr[s]()})}});/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var SC="store";function Gi(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function oE(t){return t!==null&&typeof t=="object"}function PC(t){return t&&typeof t.then=="function"}function CC(t,e){return function(){return t(e)}}function aE(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function cE(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Rl(t,n,[],t._modules.root,!0),Bf(t,n,e)}function Bf(t,e,n){var r=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},a={},c=X_(!0);c.run(function(){Gi(i,function(u,h){o[h]=CC(u,t),a[h]=rn(function(){return o[h]()}),Object.defineProperty(t.getters,h,{get:function(){return a[h].value},enumerable:!0})})}),t._state=or({data:e}),t._scope=c,t.strict&&kC(t),r&&n&&t._withCommit(function(){r.data=null}),s&&s.stop()}function Rl(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var a=Uf(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit(function(){a[c]=r.state})}var u=r.context=xC(t,o,n);r.forEachMutation(function(h,f){var p=o+f;VC(t,p,h,u)}),r.forEachAction(function(h,f){var p=h.root?f:o+f,g=h.handler||h;DC(t,p,g,u)}),r.forEachGetter(function(h,f){var p=o+f;NC(t,p,h,u)}),r.forEachChild(function(h,f){Rl(t,e,n.concat(f),h,s)})}function xC(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,a){var c=Hc(i,o,a),u=c.payload,h=c.options,f=c.type;return(!h||!h.root)&&(f=e+f),t.dispatch(f,u)},commit:r?t.commit:function(i,o,a){var c=Hc(i,o,a),u=c.payload,h=c.options,f=c.type;(!h||!h.root)&&(f=e+f),t.commit(f,u,h)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return lE(t,e)}},state:{get:function(){return Uf(t.state,n)}}}),s}function lE(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function VC(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function DC(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return PC(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):a})}function NC(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function kC(t){Vr(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Uf(t,e){return e.reduce(function(n,r){return n[r]},t)}function Hc(t,e,n){return oE(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var OC="vuex bindings",ug="vuex:mutations",ku="vuex:actions",Js="vuex",MC=0;function LC(t,e){Q0({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[OC]},function(n){n.addTimelineLayer({id:ug,label:"Vuex Mutations",color:hg}),n.addTimelineLayer({id:ku,label:"Vuex Actions",color:hg}),n.addInspector({id:Js,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===Js)if(r.filter){var s=[];dE(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[fE(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===Js){var s=r.nodeId;lE(e,s),r.state=UC($C(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===Js){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(Js),n.sendInspectorState(Js),n.addTimelineEvent({layerId:ug,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=MC++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:ku,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:ku,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var hg=8702998,FC=6710886,BC=16777215,uE={label:"namespaced",textColor:BC,backgroundColor:FC};function hE(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function fE(t,e){return{id:e||"root",label:hE(e),tags:t.namespaced?[uE]:[],children:Object.keys(t._children).map(function(n){return fE(t._children[n],e+n+"/")})}}function dE(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[uE]:[]}),Object.keys(e._children).forEach(function(s){dE(t,e._children[s],n,r+s+"/")})}function UC(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=jC(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?hE(o):o,editable:!1,value:Ch(function(){return i[o]})}})}return s}function jC(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=Ch(function(){return t[n]})}else e[n]=Ch(function(){return t[n]})}),e}function $C(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function Ch(t){try{return t()}catch(e){return e}}var Rn=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},pE={namespaced:{configurable:!0}};pE.namespaced.get=function(){return!!this._rawModule.namespaced};Rn.prototype.addChild=function(e,n){this._children[e]=n};Rn.prototype.removeChild=function(e){delete this._children[e]};Rn.prototype.getChild=function(e){return this._children[e]};Rn.prototype.hasChild=function(e){return e in this._children};Rn.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Rn.prototype.forEachChild=function(e){Gi(this._children,e)};Rn.prototype.forEachGetter=function(e){this._rawModule.getters&&Gi(this._rawModule.getters,e)};Rn.prototype.forEachAction=function(e){this._rawModule.actions&&Gi(this._rawModule.actions,e)};Rn.prototype.forEachMutation=function(e){this._rawModule.mutations&&Gi(this._rawModule.mutations,e)};Object.defineProperties(Rn.prototype,pE);var ks=function(e){this.register([],e,!1)};ks.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};ks.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};ks.prototype.update=function(e){mE([],this.root,e)};ks.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new Rn(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&Gi(n.modules,function(a,c){s.register(e.concat(c),a,r)})};ks.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};ks.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function mE(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;mE(t.concat(r),e.getChild(r),n.modules[r])}}function qC(t){return new Zt(t)}var Zt=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ks(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,a=this,c=a.dispatch,u=a.commit;this.dispatch=function(p,g){return c.call(o,p,g)},this.commit=function(p,g,w){return u.call(o,p,g,w)},this.strict=s;var h=this._modules.root.state;Rl(this,h,[],this._modules.root),Bf(this,h),r.forEach(function(f){return f(n)})},jf={state:{configurable:!0}};Zt.prototype.install=function(e,n){e.provide(n||SC,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&LC(e,this)};jf.state.get=function(){return this._state.data};jf.state.set=function(t){};Zt.prototype.commit=function(e,n,r){var s=this,i=Hc(e,n,r),o=i.type,a=i.payload,c={type:o,payload:a},u=this._mutations[o];u&&(this._withCommit(function(){u.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(h){return h(c,s.state)}))};Zt.prototype.dispatch=function(e,n){var r=this,s=Hc(e,n),i=s.type,o=s.payload,a={type:i,payload:o},c=this._actions[i];if(c){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(a,r.state)})}catch{}var u=c.length>1?Promise.all(c.map(function(h){return h(o)})):c[0](o);return new Promise(function(h,f){u.then(function(p){try{r._actionSubscribers.filter(function(g){return g.after}).forEach(function(g){return g.after(a,r.state)})}catch{}h(p)},function(p){try{r._actionSubscribers.filter(function(g){return g.error}).forEach(function(g){return g.error(a,r.state,p)})}catch{}f(p)})})}};Zt.prototype.subscribe=function(e,n){return aE(e,this._subscribers,n)};Zt.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return aE(r,this._actionSubscribers,n)};Zt.prototype.watch=function(e,n,r){var s=this;return Vr(function(){return e(s.state,s.getters)},n,Object.assign({},r))};Zt.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Zt.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),Rl(this,this.state,e,this._modules.get(e),r.preserveState),Bf(this,this.state)};Zt.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=Uf(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),cE(this)};Zt.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Zt.prototype.hotUpdate=function(e){this._modules.update(e),cE(this,!0)};Zt.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Zt.prototype,jf);var AM=qf(function(t,e){var n={};return $f(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){var a=this.$store.state,c=this.$store.getters;if(t){var u=Gf(this.$store,"mapState",t);if(!u)return;a=u.context.state,c=u.context.getters}return typeof i=="function"?i.call(this,a,c):a[i]},n[s].vuex=!0}),n}),RM=qf(function(t,e){var n={};return $f(e).forEach(function(r){var s=r.key,i=r.val;i=t+i,n[s]=function(){if(!(t&&!Gf(this.$store,"mapGetters",t)))return this.$store.getters[i]},n[s].vuex=!0}),n}),SM=qf(function(t,e){var n={};return $f(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];var u=this.$store.dispatch;if(t){var h=Gf(this.$store,"mapActions",t);if(!h)return;u=h.context.dispatch}return typeof i=="function"?i.apply(this,[u].concat(a)):u.apply(this.$store,[i].concat(a))}}),n});function $f(t){return GC(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function GC(t){return Array.isArray(t)||oE(t)}function qf(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function Gf(t,e,n){var r=t._modulesNamespaceMap[n];return r}/*!
  * vuexfire v3.2.5
  * (c) 2020 Eduardo San Martin Morote
  * @license MIT
  */var gE="vuexfire/SET_VALUE",_E="vuexfire/ARRAY_ADD",yE="vuexfire/ARRAY_REMOVE";function Hf(t,e){return e.split(".").reduce(function(n,r){return n[r]},t)}function HC(t,e,n){var r=(""+e).split("."),s=r.pop(),i=r.reduce(function(o,a){return o[a]},t);return Array.isArray(i)?i.splice(Number(s),1,n):i[s]=n}function KC(t){return t&&typeof t=="object"}function zC(t){return t.toDate}function WC(t){return t&&t.onSnapshot}function QC(t,e){var n=!1;return function(){if(!n)return n=!0,t(e())}}function JC(t){return Object.defineProperty(t.data()||{},"id",{value:t.id})}function xh(t,e,n){var r=[{},{}],s=Object.keys(n).reduce(function(o,a){var c=n[a];return o[c.path]=c.data(),o},{});function i(o,a,c,u){a=a||{};var h=u[0],f=u[1];Object.getOwnPropertyNames(o).forEach(function(V){var N=Object.getOwnPropertyDescriptor(o,V);N&&!N.enumerable&&Object.defineProperty(h,V,N)});for(var p in o){var g=o[p];if(g==null||g instanceof Date||zC(g)||g.longitude&&g.latitude)h[p]=g;else if(WC(g))h[p]=typeof a=="object"&&p in a&&typeof a[p]!="string"?a[p]:g.path,f[c+p]=g;else if(Array.isArray(g)){h[p]=Array(g.length);for(var w=0;w<g.length;w++){var R=g[w];R&&R.path in s&&(h[p][w]=s[R.path])}i(g,a[p]||h[p],c+p+".",[h[p],f])}else KC(g)?(h[p]={},i(g,a[p],c+p+".",[h[p],f])):h[p]=g}}return i(t,e,"",r),r}var Qo={maxRefDepth:2,reset:!0,serialize:JC,wait:!1};function Kc(t){for(var e in t)t[e].unsub()}function vE(t,e,n,r,s,i,o,a){var c=xh(t.serialize(r),Hf(e,n),s),u=c[0],h=c[1];i.set(e,n,u),Vh(t,e,n,s,h,i,o,a)}function YC(t,e){var n=t.ref,r=t.target,s=t.path,i=t.depth,o=t.resolve,a=t.ops,c=Object.create(null),u=n.onSnapshot(function(h){h.exists?vE(e,r,s,h,c,a,i,o):(a.set(r,s,null),o())});return function(){u(),Kc(c)}}function Vh(t,e,n,r,s,i,o,a){var c=Object.keys(s),u=Object.keys(r).filter(function(w){return c.indexOf(w)<0});if(u.forEach(function(w){r[w].unsub(),delete r[w]}),!c.length||++o>t.maxRefDepth)return a(n);var h=0,f=c.length,p=Object.create(null);function g(w){w in p&&++h>=f&&a(n)}c.forEach(function(w){var R=r[w],V=s[w],N=n+"."+w;if(p[N]=!0,R)if(R.path!==V.path)R.unsub();else return;r[w]={data:function(){return Hf(e,N)},unsub:YC({ref:V,target:e,path:N,depth:o,ops:i,resolve:g.bind(null,N)},t),path:V.path}})}function XC(t,e){var n=t.vm,r=t.key,s=t.collection,i=t.ops,o=t.resolve,a=t.reject;e===void 0&&(e=Qo);var c=Object.assign({},Qo,e),u=c.wait?[]:i.set(n,r,[]),h=o,f,p=[],g={added:function(R){var V=R.newIndex,N=R.doc;p.splice(V,0,Object.create(null));var D=p[V],E=xh(c.serialize(N),void 0,D),C=E[0],k=E[1];i.add(u,V,C),Vh(c,u,V,D,k,i,0,o.bind(null,N))},modified:function(R){var V=R.oldIndex,N=R.newIndex,D=R.doc,E=p[V],C=u[V],k=xh(c.serialize(D),C,E),F=k[0],I=k[1];p.splice(N,0,E),i.remove(u,V),i.add(u,N,F),Vh(c,u,N,E,I,i,0,o)},removed:function(R){var V=R.oldIndex;i.remove(u,V),Kc(p.splice(V,1)[0])}},w=s.onSnapshot(function(R){var V=typeof R.docChanges=="function"?R.docChanges():R.docChanges;if(!f&&V.length){f=!0;for(var N=0,D=V.length,E=Object.create(null),C=0;C<D;C++)E[V[C].doc.id]=!0;o=function(k){var F=k.id;F in E&&++N>=D&&(c.wait&&i.set(n,r,u),h(n[r]),o=function(){})}}V.forEach(function(k){g[k.type](k)}),V.length||(c.wait&&i.set(n,r,u),o(u))},a);return function(R){if(w(),R!==!1){var V=typeof R=="function"?R():[];i.set(n,r,V)}p.forEach(Kc)}}function ZC(t,e){var n=t.vm,r=t.key,s=t.document,i=t.resolve,o=t.reject,a=t.ops;e===void 0&&(e=Qo);var c=Object.assign({},Qo,e),u=Object.create(null);i=QC(i,function(){return Hf(n,r)});var h=s.onSnapshot(function(f){f.exists?vE(c,n,r,f,u,a,0,i):(a.set(n,r,null),i(null))},o);return function(f){if(h(),f!==!1){var p=typeof f=="function"?f():null;a.set(n,r,p)}Kc(u)}}var go,ex=(go={},go[gE]=function(t,e){var n=e.path,r=e.target,s=e.data;HC(r,n,s)},go[_E]=function(t,e){var n=e.newIndex,r=e.data,s=e.target;s.splice(n,0,r)},go[yE]=function(t,e){var n=e.oldIndex,r=e.target;return r.splice(n,1)[0]},go);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zc=function(){return zc=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zc.apply(this,arguments)},Ou={root:!0},Dh=new WeakMap;function tx(t,e,n,r,s,i){var o=Dh.get(e);return o||(o=Object.create(null),Dh.set(e,o)),n in o&&EE(e,n,i.wait?typeof i.reset=="function"?i.reset:!1:i.reset),new Promise(function(a,c){o[n]="where"in r?XC({vm:t,key:n,collection:r,ops:s,resolve:a,reject:c},i):ZC({vm:t,key:n,document:r,ops:s,resolve:a,reject:c},i)})}function EE(t,e,n){var r=Dh.get(t);!r||!r[e]||(r[e](n),delete r[e])}function dn(t){return function(n,r){var s=n.state,i=n.commit,o={set:function(a,c,u){return i(gE,{path:c,target:a,data:u},Ou),u},add:function(a,c,u){return i(_E,{target:a,newIndex:c,data:u},Ou)},remove:function(a,c){var u=a[c];return i(yE,{target:a,oldIndex:c},Ou),[u]}};return t.call(this,zc(zc({},n),{bindFirestoreRef:function(a,c,u){return tx(s,i,a,c,o,Object.assign({},Qo,u))},unbindFirestoreRef:function(a,c){return EE(i,a,c)}}),r)}}var fg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},TE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new rx;const p=i<<2|a>>4;if(r.push(p),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const w=u<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sx=function(t){const e=wE(t);return TE.encodeByteArray(e,!0)},Wc=function(t){return sx(t).replace(/\./g,"")},ix=function(t){try{return TE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Qc(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!ox(n)||(t[n]=Qc(t[n],e[n]));return t}function ox(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=()=>IE().__FIREBASE_DEFAULTS__,cx=()=>{if(typeof process>"u"||typeof fg>"u")return;const t=fg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ix(t[1]);return e&&JSON.parse(e)},bE=()=>{try{return ax()||cx()||lx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AE=()=>{var t;return(t=bE())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wc(JSON.stringify(n)),Wc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fx(){var t;const e=(t=bE())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function dx(){return typeof window<"u"||RE()}function RE(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function SE(){return!fx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PE(){try{return typeof indexedDB=="object"}catch{return!1}}function px(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="FirebaseError";class Os extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mx,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sl.prototype.create)}}class Sl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?gx(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Os(s,a,r)}}function gx(t,e){return t.replace(_x,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _x=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(pg(i)&&pg(o)){if(!Jo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function pg(t){return t!==null&&typeof t=="object"}function yx(t,e){const n=new vx(t,e);return n.subscribe.bind(n)}class vx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ex(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Mu),s.error===void 0&&(s.error=Mu),s.complete===void 0&&(s.complete=Mu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ex(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ux;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ix(e))try{this.getOrInitializeService({instanceIdentifier:is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=is){return this.instances.has(e)}getOptions(e=is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Tx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=is){return this.component?this.component.multipleInstances?e:is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Tx(t){return t===is?void 0:t}function Ix(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=[];var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const xE={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},bx=Ie.INFO,Ax={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},Rx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Ax[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zf{constructor(e){this.name=e,this._logLevel=bx,this._logHandler=Rx,this._userLogHandler=null,Kf.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}function Sx(t){Kf.forEach(e=>{e.setLogLevel(t)})}function Px(t,e){for(const n of Kf){let r=null;e&&e.level&&(r=xE[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(r??s.logLevel)&&t({level:Ie[i].toLowerCase(),message:a,args:o,type:s.name})}}}const Cx=(t,e)=>e.some(n=>t instanceof n);let mg,gg;function xx(){return mg||(mg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Vx(){return gg||(gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VE=new WeakMap,Nh=new WeakMap,DE=new WeakMap,Lu=new WeakMap,Wf=new WeakMap;function Dx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Dr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&VE.set(n,t)}).catch(()=>{}),Wf.set(e,t),e}function Nx(t){if(Nh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Nh.set(t,e)}let kh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kx(t){kh=t(kh)}function Ox(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fu(this),e,...n);return DE.set(r,e.sort?e.sort():[e]),Dr(r)}:Vx().includes(t)?function(...e){return t.apply(Fu(this),e),Dr(VE.get(this))}:function(...e){return Dr(t.apply(Fu(this),e))}}function Mx(t){return typeof t=="function"?Ox(t):(t instanceof IDBTransaction&&Nx(t),Cx(t,xx())?new Proxy(t,kh):t)}function Dr(t){if(t instanceof IDBRequest)return Dx(t);if(Lu.has(t))return Lu.get(t);const e=Mx(t);return e!==t&&(Lu.set(t,e),Wf.set(e,t)),e}const Fu=t=>Wf.get(t);function Lx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Dr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Dr(o.result),c.oldVersion,c.newVersion,Dr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Fx=["get","getKey","getAll","getAllKeys","count"],Bx=["put","add","delete","clear"],Bu=new Map;function _g(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bu.get(e))return Bu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Bx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Fx.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return Bu.set(e,i),i}kx(t=>({...t,get:(e,n,r)=>_g(e,n)||t.get(e,n,r),has:(e,n)=>!!_g(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yc="@firebase/app",Oh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new zf("@firebase/app"),$x="@firebase/app-compat",qx="@firebase/analytics-compat",Gx="@firebase/analytics",Hx="@firebase/app-check-compat",Kx="@firebase/app-check",zx="@firebase/auth",Wx="@firebase/auth-compat",Qx="@firebase/database",Jx="@firebase/data-connect",Yx="@firebase/database-compat",Xx="@firebase/functions",Zx="@firebase/functions-compat",eV="@firebase/installations",tV="@firebase/installations-compat",nV="@firebase/messaging",rV="@firebase/messaging-compat",sV="@firebase/performance",iV="@firebase/performance-compat",oV="@firebase/remote-config",aV="@firebase/remote-config-compat",cV="@firebase/storage",lV="@firebase/storage-compat",uV="@firebase/firestore",hV="@firebase/vertexai-preview",fV="@firebase/firestore-compat",dV="firebase",pV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="[DEFAULT]",mV={[Yc]:"fire-core",[$x]:"fire-core-compat",[Gx]:"fire-analytics",[qx]:"fire-analytics-compat",[Kx]:"fire-app-check",[Hx]:"fire-app-check-compat",[zx]:"fire-auth",[Wx]:"fire-auth-compat",[Qx]:"fire-rtdb",[Jx]:"fire-data-connect",[Yx]:"fire-rtdb-compat",[Xx]:"fire-fn",[Zx]:"fire-fn-compat",[eV]:"fire-iid",[tV]:"fire-iid-compat",[nV]:"fire-fcm",[rV]:"fire-fcm-compat",[sV]:"fire-perf",[iV]:"fire-perf-compat",[oV]:"fire-rc",[aV]:"fire-rc-compat",[cV]:"fire-gcs",[lV]:"fire-gcs-compat",[uV]:"fire-fst",[fV]:"fire-fst-compat",[hV]:"fire-vertex","fire-js":"fire-js",[dV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Map,Ai=new Map,Ri=new Map;function Yo(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function NE(t,e){t.container.addOrOverwriteComponent(e)}function Si(t){const e=t.name;if(Ri.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;Ri.set(e,t);for(const n of Or.values())Yo(n,t);for(const n of Ai.values())Yo(n,t);return!0}function kE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gV(t,e,n=kr){kE(t,e).clearInstance(n)}function OE(t){return t.options!==void 0}function _V(t){return t.settings!==void 0}function yV(){Ri.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pn=new Sl("app","Firebase",vV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ME=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV extends ME{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const a=e;super(a.options,o,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Xn(Yc,Oh,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Yf(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw pn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=pV;function Jf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kr,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw pn.create("bad-app-name",{appName:String(s)});if(n||(n=AE()),!n)throw pn.create("no-options");const i=Or.get(s);if(i){if(Jo(n,i.options)&&Jo(r,i.config))return i;throw pn.create("duplicate-app",{appName:s})}const o=new CE(s);for(const c of Ri.values())o.addComponent(c);const a=new ME(n,r,o);return Or.set(s,a),a}function wV(t,e){if(dx()&&!RE())throw pn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;OE(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=u=>[...u].reduce((h,f)=>Math.imul(31,h)+f.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw pn.create("finalization-registry-not-supported",{});const i=""+s(JSON.stringify(r)),o=Ai.get(i);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new CE(i);for(const u of Ri.values())a.addComponent(u);const c=new EV(n,e,i,a);return Ai.set(i,c),c}function TV(t=kr){const e=Or.get(t);if(!e&&t===kr&&AE())return Jf();if(!e)throw pn.create("no-app",{appName:t});return e}function IV(){return Array.from(Or.values())}async function Yf(t){let e=!1;const n=t.name;Or.has(n)?(e=!0,Or.delete(n)):Ai.has(n)&&t.decRefCount()<=0&&(Ai.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Xn(t,e,n){var r;let s=(r=mV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(a.join(" "));return}Si(new Ts(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function LE(t,e){if(t!==null&&typeof t!="function")throw pn.create("invalid-log-argument");Px(t,e)}function FE(t){Sx(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV="firebase-heartbeat-database",AV=1,Xo="firebase-heartbeat-store";let Uu=null;function BE(){return Uu||(Uu=Lx(bV,AV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xo)}catch(n){console.warn(n)}}}}).catch(t=>{throw pn.create("idb-open",{originalErrorMessage:t.message})})),Uu}async function RV(t){try{const n=(await BE()).transaction(Xo),r=await n.objectStore(Xo).get(UE(t));return await n.done,r}catch(e){if(e instanceof Os)rr.warn(e.message);else{const n=pn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function yg(t,e){try{const r=(await BE()).transaction(Xo,"readwrite");await r.objectStore(Xo).put(e,UE(t)),await r.done}catch(n){if(n instanceof Os)rr.warn(n.message);else{const r=pn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(r.message)}}}function UE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=1024,PV=30*24*60*60*1e3;class CV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=PV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vg(),{heartbeatsToSend:r,unsentEntries:s}=xV(this._heartbeatsCache.heartbeats),i=Wc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return rr.warn(n),""}}}function vg(){return new Date().toISOString().substring(0,10)}function xV(t,e=SV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Eg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Eg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PE()?px().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Eg(t){return Wc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t){Si(new Ts("platform-logger",e=>new Ux(e),"PRIVATE")),Si(new Ts("heartbeat",e=>new CV(e),"PRIVATE")),Xn(Yc,Oh,t),Xn(Yc,Oh,"esm2017"),Xn("fire-js","")}DV("");const NV=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Os,SDK_VERSION:Qf,_DEFAULT_ENTRY_NAME:kr,_addComponent:Yo,_addOrOverwriteComponent:NE,_apps:Or,_clearComponents:yV,_components:Ri,_getProvider:kE,_isFirebaseApp:OE,_isFirebaseServerApp:_V,_registerComponent:Si,_removeServiceInstance:gV,_serverApps:Ai,deleteApp:Yf,getApp:TV,getApps:IV,initializeApp:Jf,initializeServerApp:wV,onLog:LE,registerVersion:Xn,setLogLevel:FE},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n){this._delegate=e,this.firebase=n,Yo(e,new Ts("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Yf(this._delegate)))}_getService(e,n=kr){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=kr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Yo(this._delegate,e)}_addOrOverwriteComponent(e){NE(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},wg=new Sl("app-compat","Firebase",OV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:Xn,setLogLevel:FE,onLog:LE,apps:null,SDK_VERSION:Qf,INTERNAL:{registerComponent:a,removeApp:r,useAsService:c,modularAPIs:NV}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function s(u){if(u=u||kr,!dg(e,u))throw wg.create("no-app",{appName:u});return e[u]}s.App=t;function i(u,h={}){const f=Jf(u,h);if(dg(e,f.name))return e[f.name];const p=new t(f,n);return e[f.name]=p,p}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const h=u.name,f=h.replace("-compat","");if(Si(u)&&u.type==="PUBLIC"){const p=(g=s())=>{if(typeof g[f]!="function")throw wg.create("invalid-app-argument",{appName:h});return g[f]()};u.serviceProps!==void 0&&Qc(p,u.serviceProps),n[f]=p,t.prototype[f]=function(...g){return this._getService.bind(this,h).apply(this,u.multipleInstances?g:[])}}return u.type==="PUBLIC"?n[f]:null}function c(u,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(){const t=MV(kV);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:jE,extendNamespace:e,createSubscribe:yx,ErrorFactory:Sl,deepExtend:Qc});function e(n){Qc(t,n)}return t}const LV=jE();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new zf("@firebase/app-compat"),FV="@firebase/app-compat",BV="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t){Xn(FV,BV,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=IE();if(t.firebase!==void 0){Tg.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Tg.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Zo=LV;UV();var jV="firebase",$V="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zo.registerVersion(jV,$V,"app-compat");var Ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,$E;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,y){function v(){}v.prototype=y.prototype,I.D=y.prototype,I.prototype=new v,I.prototype.constructor=I,I.C=function(b,P,S){for(var T=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)T[ge-2]=arguments[ge];return y.prototype[P].apply(b,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,y,v){v||(v=0);var b=Array(16);if(typeof y=="string")for(var P=0;16>P;++P)b[P]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(P=0;16>P;++P)b[P]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=I.g[0],v=I.g[1],P=I.g[2];var S=I.g[3],T=y+(S^v&(P^S))+b[0]+3614090360&4294967295;y=v+(T<<7&4294967295|T>>>25),T=S+(P^y&(v^P))+b[1]+3905402710&4294967295,S=y+(T<<12&4294967295|T>>>20),T=P+(v^S&(y^v))+b[2]+606105819&4294967295,P=S+(T<<17&4294967295|T>>>15),T=v+(y^P&(S^y))+b[3]+3250441966&4294967295,v=P+(T<<22&4294967295|T>>>10),T=y+(S^v&(P^S))+b[4]+4118548399&4294967295,y=v+(T<<7&4294967295|T>>>25),T=S+(P^y&(v^P))+b[5]+1200080426&4294967295,S=y+(T<<12&4294967295|T>>>20),T=P+(v^S&(y^v))+b[6]+2821735955&4294967295,P=S+(T<<17&4294967295|T>>>15),T=v+(y^P&(S^y))+b[7]+4249261313&4294967295,v=P+(T<<22&4294967295|T>>>10),T=y+(S^v&(P^S))+b[8]+1770035416&4294967295,y=v+(T<<7&4294967295|T>>>25),T=S+(P^y&(v^P))+b[9]+2336552879&4294967295,S=y+(T<<12&4294967295|T>>>20),T=P+(v^S&(y^v))+b[10]+4294925233&4294967295,P=S+(T<<17&4294967295|T>>>15),T=v+(y^P&(S^y))+b[11]+2304563134&4294967295,v=P+(T<<22&4294967295|T>>>10),T=y+(S^v&(P^S))+b[12]+1804603682&4294967295,y=v+(T<<7&4294967295|T>>>25),T=S+(P^y&(v^P))+b[13]+4254626195&4294967295,S=y+(T<<12&4294967295|T>>>20),T=P+(v^S&(y^v))+b[14]+2792965006&4294967295,P=S+(T<<17&4294967295|T>>>15),T=v+(y^P&(S^y))+b[15]+1236535329&4294967295,v=P+(T<<22&4294967295|T>>>10),T=y+(P^S&(v^P))+b[1]+4129170786&4294967295,y=v+(T<<5&4294967295|T>>>27),T=S+(v^P&(y^v))+b[6]+3225465664&4294967295,S=y+(T<<9&4294967295|T>>>23),T=P+(y^v&(S^y))+b[11]+643717713&4294967295,P=S+(T<<14&4294967295|T>>>18),T=v+(S^y&(P^S))+b[0]+3921069994&4294967295,v=P+(T<<20&4294967295|T>>>12),T=y+(P^S&(v^P))+b[5]+3593408605&4294967295,y=v+(T<<5&4294967295|T>>>27),T=S+(v^P&(y^v))+b[10]+38016083&4294967295,S=y+(T<<9&4294967295|T>>>23),T=P+(y^v&(S^y))+b[15]+3634488961&4294967295,P=S+(T<<14&4294967295|T>>>18),T=v+(S^y&(P^S))+b[4]+3889429448&4294967295,v=P+(T<<20&4294967295|T>>>12),T=y+(P^S&(v^P))+b[9]+568446438&4294967295,y=v+(T<<5&4294967295|T>>>27),T=S+(v^P&(y^v))+b[14]+3275163606&4294967295,S=y+(T<<9&4294967295|T>>>23),T=P+(y^v&(S^y))+b[3]+4107603335&4294967295,P=S+(T<<14&4294967295|T>>>18),T=v+(S^y&(P^S))+b[8]+1163531501&4294967295,v=P+(T<<20&4294967295|T>>>12),T=y+(P^S&(v^P))+b[13]+2850285829&4294967295,y=v+(T<<5&4294967295|T>>>27),T=S+(v^P&(y^v))+b[2]+4243563512&4294967295,S=y+(T<<9&4294967295|T>>>23),T=P+(y^v&(S^y))+b[7]+1735328473&4294967295,P=S+(T<<14&4294967295|T>>>18),T=v+(S^y&(P^S))+b[12]+2368359562&4294967295,v=P+(T<<20&4294967295|T>>>12),T=y+(v^P^S)+b[5]+4294588738&4294967295,y=v+(T<<4&4294967295|T>>>28),T=S+(y^v^P)+b[8]+2272392833&4294967295,S=y+(T<<11&4294967295|T>>>21),T=P+(S^y^v)+b[11]+1839030562&4294967295,P=S+(T<<16&4294967295|T>>>16),T=v+(P^S^y)+b[14]+4259657740&4294967295,v=P+(T<<23&4294967295|T>>>9),T=y+(v^P^S)+b[1]+2763975236&4294967295,y=v+(T<<4&4294967295|T>>>28),T=S+(y^v^P)+b[4]+1272893353&4294967295,S=y+(T<<11&4294967295|T>>>21),T=P+(S^y^v)+b[7]+4139469664&4294967295,P=S+(T<<16&4294967295|T>>>16),T=v+(P^S^y)+b[10]+3200236656&4294967295,v=P+(T<<23&4294967295|T>>>9),T=y+(v^P^S)+b[13]+681279174&4294967295,y=v+(T<<4&4294967295|T>>>28),T=S+(y^v^P)+b[0]+3936430074&4294967295,S=y+(T<<11&4294967295|T>>>21),T=P+(S^y^v)+b[3]+3572445317&4294967295,P=S+(T<<16&4294967295|T>>>16),T=v+(P^S^y)+b[6]+76029189&4294967295,v=P+(T<<23&4294967295|T>>>9),T=y+(v^P^S)+b[9]+3654602809&4294967295,y=v+(T<<4&4294967295|T>>>28),T=S+(y^v^P)+b[12]+3873151461&4294967295,S=y+(T<<11&4294967295|T>>>21),T=P+(S^y^v)+b[15]+530742520&4294967295,P=S+(T<<16&4294967295|T>>>16),T=v+(P^S^y)+b[2]+3299628645&4294967295,v=P+(T<<23&4294967295|T>>>9),T=y+(P^(v|~S))+b[0]+4096336452&4294967295,y=v+(T<<6&4294967295|T>>>26),T=S+(v^(y|~P))+b[7]+1126891415&4294967295,S=y+(T<<10&4294967295|T>>>22),T=P+(y^(S|~v))+b[14]+2878612391&4294967295,P=S+(T<<15&4294967295|T>>>17),T=v+(S^(P|~y))+b[5]+4237533241&4294967295,v=P+(T<<21&4294967295|T>>>11),T=y+(P^(v|~S))+b[12]+1700485571&4294967295,y=v+(T<<6&4294967295|T>>>26),T=S+(v^(y|~P))+b[3]+2399980690&4294967295,S=y+(T<<10&4294967295|T>>>22),T=P+(y^(S|~v))+b[10]+4293915773&4294967295,P=S+(T<<15&4294967295|T>>>17),T=v+(S^(P|~y))+b[1]+2240044497&4294967295,v=P+(T<<21&4294967295|T>>>11),T=y+(P^(v|~S))+b[8]+1873313359&4294967295,y=v+(T<<6&4294967295|T>>>26),T=S+(v^(y|~P))+b[15]+4264355552&4294967295,S=y+(T<<10&4294967295|T>>>22),T=P+(y^(S|~v))+b[6]+2734768916&4294967295,P=S+(T<<15&4294967295|T>>>17),T=v+(S^(P|~y))+b[13]+1309151649&4294967295,v=P+(T<<21&4294967295|T>>>11),T=y+(P^(v|~S))+b[4]+4149444226&4294967295,y=v+(T<<6&4294967295|T>>>26),T=S+(v^(y|~P))+b[11]+3174756917&4294967295,S=y+(T<<10&4294967295|T>>>22),T=P+(y^(S|~v))+b[2]+718787259&4294967295,P=S+(T<<15&4294967295|T>>>17),T=v+(S^(P|~y))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(P+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var v=y-this.blockSize,b=this.B,P=this.h,S=0;S<y;){if(P==0)for(;S<=v;)s(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<y;)if(b[P++]=I.charCodeAt(S++),P==this.blockSize){s(this,b),P=0;break}}else for(;S<y;)if(b[P++]=I[S++],P==this.blockSize){s(this,b),P=0;break}}this.h=P,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var v=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=v&255,v/=256;for(this.u(I),I=Array(16),y=v=0;4>y;++y)for(var b=0;32>b;b+=8)I[v++]=this.g[y]>>>b&255;return I};function i(I,y){var v=a;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=y(I)}function o(I,y){this.h=y;for(var v=[],b=!0,P=I.length-1;0<=P;P--){var S=I[P]|0;b&&S==y||(v[P]=S,b=!1)}this.g=v}var a={};function c(I){return-128<=I&&128>I?i(I,function(y){return new o([y|0],0>y?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return V(u(-I));for(var y=[],v=1,b=0;I>=v;b++)y[b]=I/v|0,v*=4294967296;return new o(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return V(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=u(Math.pow(y,8)),b=f,P=0;P<I.length;P+=8){var S=Math.min(8,I.length-P),T=parseInt(I.substring(P,P+S),y);8>S?(S=u(Math.pow(y,S)),b=b.j(S).add(u(T))):(b=b.j(v),b=b.add(u(T)))}return b}var f=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-V(this).m();for(var I=0,y=1,v=0;v<this.g.length;v++){var b=this.i(v);I+=(0<=b?b:4294967296+b)*y,y*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(R(this))return"-"+V(this).toString(I);for(var y=u(Math.pow(I,6)),v=this,b="";;){var P=C(v,y).g;v=N(v,P.j(y));var S=((0<v.g.length?v.g[0]:v.h)>>>0).toString(I);if(v=P,w(v))return S+b;for(;6>S.length;)S="0"+S;b=S+b}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function R(I){return I.h==-1}t.l=function(I){return I=N(this,I),R(I)?-1:w(I)?0:1};function V(I){for(var y=I.g.length,v=[],b=0;b<y;b++)v[b]=~I.g[b];return new o(v,~I.h).add(p)}t.abs=function(){return R(this)?V(this):this},t.add=function(I){for(var y=Math.max(this.g.length,I.g.length),v=[],b=0,P=0;P<=y;P++){var S=b+(this.i(P)&65535)+(I.i(P)&65535),T=(S>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);b=T>>>16,S&=65535,T&=65535,v[P]=T<<16|S}return new o(v,v[v.length-1]&-2147483648?-1:0)};function N(I,y){return I.add(V(y))}t.j=function(I){if(w(this)||w(I))return f;if(R(this))return R(I)?V(this).j(V(I)):V(V(this).j(I));if(R(I))return V(this.j(V(I)));if(0>this.l(g)&&0>I.l(g))return u(this.m()*I.m());for(var y=this.g.length+I.g.length,v=[],b=0;b<2*y;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(var P=0;P<I.g.length;P++){var S=this.i(b)>>>16,T=this.i(b)&65535,ge=I.i(P)>>>16,Ee=I.i(P)&65535;v[2*b+2*P]+=T*Ee,D(v,2*b+2*P),v[2*b+2*P+1]+=S*Ee,D(v,2*b+2*P+1),v[2*b+2*P+1]+=T*ge,D(v,2*b+2*P+1),v[2*b+2*P+2]+=S*ge,D(v,2*b+2*P+2)}for(b=0;b<y;b++)v[b]=v[2*b+1]<<16|v[2*b];for(b=y;b<2*y;b++)v[b]=0;return new o(v,0)};function D(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function E(I,y){this.g=I,this.h=y}function C(I,y){if(w(y))throw Error("division by zero");if(w(I))return new E(f,f);if(R(I))return y=C(V(I),y),new E(V(y.g),V(y.h));if(R(y))return y=C(I,V(y)),new E(V(y.g),y.h);if(30<I.g.length){if(R(I)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var v=p,b=y;0>=b.l(I);)v=k(v),b=k(b);var P=F(v,1),S=F(b,1);for(b=F(b,2),v=F(v,2);!w(b);){var T=S.add(b);0>=T.l(I)&&(P=P.add(v),S=T),b=F(b,1),v=F(v,1)}return y=N(I,P.j(y)),new E(P,y)}for(P=f;0<=I.l(y);){for(v=Math.max(1,Math.floor(I.m()/y.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),S=u(v),T=S.j(y);R(T)||0<T.l(I);)v-=b,S=u(v),T=S.j(y);w(S)&&(S=p),P=P.add(S),I=N(I,T)}return new E(P,I)}t.A=function(I){return C(this,I).h},t.and=function(I){for(var y=Math.max(this.g.length,I.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)&I.i(b);return new o(v,this.h&I.h)},t.or=function(I){for(var y=Math.max(this.g.length,I.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)|I.i(b);return new o(v,this.h|I.h)},t.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)^I.i(b);return new o(v,this.h^I.h)};function k(I){for(var y=I.g.length+1,v=[],b=0;b<y;b++)v[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(v,I.h)}function F(I,y){var v=y>>5;y%=32;for(var b=I.g.length-v,P=[],S=0;S<b;S++)P[S]=0<y?I.i(S+v)>>>y|I.i(S+v+1)<<32-y:I.i(S+v);return new o(P,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$E=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Es=o}).apply(typeof Ig<"u"?Ig:typeof self<"u"?self:typeof window<"u"?window:{});var ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qE,Ao,GE,_c,Mh,HE,KE,zE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,m){return l==Array.prototype||l==Object.prototype||(l[d]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ic=="object"&&ic];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,d){if(d)e:{var m=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var O=l[_];if(!(O in m))break e;m=m[O]}l=l[l.length-1],_=m[l],d=d(_),d!=_&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}function i(l,d){l instanceof String&&(l+="");var m=0,_=!1,O={next:function(){if(!_&&m<l.length){var U=m++;return{value:d(U,l[U]),done:!1}}return _=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(l){return l||function(){return i(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function u(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,m){return l.call.apply(l.bind,arguments)}function f(l,d,m){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,_),l.apply(d,O)}}return function(){return l.apply(d,arguments)}}function p(l,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function w(l,d){function m(){}m.prototype=d.prototype,l.aa=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(_,O,U){for(var J=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)J[Me-2]=arguments[Me];return d.prototype[O].apply(_,J)}}function R(l){const d=l.length;if(0<d){const m=Array(d);for(let _=0;_<d;_++)m[_]=l[_];return m}return[]}function V(l,d){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(c(_)){const O=l.length||0,U=_.length||0;l.length=O+U;for(let J=0;J<U;J++)l[O+J]=_[J]}else l.push(_)}}class N{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function D(l){return/^[\s\xa0]*$/.test(l)}function E(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function C(l){return C[" "](l),l}C[" "]=function(){};var k=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function F(l,d,m){for(const _ in l)d.call(m,l[_],_,l)}function I(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function y(l){const d={};for(const m in l)d[m]=l[m];return d}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,d){let m,_;for(let O=1;O<arguments.length;O++){_=arguments[O];for(m in _)l[m]=_[m];for(let U=0;U<v.length;U++)m=v[U],Object.prototype.hasOwnProperty.call(_,m)&&(l[m]=_[m])}}function P(l){var d=1;l=l.split(":");const m=[];for(;0<d&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function S(l){a.setTimeout(()=>{throw l},0)}function T(){var l=Fe;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class ge{constructor(){this.h=this.g=null}add(d,m){const _=Ee.get();_.set(d,m),this.h?this.h.next=_:this.g=_,this.h=_}}var Ee=new N(()=>new ie,l=>l.reset());class ie{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,re=!1,Fe=new ge,_n=()=>{const l=a.Promise.resolve(void 0);pe=()=>{l.then(on)}};var on=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(m){S(m)}var d=Ee;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}re=!1};function Qe(){this.s=this.s,this.C=this.C}Qe.prototype.s=!1,Qe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Je(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Je.prototype.h=function(){this.defaultPrevented=!0};var hr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return l}();function en(l,d){if(Je.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(k){e:{try{C(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Gt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&en.aa.h.call(this)}}w(en,Je);var Gt={2:"touch",3:"pen",4:"mouse"};en.prototype.h=function(){en.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),se=0;function ee(l,d,m,_,O){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!_,this.ha=O,this.key=++se,this.da=this.fa=!1}function ce(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ye(l){this.src=l,this.g={},this.h=0}ye.prototype.add=function(l,d,m,_,O){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var J=A(l,d,_,O);return-1<J?(d=l[J],m||(d.fa=!1)):(d=new ee(d,this.src,U,!!_,O),d.fa=m,l.push(d)),d};function ke(l,d){var m=d.type;if(m in l.g){var _=l.g[m],O=Array.prototype.indexOf.call(_,d,void 0),U;(U=0<=O)&&Array.prototype.splice.call(_,O,1),U&&(ce(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function A(l,d,m,_){for(var O=0;O<l.length;++O){var U=l[O];if(!U.da&&U.listener==d&&U.capture==!!m&&U.ha==_)return O}return-1}var x="closure_lm_"+(1e6*Math.random()|0),L={};function H(l,d,m,_,O){if(Array.isArray(d)){for(var U=0;U<d.length;U++)H(l,d[U],m,_,O);return null}return m=le(m),l&&l[$]?l.K(d,m,u(_)?!!_.capture:!1,O):j(l,d,m,!1,_,O)}function j(l,d,m,_,O,U){if(!d)throw Error("Invalid event type");var J=u(O)?!!O.capture:!!O,Me=he(l);if(Me||(l[x]=Me=new ye(l)),m=Me.add(d,m,_,J,U),m.proxy)return m;if(_=K(),m.proxy=_,_.src=l,_.listener=m,l.addEventListener)hr||(O=J),O===void 0&&(O=!1),l.addEventListener(d.toString(),_,O);else if(l.attachEvent)l.attachEvent(W(d.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function K(){function l(m){return d.call(l.src,l.listener,m)}const d=z;return l}function Z(l,d,m,_,O){if(Array.isArray(d))for(var U=0;U<d.length;U++)Z(l,d[U],m,_,O);else _=u(_)?!!_.capture:!!_,m=le(m),l&&l[$]?(l=l.i,d=String(d).toString(),d in l.g&&(U=l.g[d],m=A(U,m,_,O),-1<m&&(ce(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete l.g[d],l.h--)))):l&&(l=he(l))&&(d=l.g[d.toString()],l=-1,d&&(l=A(d,m,_,O)),(m=-1<l?d[l]:null)&&Q(m))}function Q(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[$])ke(d.i,l);else{var m=l.type,_=l.proxy;d.removeEventListener?d.removeEventListener(m,_,l.capture):d.detachEvent?d.detachEvent(W(m),_):d.addListener&&d.removeListener&&d.removeListener(_),(m=he(d))?(ke(m,l),m.h==0&&(m.src=null,d[x]=null)):ce(l)}}}function W(l){return l in L?L[l]:L[l]="on"+l}function z(l,d){if(l.da)l=!0;else{d=new en(d,this);var m=l.listener,_=l.ha||l.src;l.fa&&Q(l),l=m.call(_,d)}return l}function he(l){return l=l[x],l instanceof ye?l:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(l){return typeof l=="function"?l:(l[te]||(l[te]=function(d){return l.handleEvent(d)}),l[te])}function oe(){Qe.call(this),this.i=new ye(this),this.M=this,this.F=null}w(oe,Qe),oe.prototype[$]=!0,oe.prototype.removeEventListener=function(l,d,m,_){Z(this,l,d,m,_)};function de(l,d){var m,_=l.F;if(_)for(m=[];_;_=_.F)m.push(_);if(l=l.M,_=d.type||d,typeof d=="string")d=new Je(d,l);else if(d instanceof Je)d.target=d.target||l;else{var O=d;d=new Je(_,l),b(d,O)}if(O=!0,m)for(var U=m.length-1;0<=U;U--){var J=d.g=m[U];O=Ce(J,_,!0,d)&&O}if(J=d.g=l,O=Ce(J,_,!0,d)&&O,O=Ce(J,_,!1,d)&&O,m)for(U=0;U<m.length;U++)J=d.g=m[U],O=Ce(J,_,!1,d)&&O}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var m=l.g[d],_=0;_<m.length;_++)ce(m[_]);delete l.g[d],l.h--}}this.F=null},oe.prototype.K=function(l,d,m,_){return this.i.add(String(l),d,!1,m,_)},oe.prototype.L=function(l,d,m,_){return this.i.add(String(l),d,!0,m,_)};function Ce(l,d,m,_){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,U=0;U<d.length;++U){var J=d[U];if(J&&!J.da&&J.capture==m){var Me=J.listener,yt=J.ha||J.src;J.fa&&ke(l.i,J),O=Me.call(yt,_)!==!1&&O}}return O&&!_.defaultPrevented}function Ae(l,d,m){if(typeof l=="function")m&&(l=p(l,m));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function gt(l){l.g=Ae(()=>{l.g=null,l.i&&(l.i=!1,gt(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ht extends Qe{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:gt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _t(l){Qe.call(this),this.h=l,this.g={}}w(_t,Qe);var Rt=[];function fr(l){F(l.g,function(d,m){this.g.hasOwnProperty(m)&&Q(d)},l),l.g={}}_t.prototype.N=function(){_t.aa.N.call(this),fr(this)},_t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var js=a.JSON.stringify,Nt=a.JSON.parse,an=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function $s(){}$s.prototype.h=null;function Zi(l){return l.h||(l.h=l.i())}function tp(){}var eo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yl(){Je.call(this,"d")}w(Yl,Je);function Xl(){Je.call(this,"c")}w(Xl,Je);var Qr={},np=null;function ka(){return np=np||new oe}Qr.La="serverreachability";function rp(l){Je.call(this,Qr.La,l)}w(rp,Je);function to(l){const d=ka();de(d,new rp(d))}Qr.STAT_EVENT="statevent";function sp(l,d){Je.call(this,Qr.STAT_EVENT,l),this.stat=d}w(sp,Je);function kt(l){const d=ka();de(d,new sp(d,l))}Qr.Ma="timingevent";function ip(l,d){Je.call(this,Qr.Ma,l),this.size=d}w(ip,Je);function no(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function ro(){this.g=!0}ro.prototype.xa=function(){this.g=!1};function hI(l,d,m,_,O,U){l.info(function(){if(l.g)if(U)for(var J="",Me=U.split("&"),yt=0;yt<Me.length;yt++){var Re=Me[yt].split("=");if(1<Re.length){var St=Re[0];Re=Re[1];var Pt=St.split("_");J=2<=Pt.length&&Pt[1]=="type"?J+(St+"="+Re+"&"):J+(St+"=redacted&")}}else J=null;else J=U;return"XMLHTTP REQ ("+_+") [attempt "+O+"]: "+d+`
`+m+`
`+J})}function fI(l,d,m,_,O,U,J){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+O+"]: "+d+`
`+m+`
`+U+" "+J})}function qs(l,d,m,_){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+pI(l,m)+(_?" "+_:"")})}function dI(l,d){l.info(function(){return"TIMEOUT: "+d})}ro.prototype.info=function(){};function pI(l,d){if(!l.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var _=m[l];if(!(2>_.length)){var O=_[1];if(Array.isArray(O)&&!(1>O.length)){var U=O[0];if(U!="noop"&&U!="stop"&&U!="close")for(var J=1;J<O.length;J++)O[J]=""}}}}return js(m)}catch{return d}}var Oa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},op={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zl;function Ma(){}w(Ma,$s),Ma.prototype.g=function(){return new XMLHttpRequest},Ma.prototype.i=function(){return{}},Zl=new Ma;function dr(l,d,m,_){this.j=l,this.i=d,this.l=m,this.R=_||1,this.U=new _t(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ap}function ap(){this.i=null,this.g="",this.h=!1}var cp={},eu={};function tu(l,d,m){l.L=1,l.v=Ua(Un(d)),l.m=m,l.P=!0,lp(l,null)}function lp(l,d){l.F=Date.now(),La(l),l.A=Un(l.v);var m=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Ip(m.i,"t",_),l.C=0,m=l.j.J,l.h=new ap,l.g=jp(l.j,m?d:null,!l.m),0<l.O&&(l.M=new ht(p(l.Y,l,l.g),l.O)),d=l.U,m=l.g,_=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Rt[0]=O.toString()),O=Rt);for(var U=0;U<O.length;U++){var J=H(m,O[U],_||d.handleEvent,!1,d.h||d);if(!J)break;d.g[J.key]=J}d=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),to(),hI(l.i,l.u,l.A,l.l,l.R,l.m)}dr.prototype.ca=function(l){l=l.target;const d=this.M;d&&jn(l)==3?d.j():this.Y(l)},dr.prototype.Y=function(l){try{if(l==this.g)e:{const Pt=jn(this.g);var d=this.g.Ba();const Ks=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||xp(this.g)))){this.J||Pt!=4||d==7||(d==8||0>=Ks?to(3):to(2)),nu(this);var m=this.g.Z();this.X=m;t:if(up(this)){var _=xp(this.g);l="";var O=_.length,U=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jr(this),so(this);var J="";break t}this.h.i=new a.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,l+=this.h.i.decode(_[d],{stream:!(U&&d==O-1)});_.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=m==200,fI(this.i,this.u,this.A,this.l,this.R,Pt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,yt=this.g;if((Me=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Me)){var Re=Me;break t}}Re=null}if(m=Re)qs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ru(this,m);else{this.o=!1,this.s=3,kt(12),Jr(this),so(this);break e}}if(this.P){m=!0;let yn;for(;!this.J&&this.C<J.length;)if(yn=mI(this,J),yn==eu){Pt==4&&(this.s=4,kt(14),m=!1),qs(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==cp){this.s=4,kt(15),qs(this.i,this.l,J,"[Invalid Chunk]"),m=!1;break}else qs(this.i,this.l,yn,null),ru(this,yn);if(up(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||J.length!=0||this.h.h||(this.s=1,kt(16),m=!1),this.o=this.o&&m,!m)qs(this.i,this.l,J,"[Invalid Chunked Response]"),Jr(this),so(this);else if(0<J.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),lu(St),St.M=!0,kt(11))}}else qs(this.i,this.l,J,null),ru(this,J);Pt==4&&Jr(this),this.o&&!this.J&&(Pt==4?Lp(this.j,this):(this.o=!1,La(this)))}else DI(this.g),m==400&&0<J.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Jr(this),so(this)}}}catch{}finally{}};function up(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function mI(l,d){var m=l.C,_=d.indexOf(`
`,m);return _==-1?eu:(m=Number(d.substring(m,_)),isNaN(m)?cp:(_+=1,_+m>d.length?eu:(d=d.slice(_,_+m),l.C=_+m,d)))}dr.prototype.cancel=function(){this.J=!0,Jr(this)};function La(l){l.S=Date.now()+l.I,hp(l,l.I)}function hp(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=no(p(l.ba,l),d)}function nu(l){l.B&&(a.clearTimeout(l.B),l.B=null)}dr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(dI(this.i,this.A),this.L!=2&&(to(),kt(17)),Jr(this),this.s=2,so(this)):hp(this,this.S-l)};function so(l){l.j.G==0||l.J||Lp(l.j,l)}function Jr(l){nu(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,fr(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function ru(l,d){try{var m=l.j;if(m.G!=0&&(m.g==l||su(m.h,l))){if(!l.K&&su(m.h,l)&&m.G==3){try{var _=m.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var O=_;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Ka(m),Ga(m);else break e;cu(m),kt(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=no(p(m.Za,m),6e3));if(1>=pp(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Xr(m,11)}else if((l.K||m.g==l)&&Ka(m),!D(d))for(O=m.Da.g.parse(d),d=0;d<O.length;d++){let Re=O[d];if(m.T=Re[0],Re=Re[1],m.G==2)if(Re[0]=="c"){m.K=Re[1],m.ia=Re[2];const St=Re[3];St!=null&&(m.la=St,m.j.info("VER="+m.la));const Pt=Re[4];Pt!=null&&(m.Aa=Pt,m.j.info("SVER="+m.Aa));const Ks=Re[5];Ks!=null&&typeof Ks=="number"&&0<Ks&&(_=1.5*Ks,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const yn=l.g;if(yn){const Wa=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wa){var U=_.h;U.g||Wa.indexOf("spdy")==-1&&Wa.indexOf("quic")==-1&&Wa.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(iu(U,U.h),U.h=null))}if(_.D){const uu=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;uu&&(_.ya=uu,$e(_.I,_.D,uu))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var J=l;if(_.qa=Up(_,_.J?_.ia:null,_.W),J.K){mp(_.h,J);var Me=J,yt=_.L;yt&&(Me.I=yt),Me.B&&(nu(Me),La(Me)),_.g=J}else Op(_);0<m.i.length&&Ha(m)}else Re[0]!="stop"&&Re[0]!="close"||Xr(m,7);else m.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Xr(m,7):au(m):Re[0]!="noop"&&m.l&&m.l.ta(Re),m.v=0)}}to(4)}catch{}}var gI=class{constructor(l,d){this.g=l,this.map=d}};function fp(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function pp(l){return l.h?1:l.g?l.g.size:0}function su(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function iu(l,d){l.g?l.g.add(d):l.h=d}function mp(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}fp.prototype.cancel=function(){if(this.i=gp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function gp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.D);return d}return R(l.i)}function _I(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var d=[],m=l.length,_=0;_<m;_++)d.push(l[_]);return d}d=[],m=0;for(_ in l)d[m++]=l[_];return d}function yI(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var d=[];l=l.length;for(var m=0;m<l;m++)d.push(m);return d}d=[],m=0;for(const _ in l)d[m++]=_;return d}}}function _p(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var m=yI(l),_=_I(l),O=_.length,U=0;U<O;U++)d.call(void 0,_[U],m&&m[U],l)}var yp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vI(l,d){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var _=l[m].indexOf("="),O=null;if(0<=_){var U=l[m].substring(0,_);O=l[m].substring(_+1)}else U=l[m];d(U,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Yr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Yr){this.h=l.h,Fa(this,l.j),this.o=l.o,this.g=l.g,Ba(this,l.s),this.l=l.l;var d=l.i,m=new ao;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),vp(this,m),this.m=l.m}else l&&(d=String(l).match(yp))?(this.h=!1,Fa(this,d[1]||"",!0),this.o=io(d[2]||""),this.g=io(d[3]||"",!0),Ba(this,d[4]),this.l=io(d[5]||"",!0),vp(this,d[6]||"",!0),this.m=io(d[7]||"")):(this.h=!1,this.i=new ao(null,this.h))}Yr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(oo(d,Ep,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(oo(d,Ep,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(oo(m,m.charAt(0)=="/"?TI:wI,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",oo(m,bI)),l.join("")};function Un(l){return new Yr(l)}function Fa(l,d,m){l.j=m?io(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Ba(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function vp(l,d,m){d instanceof ao?(l.i=d,AI(l.i,l.h)):(m||(d=oo(d,II)),l.i=new ao(d,l.h))}function $e(l,d,m){l.i.set(d,m)}function Ua(l){return $e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function io(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function oo(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,EI),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function EI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ep=/[#\/\?@]/g,wI=/[#\?:]/g,TI=/[#\?]/g,II=/[#\?@]/g,bI=/#/g;function ao(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function pr(l){l.g||(l.g=new Map,l.h=0,l.i&&vI(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=ao.prototype,t.add=function(l,d){pr(this),this.i=null,l=Gs(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function wp(l,d){pr(l),d=Gs(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Tp(l,d){return pr(l),d=Gs(l,d),l.g.has(d)}t.forEach=function(l,d){pr(this),this.g.forEach(function(m,_){m.forEach(function(O){l.call(d,O,_,this)},this)},this)},t.na=function(){pr(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let _=0;_<d.length;_++){const O=l[_];for(let U=0;U<O.length;U++)m.push(d[_])}return m},t.V=function(l){pr(this);let d=[];if(typeof l=="string")Tp(this,l)&&(d=d.concat(this.g.get(Gs(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)d=d.concat(l[m])}return d},t.set=function(l,d){return pr(this),this.i=null,l=Gs(this,l),Tp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Ip(l,d,m){wp(l,d),0<m.length&&(l.i=null,l.g.set(Gs(l,d),R(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var _=d[m];const U=encodeURIComponent(String(_)),J=this.V(_);for(_=0;_<J.length;_++){var O=U;J[_]!==""&&(O+="="+encodeURIComponent(String(J[_]))),l.push(O)}}return this.i=l.join("&")};function Gs(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function AI(l,d){d&&!l.j&&(pr(l),l.i=null,l.g.forEach(function(m,_){var O=_.toLowerCase();_!=O&&(wp(this,_),Ip(this,O,m))},l)),l.j=d}function RI(l,d){const m=new ro;if(a.Image){const _=new Image;_.onload=g(mr,m,"TestLoadImage: loaded",!0,d,_),_.onerror=g(mr,m,"TestLoadImage: error",!1,d,_),_.onabort=g(mr,m,"TestLoadImage: abort",!1,d,_),_.ontimeout=g(mr,m,"TestLoadImage: timeout",!1,d,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else d(!1)}function SI(l,d){const m=new ro,_=new AbortController,O=setTimeout(()=>{_.abort(),mr(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:_.signal}).then(U=>{clearTimeout(O),U.ok?mr(m,"TestPingServer: ok",!0,d):mr(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),mr(m,"TestPingServer: error",!1,d)})}function mr(l,d,m,_,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),_(m)}catch{}}function PI(){this.g=new an}function CI(l,d,m){const _=m||"";try{_p(l,function(O,U){let J=O;u(O)&&(J=js(O)),d.push(_+U+"="+encodeURIComponent(J))})}catch(O){throw d.push(_+"type="+encodeURIComponent("_badmap")),O}}function ja(l){this.l=l.Ub||null,this.j=l.eb||!1}w(ja,$s),ja.prototype.g=function(){return new $a(this.l,this.j)},ja.prototype.i=function(l){return function(){return l}}({});function $a(l,d){oe.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w($a,oe),t=$a.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,lo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,co(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,lo(this)),this.g&&(this.readyState=3,lo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function bp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?co(this):lo(this),this.readyState==3&&bp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,co(this))},t.Qa=function(l){this.g&&(this.response=l,co(this))},t.ga=function(){this.g&&co(this)};function co(l){l.readyState=4,l.l=null,l.j=null,l.v=null,lo(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function lo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty($a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ap(l){let d="";return F(l,function(m,_){d+=_,d+=":",d+=m,d+=`\r
`}),d}function ou(l,d,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Ap(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):$e(l,d,m))}function Xe(l){oe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Xe,oe);var xI=/^https?$/i,VI=["POST","PUT"];t=Xe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zl.g(),this.v=this.o?Zi(this.o):Zi(Zl),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(U){Rp(this,U);return}if(l=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var O in _)m.set(O,_[O]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const U of _.keys())m.set(U,_.get(U));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),O=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(VI,d,void 0))||_||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,J]of m)this.g.setRequestHeader(U,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cp(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){Rp(this,U)}};function Rp(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Sp(l),qa(l)}function Sp(l){l.A||(l.A=!0,de(l,"complete"),de(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,de(this,"complete"),de(this,"abort"),qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qa(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pp(this):this.bb())},t.bb=function(){Pp(this)};function Pp(l){if(l.h&&typeof o<"u"&&(!l.v[1]||jn(l)!=4||l.Z()!=2)){if(l.u&&jn(l)==4)Ae(l.Ea,0,l);else if(de(l,"readystatechange"),jn(l)==4){l.h=!1;try{const J=l.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var _;if(_=J===0){var O=String(l.D).match(yp)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),_=!xI.test(O?O.toLowerCase():"")}m=_}if(m)de(l,"complete"),de(l,"success");else{l.m=6;try{var U=2<jn(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",Sp(l)}}finally{qa(l)}}}}function qa(l,d){if(l.g){Cp(l);const m=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||de(l,"ready");try{m.onreadystatechange=_}catch{}}}function Cp(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function jn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Nt(d)}};function xp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function DI(l){const d={};l=(l.g&&2<=jn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(D(l[_]))continue;var m=P(l[_]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=d[O]||[];d[O]=U,U.push(m)}I(d,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function uo(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function Vp(l){this.Aa=0,this.i=[],this.j=new ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=uo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=uo("baseRetryDelayMs",5e3,l),this.cb=uo("retryDelaySeedMs",1e4,l),this.Wa=uo("forwardChannelMaxRetries",2,l),this.wa=uo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new fp(l&&l.concurrentRequestLimit),this.Da=new PI,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vp.prototype,t.la=8,t.G=1,t.connect=function(l,d,m,_){kt(0),this.W=l,this.H=d||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=Up(this,null,this.W),Ha(this)};function au(l){if(Dp(l),l.G==3){var d=l.U++,m=Un(l.I);if($e(m,"SID",l.K),$e(m,"RID",d),$e(m,"TYPE","terminate"),ho(l,m),d=new dr(l,l.j,d),d.L=2,d.v=Ua(Un(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=jp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),La(d)}Bp(l)}function Ga(l){l.g&&(lu(l),l.g.cancel(),l.g=null)}function Dp(l){Ga(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ka(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ha(l){if(!dp(l.h)&&!l.s){l.s=!0;var d=l.Ga;pe||_n(),re||(pe(),re=!0),Fe.add(d,l),l.B=0}}function NI(l,d){return pp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=no(p(l.Ga,l,d),Fp(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new dr(this,this.j,l);let U=this.o;if(this.S&&(U?(U=y(U),b(U,this.S)):U=this.S),this.m!==null||this.O||(O.H=U,U=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=kp(this,O,d),m=Un(this.I),$e(m,"RID",l),$e(m,"CVER",22),this.D&&$e(m,"X-HTTP-Session-Id",this.D),ho(this,m),U&&(this.O?d="headers="+encodeURIComponent(String(Ap(U)))+"&"+d:this.m&&ou(m,this.m,U)),iu(this.h,O),this.Ua&&$e(m,"TYPE","init"),this.P?($e(m,"$req",d),$e(m,"SID","null"),O.T=!0,tu(O,m,null)):tu(O,m,d),this.G=2}}else this.G==3&&(l?Np(this,l):this.i.length==0||dp(this.h)||Np(this))};function Np(l,d){var m;d?m=d.l:m=l.U++;const _=Un(l.I);$e(_,"SID",l.K),$e(_,"RID",m),$e(_,"AID",l.T),ho(l,_),l.m&&l.o&&ou(_,l.m,l.o),m=new dr(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),d&&(l.i=d.D.concat(l.i)),d=kp(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),iu(l.h,m),tu(m,_,d)}function ho(l,d){l.H&&F(l.H,function(m,_){$e(d,_,m)}),l.l&&_p({},function(m,_){$e(d,_,m)})}function kp(l,d,m){m=Math.min(l.i.length,m);var _=l.l?p(l.l.Na,l.l,l):null;e:{var O=l.i;let U=-1;for(;;){const J=["count="+m];U==-1?0<m?(U=O[0].g,J.push("ofs="+U)):U=0:J.push("ofs="+U);let Me=!0;for(let yt=0;yt<m;yt++){let Re=O[yt].g;const St=O[yt].map;if(Re-=U,0>Re)U=Math.max(0,O[yt].g-100),Me=!1;else try{CI(St,J,"req"+Re+"_")}catch{_&&_(St)}}if(Me){_=J.join("&");break e}}}return l=l.i.splice(0,m),d.D=l,_}function Op(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;pe||_n(),re||(pe(),re=!0),Fe.add(d,l),l.v=0}}function cu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=no(p(l.Fa,l),Fp(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Mp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=no(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Ga(this),Mp(this))};function lu(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Mp(l){l.g=new dr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Un(l.qa);$e(d,"RID","rpc"),$e(d,"SID",l.K),$e(d,"AID",l.T),$e(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&$e(d,"TO",l.ja),$e(d,"TYPE","xmlhttp"),ho(l,d),l.m&&l.o&&ou(d,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Ua(Un(d)),m.m=null,m.P=!0,lp(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Ga(this),cu(this),kt(19))};function Ka(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Lp(l,d){var m=null;if(l.g==d){Ka(l),lu(l),l.g=null;var _=2}else if(su(l.h,d))m=d.D,mp(l.h,d),_=1;else return;if(l.G!=0){if(d.o)if(_==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var O=l.B;_=ka(),de(_,new ip(_,m)),Ha(l)}else Op(l);else if(O=d.s,O==3||O==0&&0<d.X||!(_==1&&NI(l,d)||_==2&&cu(l)))switch(m&&0<m.length&&(d=l.h,d.i=d.i.concat(m)),O){case 1:Xr(l,5);break;case 4:Xr(l,10);break;case 3:Xr(l,6);break;default:Xr(l,2)}}}function Fp(l,d){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*d}function Xr(l,d){if(l.j.info("Error code "+d),d==2){var m=p(l.fb,l),_=l.Xa;const O=!_;_=new Yr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fa(_,"https"),Ua(_),O?RI(_.toString(),m):SI(_.toString(),m)}else kt(2);l.G=0,l.l&&l.l.sa(d),Bp(l),Dp(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Bp(l){if(l.G=0,l.ka=[],l.l){const d=gp(l.h);(d.length!=0||l.i.length!=0)&&(V(l.ka,d),V(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function Up(l,d,m){var _=m instanceof Yr?Un(m):new Yr(m);if(_.g!="")d&&(_.g=d+"."+_.g),Ba(_,_.s);else{var O=a.location;_=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var U=new Yr(null);_&&Fa(U,_),d&&(U.g=d),O&&Ba(U,O),m&&(U.l=m),_=U}return m=l.D,d=l.ya,m&&d&&$e(_,m,d),$e(_,"VER",l.la),ho(l,_),_}function jp(l,d,m){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Xe(new ja({eb:m})):new Xe(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $p(){}t=$p.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function za(){}za.prototype.g=function(l,d){return new tn(l,d)};function tn(l,d){oe.call(this),this.g=new Vp(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!D(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!D(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Hs(this)}w(tn,oe),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){au(this.g)},tn.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=js(l),l=m);d.i.push(new gI(d.Ya++,l)),d.G==3&&Ha(d)},tn.prototype.N=function(){this.g.l=null,delete this.j,au(this.g),delete this.g,tn.aa.N.call(this)};function qp(l){Yl.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}w(qp,Yl);function Gp(){Xl.call(this),this.status=1}w(Gp,Xl);function Hs(l){this.g=l}w(Hs,$p),Hs.prototype.ua=function(){de(this.g,"a")},Hs.prototype.ta=function(l){de(this.g,new qp(l))},Hs.prototype.sa=function(l){de(this.g,new Gp)},Hs.prototype.ra=function(){de(this.g,"b")},za.prototype.createWebChannel=za.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,zE=function(){return new za},KE=function(){return ka()},HE=Qr,Mh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oa.NO_ERROR=0,Oa.TIMEOUT=8,Oa.HTTP_ERROR=6,_c=Oa,op.COMPLETE="complete",GE=op,tp.EventType=eo,eo.OPEN="a",eo.CLOSE="b",eo.ERROR="c",eo.MESSAGE="d",oe.prototype.listen=oe.prototype.K,Ao=tp,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,qE=Xe}).apply(typeof ic<"u"?ic:typeof self<"u"?self:typeof window<"u"?window:{});const bg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new zf("@firebase/firestore");function ri(){return Mr.logLevel}function qV(t){Mr.setLogLevel(t)}function G(t,...e){if(Mr.logLevel<=Ie.DEBUG){const n=e.map(Xf);Mr.debug(`Firestore (${Hi}): ${t}`,...n)}}function nt(t,...e){if(Mr.logLevel<=Ie.ERROR){const n=e.map(Xf);Mr.error(`Firestore (${Hi}): ${t}`,...n)}}function On(t,...e){if(Mr.logLevel<=Ie.WARN){const n=e.map(Xf);Mr.warn(`Firestore (${Hi}): ${t}`,...n)}}function Xf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${Hi}) INTERNAL ASSERTION FAILED: `+t;throw nt(e),new Error(e)}function ae(t,e){t||ne()}function GV(t,e){t||ne()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class KV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zV{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new At;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new At,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new At)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string"),new WE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new dt(e)}}class WV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class QV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new WV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ae(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string"),this.R=n.token,new JV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=XV(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function Pi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function JE(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new ze(0,0))}static max(){return new ue(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ea.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ea?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends ea{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new we(n)}static emptyPath(){return new we([])}}const ZV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends ea{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return ZV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(we.fromString(e))}static fromName(e){return new Y(we.fromString(e).popFirst(5))}static empty(){return new Y(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new we(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Lh(t){return t.fields.find(e=>e.kind===2)}function os(t){return t.fields.filter(e=>e.kind!==2)}Xc.UNKNOWN_ID=-1;class yc{constructor(e,n){this.fieldPath=e,this.kind=n}}class ta{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ta(0,sn.min())}}function YE(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new sn(s,Y.empty(),e)}function XE(t){return new sn(t.readTime,t.key,-1)}class sn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new sn(ue.min(),Y.empty(),-1)}static max(){return new sn(ue.max(),Y.empty(),-1)}}function Zf(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ew{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hr(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==ZE)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new At,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Mo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=ed(r.target.error);this.V.reject(new Mo(e,s))}}static open(e,n,r,s){try{return new Pl(n,e.transaction(s,r))}catch(i){throw new Mo(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(G("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new tD(n)}}class Nn{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Nn.S(Jc())===12.2&&nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return G("SimpleDb","Removing database:",e),as(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!PE())return!1;if(Nn.v())return!0;const e=Jc(),n=Nn.S(e),r=0<n&&n<10,s=tw(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(G("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Mo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new q(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Mo(e,o))},s.onupgradeneeded=i=>{G("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{G("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Pl.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(G("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function tw(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class eD{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return as(this.B.delete())}}class Mo extends q{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Kr(t){return t.name==="IndexedDbTransactionError"}class tD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(G("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),as(r)}add(e){return G("SimpleDb","ADD",this.store.name,e,e),as(this.store.add(e))}get(e){return as(this.store.get(e)).next(n=>(n===void 0&&(n=null),G("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return G("SimpleDb","DELETE",this.store.name,e),as(this.store.delete(e))}count(){return G("SimpleDb","COUNT",this.store.name),as(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new M((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){G("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=i=>{const o=ed(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new eD(a),u=n(a.primaryKey,a.value,c);if(u instanceof M){const h=u.catch(f=>(c.done(),M.reject(f)));r.push(h)}c.isDone?s():c.K===null?a.continue():a.continue(c.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function as(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=ed(r.target.error);n(s)}})}let Ag=!1;function ed(t){const e=Nn.S(Jc());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ag||(Ag=!0,setTimeout(()=>{throw r},0)),r}}return t}class nD{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){G("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{G("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Kr(n)?G("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Hr(n)}await this.X(6e4)})}}class rD{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return M.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return G("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>(G("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=XE(i);Zf(o,r)>0&&(r=o)}),new sn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jt.oe=-1;function wa(t){return t==null}function na(t){return t===0&&1/t==-1/0}function nw(t){return typeof t=="number"&&Number.isInteger(t)&&!na(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Rg(e)),e=sD(t.get(n),e);return Rg(e)}function sD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Rg(t){return t+""}function xn(t){const e=t.length;if(ae(e>=2),e===2)return ae(t.charAt(0)===""&&t.charAt(1)===""),we.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&ne(),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ne()}i=o+2}return new we(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t,e){return[t,jt(e)]}function rw(t,e,n){return[t,jt(e),n]}const iD={},oD=["prefixPath","collectionGroup","readTime","documentId"],aD=["prefixPath","collectionGroup","documentId"],cD=["collectionGroup","readTime","prefixPath","documentId"],lD=["canonicalId","targetId"],uD=["targetId","path"],hD=["path","targetId"],fD=["collectionId","parent"],dD=["indexId","uid"],pD=["uid","sequenceNumber"],mD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gD=["indexId","uid","orderedDocumentKey"],_D=["userId","collectionPath","documentId"],yD=["userId","collectionPath","largestBatchId"],vD=["userId","collectionGroup","largestBatchId"],sw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ED=[...sw,"documentOverlays"],iw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ow=iw,td=[...ow,"indexConfiguration","indexState","indexEntries"],wD=td,TD=[...td,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends ew{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function ut(t,e){const n=X(t);return Nn.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oc(this.root,e,this.comparator,!0)}}class oc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Et.RED,this.left=s??Et.EMPTY,this.right=i??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cg(this.data.getIterator())}getIteratorFrom(e){return new Cg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Oe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Oe(this.comparator);return n.data=e,n}}class Cg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ys(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new Oe(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new cw("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const bD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(t){if(ae(!!t),typeof t=="string"){let e=0;const n=bD.exec(t);if(ae(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function nd(t){const e=t.mapValue.fields.__previous_value__;return Cl(e)?nd(e):e}function ra(t){const e=sr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n,r,s,i,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class Fr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ec={nullValue:"NULL_VALUE"};function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cl(t)?4:lw(t)?9007199254740991:xl(t)?10:11:ne()}function Mn(t,e){if(t===e)return!0;const n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ra(t).isEqual(ra(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=sr(s.timestampValue),a=sr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Lr(s.bytesValue).isEqual(Lr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ge(s.geoPointValue.latitude)===Ge(i.geoPointValue.latitude)&&Ge(s.geoPointValue.longitude)===Ge(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ge(s.integerValue)===Ge(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ge(s.doubleValue),a=Ge(i.doubleValue);return o===a?na(o)===na(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Pi(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Pg(o)!==Pg(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Mn(o[c],a[c])))return!1;return!0}(t,e);default:return ne()}}function sa(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function Br(t,e){if(t===e)return 0;const n=Is(t),r=Is(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ge(i.integerValue||i.doubleValue),c=Ge(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return xg(t.timestampValue,e.timestampValue);case 4:return xg(ra(t),ra(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Lr(i),c=Lr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=_e(a[u],c[u]);if(h!==0)return h}return _e(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=_e(Ge(i.latitude),Ge(o.latitude));return a!==0?a:_e(Ge(i.longitude),Ge(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Vg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,h;const f=i.fields||{},p=o.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=p.value)===null||c===void 0?void 0:c.arrayValue,R=_e(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:Vg(g,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Pr.mapValue&&o===Pr.mapValue)return 0;if(i===Pr.mapValue)return 1;if(o===Pr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=_e(c[f],h[f]);if(p!==0)return p;const g=Br(a[c[f]],u[h[f]]);if(g!==0)return g}return _e(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ne()}}function xg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=sr(t),r=sr(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function Vg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Br(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function Ci(t){return Bh(t)}function Bh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=sr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Bh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Bh(n.fields[o])}`;return s+"}"}(t.mapValue):ne()}function bs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Uh(t){return!!t&&"integerValue"in t}function ia(t){return!!t&&"arrayValue"in t}function Dg(t){return!!t&&"nullValue"in t}function Ng(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wc(t){return!!t&&"mapValue"in t}function xl(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Lo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ms(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lw(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const uw={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function RD(t){return"nullValue"in t?Ec:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?bs(Fr.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?xl(t)?uw:{mapValue:{}}:ne()}function SD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?bs(Fr.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?uw:"mapValue"in t?xl(t)?{mapValue:{}}:Pr:ne()}function kg(t,e){const n=Br(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Og(t,e){const n=Br(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lo(n)}setAll(e){let n=He.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Lo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ms(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new It(Lo(this.value))}}function hw(t){const e=[];return Ms(t.fields,(n,r)=>{const s=new He([n]);if(wc(r)){const i=hw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qe(e,0,ue.min(),ue.min(),ue.min(),It.empty(),0)}static newFoundDocument(e,n,r,s){return new qe(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new qe(e,2,n,ue.min(),ue.min(),It.empty(),0)}static newUnknownDocument(e,n){return new qe(e,3,n,ue.min(),ue.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.position=e,this.inclusive=n}}function Mg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Br(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n="asc"){this.field=e,this.dir=n}}function PD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{}class Te extends fw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CD(e,n,r):n==="array-contains"?new DD(e,r):n==="in"?new yw(e,r):n==="not-in"?new ND(e,r):n==="array-contains-any"?new kD(e,r):new Te(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xD(e,r):new VD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Br(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(Br(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class De extends fw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new De(e,n)}matches(e){return xi(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xi(t){return t.op==="and"}function jh(t){return t.op==="or"}function rd(t){return dw(t)&&xi(t)}function dw(t){for(const e of t.filters)if(e instanceof De)return!1;return!0}function $h(t){if(t instanceof Te)return t.field.canonicalString()+t.op.toString()+Ci(t.value);if(rd(t))return t.filters.map(e=>$h(e)).join(",");{const e=t.filters.map(n=>$h(n)).join(",");return`${t.op}(${e})`}}function pw(t,e){return t instanceof Te?function(r,s){return s instanceof Te&&r.op===s.op&&r.field.isEqual(s.field)&&Mn(r.value,s.value)}(t,e):t instanceof De?function(r,s){return s instanceof De&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&pw(o,s.filters[a]),!0):!1}(t,e):void ne()}function mw(t,e){const n=t.filters.concat(e);return De.create(n,t.op)}function gw(t){return t instanceof Te?function(n){return`${n.field.canonicalString()} ${n.op} ${Ci(n.value)}`}(t):t instanceof De?function(n){return n.op.toString()+" {"+n.getFilters().map(gw).join(" ,")+"}"}(t):"Filter"}class CD extends Te{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class xD extends Te{constructor(e,n){super(e,"in",n),this.keys=_w("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VD extends Te{constructor(e,n){super(e,"not-in",n),this.keys=_w("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _w(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class DD extends Te{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ia(n)&&sa(n.arrayValue,this.value)}}class yw extends Te{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sa(this.value.arrayValue,n)}}class ND extends Te{constructor(e,n){super(e,"not-in",n)}matches(e){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sa(this.value.arrayValue,n)}}class kD extends Te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ia(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function qh(t,e=null,n=[],r=[],s=null,i=null,o=null){return new OD(t,e,n,r,s,i,o)}function As(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$h(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),wa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ci(r)).join(",")),e.ue=n}return e.ue}function Ta(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lg(t.startAt,e.startAt)&&Lg(t.endAt,e.endAt)}function Zc(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function el(t,e){return t.filters.filter(n=>n instanceof Te&&n.field.isEqual(e))}function Fg(t,e,n){let r=Ec,s=!0;for(const i of el(t,e)){let o=Ec,a=!0;switch(i.op){case"<":case"<=":o=RD(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Ec}kg({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];kg({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Bg(t,e,n){let r=Pr,s=!0;for(const i of el(t,e)){let o=Pr,a=!0;switch(i.op){case">=":case">":o=SD(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Pr}Og({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Og({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vw(t,e,n,r,s,i,o,a){return new cr(t,e,n,r,s,i,o,a)}function Ki(t){return new cr(t)}function Ug(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sd(t){return t.collectionGroup!==null}function yi(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Oe(He.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new oa(i,r))}),n.has(He.keyField().canonicalString())||e.ce.push(new oa(He.keyField(),r))}return e.ce}function $t(t){const e=X(t);return e.le||(e.le=MD(e,yi(t))),e.le}function MD(t,e){if(t.limitType==="F")return qh(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new oa(s.field,i)});const n=t.endAt?new Ur(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ur(t.startAt.position,t.startAt.inclusive):null;return qh(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gh(t,e){const n=t.filters.concat([e]);return new cr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tl(t,e,n){return new cr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ia(t,e){return Ta($t(t),$t(e))&&t.limitType===e.limitType}function Ew(t){return`${As($t(t))}|lt:${t.limitType}`}function si(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>gw(s)).join(", ")}]`),wa(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ci(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ci(s)).join(",")),`Target(${r})`}($t(t))}; limitType=${t.limitType})`}function ba(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of yi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=Mg(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,yi(r),s)||r.endAt&&!function(o,a,c){const u=Mg(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,yi(r),s))}(t,e)}function ww(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Tw(t){return(e,n)=>{let r=!1;for(const s of yi(t)){const i=LD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function LD(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?Br(c,u):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return aw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new je(Y.comparator);function Xt(){return FD}const Iw=new je(Y.comparator);function Ro(...t){let e=Iw;for(const n of t)e=e.insert(n.key,n);return e}function bw(t){let e=Iw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vn(){return Fo()}function Aw(){return Fo()}function Fo(){return new zr(t=>t.toString(),(t,e)=>t.isEqual(e))}const BD=new je(Y.comparator),UD=new Oe(Y.comparator);function ve(...t){let e=UD;for(const n of t)e=e.add(n);return e}const jD=new Oe(_e);function id(){return jD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:na(e)?"-0":e}}function Rw(t){return{integerValue:""+t}}function Sw(t,e){return nw(e)?Rw(e):od(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this._=void 0}}function $D(t,e,n){return t instanceof Vi?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Cl(i)&&(i=nd(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Rs?Cw(t,e):t instanceof Ss?xw(t,e):function(s,i){const o=Pw(s,i),a=jg(o)+jg(s.Pe);return Uh(o)&&Uh(s.Pe)?Rw(a):od(s.serializer,a)}(t,e)}function qD(t,e,n){return t instanceof Rs?Cw(t,e):t instanceof Ss?xw(t,e):n}function Pw(t,e){return t instanceof Di?function(r){return Uh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Vi extends Vl{}class Rs extends Vl{constructor(e){super(),this.elements=e}}function Cw(t,e){const n=Vw(e);for(const r of t.elements)n.some(s=>Mn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ss extends Vl{constructor(e){super(),this.elements=e}}function xw(t,e){let n=Vw(e);for(const r of t.elements)n=n.filter(s=>!Mn(s,r));return{arrayValue:{values:n}}}class Di extends Vl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function jg(t){return Ge(t.integerValue||t.doubleValue)}function Vw(t){return ia(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.field=e,this.transform=n}}function GD(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Rs&&s instanceof Rs||r instanceof Ss&&s instanceof Ss?Pi(r.elements,s.elements,Mn):r instanceof Di&&s instanceof Di?Mn(r.Pe,s.Pe):r instanceof Vi&&s instanceof Vi}(t.transform,e.transform)}class HD{constructor(e,n){this.version=e,this.transformResults=n}}class Ke{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ke}static exists(e){return new Ke(void 0,e)}static updateTime(e){return new Ke(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dl{}function Dw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wi(t.key,Ke.none()):new zi(t.key,t.data,Ke.none());{const n=t.data,r=It.empty();let s=new Oe(He.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new lr(t.key,r,new Yt(s.toArray()),Ke.none())}}function KD(t,e,n){t instanceof zi?function(s,i,o){const a=s.value.clone(),c=qg(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof lr?function(s,i,o){if(!Tc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=qg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Nw(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Bo(t,e,n,r){return t instanceof zi?function(i,o,a,c){if(!Tc(i.precondition,o))return a;const u=i.value.clone(),h=Gg(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof lr?function(i,o,a,c){if(!Tc(i.precondition,o))return a;const u=Gg(i.fieldTransforms,c,o),h=o.data;return h.setAll(Nw(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Tc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function zD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Pw(r.transform,s||null);i!=null&&(n===null&&(n=It.empty()),n.set(r.field,i))}return n||null}function $g(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Pi(r,s,(i,o)=>GD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zi extends Dl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class lr extends Dl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Nw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qg(t,e,n){const r=new Map;ae(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,qD(o,a,n[s]))}return r}function Gg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,$D(i,o,e))}return r}class Wi extends Dl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ad extends Dl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&KD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Aw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=Dw(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&Pi(this.mutations,e.mutations,(n,r)=>$g(n,r))&&Pi(this.baseMutations,e.baseMutations,(n,r)=>$g(n,r))}}class ld{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ae(e.mutations.length===r.length);let s=function(){return BD}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ld(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,be;function kw(t){switch(t){default:return ne();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function Ow(t){if(t===void 0)return nt("GRPC error has no .code"),B.UNKNOWN;switch(t){case ot.OK:return B.OK;case ot.CANCELLED:return B.CANCELLED;case ot.UNKNOWN:return B.UNKNOWN;case ot.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case ot.INTERNAL:return B.INTERNAL;case ot.UNAVAILABLE:return B.UNAVAILABLE;case ot.UNAUTHENTICATED:return B.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case ot.NOT_FOUND:return B.NOT_FOUND;case ot.ALREADY_EXISTS:return B.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return B.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case ot.ABORTED:return B.ABORTED;case ot.OUT_OF_RANGE:return B.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return B.UNIMPLEMENTED;case ot.DATA_LOSS:return B.DATA_LOSS;default:return ne()}}(be=ot||(ot={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=new Es([4294967295,4294967295],0);function Hg(t){const e=Mw().encode(t),n=new $E;return n.update(e),new Uint8Array(n.digest())}function Kg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Es([n,r],0),new Es([s,i],0)]}class hd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new So(`Invalid padding: ${n}`);if(r<0)throw new So(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new So(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Es.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Es.fromNumber(r)));return s.compare(QD)===1&&(s=new Es([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Hg(e),[r,s]=Kg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hd(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Hg(e),[r,s]=Kg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class So extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ra(ue.min(),s,new je(_e),Xt(),ve())}}class Sa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sa(r,n,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Lw{constructor(e,n){this.targetId=e,this.me=n}}class Fw{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class zg{constructor(){this.fe=0,this.ge=Qg(),this.pe=tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),n=ve(),r=ve();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne()}}),new Sa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Qg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class JD{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xt(),this.qe=Wg(),this.Qe=new je(_e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Zc(i))if(r===0){const o=new Y(i.path);this.Ue(n,o,qe.newNoDocument(o,ue.min()))}else ae(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Lr(r).toUint8Array()}catch(c){if(c instanceof cw)return On("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new hd(o,s,i)}catch(c){return On(c instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Zc(a.target)){const c=new Y(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,qe.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ve();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Ra(e,n,this.Qe,this.ke,r);return this.ke=Xt(),this.qe=Wg(),this.Qe=new je(_e),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new zg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Oe(_e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Wg(){return new je(Y.comparator)}function Qg(){return new je(Y.comparator)}const YD={asc:"ASCENDING",desc:"DESCENDING"},XD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZD={and:"AND",or:"OR"};class eN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hh(t,e){return t.useProto3Json||wa(e)?e:{value:e}}function Ni(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tN(t,e){return Ni(t,e.toTimestamp())}function rt(t){return ae(!!t),ue.fromTimestamp(function(n){const r=sr(n);return new ze(r.seconds,r.nanos)}(t))}function fd(t,e){return Kh(t,e).canonicalString()}function Kh(t,e){const n=function(s){return new we(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Uw(t){const e=we.fromString(t);return ae(Jw(e)),e}function aa(t,e){return fd(t.databaseId,e.path)}function kn(t,e){const n=Uw(e);if(n.get(1)!==t.databaseId.projectId)throw new q(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(qw(n))}function jw(t,e){return fd(t.databaseId,e)}function $w(t){const e=Uw(t);return e.length===4?we.emptyPath():qw(e)}function zh(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qw(t){return ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Jg(t,e,n){return{name:aa(t,e),fields:n.value.mapValue.fields}}function Gw(t,e,n){const r=kn(t,e.name),s=rt(e.updateTime),i=e.createTime?rt(e.createTime):ue.min(),o=new It({mapValue:{fields:e.fields}}),a=qe.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function nN(t,e){return"found"in e?function(r,s){ae(!!s.found),s.found.name,s.found.updateTime;const i=kn(r,s.found.name),o=rt(s.found.updateTime),a=s.found.createTime?rt(s.found.createTime):ue.min(),c=new It({mapValue:{fields:s.found.fields}});return qe.newFoundDocument(i,o,a,c)}(t,e):"missing"in e?function(r,s){ae(!!s.missing),ae(!!s.readTime);const i=kn(r,s.missing),o=rt(s.readTime);return qe.newNoDocument(i,o)}(t,e):ne()}function rN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(ae(h===void 0||typeof h=="string"),tt.fromBase64String(h||"")):(ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array),tt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?B.UNKNOWN:Ow(u.code);return new q(h,u.message||"")}(o);n=new Fw(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=kn(t,r.document.name),i=rt(r.document.updateTime),o=r.document.createTime?rt(r.document.createTime):ue.min(),a=new It({mapValue:{fields:r.document.fields}}),c=qe.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Ic(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=kn(t,r.document),i=r.readTime?rt(r.readTime):ue.min(),o=qe.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ic([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=kn(t,r.document),i=r.removedTargetIds||[];n=new Ic([],i,s,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new WD(s,i),a=r.targetId;n=new Lw(a,o)}}return n}function ca(t,e){let n;if(e instanceof zi)n={update:Jg(t,e.key,e.value)};else if(e instanceof Wi)n={delete:aa(t,e.key)};else if(e instanceof lr)n={update:Jg(t,e.key,e.data),updateMask:lN(e.fieldMask)};else{if(!(e instanceof ad))return ne();n={verify:aa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Vi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ss)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Di)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:tN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne()}(t,e.precondition)),n}function Wh(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Ke.updateTime(rt(i.updateTime)):i.exists!==void 0?Ke.exists(i.exists):Ke.none()}(e.currentDocument):Ke.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let c=null;if("setToServerValue"in a)ae(a.setToServerValue==="REQUEST_TIME"),c=new Vi;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new Rs(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new Ss(h)}else"increment"in a?c=new Di(o,a.increment):ne();const u=He.fromServerFormat(a.fieldPath);return new Aa(u,c)}(t,s)):[];if(e.update){e.update.name;const s=kn(t,e.update.name),i=new It({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new Yt(u.map(h=>He.fromServerFormat(h)))}(e.updateMask);return new lr(s,i,o,n,r)}return new zi(s,i,n,r)}if(e.delete){const s=kn(t,e.delete);return new Wi(s,n)}if(e.verify){const s=kn(t,e.verify);return new ad(s,n)}return ne()}function sN(t,e){return t&&t.length>0?(ae(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?rt(s.updateTime):rt(i);return o.isEqual(ue.min())&&(o=rt(i)),new HD(o,s.transformResults||[])}(n,e))):[]}function Hw(t,e){return{documents:[jw(t,e.path)]}}function Kw(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jw(t,s);const i=function(u){if(u.length!==0)return Qw(De.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:ii(p.field),direction:oN(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Hh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function zw(t){let e=$w(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ae(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=Ww(f);return p instanceof De&&rd(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new oa(oi(w.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,wa(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,g=f.values||[];return new Ur(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,g=f.values||[];return new Ur(g,p)}(n.endAt)),vw(e,s,o,i,a,"F",c,u)}function iN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ww(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=oi(n.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=oi(n.unaryFilter.field);return Te.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=oi(n.unaryFilter.field);return Te.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=oi(n.unaryFilter.field);return Te.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return Te.create(oi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return De.create(n.compositeFilter.filters.map(r=>Ww(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function oN(t){return YD[t]}function aN(t){return XD[t]}function cN(t){return ZD[t]}function ii(t){return{fieldPath:t.canonicalString()}}function oi(t){return He.fromServerFormat(t.fieldPath)}function Qw(t){return t instanceof Te?function(n){if(n.op==="=="){if(Ng(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NAN"}};if(Dg(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ng(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NOT_NAN"}};if(Dg(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ii(n.field),op:aN(n.op),value:n.value}}}(t):t instanceof De?function(n){const r=n.getFilters().map(s=>Qw(s));return r.length===1?r[0]:{compositeFilter:{op:cN(n.op),filters:r}}}(t):ne()}function lN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Jw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Jn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.ct=e}}function uN(t,e){let n;if(e.document)n=Gw(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Y.fromSegments(e.noDocument.path),s=Cs(e.noDocument.readTime);n=qe.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne();{const r=Y.fromSegments(e.unknownDocument.path),s=Cs(e.unknownDocument.version);n=qe.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new ze(s[0],s[1]);return ue.fromTimestamp(i)}(e.readTime)),n}function Yg(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:aa(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Ni(i,o.version.toTimestamp()),createTime:Ni(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ps(e.version)};else{if(!e.isUnknownDocument())return ne();r.unknownDocument={path:n.path.toArray(),version:Ps(e.version)}}return r}function nl(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ps(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cs(t){const e=new ze(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function cs(t,e){const n=(e.baseMutations||[]).map(i=>Wh(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Wh(t.ct,i)),s=ze.fromMillis(e.localWriteTimeMs);return new cd(e.batchId,s,n,r)}function Po(t){const e=Cs(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Cs(t.lastLimboFreeSnapshotVersion):ue.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return ae(i.documents.length===1),$t(Ki($w(i.documents[0])))}(t.query):function(i){return $t(zw(i))}(t.query),new Jn(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,tt.fromBase64String(t.resumeToken))}function Xw(t,e){const n=Ps(e.snapshotVersion),r=Ps(e.lastLimboFreeSnapshotVersion);let s;s=Zc(e.target)?Hw(t.ct,e.target):Kw(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:As(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function dd(t){const e=zw({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tl(e,e.limit,"L"):e}function ju(t,e){return new ud(e.largestBatchId,Wh(t.ct,e.overlayMutation))}function Xg(t,e){const n=e.path.lastSegment();return[t,jt(e.path.popLast()),n]}function Zg(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ps(r.readTime),documentKey:jt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{getBundleMetadata(e,n){return e_(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Cs(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return e_(e).put(function(s){return{bundleId:s.id,createTime:Ps(rt(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return t_(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:dd(i.bundledQuery),readTime:Cs(i.readTime)}}(r)})}saveNamedQuery(e,n){return t_(e).put(function(s){return{name:s.name,readTime:Ps(rt(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function e_(t){return ut(t,"bundles")}function t_(t){return ut(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Nl(e,r)}getOverlay(e,n){return _o(e).get(Xg(this.userId,n)).next(r=>r?ju(this.serializer,r):null)}getOverlays(e,n){const r=Vn();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new ud(n,o);s.push(this.ht(e,a))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(jt(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(_o(e).j("collectionPathOverlayIndex",a))}),M.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Vn(),i=jt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return _o(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=ju(this.serializer,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Vn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return _o(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,h)=>{const f=ju(this.serializer,u);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>i)}ht(e,n){return _o(e).put(function(s,i,o){const[a,c,u]=Xg(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ca(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function _o(t){return ut(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{Pt(e){return ut(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?tt.fromUint8Array(r):tt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ge(e.integerValue));else if("doubleValue"in e){const r=Ge(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),na(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=sr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Lr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?lw(e)?this.dt(n,Number.MAX_SAFE_INTEGER):xl(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ne()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(Ge(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),Y.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ls.vt=new ls;function dN(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function n_(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=dN(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class pN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=n_(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=n_(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class mN{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class gN{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class yo{constructor(){this.jt=new pN,this.Ht=new mN(this.jt),this.Jt=new gN(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new us(this.indexId,this.documentKey,this.arrayValue,r)}}function yr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=r_(t.arrayValue,e.arrayValue),n!==0?n:(n=r_(t.directionalValue,e.directionalValue),n!==0?n:Y.comparator(t.documentKey,e.documentKey)))}function r_(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e){this.Xt=new Oe((n,r)=>He.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ae(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Lh(e);if(n!==void 0&&!this.sn(n))return!1;const r=os(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Oe(He.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new yc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new yc(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new yc(r.field,r.dir==="asc"?0:1)));return new Xc(Xc.UNKNOWN_ID,this.collectionId,n,ta.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t){var e,n;if(ae(t instanceof Te||t instanceof De),t instanceof Te){if(t instanceof yw){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>Te.create(t.field,"==",i)))||[];return De.create(s,"or")}return t}const r=t.filters.map(s=>Zw(s));return De.create(r,t.op)}function _N(t){if(t.getFilters().length===0)return[];const e=Yh(Zw(t));return ae(eT(e)),Qh(e)||Jh(e)?[e]:e.getFilters()}function Qh(t){return t instanceof Te}function Jh(t){return t instanceof De&&rd(t)}function eT(t){return Qh(t)||Jh(t)||function(n){if(n instanceof De&&jh(n)){for(const r of n.getFilters())if(!Qh(r)&&!Jh(r))return!1;return!0}return!1}(t)}function Yh(t){if(ae(t instanceof Te||t instanceof De),t instanceof Te)return t;if(t.filters.length===1)return Yh(t.filters[0]);const e=t.filters.map(r=>Yh(r));let n=De.create(e,t.op);return n=rl(n),eT(n)?n:(ae(n instanceof De),ae(xi(n)),ae(n.filters.length>1),n.filters.reduce((r,s)=>pd(r,s)))}function pd(t,e){let n;return ae(t instanceof Te||t instanceof De),ae(e instanceof Te||e instanceof De),n=t instanceof Te?e instanceof Te?function(s,i){return De.create([s,i],"and")}(t,e):i_(t,e):e instanceof Te?i_(e,t):function(s,i){if(ae(s.filters.length>0&&i.filters.length>0),xi(s)&&xi(i))return mw(s,i.getFilters());const o=jh(s)?s:i,a=jh(s)?i:s,c=o.filters.map(u=>pd(u,a));return De.create(c,"or")}(t,e),rl(n)}function i_(t,e){if(xi(e))return mw(e,t.getFilters());{const n=e.filters.map(r=>pd(t,r));return De.create(n,"or")}}function rl(t){if(ae(t instanceof Te||t instanceof De),t instanceof Te)return t;const e=t.getFilters();if(e.length===1)return rl(e[0]);if(dw(t))return t;const n=e.map(s=>rl(s)),r=[];return n.forEach(s=>{s instanceof Te?r.push(s):s instanceof De&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:De.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.un=new md}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(sn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(sn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class md{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Oe(we.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Oe(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Uint8Array(0);class vN{constructor(e,n){this.databaseId=n,this.cn=new md,this.ln=new zr(r=>As(r),(r,s)=>Ta(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:jt(s)};return o_(e).put(i)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[JE(n),""],!1,!0);return o_(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(xn(o.parent))}return r})}addFieldIndex(e,n){const r=vo(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Zs(e);return i.next(a=>{o.put(Zg(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=vo(e),s=Zs(e),i=Xs(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=vo(e),r=Xs(e),s=Zs(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return M.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new s_(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Xs(e);let s=!0;const i=new Map;return M.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=ve();const a=[];return M.forEach(i,(c,u)=>{G("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(c)} to execute ${As(n)}`);const h=function(E,C){const k=Lh(C);if(k===void 0)return null;for(const F of el(E,k.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null}(u,c),f=function(E,C){const k=new Map;for(const F of os(C))for(const I of el(E,F.fieldPath))switch(I.op){case"==":case"in":k.set(F.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return k.set(F.fieldPath.canonicalString(),I.value),Array.from(k.values())}return null}(u,c),p=function(E,C){const k=[];let F=!0;for(const I of os(C)){const y=I.kind===0?Fg(E,I.fieldPath,E.startAt):Bg(E,I.fieldPath,E.startAt);k.push(y.value),F&&(F=y.inclusive)}return new Ur(k,F)}(u,c),g=function(E,C){const k=[];let F=!0;for(const I of os(C)){const y=I.kind===0?Bg(E,I.fieldPath,E.endAt):Fg(E,I.fieldPath,E.endAt);k.push(y.value),F&&(F=y.inclusive)}return new Ur(k,F)}(u,c),w=this.In(c,u,p),R=this.In(c,u,g),V=this.Tn(c,u,f),N=this.En(c.indexId,h,w,p.inclusive,R,g.inclusive,V);return M.forEach(N,D=>r.G(D,n.limit).next(E=>{E.forEach(C=>{const k=Y.fromSegments(C.documentKey);o.has(k)||(o=o.add(k),a.push(k))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=_N(De.create(e.filters,"and")).map(r=>qh(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),u=c/(n!=null?n.length:1),h=[];for(let f=0;f<c;++f){const p=n?this.dn(n[f/u]):ac,g=this.An(e,p,r[f%u],s),w=this.Rn(e,p,i[f%u],o),R=a.map(V=>this.An(e,p,V,!0));h.push(...this.createRange(g,w,R))}return h}An(e,n,r,s){const i=new us(e,Y.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new us(e,Y.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new s_(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return M.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new Oe(He.comparator),h=!1;for(const f of c.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new yo;for(const s of os(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);ls.vt.It(i,o)}return r.zt()}dn(e){const n=new yo;return ls.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new yo;return ls.vt.It(bs(this.databaseId,n),r.Yt(function(i){const o=os(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new yo);let i=0;for(const o of os(e)){const a=r[i++];for(const c of s)if(this.fn(n,o.fieldPath)&&ia(a))s=this.gn(s,o,a);else{const u=c.Yt(o.kind);ls.vt.It(a,u)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new yo;c.seed(a.zt()),ls.vt.It(o,c.Yt(n.kind)),i.push(c)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=vo(e),s=Zs(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return M.forEach(i,a=>s.get([a.indexId,this.uid]).next(c=>{o.push(function(h,f){const p=f?new ta(f.sequenceNumber,new sn(Cs(f.readTime),new Y(xn(f.documentKey)),f.largestBatchId)):ta.empty(),g=h.fields.map(([w,R])=>new yc(He.fromServerFormat(w),R));return new Xc(h.indexId,h.collectionGroup,g,p)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:_e(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=vo(e),i=Zs(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,c=>i.put(Zg(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),M.forEach(a,c=>this.wn(e,s,c).next(u=>{const h=this.Sn(i,c);return u.isEqual(h)?M.resolve():this.bn(e,i,c,u,h)}))))})}Dn(e,n,r,s){return Xs(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return Xs(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=Xs(e);let i=new Oe(yr);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{i=i.add(new us(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,n){let r=new Oe(yr);const s=this.Vn(n,e);if(s==null)return r;const i=Lh(n);if(i!=null){const o=e.data.field(i.fieldPath);if(ia(o))for(const a of o.arrayValue.values||[])r=r.add(new us(n.indexId,e.key,this.dn(a),s))}else r=r.add(new us(n.indexId,e.key,ac,s));return r}bn(e,n,r,s,i){G("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(c,u,h,f,p){const g=c.getIterator(),w=u.getIterator();let R=Ys(g),V=Ys(w);for(;R||V;){let N=!1,D=!1;if(R&&V){const E=h(R,V);E<0?D=!0:E>0&&(N=!0)}else R!=null?D=!0:N=!0;N?(f(V),V=Ys(w)):D?(p(R),R=Ys(g)):(R=Ys(g),V=Ys(w))}}(s,i,yr,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),M.waitFor(o)}yn(e){let n=1;return Zs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>yr(o,a)).filter((o,a,c)=>!a||yr(o,c[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=yr(o,e),c=yr(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&c<0)s.push(o),s.push(o.Zt());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,ac,[]],c=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,ac,[]];i.push(IDBKeyRange.bound(a,c))}return i}Cn(e,n){return yr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(a_)}getMinOffset(e,n){return M.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||ne())).next(a_)}}function o_(t){return ut(t,"collectionParents")}function Xs(t){return ut(t,"indexEntries")}function vo(t){return ut(t,"indexConfiguration")}function Zs(t){return ut(t,"indexState")}function a_(t){ae(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Zf(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new sn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zt(e,zt.DEFAULT_COLLECTION_PERCENTILE,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:o},(h,f,p)=>(a++,p.delete()));i.push(c.next(()=>{ae(a===1)}));const u=[];for(const h of n.mutations){const f=rw(e,h.key.path,n.batchId);i.push(s.delete(f)),u.push(h.key)}return M.waitFor(i).next(()=>u)}function sl(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zt.DEFAULT_COLLECTION_PERCENTILE=10,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zt.DEFAULT=new zt(41943040,zt.DEFAULT_COLLECTION_PERCENTILE,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zt.DISABLED=new zt(-1,0,0);class kl{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){ae(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new kl(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vr(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=ai(e),o=vr(e);return o.add({}).next(a=>{ae(typeof a=="number");const c=new cd(a,n,r,s),u=function(g,w,R){const V=R.baseMutations.map(D=>ca(g.ct,D)),N=R.mutations.map(D=>ca(g.ct,D));return{userId:w,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:V,mutations:N}}(this.serializer,this.userId,c),h=[];let f=new Oe((p,g)=>_e(p.canonicalString(),g.canonicalString()));for(const p of s){const g=rw(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(u)),h.push(i.put(g,iD))}return f.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),M.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return vr(e).get(n).next(r=>r?(ae(r.userId===this.userId),cs(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return vr(e).J({index:"userMutationsIndex",range:s},(o,a,c)=>{a.userId===this.userId&&(ae(a.batchId>=r),i=cs(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return vr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vr(e).U("userMutationsIndex",n).next(r=>r.map(s=>cs(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=vc(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return ai(e).J({range:s},(o,a,c)=>{const[u,h,f]=o,p=xn(h);if(u===this.userId&&n.path.isEqual(p))return vr(e).get(f).next(g=>{if(!g)throw ne();ae(g.userId===this.userId),i.push(cs(this.serializer,g))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(_e);const s=[];return n.forEach(i=>{const o=vc(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=ai(e).J({range:a},(u,h,f)=>{const[p,g,w]=u,R=xn(g);p===this.userId&&i.path.isEqual(R)?r=r.add(w):f.done()});s.push(c)}),M.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=vc(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Oe(_e);return ai(e).J({range:o},(c,u,h)=>{const[f,p,g]=c,w=xn(p);f===this.userId&&r.isPrefixOf(w)?w.length===s&&(a=a.add(g)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(vr(e).get(i).next(o=>{if(o===null)throw ne();ae(o.userId===this.userId),r.push(cs(this.serializer,o))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return tT(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return ai(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){const c=xn(i[1]);s.push(c)}else a.done()}).next(()=>{ae(s.length===0)})})}containsKey(e,n){return nT(e,this.userId,n)}Nn(e){return rT(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nT(t,e,n){const r=vc(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return ai(t).J({range:i,H:!0},(a,c,u)=>{const[h,f,p]=a;h===e&&f===s&&(o=!0),u.done()}).next(()=>o)}function vr(t){return ut(t,"mutations")}function ai(t){return ut(t,"documentMutations")}function rT(t){return ut(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xs(0)}static kn(){return new xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new xs(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ue.fromTimestamp(new ze(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ei(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ae(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return ei(e).J((o,a)=>{const c=Po(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>M.waitFor(i)).next(()=>s)}forEachTarget(e,n){return ei(e).J((r,s)=>{const i=Po(s);n(i)})}qn(e){return l_(e).get("targetGlobalKey").next(n=>(ae(n!==null),n))}Qn(e,n){return l_(e).put("targetGlobalKey",n)}Kn(e,n){return ei(e).put(Xw(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=As(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return ei(e).J({range:s,index:"queryTargetsIndex"},(o,a,c)=>{const u=Po(a);Ta(n,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Ar(e);return n.forEach(o=>{const a=jt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=Ar(e);return M.forEach(n,i=>{const o=jt(i.path);return M.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Ar(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Ar(e);let i=ve();return s.J({range:r,H:!0},(o,a,c)=>{const u=xn(o[1]),h=new Y(u);i=i.add(h)}).next(()=>i)}containsKey(e,n){const r=jt(n.path),s=IDBKeyRange.bound([r],[JE(r)],!1,!0);let i=0;return Ar(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}ot(e,n){return ei(e).get(n).next(r=>r?Po(r):null)}}function ei(t){return ut(t,"targets")}function l_(t){return ut(t,"targetGlobal")}function Ar(t){return ut(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_([t,e],[n,r]){const s=_e(t,n);return s===0?_e(e,r):s}class wN{constructor(e){this.Un=e,this.buffer=new Oe(u_),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();u_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){G("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Kr(n)?G("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Hr(n)}await this.Hn(3e5)})}}class IN{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Jt.oe);const r=new wN(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(c_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c_):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),ri()<=Ie.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function bN(t,e){return new IN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n){this.db=e,this.garbageCollector=bN(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return cc(e,r)}removeReference(e,n,r){return cc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return cc(e,n)}nr(e,n){return function(s,i){let o=!1;return rT(s).Y(a=>nT(s,a,i).next(c=>(c&&(o=!0),M.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,a)=>{if(a<=n){const c=this.nr(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),Ar(e).delete(function(f){return[0,jt(f.path)]}(o))))});s.push(c)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return cc(e,n)}tr(e,n){const r=Ar(e);let s,i=Jt.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==Jt.oe&&n(new Y(xn(s)),i),i=u,s=c):i=Jt.oe}).next(()=>{i!==Jt.oe&&n(new Y(xn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cc(t,e){return Ar(t).put(function(r,s){return{targetId:0,path:jt(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.changes=new zr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return rs(e).put(r)}removeEntry(e,n,r){return rs(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],nl(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=qe.newInvalidDocument(n);return rs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Eo(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:qe.newInvalidDocument(n)};return rs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Eo(n))},(s,i)=>{r={document:this.ir(n,i),size:sl(i)}}).next(()=>r)}getEntries(e,n){let r=Xt();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=Xt(),s=new je(Y.comparator);return this._r(e,n,(i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,sl(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return M.resolve();let s=new Oe(d_);n.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(Eo(s.first()),Eo(s.last())),o=s.getIterator();let a=o.getNext();return rs(e).J({index:"documentKeyIndex",range:i},(c,u,h)=>{const f=Y.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&d_(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.$(Eo(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),nl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rs(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let h=Xt();for(const f of u){const p=this.ir(Y.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(ba(n,p)||s.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,n,r,s){let i=Xt();const o=f_(n,r),a=f_(n,sn.max());return rs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,h)=>{const f=this.ir(Y.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===s&&h.done()}).next(()=>i)}newChangeBuffer(e){return new SN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return h_(e).get("remoteDocumentGlobalKey").next(n=>(ae(!!n),n))}rr(e,n){return h_(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=uN(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return qe.newInvalidDocument(e)}}function iT(t){return new RN(t)}class SN extends sT{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new zr(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Oe((i,o)=>_e(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=Yg(this.cr.serializer,o);s=s.add(i.path.popLast());const u=sl(c);r+=u-a.size,n.push(this.cr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=Yg(this.cr.serializer,o.convertToNoDocument(ue.min()));n.push(this.cr.addEntry(e,i,c))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function h_(t){return ut(t,"remoteDocumentGlobal")}function rs(t){return ut(t,"remoteDocumentsV14")}function Eo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function f_(t,e){const n=e.documentKey.path.toArray();return[t,nl(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function d_(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=_e(n[i],r[i]),s)return s;return s=_e(n.length,r.length),s||(s=_e(n[n.length-2],r[r.length-2]),s||_e(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Bo(r.mutation,s,Yt.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){const s=Vn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ro();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Vn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Xt();const o=Fo(),a=function(){return Fo()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof lr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Bo(h.mutation,u,h.mutation.getFieldMask(),ze.now())):o.set(u.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new PN(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Fo();let s=new je((o,a)=>o-a),i=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Yt.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(s.get(a.batchId)||ve()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=Aw();h.forEach(p=>{if(!i.has(p)){const g=Dw(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sd(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Vn());let a=-1,c=i;return o.next(u=>M.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ve())).next(h=>({batchId:a,changes:bw(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=Ro();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ro();return this.indexManager.getCollectionParents(e,i).next(a=>M.forEach(a,c=>{const u=function(f,p){return new cr(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,qe.newInvalidDocument(h)))});let a=Ro();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Bo(h.mutation,u,Yt.empty(),ze.now()),ba(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:rt(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:dd(s.bundledQuery),readTime:rt(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.overlays=new je(Y.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Vn();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Vn(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new je((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Vn(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Vn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return M.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ud(n,r));let i=this.Ir.get(n);i===void 0&&(i=ve(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this.Tr=new Oe(ft.Er),this.dr=new Oe(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new we([])),r=new ft(n,e),s=new ft(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new we([])),r=new ft(n,e),s=new ft(n,e+1);let i=ve();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Oe(ft.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cd(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new ft(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(_e);return n.forEach(s=>{const i=new ft(s,0),o=new ft(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new ft(new Y(i),0);let a=new Oe(_e);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.wr)),!0)},o),M.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,s=>{const i=new ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ft(n,0),s=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.Mr=e,this.docs=function(){return new je(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():qe.newInvalidDocument(n))}getEntries(e,n){let r=Xt();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():qe.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Xt();const o=n.path,a=new Y(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Zf(XE(h),r)<=0||(s.has(h.key)||ba(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kN(this)}getSize(e){return M.resolve(this.size)}}class kN extends sT{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.persistence=e,this.Nr=new zr(n=>As(n),Ta),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gd,this.targetCount=0,this.kr=xs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new xs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jt(0),this.Kr=!1,this.Kr=!0,this.$r=new VN,this.referenceDelegate=e(this),this.Ur=new ON(this),this.indexManager=new yN,this.remoteDocumentCache=function(s){return new NN(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Yw(n),this.Gr=new CN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new DN(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new MN(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class MN extends ew{constructor(e){super(),this.currentSequenceNumber=e}}class Ol{constructor(e){this.persistence=e,this.Jr=new gd,this.Yr=null}static Zr(e){return new Ol(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const s=Y.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.serializer=e}O(e,n,r,s){const i=new Pl("createOrUpgrade",n);r<1&&s>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sg,{unique:!0}),c.createObjectStore("documentMutations")}(e),p_(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),p_(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sg,{unique:!0});const f=u.store("mutations"),p=h.map(g=>f.put(g));return M.waitFor(p)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:_D});u.createIndex("collectionPathOverlayIndex",yD,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",vD,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:oD});u.createIndex("documentKeyIndex",aD),u.createIndex("collectionGroupIndex",cD)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:dD}).createIndex("sequenceNumberIndex",pD,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:mD}).createIndex("documentKeyIndex",gD,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=sl(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>M.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,c=>{ae(c.userId===i.userId);const u=cs(this.serializer,c);return tT(e,i.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,a)=>{const c=new we(o),u=function(f){return[0,jt(f)]}(c);i.push(n.get(u).next(h=>h?M.resolve():(f=>n.put({targetId:0,path:jt(f),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>M.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:fD});const r=n.store("collectionParents"),s=new md,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:jt(c)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new we(o);return i(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,c],u)=>{const h=xn(a);return i(h.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=Po(s),o=Xw(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const a=n.store("remoteDocumentsV14"),c=function(f){return f.document?new Y(we.fromString(f.document.name).popFirst(5)):f.noDocument?Y.fromSegments(f.noDocument.path):f.unknownDocument?Y.fromSegments(f.unknownDocument.path):ne()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>M.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=iT(this.serializer),i=new aT(Ol.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let h=(u=a.get(c.userId))!==null&&u!==void 0?u:ve();cs(this.serializer,c).keys().forEach(f=>h=h.add(f)),a.set(c.userId,h)}),M.forEach(a,(c,u)=>{const h=new dt(u),f=Nl.lt(this.serializer,h),p=i.getIndexManager(h),g=kl.lt(h,this.serializer,p,i.referenceDelegate);return new oT(s,g,f,p).recalculateAndSaveOverlaysForDocumentKeys(new Fh(n,Jt.oe),c).next()})})}}function p_(t){t.createObjectStore("targetDocuments",{keyPath:uD}).createIndex("documentTargetsIndex",hD,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lD,{unique:!0}),t.createObjectStore("targetGlobal")}const $u="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _d{constructor(e,n,r,s,i,o,a,c,u,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=u,this.li=h,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!_d.D())throw new q(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AN(this,s),this.Ai=n+"main",this.serializer=new Yw(c),this.Ri=new Nn(this.Ai,this.hi,new LN(this.serializer)),this.$r=new fN,this.Ur=new EN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iT(this.serializer),this.Gr=new hN,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&nt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(B.FAILED_PRECONDITION,$u);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Jt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Kr(e))return G("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return wo(e).get("owner").next(n=>M.resolve(this.vi(n)))}Ci(e){return lc(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=ut(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):wo(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new q(B.FAILED_PRECONDITION,$u);return!1}}return!(!this.networkEnabled||!this.inForeground)||lc(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&G("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Fh(e,Jt.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>lc(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return kl.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vN(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Nl.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(c){return c===17?TD:c===16?wD:c===15?td:c===14?ow:c===13?iw:c===12?ED:c===11?sw:void ne()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,a=>(o=new Fh(a,this.Qr?this.Qr.next():Jt.oe),n==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new q(B.FAILED_PRECONDITION,ZE);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return wo(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(B.FAILED_PRECONDITION,$u)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wo(e).put("owner",n)}static D(){return Nn.D()}bi(e){const n=wo(e);return n.get("owner").next(r=>this.vi(r)?(G("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(nt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;SE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return G("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){nt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wo(t){return ut(t,"owner")}function lc(t){return ut(t,"clientMetadata")}function yd(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ve(),s=ve();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return SE()?8:tw(Jc())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new FN;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ri()<=Ie.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",si(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(ri()<=Ie.DEBUG&&G("QueryEngine","Query:",si(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ri()<=Ie.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",si(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$t(n))):M.resolve())}Yi(e,n){if(Ug(n))return M.resolve(null);let r=$t(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=tl(n,null,"F"),r=$t(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ve(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,a);return this.ns(n,u,o,c.readTime)?this.Yi(e,tl(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,s){return Ug(n)||s.isEqual(ue.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?M.resolve(null):(ri()<=Ie.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),si(n)),this.rs(e,o,n,YE(s,-1)).next(a=>a))})}ts(e,n){let r=new Oe(Tw(e));return n.forEach((s,i)=>{ba(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ri()<=Ie.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",si(n)),this.Ji.getDocumentsMatchingQuery(e,n,sn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new je(_e),this._s=new zr(i=>As(i),Ta),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function lT(t,e,n,r){return new BN(t,e,n,r)}async function uT(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=ve();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function UN(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const f=u.batch,p=f.keys();let g=M.resolve();return p.forEach(w=>{g=g.next(()=>h.getEntry(c,w)).next(R=>{const V=u.docVersions.get(w);ae(V!==null),R.version.compareTo(V)<0&&(f.applyToRemoteDocument(R,u),R.isValidDocument()&&(R.setReadTime(u.commitVersion),h.addEntry(R)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ve();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function hT(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function jN(t,e){const n=X(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(tt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(R,V,N){return R.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(i,g))});let c=Xt(),u=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(fT(i,o,e.documentUpdates).next(h=>{c=h.Ps,u=h.Is})),!r.isEqual(ue.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.os=s,i))}function fT(t,e,n){let r=ve(),s=ve();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Xt();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function $N(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ki(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Jn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Oi(t,e,n){const r=X(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Kr(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function il(t,e,n){const r=X(t);let s=ue.min(),i=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=X(c),p=f._s.get(h);return p!==void 0?M.resolve(f.os.get(p)):f.Ur.getTargetData(u,h)}(r,o,$t(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:ve())).next(a=>(mT(r,ww(e),a),{documents:a,Ts:i})))}function dT(t,e){const n=X(t),r=X(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ot(i,e).next(o=>o?o.target:null))}function pT(t,e){const n=X(t),r=n.us.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,YE(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(mT(n,e,s),s))}function mT(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}async function qN(t,e,n,r){const s=X(t);let i=ve(),o=Xt();for(const u of n){const h=e.Es(u.metadata.name);u.document&&(i=i.add(h));const f=e.ds(u);f.setReadTime(e.As(u.metadata.readTime)),o=o.insert(h,f)}const a=s.cs.newChangeBuffer({trackRemovals:!0}),c=await ki(s,function(h){return $t(Ki(we.fromString(`__bundle__/docs/${h}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",u=>fT(u,a,o).next(h=>(a.apply(u),h)).next(h=>s.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>s.Ur.addMatchingKeys(u,i,c.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(u,h.Ps,h.Is)).next(()=>h.Ps)))}async function GN(t,e,n=ve()){const r=await ki(t,$t(dd(e.bundledQuery))),s=X(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=rt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Gr.saveNamedQuery(i,e);const a=r.withResumeToken(tt.EMPTY_BYTE_STRING,o);return s.os=s.os.insert(a.targetId,a),s.Ur.updateTargetData(i,a).next(()=>s.Ur.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Ur.addMatchingKeys(i,n,r.targetId)).next(()=>s.Gr.saveNamedQuery(i,e))})}function m_(t,e){return`firestore_clients_${t}_${e}`}function g_(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qu(t,e){return`firestore_targets_${t}_${e}`}class ol{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new q(s.error.code,s.error.message))),o?new ol(e,n,s.state,i):(nt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uo{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new q(r.error.code,r.error.message))),i?new Uo(e,r.state,s):(nt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class al{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=id();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=nw(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new al(e,i):(nt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Ed{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Ed(n.clientId,n.onlineState):(nt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Xh{constructor(){this.activeTargetIds=id()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gu{constructor(e,n,r,s,i){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new je(_e),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=m_(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Xh),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(m_(this.persistenceKey,r));if(s){const i=al.Rs(r,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(qu(this.persistenceKey,e));if(s){const i=Uo.Rs(e,s);i&&(r=i.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qu(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return G("SharedClientState","READ",e,n),n}setItem(e,n){G("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){G("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(G("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(i){let o=Jt.oe;if(i!=null)try{const a=JSON.parse(i);ae(typeof a=="number"),o=a}catch(a){nt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Jt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new ol(this.currentUser,e,n,r),i=g_(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const n=g_(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=qu(this.persistenceKey,e),i=new Uo(e,n,r);this.setItem(s,i.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return al.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return ol.Rs(new dt(i),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return Uo.Rs(s,n)}Ls(e){return Ed.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);G("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(r),o=[],a=[];return i.forEach(c=>{s.has(c)||o.push(c)}),s.forEach(c=>{i.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=id();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class gT{constructor(){this.so=new Xh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Xh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=null;function Hu(){return uc===null?uc=function(){return 268435456+Math.round(2147483648*Math.random())}():uc++,"0x"+uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class WN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Hu(),c=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,c,u,s).then(h=>(G("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw On("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=KN[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Hu();return new Promise((o,a)=>{const c=new qE;c.setWithCredentials(!0),c.listenOnce(GE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case _c.NO_ERROR:const h=c.getResponseJson();G(Ct,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case _c.TIMEOUT:G(Ct,`RPC '${e}' ${i} timed out`),a(new q(B.DEADLINE_EXCEEDED,"Request time out"));break;case _c.HTTP_ERROR:const f=c.getStatus();if(G(Ct,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const w=function(V){const N=V.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(N)>=0?N:B.UNKNOWN}(g.status);a(new q(w,g.message))}else a(new q(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new q(B.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{G(Ct,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);G(Ct,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=Hu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zE(),a=KE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");G(Ct,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);let p=!1,g=!1;const w=new zN({Io:V=>{g?G(Ct,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(p||(G(Ct,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),G(Ct,`RPC '${e}' stream ${s} sending:`,V),f.send(V))},To:()=>f.close()}),R=(V,N,D)=>{V.listen(N,E=>{try{D(E)}catch(C){setTimeout(()=>{throw C},0)}})};return R(f,Ao.EventType.OPEN,()=>{g||(G(Ct,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),R(f,Ao.EventType.CLOSE,()=>{g||(g=!0,G(Ct,`RPC '${e}' stream ${s} transport closed`),w.So())}),R(f,Ao.EventType.ERROR,V=>{g||(g=!0,On(Ct,`RPC '${e}' stream ${s} transport errored:`,V),w.So(new q(B.UNAVAILABLE,"The operation could not be completed")))}),R(f,Ao.EventType.MESSAGE,V=>{var N;if(!g){const D=V.data[0];ae(!!D);const E=D,C=E.error||((N=E[0])===null||N===void 0?void 0:N.error);if(C){G(Ct,`RPC '${e}' stream ${s} received error:`,C);const k=C.status;let F=function(v){const b=ot[v];if(b!==void 0)return Ow(b)}(k),I=C.message;F===void 0&&(F=B.INTERNAL,I="Unknown error status: "+k+" with message "+C.message),g=!0,w.So(new q(F,I)),f.close()}else G(Ct,`RPC '${e}' stream ${s} received:`,D),w.bo(D)}}),R(a,HE.STAT_EVENT,V=>{V.stat===Mh.PROXY?G(Ct,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Mh.NOPROXY&&G(Ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){return typeof window<"u"?window:null}function bc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){return new eN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n,r,s,i,o,a,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(nt(n.toString()),nt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new q(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QN extends yT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=rN(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?rt(o.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=zh(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Zc(c)?{documents:Hw(i,c)}:{query:Kw(i,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Bw(i,o.resumeToken);const u=Hh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=Ni(i,o.snapshotVersion.toTimestamp());const u=Hh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=iN(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=zh(this.serializer),n.removeTarget=e,this.a_(n)}}class JN extends yT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ae(!!e.streamToken),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=sN(e.writeResults,e.commitTime),r=rt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=zh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ca(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Kh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(B.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Kh(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class XN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(nt(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Wr(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=X(c);u.L_.add(4),await Qi(u),u.q_.set("Unknown"),u.L_.delete(4),await Ca(u)}(this))})}),this.q_=new XN(r,s)}}async function Ca(t){if(Wr(t))for(const e of t.B_)await e(!0)}async function Qi(t){for(const e of t.B_)await e(!1)}function Ml(t,e){const n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),bd(n)?Id(n):Yi(n).r_()&&Td(n,e))}function Mi(t,e){const n=X(t),r=Yi(n);n.N_.delete(e),r.r_()&&vT(n,e),n.N_.size===0&&(r.r_()?r.o_():Wr(n)&&n.q_.set("Unknown"))}function Td(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yi(t).A_(e)}function vT(t,e){t.Q_.xe(e),Yi(t).R_(e)}function Id(t){t.Q_=new JD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Yi(t).start(),t.q_.v_()}function bd(t){return Wr(t)&&!Yi(t).n_()&&t.N_.size>0}function Wr(t){return X(t).L_.size===0}function ET(t){t.Q_=void 0}async function ek(t){t.q_.set("Online")}async function tk(t){t.N_.forEach((e,n)=>{Td(t,e)})}async function nk(t,e){ET(t),bd(t)?(t.q_.M_(e),Id(t)):t.q_.set("Unknown")}async function rk(t,e,n){if(t.q_.set("Online"),e instanceof Fw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cl(t,r)}else if(e instanceof Ic?t.Q_.Ke(e):e instanceof Lw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await hT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.N_.get(u);h&&i.N_.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=i.N_.get(c);if(!h)return;i.N_.set(c,h.withResumeToken(tt.EMPTY_BYTE_STRING,h.snapshotVersion)),vT(i,c);const f=new Jn(h.target,c,u,h.sequenceNumber);Td(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await cl(t,r)}}async function cl(t,e,n){if(!Kr(e))throw e;t.L_.add(1),await Qi(t),t.q_.set("Offline"),n||(n=()=>hT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ca(t)})}function wT(t,e){return e().catch(n=>cl(t,n,e))}async function Ji(t){const e=X(t),n=jr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;sk(e);)try{const s=await $N(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,ik(e,s)}catch(s){await cl(e,s)}TT(e)&&IT(e)}function sk(t){return Wr(t)&&t.O_.length<10}function ik(t,e){t.O_.push(e);const n=jr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function TT(t){return Wr(t)&&!jr(t).n_()&&t.O_.length>0}function IT(t){jr(t).start()}async function ok(t){jr(t).p_()}async function ak(t){const e=jr(t);for(const n of t.O_)e.m_(n.mutations)}async function ck(t,e,n){const r=t.O_.shift(),s=ld.from(r,e,n);await wT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ji(t)}async function lk(t,e){e&&jr(t).V_&&await async function(r,s){if(function(o){return kw(o)&&o!==B.ABORTED}(s.code)){const i=r.O_.shift();jr(r).s_(),await wT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ji(r)}}(t,e),TT(t)&&IT(t)}async function y_(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Wr(n);n.L_.add(3),await Qi(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ca(n)}async function Zh(t,e){const n=X(t);e?(n.L_.delete(2),await Ca(n)):e||(n.L_.add(2),await Qi(n),n.q_.set("Unknown"))}function Yi(t){return t.K_||(t.K_=function(n,r,s){const i=X(n);return i.w_(),new QN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:ek.bind(null,t),Ro:tk.bind(null,t),mo:nk.bind(null,t),d_:rk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),bd(t)?Id(t):t.q_.set("Unknown")):(await t.K_.stop(),ET(t))})),t.K_}function jr(t){return t.U_||(t.U_=function(n,r,s){const i=X(n);return i.w_(),new JN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ok.bind(null,t),mo:lk.bind(null,t),f_:ak.bind(null,t),g_:ck.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ji(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new At,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Ad(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xi(t,e){if(nt("AsyncQueue",`${e}: ${t}`),Kr(t))return new q(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Ro(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new vi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.W_=new je(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Li{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Li(e,n,vi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ia(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class hk{constructor(){this.queries=E_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=E_(),i.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})})(this,new q(B.ABORTED,"Firestore shutting down"))}}function E_(){return new zr(t=>Ew(t),Ia)}async function Rd(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new uk,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Xi(o,`Initialization of query '${si(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Pd(n)}async function Sd(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fk(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Pd(n)}function dk(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Pd(t){t.Y_.forEach(e=>{e.next()})}var ef,w_;(w_=ef||(ef={})).ea="default",w_.Cache="cache";class Cd{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Li(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Li.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ef.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e){this.serializer=e}Es(e){return kn(this.serializer,e)}ds(e){return e.metadata.exists?Gw(this.serializer,e.document,!1):qe.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return rt(e)}}class mk{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=we.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new T_(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Es(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||ve()).add(i);n.set(o,a)}}return n}async complete(){const e=await qN(this.localStore,new T_(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await GN(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function bT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.key=e}}class RT{constructor(e){this.key=e}}class ST{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=Tw(e),this.Ra=new vi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new v_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=ba(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),R=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let V=!1;p&&g?p.data.isEqual(g.data)?w!==R&&(r.track({type:3,doc:g}),V=!0):this.ga(p,g)||(r.track({type:2,doc:g}),V=!0,(c&&this.Aa(g,c)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),V=!0):p&&!g&&(r.track({type:1,doc:p}),V=!0,(c||u)&&(a=!0)),V&&(g?(o=o.add(g),i=R?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(g,w){const R=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return R(g)-R(w)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Li(this.query,e.Ra,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new v_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new RT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new AT(r))}),n}ba(e){this.Ta=e.Ts,this.da=ve();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Li.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class _k{constructor(e){this.key=e,this.va=!1}}class yk{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new zr(a=>Ew(a),Ia),this.Ma=new Map,this.xa=new Set,this.Oa=new je(Y.comparator),this.Na=new Map,this.La=new gd,this.Ba={},this.ka=new Map,this.qa=xs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vk(t,e,n=!0){const r=Ll(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await PT(r,e,n,!0),s}async function Ek(t,e){const n=Ll(t);await PT(n,e,!0,!1)}async function PT(t,e,n,r){const s=await ki(t.localStore,$t(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await xd(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ml(t.remoteStore,s),a}async function xd(t,e,n,r,s){t.Ka=(f,p,g)=>async function(R,V,N,D){let E=V.view.ma(N);E.ns&&(E=await il(R.localStore,V.query,!1).then(({documents:I})=>V.view.ma(I,E)));const C=D&&D.targetChanges.get(V.targetId),k=D&&D.targetMismatches.get(V.targetId)!=null,F=V.view.applyChanges(E,R.isPrimaryClient,C,k);return tf(R,V.targetId,F.wa),F.snapshot}(t,f,p,g);const i=await il(t.localStore,e,!0),o=new ST(e,i.Ts),a=o.ma(i.documents),c=Sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);tf(t,n,u.wa);const h=new gk(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function wk(t,e,n){const r=X(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Ia(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Oi(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Mi(r.remoteStore,s.targetId),Fi(r,s.targetId)}).catch(Hr)):(Fi(r,s.targetId),await Oi(r.localStore,s.targetId,!0))}async function Tk(t,e){const n=X(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mi(n.remoteStore,r.targetId))}async function Ik(t,e,n){const r=kd(t);try{const s=await function(o,a){const c=X(o),u=ze.now(),h=a.reduce((g,w)=>g.add(w.key),ve());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Xt(),R=ve();return c.cs.getEntries(g,h).next(V=>{w=V,w.forEach((N,D)=>{D.isValidDocument()||(R=R.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,w)).next(V=>{f=V;const N=[];for(const D of a){const E=zD(D,f.get(D.key).overlayedDocument);E!=null&&N.push(new lr(D.key,E,hw(E.value.mapValue),Ke.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,N,a)}).next(V=>{p=V;const N=V.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(g,V.batchId,N)})}).then(()=>({batchId:p.batchId,changes:bw(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new je(_e)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await ur(r,s.changes),await Ji(r.remoteStore)}catch(s){const i=Xi(s,"Failed to persist write");n.reject(i)}}async function CT(t,e){const n=X(t);try{const r=await jN(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ae(o.va):s.removedDocuments.size>0&&(ae(o.va),o.va=!1))}),await ur(n,r,e)}catch(r){await Hr(r)}}function I_(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=X(o);c.onlineState=a;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(u=!0)}),u&&Pd(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bk(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new je(Y.comparator);o=o.insert(i,qe.newNoDocument(i,ue.min()));const a=ve().add(i),c=new Ra(ue.min(),new Map,new je(_e),o,a);await CT(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Nd(r)}else await Oi(r.localStore,e,!1).then(()=>Fi(r,e,n)).catch(Hr)}async function Ak(t,e){const n=X(t),r=e.batch.batchId;try{const s=await UN(n.localStore,e);Dd(n,r,null),Vd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ur(n,s)}catch(s){await Hr(s)}}async function Rk(t,e,n){const r=X(t);try{const s=await function(o,a){const c=X(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(ae(f!==null),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);Dd(r,e,n),Vd(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ur(r,s)}catch(s){await Hr(s)}}async function Sk(t,e){const n=X(t);Wr(n.remoteStore)||G("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=X(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();const s=n.ka.get(r)||[];s.push(e),n.ka.set(r,s)}catch(r){const s=Xi(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Vd(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Dd(t,e,n){const r=X(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Fi(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||xT(t,r)})}function xT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Mi(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Nd(t))}function tf(t,e,n){for(const r of n)r instanceof AT?(t.La.addReference(r.key,e),Pk(t,r)):r instanceof RT?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||xT(t,r.key)):ne()}function Pk(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),Nd(t))}function Nd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(we.fromString(e)),r=t.qa.next();t.Na.set(r,new _k(n)),t.Oa=t.Oa.insert(n,r),Ml(t.remoteStore,new Jn($t(Ki(n.path)),r,"TargetPurposeLimboResolution",Jt.oe))}}async function ur(t,e,n){const r=X(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=vd.Wi(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,u){const h=X(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(u,p=>M.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>M.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Kr(f))throw f;G("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.os.get(p),w=g.snapshotVersion,R=g.withLastLimboFreeSnapshotVersion(w);h.os=h.os.insert(p,R)}}}(r.localStore,i))}async function Ck(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await uT(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(c=>{c.reject(new q(B.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ur(n,r.hs)}}function xk(t,e){const n=X(t),r=n.Na.get(e);if(r&&r.va)return ve().add(r.key);{let s=ve();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}async function Vk(t,e){const n=X(t),r=await il(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&tf(n,e.targetId,s.wa),s}async function Dk(t,e){const n=X(t);return pT(n.localStore,e).then(r=>ur(n,r))}async function Nk(t,e,n,r){const s=X(t),i=await function(a,c){const u=X(a),h=X(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.Mn(f,c).next(p=>p?u.localDocuments.getDocuments(f,p):M.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Ji(s.remoteStore):n==="acknowledged"||n==="rejected"?(Dd(s,e,r||null),Vd(s,e),function(a,c){X(X(a).mutationQueue).On(c)}(s.localStore,e)):ne(),await ur(s,i)):G("SyncEngine","Cannot apply mutation batch with id: "+e)}async function kk(t,e){const n=X(t);if(Ll(n),kd(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await b_(n,r.toArray());n.Qa=!0,await Zh(n.remoteStore,!0);for(const i of s)Ml(n.remoteStore,i)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Fi(n,o),Oi(n.localStore,o,!0))),Mi(n.remoteStore,o)}),await s,await b_(n,r),function(o){const a=X(o);a.Na.forEach((c,u)=>{Mi(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new je(Y.comparator)}(n),n.Qa=!1,await Zh(n.remoteStore,!1)}}async function b_(t,e,n){const r=X(t),s=[],i=[];for(const o of e){let a;const c=r.Ma.get(o);if(c&&c.length!==0){a=await ki(r.localStore,$t(c[0]));for(const u of c){const h=r.Fa.get(u),f=await Vk(r,h);f.snapshot&&i.push(f.snapshot)}}else{const u=await dT(r.localStore,o);a=await ki(r.localStore,u),await xd(r,VT(u),o,!1,a.resumeToken)}s.push(a)}return r.Ca.d_(i),s}function VT(t){return vw(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ok(t){return function(n){return X(X(n).persistence).Qi()}(X(t).localStore)}async function Mk(t,e,n,r){const s=X(t);if(s.Qa)return void G("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await pT(s.localStore,ww(i[0])),a=Ra.createSynthesizedRemoteEventForCurrentChange(e,n==="current",tt.EMPTY_BYTE_STRING);await ur(s,o,a);break}case"rejected":await Oi(s.localStore,e,!0),Fi(s,e,r);break;default:ne()}}async function Lk(t,e,n){const r=Ll(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){G("SyncEngine","Adding an already active target "+s);continue}const i=await dT(r.localStore,s),o=await ki(r.localStore,i);await xd(r,VT(i),o.targetId,!1,o.resumeToken),Ml(r.remoteStore,o)}for(const s of n)r.Ma.has(s)&&await Oi(r.localStore,s,!1).then(()=>{Mi(r.remoteStore,s),Fi(r,s)}).catch(Hr)}}function Ll(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bk.bind(null,e),e.Ca.d_=fk.bind(null,e.eventManager),e.Ca.$a=dk.bind(null,e.eventManager),e}function kd(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ak.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rk.bind(null,e),e}function Fk(t,e,n){const r=X(t);(async function(i,o,a){try{const c=await o.getMetadata();if(await function(g,w){const R=X(g),V=rt(w.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",N=>R.Gr.getBundleMetadata(N,w.id)).then(N=>!!N&&N.createTime.compareTo(V)>=0)}(i.localStore,c))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(bT(c));const u=new mk(c,i.localStore,o.serializer);let h=await o.Ua();for(;h;){const p=await u.la(h);p&&a._updateProgress(p),h=await o.Ua()}const f=await u.complete();return await ur(i,f.Ia,void 0),await function(g,w){const R=X(g);return R.persistence.runTransaction("Save bundle","readwrite",V=>R.Gr.saveBundleMetadata(V,w))}(i.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return On("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class la{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pa(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return lT(this.persistence,new cT,e.initialUser,this.serializer)}Ga(e){return new aT(Ol.Zr,this.serializer)}Wa(e){return new gT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}la.provider={build:()=>new la};class DT extends la{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await kd(this.Ja.syncEngine),await Ji(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return lT(this.persistence,new cT,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new TN(r,e.asyncQueue,n)}Ha(e,n){const r=new rD(n,this.persistence);return new nD(e.asyncQueue,r)}Ga(e){const n=yd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?zt.withCacheSize(this.cacheSizeBytes):zt.DEFAULT;return new _d(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,_T(),bc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new gT}}class Bk extends DT{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Gu&&(this.sharedClientState.syncEngine={no:Nk.bind(null,n),ro:Mk.bind(null,n),io:Lk.bind(null,n),Qi:Ok.bind(null,n),eo:Dk.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await kk(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=_T();if(!Gu.D(n))throw new q(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=yd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gu(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ua{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>I_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ck.bind(null,this.syncEngine),await Zh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hk}()}createDatastore(e){const n=Pa(e.databaseInfo.databaseId),r=function(i){return new WN(i)}(e.databaseInfo);return function(i,o,a,c){return new YN(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new ZN(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>I_(this.syncEngine,n,0),function(){return __.D()?new __:new HN}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,h){const f=new yk(s,i,o,a,c,u);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Qi(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ua.provider={build:()=>new ua};function A_(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):nt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new At,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const s=await this.iu(r);return new pk(JSON.parse(s),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=X(s),a={documents:i.map(f=>aa(o.serializer,f))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,we.emptyPath(),a,i.length),u=new Map;c.forEach(f=>{const p=nN(o.serializer,f);u.set(p.key.toString(),p)});const h=[];return i.forEach(f=>{const p=u.get(f.toString());ae(!!p),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=Y.fromPath(r);this.mutations.push(new ad(s,this.precondition(s)))}),await async function(r,s){const i=X(r),o={writes:s.map(a=>ca(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,we.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ne();n=ue.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ue.min())?Ke.exists(!1):Ke.updateTime(n):Ke.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ue.min()))throw new q(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ke.updateTime(n)}return Ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new wd(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new jk(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!wa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!kw(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=QE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new At;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xi(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ku(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await uT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function R_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Od(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>y_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>y_(e.remoteStore,s)),t._onlineComponents=e}async function Od(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ku(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;On("Error using user provided cache. Falling back to memory cache: "+n),await Ku(t,new la)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Ku(t,new la);return t._offlineComponents}async function Bl(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await R_(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await R_(t,new ua))),t._onlineComponents}function NT(t){return Od(t).then(e=>e.persistence)}function Md(t){return Od(t).then(e=>e.localStore)}function kT(t){return Bl(t).then(e=>e.remoteStore)}function Ld(t){return Bl(t).then(e=>e.syncEngine)}function Gk(t){return Bl(t).then(e=>e.datastore)}async function Bi(t){const e=await Bl(t),n=e.eventManager;return n.onListen=vk.bind(null,e.syncEngine),n.onUnlisten=wk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ek.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Tk.bind(null,e.syncEngine),n}function Hk(t){return t.asyncQueue.enqueue(async()=>{const e=await NT(t),n=await kT(t);return e.setNetworkEnabled(!0),function(s){const i=X(s);return i.L_.delete(0),Ca(i)}(n)})}function Kk(t){return t.asyncQueue.enqueue(async()=>{const e=await NT(t),n=await kT(t);return e.setNetworkEnabled(!1),async function(s){const i=X(s);i.L_.add(0),await Qi(i),i.q_.set("Offline")}(n)})}function zk(t,e){const n=new At;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(u,h){const f=X(u);return f.persistence.runTransaction("read document","readonly",p=>f.localDocuments.getDocument(p,h))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new q(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=Xi(a,`Failed to get document '${i} from cache`);o.reject(c)}}(await Md(t),e,n)),n.promise}function OT(t,e,n={}){const r=new At;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new Fl({next:p=>{h.Za(),o.enqueueAndForget(()=>Sd(i,f));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new q(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new q(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Cd(Ki(a.path),h,{includeMetadataChanges:!0,_a:!0});return Rd(i,f)}(await Bi(t),t.asyncQueue,e,n,r)),r.promise}function Wk(t,e){const n=new At;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await il(s,i,!0),c=new ST(i,a.Ts),u=c.ma(a.documents),h=c.applyChanges(u,!1);o.resolve(h.snapshot)}catch(a){const c=Xi(a,`Failed to execute query '${i} against cache`);o.reject(c)}}(await Md(t),e,n)),n.promise}function MT(t,e,n={}){const r=new At;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new Fl({next:p=>{h.Za(),o.enqueueAndForget(()=>Sd(i,f)),p.fromCache&&c.source==="server"?u.reject(new q(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Cd(a,h,{includeMetadataChanges:!0,_a:!0});return Rd(i,f)}(await Bi(t),t.asyncQueue,e,n,r)),r.promise}function Qk(t,e){const n=new Fl(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){X(s).Y_.add(i),i.next()}(await Bi(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){X(s).Y_.delete(i)}(await Bi(t),n))}}function Jk(t,e,n,r){const s=function(o,a){let c;return c=typeof o=="string"?Mw().encode(o):o,function(h,f){return new Uk(h,f)}(function(h,f){if(h instanceof Uint8Array)return A_(h,f);if(h instanceof ArrayBuffer)return A_(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Pa(e));t.asyncQueue.enqueueAndForget(async()=>{Fk(await Ld(t),s,r)})}function Yk(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=X(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Gr.getNamedQuery(o,s))}(await Md(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t,e,n){if(!n)throw new q(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FT(t,e,n,r){if(e===!0&&r===!0)throw new q(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function P_(t){if(!Y.isDocumentKey(t))throw new q(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function C_(t){if(Y.isDocumentKey(t))throw new q(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ul(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function Pe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ul(t);throw new q(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function BT(t,e){if(e<=0)throw new q(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xa{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HV;switch(r.type){case"firstParty":return new QV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=S_.get(n);r&&(G("ComponentProvider","Removing Datastore"),S_.delete(n),r.terminate())}(this),Promise.resolve()}}function Xk(t,e,n,r={}){var s;const i=(t=Pe(t,xa))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&On("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=dt.MOCK_USER;else{a=hx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new q(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dt(u)}t._authCredentials=new KV(new WE(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qt=class UT{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new UT(this.firestore,e,this._query)}},Ye=class jT{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jT(this.firestore,e,this._key)}},Nr=class $T extends qt{constructor(e,n,r){super(e,n,Ki(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new Y(e))}withConverter(e){return new $T(this.firestore,e,this._path)}};function qT(t,e,...n){if(t=ct(t),Fd("collection","path",e),t instanceof xa){const r=we.fromString(e,...n);return C_(r),new Nr(t,null,r)}{if(!(t instanceof Ye||t instanceof Nr))throw new q(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return C_(r),new Nr(t.firestore,null,r)}}function Zk(t,e){if(t=Pe(t,xa),Fd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qt(t,null,function(r){return new cr(we.emptyPath(),r)}(e))}function ll(t,e,...n){if(t=ct(t),arguments.length===1&&(e=QE.newId()),Fd("doc","path",e),t instanceof xa){const r=we.fromString(e,...n);return P_(r),new Ye(t,null,new Y(r))}{if(!(t instanceof Ye||t instanceof Nr))throw new q(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return P_(r),new Ye(t.firestore,t instanceof Nr?t.converter:null,new Y(r))}}function GT(t,e){return t=ct(t),e=ct(e),(t instanceof Ye||t instanceof Nr)&&(e instanceof Ye||e instanceof Nr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function HT(t,e){return t=ct(t),e=ct(e),t instanceof qt&&e instanceof qt&&t.firestore===e.firestore&&Ia(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wd(this,"async_queue_retry"),this.Vu=()=>{const r=bc();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=bc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=bc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new At;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Kr(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw nt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ad.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function nf(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class eO{constructor(){this._progressObserver={},this._taskCompletionResolver=new At,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=-1;let it=class extends xa{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new V_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V_(e),this._firestoreClient=void 0,await e}}};function Dt(t){if(t._terminated)throw new q(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||KT(t),t._firestoreClient}function KT(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,h){return new AD(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,LT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new qk(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}function nO(t,e){On("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return zT(t,ua.provider,{build:r=>new DT(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function rO(t){On("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();zT(t,ua.provider,{build:n=>new Bk(n,e.cacheSizeBytes)})}function zT(t,e,n){if((t=Pe(t,it))._firestoreClient||t._terminated)throw new q(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new q(B.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},KT(t)}function sO(t){if(t._initialized&&!t._terminated)throw new q(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new At;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Nn.D())return Promise.resolve();const s=r+"main";await Nn.delete(s)}(yd(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function iO(t){return function(n){const r=new At;return n.asyncQueue.enqueueAndForget(async()=>Sk(await Ld(n),r)),r.promise}(Dt(t=Pe(t,it)))}function oO(t){return Hk(Dt(t=Pe(t,it)))}function aO(t){return Kk(Dt(t=Pe(t,it)))}function cO(t,e){const n=Dt(t=Pe(t,it)),r=new eO;return Jk(n,t._databaseId,e,r),r}function lO(t,e){return Yk(Dt(t=Pe(t,it)),e).then(n=>n?new qt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(tt.fromBase64String(e))}catch(n){throw new q(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $r=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ls=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=/^__.*__$/;class hO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new zi(e,this.data,n,this.fieldTransforms)}}class WT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function QT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class $l{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $l(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ul(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(QT(this.Cu)&&uO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class fO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pa(e)}Qu(e,n,r,s=!1){return new $l({Cu:e,methodName:n,qu:r,path:He.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fs(t){const e=t._freezeSettings(),n=Pa(t._databaseId);return new fO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ql(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Kd("Data must be an object, but it was:",o,r);const a=XT(r,o);let c,u;if(i.merge)c=new Yt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=rf(e,f,n);if(!o.contains(p))throw new q(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);eI(h,p)||h.push(p)}c=new Yt(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new hO(new It(a),c,u)}class Va extends Ls{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Va}}function JT(t,e,n){return new $l({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ud extends Ls{_toFieldTransform(e){return new Aa(e.path,new Vi)}isEqual(e){return e instanceof Ud}}class jd extends Ls{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=JT(this,e,!0),r=this.Ku.map(i=>Bs(i,n)),s=new Rs(r);return new Aa(e.path,s)}isEqual(e){return e instanceof jd&&Jo(this.Ku,e.Ku)}}class $d extends Ls{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=JT(this,e,!0),r=this.Ku.map(i=>Bs(i,n)),s=new Ss(r);return new Aa(e.path,s)}isEqual(e){return e instanceof $d&&Jo(this.Ku,e.Ku)}}class qd extends Ls{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Di(e.serializer,Sw(e.serializer,this.$u));return new Aa(e.path,n)}isEqual(e){return e instanceof qd&&this.$u===e.$u}}function Gd(t,e,n,r){const s=t.Qu(1,e,n);Kd("Data must be an object, but it was:",s,r);const i=[],o=It.empty();Ms(r,(c,u)=>{const h=zd(e,c,n);u=ct(u);const f=s.Nu(h);if(u instanceof Va)i.push(h);else{const p=Bs(u,f);p!=null&&(i.push(h),o.set(h,p))}});const a=new Yt(i);return new WT(o,a,s.fieldTransforms)}function Hd(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[rf(e,r,n)],c=[s];if(i.length%2!=0)throw new q(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(rf(e,i[p])),c.push(i[p+1]);const u=[],h=It.empty();for(let p=a.length-1;p>=0;--p)if(!eI(u,a[p])){const g=a[p];let w=c[p];w=ct(w);const R=o.Nu(g);if(w instanceof Va)u.push(g);else{const V=Bs(w,R);V!=null&&(u.push(g),h.set(g,V))}}const f=new Yt(u);return new WT(h,f,o.fieldTransforms)}function YT(t,e,n,r=!1){return Bs(n,t.Qu(r?4:3,e))}function Bs(t,e){if(ZT(t=ct(t)))return Kd("Unsupported field value:",e,t),XT(t,e);if(t instanceof Ls)return function(r,s){if(!QT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=Bs(a,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Sw(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:Ni(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ni(s.serializer,i)}}if(r instanceof jl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:Bw(s.serializer,r._byteString)};if(r instanceof Ye){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Bd)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return od(a.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Ul(r)}`)}(t,e)}function XT(t,e){const n={};return aw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(t,(r,s)=>{const i=Bs(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ZT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof jl||t instanceof Ln||t instanceof Ye||t instanceof Ls||t instanceof Bd)}function Kd(t,e,n){if(!ZT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ul(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rf(t,e,n){if((e=ct(e))instanceof $r)return e._internalPath;if(typeof e=="string")return zd(t,e);throw ul("Field path arguments must be of type string or ",t,!1,void 0,n)}const dO=new RegExp("[~\\*/\\[\\]]");function zd(t,e,n){if(e.search(dO)>=0)throw ul(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $r(...e.split("."))._internalPath}catch{throw ul(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ul(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(B.INVALID_ARGUMENT,a+t+c)}function eI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pO extends ha{data(){return super.data()}}function Gl(t,e){return typeof e=="string"?zd(t,e):e instanceof $r?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wd{}class Da extends Wd{}function Er(t,e,...n){let r=[];e instanceof Wd&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Qd).length,a=i.filter(c=>c instanceof Hl).length;if(o>1||o>0&&a>0)throw new q(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Hl extends Da{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hl(e,n,r)}_apply(e){const n=this._parse(e);return rI(e._query,n),new qt(e.firestore,e.converter,Gh(e._query,n))}_parse(e){const n=Fs(e.firestore);return function(i,o,a,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){N_(f,h);const g=[];for(const w of f)g.push(D_(c,i,w));p={arrayValue:{values:g}}}else p=D_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||N_(f,h),p=YT(a,o,f,h==="in"||h==="not-in");return Te.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mO(t,e,n){const r=e,s=Gl("where",t);return Hl._create(s,r,n)}class Qd extends Wd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:De.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)rI(o,c),o=Gh(o,c)}(e._query,n),new qt(e.firestore,e.converter,Gh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jd extends Da{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jd(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oa(i,o)}(e._query,this._field,this._direction);return new qt(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new cr(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function gO(t,e="asc"){const n=e,r=Gl("orderBy",t);return Jd._create(r,n)}class Kl extends Da{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Kl(e,n,r)}_apply(e){return new qt(e.firestore,e.converter,tl(e._query,this._limit,this._limitType))}}function _O(t){return BT("limit",t),Kl._create("limit",t,"F")}function yO(t){return BT("limitToLast",t),Kl._create("limitToLast",t,"L")}class zl extends Da{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new zl(e,n,r)}_apply(e){const n=nI(e,this.type,this._docOrFields,this._inclusive);return new qt(e.firestore,e.converter,function(s,i){return new cr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function vO(...t){return zl._create("startAt",t,!0)}function EO(...t){return zl._create("startAfter",t,!1)}class Wl extends Da{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Wl(e,n,r)}_apply(e){const n=nI(e,this.type,this._docOrFields,this._inclusive);return new qt(e.firestore,e.converter,function(s,i){return new cr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function wO(...t){return Wl._create("endBefore",t,!1)}function TO(...t){return Wl._create("endAt",t,!0)}function nI(t,e,n,r){if(n[0]=ct(n[0]),n[0]instanceof ha)return function(i,o,a,c,u){if(!c)throw new q(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of yi(i))if(f.field.isKeyField())h.push(bs(o,c.key));else{const p=c.data.field(f.field);if(Cl(p))throw new q(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const g=f.field.canonicalString();throw new q(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}h.push(p)}return new Ur(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Fs(t.firestore);return function(o,a,c,u,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new q(B.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let w=0;w<h.length;w++){const R=h[w];if(p[w].field.isKeyField()){if(typeof R!="string")throw new q(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof R}`);if(!sd(o)&&R.indexOf("/")!==-1)throw new q(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${R}' contains a slash.`);const V=o.path.child(we.fromString(R));if(!Y.isDocumentKey(V))throw new q(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const N=new Y(V);g.push(bs(a,N))}else{const V=YT(c,u,R);g.push(V)}}return new Ur(g,f)}(t._query,t.firestore._databaseId,s,e,n,r)}}function D_(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new q(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sd(e)&&n.indexOf("/")!==-1)throw new q(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!Y.isDocumentKey(r))throw new q(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bs(t,new Y(r))}if(n instanceof Ye)return bs(t,n._key);throw new q(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ul(n)}.`)}function N_(t,e){if(!Array.isArray(t)||t.length===0)throw new q(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rI(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Yd{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ms(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ge(o.doubleValue));return new Bd(i)}convertGeoPoint(e){return new jl(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=nd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ra(e));default:return null}}convertTimestamp(e){const n=sr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);ae(Jw(r));const s=new Fr(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||nt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class IO extends Yd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ir=class extends ha{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},jo=class extends ir{data(e={}){return super.data(e)}},qr=class{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ds(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jo(this._firestore,this._userDataWriter,r.key,r,new ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new jo(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ds(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new jo(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ds(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:bO(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function bO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}function sI(t,e){return t instanceof ir&&e instanceof ir?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof qr&&e instanceof qr&&t._firestore===e._firestore&&HT(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){t=Pe(t,Ye);const e=Pe(t.firestore,it);return OT(Dt(e),t._key).then(n=>Xd(e,t,n))}class Us extends Yd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}function RO(t){t=Pe(t,Ye);const e=Pe(t.firestore,it),n=Dt(e),r=new Us(e);return zk(n,t._key).then(s=>new ir(e,r,t._key,s,new ds(s!==null&&s.hasLocalMutations,!0),t.converter))}function SO(t){t=Pe(t,Ye);const e=Pe(t.firestore,it);return OT(Dt(e),t._key,{source:"server"}).then(n=>Xd(e,t,n))}function PO(t){t=Pe(t,qt);const e=Pe(t.firestore,it),n=Dt(e),r=new Us(e);return tI(t._query),MT(n,t._query).then(s=>new qr(e,r,t,s))}function CO(t){t=Pe(t,qt);const e=Pe(t.firestore,it),n=Dt(e),r=new Us(e);return Wk(n,t._query).then(s=>new qr(e,r,t,s))}function xO(t){t=Pe(t,qt);const e=Pe(t.firestore,it),n=Dt(e),r=new Us(e);return MT(n,t._query,{source:"server"}).then(s=>new qr(e,r,t,s))}function k_(t,e,n){t=Pe(t,Ye);const r=Pe(t.firestore,it),s=Ql(t.converter,e,n);return Na(r,[ql(Fs(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ke.none())])}function O_(t,e,n,...r){t=Pe(t,Ye);const s=Pe(t.firestore,it),i=Fs(s);let o;return o=typeof(e=ct(e))=="string"||e instanceof $r?Hd(i,"updateDoc",t._key,e,n,r):Gd(i,"updateDoc",t._key,e),Na(s,[o.toMutation(t._key,Ke.exists(!0))])}function VO(t){return Na(Pe(t.firestore,it),[new Wi(t._key,Ke.none())])}function DO(t,e){const n=Pe(t.firestore,it),r=ll(t),s=Ql(t.converter,e);return Na(n,[ql(Fs(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ke.exists(!1))]).then(()=>r)}function iI(t,...e){var n,r,s;t=ct(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||nf(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(nf(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(t instanceof Ye)u=Pe(t.firestore,it),h=Ki(t._key.path),c={next:f=>{e[o]&&e[o](Xd(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Pe(t,qt);u=Pe(f.firestore,it),h=f._query;const p=new Us(u);c={next:g=>{e[o]&&e[o](new qr(u,p,f,g))},error:e[o+1],complete:e[o+2]},tI(t._query)}return function(p,g,w,R){const V=new Fl(R),N=new Cd(g,V,w);return p.asyncQueue.enqueueAndForget(async()=>Rd(await Bi(p),N)),()=>{V.Za(),p.asyncQueue.enqueueAndForget(async()=>Sd(await Bi(p),N))}}(Dt(u),h,a,c)}function NO(t,e){return Qk(Dt(t=Pe(t,it)),nf(e)?e:{next:e})}function Na(t,e){return function(r,s){const i=new At;return r.asyncQueue.enqueueAndForget(async()=>Ik(await Ld(r),s,i)),i.promise}(Dt(t),e)}function Xd(t,e,n){const r=n.docs.get(e._key),s=new Us(t);return new ir(t,s,e._key,r,new ds(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OO=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fs(e)}set(e,n,r){this._verifyNotCommitted();const s=Rr(e,this._firestore),i=Ql(s.converter,n,r),o=ql(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Ke.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Rr(e,this._firestore);let o;return o=typeof(n=ct(n))=="string"||n instanceof $r?Hd(this._dataReader,"WriteBatch.update",i._key,n,r,s):Gd(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Ke.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Rr(e,this._firestore);return this._mutations=this._mutations.concat(new Wi(n._key,Ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Rr(t,e){if((t=ct(t)).firestore!==e)throw new q(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MO=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Fs(n)}get(n){const r=Rr(n,this._firestore),s=new IO(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return ne();const o=i[0];if(o.isFoundDocument())return new ha(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new ha(this._firestore,s,r._key,null,r.converter);throw ne()})}set(n,r,s){const i=Rr(n,this._firestore),o=Ql(i.converter,r,s),a=ql(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=Rr(n,this._firestore);let a;return a=typeof(r=ct(r))=="string"||r instanceof $r?Hd(this._dataReader,"Transaction.update",o._key,r,s,i):Gd(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Rr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Rr(e,this._firestore),r=new Us(this._firestore);return super.get(e).then(s=>new ir(this._firestore,r,n._key,s._document,new ds(!1,!1),n.converter))}};function LO(t,e,n){t=Pe(t,it);const r=Object.assign(Object.assign({},kO),n);return function(i){if(i.maxAttempts<1)throw new q(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const c=new At;return i.asyncQueue.enqueueAndForget(async()=>{const u=await Gk(i);new $k(i.asyncQueue,u,a,o,c).au()}),c.promise}(Dt(t),s=>e(new MO(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(){return new Va("deleteField")}function BO(){return new Ud("serverTimestamp")}function UO(...t){return new jd("arrayUnion",t)}function jO(...t){return new $d("arrayRemove",t)}function $O(t){return new qd("increment",t)}(function(e,n=!0){(function(s){Hi=s})(Qf),Si(new Ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new it(new zV(r.getProvider("auth-internal")),new YV(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new q(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fr(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Xn(bg,"4.7.3",e),Xn(bg,"4.7.3","esm2017")})();const qO="@firebase/firestore-compat",GO="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new q("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(){if(typeof Uint8Array>"u")throw new q("unimplemented","Uint8Arrays are not available in this environment.")}function L_(){if(!ID())throw new q("unimplemented","Blobs are unavailable in Firestore in this environment.")}class fa{constructor(e){this._delegate=e}static fromBase64String(e){return L_(),new fa(Ln.fromBase64String(e))}static fromUint8Array(e){return M_(),new fa(Ln.fromUint8Array(e))}toBase64(){return L_(),this._delegate.toBase64()}toUint8Array(){return M_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t){return HO(t,["next","error","complete"])}function HO(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{enableIndexedDbPersistence(e,n){return nO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return rO(e._delegate)}clearIndexedDbPersistence(e){return sO(e._delegate)}}class oI{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&On("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Xk(this._delegate,e,n,r)}enableNetwork(){return oO(this._delegate)}disableNetwork(){return aO(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,FT("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return iO(this._delegate)}onSnapshotsInSync(e){return NO(this._delegate,e)}get app(){if(!this._appCompat)throw new q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ui(this,qT(this._delegate,e))}catch(n){throw Ft(n,"collection()","Firestore.collection()")}}doc(e){try{return new hn(this,ll(this._delegate,e))}catch(n){throw Ft(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Lt(this,Zk(this._delegate,e))}catch(n){throw Ft(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return LO(this._delegate,n=>e(new aI(this,n)))}batch(){return Dt(this._delegate),new cI(new OO(this._delegate,e=>Na(this._delegate,e)))}loadBundle(e){return cO(this._delegate,e)}namedQuery(e){return lO(this._delegate,e).then(n=>n?new Lt(this,n):null)}}class Jl extends Yd{constructor(e){super(),this.firestore=e}convertBytes(e){return new fa(new Ln(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return hn.forKey(n,this.firestore,null)}}function zO(t){qV(t)}class aI{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Jl(e)}get(e){const n=ps(e);return this._delegate.get(n).then(r=>new da(this._firestore,new ir(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=ps(e);return r?(Zd("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=ps(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=ps(e);return this._delegate.delete(n),this}}class cI{constructor(e){this._delegate=e}set(e,n,r){const s=ps(e);return r?(Zd("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=ps(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=ps(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Vs{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new jo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pa(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Vs.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new Vs(e,new Jl(e),n),s.set(n,i)),i}}Vs.INSTANCES=new WeakMap;class hn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Jl(e)}static forPath(e,n,r){if(e.length%2!==0)throw new q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new hn(n,new Ye(n._delegate,r,new Y(e)))}static forKey(e,n,r){return new hn(n,new Ye(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ui(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ui(this.firestore,qT(this._delegate,e))}catch(n){throw Ft(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ct(e),e instanceof Ye?GT(this._delegate,e):!1}set(e,n){n=Zd("DocumentReference.set",n);try{return n?k_(this._delegate,e,n):k_(this._delegate,e)}catch(r){throw Ft(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?O_(this._delegate,e):O_(this._delegate,e,n,...r)}catch(s){throw Ft(s,"updateDoc()","DocumentReference.update()")}}delete(){return VO(this._delegate)}onSnapshot(...e){const n=lI(e),r=uI(e,s=>new da(this.firestore,new ir(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return iI(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=RO(this._delegate):(e==null?void 0:e.source)==="server"?n=SO(this._delegate):n=AO(this._delegate),n.then(r=>new da(this.firestore,new ir(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new hn(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ft(t,e,n){return t.message=t.message.replace(e,n),t}function lI(t){for(const e of t)if(typeof e=="object"&&!sf(e))return e;return{}}function uI(t,e){var n,r;let s;return sf(t[0])?s=t[0]:sf(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:i=>{s.next&&s.next(e(i))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class da{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new hn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return sI(this._delegate,e._delegate)}}class pa extends da{data(e){const n=this._delegate.data(e);return this._delegate._converter||GV(n!==void 0),n}}class Lt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Jl(e)}where(e,n,r){try{return new Lt(this.firestore,Er(this._delegate,mO(e,n,r)))}catch(s){throw Ft(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Lt(this.firestore,Er(this._delegate,gO(e,n)))}catch(r){throw Ft(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Lt(this.firestore,Er(this._delegate,_O(e)))}catch(n){throw Ft(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Lt(this.firestore,Er(this._delegate,yO(e)))}catch(n){throw Ft(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Lt(this.firestore,Er(this._delegate,vO(...e)))}catch(n){throw Ft(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Lt(this.firestore,Er(this._delegate,EO(...e)))}catch(n){throw Ft(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Lt(this.firestore,Er(this._delegate,wO(...e)))}catch(n){throw Ft(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Lt(this.firestore,Er(this._delegate,TO(...e)))}catch(n){throw Ft(n,"endAt()","Query.endAt()")}}isEqual(e){return HT(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=CO(this._delegate):(e==null?void 0:e.source)==="server"?n=xO(this._delegate):n=PO(this._delegate),n.then(r=>new of(this.firestore,new qr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=lI(e),r=uI(e,s=>new of(this.firestore,new qr(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return iI(this._delegate,n,r)}withConverter(e){return new Lt(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class WO{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new pa(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class of{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Lt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new pa(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new WO(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new pa(this._firestore,r))})}isEqual(e){return sI(this._delegate,e._delegate)}}class Ui extends Lt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new hn(this.firestore,e):null}doc(e){try{return e===void 0?new hn(this.firestore,ll(this._delegate)):new hn(this.firestore,ll(this._delegate,e))}catch(n){throw Ft(n,"doc()","CollectionReference.doc()")}}add(e){return DO(this._delegate,e).then(n=>new hn(this.firestore,n))}isEqual(e){return GT(this._delegate,e._delegate)}withConverter(e){return new Ui(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ps(t){return Pe(t,Ye)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(...e){this._delegate=new $r(...e)}static documentId(){return new ep(He.keyField().canonicalString())}isEqual(e){return e=ct(e),e instanceof $r?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this._delegate=e}static serverTimestamp(){const e=BO();return e._methodName="FieldValue.serverTimestamp",new hs(e)}static delete(){const e=FO();return e._methodName="FieldValue.delete",new hs(e)}static arrayUnion(...e){const n=UO(...e);return n._methodName="FieldValue.arrayUnion",new hs(n)}static arrayRemove(...e){const n=jO(...e);return n._methodName="FieldValue.arrayRemove",new hs(n)}static increment(e){const n=$O(e);return n._methodName="FieldValue.increment",new hs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO={Firestore:oI,GeoPoint:jl,Timestamp:ze,Blob:fa,Transaction:aI,WriteBatch:cI,DocumentReference:hn,DocumentSnapshot:da,Query:Lt,QueryDocumentSnapshot:pa,QuerySnapshot:of,CollectionReference:Ui,FieldPath:ep,FieldValue:hs,setLogLevel:zO,CACHE_SIZE_UNLIMITED:tO};function JO(t,e){t.INTERNAL.registerComponent(new Ts("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},QO)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){JO(t,(e,n)=>new oI(e,n,new KO)),t.registerVersion(qO,GO)}YO(Zo);Zo.apps.length===0&&Zo.initializeApp({apiKey:"AIzaSyBiI-MHTxhqNpgJ6FMJaVTN3lcBMmL9cqU",authDomain:"tsg-slackbot.firebaseapp.com",projectId:"tsg-slackbot",storageBucket:"tsg-slackbot.appspot.com",messagingSenderId:"382537830947",appId:"1:382537830947:web:41aa27c8a7261f0fe61796",measurementId:"G-NZD98Q80NG"});const XO=Zo.apps[0],Bn=XO.firestore(),To=Bn.collection("achievements"),ZO=()=>({isInitList:null,list:[],isInitLatestAchievemnts:null,latestAchievements:[],isInitUsers:{},isInitNames:{},isInitData:{}}),e1={initList(t){t.isInitList=!0},initLatestAchievements(t){t.isInitLatestAchievemnts=!0},initData(t,e){t.isInitData[e]=!0},setUser(t,{id:e,achievements:n}){t.isInitUsers[e]=!0,t[`user_${e}`]=n},setName(t,{name:e,achievements:n}){t.isInitNames[e]=!0,t[`name_${e}`]=n}},t1={list:t=>t.list,initLatestAchievements:t=>t.latestAchievements,data:t=>t.data,getByUser:t=>e=>t.isInitList?t.list.filter(n=>n.user===e):t[`user_${e}`]||[],getByName:t=>e=>t.isInitList?t.list.filter(n=>n.name===e):t[`name_${e}`]||[]},n1={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:dn(async({bindFirestoreRef:t})=>{await t("list",To)}),async initLatestAchievements({state:t,dispatch:e,commit:n}){t.isInitLatestAchievemnts||(await e("bindLatestAchievements"),n("initLatestAchievements"))},bindLatestAchievements:dn(async({bindFirestoreRef:t})=>{await t("latestAchievements",To.orderBy("date","desc").limit(15))}),bind:dn(async({bindFirestoreRef:t,state:e,commit:n},r)=>{if(e.isInitData[r]===!0||e.isInitList===!0)return;const s=To.doc(r);await t(`data_${r}`,s),n("initData",r)}),fetchByUser:async({state:t,commit:e},n)=>{if(t.isInitUsers[n]===!0||t.isInitList===!0)return;const r=await To.where("user","==",n).get();e({type:"setUser",id:n,achievements:r.docs.map(s=>s.data())})},fetchByName:async({state:t,commit:e},n)=>{if(t.isInitNames[n]===!0||t.isInitList===!0)return;const r=await To.where("name","==",n).get();e({type:"setName",name:n,achievements:r.docs.map(s=>s.data())})}},r1=Object.freeze(Object.defineProperty({__proto__:null,actions:n1,getters:t1,mutations:e1,state:ZO},Symbol.toStringTag,{value:"Module"})),s1=Bn.collection("achievement_data"),i1=()=>({isInitList:null,list:[]}),o1={initList(t){t.isInitList=!0}},a1={list:t=>t.list,getById:t=>e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n},getByCounter:t=>e=>t.list.filter(n=>n.counter===e).sort((n,r)=>n.value-r.value),getByCategory:t=>e=>t.list.filter(n=>n.category===e).sort((n,r)=>(r.count||0)-(n.count||0))},c1={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:dn(async({bindFirestoreRef:t})=>{await t("list",s1)})},l1=Object.freeze(Object.defineProperty({__proto__:null,actions:c1,getters:a1,mutations:o1,state:i1},Symbol.toStringTag,{value:"Module"})),u1=Bn.collection("achievement_stats_by_category"),h1=()=>({isInitList:null,list:[]}),f1={initList(t){t.isInitList=!0}},d1={list:t=>t.list,getById:t=>e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n}},p1={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:dn(async({bindFirestoreRef:t})=>{await t("list",u1)})},m1=Object.freeze(Object.defineProperty({__proto__:null,actions:p1,getters:d1,mutations:f1,state:h1},Symbol.toStringTag,{value:"Module"})),g1=Bn.collection("achievement_stats_by_difficulty"),_1=()=>({isInitList:null,list:[]}),y1={initList(t){t.isInitList=!0}},v1={list:t=>t.list,getById:t=>e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n}},E1={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:dn(async({bindFirestoreRef:t})=>{await t("list",g1)})},w1=Object.freeze(Object.defineProperty({__proto__:null,actions:E1,getters:v1,mutations:y1,state:_1},Symbol.toStringTag,{value:"Module"})),T1=Bn.collection("achievement_stats_by_month"),I1=()=>({isInitList:null,list:[]}),b1={initList(t){t.isInitList=!0}},A1={list:t=>t.list,getById:t=>e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n}},R1={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:dn(async({bindFirestoreRef:t})=>{await t("list",T1)})},S1=Object.freeze(Object.defineProperty({__proto__:null,actions:R1,getters:A1,mutations:b1,state:I1},Symbol.toStringTag,{value:"Module"})),P1=Bn.collection("slow_quiz_games"),C1=()=>({isInitList:null,list:[]}),x1={initList(t){t.isInitList=!0}},V1={list:t=>t.list,getById:t=>e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n}},D1={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:dn(async({bindFirestoreRef:t,commit:e})=>{await t("list",P1.where("status","==","finished").orderBy("finishDate","desc")),e("initList")})},N1=Object.freeze(Object.defineProperty({__proto__:null,actions:D1,getters:V1,mutations:x1,state:C1},Symbol.toStringTag,{value:"Module"})),F_=Bn.collection("users");Bn.collection("achievements");const k1=()=>({isInitList:null,list:[],isInitData:{},data:{}}),O1={initList(t){t.isInitList=!0},initData(t,e){t.isInitData[e]=!0}},M1={list:t=>t.list,data:t=>t.data,getById:t=>e=>{if(t[`data_${e}`]!==void 0)return t[`data_${e}`];const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n}},L1={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:dn(async({bindFirestoreRef:t,commit:e})=>{await t("list",F_),e("initList")}),bindById:dn(async({bindFirestoreRef:t,state:e,dispatch:n,getters:r,commit:s},i)=>{const o=r.getById(i);if(o!==void 0&&e.isInitData[o.id]===!0)return;const a=await F_.doc(i).get();if(a.exists){const c=t(`data_${a.id}`,a.ref);s("initData",a.id),await Promise.all([c,n("achievements/fetchByUser",a.id,{root:!0})])}})},F1=Object.freeze(Object.defineProperty({__proto__:null,actions:L1,getters:M1,mutations:O1,state:k1},Symbol.toStringTag,{value:"Module"})),B1=Bn.collection("oneiromancy_messages"),U1=Bn.collection("oneiromancy_criteria"),j1=()=>({isInitOneiromancyMessages:null,oneiromancyMessages:[],isInitOneiromancyCriteria:null,oneiromancyCriteria:[]}),$1={initOneiromancyMessages(t){t.isInitOneiromancyMessages=!0},initOneiromancyCriteria(t){t.isInitOneiromancyCriteria=!0}},q1={oneiromancyMessages:t=>t.oneiromancyMessages,oneiromancyCriteria:t=>t.oneiromancyCriteria},G1={async initOneiromancyMessages({state:t,dispatch:e,commit:n}){t.isInitOneiromancyMessages!==!0&&(await e("bindOneiromancyMessages"),n("initOneiromancyMessages"))},bindOneiromancyMessages:dn(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyMessages",B1.orderBy("message.ts","desc")),e("initOneiromancyMessages")}),async initOneiromancyCriteria({state:t,dispatch:e,commit:n}){t.isInitOneiromancyCriteria!==!0&&(await e("bindOneiromancyCriteria"),n("initOneiromancyCriteria"))},bindOneiromancyCriteria:dn(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyCriteria",U1.orderBy("point","desc")),e("initOneiromancyCriteria")})},H1=Object.freeze(Object.defineProperty({__proto__:null,actions:G1,getters:q1,mutations:$1,state:j1},Symbol.toStringTag,{value:"Module"})),K1=()=>({isUnauthorized:!1,isInitUsers:!1,isInitTopicMessages:!1,users:[],userMap:new Map,topicMessages:[],topicMessagesMap:new Map}),z1={setUsers(t,e){t.isInitUsers=!0,t.users=e,t.userMap=new Map(e.map(n=>[n.id,n]))},setTopicMessages(t,e){t.isInitTopicMessages=!0,t.topicMessages=e.map(n=>({...n,randomSortKey:Math.random()})),t.topicMessagesMap=new Map(t.topicMessages.map(n=>[n.message.ts,n]))},addTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!0,n.likes=n.likes.concat([null]))},removeTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!1,n.likes=n.likes.slice(1))},isUnauthorized(t){t.isUnauthorized=!0}},W1={users:t=>t.users,getUser:t=>e=>{const n=t.userMap.get(e);return n===void 0?{id:e}:n},topicMessages:t=>t.topicMessages,getTopicMessage:t=>e=>{const n=t.topicMessagesMap.get(e);return n===void 0?{ts:e}:n}},Q1={async initUsers({state:t,commit:e}){var n;if(!t.isInitUsers)try{const r=await this.$axios.$get("https://slackbot-api.tsg.ne.jp/slack/users",{withCredentials:!0,headers:{"Access-Control-Allow-Origin":"*"}});e("setUsers",r)}catch(r){if((r==null?void 0:r.message)==="Network Error"||((n=r==null?void 0:r.response)==null?void 0:n.status)===401)e("isUnauthorized");else throw r}},async initTopicMessages({state:t,commit:e}){var n;if(!t.isInitTopicMessages)try{const r=await this.$axios.$get("https://slackbot-api.tsg.ne.jp/topic/topics",{withCredentials:!0,headers:{"Access-Control-Allow-Origin":"*"}});e("setTopicMessages",r)}catch(r){if((r==null?void 0:r.message)==="Network Error"||((n=r==null?void 0:r.response)==null?void 0:n.status)===401)e("isUnauthorized");else throw r}},async likeTopicMessage({commit:t},{ts:e}){var n;try{await this.$axios.$put(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,"",{withCredentials:!0,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"text/plain"}}),t("addTopicMessageLike",e)}catch(r){if((r==null?void 0:r.message)==="Network Error"||((n=r==null?void 0:r.response)==null?void 0:n.status)===401)t("isUnauthorized");else throw r}},async unlikeTopicMessage({commit:t},{ts:e}){var n;try{await this.$axios.$delete(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,{withCredentials:!0,headers:{"Access-Control-Allow-Origin":"*"}}),t("removeTopicMessageLike",e)}catch(r){if((r==null?void 0:r.message)==="Network Error"||((n=r==null?void 0:r.response)==null?void 0:n.status)===401)t("isUnauthorized");else throw r}}},J1=Object.freeze(Object.defineProperty({__proto__:null,actions:Q1,getters:W1,mutations:z1,state:K1},Symbol.toStringTag,{value:"Module"})),Y1=Fn(t=>{const e=qC({mutations:{...ex},modules:{achievements:r1,achievementData:l1,achievementStatsByCategory:m1,achievementStatsByDifficulty:w1,achievementStatsByMonth:S1,slowQuizGames:N1,users:F1,oneiromancies:H1,slackInfos:J1}});return t.vueApp.use(e),{provide:{store:e}}}),X1=[B0,j0,vC,EC,wC,TC,bC,AC,RC,Y1],Z1=Gr({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(t){const e=t.renderKey,n=t.route,r={};for(const s in t.route)Object.defineProperty(r,s,{get:()=>e===t.renderKey?t.route[s]:n[s],enumerable:!0});return ys(Ea,Qn(r)),()=>Qt(t.vnode,{ref:t.vnodeRef})}}),eM=Gr({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:r}){const s=st(),i=Yn(),o=Ut(Ea,null);let a;r({pageRef:i});const c=Ut(Vv,null);let u;const h=s.deferHydration();if(s.isHydrating){const f=s.hooks.hookOnce("app:error",h);gn().beforeEach(f)}return t.pageKey&&Vr(()=>t.pageKey,(f,p)=>{f!==p&&s.callHook("page:loading:start")}),()=>Qt(sE,{name:t.name,route:t.route,...e},{default:f=>{const p=nM(o,f.route,f.Component),g=o&&o.matched.length===f.route.matched.length;if(!f.Component){if(u&&!g)return u;h();return}if(u&&c&&!c.isCurrent(f.route))return u;if(p&&o&&(!c||c!=null&&c.isCurrent(o)))return g?u:null;const w=Ph(f,t.pageKey);!s.isHydrating&&!rM(o,f.route,f.Component)&&a===w&&s.callHook("page:loading:end"),a=w;const R=!!(t.transition??f.route.meta.pageTransition??dh),V=R&&tM([t.transition,f.route.meta.pageTransition,dh,{onAfterLeave:()=>{s.callHook("page:transition:finish",f.Component)}}].filter(Boolean)),N=t.keepalive??f.route.meta.keepalive??ES;return u=iE(fv,R&&V,oC(N,Qt(Rf,{suspensible:!0,onPending:()=>s.callHook("page:start",f.Component),onResolve:()=>{qi(()=>s.callHook("page:finish",f.Component).then(()=>s.callHook("page:loading:end")).finally(h))}},{default:()=>{const D=Qt(Z1,{key:w||void 0,vnode:n.default?Qt(Vt,void 0,n.default(f)):f.Component,route:f.route,renderKey:w||void 0,trackRootNodes:R,vnodeRef:i});return N&&(D.type.name=f.Component.type.name||f.Component.type.__name||"RouteProvider"),D}}))).default(),u}})}});function tM(t){const e=t.map(n=>({...n,onAfterLeave:n.onAfterLeave?Lf(n.onAfterLeave):void 0}));return Cv(...e)}function nM(t,e,n){if(!t)return!1;const r=e.matched.findIndex(s=>{var i;return((i=s.components)==null?void 0:i.default)===(n==null?void 0:n.type)});return!r||r===-1?!1:e.matched.slice(0,r).some((s,i)=>{var o,a,c;return((o=s.components)==null?void 0:o.default)!==((c=(a=t.matched[i])==null?void 0:a.components)==null?void 0:c.default)})||n&&Ph({route:e,Component:n})!==Ph({route:t,Component:n})}function rM(t,e,n){return t?e.matched.findIndex(s=>{var i;return((i=s.components)==null?void 0:i.default)===(n==null?void 0:n.type)})<e.matched.length-1:!1}const sM=Gr({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},async setup(t,e){const n=await Sr[t.name]().then(r=>r.default||r);return()=>Qt(n,t.layoutProps,e.slots)}}),iM=Gr({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup(t,e){const n=st(),r=Ut(Ea),s=r===Df()?tC():r,i=rn(()=>{let c=Ue(t.name)??s.meta.layout??"default";return c&&!(c in Sr)&&t.fallback&&(c=Ue(t.fallback)),c}),o=Yn();e.expose({layoutRef:o});const a=n.deferHydration();if(n.isHydrating){const c=n.hooks.hookOnce("app:error",a);gn().beforeEach(c)}return()=>{const c=i.value&&i.value in Sr,u=s.meta.layoutTransition??vS;return iE(fv,c&&u,{default:()=>Qt(Rf,{suspensible:!0,onResolve:()=>{qi(a)}},{default:()=>Qt(oM,{layoutProps:ov(e.attrs,{ref:o}),key:i.value||void 0,name:i.value,shouldProvide:!t.name,hasTransition:!!u},e.slots)})}).default()}}}),oM=Gr({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(t,e){const n=t.name;return t.shouldProvide&&ys(Vv,{isCurrent:r=>n===(r.meta.layout??"default")}),()=>{var r,s;return!n||typeof n=="string"&&!(n in Sr)?(s=(r=e.slots).default)==null?void 0:s.call(r):Qt(sM,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}}),aM=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},cM={};function lM(t,e){const n=eM,r=iM;return un(),Cn(r,null,{default:vf(()=>[et(n)]),_:1})}const uM=aM(cM,[["render",lM]]),hM={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error;n.stack&&n.stack.split(`
`).splice(1).map(f=>({text:f.replace("webpack:/","").replace(".vue",".js").trim(),internal:f.includes("node_modules")&&!f.includes(".cache")||f.includes("internal")||f.includes("new Promise")})).map(f=>`<span class="stack${f.internal?" internal":""}">${f.text}</span>`).join(`
`);const r=Number(n.statusCode||500),s=r===404,i=n.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=s?em(()=>En(()=>import("./Dz8BV0r5.js"),__vite__mapDeps([24,3,25,26]),import.meta.url)):em(()=>En(()=>import("./BAW5KCig.js"),__vite__mapDeps([27,25,28]),import.meta.url));return(f,p)=>(un(),Cn(Ue(h),KI(sv({statusCode:Ue(r),statusMessage:Ue(i),description:Ue(o),stack:Ue(a)})),null,16))}},fM={key:0},B_={__name:"nuxt-root",setup(t){const e=()=>null,n=st(),r=n.deferHydration();if(n.isHydrating){const c=n.hooks.hookOnce("app:error",r);gn().beforeEach(c)}const s=!1;ys(Ea,Df()),n.hooks.callHookWith(c=>c.map(u=>u()),"vue:setup");const i=Tl(),o=!1;Cy((c,u,h)=>{if(n.hooks.callHook("vue:error",c,u,h).catch(f=>console.error("[nuxt] Error in `vue:error` hook",f)),BS(c)&&(c.fatal||c.unhandled))return n.runWithContext(()=>li(c)),!1});const a=!1;return(c,u)=>(un(),Cn(Rf,{onResolve:Ue(r)},{default:vf(()=>[Ue(o)?(un(),PA("div",fM)):Ue(i)?(un(),Cn(Ue(hM),{key:1,error:Ue(i)},null,8,["error"])):Ue(a)?(un(),Cn(Ue(e),{key:2,context:Ue(a)},null,8,["context"])):Ue(s)?(un(),Cn(Wb(Ue(s)),{key:3})):(un(),Cn(Ue(uM),{key:4}))]),_:1},8,["onResolve"]))}};let U_;{let t;U_=async function(){var o,a;if(t)return t;const r=!!(((o=window.__NUXT__)==null?void 0:o.serverRendered)??((a=document.getElementById("__NUXT_DATA__"))==null?void 0:a.dataset.ssr)==="true")?fR(B_):hR(B_),s=AS({vueApp:r});async function i(c){await s.callHook("app:error",c),s.payload.error=s.payload.error||Il(c)}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)});try{await PS(s,X1)}catch(c){i(c)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(TS),await s.hooks.callHook("app:mounted",r),await qi()}catch(c){i(c)}return r},t=U_().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{SM as A,_M as B,gn as C,Gr as D,st as E,Vt as F,wf as G,Ff as H,lg as I,bM as J,Qt as K,CR as L,LS as M,wM as N,rn as O,Ea as P,Ns as Q,xf as R,wl as S,TM as T,uh as U,Cf as V,aM as _,rv as a,et as b,PA as c,iv as d,yM as e,Vr as f,Tf as g,jb as h,IM as i,Ub as j,ya as k,Eh as l,AM as m,vM as n,un as o,pl as p,gM as q,Yn as r,Cn as s,JI as t,ml as u,RM as v,vf as w,pM as x,EM as y,mM as z};
