import{g as m,_ as C}from"./C0VE3x8l.js";import{g as S,_ as w}from"./d3txBZ36.js";import{_ as U}from"./B1q6798D.js";import{_ as B,m as I,c as a,n as g,b as l,a as e,d as u,t as n,F as k,q as x,P as d,o as c,w as D,p as $}from"./DzcFNF6r.js";import{a as L}from"./C4iS2aBk.js";import{i as N}from"./CwXImgea.js";function F(t,s){for(var r,_=-1,h=t.length;++_<h;){var o=s(t[_]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var R=F,V=R,z=N;function A(t){return t&&t.length?V(t,z):0}var P=A;const j=L(P),E={data(){return{isLoading:!0}},computed:{...I({achievementData:t=>t.achievementData.list}),user(){return this.$store.getters["users/getById"]((this._.provides[d]||this.$route).params.id)},slackUser(){return this.$store.getters["slackInfos/getUser"]((this._.provides[d]||this.$route).params.id)},achievementCount(){return j(Object.values(this.user.counts||{}))},name(){return`@${m(this.slackUser,["profile","display_name"],!1)||m(this.slackUser,["real_name"],!1)||"匿名ユーザー"}`},achievements(){return this.$store.getters["achievements/getByUser"]((this._.provides[d]||this.$route).params.id).map(({name:t,date:s})=>({name:t,date:s,datum:this.$store.getters["achievementData/getById"](t)})).sort((t,s)=>t.datum.difficulty&&s.datum.difficulty?this.getDifficultyRank(s.datum.difficulty)-this.getDifficultyRank(t.datum.difficulty):0)},lockedAchievements(){const t=new Set(this.$store.getters["achievements/getByUser"]((this._.provides[d]||this.$route).params.id).map(({name:s})=>s));return this.achievementData.filter(({id:s})=>!t.has(s)).sort((s,r)=>s.category&&r.category?s.category.localeCompare(r.category):0)},icon(){return m(this.slackUser,["profile","image_72"],"/images/anonymous-icon_72.png")},icon2x(){return m(this.slackUser,["profile","image_192"],"/images/anonymous-icon_192.png")}},async fetch({store:t}){},mounted(){Promise.all([this.$store.dispatch("achievementData/initList"),this.$store.dispatch("slackInfos/initUsers"),this.$store.dispatch("users/bindById",(this._.provides[d]||this.$route).params.id),this.$store.dispatch("users/initList")]).then(()=>{this.isLoading=!1})},methods:{getCategoryColor(t){return S(t)},getDifficultyRank(t){return{baby:1,easy:2,medium:3,hard:4,professional:5}[t]||0},getDateString(t){return new Date(t.seconds*1e3).toISOString().split("T")[0]},getDateStringJa(t){const s=new Date(t.seconds*1e3);return`${s.getFullYear()}年${s.getMonth()+1}月${s.getDate()}日`}},head(){return{title:`${this.name}の解除した実績一覧 - achievement-viewer`}}},J={class:"container"},O={key:0,class:"progress is-small is-primary",max:"100"},T={class:"columns has-text-centered"},q={class:"column is-narrow"},M=["src","srcset"],Y={class:"column"},G={class:"title user-title"},H={class:"columns is-multiline"},K={class:"card-image"},Q={class:"card-content"},W={class:"content"},X={class:"title"},Z={key:0,class:"columns"},ee={class:"column achievements-progress"},se=["value","max"],te={class:"column is-narrow"},ie={class:"subtitle is-6 achievements-count"},oe={class:"has-text-right is-size-7"},ne=["datetime"],re={class:"columns is-multiline"},ae={class:"card-image"},ce={class:"card-content"},le={class:"content"},ue={class:"title"},de={key:0,class:"columns"},me={class:"column achievements-progress"},_e=["value","max"],he={class:"column is-narrow"},ge={class:"subtitle is-6 achievements-count"};function ve(t,s,r,_,h,o){const b=C,v=w,f=U;return c(),a("div",J,[h.isLoading?(c(),a("progress",O,"15%")):g("",!0),l(b),e("div",T,[e("div",q,[e("img",{src:o.icon,srcset:`${o.icon} 1x, ${o.icon2x} 2x`},null,8,M)]),e("div",Y,[e("p",G,[u(n(o.name)+"の",1),s[0]||(s[0]=e("wbr",null,null,-1)),s[1]||(s[1]=u("解除した",-1)),s[2]||(s[2]=e("wbr",null,null,-1)),s[3]||(s[3]=u("実績一覧",-1))])])]),e("div",H,[(c(!0),a(k,null,x(o.achievements,({datum:i,name:p,date:y})=>(c(),a("div",{key:p,class:"column is-one-third"},[l(f,{class:"card",to:`/achievements/${p}`,style:{display:"block"}},{default:D(()=>[e("div",K,[e("div",{class:"image achievements-color",style:$({backgroundColor:o.getCategoryColor(i.category)})},null,4)]),e("div",Q,[e("div",W,[e("p",X,[u(n(i.title)+" ",1),l(v,{difficulty:i.difficulty},null,8,["difficulty"])]),i.counter?(c(),a("div",Z,[e("div",ee,[e("progress",{class:"progress is-success",value:o.user[i.counter]||0,max:i.value},null,8,se)]),e("div",te,[e("p",ie,n(i.value)+"/"+n(i.value),1)])])):g("",!0),e("p",null,n(i.condition),1),e("p",oe,[e("time",{datetime:o.getDateString(y)},n(o.getDateStringJa(y)),9,ne)])])])]),_:2},1032,["to"])]))),128))]),s[5]||(s[5]=e("p",{class:"title"},"未解除の実績一覧",-1)),e("div",re,[(c(!0),a(k,null,x(o.lockedAchievements,i=>(c(),a("div",{key:i.id,class:"column is-one-third"},[l(f,{class:"card",to:`/achievements/${i.id}`,style:{display:"block"}},{default:D(()=>[e("div",ae,[e("div",{class:"image achievements-color",style:$({backgroundColor:o.getCategoryColor(i.category)})},null,4)]),e("div",ce,[e("div",le,[e("p",ue,[s[4]||(s[4]=u(" ?????? ",-1)),l(v,{difficulty:i.difficulty},null,8,["difficulty"])]),i.counter?(c(),a("div",de,[e("div",me,[e("progress",{class:"progress is-gray",value:o.user[i.counter]||0,max:i.value},null,8,_e)]),e("div",he,[e("p",ge,n(o.user[i.counter]||0)+"/"+n(i.value),1)])])):g("",!0),e("p",null,n(i.condition),1)])])]),_:2},1032,["to"])]))),128))])])}const $e=B(E,[["render",ve]]);export{$e as default};
