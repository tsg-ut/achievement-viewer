const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DAn3EIoc.js","./McCNbMYU.js","./Cpj98o6Y.js","./B_Op9W0q.js","./DpGh73Dr.js","./index.4iF0p84D.css","./D-dauVRy.js","./DJzhV2_c.js","./CdjJNdvM.js","./topic.rIgFsbOT.css","./Cv_W8zgS.js","./index.BZVQuXzV.css","./4vu-Dirv.js","./slow-quiz.XCwighz9.css","./BomPc1-r.js","./Bdbiv029.js","./AchievementCard.DIPBvmTw.css","./jeAH7R9F.js","./oneiromancy.D5JIcBwv.css","./Df5PLafO.js","./uVbVw2JP.js","./index.B09IHu_1.css","./BY632LTP.js","./default.5rRBYkF3.css","./DPcFB33X.js","./Ca6zeCsd.js","./error-404.BLrjNXsr.css","./B49BFVwi.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zf(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Be={},Si=[],jn=()=>{},Xy=()=>!1,Wa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Wf=t=>t.startsWith("onUpdate:"),yt=Object.assign,Qf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hA=Object.prototype.hasOwnProperty,Ve=(t,e)=>hA.call(t,e),he=Array.isArray,Pi=t=>po(t)==="[object Map]",Zy=t=>po(t)==="[object Set]",Fm=t=>po(t)==="[object Date]",fA=t=>po(t)==="[object RegExp]",de=t=>typeof t=="function",Qe=t=>typeof t=="string",Rn=t=>typeof t=="symbol",Oe=t=>t!==null&&typeof t=="object",ev=t=>(Oe(t)||de(t))&&de(t.then)&&de(t.catch),tv=Object.prototype.toString,po=t=>tv.call(t),dA=t=>po(t).slice(8,-1),nv=t=>po(t)==="[object Object]",Jf=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ci=zf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gu=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},pA=/-\w/g,_n=Gu(t=>t.replace(pA,e=>e.slice(1).toUpperCase())),mA=/\B([A-Z])/g,Ys=Gu(t=>t.replace(mA,"-$1").toLowerCase()),Ku=Gu(t=>t.charAt(0).toUpperCase()+t.slice(1)),Wl=Gu(t=>t?`on${Ku(t)}`:""),Br=(t,e)=>!Object.is(t,e),xi=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},rv=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},gA=t=>{const e=parseFloat(t);return isNaN(e)?t:e},sv=t=>{const e=Qe(t)?Number(t):NaN;return isNaN(e)?t:e};let Bm;const zu=()=>Bm||(Bm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Wu(t){if(he(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Qe(r)?EA(r):Wu(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Qe(t)||Oe(t))return t}const _A=/;(?![^(]*\))/g,yA=/:([^]+)/,vA=/\/\*[^]*?\*\//g;function EA(t){const e={};return t.replace(vA,"").split(_A).forEach(n=>{if(n){const r=n.split(yA);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Qu(t){let e="";if(Qe(t))e=t;else if(he(t))for(let n=0;n<t.length;n++){const r=Qu(t[n]);r&&(e+=r+" ")}else if(Oe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function wA(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Qe(e)&&(t.class=Qu(e)),n&&(t.style=Wu(n)),t}const TA="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",IA=zf(TA);function iv(t){return!!t||t===""}function bA(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=nu(t[r],e[r]);return n}function nu(t,e){if(t===e)return!0;let n=Fm(t),r=Fm(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Rn(t),r=Rn(e),n||r)return t===e;if(n=he(t),r=he(e),n||r)return n&&r?bA(t,e):!1;if(n=Oe(t),r=Oe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!nu(t[o],e[o]))return!1}}return String(t)===String(e)}const ov=t=>!!(t&&t.__v_isRef===!0),AA=t=>Qe(t)?t:t==null?"":he(t)||Oe(t)&&(t.toString===tv||!de(t.toString))?ov(t)?AA(t.value):JSON.stringify(t,av,2):String(t),av=(t,e)=>ov(e)?av(t,e.value):Pi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Ql(r,i)+" =>"]=s,n),{})}:Zy(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ql(n))}:Rn(e)?Ql(e):Oe(e)&&!he(e)&&!nv(e)?String(e):e,Ql=(t,e="")=>{var n;return Rn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zt;class cv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=zt,!e&&zt&&(this.index=(zt.scopes||(zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=zt;try{return zt=this,e()}finally{zt=n}}}on(){++this._on===1&&(this.prevScope=zt,zt=this)}off(){this._on>0&&--this._on===0&&(zt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function uv(t){return new cv(t)}function lv(){return zt}let Ue;const Jl=new WeakSet;class hv{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,zt&&zt.active&&zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Jl.has(this)&&(Jl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||dv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Um(this),pv(this);const e=Ue,n=In;Ue=this,In=!0;try{return this.fn()}finally{mv(this),Ue=e,In=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Zf(e);this.deps=this.depsTail=void 0,Um(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Jl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nh(this)&&this.run()}get dirty(){return Nh(this)}}let fv=0,ia,oa;function dv(t,e=!1){if(t.flags|=8,e){t.next=oa,oa=t;return}t.next=ia,ia=t}function Yf(){fv++}function Xf(){if(--fv>0)return;if(oa){let e=oa;for(oa=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ia;){let e=ia;for(ia=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function pv(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function mv(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Zf(r),RA(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Nh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(gv(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function gv(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===wa)||(t.globalVersion=wa,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Nh(t))))return;t.flags|=2;const e=t.dep,n=Ue,r=In;Ue=t,In=!0;try{pv(t);const s=t.fn(t._value);(e.version===0||Br(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ue=n,In=r,mv(t),t.flags&=-3}}function Zf(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Zf(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function RA(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let In=!0;const _v=[];function ar(){_v.push(In),In=!1}function cr(){const t=_v.pop();In=t===void 0?!0:t}function Um(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ue;Ue=void 0;try{e()}finally{Ue=n}}}let wa=0;class SA{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ed{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ue||!In||Ue===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ue)n=this.activeLink=new SA(Ue,this),Ue.deps?(n.prevDep=Ue.depsTail,Ue.depsTail.nextDep=n,Ue.depsTail=n):Ue.deps=Ue.depsTail=n,yv(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ue.depsTail,n.nextDep=void 0,Ue.depsTail.nextDep=n,Ue.depsTail=n,Ue.deps===n&&(Ue.deps=r)}return n}trigger(e){this.version++,wa++,this.notify(e)}notify(e){Yf();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Xf()}}}function yv(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)yv(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ru=new WeakMap,Ns=Symbol(""),kh=Symbol(""),Ta=Symbol("");function Vt(t,e,n){if(In&&Ue){let r=ru.get(t);r||ru.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new ed),s.map=r,s.key=n),s.track()}}function nr(t,e,n,r,s,i){const o=ru.get(t);if(!o){wa++;return}const a=c=>{c&&c.trigger()};if(Yf(),e==="clear")o.forEach(a);else{const c=he(t),l=c&&Jf(n);if(c&&n==="length"){const h=Number(r);o.forEach((f,p)=>{(p==="length"||p===Ta||!Rn(p)&&p>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(Ta)),e){case"add":c?l&&a(o.get("length")):(a(o.get(Ns)),Pi(t)&&a(o.get(kh)));break;case"delete":c||(a(o.get(Ns)),Pi(t)&&a(o.get(kh)));break;case"set":Pi(t)&&a(o.get(Ns));break}}Xf()}function PA(t,e){const n=ru.get(t);return n&&n.get(e)}function ui(t){const e=Re(t);return e===t?e:(Vt(e,"iterate",Ta),pn(t)?e:e.map(Tt))}function Ju(t){return Vt(t=Re(t),"iterate",Ta),t}const CA={__proto__:null,[Symbol.iterator](){return Yl(this,Symbol.iterator,Tt)},concat(...t){return ui(this).concat(...t.map(e=>he(e)?ui(e):e))},entries(){return Yl(this,"entries",t=>(t[1]=Tt(t[1]),t))},every(t,e){return Yn(this,"every",t,e,void 0,arguments)},filter(t,e){return Yn(this,"filter",t,e,n=>n.map(Tt),arguments)},find(t,e){return Yn(this,"find",t,e,Tt,arguments)},findIndex(t,e){return Yn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Yn(this,"findLast",t,e,Tt,arguments)},findLastIndex(t,e){return Yn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Yn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Xl(this,"includes",t)},indexOf(...t){return Xl(this,"indexOf",t)},join(t){return ui(this).join(t)},lastIndexOf(...t){return Xl(this,"lastIndexOf",t)},map(t,e){return Yn(this,"map",t,e,void 0,arguments)},pop(){return jo(this,"pop")},push(...t){return jo(this,"push",t)},reduce(t,...e){return jm(this,"reduce",t,e)},reduceRight(t,...e){return jm(this,"reduceRight",t,e)},shift(){return jo(this,"shift")},some(t,e){return Yn(this,"some",t,e,void 0,arguments)},splice(...t){return jo(this,"splice",t)},toReversed(){return ui(this).toReversed()},toSorted(t){return ui(this).toSorted(t)},toSpliced(...t){return ui(this).toSpliced(...t)},unshift(...t){return jo(this,"unshift",t)},values(){return Yl(this,"values",Tt)}};function Yl(t,e,n){const r=Ju(t),s=r[e]();return r!==t&&!pn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const xA=Array.prototype;function Yn(t,e,n,r,s,i){const o=Ju(t),a=o!==t&&!pn(t),c=o[e];if(c!==xA[e]){const f=c.apply(t,i);return a?Tt(f):f}let l=n;o!==t&&(a?l=function(f,p){return n.call(this,Tt(f),p,t)}:n.length>2&&(l=function(f,p){return n.call(this,f,p,t)}));const h=c.call(o,l,r);return a&&s?s(h):h}function jm(t,e,n,r){const s=Ju(t);let i=n;return s!==t&&(pn(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,Tt(a),c,t)}),s[e](i,...r)}function Xl(t,e,n){const r=Re(t);Vt(r,"iterate",Ta);const s=r[e](...n);return(s===-1||s===!1)&&rd(n[0])?(n[0]=Re(n[0]),r[e](...n)):s}function jo(t,e,n=[]){ar(),Yf();const r=Re(t)[e].apply(t,n);return Xf(),cr(),r}const VA=zf("__proto__,__v_isRef,__isVue"),vv=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Rn));function DA(t){Rn(t)||(t=String(t));const e=Re(this);return Vt(e,"has",t),e.hasOwnProperty(t)}class Ev{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?$A:bv:i?Iv:Tv).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=he(e);if(!s){let c;if(o&&(c=CA[n]))return c;if(n==="hasOwnProperty")return DA}const a=Reflect.get(e,n,ft(e)?e:r);if((Rn(n)?vv.has(n):VA(n))||(s||Vt(e,"get",n),i))return a;if(ft(a)){const c=o&&Jf(n)?a:a.value;return s&&Oe(c)?Mh(c):c}return Oe(a)?s?Mh(a):pr(a):a}}class wv extends Ev{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const c=ur(i);if(!pn(r)&&!ur(r)&&(i=Re(i),r=Re(r)),!he(e)&&ft(i)&&!ft(r))return c||(i.value=r),!0}const o=he(e)&&Jf(n)?Number(n)<e.length:Ve(e,n),a=Reflect.set(e,n,r,ft(e)?e:s);return e===Re(s)&&(o?Br(r,i)&&nr(e,"set",n,r):nr(e,"add",n,r)),a}deleteProperty(e,n){const r=Ve(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&nr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Rn(n)||!vv.has(n))&&Vt(e,"has",n),r}ownKeys(e){return Vt(e,"iterate",he(e)?"length":Ns),Reflect.ownKeys(e)}}class NA extends Ev{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const kA=new wv,OA=new NA,MA=new wv(!0);const Oh=t=>t,bc=t=>Reflect.getPrototypeOf(t);function LA(t,e,n){return function(...r){const s=this.__v_raw,i=Re(s),o=Pi(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=s[t](...r),h=n?Oh:e?su:Tt;return!e&&Vt(i,"iterate",c?kh:Ns),{next(){const{value:f,done:p}=l.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Ac(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function FA(t,e){const n={get(s){const i=this.__v_raw,o=Re(i),a=Re(s);t||(Br(s,a)&&Vt(o,"get",s),Vt(o,"get",a));const{has:c}=bc(o),l=e?Oh:t?su:Tt;if(c.call(o,s))return l(i.get(s));if(c.call(o,a))return l(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Vt(Re(s),"iterate",Ns),s.size},has(s){const i=this.__v_raw,o=Re(i),a=Re(s);return t||(Br(s,a)&&Vt(o,"has",s),Vt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Re(a),l=e?Oh:t?su:Tt;return!t&&Vt(c,"iterate",Ns),a.forEach((h,f)=>s.call(i,l(h),l(f),o))}};return yt(n,t?{add:Ac("add"),set:Ac("set"),delete:Ac("delete"),clear:Ac("clear")}:{add(s){!e&&!pn(s)&&!ur(s)&&(s=Re(s));const i=Re(this);return bc(i).has.call(i,s)||(i.add(s),nr(i,"add",s,s)),this},set(s,i){!e&&!pn(i)&&!ur(i)&&(i=Re(i));const o=Re(this),{has:a,get:c}=bc(o);let l=a.call(o,s);l||(s=Re(s),l=a.call(o,s));const h=c.call(o,s);return o.set(s,i),l?Br(i,h)&&nr(o,"set",s,i):nr(o,"add",s,i),this},delete(s){const i=Re(this),{has:o,get:a}=bc(i);let c=o.call(i,s);c||(s=Re(s),c=o.call(i,s)),a&&a.call(i,s);const l=i.delete(s);return c&&nr(i,"delete",s,void 0),l},clear(){const s=Re(this),i=s.size!==0,o=s.clear();return i&&nr(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=LA(s,t,e)}),n}function td(t,e){const n=FA(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ve(n,s)&&s in r?n:r,s,i)}const BA={get:td(!1,!1)},UA={get:td(!1,!0)},jA={get:td(!0,!1)};const Tv=new WeakMap,Iv=new WeakMap,bv=new WeakMap,$A=new WeakMap;function qA(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function HA(t){return t.__v_skip||!Object.isExtensible(t)?0:qA(dA(t))}function pr(t){return ur(t)?t:nd(t,!1,kA,BA,Tv)}function Fn(t){return nd(t,!1,MA,UA,Iv)}function Mh(t){return nd(t,!0,OA,jA,bv)}function nd(t,e,n,r,s){if(!Oe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=HA(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function ks(t){return ur(t)?ks(t.__v_raw):!!(t&&t.__v_isReactive)}function ur(t){return!!(t&&t.__v_isReadonly)}function pn(t){return!!(t&&t.__v_isShallow)}function rd(t){return t?!!t.__v_raw:!1}function Re(t){const e=t&&t.__v_raw;return e?Re(e):t}function GA(t){return!Ve(t,"__v_skip")&&Object.isExtensible(t)&&rv(t,"__v_skip",!0),t}const Tt=t=>Oe(t)?pr(t):t,su=t=>Oe(t)?Mh(t):t;function ft(t){return t?t.__v_isRef===!0:!1}function ir(t){return Av(t,!1)}function Li(t){return Av(t,!0)}function Av(t,e){return ft(t)?t:new KA(t,e)}class KA{constructor(e,n){this.dep=new ed,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Re(e),this._value=n?e:Tt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||pn(e)||ur(e);e=r?e:Re(e),Br(e,n)&&(this._rawValue=e,this._value=r?e:Tt(e),this.dep.trigger())}}function He(t){return ft(t)?t.value:t}function zA(t){return de(t)?t():He(t)}const WA={get:(t,e,n)=>e==="__v_raw"?t:He(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return ft(s)&&!ft(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Rv(t){return ks(t)?t:new Proxy(t,WA)}class QA{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return PA(Re(this._object),this._key)}}class JA{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function YA(t,e,n){return ft(t)?t:de(t)?new JA(t):Oe(t)&&arguments.length>1?XA(t,e,n):ir(t)}function XA(t,e,n){const r=t[e];return ft(r)?r:new QA(t,e,n)}class ZA{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ed(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=wa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ue!==this)return dv(this,!0),!0}get value(){const e=this.dep.track();return gv(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function eR(t,e,n=!1){let r,s;return de(t)?r=t:(r=t.get,s=t.set),new ZA(r,s,n)}const Rc={},iu=new WeakMap;let vs;function tR(t,e=!1,n=vs){if(n){let r=iu.get(n);r||iu.set(n,r=[]),r.push(t)}}function nR(t,e,n=Be){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,l=x=>s?x:pn(x)||s===!1||s===0?rr(x,1):rr(x);let h,f,p,m,y=!1,E=!1;if(ft(t)?(f=()=>t.value,y=pn(t)):ks(t)?(f=()=>l(t),y=!0):he(t)?(E=!0,y=t.some(x=>ks(x)||pn(x)),f=()=>t.map(x=>{if(ft(x))return x.value;if(ks(x))return l(x);if(de(x))return c?c(x,2):x()})):de(t)?e?f=c?()=>c(t,2):t:f=()=>{if(p){ar();try{p()}finally{cr()}}const x=vs;vs=h;try{return c?c(t,3,[m]):t(m)}finally{vs=x}}:f=jn,e&&s){const x=f,k=s===!0?1/0:s;f=()=>rr(x(),k)}const C=lv(),N=()=>{h.stop(),C&&C.active&&Qf(C.effects,h)};if(i&&e){const x=e;e=(...k)=>{x(...k),N()}}let D=E?new Array(t.length).fill(Rc):Rc;const v=x=>{if(!(!(h.flags&1)||!h.dirty&&!x))if(e){const k=h.run();if(s||y||(E?k.some((U,b)=>Br(U,D[b])):Br(k,D))){p&&p();const U=vs;vs=h;try{const b=[k,D===Rc?void 0:E&&D[0]===Rc?[]:D,m];D=k,c?c(e,3,b):e(...b)}finally{vs=U}}}else h.run()};return a&&a(v),h=new hv(f),h.scheduler=o?()=>o(v,!1):v,m=x=>tR(x,!1,h),p=h.onStop=()=>{const x=iu.get(h);if(x){if(c)c(x,4);else for(const k of x)k();iu.delete(h)}},e?r?v(!0):D=h.run():o?o(v.bind(null,!0),!0):h.run(),N.pause=h.pause.bind(h),N.resume=h.resume.bind(h),N.stop=N,N}function rr(t,e=1/0,n){if(e<=0||!Oe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,ft(t))rr(t.value,e,n);else if(he(t))for(let r=0;r<t.length;r++)rr(t[r],e,n);else if(Zy(t)||Pi(t))t.forEach(r=>{rr(r,e,n)});else if(nv(t)){for(const r in t)rr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&rr(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qa(t,e,n,r){try{return r?t(...r):t()}catch(s){mo(s,e,n)}}function Sn(t,e,n,r){if(de(t)){const s=Qa(t,e,n,r);return s&&ev(s)&&s.catch(i=>{mo(i,e,n)}),s}if(he(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Sn(t[i],e,n,r));return s}}function mo(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Be;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,c,l)===!1)return}a=a.parent}if(i){ar(),Qa(i,null,10,[t,c,l]),cr();return}}rR(t,n,s,r,o)}function rR(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const qt=[];let Nn=-1;const Vi=[];let Dr=null,vi=0;const Sv=Promise.resolve();let ou=null;function Fi(t){const e=ou||Sv;return t?e.then(this?t.bind(this):t):e}function sR(t){let e=Nn+1,n=qt.length;for(;e<n;){const r=e+n>>>1,s=qt[r],i=Ia(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function sd(t){if(!(t.flags&1)){const e=Ia(t),n=qt[qt.length-1];!n||!(t.flags&2)&&e>=Ia(n)?qt.push(t):qt.splice(sR(e),0,t),t.flags|=1,Pv()}}function Pv(){ou||(ou=Sv.then(Cv))}function Lh(t){he(t)?Vi.push(...t):Dr&&t.id===-1?Dr.splice(vi+1,0,t):t.flags&1||(Vi.push(t),t.flags|=1),Pv()}function $m(t,e,n=Nn+1){for(;n<qt.length;n++){const r=qt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;qt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function au(t){if(Vi.length){const e=[...new Set(Vi)].sort((n,r)=>Ia(n)-Ia(r));if(Vi.length=0,Dr){Dr.push(...e);return}for(Dr=e,vi=0;vi<Dr.length;vi++){const n=Dr[vi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Dr=null,vi=0}}const Ia=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Cv(t){try{for(Nn=0;Nn<qt.length;Nn++){const e=qt[Nn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Qa(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Nn<qt.length;Nn++){const e=qt[Nn];e&&(e.flags&=-2)}Nn=-1,qt.length=0,au(),ou=null,(qt.length||Vi.length)&&Cv()}}let At=null,xv=null;function cu(t){const e=At;return At=t,xv=t&&t.type.__scopeId||null,e}function id(t,e=At,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&du(-1);const i=cu(e);let o;try{o=t(...s)}finally{cu(i),r._d&&du(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function KL(t,e){if(At===null)return t;const n=el(At),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=Be]=e[s];i&&(de(i)&&(i={mounted:i,updated:i}),i.deep&&rr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function kn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(ar(),Sn(c,n,8,[t.el,a,t,e]),cr())}}const iR=Symbol("_vte"),Vv=t=>t.__isTeleport,tr=Symbol("_leaveCb"),Sc=Symbol("_enterCb");function oR(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ad(()=>{t.isMounted=!0}),Ya(()=>{t.isUnmounting=!0}),t}const ln=[Function,Array],Dv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ln,onEnter:ln,onAfterEnter:ln,onEnterCancelled:ln,onBeforeLeave:ln,onLeave:ln,onAfterLeave:ln,onLeaveCancelled:ln,onBeforeAppear:ln,onAppear:ln,onAfterAppear:ln,onAppearCancelled:ln},Nv=t=>{const e=t.subTree;return e.component?Nv(e.component):e},aR={name:"BaseTransition",props:Dv,setup(t,{slots:e}){const n=go(),r=oR();return()=>{const s=e.default&&Mv(e.default(),!0);if(!s||!s.length)return;const i=kv(s),o=Re(t),{mode:a}=o;if(r.isLeaving)return Zl(i);const c=qm(i);if(!c)return Zl(i);let l=Fh(c,o,r,n,f=>l=f);c.type!==it&&Bi(c,l);let h=n.subTree&&qm(n.subTree);if(h&&h.type!==it&&!Tn(h,c)&&Nv(n).type!==it){let f=Fh(h,o,r,n);if(Bi(h,f),a==="out-in"&&c.type!==it)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},Zl(i);a==="in-out"&&c.type!==it?f.delayLeave=(p,m,y)=>{const E=Ov(r,h);E[String(h.key)]=h,p[tr]=()=>{m(),p[tr]=void 0,delete l.delayedLeave,h=void 0},l.delayedLeave=()=>{y(),delete l.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function kv(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==it){e=n;break}}return e}const cR=aR;function Ov(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Fh(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:y,onLeaveCancelled:E,onBeforeAppear:C,onAppear:N,onAfterAppear:D,onAppearCancelled:v}=e,x=String(t.key),k=Ov(n,t),U=(w,A)=>{w&&Sn(w,r,9,A)},b=(w,A)=>{const P=A[1];U(w,A),he(w)?w.every(S=>S.length<=1)&&P():w.length<=1&&P()},T={mode:o,persisted:a,beforeEnter(w){let A=c;if(!n.isMounted)if(i)A=C||c;else return;w[tr]&&w[tr](!0);const P=k[x];P&&Tn(t,P)&&P.el[tr]&&P.el[tr](),U(A,[w])},enter(w){let A=l,P=h,S=f;if(!n.isMounted)if(i)A=N||l,P=D||h,S=v||f;else return;let I=!1;const fe=w[Sc]=Ee=>{I||(I=!0,Ee?U(S,[w]):U(P,[w]),T.delayedLeave&&T.delayedLeave(),w[Sc]=void 0)};A?b(A,[w,fe]):fe()},leave(w,A){const P=String(t.key);if(w[Sc]&&w[Sc](!0),n.isUnmounting)return A();U(p,[w]);let S=!1;const I=w[tr]=fe=>{S||(S=!0,A(),fe?U(E,[w]):U(y,[w]),w[tr]=void 0,k[P]===t&&delete k[P])};k[P]=t,m?b(m,[w,I]):I()},clone(w){const A=Fh(w,e,n,r,s);return s&&s(A),A}};return T}function Zl(t){if(Ja(t))return t=lr(t),t.children=null,t}function qm(t){if(!Ja(t))return Vv(t.type)&&t.children?kv(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&de(n.default))return n.default()}}function Bi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Bi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Mv(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Dt?(o.patchFlag&128&&s++,r=r.concat(Mv(o.children,e,a))):(e||o.type!==it)&&r.push(a!=null?lr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function rs(t,e){return de(t)?yt({name:t.name},e,{setup:t}):t}function od(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const uu=new WeakMap;function Di(t,e,n,r,s=!1){if(he(t)){t.forEach((y,E)=>Di(y,e&&(he(e)?e[E]:e),n,r,s));return}if(Ur(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Di(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?el(r.component):r.el,o=s?null:i,{i:a,r:c}=t,l=e&&e.r,h=a.refs===Be?a.refs={}:a.refs,f=a.setupState,p=Re(f),m=f===Be?Xy:y=>Ve(p,y);if(l!=null&&l!==c){if(Hm(e),Qe(l))h[l]=null,m(l)&&(f[l]=null);else if(ft(l)){l.value=null;const y=e;y.k&&(h[y.k]=null)}}if(de(c))Qa(c,a,12,[o,h]);else{const y=Qe(c),E=ft(c);if(y||E){const C=()=>{if(t.f){const N=y?m(c)?f[c]:h[c]:c.value;if(s)he(N)&&Qf(N,i);else if(he(N))N.includes(i)||N.push(i);else if(y)h[c]=[i],m(c)&&(f[c]=h[c]);else{const D=[i];c.value=D,t.k&&(h[t.k]=D)}}else y?(h[c]=o,m(c)&&(f[c]=o)):E&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const N=()=>{C(),uu.delete(t)};N.id=-1,uu.set(t,N),Et(N,n)}else Hm(t),C()}}}function Hm(t){const e=uu.get(t);e&&(e.flags|=8,uu.delete(t))}let Gm=!1;const li=()=>{Gm||(console.error("Hydration completed but contains mismatches."),Gm=!0)},uR=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",lR=t=>t.namespaceURI.includes("MathML"),Pc=t=>{if(t.nodeType===1){if(uR(t))return"svg";if(lR(t))return"mathml"}},Ri=t=>t.nodeType===8;function hR(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:c,createComment:l}}=t,h=(v,x)=>{if(!x.hasChildNodes()){n(null,v,x),au(),x._vnode=v;return}f(x.firstChild,v,null,null,null),au(),x._vnode=v},f=(v,x,k,U,b,T=!1)=>{T=T||!!x.dynamicChildren;const w=Ri(v)&&v.data==="[",A=()=>E(v,x,k,U,b,w),{type:P,ref:S,shapeFlag:I,patchFlag:fe}=x;let Ee=v.nodeType;x.el=v,fe===-2&&(T=!1,x.dynamicChildren=null);let ie=null;switch(P){case Ms:Ee!==3?x.children===""?(c(x.el=s(""),o(v),v),ie=v):ie=A():(v.data!==x.children&&(li(),v.data=x.children),ie=i(v));break;case it:D(v)?(ie=i(v),N(x.el=v.content.firstChild,v,k)):Ee!==8||w?ie=A():ie=i(v);break;case Uc:if(w&&(v=i(v),Ee=v.nodeType),Ee===1||Ee===3){ie=v;const ge=!x.children.length;for(let se=0;se<x.staticCount;se++)ge&&(x.children+=ie.nodeType===1?ie.outerHTML:ie.data),se===x.staticCount-1&&(x.anchor=ie),ie=i(ie);return w?i(ie):ie}else A();break;case Dt:w?ie=y(v,x,k,U,b,T):ie=A();break;default:if(I&1)(Ee!==1||x.type.toLowerCase()!==v.tagName.toLowerCase())&&!D(v)?ie=A():ie=p(v,x,k,U,b,T);else if(I&6){x.slotScopeIds=b;const ge=o(v);if(w?ie=C(v):Ri(v)&&v.data==="teleport start"?ie=C(v,v.data,"teleport end"):ie=i(v),e(x,ge,null,k,U,Pc(ge),T),Ur(x)&&!x.type.__asyncResolved){let se;w?(se=Xe(Dt),se.anchor=ie?ie.previousSibling:ge.lastChild):se=v.nodeType===3?_E(""):Xe("div"),se.el=v,x.component.subTree=se}}else I&64?Ee!==8?ie=A():ie=x.type.hydrate(v,x,k,U,b,T,t,m):I&128&&(ie=x.type.hydrate(v,x,k,U,Pc(o(v)),b,T,t,f))}return S!=null&&Di(S,null,U,x),ie},p=(v,x,k,U,b,T)=>{T=T||!!x.dynamicChildren;const{type:w,props:A,patchFlag:P,shapeFlag:S,dirs:I,transition:fe}=x,Ee=w==="input"||w==="option";if(Ee||P!==-1){I&&kn(x,null,k,"created");let ie=!1;if(D(v)){ie=iE(null,fe)&&k&&k.vnode.props&&k.vnode.props.appear;const se=v.content.firstChild;if(ie){const Me=se.getAttribute("class");Me&&(se.$cls=Me),fe.beforeEnter(se)}N(se,v,k),x.el=v=se}if(S&16&&!(A&&(A.innerHTML||A.textContent))){let se=m(v.firstChild,x,v,k,U,b,T);for(;se;){Cc(v,1)||li();const Me=se;se=se.nextSibling,a(Me)}}else if(S&8){let se=x.children;se[0]===`
`&&(v.tagName==="PRE"||v.tagName==="TEXTAREA")&&(se=se.slice(1)),v.textContent!==se&&(Cc(v,0)||li(),v.textContent=x.children)}if(A){if(Ee||!T||P&48){const se=v.tagName.includes("-");for(const Me in A)(Ee&&(Me.endsWith("value")||Me==="indeterminate")||Wa(Me)&&!Ci(Me)||Me[0]==="."||se)&&r(v,Me,null,A[Me],void 0,k)}else if(A.onClick)r(v,"onClick",null,A.onClick,void 0,k);else if(P&4&&ks(A.style))for(const se in A.style)A.style[se]}let ge;(ge=A&&A.onVnodeBeforeMount)&&Wt(ge,k,x),I&&kn(x,null,k,"beforeMount"),((ge=A&&A.onVnodeMounted)||I||ie)&&hE(()=>{ge&&Wt(ge,k,x),ie&&fe.enter(v),I&&kn(x,null,k,"mounted")},U)}return v.nextSibling},m=(v,x,k,U,b,T,w)=>{w=w||!!x.dynamicChildren;const A=x.children,P=A.length;for(let S=0;S<P;S++){const I=w?A[S]:A[S]=sn(A[S]),fe=I.type===Ms;v?(fe&&!w&&S+1<P&&sn(A[S+1]).type===Ms&&(c(s(v.data.slice(I.children.length)),k,i(v)),v.data=I.children),v=f(v,I,U,b,T,w)):fe&&!I.children?c(I.el=s(""),k):(Cc(k,1)||li(),n(null,I,k,null,U,b,Pc(k),T))}return v},y=(v,x,k,U,b,T)=>{const{slotScopeIds:w}=x;w&&(b=b?b.concat(w):w);const A=o(v),P=m(i(v),x,A,k,U,b,T);return P&&Ri(P)&&P.data==="]"?i(x.anchor=P):(li(),c(x.anchor=l("]"),A,P),P)},E=(v,x,k,U,b,T)=>{if(Cc(v.parentElement,1)||li(),x.el=null,T){const P=C(v);for(;;){const S=i(v);if(S&&S!==P)a(S);else break}}const w=i(v),A=o(v);return a(v),n(null,x,A,w,k,U,Pc(A),b),k&&(k.vnode.el=x.el,Zu(k,x.el)),w},C=(v,x="[",k="]")=>{let U=0;for(;v;)if(v=i(v),v&&Ri(v)&&(v.data===x&&U++,v.data===k)){if(U===0)return i(v);U--}return v},N=(v,x,k)=>{const U=x.parentNode;U&&U.replaceChild(v,x);let b=k;for(;b;)b.vnode.el===x&&(b.vnode.el=b.subTree.el=v),b=b.parent},D=v=>v.nodeType===1&&v.tagName==="TEMPLATE";return[h,f]}const Km="data-allow-mismatch",fR={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Cc(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Km);)t=t.parentElement;const n=t&&t.getAttribute(Km);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(fR[e])}}zu().requestIdleCallback;zu().cancelIdleCallback;function dR(t,e){if(Ri(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(Ri(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const Ur=t=>!!t.type.__asyncLoader;function Bh(t){de(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:c}=t;let l=null,h,f=0;const p=()=>(f++,l=null,m()),m=()=>{let y;return l||(y=l=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),c)return new Promise((C,N)=>{c(E,()=>C(p()),()=>N(E),f+1)});throw E}).then(E=>y!==l&&l?l:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),h=E,E)))};return rs({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(y,E,C){let N=!1;(E.bu||(E.bu=[])).push(()=>N=!0);const D=()=>{N||C()},v=i?()=>{const x=i(D,k=>dR(y,k));x&&(E.bum||(E.bum=[])).push(x)}:D;h?v():m().then(()=>!E.isUnmounted&&v())},get __asyncResolved(){return h},setup(){const y=It;if(od(y),h)return()=>eh(h,y);const E=v=>{l=null,mo(v,y,13,!r)};if(a&&y.suspense||ji)return m().then(v=>()=>eh(v,y)).catch(v=>(E(v),()=>r?Xe(r,{error:v}):null));const C=ir(!1),N=ir(),D=ir(!!s);return s&&setTimeout(()=>{D.value=!1},s),o!=null&&setTimeout(()=>{if(!C.value&&!N.value){const v=new Error(`Async component timed out after ${o}ms.`);E(v),N.value=v}},o),m().then(()=>{C.value=!0,y.parent&&Ja(y.parent.vnode)&&y.parent.update()}).catch(v=>{E(v),N.value=v}),()=>{if(C.value&&h)return eh(h,y);if(N.value&&r)return Xe(r,{error:N.value});if(n&&!D.value)return Xe(n)}}})}function eh(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=Xe(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const Ja=t=>t.type.__isKeepAlive,pR={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=go(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:c,m:l,um:h,o:{createElement:f}}}=r,p=f("div");r.activate=(D,v,x,k,U)=>{const b=D.component;l(D,v,x,0,a),c(b.vnode,D,v,x,b,a,k,D.slotScopeIds,U),Et(()=>{b.isDeactivated=!1,b.a&&xi(b.a);const T=D.props&&D.props.onVnodeMounted;T&&Wt(T,b.parent,D)},a)},r.deactivate=D=>{const v=D.component;hu(v.m),hu(v.a),l(D,p,null,1,a),Et(()=>{v.da&&xi(v.da);const x=D.props&&D.props.onVnodeUnmounted;x&&Wt(x,v.parent,D),v.isDeactivated=!0},a)};function m(D){th(D),h(D,n,a,!0)}function y(D){s.forEach((v,x)=>{const k=zh(v.type);k&&!D(k)&&E(x)})}function E(D){const v=s.get(D);v&&(!o||!Tn(v,o))?m(v):o&&th(o),s.delete(D),i.delete(D)}$r(()=>[t.include,t.exclude],([D,v])=>{D&&y(x=>Xo(D,x)),v&&y(x=>!Xo(v,x))},{flush:"post",deep:!0});let C=null;const N=()=>{C!=null&&(fu(n.subTree.type)?Et(()=>{s.set(C,xc(n.subTree))},n.subTree.suspense):s.set(C,xc(n.subTree)))};return ad(N),Uv(N),Ya(()=>{s.forEach(D=>{const{subTree:v,suspense:x}=n,k=xc(v);if(D.type===k.type&&D.key===k.key){th(k);const U=k.component.da;U&&Et(U,x);return}m(D)})}),()=>{if(C=null,!e.default)return o=null;const D=e.default(),v=D[0];if(D.length>1)return o=null,D;if(!Bs(v)||!(v.shapeFlag&4)&&!(v.shapeFlag&128))return o=null,v;let x=xc(v);if(x.type===it)return o=null,x;const k=x.type,U=zh(Ur(x)?x.type.__asyncResolved||{}:k),{include:b,exclude:T,max:w}=t;if(b&&(!U||!Xo(b,U))||T&&U&&Xo(T,U))return x.shapeFlag&=-257,o=x,v;const A=x.key==null?k:x.key,P=s.get(A);return x.el&&(x=lr(x),v.shapeFlag&128&&(v.ssContent=x)),C=A,P?(x.el=P.el,x.component=P.component,x.transition&&Bi(x,x.transition),x.shapeFlag|=512,i.delete(A),i.add(A)):(i.add(A),w&&i.size>parseInt(w,10)&&E(i.values().next().value)),x.shapeFlag|=256,o=x,fu(v.type)?v:x}}},mR=pR;function Xo(t,e){return he(t)?t.some(n=>Xo(n,e)):Qe(t)?t.split(",").includes(e):fA(t)?(t.lastIndex=0,t.test(e)):!1}function Lv(t,e){Bv(t,"a",e)}function Fv(t,e){Bv(t,"da",e)}function Bv(t,e,n=It){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Yu(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Ja(s.parent.vnode)&&gR(r,e,n,s),s=s.parent}}function gR(t,e,n,r){const s=Yu(e,t,r,!0);jv(()=>{Qf(r[e],s)},n)}function th(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function xc(t){return t.shapeFlag&128?t.ssContent:t}function Yu(t,e,n=It,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{ar();const a=Xa(n),c=Sn(e,n,t,o);return a(),cr(),c});return r?s.unshift(i):s.push(i),i}}const mr=t=>(e,n=It)=>{(!ji||t==="sp")&&Yu(t,(...r)=>e(...r),n)},_R=mr("bm"),ad=mr("m"),yR=mr("bu"),Uv=mr("u"),Ya=mr("bum"),jv=mr("um"),vR=mr("sp"),ER=mr("rtg"),wR=mr("rtc");function $v(t,e=It){Yu("ec",t,e)}const qv="components";function zL(t,e){return Gv(qv,t,!0,e)||t}const Hv=Symbol.for("v-ndc");function TR(t){return Qe(t)?Gv(qv,t,!1)||t:t||Hv}function Gv(t,e,n=!0,r=!1){const s=At||It;if(s){const i=s.type;{const a=zh(i,!1);if(a&&(a===e||a===_n(e)||a===Ku(_n(e))))return i}const o=zm(s[t]||i[t],e)||zm(s.appContext[t],e);return!o&&r?i:o}}function zm(t,e){return t&&(t[e]||t[_n(e)]||t[Ku(_n(e))])}function WL(t,e,n,r){let s;const i=n,o=he(t);if(o||Qe(t)){const a=o&&ks(t);let c=!1,l=!1;a&&(c=!pn(t),l=ur(t),t=Ju(t)),s=new Array(t.length);for(let h=0,f=t.length;h<f;h++)s[h]=e(c?l?su(Tt(t[h])):Tt(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(Oe(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const h=a[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}function QL(t,e,n={},r,s){if(At.ce||At.parent&&Ur(At.parent)&&At.parent.ce){const l=Object.keys(n).length>0;return fn(),Ln(Dt,null,[Xe("slot",n,r)],l?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),fn();const o=i&&Kv(i(n)),a=n.key||o&&o.key,c=Ln(Dt,{key:(a&&!Rn(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function Kv(t){return t.some(e=>Bs(e)?!(e.type===it||e.type===Dt&&!Kv(e.children)):!0)?t:null}const Uh=t=>t?vE(t)?el(t):Uh(t.parent):null,aa=yt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Uh(t.parent),$root:t=>Uh(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Wv(t),$forceUpdate:t=>t.f||(t.f=()=>{sd(t.update)}),$nextTick:t=>t.n||(t.n=Fi.bind(t.proxy)),$watch:t=>qR.bind(t)}),nh=(t,e)=>t!==Be&&!t.__isScriptSetup&&Ve(t,e),IR={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(nh(r,e))return o[e]=1,r[e];if(s!==Be&&Ve(s,e))return o[e]=2,s[e];if((l=t.propsOptions[0])&&Ve(l,e))return o[e]=3,i[e];if(n!==Be&&Ve(n,e))return o[e]=4,n[e];jh&&(o[e]=0)}}const h=aa[e];let f,p;if(h)return e==="$attrs"&&Vt(t.attrs,"get",""),h(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==Be&&Ve(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Ve(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return nh(s,e)?(s[e]=n,!0):r!==Be&&Ve(r,e)?(r[e]=n,!0):Ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},a){let c,l;return!!(n[a]||t!==Be&&a[0]!=="$"&&Ve(t,a)||nh(e,a)||(c=i[0])&&Ve(c,a)||Ve(r,a)||Ve(aa,a)||Ve(s.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ve(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Wm(t){return he(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let jh=!0;function bR(t){const e=Wv(t),n=t.proxy,r=t.ctx;jh=!1,e.beforeCreate&&Qm(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:h,beforeMount:f,mounted:p,beforeUpdate:m,updated:y,activated:E,deactivated:C,beforeDestroy:N,beforeUnmount:D,destroyed:v,unmounted:x,render:k,renderTracked:U,renderTriggered:b,errorCaptured:T,serverPrefetch:w,expose:A,inheritAttrs:P,components:S,directives:I,filters:fe}=e;if(l&&AR(l,r,null),o)for(const ge in o){const se=o[ge];de(se)&&(r[ge]=se.bind(n))}if(s){const ge=s.call(n,n);Oe(ge)&&(t.data=pr(ge))}if(jh=!0,i)for(const ge in i){const se=i[ge],Me=de(se)?se.bind(n,n):de(se.get)?se.get.bind(n,n):jn,xn=!de(se)&&de(se.set)?se.set.bind(n):jn,en=on({get:Me,set:xn});Object.defineProperty(r,ge,{enumerable:!0,configurable:!0,get:()=>en.value,set:vt=>en.value=vt})}if(a)for(const ge in a)zv(a[ge],r,n,ge);if(c){const ge=de(c)?c.call(n):c;Reflect.ownKeys(ge).forEach(se=>{jr(se,ge[se])})}h&&Qm(h,t,"c");function ie(ge,se){he(se)?se.forEach(Me=>ge(Me.bind(n))):se&&ge(se.bind(n))}if(ie(_R,f),ie(ad,p),ie(yR,m),ie(Uv,y),ie(Lv,E),ie(Fv,C),ie($v,T),ie(wR,U),ie(ER,b),ie(Ya,D),ie(jv,x),ie(vR,w),he(A))if(A.length){const ge=t.exposed||(t.exposed={});A.forEach(se=>{Object.defineProperty(ge,se,{get:()=>n[se],set:Me=>n[se]=Me,enumerable:!0})})}else t.exposed||(t.exposed={});k&&t.render===jn&&(t.render=k),P!=null&&(t.inheritAttrs=P),S&&(t.components=S),I&&(t.directives=I),w&&od(t)}function AR(t,e,n=jn){he(t)&&(t=$h(t));for(const r in t){const s=t[r];let i;Oe(s)?"default"in s?i=Ot(s.from||r,s.default,!0):i=Ot(s.from||r):i=Ot(s),ft(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Qm(t,e,n){Sn(he(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function zv(t,e,n,r){let s=r.includes(".")?cE(n,r):()=>n[r];if(Qe(t)){const i=e[t];de(i)&&$r(s,i)}else if(de(t))$r(s,t.bind(n));else if(Oe(t))if(he(t))t.forEach(i=>zv(i,e,n,r));else{const i=de(t.handler)?t.handler.bind(n):e[t.handler];de(i)&&$r(s,i,t)}}function Wv(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(l=>lu(c,l,o,!0)),lu(c,e,o)),Oe(e)&&i.set(e,c),c}function lu(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&lu(t,i,n,!0),s&&s.forEach(o=>lu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=RR[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const RR={data:Jm,props:Ym,emits:Ym,methods:Zo,computed:Zo,beforeCreate:Bt,created:Bt,beforeMount:Bt,mounted:Bt,beforeUpdate:Bt,updated:Bt,beforeDestroy:Bt,beforeUnmount:Bt,destroyed:Bt,unmounted:Bt,activated:Bt,deactivated:Bt,errorCaptured:Bt,serverPrefetch:Bt,components:Zo,directives:Zo,watch:PR,provide:Jm,inject:SR};function Jm(t,e){return e?t?function(){return yt(de(t)?t.call(this,this):t,de(e)?e.call(this,this):e)}:e:t}function SR(t,e){return Zo($h(t),$h(e))}function $h(t){if(he(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Bt(t,e){return t?[...new Set([].concat(t,e))]:e}function Zo(t,e){return t?yt(Object.create(null),t,e):e}function Ym(t,e){return t?he(t)&&he(e)?[...new Set([...t,...e])]:yt(Object.create(null),Wm(t),Wm(e??{})):e}function PR(t,e){if(!t)return e;if(!e)return t;const n=yt(Object.create(null),t);for(const r in e)n[r]=Bt(t[r],e[r]);return n}function Qv(){return{app:null,config:{isNativeTag:Xy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let CR=0;function xR(t,e){return function(r,s=null){de(r)||(r=yt({},r)),s!=null&&!Oe(s)&&(s=null);const i=Qv(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:CR++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:dS,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&de(h.install)?(o.add(h),h.install(l,...f)):de(h)&&(o.add(h),h(l,...f))),l},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),l},component(h,f){return f?(i.components[h]=f,l):i.components[h]},directive(h,f){return f?(i.directives[h]=f,l):i.directives[h]},mount(h,f,p){if(!c){const m=l._ceVNode||Xe(r,s);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(m,h):t(m,h,p),c=!0,l._container=h,h.__vue_app__=l,el(m.component)}},onUnmount(h){a.push(h)},unmount(){c&&(Sn(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(h,f){return i.provides[h]=f,l},runWithContext(h){const f=Os;Os=l;try{return h()}finally{Os=f}}};return l}}let Os=null;function jr(t,e){if(It){let n=It.provides;const r=It.parent&&It.parent.provides;r===n&&(n=It.provides=Object.create(r)),n[t]=e}}function Ot(t,e,n=!1){const r=go();if(r||Os){let s=Os?Os._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&de(e)?e.call(r&&r.proxy):e}}function cd(){return!!(go()||Os)}const Jv={},Yv=()=>Object.create(Jv),Xv=t=>Object.getPrototypeOf(t)===Jv;function VR(t,e,n,r=!1){const s={},i=Yv();t.propsDefaults=Object.create(null),Zv(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Fn(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function DR(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Re(s),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(Xu(t.emitsOptions,p))continue;const m=e[p];if(c)if(Ve(i,p))m!==i[p]&&(i[p]=m,l=!0);else{const y=_n(p);s[y]=qh(c,a,y,m,t,!1)}else m!==i[p]&&(i[p]=m,l=!0)}}}else{Zv(t,e,s,i)&&(l=!0);let h;for(const f in a)(!e||!Ve(e,f)&&((h=Ys(f))===f||!Ve(e,h)))&&(c?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=qh(c,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!Ve(e,f))&&(delete i[f],l=!0)}l&&nr(t.attrs,"set","")}function Zv(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Ci(c))continue;const l=e[c];let h;s&&Ve(s,h=_n(c))?!i||!i.includes(h)?n[h]=l:(a||(a={}))[h]=l:Xu(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=Re(n),l=a||Be;for(let h=0;h<i.length;h++){const f=i[h];n[f]=qh(s,c,f,l[f],t,!Ve(l,f))}}return o}function qh(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ve(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&de(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const h=Xa(s);r=l[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Ys(n))&&(r=!0))}return r}const NR=new WeakMap;function eE(t,e,n=!1){const r=n?NR:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!de(t)){const h=f=>{c=!0;const[p,m]=eE(f,e,!0);yt(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Oe(t)&&r.set(t,Si),Si;if(he(i))for(let h=0;h<i.length;h++){const f=_n(i[h]);Xm(f)&&(o[f]=Be)}else if(i)for(const h in i){const f=_n(h);if(Xm(f)){const p=i[h],m=o[f]=he(p)||de(p)?{type:p}:yt({},p),y=m.type;let E=!1,C=!0;if(he(y))for(let N=0;N<y.length;++N){const D=y[N],v=de(D)&&D.name;if(v==="Boolean"){E=!0;break}else v==="String"&&(C=!1)}else E=de(y)&&y.name==="Boolean";m[0]=E,m[1]=C,(E||Ve(m,"default"))&&a.push(f)}}const l=[o,a];return Oe(t)&&r.set(t,l),l}function Xm(t){return t[0]!=="$"&&!Ci(t)}const ud=t=>t==="_"||t==="_ctx"||t==="$stable",ld=t=>he(t)?t.map(sn):[sn(t)],kR=(t,e,n)=>{if(e._n)return e;const r=id((...s)=>ld(e(...s)),n);return r._c=!1,r},tE=(t,e,n)=>{const r=t._ctx;for(const s in t){if(ud(s))continue;const i=t[s];if(de(i))e[s]=kR(s,i,r);else if(i!=null){const o=ld(i);e[s]=()=>o}}},nE=(t,e)=>{const n=ld(e);t.slots.default=()=>n},rE=(t,e,n)=>{for(const r in e)(n||!ud(r))&&(t[r]=e[r])},OR=(t,e,n)=>{const r=t.slots=Yv();if(t.vnode.shapeFlag&32){const s=e._;s?(rE(r,e,n),n&&rv(r,"_",s,!0)):tE(e,r)}else e&&nE(t,e)},MR=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Be;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:rE(s,e,n):(i=!e.$stable,tE(e,s)),o=e}else e&&(nE(t,e),o={default:1});if(i)for(const a in s)!ud(a)&&o[a]==null&&delete s[a]},Et=hE;function LR(t){return sE(t)}function FR(t){return sE(t,hR)}function sE(t,e){const n=zu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:h,parentNode:f,nextSibling:p,setScopeId:m=jn,insertStaticContent:y}=t,E=(R,V,L,G=null,j=null,K=null,Q=void 0,z=null,J=!!V.dynamicChildren)=>{if(R===V)return;R&&!Tn(R,V)&&(G=$(R),vt(R,j,K,!0),R=null),V.patchFlag===-2&&(J=!1,V.dynamicChildren=null);const{type:W,ref:le,shapeFlag:te}=V;switch(W){case Ms:C(R,V,L,G);break;case it:N(R,V,L,G);break;case Uc:R==null&&D(V,L,G,Q);break;case Dt:S(R,V,L,G,j,K,Q,z,J);break;default:te&1?k(R,V,L,G,j,K,Q,z,J):te&6?I(R,V,L,G,j,K,Q,z,J):(te&64||te&128)&&W.process(R,V,L,G,j,K,Q,z,J,ue)}le!=null&&j?Di(le,R&&R.ref,K,V||R,!V):le==null&&R&&R.ref!=null&&Di(R.ref,null,K,R,!0)},C=(R,V,L,G)=>{if(R==null)r(V.el=a(V.children),L,G);else{const j=V.el=R.el;V.children!==R.children&&l(j,V.children)}},N=(R,V,L,G)=>{R==null?r(V.el=c(V.children||""),L,G):V.el=R.el},D=(R,V,L,G)=>{[R.el,R.anchor]=y(R.children,V,L,G,R.el,R.anchor)},v=({el:R,anchor:V},L,G)=>{let j;for(;R&&R!==V;)j=p(R),r(R,L,G),R=j;r(V,L,G)},x=({el:R,anchor:V})=>{let L;for(;R&&R!==V;)L=p(R),s(R),R=L;s(V)},k=(R,V,L,G,j,K,Q,z,J)=>{V.type==="svg"?Q="svg":V.type==="math"&&(Q="mathml"),R==null?U(V,L,G,j,K,Q,z,J):w(R,V,j,K,Q,z,J)},U=(R,V,L,G,j,K,Q,z)=>{let J,W;const{props:le,shapeFlag:te,transition:ae,dirs:pe}=R;if(J=R.el=o(R.type,K,le&&le.is,le),te&8?h(J,R.children):te&16&&T(R.children,J,null,G,j,rh(R,K),Q,z),pe&&kn(R,null,G,"created"),b(J,R,R.scopeId,Q,G),le){for(const Ce in le)Ce!=="value"&&!Ci(Ce)&&i(J,Ce,null,le[Ce],K,G);"value"in le&&i(J,"value",null,le.value,K),(W=le.onVnodeBeforeMount)&&Wt(W,G,R)}pe&&kn(R,null,G,"beforeMount");const we=iE(j,ae);we&&ae.beforeEnter(J),r(J,V,L),((W=le&&le.onVnodeMounted)||we||pe)&&Et(()=>{W&&Wt(W,G,R),we&&ae.enter(J),pe&&kn(R,null,G,"mounted")},j)},b=(R,V,L,G,j)=>{if(L&&m(R,L),G)for(let K=0;K<G.length;K++)m(R,G[K]);if(j){let K=j.subTree;if(V===K||fu(K.type)&&(K.ssContent===V||K.ssFallback===V)){const Q=j.vnode;b(R,Q,Q.scopeId,Q.slotScopeIds,j.parent)}}},T=(R,V,L,G,j,K,Q,z,J=0)=>{for(let W=J;W<R.length;W++){const le=R[W]=z?Nr(R[W]):sn(R[W]);E(null,le,V,L,G,j,K,Q,z)}},w=(R,V,L,G,j,K,Q)=>{const z=V.el=R.el;let{patchFlag:J,dynamicChildren:W,dirs:le}=V;J|=R.patchFlag&16;const te=R.props||Be,ae=V.props||Be;let pe;if(L&&ps(L,!1),(pe=ae.onVnodeBeforeUpdate)&&Wt(pe,L,V,R),le&&kn(V,R,L,"beforeUpdate"),L&&ps(L,!0),(te.innerHTML&&ae.innerHTML==null||te.textContent&&ae.textContent==null)&&h(z,""),W?A(R.dynamicChildren,W,z,L,G,rh(V,j),K):Q||se(R,V,z,null,L,G,rh(V,j),K,!1),J>0){if(J&16)P(z,te,ae,L,j);else if(J&2&&te.class!==ae.class&&i(z,"class",null,ae.class,j),J&4&&i(z,"style",te.style,ae.style,j),J&8){const we=V.dynamicProps;for(let Ce=0;Ce<we.length;Ce++){const Pe=we[Ce],Pt=te[Pe],ct=ae[Pe];(ct!==Pt||Pe==="value")&&i(z,Pe,Pt,ct,j,L)}}J&1&&R.children!==V.children&&h(z,V.children)}else!Q&&W==null&&P(z,te,ae,L,j);((pe=ae.onVnodeUpdated)||le)&&Et(()=>{pe&&Wt(pe,L,V,R),le&&kn(V,R,L,"updated")},G)},A=(R,V,L,G,j,K,Q)=>{for(let z=0;z<V.length;z++){const J=R[z],W=V[z],le=J.el&&(J.type===Dt||!Tn(J,W)||J.shapeFlag&198)?f(J.el):L;E(J,W,le,null,G,j,K,Q,!0)}},P=(R,V,L,G,j)=>{if(V!==L){if(V!==Be)for(const K in V)!Ci(K)&&!(K in L)&&i(R,K,V[K],null,j,G);for(const K in L){if(Ci(K))continue;const Q=L[K],z=V[K];Q!==z&&K!=="value"&&i(R,K,z,Q,j,G)}"value"in L&&i(R,"value",V.value,L.value,j)}},S=(R,V,L,G,j,K,Q,z,J)=>{const W=V.el=R?R.el:a(""),le=V.anchor=R?R.anchor:a("");let{patchFlag:te,dynamicChildren:ae,slotScopeIds:pe}=V;pe&&(z=z?z.concat(pe):pe),R==null?(r(W,L,G),r(le,L,G),T(V.children||[],L,le,j,K,Q,z,J)):te>0&&te&64&&ae&&R.dynamicChildren?(A(R.dynamicChildren,ae,L,j,K,Q,z),(V.key!=null||j&&V===j.subTree)&&oE(R,V,!0)):se(R,V,L,le,j,K,Q,z,J)},I=(R,V,L,G,j,K,Q,z,J)=>{V.slotScopeIds=z,R==null?V.shapeFlag&512?j.ctx.activate(V,L,G,Q,J):fe(V,L,G,j,K,Q,J):Ee(R,V,J)},fe=(R,V,L,G,j,K,Q)=>{const z=R.component=aS(R,G,j);if(Ja(R)&&(z.ctx.renderer=ue),cS(z,!1,Q),z.asyncDep){if(j&&j.registerDep(z,ie,Q),!R.el){const J=z.subTree=Xe(it);N(null,J,V,L),R.placeholder=J.el}}else ie(z,R,V,L,j,K,Q)},Ee=(R,V,L)=>{const G=V.component=R.component;if(JR(R,V,L))if(G.asyncDep&&!G.asyncResolved){ge(G,V,L);return}else G.next=V,G.update();else V.el=R.el,G.vnode=V},ie=(R,V,L,G,j,K,Q)=>{const z=()=>{if(R.isMounted){let{next:te,bu:ae,u:pe,parent:we,vnode:Ce}=R;{const ut=aE(R);if(ut){te&&(te.el=Ce.el,ge(R,te,Q)),ut.asyncDep.then(()=>{R.isUnmounted||z()});return}}let Pe=te,Pt;ps(R,!1),te?(te.el=Ce.el,ge(R,te,Q)):te=Ce,ae&&xi(ae),(Pt=te.props&&te.props.onVnodeBeforeUpdate)&&Wt(Pt,we,te,Ce),ps(R,!0);const ct=sh(R),Kt=R.subTree;R.subTree=ct,E(Kt,ct,f(Kt.el),$(Kt),R,j,K),te.el=ct.el,Pe===null&&Zu(R,ct.el),pe&&Et(pe,j),(Pt=te.props&&te.props.onVnodeUpdated)&&Et(()=>Wt(Pt,we,te,Ce),j)}else{let te;const{el:ae,props:pe}=V,{bm:we,m:Ce,parent:Pe,root:Pt,type:ct}=R,Kt=Ur(V);if(ps(R,!1),we&&xi(we),!Kt&&(te=pe&&pe.onVnodeBeforeMount)&&Wt(te,Pe,V),ps(R,!0),ae&&Le){const ut=()=>{R.subTree=sh(R),Le(ae,R.subTree,R,j,null)};Kt&&ct.__asyncHydrate?ct.__asyncHydrate(ae,R,ut):ut()}else{Pt.ce&&Pt.ce._def.shadowRoot!==!1&&Pt.ce._injectChildStyle(ct);const ut=R.subTree=sh(R);E(null,ut,L,G,R,j,K),V.el=ut.el}if(Ce&&Et(Ce,j),!Kt&&(te=pe&&pe.onVnodeMounted)){const ut=V;Et(()=>Wt(te,Pe,ut),j)}(V.shapeFlag&256||Pe&&Ur(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&R.a&&Et(R.a,j),R.isMounted=!0,V=L=G=null}};R.scope.on();const J=R.effect=new hv(z);R.scope.off();const W=R.update=J.run.bind(J),le=R.job=J.runIfDirty.bind(J);le.i=R,le.id=R.uid,J.scheduler=()=>sd(le),ps(R,!0),W()},ge=(R,V,L)=>{V.component=R;const G=R.vnode.props;R.vnode=V,R.next=null,DR(R,V.props,G,L),MR(R,V.children,L),ar(),$m(R),cr()},se=(R,V,L,G,j,K,Q,z,J=!1)=>{const W=R&&R.children,le=R?R.shapeFlag:0,te=V.children,{patchFlag:ae,shapeFlag:pe}=V;if(ae>0){if(ae&128){xn(W,te,L,G,j,K,Q,z,J);return}else if(ae&256){Me(W,te,L,G,j,K,Q,z,J);return}}pe&8?(le&16&&St(W,j,K),te!==W&&h(L,te)):le&16?pe&16?xn(W,te,L,G,j,K,Q,z,J):St(W,j,K,!0):(le&8&&h(L,""),pe&16&&T(te,L,G,j,K,Q,z,J))},Me=(R,V,L,G,j,K,Q,z,J)=>{R=R||Si,V=V||Si;const W=R.length,le=V.length,te=Math.min(W,le);let ae;for(ae=0;ae<te;ae++){const pe=V[ae]=J?Nr(V[ae]):sn(V[ae]);E(R[ae],pe,L,null,j,K,Q,z,J)}W>le?St(R,j,K,!0,!1,te):T(V,L,G,j,K,Q,z,J,te)},xn=(R,V,L,G,j,K,Q,z,J)=>{let W=0;const le=V.length;let te=R.length-1,ae=le-1;for(;W<=te&&W<=ae;){const pe=R[W],we=V[W]=J?Nr(V[W]):sn(V[W]);if(Tn(pe,we))E(pe,we,L,null,j,K,Q,z,J);else break;W++}for(;W<=te&&W<=ae;){const pe=R[te],we=V[ae]=J?Nr(V[ae]):sn(V[ae]);if(Tn(pe,we))E(pe,we,L,null,j,K,Q,z,J);else break;te--,ae--}if(W>te){if(W<=ae){const pe=ae+1,we=pe<le?V[pe].el:G;for(;W<=ae;)E(null,V[W]=J?Nr(V[W]):sn(V[W]),L,we,j,K,Q,z,J),W++}}else if(W>ae)for(;W<=te;)vt(R[W],j,K,!0),W++;else{const pe=W,we=W,Ce=new Map;for(W=we;W<=ae;W++){const et=V[W]=J?Nr(V[W]):sn(V[W]);et.key!=null&&Ce.set(et.key,W)}let Pe,Pt=0;const ct=ae-we+1;let Kt=!1,ut=0;const Jn=new Array(ct);for(W=0;W<ct;W++)Jn[W]=0;for(W=pe;W<=te;W++){const et=R[W];if(Pt>=ct){vt(et,j,K,!0);continue}let tn;if(et.key!=null)tn=Ce.get(et.key);else for(Pe=we;Pe<=ae;Pe++)if(Jn[Pe-we]===0&&Tn(et,V[Pe])){tn=Pe;break}tn===void 0?vt(et,j,K,!0):(Jn[tn-we]=W+1,tn>=ut?ut=tn:Kt=!0,E(et,V[tn],L,null,j,K,Q,z,J),Pt++)}const ii=Kt?BR(Jn):Si;for(Pe=ii.length-1,W=ct-1;W>=0;W--){const et=we+W,tn=V[et],us=V[et+1],Ro=et+1<le?us.el||us.placeholder:G;Jn[W]===0?E(null,tn,L,Ro,j,K,Q,z,J):Kt&&(Pe<0||W!==ii[Pe]?en(tn,L,Ro,2):Pe--)}}},en=(R,V,L,G,j=null)=>{const{el:K,type:Q,transition:z,children:J,shapeFlag:W}=R;if(W&6){en(R.component.subTree,V,L,G);return}if(W&128){R.suspense.move(V,L,G);return}if(W&64){Q.move(R,V,L,ue);return}if(Q===Dt){r(K,V,L);for(let te=0;te<J.length;te++)en(J[te],V,L,G);r(R.anchor,V,L);return}if(Q===Uc){v(R,V,L);return}if(G!==2&&W&1&&z)if(G===0)z.beforeEnter(K),r(K,V,L),Et(()=>z.enter(K),j);else{const{leave:te,delayLeave:ae,afterLeave:pe}=z,we=()=>{R.ctx.isUnmounted?s(K):r(K,V,L)},Ce=()=>{K._isLeaving&&K[tr](!0),te(K,()=>{we(),pe&&pe()})};ae?ae(K,we,Ce):Ce()}else r(K,V,L)},vt=(R,V,L,G=!1,j=!1)=>{const{type:K,props:Q,ref:z,children:J,dynamicChildren:W,shapeFlag:le,patchFlag:te,dirs:ae,cacheIndex:pe}=R;if(te===-2&&(j=!1),z!=null&&(ar(),Di(z,null,L,R,!0),cr()),pe!=null&&(V.renderCache[pe]=void 0),le&256){V.ctx.deactivate(R);return}const we=le&1&&ae,Ce=!Ur(R);let Pe;if(Ce&&(Pe=Q&&Q.onVnodeBeforeUnmount)&&Wt(Pe,V,R),le&6)vn(R.component,L,G);else{if(le&128){R.suspense.unmount(L,G);return}we&&kn(R,null,V,"beforeUnmount"),le&64?R.type.remove(R,V,L,ue,G):W&&!W.hasOnce&&(K!==Dt||te>0&&te&64)?St(W,V,L,!1,!0):(K===Dt&&te&384||!j&&le&16)&&St(J,V,L),G&&Qn(R)}(Ce&&(Pe=Q&&Q.onVnodeUnmounted)||we)&&Et(()=>{Pe&&Wt(Pe,V,R),we&&kn(R,null,V,"unmounted")},L)},Qn=R=>{const{type:V,el:L,anchor:G,transition:j}=R;if(V===Dt){yn(L,G);return}if(V===Uc){x(R);return}const K=()=>{s(L),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(R.shapeFlag&1&&j&&!j.persisted){const{leave:Q,delayLeave:z}=j,J=()=>Q(L,K);z?z(R.el,K,J):J()}else K()},yn=(R,V)=>{let L;for(;R!==V;)L=p(R),s(R),R=L;s(V)},vn=(R,V,L)=>{const{bum:G,scope:j,job:K,subTree:Q,um:z,m:J,a:W}=R;hu(J),hu(W),G&&xi(G),j.stop(),K&&(K.flags|=8,vt(Q,R,V,L)),z&&Et(z,V),Et(()=>{R.isUnmounted=!0},V)},St=(R,V,L,G=!1,j=!1,K=0)=>{for(let Q=K;Q<R.length;Q++)vt(R[Q],V,L,G,j)},$=R=>{if(R.shapeFlag&6)return $(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const V=p(R.anchor||R.el),L=V&&V[iR];return L?p(L):V};let re=!1;const ee=(R,V,L)=>{R==null?V._vnode&&vt(V._vnode,null,null,!0):E(V._vnode||null,R,V,null,null,null,L),V._vnode=R,re||(re=!0,$m(),au(),re=!1)},ue={p:E,um:vt,m:en,r:Qn,mt:fe,mc:T,pc:se,pbc:A,n:$,o:t};let ve,Le;return e&&([ve,Le]=e(ue)),{render:ee,hydrate:ve,createApp:xR(ee,ve)}}function rh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ps({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function iE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function oE(t,e,n=!1){const r=t.children,s=e.children;if(he(r)&&he(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Nr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&oE(o,a)),a.type===Ms&&a.patchFlag!==-1&&(a.el=o.el),a.type===it&&!a.el&&(a.el=o.el)}}function BR(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(s=n[n.length-1],t[s]<l){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function aE(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:aE(e)}function hu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const UR=Symbol.for("v-scx"),jR=()=>Ot(UR);function $R(t,e){return hd(t,null,e)}function $r(t,e,n){return hd(t,e,n)}function hd(t,e,n=Be){const{immediate:r,deep:s,flush:i,once:o}=n,a=yt({},n),c=e&&r||!e&&i!=="post";let l;if(ji){if(i==="sync"){const m=jR();l=m.__watcherHandles||(m.__watcherHandles=[])}else if(!c){const m=()=>{};return m.stop=jn,m.resume=jn,m.pause=jn,m}}const h=It;a.call=(m,y,E)=>Sn(m,h,y,E);let f=!1;i==="post"?a.scheduler=m=>{Et(m,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,y)=>{y?m():sd(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=nR(t,e,a);return ji&&(l?l.push(p):c&&p()),p}function qR(t,e,n){const r=this.proxy,s=Qe(t)?t.includes(".")?cE(r,t):()=>r[t]:t.bind(r,r);let i;de(e)?i=e:(i=e.handler,n=e);const o=Xa(this),a=hd(s,i.bind(r),n);return o(),a}function cE(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const HR=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${_n(e)}Modifiers`]||t[`${Ys(e)}Modifiers`];function GR(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Be;let s=n;const i=e.startsWith("update:"),o=i&&HR(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Qe(h)?h.trim():h)),o.number&&(s=n.map(gA)));let a,c=r[a=Wl(e)]||r[a=Wl(_n(e))];!c&&i&&(c=r[a=Wl(Ys(e))]),c&&Sn(c,t,6,s);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Sn(l,t,6,s)}}const KR=new WeakMap;function uE(t,e,n=!1){const r=n?KR:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!de(t)){const c=l=>{const h=uE(l,e,!0);h&&(a=!0,yt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Oe(t)&&r.set(t,null),null):(he(i)?i.forEach(c=>o[c]=null):yt(o,i),Oe(t)&&r.set(t,o),o)}function Xu(t,e){return!t||!Wa(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ve(t,e[0].toLowerCase()+e.slice(1))||Ve(t,Ys(e))||Ve(t,e))}function sh(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:h,props:f,data:p,setupState:m,ctx:y,inheritAttrs:E}=t,C=cu(t);let N,D;try{if(n.shapeFlag&4){const x=s||r,k=x;N=sn(l.call(k,x,h,f,m,p,y)),D=a}else{const x=e;N=sn(x.length>1?x(f,{attrs:a,slots:o,emit:c}):x(f,null)),D=e.props?a:WR(a)}}catch(x){ca.length=0,mo(x,t,1),N=Xe(it)}let v=N;if(D&&E!==!1){const x=Object.keys(D),{shapeFlag:k}=v;x.length&&k&7&&(i&&x.some(Wf)&&(D=QR(D,i)),v=lr(v,D,!1,!0))}return n.dirs&&(v=lr(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&Bi(v,n.transition),N=v,cu(C),N}function zR(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(Bs(s)){if(s.type!==it||s.children==="v-if"){if(n)return;n=s}}else return}return n}const WR=t=>{let e;for(const n in t)(n==="class"||n==="style"||Wa(n))&&((e||(e={}))[n]=t[n]);return e},QR=(t,e)=>{const n={};for(const r in t)(!Wf(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function JR(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Zm(r,o,l):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==r[p]&&!Xu(l,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Zm(r,o,l):!0:!!o;return!1}function Zm(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Xu(n,i))return!0}return!1}function Zu({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const fu=t=>t.__isSuspense;let Hh=0;const YR={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,c,l){if(t==null)XR(e,n,r,s,i,o,a,c,l);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}ZR(t,e,n,r,s,o,a,c,l)}},hydrate:eS,normalize:tS},fd=YR;function ba(t,e){const n=t.props&&t.props[e];de(n)&&n()}function XR(t,e,n,r,s,i,o,a,c){const{p:l,o:{createElement:h}}=c,f=h("div"),p=t.suspense=lE(t,s,r,e,f,n,i,o,a,c);l(null,p.pendingBranch=t.ssContent,f,null,r,p,i,o),p.deps>0?(ba(t,"onPending"),ba(t,"onFallback"),l(null,t.ssFallback,e,n,r,null,i,o),Ni(p,t.ssFallback)):p.resolve(!1,!0)}function ZR(t,e,n,r,s,i,o,a,{p:c,um:l,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,m=e.ssFallback,{activeBranch:y,pendingBranch:E,isInFallback:C,isHydrating:N}=f;if(E)f.pendingBranch=p,Tn(E,p)?(c(E,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():C&&(N||(c(y,m,n,r,s,null,i,o,a),Ni(f,m)))):(f.pendingId=Hh++,N?(f.isHydrating=!1,f.activeBranch=E):l(E,s,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),C?(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():(c(y,m,n,r,s,null,i,o,a),Ni(f,m))):y&&Tn(y,p)?(c(y,p,n,r,s,f,i,o,a),f.resolve(!0)):(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0&&f.resolve()));else if(y&&Tn(y,p))c(y,p,n,r,s,f,i,o,a),Ni(f,p);else if(ba(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=Hh++,c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:D,pendingId:v}=f;D>0?setTimeout(()=>{f.pendingId===v&&f.fallback(m)},D):D===0&&f.fallback(m)}}function lE(t,e,n,r,s,i,o,a,c,l,h=!1){const{p:f,m:p,um:m,n:y,o:{parentNode:E,remove:C}}=l;let N;const D=nS(t);D&&e&&e.pendingBranch&&(N=e.pendingId,e.deps++);const v=t.props?sv(t.props.timeout):void 0,x=i,k={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:Hh++,timeout:typeof v=="number"?v:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(U=!1,b=!1){const{vnode:T,activeBranch:w,pendingBranch:A,pendingId:P,effects:S,parentComponent:I,container:fe}=k;let Ee=!1;k.isHydrating?k.isHydrating=!1:U||(Ee=w&&A.transition&&A.transition.mode==="out-in",Ee&&(w.transition.afterLeave=()=>{P===k.pendingId&&(p(A,fe,i===x?y(w):i,0),Lh(S))}),w&&(E(w.el)===fe&&(i=y(w)),m(w,I,k,!0)),Ee||p(A,fe,i,0)),Ni(k,A),k.pendingBranch=null,k.isInFallback=!1;let ie=k.parent,ge=!1;for(;ie;){if(ie.pendingBranch){ie.effects.push(...S),ge=!0;break}ie=ie.parent}!ge&&!Ee&&Lh(S),k.effects=[],D&&e&&e.pendingBranch&&N===e.pendingId&&(e.deps--,e.deps===0&&!b&&e.resolve()),ba(T,"onResolve")},fallback(U){if(!k.pendingBranch)return;const{vnode:b,activeBranch:T,parentComponent:w,container:A,namespace:P}=k;ba(b,"onFallback");const S=y(T),I=()=>{k.isInFallback&&(f(null,U,A,S,w,null,P,a,c),Ni(k,U))},fe=U.transition&&U.transition.mode==="out-in";fe&&(T.transition.afterLeave=I),k.isInFallback=!0,m(T,w,null,!0),fe||I()},move(U,b,T){k.activeBranch&&p(k.activeBranch,U,b,T),k.container=U},next(){return k.activeBranch&&y(k.activeBranch)},registerDep(U,b,T){const w=!!k.pendingBranch;w&&k.deps++;const A=U.vnode.el;U.asyncDep.catch(P=>{mo(P,U,0)}).then(P=>{if(U.isUnmounted||k.isUnmounted||k.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:S}=U;Kh(U,P),A&&(S.el=A);const I=!A&&U.subTree.el;b(U,S,E(A||U.subTree.el),A?null:y(U.subTree),k,o,T),I&&C(I),Zu(U,S.el),w&&--k.deps===0&&k.resolve()})},unmount(U,b){k.isUnmounted=!0,k.activeBranch&&m(k.activeBranch,n,U,b),k.pendingBranch&&m(k.pendingBranch,n,U,b)}};return k}function eS(t,e,n,r,s,i,o,a,c){const l=e.suspense=lE(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=c(t,l.pendingBranch=e.ssContent,n,l,i,o);return l.deps===0&&l.resolve(!1,!0),h}function tS(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=eg(r?n.default:n),t.ssFallback=r?eg(n.fallback):Xe(it)}function eg(t){let e;if(de(t)){const n=Ui&&t._c;n&&(t._d=!1,fn()),t=t(),n&&(t._d=!0,e=Qt,fE())}return he(t)&&(t=zR(t)),t=sn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function hE(t,e){e&&e.pendingBranch?he(t)?e.effects.push(...t):e.effects.push(t):Lh(t)}function Ni(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,Zu(r,s))}function nS(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Dt=Symbol.for("v-fgt"),Ms=Symbol.for("v-txt"),it=Symbol.for("v-cmt"),Uc=Symbol.for("v-stc"),ca=[];let Qt=null;function fn(t=!1){ca.push(Qt=t?null:[])}function fE(){ca.pop(),Qt=ca[ca.length-1]||null}let Ui=1;function du(t,e=!1){Ui+=t,t<0&&Qt&&e&&(Qt.hasOnce=!0)}function dE(t){return t.dynamicChildren=Ui>0?Qt||Si:null,fE(),Ui>0&&Qt&&Qt.push(t),t}function rS(t,e,n,r,s,i){return dE(mE(t,e,n,r,s,i,!0))}function Ln(t,e,n,r,s){return dE(Xe(t,e,n,r,s,!0))}function Bs(t){return t?t.__v_isVNode===!0:!1}function Tn(t,e){return t.type===e.type&&t.key===e.key}const pE=({key:t})=>t??null,jc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||ft(t)||de(t)?{i:At,r:t,k:e,f:!!n}:t:null);function mE(t,e=null,n=null,r=0,s=null,i=t===Dt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&pE(e),ref:e&&jc(e),scopeId:xv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:At};return a?(dd(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Qe(n)?8:16),Ui>0&&!o&&Qt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Qt.push(c),c}const Xe=sS;function sS(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Hv)&&(t=it),Bs(t)){const a=lr(t,e,!0);return n&&dd(a,n),Ui>0&&!i&&Qt&&(a.shapeFlag&6?Qt[Qt.indexOf(t)]=a:Qt.push(a)),a.patchFlag=-2,a}if(fS(t)&&(t=t.__vccOpts),e){e=gE(e);let{class:a,style:c}=e;a&&!Qe(a)&&(e.class=Qu(a)),Oe(c)&&(rd(c)&&!he(c)&&(c=yt({},c)),e.style=Wu(c))}const o=Qe(t)?1:fu(t)?128:Vv(t)?64:Oe(t)?4:de(t)?2:0;return mE(t,e,n,r,s,o,i,!0)}function gE(t){return t?rd(t)||Xv(t)?yt({},t):t:null}function lr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,l=e?yE(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&pE(l),ref:e&&e.ref?n&&i?he(i)?i.concat(jc(e)):[i,jc(e)]:jc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Dt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&lr(t.ssContent),ssFallback:t.ssFallback&&lr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Bi(h,c.clone(h)),h}function _E(t=" ",e=0){return Xe(Ms,null,t,e)}function JL(t="",e=!1){return e?(fn(),Ln(it,null,t)):Xe(it,null,t)}function sn(t){return t==null||typeof t=="boolean"?Xe(it):he(t)?Xe(Dt,null,t.slice()):Bs(t)?Nr(t):Xe(Ms,null,String(t))}function Nr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:lr(t)}function dd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(he(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),dd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Xv(e)?e._ctx=At:s===3&&At&&(At.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:At},n=32):(e=String(e),r&64?(n=16,e=[_E(e)]):n=8);t.children=e,t.shapeFlag|=n}function yE(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Qu([e.class,r.class]));else if(s==="style")e.style=Wu([e.style,r.style]);else if(Wa(s)){const i=e[s],o=r[s];o&&i!==o&&!(he(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Wt(t,e,n,r=null){Sn(t,e,7,[n,r])}const iS=Qv();let oS=0;function aS(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||iS,i={uid:oS++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:eE(r,s),emitsOptions:uE(r,s),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:r.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=GR.bind(null,i),t.ce&&t.ce(i),i}let It=null;const go=()=>It||At;let pu,Gh;{const t=zu(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};pu=e("__VUE_INSTANCE_SETTERS__",n=>It=n),Gh=e("__VUE_SSR_SETTERS__",n=>ji=n)}const Xa=t=>{const e=It;return pu(t),t.scope.on(),()=>{t.scope.off(),pu(e)}},tg=()=>{It&&It.scope.off(),pu(null)};function vE(t){return t.vnode.shapeFlag&4}let ji=!1;function cS(t,e=!1,n=!1){e&&Gh(e);const{props:r,children:s}=t.vnode,i=vE(t);VR(t,r,i,e),OR(t,s,n||e);const o=i?uS(t,e):void 0;return e&&Gh(!1),o}function uS(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,IR);const{setup:r}=n;if(r){ar();const s=t.setupContext=r.length>1?hS(t):null,i=Xa(t),o=Qa(r,t,0,[t.props,s]),a=ev(o);if(cr(),i(),(a||t.sp)&&!Ur(t)&&od(t),a){if(o.then(tg,tg),e)return o.then(c=>{Kh(t,c)}).catch(c=>{mo(c,t,0)});t.asyncDep=o}else Kh(t,o)}else EE(t)}function Kh(t,e,n){de(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Oe(e)&&(t.setupState=Rv(e)),EE(t)}function EE(t,e,n){const r=t.type;t.render||(t.render=r.render||jn);{const s=Xa(t);ar();try{bR(t)}finally{cr(),s()}}}const lS={get(t,e){return Vt(t,"get",""),t[e]}};function hS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,lS),slots:t.slots,emit:t.emit,expose:e}}function el(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Rv(GA(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in aa)return aa[n](t)},has(e,n){return n in e||n in aa}})):t.proxy}function zh(t,e=!0){return de(t)?t.displayName||t.name:t.name||e&&t.__name}function fS(t){return de(t)&&"__vccOpts"in t}const on=(t,e)=>eR(t,e,ji);function kt(t,e,n){try{du(-1);const r=arguments.length;return r===2?Oe(e)&&!he(e)?Bs(e)?Xe(t,null,[e]):Xe(t,e):Xe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Bs(n)&&(n=[n]),Xe(t,e,n))}finally{du(1)}}const dS="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wh;const ng=typeof window<"u"&&window.trustedTypes;if(ng)try{Wh=ng.createPolicy("vue",{createHTML:t=>t})}catch{}const wE=Wh?t=>Wh.createHTML(t):t=>t,pS="http://www.w3.org/2000/svg",mS="http://www.w3.org/1998/Math/MathML",er=typeof document<"u"?document:null,rg=er&&er.createElement("template"),gS={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?er.createElementNS(pS,t):e==="mathml"?er.createElementNS(mS,t):n?er.createElement(t,{is:n}):er.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>er.createTextNode(t),createComment:t=>er.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>er.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{rg.innerHTML=wE(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=rg.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Rr="transition",$o="animation",Aa=Symbol("_vtc"),TE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},_S=yt({},Dv,TE),yS=t=>(t.displayName="Transition",t.props=_S,t),vS=yS((t,{slots:e})=>kt(cR,ES(t),e)),ms=(t,e=[])=>{he(t)?t.forEach(n=>n(...e)):t&&t(...e)},sg=t=>t?he(t)?t.some(e=>e.length>1):t.length>1:!1;function ES(t){const e={};for(const S in t)S in TE||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,y=wS(s),E=y&&y[0],C=y&&y[1],{onBeforeEnter:N,onEnter:D,onEnterCancelled:v,onLeave:x,onLeaveCancelled:k,onBeforeAppear:U=N,onAppear:b=D,onAppearCancelled:T=v}=e,w=(S,I,fe,Ee)=>{S._enterCancelled=Ee,gs(S,I?h:a),gs(S,I?l:o),fe&&fe()},A=(S,I)=>{S._isLeaving=!1,gs(S,f),gs(S,m),gs(S,p),I&&I()},P=S=>(I,fe)=>{const Ee=S?b:D,ie=()=>w(I,S,fe);ms(Ee,[I,ie]),ig(()=>{gs(I,S?c:i),Xn(I,S?h:a),sg(Ee)||og(I,r,E,ie)})};return yt(e,{onBeforeEnter(S){ms(N,[S]),Xn(S,i),Xn(S,o)},onBeforeAppear(S){ms(U,[S]),Xn(S,c),Xn(S,l)},onEnter:P(!1),onAppear:P(!0),onLeave(S,I){S._isLeaving=!0;const fe=()=>A(S,I);Xn(S,f),S._enterCancelled?(Xn(S,p),ug(S)):(ug(S),Xn(S,p)),ig(()=>{S._isLeaving&&(gs(S,f),Xn(S,m),sg(x)||og(S,r,C,fe))}),ms(x,[S,fe])},onEnterCancelled(S){w(S,!1,void 0,!0),ms(v,[S])},onAppearCancelled(S){w(S,!0,void 0,!0),ms(T,[S])},onLeaveCancelled(S){A(S),ms(k,[S])}})}function wS(t){if(t==null)return null;if(Oe(t))return[ih(t.enter),ih(t.leave)];{const e=ih(t);return[e,e]}}function ih(t){return sv(t)}function Xn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Aa]||(t[Aa]=new Set)).add(e)}function gs(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Aa];n&&(n.delete(e),n.size||(t[Aa]=void 0))}function ig(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let TS=0;function og(t,e,n,r){const s=t._endId=++TS,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=IS(t,e);if(!o)return r();const l=o+"end";let h=0;const f=()=>{t.removeEventListener(l,p),i()},p=m=>{m.target===t&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},a+1),t.addEventListener(l,p)}function IS(t,e){const n=window.getComputedStyle(t),r=y=>(n[y]||"").split(", "),s=r(`${Rr}Delay`),i=r(`${Rr}Duration`),o=ag(s,i),a=r(`${$o}Delay`),c=r(`${$o}Duration`),l=ag(a,c);let h=null,f=0,p=0;e===Rr?o>0&&(h=Rr,f=o,p=i.length):e===$o?l>0&&(h=$o,f=l,p=c.length):(f=Math.max(o,l),h=f>0?o>l?Rr:$o:null,p=h?h===Rr?i.length:c.length:0);const m=h===Rr&&/\b(?:transform|all)(?:,|$)/.test(r(`${Rr}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:m}}function ag(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>cg(n)+cg(t[r])))}function cg(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function ug(t){return(t?t.ownerDocument:document).body.offsetHeight}function bS(t,e,n){const r=t[Aa];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const lg=Symbol("_vod"),AS=Symbol("_vsh"),RS=Symbol(""),SS=/(?:^|;)\s*display\s*:/;function PS(t,e,n){const r=t.style,s=Qe(n);let i=!1;if(n&&!s){if(e)if(Qe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&$c(r,a,"")}else for(const o in e)n[o]==null&&$c(r,o,"");for(const o in n)o==="display"&&(i=!0),$c(r,o,n[o])}else if(s){if(e!==n){const o=r[RS];o&&(n+=";"+o),r.cssText=n,i=SS.test(n)}}else e&&t.removeAttribute("style");lg in t&&(t[lg]=i?r.display:"",t[AS]&&(r.display="none"))}const hg=/\s*!important$/;function $c(t,e,n){if(he(n))n.forEach(r=>$c(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=CS(t,e);hg.test(n)?t.setProperty(Ys(r),n.replace(hg,""),"important"):t[r]=n}}const fg=["Webkit","Moz","ms"],oh={};function CS(t,e){const n=oh[e];if(n)return n;let r=_n(e);if(r!=="filter"&&r in t)return oh[e]=r;r=Ku(r);for(let s=0;s<fg.length;s++){const i=fg[s]+r;if(i in t)return oh[e]=i}return e}const dg="http://www.w3.org/1999/xlink";function pg(t,e,n,r,s,i=IA(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(dg,e.slice(6,e.length)):t.setAttributeNS(dg,e,n):n==null||i&&!iv(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Rn(n)?String(n):n)}function mg(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?wE(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=iv(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function IE(t,e,n,r){t.addEventListener(e,n,r)}function xS(t,e,n,r){t.removeEventListener(e,n,r)}const gg=Symbol("_vei");function VS(t,e,n,r,s=null){const i=t[gg]||(t[gg]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=DS(e);if(r){const l=i[e]=OS(r,s);IE(t,a,l,c)}else o&&(xS(t,a,o,c),i[e]=void 0)}}const _g=/(?:Once|Passive|Capture)$/;function DS(t){let e;if(_g.test(t)){e={};let r;for(;r=t.match(_g);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ys(t.slice(2)),e]}let ah=0;const NS=Promise.resolve(),kS=()=>ah||(NS.then(()=>ah=0),ah=Date.now());function OS(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Sn(MS(r,n.value),e,5,[r])};return n.value=t,n.attached=kS(),n}function MS(t,e){if(he(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const yg=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,LS=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?bS(t,r,o):e==="style"?PS(t,n,r):Wa(e)?Wf(e)||VS(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):FS(t,e,r,o))?(mg(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&pg(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Qe(r))?mg(t,_n(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),pg(t,e,r,o))};function FS(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&yg(e)&&de(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return yg(e)&&Qe(n)?!1:e in t}const vg=t=>{const e=t.props["onUpdate:modelValue"]||!1;return he(e)?n=>xi(e,n):e},ch=Symbol("_assign"),YL={created(t,{value:e},n){t.checked=nu(e,n.props.value),t[ch]=vg(n),IE(t,"change",()=>{t[ch](BS(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[ch]=vg(r),e!==n&&(t.checked=nu(e,r.props.value))}};function BS(t){return"_value"in t?t._value:t.value}const bE=yt({patchProp:LS},gS);let ua,Eg=!1;function US(){return ua||(ua=LR(bE))}function jS(){return ua=Eg?ua:FR(bE),Eg=!0,ua}const $S=((...t)=>{const e=US().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=RE(r);if(!s)return;const i=e._component;!de(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,AE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e}),qS=((...t)=>{const e=jS().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=RE(r);if(s)return n(s,!0,AE(s))},e});function AE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function RE(t){return Qe(t)?document.querySelector(t):t}const HS=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,GS=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,KS=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function zS(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){WS(t);return}return e}function WS(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function mu(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!KS.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(HS.test(t)||GS.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,zS)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const QS=/#/g,JS=/&/g,YS=/\//g,XS=/=/g,pd=/\+/g,ZS=/%5e/gi,e0=/%60/gi,t0=/%7c/gi,n0=/%20/gi;function r0(t){return encodeURI(""+t).replace(t0,"|")}function Qh(t){return r0(typeof t=="string"?t:JSON.stringify(t)).replace(pd,"%2B").replace(n0,"+").replace(QS,"%23").replace(JS,"%26").replace(e0,"`").replace(ZS,"^").replace(YS,"%2F")}function uh(t){return Qh(t).replace(XS,"%3D")}function gu(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function s0(t){return gu(t.replace(pd," "))}function i0(t){return gu(t.replace(pd," "))}function SE(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=s0(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=i0(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function o0(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${uh(t)}=${Qh(n)}`).join("&"):`${uh(t)}=${Qh(e)}`:uh(t)}function a0(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>o0(e,t[e])).filter(Boolean).join("&")}const c0=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,u0=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,l0=/^([/\\]\s*){2,}[^/\\]/,h0=/^[\s\0]*(blob|data|javascript|vbscript):$/i,f0=/\/$|\/\?|\/#/,d0=/^\.?\//;function Xs(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?c0.test(t):u0.test(t)||(e.acceptRelative?l0.test(t):!1)}function p0(t){return!!t&&h0.test(t)}function Jh(t="",e){return e?f0.test(t):t.endsWith("/")}function _u(t="",e){if(!e)return(Jh(t)?t.slice(0,-1):t)||"/";if(!Jh(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");s!==-1&&(n=t.slice(0,s),r=t.slice(s));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function m0(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(Jh(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");if(s!==-1&&(n=t.slice(0,s),r=t.slice(s),!n))return r;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function g0(t,e){if(CE(e)||Xs(t))return t;const n=_u(e);return t.startsWith(n)?t:md(n,t)}function wg(t,e){if(CE(e))return t;const n=_u(e);if(!t.startsWith(n))return t;const r=t.slice(n.length);return r[0]==="/"?r:"/"+r}function PE(t,e){const n=DE(t),r={...SE(n.search),...e};return n.search=a0(r),v0(n)}function CE(t){return!t||t==="/"}function _0(t){return t&&t!=="/"}function md(t,...e){let n=t||"";for(const r of e.filter(s=>_0(s)))if(n){const s=r.replace(d0,"");n=m0(n)+s}else n=r;return n}function xE(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),r=[];let s=0;for(const o of n)if(!(!o||o==="/")){for(const[a,c]of o.split(e).entries())if(!(!c||c===".")){if(c===".."){if(r.length===1&&Xs(r[0]))continue;r.pop(),s--;continue}if(a===1&&r[r.length-1]?.endsWith(":/")){r[r.length-1]+="/"+c;continue}r.push(c),s++}}let i=r.join("/");return s>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function y0(t,e){return gu(_u(t))===gu(_u(e))}const VE=Symbol.for("ufo:protocolRelative");function DE(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,p=""]=n;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!Xs(t,{acceptRelative:!0}))return Tg(t);const[,r="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:l,hash:h}=Tg(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:l,hash:h,[VE]:!r}}function Tg(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function v0(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[VE]?(t.protocol||"")+"//":"")+s+i+e+n+r}class E0 extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function w0(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",r=t.request?.url||String(t.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new E0(o,t.error?{cause:t.error}:void 0);for(const c of["request","options","response"])Object.defineProperty(a,c,{get(){return t[c]}});for(const[c,l]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,c,{get(){return t.response&&t.response[l]}});return a}const T0=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Ig(t="GET"){return T0.has(t.toUpperCase())}function I0(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const b0=new Set(["image/svg","application/xml","application/xhtml","application/html"]),A0=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function R0(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return A0.test(e)?"json":b0.has(e)||e.startsWith("text/")?"text":"blob"}function S0(t,e,n,r){const s=P0(e?.headers??t?.headers,n?.headers,r);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:s}}function P0(t,e,n){if(!e)return new n(t);const r=new n(e);if(t)for(const[s,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))r.set(s,i);return r}async function Vc(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const C0=new Set([408,409,425,429,500,502,503,504]),x0=new Set([101,204,205,304]);function NE(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function s(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let h;typeof a.options.retry=="number"?h=a.options.retry:h=Ig(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):C0.has(f))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(m=>setTimeout(m,p)),i(a.request,{...a.options,retry:h-1})}}const l=w0(a);throw Error.captureStackTrace&&Error.captureStackTrace(l,i),l}const i=async function(c,l={}){const h={request:c,options:S0(c,l,t.defaults,n),response:void 0,error:void 0};h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&await Vc(h,h.options.onRequest),typeof h.request=="string"&&(h.options.baseURL&&(h.request=g0(h.request,h.options.baseURL)),h.options.query&&(h.request=PE(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&Ig(h.options.method)&&(I0(h.options.body)?(h.options.body=typeof h.options.body=="string"?h.options.body:JSON.stringify(h.options.body),h.options.headers=new n(h.options.headers||{}),h.options.headers.has("content-type")||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")):("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half")));let f;if(!h.options.signal&&h.options.timeout){const m=new r;f=setTimeout(()=>{const y=new Error("[TimeoutError]: The operation was aborted due to timeout");y.name="TimeoutError",y.code=23,m.abort(y)},h.options.timeout),h.options.signal=m.signal}try{h.response=await e(h.request,h.options)}catch(m){return h.error=m,h.options.onRequestError&&await Vc(h,h.options.onRequestError),await s(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!x0.has(h.response.status)&&h.options.method!=="HEAD"){const m=(h.options.parseResponse?"json":h.options.responseType)||R0(h.response.headers.get("content-type")||"");switch(m){case"json":{const y=await h.response.text(),E=h.options.parseResponse||mu;h.response._data=E(y);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[m]()}}return h.options.onResponse&&await Vc(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await Vc(h,h.options.onResponseError),await s(h)):h.response},o=async function(c,l){return(await i(c,l))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},c={})=>NE({...t,...c,defaults:{...t.defaults,...c.defaults,...a}}),o}const yu=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),V0=yu.fetch?(...t)=>yu.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),D0=yu.Headers,N0=yu.AbortController,k0=NE({fetch:V0,Headers:D0,AbortController:N0}),O0=k0,M0=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,gd=()=>M0().app,L0=()=>gd().baseURL,F0=()=>gd().buildAssetsDir,_d=(...t)=>xE(kE(),F0(),...t),kE=(...t)=>{const e=gd(),n=e.cdnURL||e.baseURL;return t.length?xE(n,...t):n};globalThis.__buildAssetsURL=_d,globalThis.__publicAssetsURL=kE;globalThis.$fetch||(globalThis.$fetch=O0.create({baseURL:L0()}));"global"in globalThis||(globalThis.global=globalThis);function Yh(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?Yh(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const B0={run:t=>t()},U0=()=>B0,OE=typeof console.createTask<"u"?console.createTask:U0;function j0(t,e){const n=e.shift(),r=OE(n);return t.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function $0(t,e){const n=e.shift(),r=OE(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}function lh(t,e){for(const n of[...t])n(e)}class q0{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Yh(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const n=Yh(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(j0,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith($0,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&lh(this._before,s);const i=e(n in this._hooks?[...this._hooks[n]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&lh(this._after,s)}):(this._after&&s&&lh(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function ME(){return new q0}function H0(t={}){let e,n=!1;const r=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||r(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{r(o),e=o;try{return s?s.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const c=()=>{e=o},l=()=>e===o?c:void 0;Xh.add(l);try{const h=s?s.run(o,a):a();return n||(e=void 0),await h}finally{Xh.delete(l)}}}}function G0(t={}){const e={};return{get(n,r={}){return e[n]||(e[n]=H0({...t,...r})),e[n]}}}const vu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},bg="__unctx__",K0=vu[bg]||(vu[bg]=G0()),z0=(t,e={})=>K0.get(t,e),Ag="__unctx_async_handlers__",Xh=vu[Ag]||(vu[Ag]=new Set);function ki(t){const e=[];for(const s of Xh){const i=s();i&&e.push(i)}const n=()=>{for(const s of e)s()};let r=t();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const W0=!1,Rg=!1,Q0=!1,Sg={id:"__nuxt-loader"},XL={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},J0="#__nuxt",LE="nuxt-app",Pg=36e5,Y0="vite:preloadError";function FE(t=LE){return z0(t,{asyncContext:!1})}const X0="__nuxt_plugin";function Z0(t){let e=0;const n={_id:t.id||LE||"nuxt-app",_scope:uv(),provide:void 0,versions:{get nuxt(){return"4.2.0"},get vue(){return n.vueApp.version}},payload:Fn({...t.ssrContext?.payload||{},data:Fn({}),state:pr({}),once:new Set,_errors:Fn({})}),static:{data:{}},runWithContext(s){return n._scope.active&&!lv()?n._scope.run(()=>Cg(n,s)):Cg(n,s)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let s=!1;return()=>{if(!s&&(s=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Fn({}),_payloadRevivers:{},...t};{const s=window.__NUXT__;if(s)for(const i in s)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],s[i]);break;default:n.payload[i]=s[i]}}n.hooks=ME(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(s,i)=>{const o="$"+s;Dc(n,o,i),Dc(n.vueApp.config.globalProperties,o,i)},Dc(n.vueApp,"$nuxt",n),Dc(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(Y0,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=dt;const s=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",s)}const r=n.payload.config;return n.provide("config",r),n}function eP(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function tP(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}}async function nP(t,e){const n=new Set,r=[],s=[];let i,o=0;async function a(c){const l=c.dependsOn?.filter(h=>e.some(f=>f._name===h)&&!n.has(h))??[];if(l.length>0)r.push([new Set(l),c]);else{const h=tP(t,c).then(async()=>{c._name&&(n.add(c._name),await Promise.all(r.map(async([f,p])=>{f.has(c._name)&&(f.delete(c._name),f.size===0&&(o++,await a(p)))})))}).catch(f=>{if(!c.parallel&&!t.payload.error)throw f;i||=f});c.parallel?s.push(h):await h}}for(const c of e)eP(t,c);for(const c of e)await a(c);if(await Promise.all(s),o)for(let c=0;c<o;c++)await Promise.all(s);if(i)throw t.payload.error||i}function zn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[X0]:!0,_name:e})}function Cg(t,e,n){const r=()=>e();return FE(t._id).set(t),t.vueApp.runWithContext(r)}function rP(t){let e;return cd()&&(e=go()?.appContext.app.$nuxt),e||=FE(t).tryUse(),e||null}function dt(t){const e=rP(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function tl(t){return dt().$config}function Dc(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function sP(t,e){return{ctx:{table:t},matchAll:n=>UE(n,t)}}function BE(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([r,s])=>[r,BE(s)])):new Map(Object.entries(t[n]));return e}function iP(t){return sP(BE(t))}function UE(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const r=[];for(const[i,o]of xg(e.wildcard))(t===i||t.startsWith(i+"/"))&&r.push(o);for(const[i,o]of xg(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");r.push(...UE(a,o))}const s=e.static.get(t);return s&&r.push(s),r.filter(Boolean)}function xg(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function hh(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Zh(t,e,n=".",r){if(!hh(e))return Zh(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:hh(o)&&hh(s[i])?s[i]=Zh(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function oP(t){return(...e)=>e.reduce((n,r)=>Zh(n,r,"",t),{})}const jE=oP();function aP(t,e){try{return e in t}catch{return!1}}class Vg extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:ef(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=$E(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function cP(t){if(typeof t=="string")return new Vg(t);if(uP(t))return t;const e=new Vg(t.message??t.statusMessage??"",{cause:t.cause||t});if(aP(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=ef(t.statusCode,e.statusCode):t.status&&(e.statusCode=ef(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;$E(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function uP(t){return t?.constructor?.__h3_error__===!0}const lP=/[^\u0009\u0020-\u007E]/g;function $E(t=""){return t.replace(lP,"")}function ef(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const qE=Symbol("layout-meta"),Us=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const cn=()=>dt()?.$router,nl=()=>cd()?Ot(Us,dt()._route):dt()._route;const hP=()=>{try{if(dt()._processingMiddleware)return!0}catch{return!1}return!1},ZL=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?fP(t):cn().resolve(t).href;if(e?.open){const{target:c="_blank",windowFeatures:l={}}=e.open,h=[];for(const[f,p]of Object.entries(l))p!==void 0&&h.push(`${f.toLowerCase()}=${p}`);return open(n,c,h.join(", ")),Promise.resolve()}const r=Xs(n,{acceptRelative:!0}),s=e?.external||r;if(s){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(n,window.location.href);if(c&&p0(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const i=hP();if(!s&&i){if(e?.replace){if(typeof t=="string"){const{pathname:c,search:l,hash:h}=DE(t);return{path:c,...l&&{query:SE(l)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=cn(),a=dt();return s?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function fP(t){return PE(t.path||"",t.query||{})+(t.hash||"")}const HE="__nuxt_error",rl=()=>YA(dt().payload,"error"),Es=t=>{const e=Ls(t);try{const n=rl();dt().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},dP=async(t={})=>{const e=dt(),n=rl();e.callHook("app:error:cleared",t),t.redirect&&await cn().replace(t.redirect),n.value=void 0},GE=t=>!!t&&typeof t=="object"&&HE in t,Ls=t=>{const e=cP(t);return Object.defineProperty(e,HE,{value:!0,configurable:!1,writable:!1}),e};function pP(t){const e=gP(t),n=new ArrayBuffer(e.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return n}const mP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function gP(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,r=0;for(let s=0;s<t.length;s++)n<<=6,n|=mP.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,e+=String.fromCharCode(n)):r===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const _P=-1,yP=-2,vP=-3,EP=-4,wP=-5,TP=-6;function IP(t,e){return bP(JSON.parse(t),e)}function bP(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);function s(i,o=!1){if(i===_P)return;if(i===vP)return NaN;if(i===EP)return 1/0;if(i===wP)return-1/0;if(i===TP)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in r)return r[i];const a=n[i];if(!a||typeof a!="object")r[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],l=e?.[c];if(l){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),r[i]=l(s(h))}switch(c){case"Date":r[i]=new Date(a[1]);break;case"Set":const h=new Set;r[i]=h;for(let m=1;m<a.length;m+=1)h.add(s(a[m]));break;case"Map":const f=new Map;r[i]=f;for(let m=1;m<a.length;m+=2)f.set(s(a[m]),s(a[m+1]));break;case"RegExp":r[i]=new RegExp(a[1],a[2]);break;case"Object":r[i]=Object(a[1]);break;case"BigInt":r[i]=BigInt(a[1]);break;case"null":const p=Object.create(null);r[i]=p;for(let m=1;m<a.length;m+=2)p[a[m]]=s(a[m+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const m=globalThis[c],y=new m(s(a[1]));r[i]=a[2]!==void 0?y.subarray(a[2],a[3]):y;break}case"ArrayBuffer":{const m=a[1],y=pP(m);r[i]=y;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const m=c.slice(9);r[i]=Temporal[m].from(a[1]);break}case"URL":{const m=new URL(a[1]);r[i]=m;break}case"URLSearchParams":{const m=new URLSearchParams(a[1]);r[i]=m;break}default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);r[i]=c;for(let l=0;l<a.length;l+=1){const h=a[l];h!==yP&&(c[l]=s(h))}}else{const c={};r[i]=c;for(const l in a){if(l==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[l];c[l]=s(h)}}return r[i]}return s(0)}const AP=new Set(["link","style","script","noscript"]),RP=new Set(["title","titleTemplate","script","style","noscript"]),Dg=new Set(["base","meta","link","style","script","noscript"]),SP=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),PP=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),CP=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),xP=new Set(["templateParams","htmlAttrs","bodyAttrs"]),VP=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),DP=["name","property","http-equiv"],NP=new Set(["viewport","description","keywords","robots"]);function KE(t){const e=t.split(":");return e.length?VP.has(e[1]):!1}function tf(t){const{props:e,tag:n}=t;if(PP.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const r of DP)if(e[r]!==void 0){const s=e[r],i=s.includes(":"),o=NP.has(s),c=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${s}${c}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(RP.has(n)){const r=t.textContent||t.innerHTML;if(r)return`${n}:content:${r}`}}function Ng(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function Eu(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());let s;if(e&&(s=e(n,t)),Array.isArray(s))return s.map(i=>Eu(i,e));if(s?.constructor===Object){const i={};for(const o of Object.keys(s))i[o]=Eu(s[o],e,o);return i}return s}function kP(t,e){const n=t==="style"?new Map:new Set;function r(s){const i=s.trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(c=>c.trim());o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(r):r(e):Array.isArray(e)?e.forEach(s=>r(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{i&&i!=="false"&&(t==="style"?n.set(s.trim(),i):r(s))}),n}function zE(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,r])=>{if(r===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=kP(n,r);return}if(CP.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof r=="object"){let o=e.type;if(e.type||(o="application/json"),!o?.endsWith("json")&&o!=="speculationrules")return;e.type=o,t.props.type=o,t[n]=JSON.stringify(r)}else t[n]=r;return}const s=String(r),i=n.startsWith("data-");s==="true"||s===""?t.props[n]=i?s:!0:!r&&i&&s==="false"?t.props[n]="false":r!==void 0&&(t.props[n]=r)}),t):t}function OP(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},r=zE({tag:t,props:{}},n);return r.key&&AP.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function MP(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(s,i)=>{for(let o=0;o<e.length;o++)i=e[o](s,i);return i};t=n(void 0,t);const r=[];return t=Eu(t,n),Object.entries(t||{}).forEach(([s,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])r.push(OP(s,o))}),r.flat()}const kg=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,Og={base:-10,title:10},LP={critical:-8,high:-1,low:2},Mg={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},FP=/@import/,qo=t=>t===""||t===!0;function BP(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const r=LP[e.tagPriority]||0,s=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:Mg;if(e.tag in Og)n=Og[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=Mg.meta[i])}else e.tag==="link"&&e.props.rel?n=s.link[e.props.rel]:e.tag==="script"?qo(e.props.async)?n=s.script.async:e.props.src&&!qo(e.props.defer)&&!qo(e.props.async)&&e.props.type!=="module"&&!e.props.type?.endsWith("json")?n=s.script.sync:qo(e.props.defer)&&e.props.src&&!qo(e.props.async)&&(n=s.script.defer):e.tag==="style"&&(n=e.innerHTML&&FP.test(e.innerHTML)?s.style.imported:s.style.sync);return(n||100)+r}function Lg(t,e){const n=typeof e=="function"?e(t):e,r=n.key||String(t.plugins.size+1);t.plugins.get(r)||(t.plugins.set(r,n),t.hooks.addHooks(n.hooks||{}))}function UP(t={}){const e=ME();e.addHooks(t.hooks||{});const n=!t.document,r=new Map,s=new Map,i=new Set,o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:r,headEntries(){return[...r.values()]},use:a=>Lg(o,a),push(a,c){const l={...c||{}};delete l.head;const h=l._index??o._entryCount++,f={_i:h,input:a,options:l},p={_poll(m=!1){o.dirty=!0,!m&&i.add(h),e.callHook("entries:updated",o)},dispose(){r.delete(h)&&o.invalidate()},patch(m){(!l.mode||l.mode==="server"&&n||l.mode==="client"&&!n)&&(f.input=m,r.set(h,f),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const p=i.values().next().value;i.delete(p);const m=r.get(p);if(m){const y={tags:MP(m.input,t.propResolvers||[]).map(E=>Object.assign(E,m.options)),entry:m};await e.callHook("entries:normalize",y),m._tags=y.tags.map((E,C)=>(E._w=BP(o,E),E._p=(m._i<<10)+C,E._d=tf(E),E))}}let c=!1;a.entries.flatMap(p=>(p._tags||[]).map(m=>({...m,props:{...m.props}}))).sort(kg).reduce((p,m)=>{const y=String(m._d||m._p);if(!p.has(y))return p.set(y,m);const E=p.get(y);if((m?.tagDuplicateStrategy||(xP.has(m.tag)?"merge":null)||(m.key&&m.key===E.key?"merge":null))==="merge"){const N={...E.props};Object.entries(m.props).forEach(([D,v])=>N[D]=D==="style"?new Map([...E.props.style||new Map,...v]):D==="class"?new Set([...E.props.class||new Set,...v]):v),p.set(y,{...m,props:N})}else m._p>>10===E._p>>10&&m.tag==="meta"&&KE(y)?(p.set(y,Object.assign([...Array.isArray(E)?E:[E],m],m)),c=!0):(m._w===E._w?m._p>E._p:m?._w<E?._w)&&p.set(y,m);return p},a.tagMap);const l=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=l?.textContent,h){const p=h?.textContent;if(o._titleTemplate=p,p){let m=typeof p=="function"?p(l?.textContent):p;typeof m=="string"&&!o.plugins.has("template-params")&&(m=m.replace("%s",l?.textContent||"")),l?m===null?a.tagMap.delete("title"):a.tagMap.set("title",{...l,textContent:m}):(h.tag="title",h.textContent=m)}}a.tags=Array.from(a.tagMap.values()),c&&(a.tags=a.tags.flat().sort(kg)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const f=[];for(const p of a.tags){const{innerHTML:m,tag:y,props:E}=p;if(SP.has(y)&&!(Object.keys(E).length===0&&!p.innerHTML&&!p.textContent)&&!(y==="meta"&&!E.content&&!E["http-equiv"]&&!E.charset)){if(y==="script"&&m){if(E.type?.endsWith("json")){const C=typeof m=="string"?m:JSON.stringify(m);p.innerHTML=C.replace(/</g,"\\u003C")}else typeof m=="string"&&(p.innerHTML=m.replace(new RegExp(`</${y}`,"g"),`<\\/${y}`));p._d=tf(p)}f.push(p)}}return f},invalidate(){for(const a of r.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>Lg(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const jP=(t,e)=>ft(e)?zA(e):e,WE="usehead";function $P(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(WE,t)}}.install}function qP(){if(cd()){const t=Ot(WE);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function e2(t,e={}){const n=e.head||qP();return n.ssr?n.push(t||{},e):HP(n,t,e)}function HP(t,e,n={}){const r=ir(!1);let s;return $R(()=>{const o=r.value?{}:Eu(e,jP);s?s.patch(o):s=t.push(o,n)}),go()&&(Ya(()=>{s.dispose()}),Fv(()=>{r.value=!0}),Lv(()=>{r.value=!1})),s}let qc,Hc;function GP(){return qc=$fetch(_d(`builds/meta/${tl().app.buildId}.json`),{responseType:"json"}),qc.then(t=>{Hc=iP(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),qc}function sl(){return qc||GP()}async function yd(t){const e=typeof t=="string"?t:t.path;if(await sl(),!Hc)return console.error("[nuxt] Error creating app manifest matcher.",Hc),{};try{return jE({},...Hc.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function Fg(t,e={}){if(!await JE(t))return null;const r=await zP(t,e);return await QE(r)||null}const KP="_payload.json";async function zP(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||Xs(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const r=tl(),s=e.hash||(e.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await JE(t)?i:r.app.baseURL;return md(o,n.pathname,KP+(s?`?${s}`:""))}async function QE(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(YE));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function JE(t=nl().path){const e=dt();return t=t==="/"?t:t.replace(/\/$/,""),(await sl()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const r=await yd({path:t});return!!r.prerender&&!r.redirect})}let _s=null;async function WP(){if(_s)return _s;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await YE(t.textContent||""),n=t.dataset.src?await QE(t.dataset.src):void 0;return _s={...e,...n,...window.__NUXT__},_s.config?.public&&(_s.config.public=pr(_s.config.public)),_s}async function YE(t){return await IP(t,dt()._payloadRevivers)}function QP(t,e){dt()._payloadRevivers[t]=e}const JP=[["NuxtError",t=>Ls(t)],["EmptyShallowRef",t=>Li(t==="_"?void 0:t==="0n"?BigInt(0):mu(t))],["EmptyRef",t=>ir(t==="_"?void 0:t==="0n"?BigInt(0):mu(t))],["ShallowRef",t=>Li(t)],["ShallowReactive",t=>Fn(t)],["Ref",t=>ir(t)],["Reactive",t=>pr(t)]],YP=zn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[r,s]of JP)QP(r,s);Object.assign(t.payload,([e,n]=ki(()=>t.runWithContext(WP)),e=await e,n(),e)),delete window.__NUXT__}});async function vd(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{const i=new Map,o=new Promise(m=>{t.resolveTags().then(y=>{m(y.map(E=>{const C=i.get(E._d)||0,N={tag:E,id:(C?`${E._d}:${C}`:E._d)||Ng(E),shouldRender:!0};return E._d&&KE(E._d)&&i.set(E._d,C+1),N}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const m of["body","head"]){const y=n[m]?.children;for(const E of y){const C=E.tagName.toLowerCase();if(!Dg.has(C))continue;const N=zE({tag:C,props:{}},{innerHTML:E.innerHTML,...E.getAttributeNames().reduce((D,v)=>(D[v]=E.getAttribute(v),D),{})||{}});if(N.key=E.getAttribute("data-hid")||void 0,N._d=tf(N)||Ng(N),a.elMap.has(N._d)){let D=1,v=N._d;for(;a.elMap.has(v);)v=`${N._d}:${D++}`;a.elMap.set(v,E)}else a.elMap.set(N._d,E)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function c(m,y,E){const C=`${m}:${y}`;a.sideEffects[C]=E,delete a.pendingSideEffects[C]}function l({id:m,$el:y,tag:E}){const C=E.tag.endsWith("Attrs");a.elMap.set(m,y),C||(E.textContent&&E.textContent!==y.textContent&&(y.textContent=E.textContent),E.innerHTML&&E.innerHTML!==y.innerHTML&&(y.innerHTML=E.innerHTML),c(m,"el",()=>{y?.remove(),a.elMap.delete(m)}));for(const N in E.props){if(!Object.prototype.hasOwnProperty.call(E.props,N))continue;const D=E.props[N];if(N.startsWith("on")&&typeof D=="function"){const x=y?.dataset;if(x&&x[`${N}fired`]){const k=N.slice(0,-5);D.call(y,new Event(k.substring(2)))}y.getAttribute(`data-${N}`)!==""&&((E.tag==="bodyAttrs"?n.defaultView:y).addEventListener(N.substring(2),D.bind(y)),y.setAttribute(`data-${N}`,""));continue}const v=`attr:${N}`;if(N==="class"){if(!D)continue;for(const x of D)C&&c(m,`${v}:${x}`,()=>y.classList.remove(x)),!y.classList.contains(x)&&y.classList.add(x)}else if(N==="style"){if(!D)continue;for(const[x,k]of D)c(m,`${v}:${x}`,()=>{y.style.removeProperty(x)}),y.style.setProperty(x,k)}else D!==!1&&D!==null&&(y.getAttribute(N)!==D&&y.setAttribute(N,D===!0?"":String(D)),C&&c(m,v,()=>y.removeAttribute(N)))}}const h=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const m of p){const{tag:y,shouldRender:E,id:C}=m;if(E){if(y.tag==="title"){n.title=y.textContent,c("title","",()=>n.title=a.title);continue}m.$el=m.$el||a.elMap.get(C),m.$el?l(m):Dg.has(y.tag)&&h.push(m)}}for(const m of h){const y=m.tag.tagPosition||"head";m.$el=n.createElement(m.tag.tag),l(m),f[y]=f[y]||n.createDocumentFragment(),f[y].appendChild(m.$el)}for(const m of p)await t.hooks.callHook("dom:renderTag",m,n,c);f.head&&n.head.appendChild(f.head),f.bodyOpen&&n.body.insertBefore(f.bodyOpen,n.body.firstChild),f.bodyClose&&n.body.appendChild(f.bodyClose);for(const m in a.pendingSideEffects)a.pendingSideEffects[m]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function XP(t={}){const e=t.domOptions?.render||vd;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return UP({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function ZP(t,e){let n=0;return()=>{const r=++n;e(()=>{n===r&&t()})}}function eC(t={}){const e=XP({domOptions:{render:ZP(()=>vd(e),n=>setTimeout(n,0))},...t});return e.install=$P(e),e}const tC={disableDefaults:!0},nC=zn({name:"nuxt:head",enforce:"pre",setup(t){const e=eC(tC);t.vueApp.use(e);{let n=!0;const r=async()=>{n=!1,await vd(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||r()}),t.hooks.hook("app:error",r),t.hooks.hook("app:suspense:resolve",r)}}});function rC(){return XE().__VUE_DEVTOOLS_GLOBAL_HOOK__}function XE(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const sC=typeof Proxy=="function",iC="devtools-plugin:setup",oC="plugin:settings:set";let hi,nf;function aC(){var t;return hi!==void 0||(typeof window<"u"&&window.performance?(hi=!0,nf=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(hi=!0,nf=globalThis.perf_hooks.performance):hi=!1),hi}function cC(){return aC()?nf.now():Date.now()}class uC{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),a=JSON.parse(o);Object.assign(i,a)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return cC()}},n&&n.on(oC,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...c)=>{this.onQueue.push({method:a,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...c)=>(this.targetQueue.push({method:a,args:c,resolve:()=>{}}),this.fallbacks[a](...c)):(...c)=>new Promise(l=>{this.targetQueue.push({method:a,args:c,resolve:l})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function lC(t,e){const n=t,r=XE(),s=rC(),i=sC&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(iC,t,e);else{const o=i?new uC(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Ei=typeof document<"u";function ZE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function hC(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&ZE(t.default)}const xe=Object.assign;function fh(t,e){const n={};for(const r in e){const s=e[r];n[r]=Pn(s)?s.map(t):t(s)}return n}const la=()=>{},Pn=Array.isArray;function Bg(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const ew=/#/g,fC=/&/g,dC=/\//g,pC=/=/g,mC=/\?/g,tw=/\+/g,gC=/%5B/g,_C=/%5D/g,nw=/%5E/g,yC=/%60/g,rw=/%7B/g,vC=/%7C/g,sw=/%7D/g,EC=/%20/g;function Ed(t){return t==null?"":encodeURI(""+t).replace(vC,"|").replace(gC,"[").replace(_C,"]")}function wC(t){return Ed(t).replace(rw,"{").replace(sw,"}").replace(nw,"^")}function rf(t){return Ed(t).replace(tw,"%2B").replace(EC,"+").replace(ew,"%23").replace(fC,"%26").replace(yC,"`").replace(rw,"{").replace(sw,"}").replace(nw,"^")}function TC(t){return rf(t).replace(pC,"%3D")}function IC(t){return Ed(t).replace(ew,"%23").replace(mC,"%3F")}function bC(t){return IC(t).replace(dC,"%2F")}function Ra(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const AC=/\/$/,RC=t=>t.replace(AC,"");function dh(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return c=a>=0&&c>a?-1:c,c>=0&&(r=e.slice(0,c),i=e.slice(c,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=xC(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Ra(o)}}function SC(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Ug(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function PC(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&$i(e.matched[r],n.matched[s])&&iw(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function $i(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function iw(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!CC(t[n],e[n]))return!1;return!0}function CC(t,e){return Pn(t)?jg(t,e):Pn(e)?jg(e,t):t===e}function jg(t,e){return Pn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function xC(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const hn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let sf=(function(t){return t.pop="pop",t.push="push",t})({}),ph=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function VC(t){if(!t)if(Ei){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),RC(t)}const DC=/^[^#]+#/;function NC(t,e){return t.replace(DC,"#")+e}function kC(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const il=()=>({left:window.scrollX,top:window.scrollY});function OC(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=kC(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function $g(t,e){return(history.state?history.state.position-e:-1)+t}const of=new Map;function MC(t,e){of.set(t,e)}function LC(t){const e=of.get(t);return of.delete(t),e}function FC(t){return typeof t=="string"||t&&typeof t=="object"}function ow(t){return typeof t=="string"||typeof t=="symbol"}let Ye=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const aw=Symbol("");Ye.MATCHER_NOT_FOUND+"",Ye.NAVIGATION_GUARD_REDIRECT+"",Ye.NAVIGATION_ABORTED+"",Ye.NAVIGATION_CANCELLED+"",Ye.NAVIGATION_DUPLICATED+"";function qi(t,e){return xe(new Error,{type:t,[aw]:!0},e)}function Zn(t,e){return t instanceof Error&&aw in t&&(e==null||!!(t.type&e))}const BC=["params","query","hash"];function UC(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of BC)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function jC(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(tw," "),i=s.indexOf("="),o=Ra(i<0?s:s.slice(0,i)),a=i<0?null:Ra(s.slice(i+1));if(o in e){let c=e[o];Pn(c)||(c=e[o]=[c]),c.push(a)}else e[o]=a}return e}function qg(t){let e="";for(let n in t){const r=t[n];if(n=TC(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Pn(r)?r.map(s=>s&&rf(s)):[r&&rf(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function $C(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Pn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const qC=Symbol(""),Hg=Symbol(""),wd=Symbol(""),Td=Symbol(""),af=Symbol("");function Ho(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function kr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const l=p=>{p===!1?c(qi(Ye.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?c(p):FC(p)?c(qi(Ye.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(r&&r.instances[s],e,n,l));let f=Promise.resolve(h);t.length<3&&(f=f.then(l)),f.catch(p=>c(p))})}function mh(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(ZE(c)){const l=(c.__vccOpts||c)[e];l&&i.push(kr(l,n,r,o,a,s))}else{let l=c();i.push(()=>l.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=hC(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&kr(p,n,r,o,a,s)()}))}}return i}function HC(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>$i(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>$i(l,c))||s.push(c))}return[n,r,s]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let GC=()=>location.protocol+"//"+location.host;function cw(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),Ug(a,"")}return Ug(n,t)+r+s}function KC(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const m=cw(t,location),y=n.value,E=e.value;let C=0;if(p){if(n.value=m,e.value=p,o&&o===y){o=null;return}C=E?p.position-E.position:0}else r(m);s.forEach(N=>{N(n.value,y,{delta:C,type:sf.pop,direction:C?C>0?ph.forward:ph.back:ph.unknown})})};function c(){o=n.value}function l(p){s.push(p);const m=()=>{const y=s.indexOf(p);y>-1&&s.splice(y,1)};return i.push(m),m}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(xe({},p.state,{scroll:il()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:c,listen:l,destroy:f}}function Gg(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?il():null}}function zC(t){const{history:e,location:n}=window,r={value:cw(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:GC()+t+c;try{e[h?"replaceState":"pushState"](l,"",p),s.value=l}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(c,l){i(c,xe({},e.state,Gg(s.value.back,c,s.value.forward,!0),l,{position:s.value.position}),!0),r.value=c}function a(c,l){const h=xe({},s.value,e.state,{forward:c,scroll:il()});i(h.current,h,!0),i(c,xe({},Gg(r.value,c,null),{position:h.position+1},l),!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function WC(t){t=VC(t);const e=zC(t),n=KC(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=xe({location:"",base:t,go:r,createHref:NC.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Cs=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var ht=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(ht||{});const QC={type:Cs.Static,value:""},JC=/[a-zA-Z0-9_]/;function YC(t){if(!t)return[[]];if(t==="/")return[[QC]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${l}": ${m}`)}let n=ht.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",h="";function f(){l&&(n===ht.Static?i.push({type:Cs.Static,value:l}):n===ht.Param||n===ht.ParamRegExp||n===ht.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Cs.Param,value:l,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function p(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==ht.ParamRegExp){r=n,n=ht.EscapeNext;continue}switch(n){case ht.Static:c==="/"?(l&&f(),o()):c===":"?(f(),n=ht.Param):p();break;case ht.EscapeNext:p(),n=r;break;case ht.Param:c==="("?n=ht.ParamRegExp:JC.test(c)?p():(f(),n=ht.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case ht.ParamRegExp:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=ht.ParamRegExpEnd:h+=c;break;case ht.ParamRegExpEnd:f(),n=ht.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===ht.ParamRegExp&&e(`Unfinished custom RegExp for param "${l}"`),f(),o(),s}const Kg="[^/]+?",XC={sensitive:!1,strict:!1,start:!0,end:!0};var Ut=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Ut||{});const ZC=/[.+*?^${}()[\]/\\]/g;function e1(t,e){const n=xe({},XC,e),r=[];let s=n.start?"^":"";const i=[];for(const l of t){const h=l.length?[]:[Ut.Root];n.strict&&!l.length&&(s+="/");for(let f=0;f<l.length;f++){const p=l[f];let m=Ut.Segment+(n.sensitive?Ut.BonusCaseSensitive:0);if(p.type===Cs.Static)f||(s+="/"),s+=p.value.replace(ZC,"\\$&"),m+=Ut.Static;else if(p.type===Cs.Param){const{value:y,repeatable:E,optional:C,regexp:N}=p;i.push({name:y,repeatable:E,optional:C});const D=N||Kg;if(D!==Kg){m+=Ut.BonusCustomRegExp;try{`${D}`}catch(x){throw new Error(`Invalid custom RegExp for param "${y}" (${D}): `+x.message)}}let v=E?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;f||(v=C&&l.length<2?`(?:/${v})`:"/"+v),C&&(v+="?"),s+=v,m+=Ut.Dynamic,C&&(m+=Ut.BonusOptional),E&&(m+=Ut.BonusRepeatable),D===".*"&&(m+=Ut.BonusWildcard)}h.push(m)}r.push(h)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=Ut.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const h=l.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",y=i[p-1];f[y.name]=m&&y.repeatable?m.split("/"):m}return f}function c(l){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const m of p)if(m.type===Cs.Static)h+=m.value;else if(m.type===Cs.Param){const{value:y,repeatable:E,optional:C}=m,N=y in l?l[y]:"";if(Pn(N)&&!E)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const D=Pn(N)?N.join("/"):N;if(!D)if(C)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${y}"`);h+=D}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function t1(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Ut.Static+Ut.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Ut.Static+Ut.Segment?1:-1:0}function uw(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=t1(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(zg(r))return 1;if(zg(s))return-1}return s.length-r.length}function zg(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const n1={strict:!1,end:!0,sensitive:!1};function r1(t,e,n){const r=e1(YC(t.path),n),s=xe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function s1(t,e){const n=[],r=new Map;e=Bg(n1,e);function s(f){return r.get(f)}function i(f,p,m){const y=!m,E=Qg(f);E.aliasOf=m&&m.record;const C=Bg(e,f),N=[E];if("alias"in f){const x=typeof f.alias=="string"?[f.alias]:f.alias;for(const k of x)N.push(Qg(xe({},E,{components:m?m.record.components:E.components,path:k,aliasOf:m?m.record:E})))}let D,v;for(const x of N){const{path:k}=x;if(p&&k[0]!=="/"){const U=p.record.path,b=U[U.length-1]==="/"?"":"/";x.path=p.record.path+(k&&b+k)}if(D=r1(x,p,C),m?m.alias.push(D):(v=v||D,v!==D&&v.alias.push(D),y&&f.name&&!Jg(D)&&o(f.name)),lw(D)&&c(D),E.children){const U=E.children;for(let b=0;b<U.length;b++)i(U[b],D,m&&m.children[b])}m=m||D}return v?()=>{o(v)}:la}function o(f){if(ow(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function c(f){const p=a1(f,n);n.splice(p,0,f),f.record.name&&!Jg(f)&&r.set(f.record.name,f)}function l(f,p){let m,y={},E,C;if("name"in f&&f.name){if(m=r.get(f.name),!m)throw qi(Ye.MATCHER_NOT_FOUND,{location:f});C=m.record.name,y=xe(Wg(p.params,m.keys.filter(v=>!v.optional).concat(m.parent?m.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),f.params&&Wg(f.params,m.keys.map(v=>v.name))),E=m.stringify(y)}else if(f.path!=null)E=f.path,m=n.find(v=>v.re.test(E)),m&&(y=m.parse(E),C=m.record.name);else{if(m=p.name?r.get(p.name):n.find(v=>v.re.test(p.path)),!m)throw qi(Ye.MATCHER_NOT_FOUND,{location:f,currentLocation:p});C=m.record.name,y=xe({},p.params,f.params),E=m.stringify(y)}const N=[];let D=m;for(;D;)N.unshift(D.record),D=D.parent;return{name:C,path:E,params:y,matched:N,meta:o1(N)}}t.forEach(f=>i(f));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:l,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function Wg(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Qg(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:i1(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function i1(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Jg(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function o1(t){return t.reduce((e,n)=>xe(e,n.meta),{})}function a1(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;uw(t,e[i])<0?r=i:n=i+1}const s=c1(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function c1(t){let e=t;for(;e=e.parent;)if(lw(e)&&uw(t,e)===0)return e}function lw({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Yg(t){const e=Ot(wd),n=Ot(Td),r=on(()=>{const c=He(t.to);return e.resolve(c)}),s=on(()=>{const{matched:c}=r.value,{length:l}=c,h=c[l-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex($i.bind(null,h));if(p>-1)return p;const m=Xg(c[l-2]);return l>1&&Xg(h)===m&&f[f.length-1].path!==m?f.findIndex($i.bind(null,c[l-2])):p}),i=on(()=>s.value>-1&&d1(n.params,r.value.params)),o=on(()=>s.value>-1&&s.value===n.matched.length-1&&iw(n.params,r.value.params));function a(c={}){if(f1(c)){const l=e[He(t.replace)?"replace":"push"](He(t.to)).catch(la);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:on(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function u1(t){return t.length===1?t[0]:t}const l1=rs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Yg,setup(t,{slots:e}){const n=pr(Yg(t)),{options:r}=Ot(wd),s=on(()=>({[Zg(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Zg(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&u1(e.default(n));return t.custom?i:kt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),h1=l1;function f1(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function d1(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Pn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Xg(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Zg=(t,e,n)=>t??e??n,p1=rs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Ot(af),s=on(()=>t.route||r.value),i=Ot(Hg,0),o=on(()=>{let l=He(i);const{matched:h}=s.value;let f;for(;(f=h[l])&&!f.components;)l++;return l}),a=on(()=>s.value.matched[o.value]);jr(Hg,on(()=>o.value+1)),jr(qC,a),jr(af,s);const c=ir();return $r(()=>[c.value,a.value,t.name],([l,h,f],[p,m,y])=>{h&&(h.instances[f]=l,m&&m!==h&&l&&l===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),l&&h&&(!m||!$i(h,m)||!p)&&(h.enterCallbacks[f]||[]).forEach(E=>E(l))},{flush:"post"}),()=>{const l=s.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return e_(n.default,{Component:p,route:l});const m=f.props[h],y=m?m===!0?l.params:typeof m=="function"?m(l):m:null,C=kt(p,xe({},y,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return e_(n.default,{Component:C,route:l})||C}}});function e_(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const hw=p1;function m1(t){const e=s1(t.routes,t),n=t.parseQuery||jC,r=t.stringifyQuery||qg,s=t.history,i=Ho(),o=Ho(),a=Ho(),c=Li(hn);let l=hn;Ei&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=fh.bind(null,$=>""+$),f=fh.bind(null,bC),p=fh.bind(null,Ra);function m($,re){let ee,ue;return ow($)?(ee=e.getRecordMatcher($),ue=re):ue=$,e.addRoute(ue,ee)}function y($){const re=e.getRecordMatcher($);re&&e.removeRoute(re)}function E(){return e.getRoutes().map($=>$.record)}function C($){return!!e.getRecordMatcher($)}function N($,re){if(re=xe({},re||c.value),typeof $=="string"){const V=dh(n,$,re.path),L=e.resolve({path:V.path},re),G=s.createHref(V.fullPath);return xe(V,L,{params:p(L.params),hash:Ra(V.hash),redirectedFrom:void 0,href:G})}let ee;if($.path!=null)ee=xe({},$,{path:dh(n,$.path,re.path).path});else{const V=xe({},$.params);for(const L in V)V[L]==null&&delete V[L];ee=xe({},$,{params:f(V)}),re.params=f(re.params)}const ue=e.resolve(ee,re),ve=$.hash||"";ue.params=h(p(ue.params));const Le=SC(r,xe({},$,{hash:wC(ve),path:ue.path})),R=s.createHref(Le);return xe({fullPath:Le,hash:ve,query:r===qg?$C($.query):$.query||{}},ue,{redirectedFrom:void 0,href:R})}function D($){return typeof $=="string"?dh(n,$,c.value.path):xe({},$)}function v($,re){if(l!==$)return qi(Ye.NAVIGATION_CANCELLED,{from:re,to:$})}function x($){return b($)}function k($){return x(xe(D($),{replace:!0}))}function U($,re){const ee=$.matched[$.matched.length-1];if(ee&&ee.redirect){const{redirect:ue}=ee;let ve=typeof ue=="function"?ue($,re):ue;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=D(ve):{path:ve},ve.params={}),xe({query:$.query,hash:$.hash,params:ve.path!=null?{}:$.params},ve)}}function b($,re){const ee=l=N($),ue=c.value,ve=$.state,Le=$.force,R=$.replace===!0,V=U(ee,ue);if(V)return b(xe(D(V),{state:typeof V=="object"?xe({},ve,V.state):ve,force:Le,replace:R}),re||ee);const L=ee;L.redirectedFrom=re;let G;return!Le&&PC(r,ue,ee)&&(G=qi(Ye.NAVIGATION_DUPLICATED,{to:L,from:ue}),en(ue,ue,!0,!1)),(G?Promise.resolve(G):A(L,ue)).catch(j=>Zn(j)?Zn(j,Ye.NAVIGATION_GUARD_REDIRECT)?j:xn(j):se(j,L,ue)).then(j=>{if(j){if(Zn(j,Ye.NAVIGATION_GUARD_REDIRECT))return b(xe({replace:R},D(j.to),{state:typeof j.to=="object"?xe({},ve,j.to.state):ve,force:Le}),re||L)}else j=S(L,ue,!0,R,ve);return P(L,ue,j),j})}function T($,re){const ee=v($,re);return ee?Promise.reject(ee):Promise.resolve()}function w($){const re=yn.values().next().value;return re&&typeof re.runWithContext=="function"?re.runWithContext($):$()}function A($,re){let ee;const[ue,ve,Le]=HC($,re);ee=mh(ue.reverse(),"beforeRouteLeave",$,re);for(const V of ue)V.leaveGuards.forEach(L=>{ee.push(kr(L,$,re))});const R=T.bind(null,$,re);return ee.push(R),St(ee).then(()=>{ee=[];for(const V of i.list())ee.push(kr(V,$,re));return ee.push(R),St(ee)}).then(()=>{ee=mh(ve,"beforeRouteUpdate",$,re);for(const V of ve)V.updateGuards.forEach(L=>{ee.push(kr(L,$,re))});return ee.push(R),St(ee)}).then(()=>{ee=[];for(const V of Le)if(V.beforeEnter)if(Pn(V.beforeEnter))for(const L of V.beforeEnter)ee.push(kr(L,$,re));else ee.push(kr(V.beforeEnter,$,re));return ee.push(R),St(ee)}).then(()=>($.matched.forEach(V=>V.enterCallbacks={}),ee=mh(Le,"beforeRouteEnter",$,re,w),ee.push(R),St(ee))).then(()=>{ee=[];for(const V of o.list())ee.push(kr(V,$,re));return ee.push(R),St(ee)}).catch(V=>Zn(V,Ye.NAVIGATION_CANCELLED)?V:Promise.reject(V))}function P($,re,ee){a.list().forEach(ue=>w(()=>ue($,re,ee)))}function S($,re,ee,ue,ve){const Le=v($,re);if(Le)return Le;const R=re===hn,V=Ei?history.state:{};ee&&(ue||R?s.replace($.fullPath,xe({scroll:R&&V&&V.scroll},ve)):s.push($.fullPath,ve)),c.value=$,en($,re,ee,R),xn()}let I;function fe(){I||(I=s.listen(($,re,ee)=>{if(!vn.listening)return;const ue=N($),ve=U(ue,vn.currentRoute.value);if(ve){b(xe(ve,{replace:!0,force:!0}),ue).catch(la);return}l=ue;const Le=c.value;Ei&&MC($g(Le.fullPath,ee.delta),il()),A(ue,Le).catch(R=>Zn(R,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_CANCELLED)?R:Zn(R,Ye.NAVIGATION_GUARD_REDIRECT)?(b(xe(D(R.to),{force:!0}),ue).then(V=>{Zn(V,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===sf.pop&&s.go(-1,!1)}).catch(la),Promise.reject()):(ee.delta&&s.go(-ee.delta,!1),se(R,ue,Le))).then(R=>{R=R||S(ue,Le,!1),R&&(ee.delta&&!Zn(R,Ye.NAVIGATION_CANCELLED)?s.go(-ee.delta,!1):ee.type===sf.pop&&Zn(R,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),P(ue,Le,R)}).catch(la)}))}let Ee=Ho(),ie=Ho(),ge;function se($,re,ee){xn($);const ue=ie.list();return ue.length?ue.forEach(ve=>ve($,re,ee)):console.error($),Promise.reject($)}function Me(){return ge&&c.value!==hn?Promise.resolve():new Promise(($,re)=>{Ee.add([$,re])})}function xn($){return ge||(ge=!$,fe(),Ee.list().forEach(([re,ee])=>$?ee($):re()),Ee.reset()),$}function en($,re,ee,ue){const{scrollBehavior:ve}=t;if(!Ei||!ve)return Promise.resolve();const Le=!ee&&LC($g($.fullPath,0))||(ue||!ee)&&history.state&&history.state.scroll||null;return Fi().then(()=>ve($,re,Le)).then(R=>R&&OC(R)).catch(R=>se(R,$,re))}const vt=$=>s.go($);let Qn;const yn=new Set,vn={currentRoute:c,listening:!0,addRoute:m,removeRoute:y,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:E,resolve:N,options:t,push:x,replace:k,go:vt,back:()=>vt(-1),forward:()=>vt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ie.add,isReady:Me,install($){$.component("RouterLink",h1),$.component("RouterView",hw),$.config.globalProperties.$router=vn,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>He(c)}),Ei&&!Qn&&c.value===hn&&(Qn=!0,x(s.location).catch(ue=>{}));const re={};for(const ue in hn)Object.defineProperty(re,ue,{get:()=>c.value[ue],enumerable:!0});$.provide(wd,vn),$.provide(Td,Fn(re)),$.provide(af,c);const ee=$.unmount;yn.add($),$.unmount=function(){yn.delete($),yn.size<1&&(l=hn,I&&I(),I=null,c.value=hn,Qn=!1,ge=!1),ee()}}};function St($){return $.reduce((re,ee)=>re.then(()=>w(ee)),Promise.resolve())}return vn}function fw(t){return Ot(Td)}const g1=/(:\w+)\([^)]+\)/g,_1=/(:\w+)[?+*]/g,y1=/:\w+/g,v1=(t,e)=>e.path.replace(g1,"$1").replace(_1,"$1").replace(y1,n=>t.params[n.slice(1)]?.toString()||""),cf=(t,e)=>{const n=t.route.matched.find(s=>s.components?.default===t.Component.type),r=e??n?.meta.key??(n&&v1(t.route,n));return typeof r=="function"?r(t.route):r},E1=(t,e)=>({default:()=>t?kt(mR,t===!0?{}:t,e):e});function Id(t){return Array.isArray(t)?t:[t]}const w1="modulepreload",T1=function(t,e){return new URL(t,e).href},t_={},En=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=l(n.map(h=>{if(h=T1(h,r),h in t_)return;t_[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(r)for(let y=o.length-1;y>=0;y--){const E=o[y];if(E.href===h&&(!f||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":w1,f||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((y,E)=>{m.addEventListener("load",y),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},gh=[{name:"index",path:"/",component:()=>En(()=>import("./DAn3EIoc.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)},{name:"records-topic",path:"/records/topic",component:()=>En(()=>import("./D-dauVRy.js"),__vite__mapDeps([6,1,2,3,7,8,9]),import.meta.url)},{name:"users-_id",path:"/users/_id",component:()=>En(()=>import("./Cv_W8zgS.js"),__vite__mapDeps([10,1,2,4,3,8,11]),import.meta.url)},{name:"records-slow-quiz",path:"/records/slow-quiz",component:()=>En(()=>import("./4vu-Dirv.js"),__vite__mapDeps([12,1,2,7,8,13]),import.meta.url)},{name:"achievements",path:"/achievements",component:()=>En(()=>import("./BomPc1-r.js"),__vite__mapDeps([14,15,4,2,3,16]),import.meta.url)},{name:"records-oneiromancy",path:"/records/oneiromancy",component:()=>En(()=>import("./jeAH7R9F.js"),__vite__mapDeps([17,1,2,3,7,8,18]),import.meta.url)},{name:"categories-_id",path:"/categories/_id",component:()=>En(()=>import("./Df5PLafO.js"),__vite__mapDeps([19,15,4,2,3,16]),import.meta.url)},{name:"achievements-_id",path:"/achievements/_id",component:()=>En(()=>import("./uVbVw2JP.js"),__vite__mapDeps([20,1,2,3,4,21]),import.meta.url)}],dw=(t,e)=>({default:()=>t?kt(vS,t===!0?{}:t,e):e.default?.()}),I1=/(:\w+)\([^)]+\)/g,b1=/(:\w+)[?+*]/g,A1=/:\w+/g;function n_(t){const e=t?.meta.key??t.path.replace(I1,"$1").replace(b1,"$1").replace(A1,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function R1(t,e){return t===e||e===hn?!1:n_(t)!==n_(e)?!0:!t.matched.every((r,s)=>r.components&&r.components.default===e.matched[s]?.components?.default)}const S1={scrollBehavior(t,e,n){const r=dt(),s=cn().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:pw(t.hash),behavior:s}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=r._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===hn){a(r_(t,e,n,s));return}r.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(r_(t,e,n,s)))})})}};function pw(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function r_(t,e,n,r){if(n)return n;const s=R1(t,e);return t.hash?{el:t.hash,top:pw(t.hash),behavior:s?r:"instant"}:{left:0,top:0}}const P1={hashMode:!1,scrollBehaviorType:"auto"},Sr={...P1,...S1},C1=async(t,e)=>{let n,r;if(!t.meta?.validate)return;const s=([n,r]=ki(()=>Promise.resolve(t.meta.validate(t))),n=await n,r(),n);if(s===!0)return;const i=Ls({fatal:!0,statusCode:s&&s.statusCode||404,statusMessage:s&&s.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},x1=async t=>{let e,n;const r=([e,n]=ki(()=>yd({path:t.path})),e=await e,n(),e);if(r.redirect){const s=r.redirect.includes("#")?r.redirect:r.redirect+t.hash;return Xs(s,{acceptRelative:!0})?(window.location.href=s,!1):s}},V1=[C1,x1],uf={};function D1(t,e,n){const{pathname:r,search:s,hash:i}=e,o=t.indexOf("#");if(o>-1){const l=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(l);return h[0]!=="/"&&(h="/"+h),wg(h,"")}const a=wg(r,t),c=!n||y0(a,n)?a:n;return c+(c.includes("?")?"":s)+i}const N1=zn({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,r=tl().app.baseURL;const s=Sr.history?.(r)??WC(r),i=Sr.routes?([e,n]=ki(()=>Sr.routes(gh)),e=await e,n(),e??gh):gh;let o;const a=m1({...Sr,scrollBehavior:(C,N,D)=>{if(N===hn){o=D;return}if(Sr.scrollBehavior){if(a.options.scrollBehavior=Sr.scrollBehavior,"scrollRestoration"in window.history){const v=a.beforeEach(()=>{v(),window.history.scrollRestoration="manual"})}return Sr.scrollBehavior(C,hn,o||D)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const c=Li(a.currentRoute.value);a.afterEach((C,N)=>{c.value=N}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const l=D1(r,window.location,t.payload.path),h=Li(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};t.hook("page:finish",f),a.afterEach((C,N)=>{C.matched[C.matched.length-1]?.components?.default===N.matched[N.matched.length-1]?.components?.default&&f()});const p={};for(const C in h.value)Object.defineProperty(p,C,{get:()=>h.value[C],enumerable:!0});t._route=Fn(p),t._middleware||={global:[],named:{}};const m=rl();a.afterEach(async(C,N,D)=>{delete t._processingMiddleware,!t.isHydrating&&m.value&&await t.runWithContext(dP),D&&await t.callHook("page:loading:end")});try{[e,n]=ki(()=>a.isReady()),await e,n()}catch(C){[e,n]=ki(()=>t.runWithContext(()=>Es(C))),await e,n()}const y=l!==a.currentRoute.value.fullPath?a.resolve(l):a.currentRoute.value;f();const E=t.payload.state._layout;return a.beforeEach(async(C,N)=>{await t.callHook("page:loading:start"),C.meta=pr(C.meta),t.isHydrating&&E&&!ur(C.meta.layout)&&(C.meta.layout=E),t._processingMiddleware=!0;{const D=new Set([...V1,...t._middleware.global]);for(const v of C.matched){const x=v.meta.middleware;if(x)for(const k of Id(x))D.add(k)}{const v=await t.runWithContext(()=>yd({path:C.path}));if(v.appMiddleware)for(const x in v.appMiddleware)v.appMiddleware[x]?D.add(x):D.delete(x)}for(const v of D){const x=typeof v=="string"?t._middleware.named[v]||await uf[v]?.().then(k=>k.default||k):v;if(!x)throw new Error(`Unknown route middleware: '${v}'.`);try{const k=await t.runWithContext(()=>x(C,N));if(!t.payload.serverRendered&&t.isHydrating&&(k===!1||k instanceof Error)){const U=k||Ls({statusCode:404,statusMessage:`Page Not Found: ${l}`});return await t.runWithContext(()=>Es(U)),!1}if(k===!0)continue;if(k===!1)return k;if(k)return GE(k)&&k.fatal&&await t.runWithContext(()=>Es(k)),k}catch(k){const U=Ls(k);return U.fatal&&await t.runWithContext(()=>Es(U)),U}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(C=>{if(C.matched.length===0)return t.runWithContext(()=>Es(Ls({statusCode:404,fatal:!1,statusMessage:`Page not found: ${C.fullPath}`,data:{path:C.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in y&&(y.name=void 0),await a.replace({...y,force:!0}),a.options.scrollBehavior=Sr.scrollBehavior}catch(C){await t.runWithContext(()=>Es(C))}}),{provide:{router:a}}}}),s_=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),t2=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),bd=t=>{const e=dt();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{s_(()=>t())}):s_(()=>t())},k1=zn({name:"nuxt:payload",setup(t){const e=new Set;cn().beforeResolve(async(n,r)=>{if(n.path===r.path)return;const s=await Fg(n.path);if(s){for(const i of e)delete t.static.data[i];for(const i in s.data)i in t.static.data||e.add(i),t.static.data[i]=s.data[i]}}),bd(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await Fg(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(sl,1e3)})}}),O1=zn(()=>{const t=cn();bd(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),M1=zn(t=>{let e;async function n(){let r;try{r=await sl()}catch(s){const i=s;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,Pg);try{const s=await $fetch(_d("builds/latest.json")+`?${Date.now()}`);s.id!==r?.id&&(t.hooks.callHook("app:manifest:update",s),e&&clearTimeout(e))}catch{}}bd(()=>{e=setTimeout(n,Pg)})});function L1(t={}){const e=t.path||window.location.pathname;let n={};try{n=mu(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:dt().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const F1=zn({name:"nuxt:chunk-reload",setup(t){const e=cn(),n=tl(),r=new Set;e.beforeEach(()=>{r.clear()}),t.hook("app:chunkError",({error:i})=>{r.add(i)});function s(i){const o=md(n.app.baseURL,i.fullPath);L1({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{r.has(i)&&s(o)})}}),B1=zn({name:"nuxt:global-components"}),Mr={default:Bh(()=>En(()=>import("./BY632LTP.js"),__vite__mapDeps([22,3,23]),import.meta.url).then(t=>t.default||t))};function U1(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function j1(t,e=cn()){const{path:n,matched:r}=e.resolve(t);if(!r.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const s=e._preloadPromises||=[];if(s.length>4)return Promise.all(s).then(()=>j1(t,e));e._routePreloaded.add(n);for(const i of r){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>s.splice(s.indexOf(a)));s.push(a)}await Promise.all(s)}const $1=zn({name:"nuxt:prefetch",setup(t){const e=cn();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const r=n?.meta?.layout;r&&typeof Mr[r]=="function"&&await Mr[r]()})}),t.hooks.hook("link:prefetch",n=>{if(Xs(n))return;const r=e.resolve(n);if(!r)return;const s=r.meta.layout;let i=Id(r.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof uf[o]=="function"&&uf[o]();typeof s=="string"&&s in Mr&&U1(Mr[s])})}});/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var q1="store";function _o(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function mw(t){return t!==null&&typeof t=="object"}function H1(t){return t&&typeof t.then=="function"}function G1(t,e){return function(){return t(e)}}function gw(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function _w(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;ol(t,n,[],t._modules.root,!0),Ad(t,n,e)}function Ad(t,e,n){var r=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},a={},c=uv(!0);c.run(function(){_o(i,function(l,h){o[h]=G1(l,t),a[h]=on(function(){return o[h]()}),Object.defineProperty(t.getters,h,{get:function(){return a[h].value},enumerable:!0})})}),t._state=pr({data:e}),t._scope=c,t.strict&&J1(t),r&&n&&t._withCommit(function(){r.data=null}),s&&s.stop()}function ol(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var a=Rd(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit(function(){a[c]=r.state})}var l=r.context=K1(t,o,n);r.forEachMutation(function(h,f){var p=o+f;z1(t,p,h,l)}),r.forEachAction(function(h,f){var p=h.root?f:o+f,m=h.handler||h;W1(t,p,m,l)}),r.forEachGetter(function(h,f){var p=o+f;Q1(t,p,h,l)}),r.forEachChild(function(h,f){ol(t,e,n.concat(f),h,s)})}function K1(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,a){var c=wu(i,o,a),l=c.payload,h=c.options,f=c.type;return(!h||!h.root)&&(f=e+f),t.dispatch(f,l)},commit:r?t.commit:function(i,o,a){var c=wu(i,o,a),l=c.payload,h=c.options,f=c.type;(!h||!h.root)&&(f=e+f),t.commit(f,l,h)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return yw(t,e)}},state:{get:function(){return Rd(t.state,n)}}}),s}function yw(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function z1(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function W1(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return H1(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):a})}function Q1(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function J1(t){$r(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Rd(t,e){return e.reduce(function(n,r){return n[r]},t)}function wu(t,e,n){return mw(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var Y1="vuex bindings",i_="vuex:mutations",_h="vuex:actions",fi="vuex",X1=0;function Z1(t,e){lC({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Y1]},function(n){n.addTimelineLayer({id:i_,label:"Vuex Mutations",color:o_}),n.addTimelineLayer({id:_h,label:"Vuex Actions",color:o_}),n.addInspector({id:fi,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===fi)if(r.filter){var s=[];Tw(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[ww(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===fi){var s=r.nodeId;yw(e,s),r.state=nx(sx(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===fi){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(fi),n.sendInspectorState(fi),n.addTimelineEvent({layerId:i_,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=X1++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:_h,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:_h,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var o_=8702998,ex=6710886,tx=16777215,vw={label:"namespaced",textColor:tx,backgroundColor:ex};function Ew(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function ww(t,e){return{id:e||"root",label:Ew(e),tags:t.namespaced?[vw]:[],children:Object.keys(t._children).map(function(n){return ww(t._children[n],e+n+"/")})}}function Tw(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[vw]:[]}),Object.keys(e._children).forEach(function(s){Tw(t,e._children[s],n,r+s+"/")})}function nx(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=rx(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?Ew(o):o,editable:!1,value:lf(function(){return i[o]})}})}return s}function rx(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=lf(function(){return t[n]})}else e[n]=lf(function(){return t[n]})}),e}function sx(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function lf(t){try{return t()}catch(e){return e}}var Cn=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},Iw={namespaced:{configurable:!0}};Iw.namespaced.get=function(){return!!this._rawModule.namespaced};Cn.prototype.addChild=function(e,n){this._children[e]=n};Cn.prototype.removeChild=function(e){delete this._children[e]};Cn.prototype.getChild=function(e){return this._children[e]};Cn.prototype.hasChild=function(e){return e in this._children};Cn.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Cn.prototype.forEachChild=function(e){_o(this._children,e)};Cn.prototype.forEachGetter=function(e){this._rawModule.getters&&_o(this._rawModule.getters,e)};Cn.prototype.forEachAction=function(e){this._rawModule.actions&&_o(this._rawModule.actions,e)};Cn.prototype.forEachMutation=function(e){this._rawModule.mutations&&_o(this._rawModule.mutations,e)};Object.defineProperties(Cn.prototype,Iw);var Zs=function(e){this.register([],e,!1)};Zs.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};Zs.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};Zs.prototype.update=function(e){bw([],this.root,e)};Zs.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new Cn(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&_o(n.modules,function(a,c){s.register(e.concat(c),a,r)})};Zs.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};Zs.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function bw(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;bw(t.concat(r),e.getChild(r),n.modules[r])}}function ix(t){return new Zt(t)}var Zt=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Zs(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,a=this,c=a.dispatch,l=a.commit;this.dispatch=function(p,m){return c.call(o,p,m)},this.commit=function(p,m,y){return l.call(o,p,m,y)},this.strict=s;var h=this._modules.root.state;ol(this,h,[],this._modules.root),Ad(this,h),r.forEach(function(f){return f(n)})},Sd={state:{configurable:!0}};Zt.prototype.install=function(e,n){e.provide(n||q1,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&Z1(e,this)};Sd.state.get=function(){return this._state.data};Sd.state.set=function(t){};Zt.prototype.commit=function(e,n,r){var s=this,i=wu(e,n,r),o=i.type,a=i.payload,c={type:o,payload:a},l=this._mutations[o];l&&(this._withCommit(function(){l.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(h){return h(c,s.state)}))};Zt.prototype.dispatch=function(e,n){var r=this,s=wu(e,n),i=s.type,o=s.payload,a={type:i,payload:o},c=this._actions[i];if(c){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(a,r.state)})}catch{}var l=c.length>1?Promise.all(c.map(function(h){return h(o)})):c[0](o);return new Promise(function(h,f){l.then(function(p){try{r._actionSubscribers.filter(function(m){return m.after}).forEach(function(m){return m.after(a,r.state)})}catch{}h(p)},function(p){try{r._actionSubscribers.filter(function(m){return m.error}).forEach(function(m){return m.error(a,r.state,p)})}catch{}f(p)})})}};Zt.prototype.subscribe=function(e,n){return gw(e,this._subscribers,n)};Zt.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return gw(r,this._actionSubscribers,n)};Zt.prototype.watch=function(e,n,r){var s=this;return $r(function(){return e(s.state,s.getters)},n,Object.assign({},r))};Zt.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Zt.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),ol(this,this.state,e,this._modules.get(e),r.preserveState),Ad(this,this.state)};Zt.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=Rd(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),_w(this)};Zt.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Zt.prototype.hotUpdate=function(e){this._modules.update(e),_w(this,!0)};Zt.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Zt.prototype,Sd);var n2=Cd(function(t,e){var n={};return Pd(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){var a=this.$store.state,c=this.$store.getters;if(t){var l=xd(this.$store,"mapState",t);if(!l)return;a=l.context.state,c=l.context.getters}return typeof i=="function"?i.call(this,a,c):a[i]},n[s].vuex=!0}),n}),r2=Cd(function(t,e){var n={};return Pd(e).forEach(function(r){var s=r.key,i=r.val;i=t+i,n[s]=function(){if(!(t&&!xd(this.$store,"mapGetters",t)))return this.$store.getters[i]},n[s].vuex=!0}),n}),s2=Cd(function(t,e){var n={};return Pd(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];var l=this.$store.dispatch;if(t){var h=xd(this.$store,"mapActions",t);if(!h)return;l=h.context.dispatch}return typeof i=="function"?i.apply(this,[l].concat(a)):l.apply(this.$store,[i].concat(a))}}),n});function Pd(t){return ox(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function ox(t){return Array.isArray(t)||mw(t)}function Cd(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function xd(t,e,n){var r=t._modulesNamespaceMap[n];return r}/*!
  * vuexfire v3.2.5
  * (c) 2020 Eduardo San Martin Morote
  * @license MIT
  */var Aw="vuexfire/SET_VALUE",Rw="vuexfire/ARRAY_ADD",Sw="vuexfire/ARRAY_REMOVE";function Vd(t,e){return e.split(".").reduce(function(n,r){return n[r]},t)}function ax(t,e,n){var r=(""+e).split("."),s=r.pop(),i=r.reduce(function(o,a){return o[a]},t);return Array.isArray(i)?i.splice(Number(s),1,n):i[s]=n}function cx(t){return t&&typeof t=="object"}function ux(t){return t.toDate}function lx(t){return t&&t.onSnapshot}function hx(t,e){var n=!1;return function(){if(!n)return n=!0,t(e())}}function fx(t){return Object.defineProperty(t.data()||{},"id",{value:t.id})}function hf(t,e,n){var r=[{},{}],s=Object.keys(n).reduce(function(o,a){var c=n[a];return o[c.path]=c.data(),o},{});function i(o,a,c,l){a=a||{};var h=l[0],f=l[1];Object.getOwnPropertyNames(o).forEach(function(C){var N=Object.getOwnPropertyDescriptor(o,C);N&&!N.enumerable&&Object.defineProperty(h,C,N)});for(var p in o){var m=o[p];if(m==null||m instanceof Date||ux(m)||m.longitude&&m.latitude)h[p]=m;else if(lx(m))h[p]=typeof a=="object"&&p in a&&typeof a[p]!="string"?a[p]:m.path,f[c+p]=m;else if(Array.isArray(m)){h[p]=Array(m.length);for(var y=0;y<m.length;y++){var E=m[y];E&&E.path in s&&(h[p][y]=s[E.path])}i(m,a[p]||h[p],c+p+".",[h[p],f])}else cx(m)?(h[p]={},i(m,a[p],c+p+".",[h[p],f])):h[p]=m}}return i(t,e,"",r),r}var Sa={maxRefDepth:2,reset:!0,serialize:fx,wait:!1};function Tu(t){for(var e in t)t[e].unsub()}function Pw(t,e,n,r,s,i,o,a){var c=hf(t.serialize(r),Vd(e,n),s),l=c[0],h=c[1];i.set(e,n,l),ff(t,e,n,s,h,i,o,a)}function dx(t,e){var n=t.ref,r=t.target,s=t.path,i=t.depth,o=t.resolve,a=t.ops,c=Object.create(null),l=n.onSnapshot(function(h){h.exists?Pw(e,r,s,h,c,a,i,o):(a.set(r,s,null),o())});return function(){l(),Tu(c)}}function ff(t,e,n,r,s,i,o,a){var c=Object.keys(s),l=Object.keys(r).filter(function(y){return c.indexOf(y)<0});if(l.forEach(function(y){r[y].unsub(),delete r[y]}),!c.length||++o>t.maxRefDepth)return a(n);var h=0,f=c.length,p=Object.create(null);function m(y){y in p&&++h>=f&&a(n)}c.forEach(function(y){var E=r[y],C=s[y],N=n+"."+y;if(p[N]=!0,E)if(E.path!==C.path)E.unsub();else return;r[y]={data:function(){return Vd(e,N)},unsub:dx({ref:C,target:e,path:N,depth:o,ops:i,resolve:m.bind(null,N)},t),path:C.path}})}function px(t,e){var n=t.vm,r=t.key,s=t.collection,i=t.ops,o=t.resolve,a=t.reject;e===void 0&&(e=Sa);var c=Object.assign({},Sa,e),l=c.wait?[]:i.set(n,r,[]),h=o,f,p=[],m={added:function(E){var C=E.newIndex,N=E.doc;p.splice(C,0,Object.create(null));var D=p[C],v=hf(c.serialize(N),void 0,D),x=v[0],k=v[1];i.add(l,C,x),ff(c,l,C,D,k,i,0,o.bind(null,N))},modified:function(E){var C=E.oldIndex,N=E.newIndex,D=E.doc,v=p[C],x=l[C],k=hf(c.serialize(D),x,v),U=k[0],b=k[1];p.splice(N,0,v),i.remove(l,C),i.add(l,N,U),ff(c,l,N,v,b,i,0,o)},removed:function(E){var C=E.oldIndex;i.remove(l,C),Tu(p.splice(C,1)[0])}},y=s.onSnapshot(function(E){var C=typeof E.docChanges=="function"?E.docChanges():E.docChanges;if(!f&&C.length){f=!0;for(var N=0,D=C.length,v=Object.create(null),x=0;x<D;x++)v[C[x].doc.id]=!0;o=function(k){var U=k.id;U in v&&++N>=D&&(c.wait&&i.set(n,r,l),h(n[r]),o=function(){})}}C.forEach(function(k){m[k.type](k)}),C.length||(c.wait&&i.set(n,r,l),o(l))},a);return function(E){if(y(),E!==!1){var C=typeof E=="function"?E():[];i.set(n,r,C)}p.forEach(Tu)}}function mx(t,e){var n=t.vm,r=t.key,s=t.document,i=t.resolve,o=t.reject,a=t.ops;e===void 0&&(e=Sa);var c=Object.assign({},Sa,e),l=Object.create(null);i=hx(i,function(){return Vd(n,r)});var h=s.onSnapshot(function(f){f.exists?Pw(c,n,r,f,l,a,0,i):(a.set(n,r,null),i(null))},o);return function(f){if(h(),f!==!1){var p=typeof f=="function"?f():null;a.set(n,r,p)}Tu(l)}}var Go,gx=(Go={},Go[Aw]=function(t,e){var n=e.path,r=e.target,s=e.data;ax(r,n,s)},Go[Rw]=function(t,e){var n=e.newIndex,r=e.data,s=e.target;s.splice(n,0,r)},Go[Sw]=function(t,e){var n=e.oldIndex,r=e.target;return r.splice(n,1)[0]},Go);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Iu=function(){return Iu=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Iu.apply(this,arguments)},yh={root:!0},df=new WeakMap;function _x(t,e,n,r,s,i){var o=df.get(e);return o||(o=Object.create(null),df.set(e,o)),n in o&&Cw(e,n,i.wait?typeof i.reset=="function"?i.reset:!1:i.reset),new Promise(function(a,c){o[n]="where"in r?px({vm:t,key:n,collection:r,ops:s,resolve:a,reject:c},i):mx({vm:t,key:n,document:r,ops:s,resolve:a,reject:c},i)})}function Cw(t,e,n){var r=df.get(t);!r||!r[e]||(r[e](n),delete r[e])}function mn(t){return function(n,r){var s=n.state,i=n.commit,o={set:function(a,c,l){return i(Aw,{path:c,target:a,data:l},yh),l},add:function(a,c,l){return i(Rw,{target:a,newIndex:c,data:l},yh)},remove:function(a,c){var l=a[c];return i(Sw,{target:a,oldIndex:c},yh),[l]}};return t.call(this,Iu(Iu({},n),{bindFirestoreRef:function(a,c,l){return _x(s,i,a,c,o,Object.assign({},Sa,l))},unbindFirestoreRef:function(a,c){return Cw(i,a,c)}}),r)}}const yx=()=>{};var a_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Vw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(p=64)),r.push(n[h],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||f==null)throw new Ex;const p=i<<2|a>>4;if(r.push(p),l!==64){const m=a<<4&240|l>>2;if(r.push(m),f!==64){const y=l<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ex extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wx=function(t){const e=xw(t);return Vw.encodeByteArray(e,!0)},bu=function(t){return wx(t).replace(/\./g,"")},Dw=function(t){try{return Vw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Au(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Tx(n)||(t[n]=Au(t[n],e[n]));return t}function Tx(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=()=>Dd().__FIREBASE_DEFAULTS__,bx=()=>{if(typeof process>"u"||typeof a_>"u")return;const t=a_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ax=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Dw(t[1]);return e&&JSON.parse(e)},Nw=()=>{try{return yx()||Ix()||bx()||Ax()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nd=()=>Nw()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[bu(JSON.stringify(n)),bu(JSON.stringify(o)),""].join(".")}const ha={};function Cx(){const t={prod:[],emulator:[]};for(const e of Object.keys(ha))ha[e]?t.emulator.push(e):t.prod.push(e);return t}function xx(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let c_=!1;function Vx(t,e){if(typeof window>"u"||typeof document>"u"||!kd(window.location.host)||ha[t]===e||ha[t]||c_)return;ha[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=Cx().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function l(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{c_=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=xx(r),m=n("text"),y=document.getElementById(m)||document.createElement("span"),E=n("learnmore"),C=document.getElementById(E)||document.createElement("a"),N=n("preprendIcon"),D=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const v=p.element;a(v),h(C,E);const x=l();c(D,N),v.append(D,y,C,x),document.body.appendChild(v)}i?(y.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kw(){const t=Nw()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Dx(){return typeof window<"u"||Ow()}function Ow(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Mw(){return!kw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lw(){return!kw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Fw(){try{return typeof indexedDB=="object"}catch{return!1}}function Nx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="FirebaseError";class ei extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kx,Object.setPrototypeOf(this,ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,al.prototype.create)}}class al{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Ox(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ei(s,a,r)}}function Ox(t,e){return t.replace(Mx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Mx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Hi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(l_(i)&&l_(o)){if(!Hi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function l_(t){return t!==null&&typeof t=="object"}function Lx(t,e){const n=new Fx(t,e);return n.subscribe.bind(n)}class Fx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Bx(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vh),s.error===void 0&&(s.error=vh),s.complete===void 0&&(s.complete=vh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class js{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Rx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($x(e))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ws){return this.instances.has(e)}getOptions(e=ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ws){return this.component?this.component.multipleInstances?e:ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jx(t){return t===ws?void 0:t}function $x(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ux(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=[];var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const Uw={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},qx=be.INFO,Hx={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},Gx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Hx[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Md{constructor(e){this.name=e,this._logLevel=qx,this._logHandler=Gx,this._userLogHandler=null,Od.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Uw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}function Kx(t){Od.forEach(e=>{e.setLogLevel(t)})}function zx(t,e){for(const n of Od){let r=null;e&&e.level&&(r=Uw[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(r??s.logLevel)&&t({level:be[i].toLowerCase(),message:a,args:o,type:s.name})}}}const Wx=(t,e)=>e.some(n=>t instanceof n);let h_,f_;function Qx(){return h_||(h_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jx(){return f_||(f_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jw=new WeakMap,pf=new WeakMap,$w=new WeakMap,Eh=new WeakMap,Ld=new WeakMap;function Yx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(qr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jw.set(n,t)}).catch(()=>{}),Ld.set(e,t),e}function Xx(t){if(pf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});pf.set(t,e)}let mf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$w.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Zx(t){mf=t(mf)}function eV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wh(this),e,...n);return $w.set(r,e.sort?e.sort():[e]),qr(r)}:Jx().includes(t)?function(...e){return t.apply(wh(this),e),qr(jw.get(this))}:function(...e){return qr(t.apply(wh(this),e))}}function tV(t){return typeof t=="function"?eV(t):(t instanceof IDBTransaction&&Xx(t),Wx(t,Qx())?new Proxy(t,mf):t)}function qr(t){if(t instanceof IDBRequest)return Yx(t);if(Eh.has(t))return Eh.get(t);const e=tV(t);return e!==t&&(Eh.set(t,e),Ld.set(e,t)),e}const wh=t=>Ld.get(t);function nV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=qr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(qr(o.result),c.oldVersion,c.newVersion,qr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const rV=["get","getKey","getAll","getAllKeys","count"],sV=["put","add","delete","clear"],Th=new Map;function d_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Th.get(e))return Th.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=sV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||rV.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return Th.set(e,i),i}Zx(t=>({...t,get:(e,n,r)=>d_(e,n)||t.get(e,n,r),has:(e,n)=>!!d_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oV(t){return t.getComponent()?.type==="VERSION"}const Su="@firebase/app",gf="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new Md("@firebase/app"),aV="@firebase/app-compat",cV="@firebase/analytics-compat",uV="@firebase/analytics",lV="@firebase/app-check-compat",hV="@firebase/app-check",fV="@firebase/auth",dV="@firebase/auth-compat",pV="@firebase/database",mV="@firebase/data-connect",gV="@firebase/database-compat",_V="@firebase/functions",yV="@firebase/functions-compat",vV="@firebase/installations",EV="@firebase/installations-compat",wV="@firebase/messaging",TV="@firebase/messaging-compat",IV="@firebase/performance",bV="@firebase/performance-compat",AV="@firebase/remote-config",RV="@firebase/remote-config-compat",SV="@firebase/storage",PV="@firebase/storage-compat",CV="@firebase/firestore",xV="@firebase/ai",VV="@firebase/firestore-compat",DV="firebase",NV="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="[DEFAULT]",kV={[Su]:"fire-core",[aV]:"fire-core-compat",[uV]:"fire-analytics",[cV]:"fire-analytics-compat",[hV]:"fire-app-check",[lV]:"fire-app-check-compat",[fV]:"fire-auth",[dV]:"fire-auth-compat",[pV]:"fire-rtdb",[mV]:"fire-data-connect",[gV]:"fire-rtdb-compat",[_V]:"fire-fn",[yV]:"fire-fn-compat",[vV]:"fire-iid",[EV]:"fire-iid-compat",[wV]:"fire-fcm",[TV]:"fire-fcm-compat",[IV]:"fire-perf",[bV]:"fire-perf-compat",[AV]:"fire-rc",[RV]:"fire-rc-compat",[SV]:"fire-gcs",[PV]:"fire-gcs-compat",[CV]:"fire-fst",[VV]:"fire-fst-compat",[xV]:"fire-vertex","fire-js":"fire-js",[DV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new Map,Gi=new Map,Ki=new Map;function Pa(t,e){try{t.container.addComponent(e)}catch(n){hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qw(t,e){t.container.addOrOverwriteComponent(e)}function zi(t){const e=t.name;if(Ki.has(e))return hr.debug(`There were multiple attempts to register component ${e}.`),!1;Ki.set(e,t);for(const n of Wr.values())Pa(n,t);for(const n of Gi.values())Pa(n,t);return!0}function Hw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function OV(t,e,n=zr){Hw(t,e).clearInstance(n)}function Fd(t){return t.options!==void 0}function Gw(t){return Fd(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Kw(t){return t==null?!1:t.settings!==void 0}function MV(){Ki.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},an=new al("app","Firebase",LV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zw=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t,e){const n=Dw(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(n).exp*1e3,i=new Date().getTime();s-i<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class FV extends zw{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const a=e;super(a.options,o,s)}this._serverConfig={automaticDataCollectionEnabled:i,...n},this._serverConfig.authIdToken&&p_(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&p_(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,or(Su,gf,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){jd(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw an.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=NV;function Ud(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:zr,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw an.create("bad-app-name",{appName:String(s)});if(n||(n=Nd()),!n)throw an.create("no-options");const i=Wr.get(s);if(i){if(Hi(n,i.options)&&Hi(r,i.config))return i;throw an.create("duplicate-app",{appName:s})}const o=new Bw(s);for(const c of Ki.values())o.addComponent(c);const a=new zw(n,r,o);return Wr.set(s,a),a}function BV(t,e={}){if(Dx()&&!Ow())throw an.create("invalid-server-app-environment");let n,r=e||{};if(t&&(Fd(t)?n=t.options:Gw(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=Nd()),!n)throw an.create("no-options");const s={...r,...n};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const i=h=>[...h].reduce((f,p)=>Math.imul(31,f)+p.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw an.create("finalization-registry-not-supported",{});const o=""+i(JSON.stringify(s)),a=Gi.get(o);if(a)return a.incRefCount(r.releaseOnDeref),a;const c=new Bw(o);for(const h of Ki.values())c.addComponent(h);const l=new FV(n,r,o,c);return Gi.set(o,l),l}function UV(t=zr){const e=Wr.get(t);if(!e&&t===zr&&Nd())return Ud();if(!e)throw an.create("no-app",{appName:t});return e}function jV(){return Array.from(Wr.values())}async function jd(t){let e=!1;const n=t.name;Wr.has(n)?(e=!0,Wr.delete(n)):Gi.has(n)&&t.decRefCount()<=0&&(Gi.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function or(t,e,n){let r=kV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hr.warn(o.join(" "));return}zi(new js(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Ww(t,e){if(t!==null&&typeof t!="function")throw an.create("invalid-log-argument");zx(t,e)}function Qw(t){Kx(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V="firebase-heartbeat-database",qV=1,Ca="firebase-heartbeat-store";let Ih=null;function Jw(){return Ih||(Ih=nV($V,qV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ca)}catch(n){console.warn(n)}}}}).catch(t=>{throw an.create("idb-open",{originalErrorMessage:t.message})})),Ih}async function HV(t){try{const n=(await Jw()).transaction(Ca),r=await n.objectStore(Ca).get(Yw(t));return await n.done,r}catch(e){if(e instanceof ei)hr.warn(e.message);else{const n=an.create("idb-get",{originalErrorMessage:e?.message});hr.warn(n.message)}}}async function m_(t,e){try{const r=(await Jw()).transaction(Ca,"readwrite");await r.objectStore(Ca).put(e,Yw(t)),await r.done}catch(n){if(n instanceof ei)hr.warn(n.message);else{const r=an.create("idb-set",{originalErrorMessage:n?.message});hr.warn(r.message)}}}function Yw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=1024,KV=30;class zV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=g_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>KV){const s=JV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){hr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=g_(),{heartbeatsToSend:n,unsentEntries:r}=WV(this._heartbeatsCache.heartbeats),s=bu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return hr.warn(e),""}}}function g_(){return new Date().toISOString().substring(0,10)}function WV(t,e=GV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),__(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),__(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fw()?Nx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function __(t){return bu(JSON.stringify({version:2,heartbeats:t})).length}function JV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(t){zi(new js("platform-logger",e=>new iV(e),"PRIVATE")),zi(new js("heartbeat",e=>new zV(e),"PRIVATE")),or(Su,gf,t),or(Su,gf,"esm2020"),or("fire-js","")}YV("");const XV=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ei,SDK_VERSION:Bd,_DEFAULT_ENTRY_NAME:zr,_addComponent:Pa,_addOrOverwriteComponent:qw,_apps:Wr,_clearComponents:MV,_components:Ki,_getProvider:Hw,_isFirebaseApp:Fd,_isFirebaseServerApp:Kw,_isFirebaseServerAppSettings:Gw,_registerComponent:zi,_removeServiceInstance:OV,_serverApps:Gi,deleteApp:jd,getApp:UV,getApps:jV,initializeApp:Ud,initializeServerApp:BV,onLog:Ww,registerVersion:or,setLogLevel:Qw},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n){this._delegate=e,this.firebase=n,Pa(e,new js("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),jd(this._delegate)))}_getService(e,n=zr){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=zr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Pa(this._delegate,e)}_addOrOverwriteComponent(e){qw(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},y_=new al("app-compat","Firebase",eD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:or,setLogLevel:Qw,onLog:Ww,apps:null,SDK_VERSION:Bd,INTERNAL:{registerComponent:a,removeApp:r,useAsService:c,modularAPIs:XV}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(l){delete e[l]}function s(l){if(l=l||zr,!u_(e,l))throw y_.create("no-app",{appName:l});return e[l]}s.App=t;function i(l,h={}){const f=Ud(l,h);if(u_(e,f.name))return e[f.name];const p=new t(f,n);return e[f.name]=p,p}function o(){return Object.keys(e).map(l=>e[l])}function a(l){const h=l.name,f=h.replace("-compat","");if(zi(l)&&l.type==="PUBLIC"){const p=(m=s())=>{if(typeof m[f]!="function")throw y_.create("invalid-app-argument",{appName:h});return m[f]()};l.serviceProps!==void 0&&Au(p,l.serviceProps),n[f]=p,t.prototype[f]=function(...m){return this._getService.bind(this,h).apply(this,l.multipleInstances?m:[])}}return l.type==="PUBLIC"?n[f]:null}function c(l,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(){const t=tD(ZV);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:Xw,extendNamespace:e,createSubscribe:Lx,ErrorFactory:al,deepExtend:Au};function e(n){Au(t,n)}return t}const nD=Xw();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Md("@firebase/app-compat"),rD="@firebase/app-compat",sD="0.5.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){or(rD,sD,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Dd();if(t.firebase!==void 0){v_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&v_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const xa=nD;iD();var oD="firebase",aD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xa.registerVersion(oD,aD,"app-compat");var E_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,Zw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,T){function w(){}w.prototype=T.prototype,b.F=T.prototype,b.prototype=new w,b.prototype.constructor=b,b.D=function(A,P,S){for(var I=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)I[fe-2]=arguments[fe];return T.prototype[P].apply(A,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,T,w){w||(w=0);const A=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)A[P]=T.charCodeAt(w++)|T.charCodeAt(w++)<<8|T.charCodeAt(w++)<<16|T.charCodeAt(w++)<<24;else for(P=0;P<16;++P)A[P]=T[w++]|T[w++]<<8|T[w++]<<16|T[w++]<<24;T=b.g[0],w=b.g[1],P=b.g[2];let S=b.g[3],I;I=T+(S^w&(P^S))+A[0]+3614090360&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(P^T&(w^P))+A[1]+3905402710&4294967295,S=T+(I<<12&4294967295|I>>>20),I=P+(w^S&(T^w))+A[2]+606105819&4294967295,P=S+(I<<17&4294967295|I>>>15),I=w+(T^P&(S^T))+A[3]+3250441966&4294967295,w=P+(I<<22&4294967295|I>>>10),I=T+(S^w&(P^S))+A[4]+4118548399&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(P^T&(w^P))+A[5]+1200080426&4294967295,S=T+(I<<12&4294967295|I>>>20),I=P+(w^S&(T^w))+A[6]+2821735955&4294967295,P=S+(I<<17&4294967295|I>>>15),I=w+(T^P&(S^T))+A[7]+4249261313&4294967295,w=P+(I<<22&4294967295|I>>>10),I=T+(S^w&(P^S))+A[8]+1770035416&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(P^T&(w^P))+A[9]+2336552879&4294967295,S=T+(I<<12&4294967295|I>>>20),I=P+(w^S&(T^w))+A[10]+4294925233&4294967295,P=S+(I<<17&4294967295|I>>>15),I=w+(T^P&(S^T))+A[11]+2304563134&4294967295,w=P+(I<<22&4294967295|I>>>10),I=T+(S^w&(P^S))+A[12]+1804603682&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(P^T&(w^P))+A[13]+4254626195&4294967295,S=T+(I<<12&4294967295|I>>>20),I=P+(w^S&(T^w))+A[14]+2792965006&4294967295,P=S+(I<<17&4294967295|I>>>15),I=w+(T^P&(S^T))+A[15]+1236535329&4294967295,w=P+(I<<22&4294967295|I>>>10),I=T+(P^S&(w^P))+A[1]+4129170786&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^P&(T^w))+A[6]+3225465664&4294967295,S=T+(I<<9&4294967295|I>>>23),I=P+(T^w&(S^T))+A[11]+643717713&4294967295,P=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(P^S))+A[0]+3921069994&4294967295,w=P+(I<<20&4294967295|I>>>12),I=T+(P^S&(w^P))+A[5]+3593408605&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^P&(T^w))+A[10]+38016083&4294967295,S=T+(I<<9&4294967295|I>>>23),I=P+(T^w&(S^T))+A[15]+3634488961&4294967295,P=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(P^S))+A[4]+3889429448&4294967295,w=P+(I<<20&4294967295|I>>>12),I=T+(P^S&(w^P))+A[9]+568446438&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^P&(T^w))+A[14]+3275163606&4294967295,S=T+(I<<9&4294967295|I>>>23),I=P+(T^w&(S^T))+A[3]+4107603335&4294967295,P=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(P^S))+A[8]+1163531501&4294967295,w=P+(I<<20&4294967295|I>>>12),I=T+(P^S&(w^P))+A[13]+2850285829&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^P&(T^w))+A[2]+4243563512&4294967295,S=T+(I<<9&4294967295|I>>>23),I=P+(T^w&(S^T))+A[7]+1735328473&4294967295,P=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(P^S))+A[12]+2368359562&4294967295,w=P+(I<<20&4294967295|I>>>12),I=T+(w^P^S)+A[5]+4294588738&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^P)+A[8]+2272392833&4294967295,S=T+(I<<11&4294967295|I>>>21),I=P+(S^T^w)+A[11]+1839030562&4294967295,P=S+(I<<16&4294967295|I>>>16),I=w+(P^S^T)+A[14]+4259657740&4294967295,w=P+(I<<23&4294967295|I>>>9),I=T+(w^P^S)+A[1]+2763975236&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^P)+A[4]+1272893353&4294967295,S=T+(I<<11&4294967295|I>>>21),I=P+(S^T^w)+A[7]+4139469664&4294967295,P=S+(I<<16&4294967295|I>>>16),I=w+(P^S^T)+A[10]+3200236656&4294967295,w=P+(I<<23&4294967295|I>>>9),I=T+(w^P^S)+A[13]+681279174&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^P)+A[0]+3936430074&4294967295,S=T+(I<<11&4294967295|I>>>21),I=P+(S^T^w)+A[3]+3572445317&4294967295,P=S+(I<<16&4294967295|I>>>16),I=w+(P^S^T)+A[6]+76029189&4294967295,w=P+(I<<23&4294967295|I>>>9),I=T+(w^P^S)+A[9]+3654602809&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^P)+A[12]+3873151461&4294967295,S=T+(I<<11&4294967295|I>>>21),I=P+(S^T^w)+A[15]+530742520&4294967295,P=S+(I<<16&4294967295|I>>>16),I=w+(P^S^T)+A[2]+3299628645&4294967295,w=P+(I<<23&4294967295|I>>>9),I=T+(P^(w|~S))+A[0]+4096336452&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~P))+A[7]+1126891415&4294967295,S=T+(I<<10&4294967295|I>>>22),I=P+(T^(S|~w))+A[14]+2878612391&4294967295,P=S+(I<<15&4294967295|I>>>17),I=w+(S^(P|~T))+A[5]+4237533241&4294967295,w=P+(I<<21&4294967295|I>>>11),I=T+(P^(w|~S))+A[12]+1700485571&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~P))+A[3]+2399980690&4294967295,S=T+(I<<10&4294967295|I>>>22),I=P+(T^(S|~w))+A[10]+4293915773&4294967295,P=S+(I<<15&4294967295|I>>>17),I=w+(S^(P|~T))+A[1]+2240044497&4294967295,w=P+(I<<21&4294967295|I>>>11),I=T+(P^(w|~S))+A[8]+1873313359&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~P))+A[15]+4264355552&4294967295,S=T+(I<<10&4294967295|I>>>22),I=P+(T^(S|~w))+A[6]+2734768916&4294967295,P=S+(I<<15&4294967295|I>>>17),I=w+(S^(P|~T))+A[13]+1309151649&4294967295,w=P+(I<<21&4294967295|I>>>11),I=T+(P^(w|~S))+A[4]+4149444226&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~P))+A[11]+3174756917&4294967295,S=T+(I<<10&4294967295|I>>>22),I=P+(T^(S|~w))+A[2]+718787259&4294967295,P=S+(I<<15&4294967295|I>>>17),I=w+(S^(P|~T))+A[9]+3951481745&4294967295,b.g[0]=b.g[0]+T&4294967295,b.g[1]=b.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.v=function(b,T){T===void 0&&(T=b.length);const w=T-this.blockSize,A=this.C;let P=this.h,S=0;for(;S<T;){if(P==0)for(;S<=w;)s(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<T;)if(A[P++]=b.charCodeAt(S++),P==this.blockSize){s(this,A),P=0;break}}else for(;S<T;)if(A[P++]=b[S++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=T},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var T=1;T<b.length-8;++T)b[T]=0;T=this.o*8;for(var w=b.length-8;w<b.length;++w)b[w]=T&255,T/=256;for(this.v(b),b=Array(16),T=0,w=0;w<4;++w)for(let A=0;A<32;A+=8)b[T++]=this.g[w]>>>A&255;return b};function i(b,T){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=T(b)}function o(b,T){this.h=T;const w=[];let A=!0;for(let P=b.length-1;P>=0;P--){const S=b[P]|0;A&&S==T||(w[P]=S,A=!1)}this.g=w}var a={};function c(b){return-128<=b&&b<128?i(b,function(T){return new o([T|0],T<0?-1:0)}):new o([b|0],b<0?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return f;if(b<0)return C(l(-b));const T=[];let w=1;for(let A=0;b>=w;A++)T[A]=b/w|0,w*=4294967296;return new o(T,0)}function h(b,T){if(b.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b.charAt(0)=="-")return C(h(b.substring(1),T));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=l(Math.pow(T,8));let A=f;for(let S=0;S<b.length;S+=8){var P=Math.min(8,b.length-S);const I=parseInt(b.substring(S,S+P),T);P<8?(P=l(Math.pow(T,P)),A=A.j(P).add(l(I))):(A=A.j(w),A=A.add(l(I)))}return A}var f=c(0),p=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(E(this))return-C(this).m();let b=0,T=1;for(let w=0;w<this.g.length;w++){const A=this.i(w);b+=(A>=0?A:4294967296+A)*T,T*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(y(this))return"0";if(E(this))return"-"+C(this).toString(b);const T=l(Math.pow(b,6));var w=this;let A="";for(;;){const P=x(w,T).g;w=N(w,P.j(T));let S=((w.g.length>0?w.g[0]:w.h)>>>0).toString(b);if(w=P,y(w))return S+A;for(;S.length<6;)S="0"+S;A=S+A}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function y(b){if(b.h!=0)return!1;for(let T=0;T<b.g.length;T++)if(b.g[T]!=0)return!1;return!0}function E(b){return b.h==-1}t.l=function(b){return b=N(this,b),E(b)?-1:y(b)?0:1};function C(b){const T=b.g.length,w=[];for(let A=0;A<T;A++)w[A]=~b.g[A];return new o(w,~b.h).add(p)}t.abs=function(){return E(this)?C(this):this},t.add=function(b){const T=Math.max(this.g.length,b.g.length),w=[];let A=0;for(let P=0;P<=T;P++){let S=A+(this.i(P)&65535)+(b.i(P)&65535),I=(S>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);A=I>>>16,S&=65535,I&=65535,w[P]=I<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function N(b,T){return b.add(C(T))}t.j=function(b){if(y(this)||y(b))return f;if(E(this))return E(b)?C(this).j(C(b)):C(C(this).j(b));if(E(b))return C(this.j(C(b)));if(this.l(m)<0&&b.l(m)<0)return l(this.m()*b.m());const T=this.g.length+b.g.length,w=[];for(var A=0;A<2*T;A++)w[A]=0;for(A=0;A<this.g.length;A++)for(let P=0;P<b.g.length;P++){const S=this.i(A)>>>16,I=this.i(A)&65535,fe=b.i(P)>>>16,Ee=b.i(P)&65535;w[2*A+2*P]+=I*Ee,D(w,2*A+2*P),w[2*A+2*P+1]+=S*Ee,D(w,2*A+2*P+1),w[2*A+2*P+1]+=I*fe,D(w,2*A+2*P+1),w[2*A+2*P+2]+=S*fe,D(w,2*A+2*P+2)}for(b=0;b<T;b++)w[b]=w[2*b+1]<<16|w[2*b];for(b=T;b<2*T;b++)w[b]=0;return new o(w,0)};function D(b,T){for(;(b[T]&65535)!=b[T];)b[T+1]+=b[T]>>>16,b[T]&=65535,T++}function v(b,T){this.g=b,this.h=T}function x(b,T){if(y(T))throw Error("division by zero");if(y(b))return new v(f,f);if(E(b))return T=x(C(b),T),new v(C(T.g),C(T.h));if(E(T))return T=x(b,C(T)),new v(C(T.g),T.h);if(b.g.length>30){if(E(b)||E(T))throw Error("slowDivide_ only works with positive integers.");for(var w=p,A=T;A.l(b)<=0;)w=k(w),A=k(A);var P=U(w,1),S=U(A,1);for(A=U(A,2),w=U(w,2);!y(A);){var I=S.add(A);I.l(b)<=0&&(P=P.add(w),S=I),A=U(A,1),w=U(w,1)}return T=N(b,P.j(T)),new v(P,T)}for(P=f;b.l(T)>=0;){for(w=Math.max(1,Math.floor(b.m()/T.m())),A=Math.ceil(Math.log(w)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),S=l(w),I=S.j(T);E(I)||I.l(b)>0;)w-=A,S=l(w),I=S.j(T);y(S)&&(S=p),P=P.add(S),b=N(b,I)}return new v(P,b)}t.B=function(b){return x(this,b).h},t.and=function(b){const T=Math.max(this.g.length,b.g.length),w=[];for(let A=0;A<T;A++)w[A]=this.i(A)&b.i(A);return new o(w,this.h&b.h)},t.or=function(b){const T=Math.max(this.g.length,b.g.length),w=[];for(let A=0;A<T;A++)w[A]=this.i(A)|b.i(A);return new o(w,this.h|b.h)},t.xor=function(b){const T=Math.max(this.g.length,b.g.length),w=[];for(let A=0;A<T;A++)w[A]=this.i(A)^b.i(A);return new o(w,this.h^b.h)};function k(b){const T=b.g.length+1,w=[];for(let A=0;A<T;A++)w[A]=b.i(A)<<1|b.i(A-1)>>>31;return new o(w,b.h)}function U(b,T){const w=T>>5;T%=32;const A=b.g.length-w,P=[];for(let S=0;S<A;S++)P[S]=T>0?b.i(S+w)>>>T|b.i(S+w+1)<<32-T:b.i(S+w);return new o(P,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Zw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Hr=o}).apply(typeof E_<"u"?E_:typeof self<"u"?self:typeof window<"u"?window:{});var Nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eT,ea,tT,Gc,_f,nT,rT,sT;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nc=="object"&&Nc];for(var d=0;d<u.length;++d){var g=u[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,d){if(d)e:{var g=r;u=u.split(".");for(var _=0;_<u.length-1;_++){var M=u[_];if(!(M in g))break e;g=g[M]}u=u[u.length-1],_=g[u],d=d(_),d!=_&&d!=null&&e(g,u,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(d){var g=[],_;for(_ in d)Object.prototype.hasOwnProperty.call(d,_)&&g.push([_,d[_]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function c(u,d,g){return u.call.apply(u.bind,arguments)}function l(u,d,g){return l=c,l.apply(null,arguments)}function h(u,d){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function f(u,d){function g(){}g.prototype=d.prototype,u.Z=d.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(_,M,B){for(var X=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)X[ye-2]=arguments[ye];return d.prototype[M].apply(_,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const d=u.length;if(d>0){const g=Array(d);for(let _=0;_<d;_++)g[_]=u[_];return g}return[]}function y(u,d){for(let _=1;_<arguments.length;_++){const M=arguments[_];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=u.length||0;const B=M.length||0;u.length=g+B;for(let X=0;X<B;X++)u[g+X]=M[X]}else u.push(M)}}class E{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function C(u){o.setTimeout(()=>{throw u},0)}function N(){var u=b;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class D{constructor(){this.h=this.g=null}add(d,g){const _=v.get();_.set(d,g),this.h?this.h.next=_:this.g=_,this.h=_}}var v=new E(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let k,U=!1,b=new D,T=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(w)}};function w(){for(var u;u=N();){try{u.h.call(u.g)}catch(g){C(g)}var d=v;d.j(u),d.h<100&&(d.h++,u.next=d.g,d.g=u)}U=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,d),o.removeEventListener("test",g,d)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function fe(u,d){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,d)}f(fe,P),fe.prototype.init=function(u,d){const g=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget,d||(g=="mouseover"?d=u.fromElement:g=="mouseout"&&(d=u.toElement)),this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),ie=0;function ge(u,d,g,_,M){this.listener=u,this.proxy=null,this.src=d,this.type=g,this.capture=!!_,this.ha=M,this.key=++ie,this.da=this.fa=!1}function se(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Me(u,d,g){for(const _ in u)d.call(g,u[_],_,u)}function xn(u,d){for(const g in u)d.call(void 0,u[g],g,u)}function en(u){const d={};for(const g in u)d[g]=u[g];return d}const vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Qn(u,d){let g,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(g in _)u[g]=_[g];for(let B=0;B<vt.length;B++)g=vt[B],Object.prototype.hasOwnProperty.call(_,g)&&(u[g]=_[g])}}function yn(u){this.src=u,this.g={},this.h=0}yn.prototype.add=function(u,d,g,_,M){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const X=St(u,d,_,M);return X>-1?(d=u[X],g||(d.fa=!1)):(d=new ge(d,this.src,B,!!_,M),d.fa=g,u.push(d)),d};function vn(u,d){const g=d.type;if(g in u.g){var _=u.g[g],M=Array.prototype.indexOf.call(_,d,void 0),B;(B=M>=0)&&Array.prototype.splice.call(_,M,1),B&&(se(d),u.g[g].length==0&&(delete u.g[g],u.h--))}}function St(u,d,g,_){for(let M=0;M<u.length;++M){const B=u[M];if(!B.da&&B.listener==d&&B.capture==!!g&&B.ha==_)return M}return-1}var $="closure_lm_"+(Math.random()*1e6|0),re={};function ee(u,d,g,_,M){if(Array.isArray(d)){for(let B=0;B<d.length;B++)ee(u,d[B],g,_,M);return null}return g=K(g),u&&u[Ee]?u.J(d,g,a(_)?!!_.capture:!1,M):ue(u,d,g,!1,_,M)}function ue(u,d,g,_,M,B){if(!d)throw Error("Invalid event type");const X=a(M)?!!M.capture:!!M;let ye=G(u);if(ye||(u[$]=ye=new yn(u)),g=ye.add(d,g,_,X,B),g.proxy)return g;if(_=ve(),g.proxy=_,_.src=u,_.listener=g,u.addEventListener)S||(M=X),M===void 0&&(M=!1),u.addEventListener(d.toString(),_,M);else if(u.attachEvent)u.attachEvent(V(d.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ve(){function u(g){return d.call(u.src,u.listener,g)}const d=L;return u}function Le(u,d,g,_,M){if(Array.isArray(d))for(var B=0;B<d.length;B++)Le(u,d[B],g,_,M);else _=a(_)?!!_.capture:!!_,g=K(g),u&&u[Ee]?(u=u.i,B=String(d).toString(),B in u.g&&(d=u.g[B],g=St(d,g,_,M),g>-1&&(se(d[g]),Array.prototype.splice.call(d,g,1),d.length==0&&(delete u.g[B],u.h--)))):u&&(u=G(u))&&(d=u.g[d.toString()],u=-1,d&&(u=St(d,g,_,M)),(g=u>-1?d[u]:null)&&R(g))}function R(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Ee])vn(d.i,u);else{var g=u.type,_=u.proxy;d.removeEventListener?d.removeEventListener(g,_,u.capture):d.detachEvent?d.detachEvent(V(g),_):d.addListener&&d.removeListener&&d.removeListener(_),(g=G(d))?(vn(g,u),g.h==0&&(g.src=null,d[$]=null)):se(u)}}}function V(u){return u in re?re[u]:re[u]="on"+u}function L(u,d){if(u.da)u=!0;else{d=new fe(d,this);const g=u.listener,_=u.ha||u.src;u.fa&&R(u),u=g.call(_,d)}return u}function G(u){return u=u[$],u instanceof yn?u:null}var j="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(u){return typeof u=="function"?u:(u[j]||(u[j]=function(d){return u.handleEvent(d)}),u[j])}function Q(){A.call(this),this.i=new yn(this),this.M=this,this.G=null}f(Q,A),Q.prototype[Ee]=!0,Q.prototype.removeEventListener=function(u,d,g,_){Le(this,u,d,g,_)};function z(u,d){var g,_=u.G;if(_)for(g=[];_;_=_.G)g.push(_);if(u=u.M,_=d.type||d,typeof d=="string")d=new P(d,u);else if(d instanceof P)d.target=d.target||u;else{var M=d;d=new P(_,u),Qn(d,M)}M=!0;let B,X;if(g)for(X=g.length-1;X>=0;X--)B=d.g=g[X],M=J(B,_,!0,d)&&M;if(B=d.g=u,M=J(B,_,!0,d)&&M,M=J(B,_,!1,d)&&M,g)for(X=0;X<g.length;X++)B=d.g=g[X],M=J(B,_,!1,d)&&M}Q.prototype.N=function(){if(Q.Z.N.call(this),this.i){var u=this.i;for(const d in u.g){const g=u.g[d];for(let _=0;_<g.length;_++)se(g[_]);delete u.g[d],u.h--}}this.G=null},Q.prototype.J=function(u,d,g,_){return this.i.add(String(u),d,!1,g,_)},Q.prototype.K=function(u,d,g,_){return this.i.add(String(u),d,!0,g,_)};function J(u,d,g,_){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();let M=!0;for(let B=0;B<d.length;++B){const X=d[B];if(X&&!X.da&&X.capture==g){const ye=X.listener,lt=X.ha||X.src;X.fa&&vn(u.i,X),M=ye.call(lt,_)!==!1&&M}}return M&&!_.defaultPrevented}function W(u,d){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=l(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(u,d||0)}function le(u){u.g=W(()=>{u.g=null,u.i&&(u.i=!1,le(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class te extends A{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:le(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(u){A.call(this),this.h=u,this.g={}}f(ae,A);var pe=[];function we(u){Me(u.g,function(d,g){this.g.hasOwnProperty(g)&&R(d)},u),u.g={}}ae.prototype.N=function(){ae.Z.N.call(this),we(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ce=o.JSON.stringify,Pe=o.JSON.parse,Pt=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ct(){}function Kt(){}var ut={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jn(){P.call(this,"d")}f(Jn,P);function ii(){P.call(this,"c")}f(ii,P);var et={},tn=null;function us(){return tn=tn||new Q}et.Ia="serverreachability";function Ro(u){P.call(this,et.Ia,u)}f(Ro,P);function So(u){const d=us();z(d,new Ro(d))}et.STAT_EVENT="statevent";function Yp(u,d){P.call(this,et.STAT_EVENT,u),this.stat=d}f(Yp,P);function Ft(u){const d=us();z(d,new Yp(d,u))}et.Ja="timingevent";function Xp(u,d){P.call(this,et.Ja,u),this.size=d}f(Xp,P);function Po(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},d)}function Co(){this.g=!0}Co.prototype.ua=function(){this.g=!1};function qb(u,d,g,_,M,B){u.info(function(){if(u.g)if(B){var X="",ye=B.split("&");for(let Fe=0;Fe<ye.length;Fe++){var lt=ye[Fe].split("=");if(lt.length>1){const mt=lt[0];lt=lt[1];const Dn=mt.split("_");X=Dn.length>=2&&Dn[1]=="type"?X+(mt+"="+lt+"&"):X+(mt+"=redacted&")}}}else X=null;else X=B;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+d+`
`+g+`
`+X})}function Hb(u,d,g,_,M,B,X){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+d+`
`+g+`
`+B+" "+X})}function oi(u,d,g,_){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Kb(u,g)+(_?" "+_:"")})}function Gb(u,d){u.info(function(){return"TIMEOUT: "+d})}Co.prototype.info=function(){};function Kb(u,d){if(!u.g)return d;if(!d)return null;try{const B=JSON.parse(d);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var g=B[u];if(!(g.length<2)){var _=g[1];if(Array.isArray(_)&&!(_.length<1)){var M=_[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<_.length;X++)_[X]=""}}}}return Ce(B)}catch{return d}}var pc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},em;function kl(){}f(kl,ct),kl.prototype.g=function(){return new XMLHttpRequest},em=new kl;function xo(u){return encodeURIComponent(String(u))}function zb(u){var d=1;u=u.split(":");const g=[];for(;d>0&&u.length;)g.push(u.shift()),d--;return u.length&&g.push(u.join(":")),g}function Er(u,d,g,_){this.j=u,this.i=d,this.l=g,this.S=_||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new tm}function tm(){this.i=null,this.g="",this.h=!1}var nm={},Ol={};function Ml(u,d,g){u.M=1,u.A=gc(Vn(d)),u.u=g,u.R=!0,rm(u,null)}function rm(u,d){u.F=Date.now(),mc(u),u.B=Vn(u.A);var g=u.B,_=u.S;Array.isArray(_)||(_=[String(_)]),gm(g.i,"t",_),u.C=0,g=u.j.L,u.h=new tm,u.g=km(u.j,g?d:null,!u.u),u.P>0&&(u.O=new te(l(u.Y,u,u.g),u.P)),d=u.V,g=u.g,_=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(pe[0]=M.toString()),M=pe);for(let B=0;B<M.length;B++){const X=ee(g,M[B],_||d.handleEvent,!1,d.h||d);if(!X)break;d.g[X.key]=X}d=u.J?en(u.J):{},u.u?(u.v||(u.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,d)):(u.v="GET",u.g.ea(u.B,u.v,null,d)),So(),qb(u.i,u.v,u.B,u.l,u.S,u.u)}Er.prototype.ba=function(u){u=u.target;const d=this.O;d&&Ir(u)==3?d.j():this.Y(u)},Er.prototype.Y=function(u){try{if(u==this.g)e:{const ye=Ir(this.g),lt=this.g.ya(),Fe=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Im(this.g)))){this.K||ye!=4||lt==7||(lt==8||Fe<=0?So(3):So(2)),Ll(this);var d=this.g.ca();this.X=d;var g=Wb(this);if(this.o=d==200,Hb(this.i,this.v,this.B,this.l,this.S,ye,d),this.o){if(this.U&&!this.L){t:{if(this.g){var _,M=this.g;if((_=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(_)){var B=_;break t}}B=null}if(u=B)oi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fl(this,u);else{this.o=!1,this.m=3,Ft(12),ls(this),Vo(this);break e}}if(this.R){u=!0;let mt;for(;!this.K&&this.C<g.length;)if(mt=Qb(this,g),mt==Ol){ye==4&&(this.m=4,Ft(14),u=!1),oi(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==nm){this.m=4,Ft(15),oi(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else oi(this.i,this.l,mt,null),Fl(this,mt);if(sm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||g.length!=0||this.h.h||(this.m=1,Ft(16),u=!1),this.o=this.o&&u,!u)oi(this.i,this.l,g,"[Invalid Chunked Response]"),ls(this),Vo(this);else if(g.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Kl(X),X.P=!0,Ft(11))}}else oi(this.i,this.l,g,null),Fl(this,g);ye==4&&ls(this),this.o&&!this.K&&(ye==4?xm(this.j,this):(this.o=!1,mc(this)))}else uA(this.g),d==400&&g.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),ls(this),Vo(this)}}}catch{}finally{}};function Wb(u){if(!sm(u))return u.g.la();const d=Im(u.g);if(d==="")return"";let g="";const _=d.length,M=Ir(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ls(u),Vo(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<_;B++)u.h.h=!0,g+=u.h.i.decode(d[B],{stream:!(M&&B==_-1)});return d.length=0,u.h.g+=g,u.C=0,u.h.g}function sm(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Qb(u,d){var g=u.C,_=d.indexOf(`
`,g);return _==-1?Ol:(g=Number(d.substring(g,_)),isNaN(g)?nm:(_+=1,_+g>d.length?Ol:(d=d.slice(_,_+g),u.C=_+g,d)))}Er.prototype.cancel=function(){this.K=!0,ls(this)};function mc(u){u.T=Date.now()+u.H,im(u,u.H)}function im(u,d){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Po(l(u.aa,u),d)}function Ll(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Er.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Gb(this.i,this.B),this.M!=2&&(So(),Ft(17)),ls(this),this.m=2,Vo(this)):im(this,this.T-u)};function Vo(u){u.j.I==0||u.K||xm(u.j,u)}function ls(u){Ll(u);var d=u.O;d&&typeof d.dispose=="function"&&d.dispose(),u.O=null,we(u.V),u.g&&(d=u.g,u.g=null,d.abort(),d.dispose())}function Fl(u,d){try{var g=u.j;if(g.I!=0&&(g.g==u||Bl(g.h,u))){if(!u.L&&Bl(g.h,u)&&g.I==3){try{var _=g.Ba.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)wc(g),vc(g);else break e;Gl(g),Ft(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Po(l(g.Va,g),6e3));cm(g.h)<=1&&g.ta&&(g.ta=void 0)}else fs(g,11)}else if((u.L||g.g==u)&&wc(g),!I(d))for(M=g.Ba.g.parse(d),d=0;d<M.length;d++){let Fe=M[d];const mt=Fe[0];if(!(mt<=g.K))if(g.K=mt,Fe=Fe[1],g.I==2)if(Fe[0]=="c"){g.M=Fe[1],g.ba=Fe[2];const Dn=Fe[3];Dn!=null&&(g.ka=Dn,g.j.info("VER="+g.ka));const ds=Fe[4];ds!=null&&(g.za=ds,g.j.info("SVER="+g.za));const br=Fe[5];br!=null&&typeof br=="number"&&br>0&&(_=1.5*br,g.O=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Ar=u.g;if(Ar){const Ic=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ic){var B=_.h;B.g||Ic.indexOf("spdy")==-1&&Ic.indexOf("quic")==-1&&Ic.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Ul(B,B.h),B.h=null))}if(_.G){const zl=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(_.wa=zl,qe(_.J,_.G,zl))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),_=g;var X=u;if(_.na=Nm(_,_.L?_.ba:null,_.W),X.L){um(_.h,X);var ye=X,lt=_.O;lt&&(ye.H=lt),ye.D&&(Ll(ye),mc(ye)),_.g=X}else Pm(_);g.i.length>0&&Ec(g)}else Fe[0]!="stop"&&Fe[0]!="close"||fs(g,7);else g.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?fs(g,7):Hl(g):Fe[0]!="noop"&&g.l&&g.l.qa(Fe),g.A=0)}}So(4)}catch{}}var Jb=class{constructor(u,d){this.g=u,this.map=d}};function om(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function am(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function cm(u){return u.h?1:u.g?u.g.size:0}function Bl(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Ul(u,d){u.g?u.g.add(d):u.h=d}function um(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}om.prototype.cancel=function(){if(this.i=lm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function lm(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const g of u.g.values())d=d.concat(g.G);return d}return m(u.i)}var hm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yb(u,d){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const _=u[g].indexOf("=");let M,B=null;_>=0?(M=u[g].substring(0,_),B=u[g].substring(_+1)):M=u[g],d(M,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function wr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;u instanceof wr?(this.l=u.l,Do(this,u.j),this.o=u.o,this.g=u.g,No(this,u.u),this.h=u.h,jl(this,_m(u.i)),this.m=u.m):u&&(d=String(u).match(hm))?(this.l=!1,Do(this,d[1]||"",!0),this.o=ko(d[2]||""),this.g=ko(d[3]||"",!0),No(this,d[4]),this.h=ko(d[5]||"",!0),jl(this,d[6]||"",!0),this.m=ko(d[7]||"")):(this.l=!1,this.i=new Mo(null,this.l))}wr.prototype.toString=function(){const u=[];var d=this.j;d&&u.push(Oo(d,fm,!0),":");var g=this.g;return(g||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Oo(d,fm,!0),"@"),u.push(xo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Oo(g,g.charAt(0)=="/"?eA:Zb,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Oo(g,nA)),u.join("")},wr.prototype.resolve=function(u){const d=Vn(this);let g=!!u.j;g?Do(d,u.j):g=!!u.o,g?d.o=u.o:g=!!u.g,g?d.g=u.g:g=u.u!=null;var _=u.h;if(g)No(d,u.u);else if(g=!!u.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var M=d.h.lastIndexOf("/");M!=-1&&(_=d.h.slice(0,M+1)+_)}if(M=_,M==".."||M==".")_="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){_=M.lastIndexOf("/",0)==0,M=M.split("/");const B=[];for(let X=0;X<M.length;){const ye=M[X++];ye=="."?_&&X==M.length&&B.push(""):ye==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),_&&X==M.length&&B.push("")):(B.push(ye),_=!0)}_=B.join("/")}else _=M}return g?d.h=_:g=u.i.toString()!=="",g?jl(d,_m(u.i)):g=!!u.m,g&&(d.m=u.m),d};function Vn(u){return new wr(u)}function Do(u,d,g){u.j=g?ko(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function No(u,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);u.u=d}else u.u=null}function jl(u,d,g){d instanceof Mo?(u.i=d,rA(u.i,u.l)):(g||(d=Oo(d,tA)),u.i=new Mo(d,u.l))}function qe(u,d,g){u.i.set(d,g)}function gc(u){return qe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ko(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Oo(u,d,g){return typeof u=="string"?(u=encodeURI(u).replace(d,Xb),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Xb(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var fm=/[#\/\?@]/g,Zb=/[#\?:]/g,eA=/[#\?]/g,tA=/[#\?@]/g,nA=/#/g;function Mo(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function hs(u){u.g||(u.g=new Map,u.h=0,u.i&&Yb(u.i,function(d,g){u.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}t=Mo.prototype,t.add=function(u,d){hs(this),this.i=null,u=ai(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(d),this.h+=1,this};function dm(u,d){hs(u),d=ai(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function pm(u,d){return hs(u),d=ai(u,d),u.g.has(d)}t.forEach=function(u,d){hs(this),this.g.forEach(function(g,_){g.forEach(function(M){u.call(d,M,_,this)},this)},this)};function mm(u,d){hs(u);let g=[];if(typeof d=="string")pm(u,d)&&(g=g.concat(u.g.get(ai(u,d))));else for(u=Array.from(u.g.values()),d=0;d<u.length;d++)g=g.concat(u[d]);return g}t.set=function(u,d){return hs(this),this.i=null,u=ai(this,u),pm(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=mm(this,u),u.length>0?String(u[0]):d):d};function gm(u,d,g){dm(u,d),g.length>0&&(u.i=null,u.g.set(ai(u,d),m(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(let _=0;_<d.length;_++){var g=d[_];const M=xo(g);g=mm(this,g);for(let B=0;B<g.length;B++){let X=M;g[B]!==""&&(X+="="+xo(g[B])),u.push(X)}}return this.i=u.join("&")};function _m(u){const d=new Mo;return d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),d}function ai(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function rA(u,d){d&&!u.j&&(hs(u),u.i=null,u.g.forEach(function(g,_){const M=_.toLowerCase();_!=M&&(dm(this,_),gm(this,M,g))},u)),u.j=d}function sA(u,d){const g=new Co;if(o.Image){const _=new Image;_.onload=h(Tr,g,"TestLoadImage: loaded",!0,d,_),_.onerror=h(Tr,g,"TestLoadImage: error",!1,d,_),_.onabort=h(Tr,g,"TestLoadImage: abort",!1,d,_),_.ontimeout=h(Tr,g,"TestLoadImage: timeout",!1,d,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else d(!1)}function iA(u,d){const g=new Co,_=new AbortController,M=setTimeout(()=>{_.abort(),Tr(g,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:_.signal}).then(B=>{clearTimeout(M),B.ok?Tr(g,"TestPingServer: ok",!0,d):Tr(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),Tr(g,"TestPingServer: error",!1,d)})}function Tr(u,d,g,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(g)}catch{}}function oA(){this.g=new Pt}function $l(u){this.i=u.Sb||null,this.h=u.ab||!1}f($l,ct),$l.prototype.g=function(){return new _c(this.i,this.h)};function _c(u,d){Q.call(this),this.H=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(_c,Q),t=_c.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=d,this.readyState=1,Fo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(d.body=u),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lo(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fo(this)),this.g&&(this.readyState=3,Fo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ym(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ym(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Lo(this):Fo(this),this.readyState==3&&ym(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Lo(this))},t.Na=function(u){this.g&&(this.response=u,Lo(this))},t.ga=function(){this.g&&Lo(this)};function Lo(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Fo(u)}t.setRequestHeader=function(u,d){this.A.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=d.next();return u.join(`\r
`)};function Fo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_c.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function vm(u){let d="";return Me(u,function(g,_){d+=_,d+=":",d+=g,d+=`\r
`}),d}function ql(u,d,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=vm(g),typeof u=="string"?g!=null&&xo(g):qe(u,d,g))}function Je(u){Q.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Je,Q);var aA=/^https?$/i,cA=["POST","PUT"];t=Je.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,d,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():em.g(),this.g.onreadystatechange=p(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(B){Em(this,B);return}if(u=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)g.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const B of _.keys())g.set(B,_.get(B));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(B=>B.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(cA,d,void 0)>=0)||_||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,X]of g)this.g.setRequestHeader(B,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){Em(this,B)}};function Em(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.o=5,wm(u),yc(u)}function wm(u){u.A||(u.A=!0,z(u,"complete"),z(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,z(this,"complete"),z(this,"abort"),yc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yc(this,!0)),Je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Tm(this):this.Xa())},t.Xa=function(){Tm(this)};function Tm(u){if(u.h&&typeof i<"u"){if(u.v&&Ir(u)==4)setTimeout(u.Ca.bind(u),0);else if(z(u,"readystatechange"),Ir(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var _;if(_=B===0){let X=String(u.D).match(hm)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),_=!aA.test(X?X.toLowerCase():"")}g=_}if(g)z(u,"complete"),z(u,"success");else{u.o=6;try{var M=Ir(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",wm(u)}}finally{yc(u)}}}}function yc(u,d){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,d||z(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ir(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Ir(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Pe(d)}};function Im(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function uA(u){const d={};u=(u.g&&Ir(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(I(u[_]))continue;var g=zb(u[_]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const B=d[M]||[];d[M]=B,B.push(g)}xn(d,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bo(u,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||d}function bm(u){this.za=0,this.i=[],this.j=new Co,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bo("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bo("baseRetryDelayMs",5e3,u),this.Za=Bo("retryDelaySeedMs",1e4,u),this.Ta=Bo("forwardChannelMaxRetries",2,u),this.va=Bo("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new om(u&&u.concurrentRequestLimit),this.Ba=new oA,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=bm.prototype,t.ka=8,t.I=1,t.connect=function(u,d,g,_){Ft(0),this.W=u,this.H=d||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.J=Nm(this,null,this.W),Ec(this)};function Hl(u){if(Am(u),u.I==3){var d=u.V++,g=Vn(u.J);if(qe(g,"SID",u.M),qe(g,"RID",d),qe(g,"TYPE","terminate"),Uo(u,g),d=new Er(u,u.j,d),d.M=2,d.A=gc(Vn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=d.A,g=!0),g||(d.g=km(d.j,null),d.g.ea(d.A)),d.F=Date.now(),mc(d)}Dm(u)}function vc(u){u.g&&(Kl(u),u.g.cancel(),u.g=null)}function Am(u){vc(u),u.v&&(o.clearTimeout(u.v),u.v=null),wc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Ec(u){if(!am(u.h)&&!u.m){u.m=!0;var d=u.Ea;k||T(),U||(k(),U=!0),b.add(d,u),u.D=0}}function lA(u,d){return cm(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=d.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Po(l(u.Ea,u,d),Vm(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Er(this,this.j,u);let B=this.o;if(this.U&&(B?(B=en(B),Qn(B,this.U)):B=this.U),this.u!==null||this.R||(M.J=B,B=null),this.S)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,d>4096){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Sm(this,M,d),g=Vn(this.J),qe(g,"RID",u),qe(g,"CVER",22),this.G&&qe(g,"X-HTTP-Session-Id",this.G),Uo(this,g),B&&(this.R?d="headers="+xo(vm(B))+"&"+d:this.u&&ql(g,this.u,B)),Ul(this.h,M),this.Ra&&qe(g,"TYPE","init"),this.S?(qe(g,"$req",d),qe(g,"SID","null"),M.U=!0,Ml(M,g,null)):Ml(M,g,d),this.I=2}}else this.I==3&&(u?Rm(this,u):this.i.length==0||am(this.h)||Rm(this))};function Rm(u,d){var g;d?g=d.l:g=u.V++;const _=Vn(u.J);qe(_,"SID",u.M),qe(_,"RID",g),qe(_,"AID",u.K),Uo(u,_),u.u&&u.o&&ql(_,u.u,u.o),g=new Er(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),d&&(u.i=d.G.concat(u.i)),d=Sm(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ul(u.h,g),Ml(g,_,d)}function Uo(u,d){u.H&&Me(u.H,function(g,_){qe(d,_,g)}),u.l&&Me({},function(g,_){qe(d,_,g)})}function Sm(u,d,g){g=Math.min(u.i.length,g);const _=u.l?l(u.l.Ka,u.l,u):null;e:{var M=u.i;let ye=-1;for(;;){const lt=["count="+g];ye==-1?g>0?(ye=M[0].g,lt.push("ofs="+ye)):ye=0:lt.push("ofs="+ye);let Fe=!0;for(let mt=0;mt<g;mt++){var B=M[mt].g;const Dn=M[mt].map;if(B-=ye,B<0)ye=Math.max(0,M[mt].g-100),Fe=!1;else try{B="req"+B+"_"||"";try{var X=Dn instanceof Map?Dn:Object.entries(Dn);for(const[ds,br]of X){let Ar=br;a(br)&&(Ar=Ce(br)),lt.push(B+ds+"="+encodeURIComponent(Ar))}}catch(ds){throw lt.push(B+"type="+encodeURIComponent("_badmap")),ds}}catch{_&&_(Dn)}}if(Fe){X=lt.join("&");break e}}X=void 0}return u=u.i.splice(0,g),d.G=u,X}function Pm(u){if(!u.g&&!u.v){u.Y=1;var d=u.Da;k||T(),U||(k(),U=!0),b.add(d,u),u.A=0}}function Gl(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Po(l(u.Da,u),Vm(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Cm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Po(l(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),vc(this),Cm(this))};function Kl(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Cm(u){u.g=new Er(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var d=Vn(u.na);qe(d,"RID","rpc"),qe(d,"SID",u.M),qe(d,"AID",u.K),qe(d,"CI",u.F?"0":"1"),!u.F&&u.ia&&qe(d,"TO",u.ia),qe(d,"TYPE","xmlhttp"),Uo(u,d),u.u&&u.o&&ql(d,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=gc(Vn(d)),g.u=null,g.R=!0,rm(g,u)}t.Va=function(){this.C!=null&&(this.C=null,vc(this),Gl(this),Ft(19))};function wc(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function xm(u,d){var g=null;if(u.g==d){wc(u),Kl(u),u.g=null;var _=2}else if(Bl(u.h,d))g=d.G,um(u.h,d),_=1;else return;if(u.I!=0){if(d.o)if(_==1){g=d.u?d.u.length:0,d=Date.now()-d.F;var M=u.D;_=us(),z(_,new Xp(_,g)),Ec(u)}else Pm(u);else if(M=d.m,M==3||M==0&&d.X>0||!(_==1&&lA(u,d)||_==2&&Gl(u)))switch(g&&g.length>0&&(d=u.h,d.i=d.i.concat(g)),M){case 1:fs(u,5);break;case 4:fs(u,10);break;case 3:fs(u,6);break;default:fs(u,2)}}}function Vm(u,d){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*d}function fs(u,d){if(u.j.info("Error code "+d),d==2){var g=l(u.bb,u),_=u.Ua;const M=!_;_=new wr(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Do(_,"https"),gc(_),M?sA(_.toString(),g):iA(_.toString(),g)}else Ft(2);u.I=0,u.l&&u.l.pa(d),Dm(u),Am(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function Dm(u){if(u.I=0,u.ja=[],u.l){const d=lm(u.h);(d.length!=0||u.i.length!=0)&&(y(u.ja,d),y(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function Nm(u,d,g){var _=g instanceof wr?Vn(g):new wr(g);if(_.g!="")d&&(_.g=d+"."+_.g),No(_,_.u);else{var M=o.location;_=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;const B=new wr(null);_&&Do(B,_),d&&(B.g=d),M&&No(B,M),g&&(B.h=g),_=B}return g=u.G,d=u.wa,g&&d&&qe(_,g,d),qe(_,"VER",u.ka),Uo(u,_),_}function km(u,d,g){if(d&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Aa&&!u.ma?new Je(new $l({ab:g})):new Je(u.ma),d.Fa(u.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Om(){}t=Om.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Tc(){}Tc.prototype.g=function(u,d){return new nn(u,d)};function nn(u,d){Q.call(this),this.g=new bm(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(u?u["X-WebChannel-Client-Profile"]=d.sa:u={"X-WebChannel-Client-Profile":d.sa}),this.g.U=u,(u=d&&d.Qb)&&!I(u)&&(this.g.u=u),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!I(d)&&(this.g.G=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new ci(this)}f(nn,Q),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Hl(this.g)},nn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Ce(u),u=g);d.i.push(new Jb(d.Ya++,u)),d.I==3&&Ec(d)},nn.prototype.N=function(){this.g.l=null,delete this.j,Hl(this.g),delete this.g,nn.Z.N.call(this)};function Mm(u){Jn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const g in d){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}f(Mm,Jn);function Lm(){ii.call(this),this.status=1}f(Lm,ii);function ci(u){this.g=u}f(ci,Om),ci.prototype.ra=function(){z(this.g,"a")},ci.prototype.qa=function(u){z(this.g,new Mm(u))},ci.prototype.pa=function(u){z(this.g,new Lm)},ci.prototype.oa=function(){z(this.g,"b")},Tc.prototype.createWebChannel=Tc.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,sT=function(){return new Tc},rT=function(){return us()},nT=et,_f={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pc.NO_ERROR=0,pc.TIMEOUT=8,pc.HTTP_ERROR=6,Gc=pc,Zp.COMPLETE="complete",tT=Zp,Kt.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",Q.prototype.listen=Q.prototype.J,ea=Kt,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,eT=Je}).apply(typeof Nc<"u"?Nc:typeof self<"u"?self:typeof window<"u"?window:{});const w_="@firebase/firestore",T_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new Md("@firebase/firestore");function wi(){return Qr.logLevel}function cD(t){Qr.setLogLevel(t)}function H(t,...e){if(Qr.logLevel<=be.DEBUG){const n=e.map($d);Qr.debug(`Firestore (${yo}): ${t}`,...n)}}function tt(t,...e){if(Qr.logLevel<=be.ERROR){const n=e.map($d);Qr.error(`Firestore (${yo}): ${t}`,...n)}}function Gn(t,...e){if(Qr.logLevel<=be.WARN){const n=e.map($d);Qr.warn(`Firestore (${yo}): ${t}`,...n)}}function $d(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,iT(t,r,n)}function iT(t,e,n){let r=`FIRESTORE (${yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw tt(r),new Error(r)}function oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||iT(e,s,r)}function uD(t,e){t||ne(57014,e)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends ei{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(_t.UNAUTHENTICATED)))}shutdown(){}}class hD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class fD{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Rt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rt,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},a=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rt)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new oT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new _t(e)}}class dD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new dD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(_t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class I_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new I_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new I_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=gD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function yf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return bh(s)===bh(i)?me(s,i):bh(s)?1:-1}return me(t.length,e.length)}const _D=55296,yD=57343;function bh(t){const e=t.charCodeAt(0);return e>=_D&&e<=yD}function Wi(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}function aT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="__name__";class On{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return On.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof On?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=On.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return me(e.length,n.length)}static compareSegments(e,n){const r=On.isNumericId(e),s=On.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?On.extractNumericId(e).compare(On.extractNumericId(n)):yf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class Te extends On{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Te(n)}static emptyPath(){return new Te([])}}const vD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends On{construct(e,n,r){return new ze(e,n,r)}static isValidIdentifier(e){return vD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===b_}static keyField(){return new ze([b_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Te.fromString(e))}static fromName(e){return new Y(Te.fromString(e).popFirst(5))}static empty(){return new Y(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cT(t,e,n,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function A_(t){if(!Y.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function R_(t){if(Y.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function cl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Se(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cl(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function lT(t,e){if(e<=0)throw new q(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function Za(t,e){if(!uT(t))throw new q(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new q(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=-62135596800,P_=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*P_);return new De(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S_)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P_}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Za(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:ot("string",De._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new De(0,0))}static max(){return new ce(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=-1;class Pu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function vf(t){return t.fields.find((e=>e.kind===2))}function Ts(t){return t.fields.filter((e=>e.kind!==2))}Pu.UNKNOWN_ID=-1;class Kc{constructor(e,n){this.fieldPath=e,this.kind=n}}class Va{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Va(0,un.min())}}function hT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new un(s,Y.empty(),e)}function fT(t){return new un(t.readTime,t.key,Qi)}class un{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new un(ce.min(),Y.empty(),Qi)}static max(){return new un(ce.max(),Y.empty(),Qi)}}function Gd(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ss(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==dT)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):O.reject(n)}static resolve(e){return new O(((n,r)=>{n(e)}))}static reject(e){return new O(((n,r)=>{r(e)}))}static waitFor(e){return new O(((n,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&n()}),(c=>r(c)))})),o=!0,i===s&&n()}))}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next((s=>s?O.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new O(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(e[l]).next((h=>{o[l]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new O(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="SimpleDb";class ul{static open(e,n,r,s){try{return new ul(n,e.transaction(s,r))}catch(i){throw new fa(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Rt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new fa(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Kd(r.target.error);this.S.reject(new fa(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(H(rn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new wD(n)}}class $n{static delete(e){return H(rn,"Removing database:",e),bs(Dd().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Fw())return!1;if($n.F())return!0;const e=Ru(),n=$n.M(e),r=0<n&&n<10,s=mT(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,$n.M(Ru())===12.2&&tt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(H(rn,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new fa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new q(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new fa(e,o))},s.onupgradeneeded=i=>{H(rn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next((()=>{H(rn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=ul.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next((l=>(a.C(),l))).catch((l=>(a.abort(l),O.reject(l)))).toPromise();return c.catch((()=>{})),await a.D,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(H(rn,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function mT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class ED{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return bs(this.U.delete())}}class fa extends q{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function is(t){return t.name==="IndexedDbTransactionError"}class wD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(H(rn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(H(rn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bs(r)}add(e){return H(rn,"ADD",this.store.name,e,e),bs(this.store.add(e))}get(e){return bs(this.store.get(e)).next((n=>(n===void 0&&(n=null),H(rn,"GET",this.store.name,e,n),n)))}delete(e){return H(rn,"DELETE",this.store.name,e),bs(this.store.delete(e))}count(){return H(rn,"COUNT",this.store.name),bs(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new O(((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}}))}{const i=this.cursor(r),o=[];return this.H(i,((a,c)=>{o.push(c)})).next((()=>o))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}Z(e,n){H(rn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,((i,o,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new O(((r,s)=>{n.onerror=i=>{const o=Kd(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}H(e,n){const r=[];return new O(((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new ED(a),l=n(a.primaryKey,a.value,c);if(l instanceof O){const h=l.catch((f=>(c.done(),O.reject(f))));r.push(h)}c.isDone?s():c.G===null?a.continue():a.continue(c.G)}})).next((()=>O.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function bs(t){return new O(((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Kd(r.target.error);n(s)}}))}let C_=!1;function Kd(t){const e=$n.M(Ru());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return C_||(C_=!0,setTimeout((()=>{throw r}),0)),r}}return t}const da="IndexBackfiller";class TD{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){H(da,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();H(da,`Documents written: ${n}`)}catch(n){is(n)?H(da,"Ignoring IndexedDB error during index backfill: ",n):await ss(n)}await this.re(6e4)}))}}class ID{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let s=n,i=!0;return O.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return H(da,`Processing collection: ${o}`),this.oe(e,o,s).next((a=>{s-=a,r.add(o)}));i=!1})))).next((()=>n-s))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(s,i))).next((a=>(H(da,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((s,i)=>{const o=fT(i);Gd(o,r)>0&&(r=o)})),new un(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jt.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=-1;function ec(t){return t==null}function Da(t){return t===0&&1/t==-1/0}function gT(t){return typeof t=="number"&&Number.isInteger(t)&&!Da(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu="";function Mt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=x_(e)),e=bD(t.get(n),e);return x_(e)}function bD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Cu:n+="";break;default:n+=i}}return n}function x_(t){return t+Cu+""}function Bn(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===Cu&&t.charAt(1)==="",56145,{path:t}),Te.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Cu,i);switch((o<0||o>n)&&ne(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ne(61167,{path:t})}i=o+2}return new Te(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="remoteDocuments",tc="owner",di="owner",Na="mutationQueues",AD="userId",wn="mutations",V_="batchId",xs="userMutationsIndex",D_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t,e){return[t,Mt(e)]}function _T(t,e,n){return[t,Mt(e),n]}const RD={},Ji="documentMutations",xu="remoteDocumentsV14",SD=["prefixPath","collectionGroup","readTime","documentId"],Wc="documentKeyIndex",PD=["prefixPath","collectionGroup","documentId"],yT="collectionGroupIndex",CD=["collectionGroup","readTime","prefixPath","documentId"],ka="remoteDocumentGlobal",Ef="remoteDocumentGlobalKey",Yi="targets",vT="queryTargetsIndex",xD=["canonicalId","targetId"],Xi="targetDocuments",VD=["targetId","path"],zd="documentTargetsIndex",DD=["path","targetId"],Vu="targetGlobalKey",Fs="targetGlobal",Oa="collectionParents",ND=["collectionId","parent"],Zi="clientMetadata",kD="clientId",ll="bundles",OD="bundleId",hl="namedQueries",MD="name",Wd="indexConfiguration",LD="indexId",wf="collectionGroupIndex",FD="collectionGroup",pa="indexState",BD=["indexId","uid"],ET="sequenceNumberIndex",UD=["uid","sequenceNumber"],ma="indexEntries",jD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wT="documentKeyIndex",$D=["indexId","uid","orderedDocumentKey"],fl="documentOverlays",qD=["userId","collectionPath","documentId"],Tf="collectionPathOverlayIndex",HD=["userId","collectionPath","largestBatchId"],TT="collectionGroupOverlayIndex",GD=["userId","collectionGroup","largestBatchId"],Qd="globals",KD="name",IT=[Na,wn,Ji,Is,Yi,tc,Fs,Xi,Zi,ka,Oa,ll,hl],zD=[...IT,fl],bT=[Na,wn,Ji,xu,Yi,tc,Fs,Xi,Zi,ka,Oa,ll,hl,fl],AT=bT,Jd=[...AT,Wd,pa,ma],WD=Jd,RT=[...Jd,Qd],QD=RT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends pT{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function pt(t,e){const n=Z(t);return $n.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ST(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kc(this.root,e,this.comparator,!0)}}class kc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??wt.RED,this.left=s??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new wt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new k_(this.data.getIterator())}getIteratorFrom(e){return new k_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ke(this.comparator);return n.data=e,n}}class k_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pi(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new ke(ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wi(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new PT("Invalid base64 string: "+i):i}})(e);return new Ze(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new Ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const YD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=YD.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dr(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="server_timestamp",xT="__type__",VT="__previous_value__",DT="__local_write_time__";function dl(t){return(t?.mapValue?.fields||{})[xT]?.stringValue===CT}function pl(t){const e=t.mapValue.fields[VT];return dl(e)?pl(e):e}function Ma(t){const e=fr(t.mapValue.fields[DT].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n,r,s,i,o,a,c,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}}const bf="(default)";class Jr{constructor(e,n){this.projectId=e,this.database=n||bf}static empty(){return new Jr("","")}get isDefaultDatabase(){return this.database===bf}isEqual(e){return e instanceof Jr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="__type__",NT="__max__",Lr={mapValue:{fields:{__type__:{stringValue:NT}}}},Xd="__vector__",eo="value",Qc={nullValue:"NULL_VALUE"};function Yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dl(t)?4:kT(t)?9007199254740991:ml(t)?10:11:ne(28295,{value:t})}function Kn(t,e){if(t===e)return!0;const n=Yr(t);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ma(t).isEqual(Ma(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=fr(s.timestampValue),a=fr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return dr(s.bytesValue).isEqual(dr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Ke(s.geoPointValue.latitude)===Ke(i.geoPointValue.latitude)&&Ke(s.geoPointValue.longitude)===Ke(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ke(s.integerValue)===Ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ke(s.doubleValue),a=Ke(i.doubleValue);return o===a?Da(o)===Da(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return Wi(t.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(N_(o)!==N_(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Kn(o[c],a[c])))return!1;return!0})(t,e);default:return ne(52216,{left:t})}}function La(t,e){return(t.values||[]).find((n=>Kn(n,e)))!==void 0}function Xr(t,e){if(t===e)return 0;const n=Yr(t),r=Yr(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=Ke(i.integerValue||i.doubleValue),c=Ke(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return O_(t.timestampValue,e.timestampValue);case 4:return O_(Ma(t),Ma(e));case 5:return yf(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=dr(i),c=dr(o);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const h=me(a[l],c[l]);if(h!==0)return h}return me(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=me(Ke(i.latitude),Ke(o.latitude));return a!==0?a:me(Ke(i.longitude),Ke(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return M_(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},c=o.fields||{},l=a[eo]?.arrayValue,h=c[eo]?.arrayValue,f=me(l?.values?.length||0,h?.values?.length||0);return f!==0?f:M_(l,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Lr.mapValue&&o===Lr.mapValue)return 0;if(i===Lr.mapValue)return 1;if(o===Lr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=yf(c[f],h[f]);if(p!==0)return p;const m=Xr(a[c[f]],l[h[f]]);if(m!==0)return m}return me(c.length,h.length)})(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function O_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=fr(t),r=fr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function M_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Xr(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function to(t){return Af(t)}function Af(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=fr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return dr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Y.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Af(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Af(n.fields[o])}`;return s+"}"})(t.mapValue):ne(61005,{value:t})}function Jc(t){switch(Yr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pl(t);return e?16+Jc(e):16;case 5:return 2*t.stringValue.length;case 6:return dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Jc(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return os(r.fields,((i,o)=>{s+=i.length+Jc(o)})),s})(t.mapValue);default:throw ne(13486,{value:t})}}function $s(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rf(t){return!!t&&"integerValue"in t}function Fa(t){return!!t&&"arrayValue"in t}function L_(t){return!!t&&"nullValue"in t}function F_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yc(t){return!!t&&"mapValue"in t}function ml(t){return(t?.mapValue?.fields||{})[Yd]?.stringValue===Xd}function ga(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return os(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ga(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ga(t.arrayValue.values[n]);return e}return{...t}}function kT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NT}const OT={mapValue:{fields:{[Yd]:{stringValue:Xd},[eo]:{arrayValue:{}}}}};function ZD(t){return"nullValue"in t?Qc:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?$s(Jr.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ml(t)?OT:{mapValue:{}}:ne(35942,{value:t})}function eN(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?$s(Jr.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?OT:"mapValue"in t?ml(t)?{mapValue:{}}:Lr:ne(61959,{value:t})}function B_(t,e){const n=Xr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function U_(t,e){const n=Xr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ga(n)}setAll(e){let n=ze.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ga(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Yc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Yc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){os(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new bt(ga(this.value))}}function MT(t){const e=[];return os(t.fields,((n,r)=>{const s=new ze([n]);if(Yc(r)){const i=MT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ge(e,0,ce.min(),ce.min(),ce.min(),bt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ge(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Ge(e,2,n,ce.min(),ce.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new Ge(e,3,n,ce.min(),ce.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ge&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.position=e,this.inclusive=n}}function j_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Xr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function $_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n="asc"){this.field=e,this.dir=n}}function tN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{}class Ie extends LT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nN(e,n,r):n==="array-contains"?new iN(e,r):n==="in"?new qT(e,r):n==="not-in"?new oN(e,r):n==="array-contains-any"?new aN(e,r):new Ie(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rN(e,r):new sN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xr(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(Xr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ne extends LT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ne(e,n)}matches(e){return no(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function no(t){return t.op==="and"}function Sf(t){return t.op==="or"}function Zd(t){return FT(t)&&no(t)}function FT(t){for(const e of t.filters)if(e instanceof Ne)return!1;return!0}function Pf(t){if(t instanceof Ie)return t.field.canonicalString()+t.op.toString()+to(t.value);if(Zd(t))return t.filters.map((e=>Pf(e))).join(",");{const e=t.filters.map((n=>Pf(n))).join(",");return`${t.op}(${e})`}}function BT(t,e){return t instanceof Ie?(function(r,s){return s instanceof Ie&&r.op===s.op&&r.field.isEqual(s.field)&&Kn(r.value,s.value)})(t,e):t instanceof Ne?(function(r,s){return s instanceof Ne&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&BT(o,s.filters[a])),!0):!1})(t,e):void ne(19439)}function UT(t,e){const n=t.filters.concat(e);return Ne.create(n,t.op)}function jT(t){return t instanceof Ie?(function(n){return`${n.field.canonicalString()} ${n.op} ${to(n.value)}`})(t):t instanceof Ne?(function(n){return n.op.toString()+" {"+n.getFilters().map(jT).join(" ,")+"}"})(t):"Filter"}class nN extends Ie{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class rN extends Ie{constructor(e,n){super(e,"in",n),this.keys=$T("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class sN extends Ie{constructor(e,n){super(e,"not-in",n),this.keys=$T("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function $T(t,e){return(e.arrayValue?.values||[]).map((n=>Y.fromName(n.referenceValue)))}class iN extends Ie{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fa(n)&&La(n.arrayValue,this.value)}}class qT extends Ie{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&La(this.value.arrayValue,n)}}class oN extends Ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!La(this.value.arrayValue,n)}}class aN extends Ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fa(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>La(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Cf(t,e=null,n=[],r=[],s=null,i=null,o=null){return new cN(t,e,n,r,s,i,o)}function qs(t){const e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Pf(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),ec(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>to(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>to(r))).join(",")),e.Te=n}return e.Te}function nc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$_(t.startAt,e.startAt)&&$_(t.endAt,e.endAt)}function Du(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Nu(t,e){return t.filters.filter((n=>n instanceof Ie&&n.field.isEqual(e)))}function q_(t,e,n){let r=Qc,s=!0;for(const i of Nu(t,e)){let o=Qc,a=!0;switch(i.op){case"<":case"<=":o=ZD(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Qc}B_({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];B_({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function H_(t,e,n){let r=Lr,s=!0;for(const i of Nu(t,e)){let o=Lr,a=!0;switch(i.op){case">=":case">":o=eN(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Lr}U_({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];U_({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HT(t,e,n,r,s,i,o,a){return new gr(t,e,n,r,s,i,o,a)}function vo(t){return new gr(t)}function G_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ep(t){return t.collectionGroup!==null}function Oi(t){const e=Z(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ke(ze.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((l=>{l.isInequality()&&(a=a.add(l.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ba(i,r))})),n.has(ze.keyField().canonicalString())||e.Ie.push(new Ba(ze.keyField(),r))}return e.Ie}function Ht(t){const e=Z(t);return e.Ee||(e.Ee=uN(e,Oi(t))),e.Ee}function uN(t,e){if(t.limitType==="F")return Cf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Ba(s.field,i)}));const n=t.endAt?new Zr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zr(t.startAt.position,t.startAt.inclusive):null;return Cf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xf(t,e){const n=t.filters.concat([e]);return new gr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ku(t,e,n){return new gr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rc(t,e){return nc(Ht(t),Ht(e))&&t.limitType===e.limitType}function GT(t){return`${qs(Ht(t))}|lt:${t.limitType}`}function Ti(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>jT(s))).join(", ")}]`),ec(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>to(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>to(s))).join(",")),`Target(${r})`})(Ht(t))}; limitType=${t.limitType})`}function sc(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Oi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,c){const l=j_(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,Oi(r),s)||r.endAt&&!(function(o,a,c){const l=j_(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,Oi(r),s))})(t,e)}function KT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zT(t){return(e,n)=>{let r=!1;for(const s of Oi(t)){const i=lN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function lN(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):(function(i,o,a){const c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?Xr(c,l):ne(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){os(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return ST(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new $e(Y.comparator);function Xt(){return hN}const WT=new $e(Y.comparator);function ta(...t){let e=WT;for(const n of t)e=e.insert(n.key,n);return e}function QT(t){let e=WT;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Un(){return _a()}function JT(){return _a()}function _a(){return new _r((t=>t.toString()),((t,e)=>t.isEqual(e)))}const fN=new $e(Y.comparator),dN=new ke(Y.comparator);function _e(...t){let e=dN;for(const n of t)e=e.add(n);return e}const pN=new ke(me);function tp(){return pN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Da(e)?"-0":e}}function YT(t){return{integerValue:""+t}}function XT(t,e){return gT(e)?YT(e):np(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this._=void 0}}function mN(t,e,n){return t instanceof ro?(function(s,i){const o={fields:{[xT]:{stringValue:CT},[DT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&dl(i)&&(i=pl(i)),i&&(o.fields[VT]=i),{mapValue:o}})(n,e):t instanceof Hs?eI(t,e):t instanceof Gs?tI(t,e):(function(s,i){const o=ZT(s,i),a=K_(o)+K_(s.Ae);return Rf(o)&&Rf(s.Ae)?YT(a):np(s.serializer,a)})(t,e)}function gN(t,e,n){return t instanceof Hs?eI(t,e):t instanceof Gs?tI(t,e):n}function ZT(t,e){return t instanceof so?(function(r){return Rf(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class ro extends gl{}class Hs extends gl{constructor(e){super(),this.elements=e}}function eI(t,e){const n=nI(e);for(const r of t.elements)n.some((s=>Kn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Gs extends gl{constructor(e){super(),this.elements=e}}function tI(t,e){let n=nI(e);for(const r of t.elements)n=n.filter((s=>!Kn(s,r)));return{arrayValue:{values:n}}}class so extends gl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function K_(t){return Ke(t.integerValue||t.doubleValue)}function nI(t){return Fa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.field=e,this.transform=n}}function _N(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Hs&&s instanceof Hs||r instanceof Gs&&s instanceof Gs?Wi(r.elements,s.elements,Kn):r instanceof so&&s instanceof so?Kn(r.Ae,s.Ae):r instanceof ro&&s instanceof ro})(t.transform,e.transform)}class yN{constructor(e,n){this.version=e,this.transformResults=n}}class We{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new We}static exists(e){return new We(void 0,e)}static updateTime(e){return new We(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _l{}function rI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wo(t.key,We.none()):new Eo(t.key,t.data,We.none());{const n=t.data,r=bt.empty();let s=new ke(ze.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new yr(t.key,r,new Yt(s.toArray()),We.none())}}function vN(t,e,n){t instanceof Eo?(function(s,i,o){const a=s.value.clone(),c=W_(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof yr?(function(s,i,o){if(!Xc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=W_(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(sI(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function ya(t,e,n,r){return t instanceof Eo?(function(i,o,a,c){if(!Xc(i.precondition,o))return a;const l=i.value.clone(),h=Q_(i.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof yr?(function(i,o,a,c){if(!Xc(i.precondition,o))return a;const l=Q_(i.fieldTransforms,c,o),h=o.data;return h.setAll(sI(i)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(t,e,n,r):(function(i,o,a){return Xc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function EN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ZT(r.transform,s||null);i!=null&&(n===null&&(n=bt.empty()),n.set(r.field,i))}return n||null}function z_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wi(r,s,((i,o)=>_N(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Eo extends _l{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class yr extends _l{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function sI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function W_(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,gN(o,a,n[s]))}return r}function Q_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,mN(i,o,e))}return r}class wo extends _l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rp extends _l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&vN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ya(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ya(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=JT();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=rI(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),_e())}isEqual(e){return this.batchId===e.batchId&&Wi(this.mutations,e.mutations,((n,r)=>z_(n,r)))&&Wi(this.baseMutations,e.baseMutations,((n,r)=>z_(n,r)))}}class ip{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return fN})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ip(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Ae;function iI(t){switch(t){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function oI(t){if(t===void 0)return tt("GRPC error has no .code"),F.UNKNOWN;switch(t){case st.OK:return F.OK;case st.CANCELLED:return F.CANCELLED;case st.UNKNOWN:return F.UNKNOWN;case st.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case st.INTERNAL:return F.INTERNAL;case st.UNAVAILABLE:return F.UNAVAILABLE;case st.UNAUTHENTICATED:return F.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case st.NOT_FOUND:return F.NOT_FOUND;case st.ALREADY_EXISTS:return F.ALREADY_EXISTS;case st.PERMISSION_DENIED:return F.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case st.ABORTED:return F.ABORTED;case st.OUT_OF_RANGE:return F.OUT_OF_RANGE;case st.UNIMPLEMENTED:return F.UNIMPLEMENTED;case st.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:t})}}(Ae=st||(st={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=new Hr([4294967295,4294967295],0);function J_(t){const e=aI().encode(t),n=new Zw;return n.update(e),new Uint8Array(n.digest())}function Y_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hr([n,r],0),new Hr([s,i],0)]}class ap{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new na(`Invalid padding: ${n}`);if(r<0)throw new na(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new na(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new na(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Hr.fromNumber(r)));return s.compare(TN)===1&&(s=new Hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=J_(e),[r,s]=Y_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ap(i,s,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=J_(e),[r,s]=Y_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new oc(ce.min(),s,new $e(me),Xt(),_e())}}class ac{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ac(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class cI{constructor(e,n){this.targetId=e,this.Ce=n}}class uI{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class X_{constructor(){this.ve=0,this.Fe=Z_(),this.Me=Ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}})),new ac(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Z_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xt(),this.Je=Oc(),this.He=Oc(),this.Ye=new $e(me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Du(i))if(r===0){const o=new Y(i.path);this.et(n,o,Ge.newNoDocument(o,ce.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=dr(r).toUint8Array()}catch(c){if(c instanceof PT)return Gn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ap(o,s,i)}catch(c){return Gn(c instanceof na?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Du(a.target)){const c=new Y(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ge.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=_e();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((c=>{const l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new oc(e,n,this.Ye,this.je,r);return this.je=Xt(),this.Je=Oc(),this.He=Oc(),this.Ye=new $e(me),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new X_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ke(me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ke(me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new X_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Oc(){return new $e(Y.comparator)}function Z_(){return new $e(Y.comparator)}const bN={asc:"ASCENDING",desc:"DESCENDING"},AN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RN={and:"AND",or:"OR"};class SN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vf(t,e){return t.useProto3Json||ec(e)?e:{value:e}}function io(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function PN(t,e){return io(t,e.toTimestamp())}function nt(t){return oe(!!t,49232),ce.fromTimestamp((function(n){const r=fr(n);return new De(r.seconds,r.nanos)})(t))}function cp(t,e){return Df(t,e).canonicalString()}function Df(t,e){const n=(function(s){return new Te(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function hI(t){const e=Te.fromString(t);return oe(wI(e),10190,{key:e.toString()}),e}function Ua(t,e){return cp(t.databaseId,e.path)}function qn(t,e){const n=hI(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(pI(n))}function fI(t,e){return cp(t.databaseId,e)}function dI(t){const e=hI(t);return e.length===4?Te.emptyPath():pI(e)}function Nf(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pI(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ey(t,e,n){return{name:Ua(t,e),fields:n.value.mapValue.fields}}function mI(t,e,n){const r=qn(t,e.name),s=nt(e.updateTime),i=e.createTime?nt(e.createTime):ce.min(),o=new bt({mapValue:{fields:e.fields}}),a=Ge.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function CN(t,e){return"found"in e?(function(r,s){oe(!!s.found,43571),s.found.name,s.found.updateTime;const i=qn(r,s.found.name),o=nt(s.found.updateTime),a=s.found.createTime?nt(s.found.createTime):ce.min(),c=new bt({mapValue:{fields:s.found.fields}});return Ge.newFoundDocument(i,o,a,c)})(t,e):"missing"in e?(function(r,s){oe(!!s.missing,3894),oe(!!s.readTime,22933);const i=qn(r,s.missing),o=nt(s.readTime);return Ge.newNoDocument(i,o)})(t,e):ne(7234,{result:e})}function xN(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(l,h){return l.useProto3Json?(oe(h===void 0||typeof h=="string",58123),Ze.fromBase64String(h||"")):(oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ze.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){const h=l.code===void 0?F.UNKNOWN:oI(l.code);return new q(h,l.message||"")})(o);n=new uI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qn(t,r.document.name),i=nt(r.document.updateTime),o=r.document.createTime?nt(r.document.createTime):ce.min(),a=new bt({mapValue:{fields:r.document.fields}}),c=Ge.newFoundDocument(s,i,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Zc(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qn(t,r.document),i=r.readTime?nt(r.readTime):ce.min(),o=Ge.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Zc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qn(t,r.document),i=r.removedTargetIds||[];n=new Zc([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new wN(s,i),a=r.targetId;n=new cI(a,o)}}return n}function ja(t,e){let n;if(e instanceof Eo)n={update:ey(t,e.key,e.value)};else if(e instanceof wo)n={delete:Ua(t,e.key)};else if(e instanceof yr)n={update:ey(t,e.key,e.data),updateMask:MN(e.fieldMask)};else{if(!(e instanceof rp))return ne(16599,{Vt:e.type});n={verify:Ua(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof ro)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof so)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ne(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:PN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)})(t,e.precondition)),n}function kf(t,e){const n=e.currentDocument?(function(i){return i.updateTime!==void 0?We.updateTime(nt(i.updateTime)):i.exists!==void 0?We.exists(i.exists):We.none()})(e.currentDocument):We.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(o,a){let c=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new ro;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new Hs(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new Gs(h)}else"increment"in a?c=new so(o,a.increment):ne(16584,{proto:a});const l=ze.fromServerFormat(a.fieldPath);return new ic(l,c)})(t,s))):[];if(e.update){e.update.name;const s=qn(t,e.update.name),i=new bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(c){const l=c.fieldPaths||[];return new Yt(l.map((h=>ze.fromServerFormat(h))))})(e.updateMask);return new yr(s,i,o,n,r)}return new Eo(s,i,n,r)}if(e.delete){const s=qn(t,e.delete);return new wo(s,n)}if(e.verify){const s=qn(t,e.verify);return new rp(s,n)}return ne(1463,{proto:e})}function VN(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?nt(s.updateTime):nt(i);return o.isEqual(ce.min())&&(o=nt(i)),new yN(o,s.transformResults||[])})(n,e)))):[]}function gI(t,e){return{documents:[fI(t,e.path)]}}function _I(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fI(t,s);const i=(function(l){if(l.length!==0)return EI(Ne.create(l,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(l){if(l.length!==0)return l.map((h=>(function(p){return{field:Ii(p.field),direction:NN(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Vf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:s}}function yI(t){let e=dI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){oe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(f){const p=vI(f);return p instanceof Ne&&Zd(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(f){return f.map((p=>(function(y){return new Ba(bi(y.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(y.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,ec(p)?null:p})(n.limit));let c=null;n.startAt&&(c=(function(f){const p=!!f.before,m=f.values||[];return new Zr(m,p)})(n.startAt));let l=null;return n.endAt&&(l=(function(f){const p=!f.before,m=f.values||[];return new Zr(m,p)})(n.endAt)),HT(e,s,o,i,a,"F",c,l)}function DN(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vI(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bi(n.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=bi(n.unaryFilter.field);return Ie.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bi(n.unaryFilter.field);return Ie.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bi(n.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ie.create(bi(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ne.create(n.compositeFilter.filters.map((r=>vI(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}})(n.compositeFilter.op))})(t):ne(30097,{filter:t})}function NN(t){return bN[t]}function kN(t){return AN[t]}function ON(t){return RN[t]}function Ii(t){return{fieldPath:t.canonicalString()}}function bi(t){return ze.fromServerFormat(t.fieldPath)}function EI(t){return t instanceof Ie?(function(n){if(n.op==="=="){if(F_(n.value))return{unaryFilter:{field:Ii(n.field),op:"IS_NAN"}};if(L_(n.value))return{unaryFilter:{field:Ii(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(F_(n.value))return{unaryFilter:{field:Ii(n.field),op:"IS_NOT_NAN"}};if(L_(n.value))return{unaryFilter:{field:Ii(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ii(n.field),op:kN(n.op),value:n.value}}})(t):t instanceof Ne?(function(n){const r=n.getFilters().map((s=>EI(s)));return r.length===1?r[0]:{compositeFilter:{op:ON(n.op),filters:r}}})(t):ne(54877,{filter:t})}function MN(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function wI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=Ze.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.yt=e}}function LN(t,e){let n;if(e.document)n=mI(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Y.fromSegments(e.noDocument.path),s=zs(e.noDocument.readTime);n=Ge.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne(56709);{const r=Y.fromSegments(e.unknownDocument.path),s=zs(e.unknownDocument.version);n=Ge.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime((function(s){const i=new De(s[0],s[1]);return ce.fromTimestamp(i)})(e.readTime)),n}function ty(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ou(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,o){return{name:Ua(i,o.key),fields:o.data.value.mapValue.fields,updateTime:io(i,o.version.toTimestamp()),createTime:io(i,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ks(e.version)};else{if(!e.isUnknownDocument())return ne(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Ks(e.version)}}return r}function Ou(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ks(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zs(t){const e=new De(t.seconds,t.nanoseconds);return ce.fromTimestamp(e)}function As(t,e){const n=(e.baseMutations||[]).map((i=>kf(t.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>kf(t.yt,i))),s=De.fromMillis(e.localWriteTimeMs);return new sp(e.batchId,s,n,r)}function ra(t){const e=zs(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?zs(t.lastLimboFreeSnapshotVersion):ce.min();let r;return r=(function(i){return i.documents!==void 0})(t.query)?(function(i){const o=i.documents.length;return oe(o===1,1966,{count:o}),Ht(vo(dI(i.documents[0])))})(t.query):(function(i){return Ht(yI(i))})(t.query),new sr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ze.fromBase64String(t.resumeToken))}function II(t,e){const n=Ks(e.snapshotVersion),r=Ks(e.lastLimboFreeSnapshotVersion);let s;s=Du(e.target)?gI(t.yt,e.target):_I(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qs(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function up(t){const e=yI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ku(e,e.limit,"L"):e}function Ah(t,e){return new op(e.largestBatchId,kf(t.yt,e.overlayMutation))}function ny(t,e){const n=e.path.lastSegment();return[t,Mt(e.path.popLast()),n]}function ry(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ks(r.readTime),documentKey:Mt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{getBundleMetadata(e,n){return sy(e).get(n).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:zs(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,n){return sy(e).put((function(s){return{bundleId:s.id,createTime:Ks(nt(s.createTime)),version:s.version}})(n))}getNamedQuery(e,n){return iy(e).get(n).next((r=>{if(r)return(function(i){return{name:i.name,query:up(i.bundledQuery),readTime:zs(i.readTime)}})(r)}))}saveNamedQuery(e,n){return iy(e).put((function(s){return{name:s.name,readTime:Ks(nt(s.readTime)),bundledQuery:s.bundledQuery}})(n))}}function sy(t){return pt(t,ll)}function iy(t){return pt(t,hl)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new yl(e,r)}getOverlay(e,n){return Ko(e).get(ny(this.userId,n)).next((r=>r?Ah(this.serializer,r):null))}getOverlays(e,n){const r=Un();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){const s=[];return r.forEach(((i,o)=>{const a=new op(n,o);s.push(this.St(e,a))})),O.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach((o=>s.add(Mt(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Ko(e).Z(Tf,a))})),O.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Un(),i=Mt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ko(e).J(Tf,o).next((a=>{for(const c of a){const l=Ah(this.serializer,c);s.set(l.getKey(),l)}return s}))}getOverlaysForCollectionGroup(e,n,r,s){const i=Un();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ko(e).ee({index:TT,range:a},((c,l,h)=>{const f=Ah(this.serializer,l);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()})).next((()=>i))}St(e,n){return Ko(e).put((function(s,i,o){const[a,c,l]=ny(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ja(s.yt,o.mutation)}})(this.serializer,this.userId,n))}}function Ko(t){return pt(t,fl)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{bt(e){return pt(e,Qd)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?Ze.fromUint8Array(r):Ze.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ke(e.integerValue));else if("doubleValue"in e){const r=Ke(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Da(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=fr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(dr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?kT(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ml(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):ne(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const s=eo,i=r[s].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ke(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),Y.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Rs.Kt=new Rs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=255;function UN(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function oy(t){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=UN(255&r[i]);if(s+=o,o!==8)break}return s})(t);return Math.ceil(e/8)}class jN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=oy(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=oy(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(mi),this.sn(255)}_n(){this.an(mi),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===mi?(this.sn(mi),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===mi?(this.an(mi),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class $N{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class qN{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class zo{constructor(){this.cn=new jN,this.ln=new $N(this.cn),this.hn=new qN(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Ss(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:eu(this.En),directionalValue:eu(this.dn),orderedDocumentKey:eu(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Pr(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=ay(t.En,e.En),n!==0?n:(n=ay(t.dn,e.dn),n!==0?n:Y.comparator(t.In,e.In)))}function ay(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function eu(t){return Lw()?(function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r})(t):t}function cy(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(t)}class uy{constructor(e){this.mn=new ke(((n,r)=>ze.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=vf(e);if(n!==void 0&&!this.wn(n))return!1;const r=Ts(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.Sn(a,c)||!this.bn(this.fn[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ke(ze.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Kc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Kc(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Kc(r.field,r.dir==="asc"?0:1)));return new Pu(Pu.UNKNOWN_ID,this.collectionId,n,Va.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){if(oe(t instanceof Ie||t instanceof Ne,20012),t instanceof Ie){if(t instanceof qT){const n=t.value.arrayValue?.values?.map((r=>Ie.create(t.field,"==",r)))||[];return Ne.create(n,"or")}return t}const e=t.filters.map((n=>bI(n)));return Ne.create(e,t.op)}function HN(t){if(t.getFilters().length===0)return[];const e=Lf(bI(t));return oe(AI(e),7391),Of(e)||Mf(e)?[e]:e.getFilters()}function Of(t){return t instanceof Ie}function Mf(t){return t instanceof Ne&&Zd(t)}function AI(t){return Of(t)||Mf(t)||(function(n){if(n instanceof Ne&&Sf(n)){for(const r of n.getFilters())if(!Of(r)&&!Mf(r))return!1;return!0}return!1})(t)}function Lf(t){if(oe(t instanceof Ie||t instanceof Ne,34018),t instanceof Ie)return t;if(t.filters.length===1)return Lf(t.filters[0]);const e=t.filters.map((r=>Lf(r)));let n=Ne.create(e,t.op);return n=Mu(n),AI(n)?n:(oe(n instanceof Ne,64498),oe(no(n),40251),oe(n.filters.length>1,57927),n.filters.reduce(((r,s)=>lp(r,s))))}function lp(t,e){let n;return oe(t instanceof Ie||t instanceof Ne,38388),oe(e instanceof Ie||e instanceof Ne,25473),n=t instanceof Ie?e instanceof Ie?(function(s,i){return Ne.create([s,i],"and")})(t,e):ly(t,e):e instanceof Ie?ly(e,t):(function(s,i){if(oe(s.filters.length>0&&i.filters.length>0,48005),no(s)&&no(i))return UT(s,i.getFilters());const o=Sf(s)?s:i,a=Sf(s)?i:s,c=o.filters.map((l=>lp(l,a)));return Ne.create(c,"or")})(t,e),Mu(n)}function ly(t,e){if(no(e))return UT(e,t.getFilters());{const n=e.filters.map((r=>lp(t,r)));return Ne.create(n,"or")}}function Mu(t){if(oe(t instanceof Ie||t instanceof Ne,11850),t instanceof Ie)return t;const e=t.getFilters();if(e.length===1)return Mu(e[0]);if(FT(t))return t;const n=e.map((s=>Mu(s))),r=[];return n.forEach((s=>{s instanceof Ie?r.push(s):s instanceof Ne&&(s.op===t.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Ne.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(){this.Cn=new hp}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(un.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(un.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class hp{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ke(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ke(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="IndexedDbIndexManager",Mc=new Uint8Array(0);class KN{constructor(e,n){this.databaseId=n,this.vn=new hp,this.Fn=new _r((r=>qs(r)),((r,s)=>nc(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const i={collectionId:r,parent:Mt(s)};return fy(e).put(i)}return O.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[aT(n),""],!1,!0);return fy(e).J(s).next((i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Bn(o.parent))}return r}))}addFieldIndex(e,n){const r=Wo(e),s=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=_i(e);return i.next((a=>{o.put(ry(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return i.next()}deleteFieldIndex(e,n){const r=Wo(e),s=_i(e),i=gi(e);return r.delete(n.indexId).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Wo(e),r=gi(e),s=_i(e);return n.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(e,n){return O.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new uy(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,n){const r=gi(e);let s=!0;const i=new Map;return O.forEach(this.Mn(n),(o=>this.xn(e,o).next((a=>{s&&(s=!!a),i.set(o,a)})))).next((()=>{if(s){let o=_e();const a=[];return O.forEach(i,((c,l)=>{H(hy,`Using index ${(function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map((x=>`${x.fieldPath}:${x.kind}`)).join(",")}`})(c)} to execute ${qs(n)}`);const h=(function(v,x){const k=vf(x);if(k===void 0)return null;for(const U of Nu(v,k.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null})(l,c),f=(function(v,x){const k=new Map;for(const U of Ts(x))for(const b of Nu(v,U.fieldPath))switch(b.op){case"==":case"in":k.set(U.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return k.set(U.fieldPath.canonicalString(),b.value),Array.from(k.values())}return null})(l,c),p=(function(v,x){const k=[];let U=!0;for(const b of Ts(x)){const T=b.kind===0?q_(v,b.fieldPath,v.startAt):H_(v,b.fieldPath,v.startAt);k.push(T.value),U&&(U=T.inclusive)}return new Zr(k,U)})(l,c),m=(function(v,x){const k=[];let U=!0;for(const b of Ts(x)){const T=b.kind===0?H_(v,b.fieldPath,v.endAt):q_(v,b.fieldPath,v.endAt);k.push(T.value),U&&(U=T.inclusive)}return new Zr(k,U)})(l,c),y=this.On(c,l,p),E=this.On(c,l,m),C=this.Nn(c,l,f),N=this.Bn(c.indexId,h,y,p.inclusive,E,m.inclusive,C);return O.forEach(N,(D=>r.Y(D,n.limit).next((v=>{v.forEach((x=>{const k=Y.fromSegments(x.documentKey);o.has(k)||(o=o.add(k),a.push(k))}))}))))})).next((()=>a))}return O.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=HN(Ne.create(e.filters,"and")).map((r=>Cf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),l=c/(n!=null?n.length:1),h=[];for(let f=0;f<c;++f){const p=n?this.Ln(n[f/l]):Mc,m=this.kn(e,p,r[f%l],s),y=this.qn(e,p,i[f%l],o),E=a.map((C=>this.kn(e,p,C,!0)));h.push(...this.createRange(m,y,E))}return h}kn(e,n,r,s){const i=new Ss(e,Y.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new Ss(e,Y.empty(),n,r);return s?i.An():i}xn(e,n){const r=new uy(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const s=this.Mn(n);return O.forEach(s,(i=>this.xn(e,i).next((o=>{o?r!==0&&o.fields.length<(function(c){let l=new ke(ze.comparator),h=!1;for(const f of c.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:l=l.add(p.field));for(const f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(h?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&s.length>1&&r===2?1:r))}Qn(e,n){const r=new zo;for(const s of Ts(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);Rs.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new zo;return Rs.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new zo;return Rs.Kt.Dt($s(this.databaseId,n),r.Pn((function(i){const o=Ts(i);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new zo);let i=0;for(const o of Ts(e)){const a=r[i++];for(const c of s)if(this.Un(n,o.fieldPath)&&Fa(a))s=this.Kn(s,o,a);else{const l=c.Pn(o.kind);Rs.Kt.Dt(a,l)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new zo;c.seed(a.un()),Rs.Kt.Dt(o,c.Pn(n.kind)),i.push(c)}return i}Un(e,n){return!!e.filters.find((r=>r instanceof Ie&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=Wo(e),s=_i(e);return(n?r.J(wf,IDBKeyRange.bound(n,n)):r.J()).next((i=>{const o=[];return O.forEach(i,(a=>s.get([a.indexId,this.uid]).next((c=>{o.push((function(h,f){const p=f?new Va(f.sequenceNumber,new un(zs(f.readTime),new Y(Bn(f.documentKey)),f.largestBatchId)):Va.empty(),m=h.fields.map((([y,E])=>new Kc(ze.fromServerFormat(y),E)));return new Pu(h.indexId,h.collectionGroup,m,p)})(a,c))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:me(r.collectionGroup,s.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const s=Wo(e),i=_i(e);return this.Gn(e).next((o=>s.J(wf,IDBKeyRange.bound(n,n)).next((a=>O.forEach(a,(c=>i.put(ry(c.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,((s,i)=>{const o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((a=>(r.set(s.collectionGroup,a),O.forEach(a,(c=>this.zn(e,s,c).next((l=>{const h=this.jn(i,c);return l.isEqual(h)?O.resolve():this.Jn(e,i,c,l,h)})))))))}))}Hn(e,n,r,s){return gi(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return gi(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=gi(e);let i=new ke(Pr);return s.ee({index:wT,range:IDBKeyRange.only([r.indexId,this.uid,eu(this.$n(r,n))])},((o,a)=>{i=i.add(new Ss(r.indexId,n,cy(a.arrayValue),cy(a.directionalValue)))})).next((()=>i))}jn(e,n){let r=new ke(Pr);const s=this.Qn(n,e);if(s==null)return r;const i=vf(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Fa(o))for(const a of o.arrayValue.values||[])r=r.add(new Ss(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new Ss(n.indexId,e.key,Mc,s));return r}Jn(e,n,r,s,i){H(hy,"Updating index entries for document '%s'",n.key);const o=[];return(function(c,l,h,f,p){const m=c.getIterator(),y=l.getIterator();let E=pi(m),C=pi(y);for(;E||C;){let N=!1,D=!1;if(E&&C){const v=h(E,C);v<0?D=!0:v>0&&(N=!0)}else E!=null?D=!0:N=!0;N?(f(C),C=pi(y)):D?(p(E),E=pi(m)):(E=pi(m),C=pi(y))}})(s,i,Pr,(a=>{o.push(this.Hn(e,n,r,a))}),(a=>{o.push(this.Yn(e,n,r,a))})),O.waitFor(o)}Gn(e){let n=1;return _i(e).ee({index:ET,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),n=s.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>Pr(o,a))).filter(((o,a,c)=>!a||Pr(o,c[a-1])!==0));const s=[];s.push(e);for(const o of r){const a=Pr(o,e),c=Pr(o,n);if(a===0)s[0]=e.An();else if(a>0&&c<0)s.push(o),s.push(o.An());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,Mc,Y.empty()),c=s[o+1].Vn(this.uid,Mc,Y.empty());i.push(IDBKeyRange.bound(a,c))}return i}Zn(e,n){return Pr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(dy)}getMinOffset(e,n){return O.mapArray(this.Mn(n),(r=>this.xn(e,r).next((s=>s||ne(44426))))).next(dy)}}function fy(t){return pt(t,Oa)}function gi(t){return pt(t,ma)}function Wo(t){return pt(t,Wd)}function _i(t){return pt(t,pa)}function dy(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Gd(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new un(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RI=41943040;class xt{static withCacheSize(e){return new xt(e,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t,e,n){const r=t.store(wn),s=t.store(Ji),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.ee({range:o},((h,f,p)=>(a++,p.delete())));i.push(c.next((()=>{oe(a===1,47070,{batchId:n.batchId})})));const l=[];for(const h of n.mutations){const f=_T(e,h.key.path,n.batchId);i.push(s.delete(f)),l.push(h.key)}return O.waitFor(i).next((()=>l))}function Lu(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xt.DEFAULT_COLLECTION_PERCENTILE=10,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xt.DEFAULT=new xt(RI,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xt.DISABLED=new xt(-1,0,0);class vl{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){oe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new vl(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cr(e).ee({index:xs,range:r},((s,i,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,s){const i=Ai(e),o=Cr(e);return o.add({}).next((a=>{oe(typeof a=="number",49019);const c=new sp(a,n,r,s),l=(function(m,y,E){const C=E.baseMutations.map((D=>ja(m.yt,D))),N=E.mutations.map((D=>ja(m.yt,D)));return{userId:y,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:C,mutations:N}})(this.serializer,this.userId,c),h=[];let f=new ke(((p,m)=>me(p.canonicalString(),m.canonicalString())));for(const p of s){const m=_T(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(i.put(m,RD))}return f.forEach((p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))})),e.addOnCommittedListener((()=>{this.Xn[a]=c.keys()})),O.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return Cr(e).get(n).next((r=>r?(oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),As(this.serializer,r)):null))}er(e,n){return this.Xn[n]?O.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Cr(e).ee({index:xs,range:s},((o,a,c)=>{a.userId===this.userId&&(oe(a.batchId>=r,47524,{tr:r}),i=As(this.serializer,a)),c.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Gr;return Cr(e).ee({index:xs,range:n,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Gr],[this.userId,Number.POSITIVE_INFINITY]);return Cr(e).J(xs,n).next((r=>r.map((s=>As(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=zc(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Ai(e).ee({range:s},((o,a,c)=>{const[l,h,f]=o,p=Bn(h);if(l===this.userId&&n.path.isEqual(p))return Cr(e).get(f).next((m=>{if(!m)throw ne(61480,{nr:o,batchId:f});oe(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:f}),i.push(As(this.serializer,m))}));c.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(me);const s=[];return n.forEach((i=>{const o=zc(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Ai(e).ee({range:a},((l,h,f)=>{const[p,m,y]=l,E=Bn(m);p===this.userId&&i.path.isEqual(E)?r=r.add(y):f.done()}));s.push(c)})),O.waitFor(s).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=zc(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new ke(me);return Ai(e).ee({range:o},((c,l,h)=>{const[f,p,m]=c,y=Bn(p);f===this.userId&&r.isPrefixOf(y)?y.length===s&&(a=a.add(m)):h.done()})).next((()=>this.rr(e,a)))}rr(e,n){const r=[],s=[];return n.forEach((i=>{s.push(Cr(e).get(i).next((o=>{if(o===null)throw ne(35274,{batchId:i});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(As(this.serializer,o))})))})),O.waitFor(s).next((()=>r))}removeMutationBatch(e,n){return SI(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),O.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return Ai(e).ee({range:r},((i,o,a)=>{if(i[0]===this.userId){const c=Bn(i[1]);s.push(c)}else a.done()})).next((()=>{oe(s.length===0,56720,{sr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,n){return PI(e,this.userId,n)}_r(e){return CI(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Gr,lastStreamToken:""}))}}function PI(t,e,n){const r=zc(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Ai(t).ee({range:i,X:!0},((a,c,l)=>{const[h,f,p]=a;h===e&&f===s&&(o=!0),l.done()})).next((()=>o))}function Cr(t){return pt(t,wn)}function Ai(t){return pt(t,Ji)}function CI(t){return pt(t,Na)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ws(0)}static cr(){return new Ws(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Ws(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>ce.fromTimestamp(new De(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>yi(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(oe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let s=0;const i=[];return yi(e).ee(((o,a)=>{const c=ra(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))})).next((()=>O.waitFor(i))).next((()=>s))}forEachTarget(e,n){return yi(e).ee(((r,s)=>{const i=ra(s);n(i)}))}lr(e){return my(e).get(Vu).next((n=>(oe(n!==null,2888),n)))}hr(e,n){return my(e).put(Vu,n)}Pr(e,n){return yi(e).put(II(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=qs(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return yi(e).ee({range:s,index:vT},((o,a,c)=>{const l=ra(a);nc(n,l.target)&&(i=l,c.done())})).next((()=>i))}addMatchingKeys(e,n,r){const s=[],i=Or(e);return n.forEach((o=>{const a=Mt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))})),O.waitFor(s)}removeMatchingKeys(e,n,r){const s=Or(e);return O.forEach(n,(i=>{const o=Mt(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,n){const r=Or(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Or(e);let i=_e();return s.ee({range:r,X:!0},((o,a,c)=>{const l=Bn(o[1]),h=new Y(l);i=i.add(h)})).next((()=>i))}containsKey(e,n){const r=Mt(n.path),s=IDBKeyRange.bound([r],[aT(r)],!1,!0);let i=0;return Or(e).ee({index:zd,X:!0,range:s},(([o,a],c,l)=>{o!==0&&(i++,l.done())})).next((()=>i>0))}At(e,n){return yi(e).get(n).next((r=>r?ra(r):null))}}function yi(t){return pt(t,Yi)}function my(t){return pt(t,Fs)}function Or(t){return pt(t,Xi)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="LruGarbageCollector",WN=1048576;function _y([t,e],[n,r]){const s=me(t,n);return s===0?me(e,r):s}class QN{constructor(e){this.Ir=e,this.buffer=new ke(_y),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_y(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(gy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){is(n)?H(gy,"Ignoring IndexedDB error during garbage collection: ",n):await ss(n)}await this.Vr(3e5)}))}}class JN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Jt.ce);const r=new QN(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(py)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),py):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,c,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s)))).next((f=>(r=f,a=Date.now(),this.removeTargets(e,r,n)))).next((f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(l=Date.now(),wi()<=be.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f}))))}}function VI(t,e){return new JN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n){this.db=e,this.garbageCollector=VI(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,s)=>n(s)))}addReference(e,n,r){return Lc(e,r)}removeReference(e,n,r){return Lc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Lc(e,n)}br(e,n){return(function(s,i){let o=!1;return CI(s).te((a=>PI(s,a,i).next((c=>(c&&(o=!0),O.resolve(!c)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,((o,a)=>{if(a<=n){const c=this.br(e,o).next((l=>{if(!l)return i++,r.getEntry(e,o).next((()=>(r.removeEntry(o,ce.min()),Or(e).delete((function(f){return[0,Mt(f.path)]})(o)))))}));s.push(c)}})).next((()=>O.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Lc(e,n)}Sr(e,n){const r=Or(e);let s,i=Jt.ce;return r.ee({index:zd},(([o,a],{path:c,sequenceNumber:l})=>{o===0?(i!==Jt.ce&&n(new Y(Bn(s)),i),i=l,s=c):i=Jt.ce})).next((()=>{i!==Jt.ce&&n(new Y(Bn(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lc(t,e){return Or(t).put((function(r,s){return{targetId:0,path:Mt(r.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.changes=new _r((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ge.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ys(e).put(r)}removeEntry(e,n,r){return ys(e).delete((function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ou(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=Ge.newInvalidDocument(n);return ys(e).ee({index:Wc,range:IDBKeyRange.only(Qo(n))},((s,i)=>{r=this.Cr(n,i)})).next((()=>r))}vr(e,n){let r={size:0,document:Ge.newInvalidDocument(n)};return ys(e).ee({index:Wc,range:IDBKeyRange.only(Qo(n))},((s,i)=>{r={document:this.Cr(n,i),size:Lu(i)}})).next((()=>r))}getEntries(e,n){let r=Xt();return this.Fr(e,n,((s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)})).next((()=>r))}Mr(e,n){let r=Xt(),s=new $e(Y.comparator);return this.Fr(e,n,((i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,Lu(o))})).next((()=>({documents:r,Or:s})))}Fr(e,n,r){if(n.isEmpty())return O.resolve();let s=new ke(Ey);n.forEach((c=>s=s.add(c)));const i=IDBKeyRange.bound(Qo(s.first()),Qo(s.last())),o=s.getIterator();let a=o.getNext();return ys(e).ee({index:Wc,range:i},((c,l,h)=>{const f=Y.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Ey(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.j(Qo(a)):h.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Ou(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ys(e).J(IDBKeyRange.bound(a,c,!0)).next((l=>{i?.incrementDocumentReadCount(l.length);let h=Xt();for(const f of l){const p=this.Cr(Y.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(sc(n,p)||s.has(p.key))&&(h=h.insert(p.key,p))}return h}))}getAllFromCollectionGroup(e,n,r,s){let i=Xt();const o=vy(n,r),a=vy(n,un.max());return ys(e).ee({index:yT,range:IDBKeyRange.bound(o,a,!0)},((c,l,h)=>{const f=this.Cr(Y.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);i=i.insert(f.key,f),i.size===s&&h.done()})).next((()=>i))}newChangeBuffer(e){return new ZN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return yy(e).get(Ef).next((n=>(oe(!!n,20021),n)))}Dr(e,n){return yy(e).put(Ef,n)}Cr(e,n){if(n){const r=LN(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ce.min())))return r}return Ge.newInvalidDocument(e)}}function NI(t){return new XN(t)}class ZN extends DI{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new _r((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const n=[];let r=0,s=new ke(((i,o)=>me(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=ty(this.Nr.serializer,o);s=s.add(i.path.popLast());const l=Lu(c);r+=l-a.size,n.push(this.Nr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=ty(this.Nr.serializer,o.convertToNoDocument(ce.min()));n.push(this.Nr.addEntry(e,i,c))}})),s.forEach((i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))})),n.push(this.Nr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:s})=>(s.forEach(((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function yy(t){return pt(t,ka)}function ys(t){return pt(t,xu)}function Qo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vy(t,e){const n=e.documentKey.path.toArray();return[t,Ou(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ey(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=me(n[i],r[i]),s)return s;return s=me(n.length,r.length),s||(s=me(n[n.length-2],r[r.length-2]),s||me(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&ya(r.mutation,s,Yt.empty(),De.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,_e()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=_e()){const s=Un();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=ta();return i.forEach(((a,c)=>{o=o.insert(a,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Un();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,_e())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,s){let i=Xt();const o=_a(),a=(function(){return _a()})();return n.forEach(((c,l)=>{const h=r.get(l.key);s.has(l.key)&&(h===void 0||h.mutation instanceof yr)?i=i.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),ya(h.mutation,l,h.mutation.getFieldMask(),De.now())):o.set(l.key,Yt.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((l,h)=>o.set(l,h))),n.forEach(((l,h)=>a.set(l,new ek(h,o.get(l)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=_a();let s=new $e(((o,a)=>o-a)),i=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((c=>{const l=n.get(c);if(l===null)return;let h=r.get(c)||Yt.empty();h=a.applyToLocalView(l,h),r.set(c,h);const f=(s.get(a.batchId)||_e()).add(c);s=s.insert(a.batchId,f)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,h=c.value,f=JT();h.forEach((p=>{if(!i.has(p)){const m=rI(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return O.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ep(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(Un());let a=Qi,c=i;return o.next((l=>O.forEach(l,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{c=c.insert(h,p)}))))).next((()=>this.populateOverlays(e,l,i))).next((()=>this.computeViews(e,c,l,_e()))).next((h=>({batchId:a,changes:QT(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next((r=>{let s=ta();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ta();return this.indexManager.getCollectionParents(e,i).next((a=>O.forEach(a,(c=>{const l=(function(f,p){return new gr(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r,s).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((c,l)=>{const h=l.getKey();o.get(h)===null&&(o=o.insert(h,Ge.newInvalidDocument(h)))}));let a=ta();return o.forEach(((c,l)=>{const h=i.get(c);h!==void 0&&ya(h.mutation,l,Yt.empty(),De.now()),sc(n,l)&&(a=a.insert(c,l))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:nt(s.createTime)}})(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:up(s.bundledQuery),readTime:nt(s.readTime)}})(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.overlays=new $e(Y.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Un();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=Un(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new $e(((l,h)=>l-h));const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=i.get(l.largestBatchId);h===null&&(h=Un(),i=i.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Un(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((l,h)=>a.set(l,h))),!(a.size()>=s)););return O.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new op(n,r));let i=this.qr.get(n);i===void 0&&(i=_e(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this.Qr=new ke(gt.$r),this.Ur=new ke(gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new gt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new gt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Y(new Te([])),r=new gt(n,e),s=new gt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new Te([])),r=new gt(n,e),s=new gt(n,e+1);let i=_e();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new gt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||me(e.Yr,n.Yr)}static Kr(e,n){return me(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ke(gt.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sp(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new gt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Gr:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gt(n,0),s=new gt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const a=this.Xr(o.Yr);i.push(a)})),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(me);return n.forEach((s=>{const i=new gt(s,0),o=new gt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{r=r.add(a.Yr)}))})),O.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new gt(new Y(i),0);let a=new ke(me);return this.Zr.forEachWhile((c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c.Yr)),!0)}),o),O.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return O.forEach(n.mutations,(s=>{const i=new gt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new gt(n,0),s=this.Zr.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.ri=e,this.docs=(function(){return new $e(Y.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Ge.newInvalidDocument(n))}getEntries(e,n){let r=Xt();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ge.newInvalidDocument(s))})),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Xt();const o=n.path,a=new Y(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Gd(fT(h),r)<=0||(s.has(h.key)||sc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ii(e,n){return O.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new ok(this)}getSize(e){return O.resolve(this.size)}}class ok extends DI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.persistence=e,this.si=new _r((n=>qs(n)),nc),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.oi=0,this._i=new fp,this.targetCount=0,this.ai=Ws.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ws(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),O.waitFor(i).next((()=>s))}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n){this.ui={},this.overlays={},this.ci=new Jt(0),this.li=!1,this.li=!0,this.hi=new rk,this.referenceDelegate=e(this),this.Pi=new ak(this),this.indexManager=new GN,this.remoteDocumentCache=(function(s){return new ik(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new TI(n),this.Ii=new tk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new sk(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new ck(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return O.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class ck extends pT{constructor(e){super(),this.currentSequenceNumber=e}}class El{constructor(e){this.persistence=e,this.Ri=new fp,this.Vi=null}static mi(e){return new El(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,(r=>{const s=Y.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,ce.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Fu{constructor(e,n){this.persistence=e,this.pi=new _r((r=>Mt(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=VI(this,n)}static mi(e,n){return new Fu(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return O.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?O.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,i.removeEntry(o,ce.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jc(e.data.value)),n}br(e,n,r){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return O.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.serializer=e}k(e,n,r,s){const i=new ul("createOrUpgrade",n);r<1&&s>=1&&((function(c){c.createObjectStore(tc)})(e),(function(c){c.createObjectStore(Na,{keyPath:AD}),c.createObjectStore(wn,{keyPath:V_,autoIncrement:!0}).createIndex(xs,D_,{unique:!0}),c.createObjectStore(Ji)})(e),wy(e),(function(c){c.createObjectStore(Is)})(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&((function(c){c.deleteObjectStore(Xi),c.deleteObjectStore(Yi),c.deleteObjectStore(Fs)})(e),wy(e)),o=o.next((()=>(function(c){const l=c.store(Fs),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ce.min().toTimestamp(),targetCount:0};return l.put(Vu,h)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(c,l){return l.store(wn).J().next((f=>{c.deleteObjectStore(wn),c.createObjectStore(wn,{keyPath:V_,autoIncrement:!0}).createIndex(xs,D_,{unique:!0});const p=l.store(wn),m=f.map((y=>p.put(y)));return O.waitFor(m)}))})(e,i)))),o=o.next((()=>{(function(c){c.createObjectStore(Zi,{keyPath:kD})})(e)}))),r<5&&s>=5&&(o=o.next((()=>this.yi(i)))),r<6&&s>=6&&(o=o.next((()=>((function(c){c.createObjectStore(ka)})(e),this.wi(i))))),r<7&&s>=7&&(o=o.next((()=>this.Si(i)))),r<8&&s>=8&&(o=o.next((()=>this.bi(e,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(o=o.next((()=>this.Di(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(c){c.createObjectStore(ll,{keyPath:OD})})(e),(function(c){c.createObjectStore(hl,{keyPath:MD})})(e)}))),r<12&&s>=12&&(o=o.next((()=>{(function(c){const l=c.createObjectStore(fl,{keyPath:qD});l.createIndex(Tf,HD,{unique:!1}),l.createIndex(TT,GD,{unique:!1})})(e)}))),r<13&&s>=13&&(o=o.next((()=>(function(c){const l=c.createObjectStore(xu,{keyPath:SD});l.createIndex(Wc,PD),l.createIndex(yT,CD)})(e))).next((()=>this.Ci(e,i))).next((()=>e.deleteObjectStore(Is)))),r<14&&s>=14&&(o=o.next((()=>this.Fi(e,i)))),r<15&&s>=15&&(o=o.next((()=>(function(c){c.createObjectStore(Wd,{keyPath:LD,autoIncrement:!0}).createIndex(wf,FD,{unique:!1}),c.createObjectStore(pa,{keyPath:BD}).createIndex(ET,UD,{unique:!1}),c.createObjectStore(ma,{keyPath:jD}).createIndex(wT,$D,{unique:!1})})(e)))),r<16&&s>=16&&(o=o.next((()=>{n.objectStore(pa).clear()})).next((()=>{n.objectStore(ma).clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(c){c.createObjectStore(Qd,{keyPath:KD})})(e)}))),r<18&&s>=18&&Lw()&&(o=o.next((()=>{n.objectStore(pa).clear()})).next((()=>{n.objectStore(ma).clear()}))),o}wi(e){let n=0;return e.store(Is).ee(((r,s)=>{n+=Lu(s)})).next((()=>{const r={byteSize:n};return e.store(ka).put(Ef,r)}))}yi(e){const n=e.store(Na),r=e.store(wn);return n.J().next((s=>O.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,Gr],[i.userId,i.lastAcknowledgedBatchId]);return r.J(xs,o).next((a=>O.forEach(a,(c=>{oe(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const l=As(this.serializer,c);return SI(e,i.userId,l).next((()=>{}))}))))}))))}Si(e){const n=e.store(Xi),r=e.store(Is);return e.store(Fs).get(Vu).next((s=>{const i=[];return r.ee(((o,a)=>{const c=new Te(o),l=(function(f){return[0,Mt(f)]})(c);i.push(n.get(l).next((h=>h?O.resolve():(f=>n.put({targetId:0,path:Mt(f),sequenceNumber:s.highestListenSequenceNumber}))(c))))})).next((()=>O.waitFor(i)))}))}bi(e,n){e.createObjectStore(Oa,{keyPath:ND});const r=n.store(Oa),s=new hp,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Mt(c)})}};return n.store(Is).ee({X:!0},((o,a)=>{const c=new Te(o);return i(c.popLast())})).next((()=>n.store(Ji).ee({X:!0},(([o,a,c],l)=>{const h=Bn(a);return i(h.popLast())}))))}Di(e){const n=e.store(Yi);return n.ee(((r,s)=>{const i=ra(s),o=II(this.serializer,i);return n.put(o)}))}Ci(e,n){const r=n.store(Is),s=[];return r.ee(((i,o)=>{const a=n.store(xu),c=(function(f){return f.document?new Y(Te.fromString(f.document.name).popFirst(5)):f.noDocument?Y.fromSegments(f.noDocument.path):f.unknownDocument?Y.fromSegments(f.unknownDocument.path):ne(36783)})(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(l))})).next((()=>O.waitFor(s)))}Fi(e,n){const r=n.store(wn),s=NI(this.serializer),i=new dp(El.mi,this.serializer.yt);return r.J().next((o=>{const a=new Map;return o.forEach((c=>{let l=a.get(c.userId)??_e();As(this.serializer,c).keys().forEach((h=>l=l.add(h))),a.set(c.userId,l)})),O.forEach(a,((c,l)=>{const h=new _t(l),f=yl.wt(this.serializer,h),p=i.getIndexManager(h),m=vl.wt(h,this.serializer,p,i.referenceDelegate);return new kI(s,m,f,p).recalculateAndSaveOverlaysForDocumentKeys(new If(n,Jt.ce),c).next()}))}))}}function wy(t){t.createObjectStore(Xi,{keyPath:VD}).createIndex(zd,DD,{unique:!0}),t.createObjectStore(Yi,{keyPath:"targetId"}).createIndex(vT,xD,{unique:!0}),t.createObjectStore(Fs)}const xr="IndexedDbPersistence",Rh=18e5,Sh=5e3,Ph="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",OI="main";class pp{constructor(e,n,r,s,i,o,a,c,l,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=l,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!pp.v())throw new q(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YN(this,s),this.$i=n+OI,this.serializer=new TI(c),this.Ui=new $n(this.$i,this.Ni,new uk(this.serializer)),this.hi=new BN,this.Pi=new zN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NI(this.serializer),this.Ii=new FN,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&tt(xr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,Ph);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Jt(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Fc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(is(e))return H(xr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H(xr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Jo(e).get(di).next((n=>O.resolve(this.es(n))))}ts(e){return Fc(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Rh)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=pt(n,Zi);return r.J().next((s=>{const i=this.ss(s,Rh),o=s.filter((a=>i.indexOf(a)===-1));return O.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?O.resolve(!0):Jo(e).get(di).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Sh)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,Ph);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fc(e).J().next((r=>this.ss(r,Sh).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&H(xr,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[tc,Zi],(e=>{const n=new If(e,Jt.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Fc(e).J().next((n=>this.ss(n,Rh).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return vl.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KN(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return yl.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){H(xr,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(function(c){return c===18?QD:c===17?RT:c===16?WD:c===15?Jd:c===14?AT:c===13?bT:c===12?zD:c===11?IT:void ne(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,s,i,(a=>(o=new If(a,this.ci?this.ci.next():Jt.ce),n==="readwrite-primary"?this.Hi(o).next((c=>!!c||this.Yi(o))).next((c=>{if(!c)throw tt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new q(F.FAILED_PRECONDITION,dT);return r(o)})).next((c=>this.Xi(o).next((()=>c)))):this.Is(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Is(e){return Jo(e).get(di).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Sh)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(F.FAILED_PRECONDITION,Ph)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jo(e).put(di,n)}static v(){return $n.v()}Zi(e){const n=Jo(e);return n.get(di).next((r=>this.es(r)?(H(xr,"Releasing primary lease."),n.delete(di)):O.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(tt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Mw()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return H(xr,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return tt(xr,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){tt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jo(t){return pt(t,tc)}function Fc(t){return pt(t,Zi)}function mp(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=_e(),s=_e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new gp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Mw()?8:mT(Ru())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new lk;return this.Ss(e,n,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(wi()<=be.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ti(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(wi()<=be.DEBUG&&H("QueryEngine","Query:",Ti(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(wi()<=be.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ti(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ht(n))):O.resolve())}ys(e,n){if(G_(n))return O.resolve(null);let r=Ht(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=ku(n,null,"F"),r=Ht(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=_e(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const l=this.Ds(n,a);return this.Cs(n,l,o,c.readTime)?this.ys(e,ku(n,null,"F")):this.vs(e,l,n,c)}))))})))))}ws(e,n,r,s){return G_(n)||s.isEqual(ce.min())?O.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?O.resolve(null):(wi()<=be.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ti(n)),this.vs(e,o,n,hT(s,Qi)).next((a=>a)))}))}Ds(e,n){let r=new ke(zT(e));return n.forEach(((s,i)=>{sc(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return wi()<=be.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ti(n)),this.ps.getDocumentsMatchingQuery(e,n,un.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="LocalStore",hk=3e8;class fk{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new $e(me),this.xs=new _r((i=>qs(i)),nc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function LI(t,e,n,r){return new fk(t,e,n,r)}async function FI(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let c=_e();for(const l of s){o.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}for(const l of i){a.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((l=>({Ls:l,removedBatchIds:o,addedBatchIds:a})))}))}))}function dk(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,h){const f=l.batch,p=f.keys();let m=O.resolve();return p.forEach((y=>{m=m.next((()=>h.getEntry(c,y))).next((E=>{const C=l.docVersions.get(y);oe(C!==null,48541),E.version.compareTo(C)<0&&(f.applyToRemoteDocument(E,l),E.isValidDocument()&&(E.setReadTime(l.commitVersion),h.addEntry(E)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(c,f)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=_e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function BI(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function pk(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach(((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f))));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Ze.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(f,m),(function(E,C,N){return E.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=hk?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))}));let c=Xt(),l=_e();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(UI(i,o,e.documentUpdates).next((h=>{c=h.ks,l=h.qs}))),!r.isEqual(ce.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return O.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,l))).next((()=>c))})).then((i=>(n.Ms=s,i)))}function UI(t,e,n){let r=_e(),s=_e();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=Xt();return n.forEach(((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):H(_p,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)})),{ks:o,qs:s}}))}function mk(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Gr),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function oo(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,O.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function ao(t,e,n){const r=Z(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!is(o))throw o;H(_p,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Bu(t,e,n){const r=Z(t);let s=ce.min(),i=_e();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,l,h){const f=Z(c),p=f.xs.get(h);return p!==void 0?O.resolve(f.Ms.get(p)):f.Pi.getTargetData(l,h)})(r,o,Ht(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((c=>{i=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:_e()))).next((a=>(qI(r,KT(e),a),{documents:a,Qs:i})))))}function jI(t,e){const n=Z(t),r=Z(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(i=>r.At(i,e).next((o=>o?o.target:null))))}function $I(t,e){const n=Z(t),r=n.Os.get(e)||ce.min();return n.persistence.runTransaction("Get new document changes","readonly",(s=>n.Ns.getAllFromCollectionGroup(s,e,hT(r,Qi),Number.MAX_SAFE_INTEGER))).then((s=>(qI(n,e,s),s)))}function qI(t,e,n){let r=t.Os.get(e)||ce.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}async function gk(t,e,n,r){const s=Z(t);let i=_e(),o=Xt();for(const l of n){const h=e.$s(l.metadata.name);l.document&&(i=i.add(h));const f=e.Us(l);f.setReadTime(e.Ks(l.metadata.readTime)),o=o.insert(h,f)}const a=s.Ns.newChangeBuffer({trackRemovals:!0}),c=await oo(s,(function(h){return Ht(vo(Te.fromString(`__bundle__/docs/${h}`)))})(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",(l=>UI(l,a,o).next((h=>(a.apply(l),h))).next((h=>s.Pi.removeMatchingKeysForTargetId(l,c.targetId).next((()=>s.Pi.addMatchingKeys(l,i,c.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(l,h.ks,h.qs))).next((()=>h.ks))))))}async function _k(t,e,n=_e()){const r=await oo(t,Ht(up(e.bundledQuery))),s=Z(t);return s.persistence.runTransaction("Save named query","readwrite",(i=>{const o=nt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ii.saveNamedQuery(i,e);const a=r.withResumeToken(Ze.EMPTY_BYTE_STRING,o);return s.Ms=s.Ms.insert(a.targetId,a),s.Pi.updateTargetData(i,a).next((()=>s.Pi.removeMatchingKeysForTargetId(i,r.targetId))).next((()=>s.Pi.addMatchingKeys(i,n,r.targetId))).next((()=>s.Ii.saveNamedQuery(i,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="firestore_clients";function Ty(t,e){return`${HI}_${t}_${e}`}const GI="firestore_mutations";function Iy(t,e,n){let r=`${GI}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const KI="firestore_targets";function Ch(t,e){return`${KI}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="SharedClientState";class Uu{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new q(s.error.code,s.error.message))),o?new Uu(e,n,s.state,i):(tt(Mn,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class va{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new q(r.error.code,r.error.message))),i?new va(e,r.state,s):(tt(Mn,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ju{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=tp();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=gT(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new ju(e,i):(tt(Mn,`Failed to parse client data for instance '${e}': ${n}`),null)}}class yp{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new yp(n.clientId,n.onlineState):(tt(Mn,`Failed to parse online state: ${e}`),null)}}class Ff{constructor(){this.activeTargetIds=tp()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xh{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new $e(me),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Ty(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Ff),this.ro=new RegExp(`^${HI}_${o}_([^_]*)$`),this.io=new RegExp(`^${GI}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${KI}_${o}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Ty(this.persistenceKey,r));if(s){const i=ju.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ch(this.persistenceKey,e));if(s){const i=va.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ch(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((s=>{this.Po(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return H(Mn,"READ",e,n),n}setItem(e,n){H(Mn,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){H(Mn,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(H(Mn,"EVENT",n.key,n.newValue),n.key===this.eo)return void tt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(i){let o=Jt.ce;if(i!=null)try{const a=JSON.parse(i);oe(typeof a=="number",30636,{So:i}),o=a}catch(a){tt(Mn,"Failed to read sequence number from WebStorage",a)}return o})(n.newValue);r!==Jt.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new Uu(this.currentUser,e,n,r),i=Iy(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=Iy(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=Ch(this.persistenceKey,e),i=new va(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return ju.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Uu.Ws(new _t(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return va.Ws(s,n)}uo(e){return yp.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);H(Mn,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach((c=>{s.has(c)||o.push(c)})),s.forEach((c=>{i.has(c)||a.push(c)})),this.syncEngine.Fo(o,a).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=tp();return e.forEach(((r,s)=>{n=n.unionWith(s.activeTargetIds)})),n}}class zI{constructor(){this.Mo=new Ff,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ff,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="ConnectivityMonitor";class Ay{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(by,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(by,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc=null;function Bf(){return Bc===null?Bc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bc++,"0x"+Bc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="RestConnection",vk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ek{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===bf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Bf(),a=this.zo(e,n.toUriEncodedString());H(Vh,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:l}=new URL(a),h=kd(l);return this.Jo(e,a,c,r,h).then((f=>(H(Vh,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw Gn(Vh,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=vk[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class Tk extends Ek{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Bf();return new Promise(((a,c)=>{const l=new eT;l.setWithCredentials(!0),l.listenOnce(tT.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case Gc.NO_ERROR:const f=l.getResponseJson();H(Ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Gc.TIMEOUT:H(Ct,`RPC '${e}' ${o} timed out`),c(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Gc.HTTP_ERROR:const p=l.getStatus();if(H(Ct,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const E=(function(N){const D=N.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(D)>=0?D:F.UNKNOWN})(y.status);c(new q(E,y.message))}else c(new q(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new q(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{H(Ct,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);H(Ct,`RPC '${e}' ${o} sending request:`,s),l.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=Bf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sT(),a=rT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");H(Ct,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,m=!1;const y=new wk({Yo:C=>{m?H(Ct,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(p||(H(Ct,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),H(Ct,`RPC '${e}' stream ${s} sending:`,C),f.send(C))},Zo:()=>f.close()}),E=(C,N,D)=>{C.listen(N,(v=>{try{D(v)}catch(x){setTimeout((()=>{throw x}),0)}}))};return E(f,ea.EventType.OPEN,(()=>{m||(H(Ct,`RPC '${e}' stream ${s} transport opened.`),y.o_())})),E(f,ea.EventType.CLOSE,(()=>{m||(m=!0,H(Ct,`RPC '${e}' stream ${s} transport closed`),y.a_(),this.E_(f))})),E(f,ea.EventType.ERROR,(C=>{m||(m=!0,Gn(Ct,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),y.a_(new q(F.UNAVAILABLE,"The operation could not be completed")))})),E(f,ea.EventType.MESSAGE,(C=>{if(!m){const N=C.data[0];oe(!!N,16349);const D=N,v=D?.error||D[0]?.error;if(v){H(Ct,`RPC '${e}' stream ${s} received error:`,v);const x=v.status;let k=(function(T){const w=st[T];if(w!==void 0)return oI(w)})(x),U=v.message;k===void 0&&(k=F.INTERNAL,U="Unknown error status: "+x+" with message "+v.message),m=!0,y.a_(new q(k,U)),f.close()}else H(Ct,`RPC '${e}' stream ${s} received:`,N),y.u_(N)}})),E(a,nT.STAT_EVENT,(C=>{C.stat===_f.PROXY?H(Ct,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===_f.NOPROXY&&H(Ct,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{y.__()}),0),y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(){return typeof window<"u"?window:null}function tu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){return new SN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="PersistentStream";class QI{constructor(e,n,r,s,i,o,a,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(tt(n.toString()),tt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return H(Ry,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(H(Ry,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ik extends QI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xN(this.serializer,e),r=(function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?nt(o.readTime):ce.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Nf(this.serializer),n.addTarget=(function(i,o){let a;const c=o.target;if(a=Du(c)?{documents:gI(i,c)}:{query:_I(i,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lI(i,o.resumeToken);const l=Vf(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=io(i,o.snapshotVersion.toTimestamp());const l=Vf(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);const r=DN(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Nf(this.serializer),n.removeTarget=e,this.q_(n)}}class bk extends QI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=VN(e.writeResults,e.commitTime),r=nt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Nf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>ja(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{}class Rk extends Ak{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Df(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(F.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Df(n,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Sk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tt(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="RemoteStore";class Pk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{as(this)&&(H(Qs,"Restarting streams for network reachability change."),await(async function(c){const l=Z(c);l.Ea.add(4),await To(l),l.Ra.set("Unknown"),l.Ea.delete(4),await uc(l)})(this))}))})),this.Ra=new Sk(r,s)}}async function uc(t){if(as(t))for(const e of t.da)await e(!0)}async function To(t){for(const e of t.da)await e(!1)}function wl(t,e){const n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Tp(n)?wp(n):bo(n).O_()&&Ep(n,e))}function co(t,e){const n=Z(t),r=bo(n);n.Ia.delete(e),r.O_()&&JI(n,e),n.Ia.size===0&&(r.O_()?r.L_():as(n)&&n.Ra.set("Unknown"))}function Ep(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(t).Y_(e)}function JI(t,e){t.Va.Ue(e),bo(t).Z_(e)}function wp(t){t.Va=new IN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.Ra.ua()}function Tp(t){return as(t)&&!bo(t).x_()&&t.Ia.size>0}function as(t){return Z(t).Ea.size===0}function YI(t){t.Va=void 0}async function Ck(t){t.Ra.set("Online")}async function xk(t){t.Ia.forEach(((e,n)=>{Ep(t,e)}))}async function Vk(t,e){YI(t),Tp(t)?(t.Ra.ha(e),wp(t)):t.Ra.set("Unknown")}async function Dk(t,e,n){if(t.Ra.set("Online"),e instanceof uI&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))})(t,e)}catch(r){H(Qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $u(t,r)}else if(e instanceof Zc?t.Va.Ze(e):e instanceof cI?t.Va.st(e):t.Va.tt(e),!n.isEqual(ce.min()))try{const r=await BI(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(l);h&&i.Ia.set(l,h.withResumeToken(c.resumeToken,o))}})),a.targetMismatches.forEach(((c,l)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Ze.EMPTY_BYTE_STRING,h.snapshotVersion)),JI(i,c);const f=new sr(h.target,c,l,h.sequenceNumber);Ep(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){H(Qs,"Failed to raise snapshot:",r),await $u(t,r)}}async function $u(t,e,n){if(!is(e))throw e;t.Ea.add(1),await To(t),t.Ra.set("Offline"),n||(n=()=>BI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{H(Qs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await uc(t)}))}function XI(t,e){return e().catch((n=>$u(t,n,e)))}async function Io(t){const e=Z(t),n=es(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Gr;for(;Nk(e);)try{const s=await mk(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,kk(e,s)}catch(s){await $u(e,s)}ZI(e)&&eb(e)}function Nk(t){return as(t)&&t.Ta.length<10}function kk(t,e){t.Ta.push(e);const n=es(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ZI(t){return as(t)&&!es(t).x_()&&t.Ta.length>0}function eb(t){es(t).start()}async function Ok(t){es(t).ra()}async function Mk(t){const e=es(t);for(const n of t.Ta)e.ea(n.mutations)}async function Lk(t,e,n){const r=t.Ta.shift(),s=ip.from(r,e,n);await XI(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Io(t)}async function Fk(t,e){e&&es(t).X_&&await(async function(r,s){if((function(o){return iI(o)&&o!==F.ABORTED})(s.code)){const i=r.Ta.shift();es(r).B_(),await XI(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Io(r)}})(t,e),ZI(t)&&eb(t)}async function Sy(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),H(Qs,"RemoteStore received new credentials");const r=as(n);n.Ea.add(3),await To(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await uc(n)}async function Uf(t,e){const n=Z(t);e?(n.Ea.delete(2),await uc(n)):e||(n.Ea.add(2),await To(n),n.Ra.set("Unknown"))}function bo(t){return t.ma||(t.ma=(function(n,r,s){const i=Z(n);return i.sa(),new Ik(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:Ck.bind(null,t),t_:xk.bind(null,t),r_:Vk.bind(null,t),H_:Dk.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Tp(t)?wp(t):t.Ra.set("Unknown")):(await t.ma.stop(),YI(t))}))),t.ma}function es(t){return t.fa||(t.fa=(function(n,r,s){const i=Z(n);return i.sa(),new bk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ok.bind(null,t),r_:Fk.bind(null,t),ta:Mk.bind(null,t),na:Lk.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Io(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Qs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Ip(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ao(t,e){if(tt("AsyncQueue",`${e}: ${t}`),is(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{static emptySet(e){return new Mi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=ta(),this.sortedSet=new $e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Mi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(){this.ga=new $e(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class uo{constructor(e,n,r,s,i,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new uo(e,n,Mi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Uk{constructor(){this.queries=Cy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=Cy(),i.forEach(((o,a)=>{for(const c of a.Sa)c.onError(r)}))})(this,new q(F.ABORTED,"Firestore shutting down"))}}function Cy(){return new _r((t=>GT(t)),rc)}async function bp(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new Bk,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ao(o,`Initialization of query '${Ti(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Rp(n)}async function Ap(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jk(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Rp(n)}function $k(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Rp(t){t.Ca.forEach((e=>{e.next()}))}var jf,xy;(xy=jf||(jf={})).Ma="default",xy.Cache="cache";class Sp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jf.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e){this.serializer=e}$s(e){return qn(this.serializer,e)}Us(e){return e.metadata.exists?mI(this.serializer,e.document,!1):Ge.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return nt(e)}}class Hk{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=tb(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=Te.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new Vy(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.$s(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||_e()).add(i);n.set(o,a)}}return n}async ja(e){const n=await gk(e,new Vy(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const s of this.Ka)await _k(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function tb(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.key=e}}class rb{constructor(e){this.key=e}}class sb{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=zT(e),this.tu=new Mi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Py,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,f)=>{const p=s.get(h),m=sc(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),E=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let C=!1;p&&m?p.data.isEqual(m.data)?y!==E&&(r.track({type:3,doc:m}),C=!0):this.su(p,m)||(r.track({type:2,doc:m}),C=!0,(c&&this.eu(m,c)>0||l&&this.eu(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),C=!0):p&&!m&&(r.track({type:1,doc:p}),C=!0,(c||l)&&(a=!0)),C&&(m?(o=o.add(m),i=E?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(m,y){const E=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:C})}};return E(m)-E(y)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new uo(this.query,e.tu,i,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Py,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new rb(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new nb(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cs="SyncEngine";class Gk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Kk{constructor(e){this.key=e,this.hu=!1}}class zk{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new _r((a=>GT(a)),rc),this.Iu=new Map,this.Eu=new Set,this.du=new $e(Y.comparator),this.Au=new Map,this.Ru=new fp,this.Vu={},this.mu=new Map,this.fu=Ws.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Wk(t,e,n=!0){const r=Tl(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ib(r,e,n,!0),s}async function Qk(t,e){const n=Tl(t);await ib(n,e,!0,!1)}async function ib(t,e,n,r){const s=await oo(t.localStore,Ht(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Pp(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&wl(t.remoteStore,s),a}async function Pp(t,e,n,r,s){t.pu=(f,p,m)=>(async function(E,C,N,D){let v=C.view.ru(N);v.Cs&&(v=await Bu(E.localStore,C.query,!1).then((({documents:b})=>C.view.ru(b,v))));const x=D&&D.targetChanges.get(C.targetId),k=D&&D.targetMismatches.get(C.targetId)!=null,U=C.view.applyChanges(v,E.isPrimaryClient,x,k);return $f(E,C.targetId,U.au),U.snapshot})(t,f,p,m);const i=await Bu(t.localStore,e,!0),o=new sb(e,i.Qs),a=o.ru(i.documents),c=ac.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),l=o.applyChanges(a,t.isPrimaryClient,c);$f(t,n,l.au);const h=new Gk(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function Jk(t,e,n){const r=Z(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!rc(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ao(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&co(r.remoteStore,s.targetId),lo(r,s.targetId)})).catch(ss)):(lo(r,s.targetId),await ao(r.localStore,s.targetId,!0))}async function Yk(t,e){const n=Z(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),co(n.remoteStore,r.targetId))}async function Xk(t,e,n){const r=Dp(t);try{const s=await(function(o,a){const c=Z(o),l=De.now(),h=a.reduce(((m,y)=>m.add(y.key)),_e());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let y=Xt(),E=_e();return c.Ns.getEntries(m,h).next((C=>{y=C,y.forEach(((N,D)=>{D.isValidDocument()||(E=E.add(N))}))})).next((()=>c.localDocuments.getOverlayedDocuments(m,y))).next((C=>{f=C;const N=[];for(const D of a){const v=EN(D,f.get(D.key).overlayedDocument);v!=null&&N.push(new yr(D.key,v,MT(v.value.mapValue),We.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,N,a)})).next((C=>{p=C;const N=C.applyToLocalDocumentSet(f,E);return c.documentOverlayCache.saveOverlays(m,C.batchId,N)}))})).then((()=>({batchId:p.batchId,changes:QT(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,c){let l=o.Vu[o.currentUser.toKey()];l||(l=new $e(me)),l=l.insert(a,c),o.Vu[o.currentUser.toKey()]=l})(r,s.batchId,n),await vr(r,s.changes),await Io(r.remoteStore)}catch(s){const i=Ao(s,"Failed to persist write");n.reject(i)}}async function ob(t,e){const n=Z(t);try{const r=await pk(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?oe(o.hu,14607):s.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))})),await vr(n,r,e)}catch(r){await ss(r)}}function Dy(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const c=Z(o);c.onlineState=a;let l=!1;c.queries.forEach(((h,f)=>{for(const p of f.Sa)p.va(a)&&(l=!0)})),l&&Rp(c)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Zk(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new $e(Y.comparator);o=o.insert(i,Ge.newNoDocument(i,ce.min()));const a=_e().add(i),c=new oc(ce.min(),new Map,new $e(me),o,a);await ob(r,c),r.du=r.du.remove(i),r.Au.delete(e),Vp(r)}else await ao(r.localStore,e,!1).then((()=>lo(r,e,n))).catch(ss)}async function eO(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await dk(n.localStore,e);xp(n,r,null),Cp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vr(n,s)}catch(s){await ss(s)}}async function tO(t,e,n){const r=Z(t);try{const s=await(function(o,a){const c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next((f=>(oe(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(l,f)))).next((()=>c.mutationQueue.performConsistencyCheck(l))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h))).next((()=>c.localDocuments.getDocuments(l,h)))}))})(r.localStore,e);xp(r,e,n),Cp(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vr(r,s)}catch(s){await ss(s)}}async function nO(t,e){const n=Z(t);as(n.remoteStore)||H(cs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(o){const a=Z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c)))})(n.localStore);if(r===Gr)return void e.resolve();const s=n.mu.get(r)||[];s.push(e),n.mu.set(r,s)}catch(r){const s=Ao(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Cp(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function xp(t,e,n){const r=Z(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function lo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||ab(t,r)}))}function ab(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(co(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Vp(t))}function $f(t,e,n){for(const r of n)r instanceof nb?(t.Ru.addReference(r.key,e),rO(t,r)):r instanceof rb?(H(cs,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ab(t,r.key)):ne(19791,{wu:r})}function rO(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(cs,"New document in limbo: "+n),t.Eu.add(r),Vp(t))}function Vp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(Te.fromString(e)),r=t.fu.next();t.Au.set(r,new Kk(n)),t.du=t.du.insert(n,r),wl(t.remoteStore,new sr(Ht(vo(n.path)),r,"TargetPurposeLimboResolution",Jt.ce))}}async function vr(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,c)=>{o.push(r.pu(c,e,n).then((l=>{if((l||n)&&r.isPrimaryClient){const h=l?!l.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){s.push(l);const h=gp.As(c.targetId,l);i.push(h)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(c,l){const h=Z(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>O.forEach(l,(p=>O.forEach(p.Es,(m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m))).next((()=>O.forEach(p.ds,(m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))))))}catch(f){if(!is(f))throw f;H(_p,"Failed to update sequence numbers: "+f)}for(const f of l){const p=f.targetId;if(!f.fromCache){const m=h.Ms.get(p),y=m.snapshotVersion,E=m.withLastLimboFreeSnapshotVersion(y);h.Ms=h.Ms.insert(p,E)}}})(r.localStore,i))}async function sO(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){H(cs,"User change. New user:",e.toKey());const r=await FI(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((c=>{c.reject(new q(F.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vr(n,r.Ls)}}function iO(t,e){const n=Z(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let s=_e();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function oO(t,e){const n=Z(t),r=await Bu(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&$f(n,e.targetId,s.au),s}async function aO(t,e){const n=Z(t);return $I(n.localStore,e).then((r=>vr(n,r)))}async function cO(t,e,n,r){const s=Z(t),i=await(function(a,c){const l=Z(a),h=Z(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",(f=>h.er(f,c).next((p=>p?l.localDocuments.getDocuments(f,p):O.resolve(null)))))})(s.localStore,e);i!==null?(n==="pending"?await Io(s.remoteStore):n==="acknowledged"||n==="rejected"?(xp(s,e,r||null),Cp(s,e),(function(a,c){Z(Z(a).mutationQueue).ir(c)})(s.localStore,e)):ne(6720,"Unknown batchState",{Su:n}),await vr(s,i)):H(cs,"Cannot apply mutation batch with id: "+e)}async function uO(t,e){const n=Z(t);if(Tl(n),Dp(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await Ny(n,r.toArray());n.gu=!0,await Uf(n.remoteStore,!0);for(const i of s)wl(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach(((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>(lo(n,o),ao(n.localStore,o,!0)))),co(n.remoteStore,o)})),await s,await Ny(n,r),(function(o){const a=Z(o);a.Au.forEach(((c,l)=>{co(a.remoteStore,l)})),a.Ru.Jr(),a.Au=new Map,a.du=new $e(Y.comparator)})(n),n.gu=!1,await Uf(n.remoteStore,!1)}}async function Ny(t,e,n){const r=Z(t),s=[],i=[];for(const o of e){let a;const c=r.Iu.get(o);if(c&&c.length!==0){a=await oo(r.localStore,Ht(c[0]));for(const l of c){const h=r.Tu.get(l),f=await oO(r,h);f.snapshot&&i.push(f.snapshot)}}else{const l=await jI(r.localStore,o);a=await oo(r.localStore,l),await Pp(r,cb(l),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function cb(t){return HT(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function lO(t){return(function(n){return Z(Z(n).persistence).Ts()})(Z(t).localStore)}async function hO(t,e,n,r){const s=Z(t);if(s.gu)return void H(cs,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await $I(s.localStore,KT(i[0])),a=oc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ze.EMPTY_BYTE_STRING);await vr(s,o,a);break}case"rejected":await ao(s.localStore,e,!0),lo(s,e,r);break;default:ne(64155,n)}}async function fO(t,e,n){const r=Tl(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){H(cs,"Adding an already active target "+s);continue}const i=await jI(r.localStore,s),o=await oo(r.localStore,i);await Pp(r,cb(i),o.targetId,!1,o.resumeToken),wl(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await ao(r.localStore,s,!1).then((()=>{co(r.remoteStore,s),lo(r,s)})).catch(ss)}}function Tl(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ob.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zk.bind(null,e),e.Pu.H_=jk.bind(null,e.eventManager),e.Pu.yu=$k.bind(null,e.eventManager),e}function Dp(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tO.bind(null,e),e}function dO(t,e,n){const r=Z(t);(async function(i,o,a){try{const c=await o.getMetadata();if(await(function(m,y){const E=Z(m),C=nt(y.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",(N=>E.Ii.getBundleMetadata(N,y.id))).then((N=>!!N&&N.createTime.compareTo(C)>=0))})(i.localStore,c))return await o.close(),a._completeWith((function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(tb(c));const l=new Hk(c,o.serializer);let h=await o.bu();for(;h;){const p=await l.Ga(h);p&&a._updateProgress(p),h=await o.bu()}const f=await l.ja(i.localStore);return await vr(i,f.Ha,void 0),await(function(m,y){const E=Z(m);return E.persistence.runTransaction("Save bundle","readwrite",(C=>E.Ii.saveBundleMetadata(C,y)))})(i.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Ja)}catch(c){return Gn(cs,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(r,e,n).then((s=>{r.sharedClientState.notifyBundleLoaded(s)}))}class $a{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return LI(this.persistence,new MI,e.initialUser,this.serializer)}Cu(e){return new dp(El.mi,this.serializer)}Du(e){return new zI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$a.provider={build:()=>new $a};class pO extends $a{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof Fu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new xI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new dp((r=>Fu.mi(r,n)),this.serializer)}}class ub extends $a{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Dp(this.xu.syncEngine),await Io(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return LI(this.persistence,new MI,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new xI(r,e.asyncQueue,n)}Mu(e,n){const r=new ID(n,this.persistence);return new TD(e.asyncQueue,r)}Cu(e){const n=mp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new pp(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,WI(),tu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new zI}}class mO extends ub{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof xh&&(this.sharedClientState.syncEngine={Co:cO.bind(null,n),vo:hO.bind(null,n),Fo:fO.bind(null,n),Ts:lO.bind(null,n),Do:aO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await uO(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=WI();if(!xh.v(n))throw new q(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xh(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class qa{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sO.bind(null,this.syncEngine),await Uf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Uk})()}createDatastore(e){const n=cc(e.databaseInfo.databaseId),r=(function(i){return new Tk(i)})(e.databaseInfo);return(function(i,o,a,c){return new Rk(i,o,a,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,a){return new Pk(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>Dy(this.syncEngine,n,0)),(function(){return Ay.v()?new Ay:new yk})())}createSyncEngine(e,n){return(function(s,i,o,a,c,l,h){const f=new zk(s,i,o,a,c,l);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Z(n);H(Qs,"RemoteStore shutting down."),r.Ea.add(5),await To(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}qa.provider={build:()=>new qa};function ky(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):tt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Rt,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const s=await this.$u(r);return new qk(JSON.parse(s),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,i){const o=Z(s),a={documents:i.map((f=>Ua(o.serializer,f)))},c=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Te.emptyPath(),a,i.length),l=new Map;c.forEach((f=>{const p=CN(o.serializer,f);l.set(p.key.toString(),p)}));const h=[];return i.forEach((f=>{const p=l.get(f.toString());oe(!!p,55234,{key:f}),h.push(p)})),h})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new wo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const s=Y.fromPath(r);this.mutations.push(new rp(s,this.precondition(s)))})),await(async function(r,s){const i=Z(r),o={writes:s.map((a=>ja(i.serializer,a)))};await i.Go("Commit",i.serializer.databaseId,Te.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ne(50498,{Gu:e.constructor.name});n=ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ce.min())?We.exists(!1):We.updateTime(n):We.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ce.min()))throw new q(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return We.updateTime(n)}return We.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new vp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new _O(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Yu(s)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!ec(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!iI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="FirestoreClient";class vO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=_t.UNAUTHENTICATED,this.clientId=qd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{H(ts,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(H(ts,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ao(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Dh(t,e){t.asyncQueue.verifyOperationInProgress(),H(ts,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await FI(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Oy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Np(t);H(ts,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Sy(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Sy(e.remoteStore,s))),t._onlineComponents=e}async function Np(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(ts,"Using user provided OfflineComponentProvider");try{await Dh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Gn("Error using user provided cache. Falling back to memory cache: "+n),await Dh(t,new $a)}}else H(ts,"Using default OfflineComponentProvider"),await Dh(t,new pO(void 0));return t._offlineComponents}async function bl(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(ts,"Using user provided OnlineComponentProvider"),await Oy(t,t._uninitializedComponentsProvider._online)):(H(ts,"Using default OnlineComponentProvider"),await Oy(t,new qa))),t._onlineComponents}function lb(t){return Np(t).then((e=>e.persistence))}function kp(t){return Np(t).then((e=>e.localStore))}function hb(t){return bl(t).then((e=>e.remoteStore))}function Op(t){return bl(t).then((e=>e.syncEngine))}function EO(t){return bl(t).then((e=>e.datastore))}async function ho(t){const e=await bl(t),n=e.eventManager;return n.onListen=Wk.bind(null,e.syncEngine),n.onUnlisten=Jk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Qk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Yk.bind(null,e.syncEngine),n}function wO(t){return t.asyncQueue.enqueue((async()=>{const e=await lb(t),n=await hb(t);return e.setNetworkEnabled(!0),(function(s){const i=Z(s);return i.Ea.delete(0),uc(i)})(n)}))}function TO(t){return t.asyncQueue.enqueue((async()=>{const e=await lb(t),n=await hb(t);return e.setNetworkEnabled(!1),(async function(s){const i=Z(s);i.Ea.add(0),await To(i),i.Ra.set("Offline")})(n)}))}function IO(t,e){const n=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await(function(l,h){const f=Z(l);return f.persistence.runTransaction("read document","readonly",(p=>f.localDocuments.getDocument(p,h)))})(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new q(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=Ao(a,`Failed to get document '${i} from cache`);o.reject(c)}})(await kp(t),e,n))),n.promise}function fb(t,e,n={}){const r=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,l){const h=new Il({next:p=>{h.Nu(),o.enqueueAndForget((()=>Ap(i,f)));const m=p.docs.has(a);!m&&p.fromCache?l.reject(new q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?l.reject(new q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new Sp(vo(a.path),h,{includeMetadataChanges:!0,qa:!0});return bp(i,f)})(await ho(t),t.asyncQueue,e,n,r))),r.promise}function bO(t,e){const n=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await Bu(s,i,!0),c=new sb(i,a.Qs),l=c.ru(a.documents),h=c.applyChanges(l,!1);o.resolve(h.snapshot)}catch(a){const c=Ao(a,`Failed to execute query '${i} against cache`);o.reject(c)}})(await kp(t),e,n))),n.promise}function db(t,e,n={}){const r=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,l){const h=new Il({next:p=>{h.Nu(),o.enqueueAndForget((()=>Ap(i,f))),p.fromCache&&c.source==="server"?l.reject(new q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new Sp(a,h,{includeMetadataChanges:!0,qa:!0});return bp(i,f)})(await ho(t),t.asyncQueue,e,n,r))),r.promise}function AO(t,e){const n=new Il(e);return t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.add(i),i.next()})(await ho(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.delete(i)})(await ho(t),n)))}}function RO(t,e,n,r){const s=(function(o,a){let c;return c=typeof o=="string"?aI().encode(o):o,(function(h,f){return new gO(h,f)})((function(h,f){if(h instanceof Uint8Array)return ky(h,f);if(h instanceof ArrayBuffer)return ky(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(n,cc(e));t.asyncQueue.enqueueAndForget((async()=>{dO(await Op(t),s,r)}))}function SO(t,e){return t.asyncQueue.enqueue((async()=>(function(r,s){const i=Z(r);return i.persistence.runTransaction("Get named query","readonly",(o=>i.Ii.getNamedQuery(o,s)))})(await kp(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="firestore.googleapis.com",Ly=!0;class Fy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mb,this.ssl=Ly}else this.host=e.host,this.ssl=e.ssl??Ly;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WN)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pb(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new lD;switch(r.type){case"firstParty":return new pD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=My.get(n);r&&(H("ComponentProvider","Removing Datastore"),My.delete(n),r.terminate())})(this),Promise.resolve()}}function PO(t,e,n,r={}){t=Se(t,lc);const s=kd(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(Sx(`https://${a}`),Vx("Firestore",!0)),i.host!==mb&&i.host!==a&&Gn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:a,ssl:s,emulatorOptions:r};if(!Hi(c,o)&&(t._setSettings(c),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=_t.MOCK_USER;else{l=Px(r.mockUserToken,t._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new _t(f)}t._authCredentials=new hD(new oT(l,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gt=class gb{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gb(this.firestore,e,this._query)}},je=class sa{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sa(this.firestore,e,this._key)}toJSON(){return{type:sa._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Za(n,sa._jsonSchema))return new sa(e,r||null,new Y(Te.fromString(n.referencePath)))}};je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:ot("string",je._jsonSchemaVersion),referencePath:ot("string")};let Kr=class _b extends Gt{constructor(e,n,r){super(e,n,vo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new Y(e))}withConverter(e){return new _b(this.firestore,e,this._path)}};function yb(t,e,...n){if(t=at(t),Hd("collection","path",e),t instanceof lc){const r=Te.fromString(e,...n);return R_(r),new Kr(t,null,r)}{if(!(t instanceof je||t instanceof Kr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return R_(r),new Kr(t.firestore,null,r)}}function CO(t,e){if(t=Se(t,lc),Hd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gt(t,null,(function(r){return new gr(Te.emptyPath(),r)})(e))}function qu(t,e,...n){if(t=at(t),arguments.length===1&&(e=qd.newId()),Hd("doc","path",e),t instanceof lc){const r=Te.fromString(e,...n);return A_(r),new je(t,null,new Y(r))}{if(!(t instanceof je||t instanceof Kr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return A_(r),new je(t.firestore,t instanceof Kr?t.converter:null,new Y(r))}}function vb(t,e){return t=at(t),e=at(e),(t instanceof je||t instanceof Kr)&&(e instanceof je||e instanceof Kr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Eb(t,e){return t=at(t),e=at(e),t instanceof Gt&&e instanceof Gt&&t.firestore===e.firestore&&rc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="AsyncQueue";class Uy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vp(this,"async_queue_retry"),this._c=()=>{const r=tu();r&&H(By,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=tu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=tu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Rt;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!is(e))throw e;H(By,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,tt("INTERNAL UNHANDLED ERROR: ",jy(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Ip.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:jy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function jy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class xO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=-1;let rt=class extends lc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Uy,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uy(e),this._firestoreClient=void 0,await e}}};function Lt(t){if(t._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wb(t),t._firestoreClient}function wb(t){const e=t._freezeSettings(),n=(function(s,i,o,a){return new XD(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,pb(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new vO(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}function DO(t,e){Gn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Tb(t,qa.provider,{build:r=>new ub(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function NO(t){Gn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();Tb(t,qa.provider,{build:n=>new mO(n,e.cacheSizeBytes)})}function Tb(t,e,n){if((t=Se(t,rt))._firestoreClient||t._terminated)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new q(F.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},wb(t)}function kO(t){if(t._initialized&&!t._terminated)throw new q(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rt;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!$n.v())return Promise.resolve();const s=r+OI;await $n.delete(s)})(mp(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function OO(t){return(function(n){const r=new Rt;return n.asyncQueue.enqueueAndForget((async()=>nO(await Op(n),r))),r.promise})(Lt(t=Se(t,rt)))}function MO(t){return wO(Lt(t=Se(t,rt)))}function LO(t){return TO(Lt(t=Se(t,rt)))}function FO(t,e){const n=Lt(t=Se(t,rt)),r=new xO;return RO(n,t._databaseId,e,r),r}function BO(t,e){return SO(Lt(t=Se(t,rt)),e).then((n=>n?new Gt(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nt(Ze.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nt(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Za(e,Nt._jsonSchema))return Nt.fromBase64String(e.bytes)}}Nt._jsonSchemaVersion="firestore/bytes/1.0",Nt._jsonSchema={type:ot("string",Nt._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ns=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ti=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bn._jsonSchemaVersion}}static fromJSON(e){if(Za(e,bn._jsonSchema))return new bn(e.latitude,e.longitude)}}bn._jsonSchemaVersion="firestore/geoPoint/1.0",bn._jsonSchema={type:ot("string",bn._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Hn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Za(e,Hn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Hn(e.vectorValues);throw new q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hn._jsonSchemaVersion="firestore/vectorValue/1.0",Hn._jsonSchema={type:ot("string",Hn._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=/^__.*__$/;class jO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eo(e,this.data,n,this.fieldTransforms)}}class Ib{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class Al{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Al({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bb(this.Ac)&&UO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $O{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cc(e)}Cc(e,n,r,s=!1){return new Al({Ac:e,methodName:n,Dc:r,path:ze.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ni(t){const e=t._freezeSettings(),n=cc(t._databaseId);return new $O(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rl(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);$p("Data must be an object, but it was:",o,r);const a=Sb(r,o);let c,l;if(i.merge)c=new Yt(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Hf(e,f,n);if(!o.contains(p))throw new q(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Cb(h,p)||h.push(p)}c=new Yt(h),l=o.fieldTransforms.filter((f=>c.covers(f.field)))}else c=null,l=o.fieldTransforms;return new jO(new bt(a),c,l)}class hc extends ti{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hc}}function Ab(t,e,n){return new Al({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Mp extends ti{_toFieldTransform(e){return new ic(e.path,new ro)}isEqual(e){return e instanceof Mp}}class Lp extends ti{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Ab(this,e,!0),r=this.vc.map((i=>ri(i,n))),s=new Hs(r);return new ic(e.path,s)}isEqual(e){return e instanceof Lp&&Hi(this.vc,e.vc)}}class Fp extends ti{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Ab(this,e,!0),r=this.vc.map((i=>ri(i,n))),s=new Gs(r);return new ic(e.path,s)}isEqual(e){return e instanceof Fp&&Hi(this.vc,e.vc)}}class Bp extends ti{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new so(e.serializer,XT(e.serializer,this.Fc));return new ic(e.path,n)}isEqual(e){return e instanceof Bp&&this.Fc===e.Fc}}function Up(t,e,n,r){const s=t.Cc(1,e,n);$p("Data must be an object, but it was:",s,r);const i=[],o=bt.empty();os(r,((c,l)=>{const h=qp(e,c,n);l=at(l);const f=s.yc(h);if(l instanceof hc)i.push(h);else{const p=ri(l,f);p!=null&&(i.push(h),o.set(h,p))}}));const a=new Yt(i);return new Ib(o,a,s.fieldTransforms)}function jp(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Hf(e,r,n)],c=[s];if(i.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Hf(e,i[p])),c.push(i[p+1]);const l=[],h=bt.empty();for(let p=a.length-1;p>=0;--p)if(!Cb(l,a[p])){const m=a[p];let y=c[p];y=at(y);const E=o.yc(m);if(y instanceof hc)l.push(m);else{const C=ri(y,E);C!=null&&(l.push(m),h.set(m,C))}}const f=new Yt(l);return new Ib(h,f,o.fieldTransforms)}function Rb(t,e,n,r=!1){return ri(n,t.Cc(r?4:3,e))}function ri(t,e){if(Pb(t=at(t)))return $p("Unsupported field value:",e,t),Sb(t,e);if(t instanceof ti)return(function(r,s){if(!bb(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let c=ri(a,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=De.fromDate(r);return{timestampValue:io(s.serializer,i)}}if(r instanceof De){const i=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:io(s.serializer,i)}}if(r instanceof bn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nt)return{bytesValue:lI(s.serializer,r._byteString)};if(r instanceof je){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Hn)return(function(o,a){return{mapValue:{fields:{[Yd]:{stringValue:Xd},[eo]:{arrayValue:{values:o.toArray().map((l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return np(a.serializer,l)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${cl(r)}`)})(t,e)}function Sb(t,e){const n={};return ST(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):os(t,((r,s)=>{const i=ri(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Pb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof bn||t instanceof Nt||t instanceof je||t instanceof ti||t instanceof Hn)}function $p(t,e,n){if(!Pb(n)||!uT(n)){const r=cl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Hf(t,e,n){if((e=at(e))instanceof ns)return e._internalPath;if(typeof e=="string")return qp(t,e);throw Hu("Field path arguments must be of type string or ",t,!1,void 0,n)}const qO=new RegExp("[~\\*/\\[\\]]");function qp(t,e,n){if(e.search(qO)>=0)throw Hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ns(...e.split("."))._internalPath}catch{throw Hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(F.INVALID_ARGUMENT,a+t+c)}function Cb(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HO extends Ha{data(){return super.data()}}function Sl(t,e){return typeof e=="string"?qp(t,e):e instanceof ns?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hp{}class fc extends Hp{}function Vr(t,e,...n){let r=[];e instanceof Hp&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((c=>c instanceof Gp)).length,a=i.filter((c=>c instanceof Pl)).length;if(o>1||o>0&&a>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Pl extends fc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Pl(e,n,r)}_apply(e){const n=this._parse(e);return Db(e._query,n),new Gt(e.firestore,e.converter,xf(e._query,n))}_parse(e){const n=ni(e.firestore);return(function(i,o,a,c,l,h,f){let p;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){qy(f,h);const y=[];for(const E of f)y.push($y(c,i,E));p={arrayValue:{values:y}}}else p=$y(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||qy(f,h),p=Rb(a,o,f,h==="in"||h==="not-in");return Ie.create(l,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function GO(t,e,n){const r=e,s=Sl("where",t);return Pl._create(s,r,n)}class Gp extends Hp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gp(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ne.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)Db(o,c),o=xf(o,c)})(e._query,n),new Gt(e.firestore,e.converter,xf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kp extends fc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Kp(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ba(i,o)})(e._query,this._field,this._direction);return new Gt(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new gr(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function KO(t,e="asc"){const n=e,r=Sl("orderBy",t);return Kp._create(r,n)}class Cl extends fc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Cl(e,n,r)}_apply(e){return new Gt(e.firestore,e.converter,ku(e._query,this._limit,this._limitType))}}function zO(t){return lT("limit",t),Cl._create("limit",t,"F")}function WO(t){return lT("limitToLast",t),Cl._create("limitToLast",t,"L")}class xl extends fc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new xl(e,n,r)}_apply(e){const n=Vb(e,this.type,this._docOrFields,this._inclusive);return new Gt(e.firestore,e.converter,(function(s,i){return new gr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)})(e._query,n))}}function QO(...t){return xl._create("startAt",t,!0)}function JO(...t){return xl._create("startAfter",t,!1)}class Vl extends fc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vl(e,n,r)}_apply(e){const n=Vb(e,this.type,this._docOrFields,this._inclusive);return new Gt(e.firestore,e.converter,(function(s,i){return new gr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)})(e._query,n))}}function YO(...t){return Vl._create("endBefore",t,!1)}function XO(...t){return Vl._create("endAt",t,!0)}function Vb(t,e,n,r){if(n[0]=at(n[0]),n[0]instanceof Ha)return(function(i,o,a,c,l){if(!c)throw new q(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of Oi(i))if(f.field.isKeyField())h.push($s(o,c.key));else{const p=c.data.field(f.field);if(dl(p))throw new q(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=f.field.canonicalString();throw new q(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(p)}return new Zr(h,l)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=ni(t.firestore);return(function(o,a,c,l,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new q(F.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<h.length;y++){const E=h[y];if(p[y].field.isKeyField()){if(typeof E!="string")throw new q(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof E}`);if(!ep(o)&&E.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${E}' contains a slash.`);const C=o.path.child(Te.fromString(E));if(!Y.isDocumentKey(C))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const N=new Y(C);m.push($s(a,N))}else{const C=Rb(c,l,E);m.push(C)}}return new Zr(m,f)})(t._query,t.firestore._databaseId,s,e,n,r)}}function $y(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ep(e)&&n.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!Y.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $s(t,new Y(r))}if(n instanceof je)return $s(t,n._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cl(n)}.`)}function qy(t,e){if(!Array.isArray(t)||t.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Db(t,e){const n=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class zp{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return os(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[eo].arrayValue?.values?.map((r=>Ke(r.doubleValue)));return new Hn(n)}convertGeoPoint(e){return new bn(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=pl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ma(e));default:return null}}convertTimestamp(e){const n=fr(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);oe(wI(r),9688,{name:e});const s=new Jr(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||tt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ZO extends zp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,n)}}class Vs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let gn=class Nb extends Ha{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ea(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Nb._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};gn._jsonSchemaVersion="firestore/documentSnapshot/1.0",gn._jsonSchema={type:ot("string",gn._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};let Ea=class extends gn{data(e={}){return super.data(e)}},An=class kb{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Vs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Ea(this._firestore,this._userDataWriter,r.key,r,new Vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const c=new Ea(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Vs(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const c=new Ea(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Vs(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:eM(a.type),doc:c,oldIndex:l,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=kb._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function eM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}function Ob(t,e){return t instanceof gn&&e instanceof gn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof An&&e instanceof An&&t._firestore===e._firestore&&Eb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){t=Se(t,je);const e=Se(t.firestore,rt);return fb(Lt(e),t._key).then((n=>Wp(e,t,n)))}An._jsonSchemaVersion="firestore/querySnapshot/1.0",An._jsonSchema={type:ot("string",An._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};class si extends zp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,n)}}function nM(t){t=Se(t,je);const e=Se(t.firestore,rt),n=Lt(e),r=new si(e);return IO(n,t._key).then((s=>new gn(e,r,t._key,s,new Vs(s!==null&&s.hasLocalMutations,!0),t.converter)))}function rM(t){t=Se(t,je);const e=Se(t.firestore,rt);return fb(Lt(e),t._key,{source:"server"}).then((n=>Wp(e,t,n)))}function sM(t){t=Se(t,Gt);const e=Se(t.firestore,rt),n=Lt(e),r=new si(e);return xb(t._query),db(n,t._query).then((s=>new An(e,r,t,s)))}function iM(t){t=Se(t,Gt);const e=Se(t.firestore,rt),n=Lt(e),r=new si(e);return bO(n,t._query).then((s=>new An(e,r,t,s)))}function oM(t){t=Se(t,Gt);const e=Se(t.firestore,rt),n=Lt(e),r=new si(e);return db(n,t._query,{source:"server"}).then((s=>new An(e,r,t,s)))}function Hy(t,e,n){t=Se(t,je);const r=Se(t.firestore,rt),s=Dl(t.converter,e,n);return dc(r,[Rl(ni(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,We.none())])}function Gy(t,e,n,...r){t=Se(t,je);const s=Se(t.firestore,rt),i=ni(s);let o;return o=typeof(e=at(e))=="string"||e instanceof ns?jp(i,"updateDoc",t._key,e,n,r):Up(i,"updateDoc",t._key,e),dc(s,[o.toMutation(t._key,We.exists(!0))])}function aM(t){return dc(Se(t.firestore,rt),[new wo(t._key,We.none())])}function cM(t,e){const n=Se(t.firestore,rt),r=qu(t),s=Dl(t.converter,e);return dc(n,[Rl(ni(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,We.exists(!1))]).then((()=>r))}function Mb(t,...e){t=at(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||qf(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(qf(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let i,o,a;if(t instanceof je)o=Se(t.firestore,rt),a=vo(t._key.path),i={next:c=>{e[r]&&e[r](Wp(o,t,c))},error:e[r+1],complete:e[r+2]};else{const c=Se(t,Gt);o=Se(c.firestore,rt),a=c._query;const l=new si(o);i={next:h=>{e[r]&&e[r](new An(o,l,c,h))},error:e[r+1],complete:e[r+2]},xb(t._query)}return(function(l,h,f,p){const m=new Il(p),y=new Sp(h,m,f);return l.asyncQueue.enqueueAndForget((async()=>bp(await ho(l),y))),()=>{m.Nu(),l.asyncQueue.enqueueAndForget((async()=>Ap(await ho(l),y)))}})(Lt(o),a,s,i)}function uM(t,e){return AO(Lt(t=Se(t,rt)),qf(e)?e:{next:e})}function dc(t,e){return(function(r,s){const i=new Rt;return r.asyncQueue.enqueueAndForget((async()=>Xk(await Op(r),s,i))),i.promise})(Lt(t),e)}function Wp(t,e,n){const r=n.docs.get(e._key),s=new si(t);return new gn(t,s,e._key,r,new Vs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hM=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ni(e)}set(e,n,r){this._verifyNotCommitted();const s=Fr(e,this._firestore),i=Dl(s.converter,n,r),o=Rl(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,We.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Fr(e,this._firestore);let o;return o=typeof(n=at(n))=="string"||n instanceof ns?jp(this._dataReader,"WriteBatch.update",i._key,n,r,s):Up(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,We.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fr(e,this._firestore);return this._mutations=this._mutations.concat(new wo(n._key,We.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Fr(t,e){if((t=at(t)).firestore!==e)throw new q(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ni(e)}get(e){const n=Fr(e,this._firestore),r=new ZO(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return ne(24041);const i=s[0];if(i.isFoundDocument())return new Ha(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Ha(this._firestore,r,n._key,null,n.converter);throw ne(18433,{doc:i})}))}set(e,n,r){const s=Fr(e,this._firestore),i=Dl(s.converter,n,r),o=Rl(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=Fr(e,this._firestore);let o;return o=typeof(n=at(n))=="string"||n instanceof ns?jp(this._dataReader,"Transaction.update",i._key,n,r,s):Up(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=Fr(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dM=class extends fM{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Fr(e,this._firestore),r=new si(this._firestore);return super.get(e).then((s=>new gn(this._firestore,r,n._key,s._document,new Vs(!1,!1),n.converter)))}};function pM(t,e,n){t=Se(t,rt);const r={...lM,...n};return(function(i){if(i.maxAttempts<1)throw new q(F.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(i,o,a){const c=new Rt;return i.asyncQueue.enqueueAndForget((async()=>{const l=await EO(i);new yO(i.asyncQueue,l,a,o,c).ju()})),c.promise})(Lt(t),(s=>e(new dM(t,s))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(){return new hc("deleteField")}function gM(){return new Mp("serverTimestamp")}function _M(...t){return new Lp("arrayUnion",t)}function yM(...t){return new Fp("arrayRemove",t)}function vM(t){return new Bp("increment",t)}(function(e,n=!0){(function(s){yo=s})(Bd),zi(new js("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new rt(new fD(r.getProvider("auth-internal")),new mD(o,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jr(l.options.projectId,h)})(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),or(w_,T_,e),or(w_,T_,"esm2020")})();const EM="@firebase/firestore-compat",wM="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new q("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(){if(typeof Uint8Array>"u")throw new q("unimplemented","Uint8Arrays are not available in this environment.")}function zy(){if(!JD())throw new q("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ga{constructor(e){this._delegate=e}static fromBase64String(e){return zy(),new Ga(Nt.fromBase64String(e))}static fromUint8Array(e){return Ky(),new Ga(Nt.fromUint8Array(e))}toBase64(){return zy(),this._delegate.toBase64()}toUint8Array(){return Ky(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){return TM(t,["next","error","complete"])}function TM(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{enableIndexedDbPersistence(e,n){return DO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return NO(e._delegate)}clearIndexedDbPersistence(e){return kO(e._delegate)}}class Lb{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Gn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){PO(this._delegate,e,n,r)}enableNetwork(){return MO(this._delegate)}disableNetwork(){return LO(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cT("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return OO(this._delegate)}onSnapshotsInSync(e){return uM(this._delegate,e)}get app(){if(!this._appCompat)throw new q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fo(this,yb(this._delegate,e))}catch(n){throw $t(n,"collection()","Firestore.collection()")}}doc(e){try{return new dn(this,qu(this._delegate,e))}catch(n){throw $t(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new jt(this,CO(this._delegate,e))}catch(n){throw $t(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return pM(this._delegate,n=>e(new Fb(this,n)))}batch(){return Lt(this._delegate),new Bb(new hM(this._delegate,e=>dc(this._delegate,e)))}loadBundle(e){return FO(this._delegate,e)}namedQuery(e){return BO(this._delegate,e).then(n=>n?new jt(this,n):null)}}class Nl extends zp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ga(new Nt(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return dn.forKey(n,this.firestore,null)}}function bM(t){cD(t)}class Fb{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Nl(e)}get(e){const n=Ds(e);return this._delegate.get(n).then(r=>new Ka(this._firestore,new gn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=Ds(e);return r?(Qp("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Ds(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Ds(e);return this._delegate.delete(n),this}}class Bb{constructor(e){this._delegate=e}set(e,n,r){const s=Ds(e);return r?(Qp("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Ds(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Ds(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Js{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Ea(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new za(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Js.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new Js(e,new Nl(e),n),s.set(n,i)),i}}Js.INSTANCES=new WeakMap;class dn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Nl(e)}static forPath(e,n,r){if(e.length%2!==0)throw new q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new dn(n,new je(n._delegate,r,new Y(e)))}static forKey(e,n,r){return new dn(n,new je(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new fo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fo(this.firestore,yb(this._delegate,e))}catch(n){throw $t(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=at(e),e instanceof je?vb(this._delegate,e):!1}set(e,n){n=Qp("DocumentReference.set",n);try{return n?Hy(this._delegate,e,n):Hy(this._delegate,e)}catch(r){throw $t(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Gy(this._delegate,e):Gy(this._delegate,e,n,...r)}catch(s){throw $t(s,"updateDoc()","DocumentReference.update()")}}delete(){return aM(this._delegate)}onSnapshot(...e){const n=Ub(e),r=jb(e,s=>new Ka(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return Mb(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=nM(this._delegate):e?.source==="server"?n=rM(this._delegate):n=tM(this._delegate),n.then(r=>new Ka(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new dn(this.firestore,e?this._delegate.withConverter(Js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function $t(t,e,n){return t.message=t.message.replace(e,n),t}function Ub(t){for(const e of t)if(typeof e=="object"&&!Gf(e))return e;return{}}function jb(t,e){let n;return Gf(t[0])?n=t[0]:Gf(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:r=>{n.next&&n.next(e(r))},error:n.error?.bind(n),complete:n.complete?.bind(n)}}class Ka{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new dn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Ob(this._delegate,e._delegate)}}class za extends Ka{data(e){const n=this._delegate.data(e);return this._delegate._converter||uD(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class jt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Nl(e)}where(e,n,r){try{return new jt(this.firestore,Vr(this._delegate,GO(e,n,r)))}catch(s){throw $t(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new jt(this.firestore,Vr(this._delegate,KO(e,n)))}catch(r){throw $t(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new jt(this.firestore,Vr(this._delegate,zO(e)))}catch(n){throw $t(n,"limit()","Query.limit()")}}limitToLast(e){try{return new jt(this.firestore,Vr(this._delegate,WO(e)))}catch(n){throw $t(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new jt(this.firestore,Vr(this._delegate,QO(...e)))}catch(n){throw $t(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new jt(this.firestore,Vr(this._delegate,JO(...e)))}catch(n){throw $t(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new jt(this.firestore,Vr(this._delegate,YO(...e)))}catch(n){throw $t(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new jt(this.firestore,Vr(this._delegate,XO(...e)))}catch(n){throw $t(n,"endAt()","Query.endAt()")}}isEqual(e){return Eb(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=iM(this._delegate):e?.source==="server"?n=oM(this._delegate):n=sM(this._delegate),n.then(r=>new Kf(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=Ub(e),r=jb(e,s=>new Kf(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return Mb(this._delegate,n,r)}withConverter(e){return new jt(this.firestore,e?this._delegate.withConverter(Js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class AM{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new za(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kf{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new jt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new za(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new AM(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new za(this._firestore,r))})}isEqual(e){return Ob(this._delegate,e._delegate)}}class fo extends jt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new dn(this.firestore,e):null}doc(e){try{return e===void 0?new dn(this.firestore,qu(this._delegate)):new dn(this.firestore,qu(this._delegate,e))}catch(n){throw $t(n,"doc()","CollectionReference.doc()")}}add(e){return cM(this._delegate,e).then(n=>new dn(this.firestore,n))}isEqual(e){return vb(this._delegate,e._delegate)}withConverter(e){return new fo(this.firestore,e?this._delegate.withConverter(Js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ds(t){return Se(t,je)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(...e){this._delegate=new ns(...e)}static documentId(){return new Jp(ze.keyField().canonicalString())}isEqual(e){return e=at(e),e instanceof ns?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{static serverTimestamp(){const e=gM();return e._methodName="FieldValue.serverTimestamp",new Ps(e)}static delete(){const e=mM();return e._methodName="FieldValue.delete",new Ps(e)}static arrayUnion(...e){const n=_M(...e);return n._methodName="FieldValue.arrayUnion",new Ps(n)}static arrayRemove(...e){const n=yM(...e);return n._methodName="FieldValue.arrayRemove",new Ps(n)}static increment(e){const n=vM(e);return n._methodName="FieldValue.increment",new Ps(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM={Firestore:Lb,GeoPoint:bn,Timestamp:De,Blob:Ga,Transaction:Fb,WriteBatch:Bb,DocumentReference:dn,DocumentSnapshot:Ka,Query:jt,QueryDocumentSnapshot:za,QuerySnapshot:Kf,CollectionReference:fo,FieldPath:Jp,FieldValue:Ps,setLogLevel:bM,CACHE_SIZE_UNLIMITED:VO};function SM(t,e){t.INTERNAL.registerComponent(new js("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps({...RM}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t){SM(t,(e,n)=>new Lb(e,n,new IM)),t.registerVersion(EM,wM)}PM(xa);xa.apps.length===0&&xa.initializeApp({apiKey:"AIzaSyBiI-MHTxhqNpgJ6FMJaVTN3lcBMmL9cqU",authDomain:"tsg-slackbot.firebaseapp.com",projectId:"tsg-slackbot",storageBucket:"tsg-slackbot.appspot.com",messagingSenderId:"382537830947",appId:"1:382537830947:web:41aa27c8a7261f0fe61796",measurementId:"G-NZD98Q80NG"});const CM=xa.apps[0],Wn=CM.firestore(),Yo=Wn.collection("achievements"),xM=()=>({isInitList:null,list:[],isInitLatestAchievemnts:null,latestAchievements:[],isInitUsers:{},isInitNames:{},isInitData:{}}),VM={initList(t){t.isInitList=!0},initLatestAchievements(t){t.isInitLatestAchievemnts=!0},initData(t,e){t.isInitData[e]=!0},setUser(t,{id:e,achievements:n}){t.isInitUsers[e]=!0,t[`user_${e}`]=n},setName(t,{name:e,achievements:n}){t.isInitNames[e]=!0,t[`name_${e}`]=n}},DM={list:t=>t.list,initLatestAchievements:t=>t.latestAchievements,data:t=>t.data,getByUser:t=>(e=>t.isInitList?t.list.filter(n=>n.user===e):t[`user_${e}`]||[]),getByName:t=>(e=>t.isInitList?t.list.filter(n=>n.name===e):t[`name_${e}`]||[])},NM={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:mn(async({bindFirestoreRef:t})=>{await t("list",Yo)}),async initLatestAchievements({state:t,dispatch:e,commit:n}){t.isInitLatestAchievemnts||(await e("bindLatestAchievements"),n("initLatestAchievements"))},bindLatestAchievements:mn(async({bindFirestoreRef:t})=>{await t("latestAchievements",Yo.orderBy("date","desc").limit(15))}),bind:mn(async({bindFirestoreRef:t,state:e,commit:n},r)=>{if(e.isInitData[r]===!0||e.isInitList===!0)return;const s=Yo.doc(r);await t(`data_${r}`,s),n("initData",r)}),fetchByUser:async({state:t,commit:e},n)=>{if(t.isInitUsers[n]===!0||t.isInitList===!0)return;const r=await Yo.where("user","==",n).get();e({type:"setUser",id:n,achievements:r.docs.map(s=>s.data())})},fetchByName:async({state:t,commit:e},n)=>{if(t.isInitNames[n]===!0||t.isInitList===!0)return;const r=await Yo.where("name","==",n).get();e({type:"setName",name:n,achievements:r.docs.map(s=>s.data())})}},kM=Object.freeze(Object.defineProperty({__proto__:null,actions:NM,getters:DM,mutations:VM,state:xM},Symbol.toStringTag,{value:"Module"})),OM=Wn.collection("achievement_data"),MM=()=>({isInitList:null,list:[]}),LM={initList(t){t.isInitList=!0}},FM={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n}),getByCounter:t=>(e=>t.list.filter(n=>n.counter===e).sort((n,r)=>n.value-r.value)),getByCategory:t=>(e=>t.list.filter(n=>n.category===e).sort((n,r)=>(r.count||0)-(n.count||0)))},BM={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:mn(async({bindFirestoreRef:t})=>{await t("list",OM)})},UM=Object.freeze(Object.defineProperty({__proto__:null,actions:BM,getters:FM,mutations:LM,state:MM},Symbol.toStringTag,{value:"Module"})),jM=Wn.collection("achievement_stats_by_category"),$M=()=>({isInitList:null,list:[]}),qM={initList(t){t.isInitList=!0}},HM={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},GM={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:mn(async({bindFirestoreRef:t})=>{await t("list",jM)})},KM=Object.freeze(Object.defineProperty({__proto__:null,actions:GM,getters:HM,mutations:qM,state:$M},Symbol.toStringTag,{value:"Module"})),zM=Wn.collection("achievement_stats_by_difficulty"),WM=()=>({isInitList:null,list:[]}),QM={initList(t){t.isInitList=!0}},JM={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},YM={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:mn(async({bindFirestoreRef:t})=>{await t("list",zM)})},XM=Object.freeze(Object.defineProperty({__proto__:null,actions:YM,getters:JM,mutations:QM,state:WM},Symbol.toStringTag,{value:"Module"})),ZM=Wn.collection("achievement_stats_by_month"),eL=()=>({isInitList:null,list:[]}),tL={initList(t){t.isInitList=!0}},nL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},rL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:mn(async({bindFirestoreRef:t})=>{await t("list",ZM)})},sL=Object.freeze(Object.defineProperty({__proto__:null,actions:rL,getters:nL,mutations:tL,state:eL},Symbol.toStringTag,{value:"Module"})),iL=Wn.collection("slow_quiz_games"),oL=()=>({isInitList:null,list:[]}),aL={initList(t){t.isInitList=!0}},cL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},uL={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:mn(async({bindFirestoreRef:t,commit:e})=>{await t("list",iL.where("status","==","finished").orderBy("finishDate","desc")),e("initList")})},lL=Object.freeze(Object.defineProperty({__proto__:null,actions:uL,getters:cL,mutations:aL,state:oL},Symbol.toStringTag,{value:"Module"})),Wy=Wn.collection("users");Wn.collection("achievements");const hL=()=>({isInitList:null,list:[],isInitData:{},data:{}}),fL={initList(t){t.isInitList=!0},initData(t,e){t.isInitData[e]=!0}},dL={list:t=>t.list,data:t=>t.data,getById:t=>(e=>{if(t[`data_${e}`]!==void 0)return t[`data_${e}`];const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},pL={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:mn(async({bindFirestoreRef:t,commit:e})=>{await t("list",Wy),e("initList")}),bindById:mn(async({bindFirestoreRef:t,state:e,dispatch:n,getters:r,commit:s},i)=>{const o=r.getById(i);if(o!==void 0&&e.isInitData[o.id]===!0)return;const a=await Wy.doc(i).get();if(a.exists){const c=t(`data_${a.id}`,a.ref);s("initData",a.id),await Promise.all([c,n("achievements/fetchByUser",a.id,{root:!0})])}})},mL=Object.freeze(Object.defineProperty({__proto__:null,actions:pL,getters:dL,mutations:fL,state:hL},Symbol.toStringTag,{value:"Module"})),gL=Wn.collection("oneiromancy_messages"),_L=Wn.collection("oneiromancy_criteria"),yL=()=>({isInitOneiromancyMessages:null,oneiromancyMessages:[],isInitOneiromancyCriteria:null,oneiromancyCriteria:[]}),vL={initOneiromancyMessages(t){t.isInitOneiromancyMessages=!0},initOneiromancyCriteria(t){t.isInitOneiromancyCriteria=!0}},EL={oneiromancyMessages:t=>t.oneiromancyMessages,oneiromancyCriteria:t=>t.oneiromancyCriteria},wL={async initOneiromancyMessages({state:t,dispatch:e,commit:n}){t.isInitOneiromancyMessages!==!0&&(await e("bindOneiromancyMessages"),n("initOneiromancyMessages"))},bindOneiromancyMessages:mn(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyMessages",gL.orderBy("message.ts","desc")),e("initOneiromancyMessages")}),async initOneiromancyCriteria({state:t,dispatch:e,commit:n}){t.isInitOneiromancyCriteria!==!0&&(await e("bindOneiromancyCriteria"),n("initOneiromancyCriteria"))},bindOneiromancyCriteria:mn(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyCriteria",_L.orderBy("point","desc")),e("initOneiromancyCriteria")})},TL=Object.freeze(Object.defineProperty({__proto__:null,actions:wL,getters:EL,mutations:vL,state:yL},Symbol.toStringTag,{value:"Module"})),IL=()=>({isUnauthorized:!1,isInitUsers:!1,isInitTopicMessages:!1,users:[],userMap:new Map,topicMessages:[],topicMessagesMap:new Map}),bL={setUsers(t,e){t.isInitUsers=!0,t.users=e,t.userMap=new Map(e.map(n=>[n.id,n]))},setTopicMessages(t,e){t.isInitTopicMessages=!0,t.topicMessages=e.map(n=>({...n,randomSortKey:Math.random()})),t.topicMessagesMap=new Map(t.topicMessages.map(n=>[n.message.ts,n]))},addTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!0,n.likes=n.likes.concat([null]))},removeTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!1,n.likes=n.likes.slice(1))},isUnauthorized(t){t.isUnauthorized=!0}},AL={users:t=>t.users,getUser:t=>(e=>{const n=t.userMap.get(e);return n===void 0?{id:e}:n}),topicMessages:t=>t.topicMessages,getTopicMessage:t=>(e=>{const n=t.topicMessagesMap.get(e);return n===void 0?{ts:e}:n})},RL={async initUsers({state:t,commit:e}){if(!t.isInitUsers)try{const n=await fetch("https://slackbot-api.tsg.ne.jp/slack/users",{credentials:"include"});if(!n.ok){if(n.status===401){e("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();e("setUsers",r)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))e("isUnauthorized");else throw n}},async initTopicMessages({state:t,commit:e}){if(!t.isInitTopicMessages)try{const n=await fetch("https://slackbot-api.tsg.ne.jp/topic/topics",{credentials:"include"});if(!n.ok){if(n.status===401){e("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();e("setTopicMessages",r)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))e("isUnauthorized");else throw n}},async likeTopicMessage({commit:t},{ts:e}){try{const n=await fetch(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,{method:"PUT",body:"",credentials:"include",headers:{"Content-Type":"text/plain"}});if(!n.ok){if(n.status===401){t("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}t("addTopicMessageLike",e)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))t("isUnauthorized");else throw n}},async unlikeTopicMessage({commit:t},{ts:e}){try{const n=await fetch(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,{method:"DELETE",credentials:"include"});if(!n.ok){if(n.status===401){t("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}t("removeTopicMessageLike",e)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))t("isUnauthorized");else throw n}}},SL=Object.freeze(Object.defineProperty({__proto__:null,actions:RL,getters:AL,mutations:bL,state:IL},Symbol.toStringTag,{value:"Module"})),PL=zn(t=>{const e=ix({mutations:{...gx},modules:{achievements:{namespaced:!0,...kM},achievementData:{namespaced:!0,...UM},achievementStatsByCategory:{namespaced:!0,...KM},achievementStatsByDifficulty:{namespaced:!0,...XM},achievementStatsByMonth:{namespaced:!0,...sL},slowQuizGames:{namespaced:!0,...lL},users:{namespaced:!0,...mL},oneiromancies:{namespaced:!0,...TL},slackInfos:{namespaced:!0,...SL}}});return t.vueApp.use(e),{provide:{store:e}}}),CL=[YP,nC,N1,k1,O1,M1,F1,B1,$1,PL],$b=(t="RouteProvider")=>rs({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,r=e.route,s={};for(const i in e.route)Object.defineProperty(s,i,{get:()=>n===e.renderKey?e.route[i]:r[i],enumerable:!0});return jr(Us,Fn(s)),()=>e.vnode?kt(e.vnode,{ref:e.vnodeRef}):e.vnode}}),xL=$b(),Qy=new WeakMap,VL=rs({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:r}){const s=dt(),i=ir(),o=Ot(Us,null);let a;r({pageRef:i});const c=Ot(qE,null);let l;const h=s.deferHydration();if(s.isHydrating){const p=s.hooks.hookOnce("app:error",h);cn().beforeEach(p)}t.pageKey&&$r(()=>t.pageKey,(p,m)=>{p!==m&&s.callHook("page:loading:start")});let f=!1;{const p=cn().beforeResolve(()=>{f=!1});Ya(()=>{p()})}return()=>kt(hw,{name:t.name,route:t.route,...e},{default:p=>{const m=NL(o,p.route,p.Component),y=o&&o.matched.length===p.route.matched.length;if(!p.Component){if(l&&!y)return l;h();return}if(l&&c&&!c.isCurrent(p.route))return l;if(m&&o&&(!c||c?.isCurrent(o)))return y?l:null;const E=cf(p,t.pageKey),C=kL(o,p.route,p.Component);!s.isHydrating&&a===E&&!C&&Fi(()=>{f=!0,s.callHook("page:loading:end")}),a=E;const N=!!(t.transition??p.route.meta.pageTransition??Rg),D=N&&DL([t.transition,p.route.meta.pageTransition,Rg,{onAfterLeave(){delete s._runningTransition,s.callHook("page:transition:finish",p.Component)}}]),v=t.keepalive??p.route.meta.keepalive??Q0;return l=dw(N&&D,E1(v,kt(fd,{suspensible:!0,onPending:()=>{N&&(s._runningTransition=!0),s.callHook("page:start",p.Component)},onResolve:()=>{Fi(()=>s.callHook("page:finish",p.Component).then(()=>{if(delete s._runningTransition,!f&&!C)return f=!0,s.callHook("page:loading:end")}).finally(h))}},{default:()=>{const x={key:E||void 0,vnode:n.default?OL(n.default,p):p.Component,route:p.route,renderKey:E||void 0,trackRootNodes:N,vnodeRef:i};if(!v)return kt(xL,x);const k=p.Component.type,U=k;let b=Qy.get(U);return b||(b=$b(k.name||k.__name),Qy.set(U,b)),kt(b,x)}}))).default(),l}})}});function DL(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?Id(n.onAfterLeave):void 0});return jE(...e)}function NL(t,e,n){if(!t)return!1;const r=e.matched.findIndex(s=>s.components?.default===n?.type);return!r||r===-1?!1:e.matched.slice(0,r).some((s,i)=>s.components?.default!==t.matched[i]?.components?.default)||n&&cf({route:e,Component:n})!==cf({route:t,Component:n})}function kL(t,e,n){return t?e.matched.findIndex(s=>s.components?.default===n?.type)<e.matched.length-1:!1}function OL(t,e){const n=t(e);return n.length===1?kt(n[0]):kt(Dt,void 0,n)}const ML=rs({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>kt(Mr[t.name],t.layoutProps,e.slots)}}),LL={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},FL=rs({name:"NuxtLayout",inheritAttrs:!1,props:LL,setup(t,e){const n=dt(),r=Ot(Us),i=!r||r===nl()?fw():r,o=on(()=>{let h=He(t.name)??i?.meta.layout??"default";return h&&!(h in Mr)&&t.fallback&&(h=He(t.fallback)),h}),a=Li();e.expose({layoutRef:a});const c=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",c);cn().beforeEach(h)}let l;return()=>{const h=o.value&&o.value in Mr,f=i?.meta.layoutTransition??W0,p=l;return l=o.value,dw(h&&f,{default:()=>kt(fd,{suspensible:!0,onResolve:()=>{Fi(c)}},{default:()=>kt(BL,{layoutProps:yE(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:m=>m!==p&&m===o.value,hasTransition:!!f},e.slots)})}).default()}}}),BL=rs({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&jr(qE,{isCurrent:i=>n===(i.meta.layout??"default")});const r=Ot(Us);if(r&&r===nl()){const i=fw(),o={};for(const a in i){const c=a;Object.defineProperty(o,c,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[c]:r[c]})}jr(Us,Fn(o))}return()=>!n||typeof n=="string"&&!(n in Mr)?e.slots.default?.():kt(ML,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),UL=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},jL={};function $L(t,e){const n=VL,r=FL;return fn(),Ln(r,null,{default:id(()=>[Xe(n)]),_:1})}const qL=UL(jL,[["render",$L]]),HL={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error;n.stack&&n.stack.split(`
`).splice(1).map(f=>({text:f.replace("webpack:/","").replace(".vue",".js").trim(),internal:f.includes("node_modules")&&!f.includes(".cache")||f.includes("internal")||f.includes("new Promise")})).map(f=>`<span class="stack${f.internal?" internal":""}">${f.text}</span>`).join(`
`);const r=Number(n.statusCode||500),s=r===404,i=n.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=s?Bh(()=>En(()=>import("./DPcFB33X.js"),__vite__mapDeps([24,3,25,26]),import.meta.url)):Bh(()=>En(()=>import("./B49BFVwi.js"),__vite__mapDeps([27,25,28]),import.meta.url));return(f,p)=>(fn(),Ln(He(h),wA(gE({statusCode:He(r),statusMessage:He(i),description:He(o),stack:He(a)})),null,16))}},GL={key:0},Jy={__name:"nuxt-root",setup(t){const e=()=>null,n=dt(),r=n.deferHydration();if(n.isHydrating){const l=n.hooks.hookOnce("app:error",r);cn().beforeEach(l)}const s=!1;jr(Us,nl()),n.hooks.callHookWith(l=>l.map(h=>h()),"vue:setup");const i=rl(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;$v((l,h,f)=>{if(n.hooks.callHook("vue:error",l,h,f).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",l),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,l),!1;if(GE(l)&&(l.fatal||l.unhandled))return n.runWithContext(()=>Es(l)),!1});const c=!1;return(l,h)=>(fn(),Ln(fd,{onResolve:He(r)},{default:id(()=>[He(o)?(fn(),rS("div",GL)):He(i)?(fn(),Ln(He(HL),{key:1,error:He(i)},null,8,["error"])):He(c)?(fn(),Ln(He(e),{key:2,context:He(c)},null,8,["context"])):He(s)?(fn(),Ln(TR(He(s)),{key:3})):(fn(),Ln(He(qL),{key:4}))]),_:1},8,["onResolve"]))}};let Yy;{let t;Yy=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),r=n?qS(Jy):$S(Jy),s=Z0({vueApp:r});async function i(o){await s.callHook("app:error",o),s.payload.error||=Ls(o)}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)}),!n&&Sg.id&&s.hook("app:suspense:resolve",()=>{document.getElementById(Sg.id)?.remove()});try{await nP(s,CL)}catch(o){i(o)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(J0),await s.hooks.callHook("app:mounted",r),await Fi()}catch(o){i(o)}return r},t=Yy().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{_u as $,n2 as A,JL as B,WL as C,s2 as D,KL as E,Dt as F,YL as G,Wu as H,Qu as I,QL as J,cn as K,bd as L,s_ as M,Ya as N,t2 as O,Us as P,SE as Q,fP as R,j1 as S,on as T,ZL as U,Xs as V,md as W,tl as X,XL as Y,m0 as Z,UL as _,mE as a,Xe as b,rS as c,_E as d,dt as e,WE as f,rs as g,cd as h,Ot as i,kt as j,ad as k,jv as l,$r as m,Re as n,fn as o,rd as p,Fi as q,ir as r,Li as s,AA as t,e2 as u,dS as v,id as w,zL as x,Ln as y,r2 as z};
