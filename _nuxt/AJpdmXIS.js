const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CV2-DcST.js","./CtQY4JZM.js","./Cpj98o6Y.js","./BOvo9ddz.js","./B6xC4vfj.js","./index.4iF0p84D.css","./9nSlKCSx.js","./DfAzwDaU.js","./BiJ5rIx7.js","./CdjJNdvM.js","./topic.UPFfNaHU.css","./CkXLRlMQ.js","./index.BZVQuXzV.css","./CEV5s_as.js","./BZaXuJMz.js","./slow-quiz.XCwighz9.css","./CaiXWy7a.js","./BQkWp8CJ.js","./AchievementCard.DIPBvmTw.css","./BlqwHA0J.js","./oneiromancy.D5JIcBwv.css","./Bco-kj8g.js","./pG6XZ40_.js","./index.B09IHu_1.css","./rt3IB7wh.js","./twenty-questions._MGYqerZ.css","./D_YvIPFV.js","./default.5rRBYkF3.css","./Ca0qzue1.js","./DVRhVAKB.js","./error-404.BLrjNXsr.css","./BXhcHNt4.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Zf(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Be={},xi=[],$n=()=>{},iv=()=>!1,ec=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ed=t=>t.startsWith("onUpdate:"),vt=Object.assign,td=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},wA=Object.prototype.hasOwnProperty,De=(t,e)=>wA.call(t,e),le=Array.isArray,Vi=t=>wo(t)==="[object Map]",Ju=t=>wo(t)==="[object Set]",qm=t=>wo(t)==="[object Date]",EA=t=>wo(t)==="[object RegExp]",de=t=>typeof t=="function",Qe=t=>typeof t=="string",An=t=>typeof t=="symbol",Me=t=>t!==null&&typeof t=="object",ov=t=>(Me(t)||de(t))&&de(t.then)&&de(t.catch),av=Object.prototype.toString,wo=t=>av.call(t),TA=t=>wo(t).slice(8,-1),cv=t=>wo(t)==="[object Object]",Yu=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Di=Zf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xu=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},IA=/-\w/g,_n=Xu(t=>t.replace(IA,e=>e.slice(1).toUpperCase())),bA=/\B([A-Z])/g,ei=Xu(t=>t.replace(bA,"-$1").toLowerCase()),Zu=Xu(t=>t.charAt(0).toUpperCase()+t.slice(1)),nh=Xu(t=>t?`on${Zu(t)}`:""),qr=(t,e)=>!Object.is(t,e),Ni=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},uv=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},nd=t=>{const e=parseFloat(t);return isNaN(e)?t:e},lv=t=>{const e=Qe(t)?Number(t):NaN;return isNaN(e)?t:e};let Hm;const el=()=>Hm||(Hm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function tl(t){if(le(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Qe(r)?PA(r):tl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Qe(t)||Me(t))return t}const AA=/;(?![^(]*\))/g,RA=/:([^]+)/,SA=/\/\*[^]*?\*\//g;function PA(t){const e={};return t.replace(SA,"").split(AA).forEach(n=>{if(n){const r=n.split(RA);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function nl(t){let e="";if(Qe(t))e=t;else if(le(t))for(let n=0;n<t.length;n++){const r=nl(t[n]);r&&(e+=r+" ")}else if(Me(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function CA(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Qe(e)&&(t.class=nl(e)),n&&(t.style=tl(n)),t}const xA="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",VA=Zf(xA);function hv(t){return!!t||t===""}function DA(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ui(t[r],e[r]);return n}function Ui(t,e){if(t===e)return!0;let n=qm(t),r=qm(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=An(t),r=An(e),n||r)return t===e;if(n=le(t),r=le(e),n||r)return n&&r?DA(t,e):!1;if(n=Me(t),r=Me(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Ui(t[o],e[o]))return!1}}return String(t)===String(e)}function fv(t,e){return t.findIndex(n=>Ui(n,e))}const dv=t=>!!(t&&t.__v_isRef===!0),NA=t=>Qe(t)?t:t==null?"":le(t)||Me(t)&&(t.toString===av||!de(t.toString))?dv(t)?NA(t.value):JSON.stringify(t,pv,2):String(t),pv=(t,e)=>dv(e)?pv(t,e.value):Vi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[rh(r,i)+" =>"]=s,n),{})}:Ju(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>rh(n))}:An(e)?rh(e):Me(e)&&!le(e)&&!cv(e)?String(e):e,rh=(t,e="")=>{var n;return An(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Kt;class mv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Kt,!e&&Kt&&(this.index=(Kt.scopes||(Kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Kt;try{return Kt=this,e()}finally{Kt=n}}}on(){++this._on===1&&(this.prevScope=Kt,Kt=this)}off(){this._on>0&&--this._on===0&&(Kt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function gv(t){return new mv(t)}function _v(){return Kt}let Ue;const sh=new WeakSet;class yv{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Kt&&Kt.active&&Kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,sh.has(this)&&(sh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||wv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Gm(this),Ev(this);const e=Ue,n=Tn;Ue=this,Tn=!0;try{return this.fn()}finally{Tv(this),Ue=e,Tn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)id(e);this.deps=this.depsTail=void 0,Gm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?sh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Bh(this)&&this.run()}get dirty(){return Bh(this)}}let vv=0,ha,fa;function wv(t,e=!1){if(t.flags|=8,e){t.next=fa,fa=t;return}t.next=ha,ha=t}function rd(){vv++}function sd(){if(--vv>0)return;if(fa){let e=fa;for(fa=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ha;){let e=ha;for(ha=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Ev(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Tv(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),id(r),kA(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Bh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Iv(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Iv(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Sa)||(t.globalVersion=Sa,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Bh(t))))return;t.flags|=2;const e=t.dep,n=Ue,r=Tn;Ue=t,Tn=!0;try{Ev(t);const s=t.fn(t._value);(e.version===0||qr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ue=n,Tn=r,Tv(t),t.flags&=-3}}function id(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)id(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function kA(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Tn=!0;const bv=[];function lr(){bv.push(Tn),Tn=!1}function hr(){const t=bv.pop();Tn=t===void 0?!0:t}function Gm(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ue;Ue=void 0;try{e()}finally{Ue=n}}}let Sa=0;class OA{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class od{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ue||!Tn||Ue===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ue)n=this.activeLink=new OA(Ue,this),Ue.deps?(n.prevDep=Ue.depsTail,Ue.depsTail.nextDep=n,Ue.depsTail=n):Ue.deps=Ue.depsTail=n,Av(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ue.depsTail,n.nextDep=void 0,Ue.depsTail.nextDep=n,Ue.depsTail=n,Ue.deps===n&&(Ue.deps=r)}return n}trigger(e){this.version++,Sa++,this.notify(e)}notify(e){rd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{sd()}}}function Av(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Av(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const uu=new WeakMap,Ls=Symbol(""),Uh=Symbol(""),Pa=Symbol("");function Vt(t,e,n){if(Tn&&Ue){let r=uu.get(t);r||uu.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new od),s.map=r,s.key=n),s.track()}}function rr(t,e,n,r,s,i){const o=uu.get(t);if(!o){Sa++;return}const a=c=>{c&&c.trigger()};if(rd(),e==="clear")o.forEach(a);else{const c=le(t),l=c&&Yu(n);if(c&&n==="length"){const h=Number(r);o.forEach((f,p)=>{(p==="length"||p===Pa||!An(p)&&p>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(Pa)),e){case"add":c?l&&a(o.get("length")):(a(o.get(Ls)),Vi(t)&&a(o.get(Uh)));break;case"delete":c||(a(o.get(Ls)),Vi(t)&&a(o.get(Uh)));break;case"set":Vi(t)&&a(o.get(Ls));break}}sd()}function MA(t,e){const n=uu.get(t);return n&&n.get(e)}function fi(t){const e=Re(t);return e===t?e:(Vt(e,"iterate",Pa),on(t)?e:e.map(Rn))}function rl(t){return Vt(t=Re(t),"iterate",Pa),t}function kr(t,e){return Kn(t)?Hr(t)?ji(Rn(e)):ji(e):Rn(e)}const LA={__proto__:null,[Symbol.iterator](){return ih(this,Symbol.iterator,t=>kr(this,t))},concat(...t){return fi(this).concat(...t.map(e=>le(e)?fi(e):e))},entries(){return ih(this,"entries",t=>(t[1]=kr(this,t[1]),t))},every(t,e){return Xn(this,"every",t,e,void 0,arguments)},filter(t,e){return Xn(this,"filter",t,e,n=>n.map(r=>kr(this,r)),arguments)},find(t,e){return Xn(this,"find",t,e,n=>kr(this,n),arguments)},findIndex(t,e){return Xn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Xn(this,"findLast",t,e,n=>kr(this,n),arguments)},findLastIndex(t,e){return Xn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Xn(this,"forEach",t,e,void 0,arguments)},includes(...t){return oh(this,"includes",t)},indexOf(...t){return oh(this,"indexOf",t)},join(t){return fi(this).join(t)},lastIndexOf(...t){return oh(this,"lastIndexOf",t)},map(t,e){return Xn(this,"map",t,e,void 0,arguments)},pop(){return zo(this,"pop")},push(...t){return zo(this,"push",t)},reduce(t,...e){return Km(this,"reduce",t,e)},reduceRight(t,...e){return Km(this,"reduceRight",t,e)},shift(){return zo(this,"shift")},some(t,e){return Xn(this,"some",t,e,void 0,arguments)},splice(...t){return zo(this,"splice",t)},toReversed(){return fi(this).toReversed()},toSorted(t){return fi(this).toSorted(t)},toSpliced(...t){return fi(this).toSpliced(...t)},unshift(...t){return zo(this,"unshift",t)},values(){return ih(this,"values",t=>kr(this,t))}};function ih(t,e,n){const r=rl(t),s=r[e]();return r!==t&&!on(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const FA=Array.prototype;function Xn(t,e,n,r,s,i){const o=rl(t),a=o!==t&&!on(t),c=o[e];if(c!==FA[e]){const f=c.apply(t,i);return a?Rn(f):f}let l=n;o!==t&&(a?l=function(f,p){return n.call(this,kr(t,f),p,t)}:n.length>2&&(l=function(f,p){return n.call(this,f,p,t)}));const h=c.call(o,l,r);return a&&s?s(h):h}function Km(t,e,n,r){const s=rl(t);let i=n;return s!==t&&(on(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,kr(t,a),c,t)}),s[e](i,...r)}function oh(t,e,n){const r=Re(t);Vt(r,"iterate",Pa);const s=r[e](...n);return(s===-1||s===!1)&&sl(n[0])?(n[0]=Re(n[0]),r[e](...n)):s}function zo(t,e,n=[]){lr(),rd();const r=Re(t)[e].apply(t,n);return sd(),hr(),r}const BA=Zf("__proto__,__v_isRef,__isVue"),Rv=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(An));function UA(t){An(t)||(t=String(t));const e=Re(this);return Vt(e,"has",t),e.hasOwnProperty(t)}class Sv{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?JA:Vv:i?xv:Cv).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=le(e);if(!s){let c;if(o&&(c=LA[n]))return c;if(n==="hasOwnProperty")return UA}const a=Reflect.get(e,n,at(e)?e:r);if((An(n)?Rv.has(n):BA(n))||(s||Vt(e,"get",n),i))return a;if(at(a)){const c=o&&Yu(n)?a:a.value;return s&&Me(c)?$h(c):c}return Me(a)?s?$h(a):gr(a):a}}class Pv extends Sv{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=le(e)&&Yu(n);if(!this._isShallow){const l=Kn(i);if(!on(r)&&!Kn(r)&&(i=Re(i),r=Re(r)),!o&&at(i)&&!at(r))return l||(i.value=r),!0}const a=o?Number(n)<e.length:De(e,n),c=Reflect.set(e,n,r,at(e)?e:s);return e===Re(s)&&(a?qr(r,i)&&rr(e,"set",n,r):rr(e,"add",n,r)),c}deleteProperty(e,n){const r=De(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&rr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!An(n)||!Rv.has(n))&&Vt(e,"has",n),r}ownKeys(e){return Vt(e,"iterate",le(e)?"length":Ls),Reflect.ownKeys(e)}}class jA extends Sv{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const $A=new Pv,qA=new jA,HA=new Pv(!0);const jh=t=>t,xc=t=>Reflect.getPrototypeOf(t);function GA(t,e,n){return function(...r){const s=this.__v_raw,i=Re(s),o=Vi(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=s[t](...r),h=n?jh:e?ji:Rn;return!e&&Vt(i,"iterate",c?Uh:Ls),{next(){const{value:f,done:p}=l.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Vc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function KA(t,e){const n={get(s){const i=this.__v_raw,o=Re(i),a=Re(s);t||(qr(s,a)&&Vt(o,"get",s),Vt(o,"get",a));const{has:c}=xc(o),l=e?jh:t?ji:Rn;if(c.call(o,s))return l(i.get(s));if(c.call(o,a))return l(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Vt(Re(s),"iterate",Ls),s.size},has(s){const i=this.__v_raw,o=Re(i),a=Re(s);return t||(qr(s,a)&&Vt(o,"has",s),Vt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Re(a),l=e?jh:t?ji:Rn;return!t&&Vt(c,"iterate",Ls),a.forEach((h,f)=>s.call(i,l(h),l(f),o))}};return vt(n,t?{add:Vc("add"),set:Vc("set"),delete:Vc("delete"),clear:Vc("clear")}:{add(s){!e&&!on(s)&&!Kn(s)&&(s=Re(s));const i=Re(this);return xc(i).has.call(i,s)||(i.add(s),rr(i,"add",s,s)),this},set(s,i){!e&&!on(i)&&!Kn(i)&&(i=Re(i));const o=Re(this),{has:a,get:c}=xc(o);let l=a.call(o,s);l||(s=Re(s),l=a.call(o,s));const h=c.call(o,s);return o.set(s,i),l?qr(i,h)&&rr(o,"set",s,i):rr(o,"add",s,i),this},delete(s){const i=Re(this),{has:o,get:a}=xc(i);let c=o.call(i,s);c||(s=Re(s),c=o.call(i,s)),a&&a.call(i,s);const l=i.delete(s);return c&&rr(i,"delete",s,void 0),l},clear(){const s=Re(this),i=s.size!==0,o=s.clear();return i&&rr(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=GA(s,t,e)}),n}function ad(t,e){const n=KA(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(De(n,s)&&s in r?n:r,s,i)}const zA={get:ad(!1,!1)},WA={get:ad(!1,!0)},QA={get:ad(!0,!1)};const Cv=new WeakMap,xv=new WeakMap,Vv=new WeakMap,JA=new WeakMap;function YA(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function XA(t){return t.__v_skip||!Object.isExtensible(t)?0:YA(TA(t))}function gr(t){return Kn(t)?t:cd(t,!1,$A,zA,Cv)}function Bn(t){return cd(t,!1,HA,WA,xv)}function $h(t){return cd(t,!0,qA,QA,Vv)}function cd(t,e,n,r,s){if(!Me(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=XA(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Hr(t){return Kn(t)?Hr(t.__v_raw):!!(t&&t.__v_isReactive)}function Kn(t){return!!(t&&t.__v_isReadonly)}function on(t){return!!(t&&t.__v_isShallow)}function sl(t){return t?!!t.__v_raw:!1}function Re(t){const e=t&&t.__v_raw;return e?Re(e):t}function ZA(t){return!De(t,"__v_skip")&&Object.isExtensible(t)&&uv(t,"__v_skip",!0),t}const Rn=t=>Me(t)?gr(t):t,ji=t=>Me(t)?$h(t):t;function at(t){return t?t.__v_isRef===!0:!1}function or(t){return Dv(t,!1)}function $i(t){return Dv(t,!0)}function Dv(t,e){return at(t)?t:new eR(t,e)}class eR{constructor(e,n){this.dep=new od,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Re(e),this._value=n?e:Rn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||on(e)||Kn(e);e=r?e:Re(e),qr(e,n)&&(this._rawValue=e,this._value=r?e:Rn(e),this.dep.trigger())}}function je(t){return at(t)?t.value:t}function tR(t){return de(t)?t():je(t)}const nR={get:(t,e,n)=>e==="__v_raw"?t:je(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return at(s)&&!at(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Nv(t){return Hr(t)?t:new Proxy(t,nR)}class rR{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=Re(e);let s=!0,i=e;if(!le(e)||!Yu(String(n)))do s=!sl(i)||on(i);while(s&&(i=i.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=je(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&at(this._raw[this._key])){const n=this._object[this._key];if(at(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return MA(this._raw,this._key)}}class sR{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function iR(t,e,n){return at(t)?t:de(t)?new sR(t):Me(t)&&arguments.length>1?oR(t,e,n):or(t)}function oR(t,e,n){return new rR(t,e,n)}class aR{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new od(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Sa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ue!==this)return wv(this,!0),!0}get value(){const e=this.dep.track();return Iv(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function cR(t,e,n=!1){let r,s;return de(t)?r=t:(r=t.get,s=t.set),new aR(r,s,n)}const Dc={},lu=new WeakMap;let Is;function uR(t,e=!1,n=Is){if(n){let r=lu.get(n);r||lu.set(n,r=[]),r.push(t)}}function lR(t,e,n=Be){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,l=x=>s?x:on(x)||s===!1||s===0?sr(x,1):sr(x);let h,f,p,m,y=!1,w=!1;if(at(t)?(f=()=>t.value,y=on(t)):Hr(t)?(f=()=>l(t),y=!0):le(t)?(w=!0,y=t.some(x=>Hr(x)||on(x)),f=()=>t.map(x=>{if(at(x))return x.value;if(Hr(x))return l(x);if(de(x))return c?c(x,2):x()})):de(t)?e?f=c?()=>c(t,2):t:f=()=>{if(p){lr();try{p()}finally{hr()}}const x=Is;Is=h;try{return c?c(t,3,[m]):t(m)}finally{Is=x}}:f=$n,e&&s){const x=f,k=s===!0?1/0:s;f=()=>sr(x(),k)}const C=_v(),N=()=>{h.stop(),C&&C.active&&td(C.effects,h)};if(i&&e){const x=e;e=(...k)=>{x(...k),N()}}let D=w?new Array(t.length).fill(Dc):Dc;const v=x=>{if(!(!(h.flags&1)||!h.dirty&&!x))if(e){const k=h.run();if(s||y||(w?k.some((U,b)=>qr(U,D[b])):qr(k,D))){p&&p();const U=Is;Is=h;try{const b=[k,D===Dc?void 0:w&&D[0]===Dc?[]:D,m];D=k,c?c(e,3,b):e(...b)}finally{Is=U}}}else h.run()};return a&&a(v),h=new yv(f),h.scheduler=o?()=>o(v,!1):v,m=x=>uR(x,!1,h),p=h.onStop=()=>{const x=lu.get(h);if(x){if(c)c(x,4);else for(const k of x)k();lu.delete(h)}},e?r?v(!0):D=h.run():o?o(v.bind(null,!0),!0):h.run(),N.pause=h.pause.bind(h),N.resume=h.resume.bind(h),N.stop=N,N}function sr(t,e=1/0,n){if(e<=0||!Me(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,at(t))sr(t.value,e,n);else if(le(t))for(let r=0;r<t.length;r++)sr(t[r],e,n);else if(Ju(t)||Vi(t))t.forEach(r=>{sr(r,e,n)});else if(cv(t)){for(const r in t)sr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&sr(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function tc(t,e,n,r){try{return r?t(...r):t()}catch(s){Eo(s,e,n)}}function Sn(t,e,n,r){if(de(t)){const s=tc(t,e,n,r);return s&&ov(s)&&s.catch(i=>{Eo(i,e,n)}),s}if(le(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Sn(t[i],e,n,r));return s}}function Eo(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Be;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,c,l)===!1)return}a=a.parent}if(i){lr(),tc(i,null,10,[t,c,l]),hr();return}}hR(t,n,s,r,o)}function hR(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const $t=[];let kn=-1;const ki=[];let Or=null,Ti=0;const kv=Promise.resolve();let hu=null;function qi(t){const e=hu||kv;return t?e.then(this?t.bind(this):t):e}function fR(t){let e=kn+1,n=$t.length;for(;e<n;){const r=e+n>>>1,s=$t[r],i=Ca(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function ud(t){if(!(t.flags&1)){const e=Ca(t),n=$t[$t.length-1];!n||!(t.flags&2)&&e>=Ca(n)?$t.push(t):$t.splice(fR(e),0,t),t.flags|=1,Ov()}}function Ov(){hu||(hu=kv.then(Mv))}function qh(t){le(t)?ki.push(...t):Or&&t.id===-1?Or.splice(Ti+1,0,t):t.flags&1||(ki.push(t),t.flags|=1),Ov()}function zm(t,e,n=kn+1){for(;n<$t.length;n++){const r=$t[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;$t.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function fu(t){if(ki.length){const e=[...new Set(ki)].sort((n,r)=>Ca(n)-Ca(r));if(ki.length=0,Or){Or.push(...e);return}for(Or=e,Ti=0;Ti<Or.length;Ti++){const n=Or[Ti];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Or=null,Ti=0}}const Ca=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Mv(t){try{for(kn=0;kn<$t.length;kn++){const e=$t[kn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),tc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;kn<$t.length;kn++){const e=$t[kn];e&&(e.flags&=-2)}kn=-1,$t.length=0,fu(),hu=null,($t.length||ki.length)&&Mv()}}let At=null,Lv=null;function du(t){const e=At;return At=t,Lv=t&&t.type.__scopeId||null,e}function ld(t,e=At,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&yu(-1);const i=du(e);let o;try{o=t(...s)}finally{du(i),r._d&&yu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function o2(t,e){if(At===null)return t;const n=cl(At),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=Be]=e[s];i&&(de(i)&&(i={mounted:i,updated:i}),i.deep&&sr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function On(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(lr(),Sn(c,n,8,[t.el,a,t,e]),hr())}}function Gr(t,e){if(It){let n=It.provides;const r=It.parent&&It.parent.provides;r===n&&(n=It.provides=Object.create(r)),n[t]=e}}function kt(t,e,n=!1){const r=To();if(r||Fs){let s=Fs?Fs._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&de(e)?e.call(r&&r.proxy):e}}function hd(){return!!(To()||Fs)}const dR=Symbol.for("v-scx"),pR=()=>kt(dR);function mR(t,e){return fd(t,null,e)}function Kr(t,e,n){return fd(t,e,n)}function fd(t,e,n=Be){const{immediate:r,deep:s,flush:i,once:o}=n,a=vt({},n),c=e&&r||!e&&i!=="post";let l;if(Ki){if(i==="sync"){const m=pR();l=m.__watcherHandles||(m.__watcherHandles=[])}else if(!c){const m=()=>{};return m.stop=$n,m.resume=$n,m.pause=$n,m}}const h=It;a.call=(m,y,w)=>Sn(m,h,y,w);let f=!1;i==="post"?a.scheduler=m=>{gt(m,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,y)=>{y?m():ud(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=lR(t,e,a);return Ki&&(l?l.push(p):c&&p()),p}function gR(t,e,n){const r=this.proxy,s=Qe(t)?t.includes(".")?Fv(r,t):()=>r[t]:t.bind(r,r);let i;de(e)?i=e:(i=e.handler,n=e);const o=sc(this),a=fd(s,i.bind(r),n);return o(),a}function Fv(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const _R=Symbol("_vte"),Bv=t=>t.__isTeleport,nr=Symbol("_leaveCb"),Nc=Symbol("_enterCb");function yR(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return pd(()=>{t.isMounted=!0}),rc(()=>{t.isUnmounting=!0}),t}const hn=[Function,Array],Uv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hn,onEnter:hn,onAfterEnter:hn,onEnterCancelled:hn,onBeforeLeave:hn,onLeave:hn,onAfterLeave:hn,onLeaveCancelled:hn,onBeforeAppear:hn,onAppear:hn,onAfterAppear:hn,onAppearCancelled:hn},jv=t=>{const e=t.subTree;return e.component?jv(e.component):e},vR={name:"BaseTransition",props:Uv,setup(t,{slots:e}){const n=To(),r=yR();return()=>{const s=e.default&&Hv(e.default(),!0);if(!s||!s.length)return;const i=$v(s),o=Re(t),{mode:a}=o;if(r.isLeaving)return ah(i);const c=Wm(i);if(!c)return ah(i);let l=Hh(c,o,r,n,f=>l=f);c.type!==it&&Hi(c,l);let h=n.subTree&&Wm(n.subTree);if(h&&h.type!==it&&!En(h,c)&&jv(n).type!==it){let f=Hh(h,o,r,n);if(Hi(h,f),a==="out-in"&&c.type!==it)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},ah(i);a==="in-out"&&c.type!==it?f.delayLeave=(p,m,y)=>{const w=qv(r,h);w[String(h.key)]=h,p[nr]=()=>{m(),p[nr]=void 0,delete l.delayedLeave,h=void 0},l.delayedLeave=()=>{y(),delete l.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function $v(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==it){e=n;break}}return e}const wR=vR;function qv(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Hh(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:y,onLeaveCancelled:w,onBeforeAppear:C,onAppear:N,onAfterAppear:D,onAppearCancelled:v}=e,x=String(t.key),k=qv(n,t),U=(E,R)=>{E&&Sn(E,r,9,R)},b=(E,R)=>{const P=R[1];U(E,R),le(E)?E.every(S=>S.length<=1)&&P():E.length<=1&&P()},T={mode:o,persisted:a,beforeEnter(E){let R=c;if(!n.isMounted)if(i)R=C||c;else return;E[nr]&&E[nr](!0);const P=k[x];P&&En(t,P)&&P.el[nr]&&P.el[nr](),U(R,[E])},enter(E){let R=l,P=h,S=f;if(!n.isMounted)if(i)R=N||l,P=D||h,S=v||f;else return;let I=!1;const fe=E[Nc]=Te=>{I||(I=!0,Te?U(S,[E]):U(P,[E]),T.delayedLeave&&T.delayedLeave(),E[Nc]=void 0)};R?b(R,[E,fe]):fe()},leave(E,R){const P=String(t.key);if(E[Nc]&&E[Nc](!0),n.isUnmounting)return R();U(p,[E]);let S=!1;const I=E[nr]=fe=>{S||(S=!0,R(),fe?U(w,[E]):U(y,[E]),E[nr]=void 0,k[P]===t&&delete k[P])};k[P]=t,m?b(m,[E,I]):I()},clone(E){const R=Hh(E,e,n,r,s);return s&&s(R),R}};return T}function ah(t){if(nc(t))return t=fr(t),t.children=null,t}function Wm(t){if(!nc(t))return Bv(t.type)&&t.children?$v(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&de(n.default))return n.default()}}function Hi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Hi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Hv(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Tt?(o.patchFlag&128&&s++,r=r.concat(Hv(o.children,e,a))):(e||o.type!==it)&&r.push(a!=null?fr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function as(t,e){return de(t)?vt({name:t.name},e,{setup:t}):t}function dd(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const pu=new WeakMap;function Oi(t,e,n,r,s=!1){if(le(t)){t.forEach((y,w)=>Oi(y,e&&(le(e)?e[w]:e),n,r,s));return}if(ar(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Oi(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?cl(r.component):r.el,o=s?null:i,{i:a,r:c}=t,l=e&&e.r,h=a.refs===Be?a.refs={}:a.refs,f=a.setupState,p=Re(f),m=f===Be?iv:y=>De(p,y);if(l!=null&&l!==c){if(Qm(e),Qe(l))h[l]=null,m(l)&&(f[l]=null);else if(at(l)){l.value=null;const y=e;y.k&&(h[y.k]=null)}}if(de(c))tc(c,a,12,[o,h]);else{const y=Qe(c),w=at(c);if(y||w){const C=()=>{if(t.f){const N=y?m(c)?f[c]:h[c]:c.value;if(s)le(N)&&td(N,i);else if(le(N))N.includes(i)||N.push(i);else if(y)h[c]=[i],m(c)&&(f[c]=h[c]);else{const D=[i];c.value=D,t.k&&(h[t.k]=D)}}else y?(h[c]=o,m(c)&&(f[c]=o)):w&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const N=()=>{C(),pu.delete(t)};N.id=-1,pu.set(t,N),gt(N,n)}else Qm(t),C()}}}function Qm(t){const e=pu.get(t);e&&(e.flags|=8,pu.delete(t))}let Jm=!1;const di=()=>{Jm||(console.error("Hydration completed but contains mismatches."),Jm=!0)},ER=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",TR=t=>t.namespaceURI.includes("MathML"),kc=t=>{if(t.nodeType===1){if(ER(t))return"svg";if(TR(t))return"mathml"}},Ci=t=>t.nodeType===8;function IR(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:c,createComment:l}}=t,h=(v,x)=>{if(!x.hasChildNodes()){n(null,v,x),fu(),x._vnode=v;return}f(x.firstChild,v,null,null,null),fu(),x._vnode=v},f=(v,x,k,U,b,T=!1)=>{T=T||!!x.dynamicChildren;const E=Ci(v)&&v.data==="[",R=()=>w(v,x,k,U,b,E),{type:P,ref:S,shapeFlag:I,patchFlag:fe}=x;let Te=v.nodeType;x.el=v,fe===-2&&(T=!1,x.dynamicChildren=null);let ie=null;switch(P){case Bs:Te!==3?x.children===""?(c(x.el=s(""),o(v),v),ie=v):ie=R():(v.data!==x.children&&(di(),v.data=x.children),ie=i(v));break;case it:D(v)?(ie=i(v),N(x.el=v.content.firstChild,v,k)):Te!==8||E?ie=R():ie=i(v);break;case zc:if(E&&(v=i(v),Te=v.nodeType),Te===1||Te===3){ie=v;const pe=!x.children.length;for(let re=0;re<x.staticCount;re++)pe&&(x.children+=ie.nodeType===1?ie.outerHTML:ie.data),re===x.staticCount-1&&(x.anchor=ie),ie=i(ie);return E?i(ie):ie}else R();break;case Tt:E?ie=y(v,x,k,U,b,T):ie=R();break;default:if(I&1)(Te!==1||x.type.toLowerCase()!==v.tagName.toLowerCase())&&!D(v)?ie=R():ie=p(v,x,k,U,b,T);else if(I&6){x.slotScopeIds=b;const pe=o(v);if(E?ie=C(v):Ci(v)&&v.data==="teleport start"?ie=C(v,v.data,"teleport end"):ie=i(v),e(x,pe,null,k,U,kc(pe),T),ar(x)&&!x.type.__asyncResolved){let re;E?(re=tt(Tt),re.anchor=ie?ie.previousSibling:pe.lastChild):re=v.nodeType===3?Aw(""):tt("div"),re.el=v,x.component.subTree=re}}else I&64?Te!==8?ie=R():ie=x.type.hydrate(v,x,k,U,b,T,t,m):I&128&&(ie=x.type.hydrate(v,x,k,U,kc(o(v)),b,T,t,f))}return S!=null&&Oi(S,null,U,x),ie},p=(v,x,k,U,b,T)=>{T=T||!!x.dynamicChildren;const{type:E,props:R,patchFlag:P,shapeFlag:S,dirs:I,transition:fe}=x,Te=E==="input"||E==="option";if(Te||P!==-1){I&&On(x,null,k,"created");let ie=!1;if(D(v)){ie=pw(null,fe)&&k&&k.vnode.props&&k.vnode.props.appear;const re=v.content.firstChild;if(ie){const Ce=re.getAttribute("class");Ce&&(re.$cls=Ce),fe.beforeEnter(re)}N(re,v,k),x.el=v=re}if(S&16&&!(R&&(R.innerHTML||R.textContent))){let re=m(v.firstChild,x,v,k,U,b,T);for(;re;){Oc(v,1)||di();const Ce=re;re=re.nextSibling,a(Ce)}}else if(S&8){let re=x.children;re[0]===`
`&&(v.tagName==="PRE"||v.tagName==="TEXTAREA")&&(re=re.slice(1));const{textContent:Ce}=v;Ce!==re&&Ce!==re.replace(/\r\n|\r/g,`
`)&&(Oc(v,0)||di(),v.textContent=x.children)}if(R){if(Te||!T||P&48){const re=v.tagName.includes("-");for(const Ce in R)(Te&&(Ce.endsWith("value")||Ce==="indeterminate")||ec(Ce)&&!Di(Ce)||Ce[0]==="."||re)&&r(v,Ce,null,R[Ce],void 0,k)}else if(R.onClick)r(v,"onClick",null,R.onClick,void 0,k);else if(P&4&&Hr(R.style))for(const re in R.style)R.style[re]}let pe;(pe=R&&R.onVnodeBeforeMount)&&zt(pe,k,x),I&&On(x,null,k,"beforeMount"),((pe=R&&R.onVnodeMounted)||I||ie)&&vw(()=>{pe&&zt(pe,k,x),ie&&fe.enter(v),I&&On(x,null,k,"mounted")},U)}return v.nextSibling},m=(v,x,k,U,b,T,E)=>{E=E||!!x.dynamicChildren;const R=x.children,P=R.length;for(let S=0;S<P;S++){const I=E?R[S]:R[S]=rn(R[S]),fe=I.type===Bs;v?(fe&&!E&&S+1<P&&rn(R[S+1]).type===Bs&&(c(s(v.data.slice(I.children.length)),k,i(v)),v.data=I.children),v=f(v,I,U,b,T,E)):fe&&!I.children?c(I.el=s(""),k):(Oc(k,1)||di(),n(null,I,k,null,U,b,kc(k),T))}return v},y=(v,x,k,U,b,T)=>{const{slotScopeIds:E}=x;E&&(b=b?b.concat(E):E);const R=o(v),P=m(i(v),x,R,k,U,b,T);return P&&Ci(P)&&P.data==="]"?i(x.anchor=P):(di(),c(x.anchor=l("]"),R,P),P)},w=(v,x,k,U,b,T)=>{if(Oc(v.parentElement,1)||di(),x.el=null,T){const P=C(v);for(;;){const S=i(v);if(S&&S!==P)a(S);else break}}const E=i(v),R=o(v);return a(v),n(null,x,R,E,k,U,kc(R),b),k&&(k.vnode.el=x.el,al(k,x.el)),E},C=(v,x="[",k="]")=>{let U=0;for(;v;)if(v=i(v),v&&Ci(v)&&(v.data===x&&U++,v.data===k)){if(U===0)return i(v);U--}return v},N=(v,x,k)=>{const U=x.parentNode;U&&U.replaceChild(v,x);let b=k;for(;b;)b.vnode.el===x&&(b.vnode.el=b.subTree.el=v),b=b.parent},D=v=>v.nodeType===1&&v.tagName==="TEMPLATE";return[h,f]}const Ym="data-allow-mismatch",bR={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Oc(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Ym);)t=t.parentElement;const n=t&&t.getAttribute(Ym);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(bR[e])}}el().requestIdleCallback;el().cancelIdleCallback;function AR(t,e){if(Ci(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(Ci(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const ar=t=>!!t.type.__asyncLoader;function Gh(t){de(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:c}=t;let l=null,h,f=0;const p=()=>(f++,l=null,m()),m=()=>{let y;return l||(y=l=e().catch(w=>{if(w=w instanceof Error?w:new Error(String(w)),c)return new Promise((C,N)=>{c(w,()=>C(p()),()=>N(w),f+1)});throw w}).then(w=>y!==l&&l?l:(w&&(w.__esModule||w[Symbol.toStringTag]==="Module")&&(w=w.default),h=w,w)))};return as({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(y,w,C){let N=!1;(w.bu||(w.bu=[])).push(()=>N=!0);const D=()=>{N||C()},v=i?()=>{const x=i(D,k=>AR(y,k));x&&(w.bum||(w.bum=[])).push(x)}:D;h?v():m().then(()=>!w.isUnmounted&&v())},get __asyncResolved(){return h},setup(){const y=It;if(dd(y),h)return()=>Mc(h,y);const w=v=>{l=null,Eo(v,y,13,!r)};if(a&&y.suspense||Ki)return m().then(v=>()=>Mc(v,y)).catch(v=>(w(v),()=>r?tt(r,{error:v}):null));const C=or(!1),N=or(),D=or(!!s);return s&&setTimeout(()=>{D.value=!1},s),o!=null&&setTimeout(()=>{if(!C.value&&!N.value){const v=new Error(`Async component timed out after ${o}ms.`);w(v),N.value=v}},o),m().then(()=>{C.value=!0,y.parent&&nc(y.parent.vnode)&&y.parent.update()}).catch(v=>{w(v),N.value=v}),()=>{if(C.value&&h)return Mc(h,y);if(N.value&&r)return tt(r,{error:N.value});if(n&&!D.value)return Mc(n,y)}}})}function Mc(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=tt(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const nc=t=>t.type.__isKeepAlive,RR={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=To(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:c,m:l,um:h,o:{createElement:f}}}=r,p=f("div");r.activate=(D,v,x,k,U)=>{const b=D.component;l(D,v,x,0,a),c(b.vnode,D,v,x,b,a,k,D.slotScopeIds,U),gt(()=>{b.isDeactivated=!1,b.a&&Ni(b.a);const T=D.props&&D.props.onVnodeMounted;T&&zt(T,b.parent,D)},a)},r.deactivate=D=>{const v=D.component;gu(v.m),gu(v.a),l(D,p,null,1,a),gt(()=>{v.da&&Ni(v.da);const x=D.props&&D.props.onVnodeUnmounted;x&&zt(x,v.parent,D),v.isDeactivated=!0},a)};function m(D){ch(D),h(D,n,a,!0)}function y(D){s.forEach((v,x)=>{const k=Zh(ar(v)?v.type.__asyncResolved||{}:v.type);k&&!D(k)&&w(x)})}function w(D){const v=s.get(D);v&&(!o||!En(v,o))?m(v):o&&ch(o),s.delete(D),i.delete(D)}Kr(()=>[t.include,t.exclude],([D,v])=>{D&&y(x=>sa(D,x)),v&&y(x=>!sa(v,x))},{flush:"post",deep:!0});let C=null;const N=()=>{C!=null&&(_u(n.subTree.type)?gt(()=>{s.set(C,Lc(n.subTree))},n.subTree.suspense):s.set(C,Lc(n.subTree)))};return pd(N),Wv(N),rc(()=>{s.forEach(D=>{const{subTree:v,suspense:x}=n,k=Lc(v);if(D.type===k.type&&D.key===k.key){ch(k);const U=k.component.da;U&&gt(U,x);return}m(D)})}),()=>{if(C=null,!e.default)return o=null;const D=e.default(),v=D[0];if(D.length>1)return o=null,D;if(!$s(v)||!(v.shapeFlag&4)&&!(v.shapeFlag&128))return o=null,v;let x=Lc(v);if(x.type===it)return o=null,x;const k=x.type,U=Zh(ar(x)?x.type.__asyncResolved||{}:k),{include:b,exclude:T,max:E}=t;if(b&&(!U||!sa(b,U))||T&&U&&sa(T,U))return x.shapeFlag&=-257,o=x,v;const R=x.key==null?k:x.key,P=s.get(R);return x.el&&(x=fr(x),v.shapeFlag&128&&(v.ssContent=x)),C=R,P?(x.el=P.el,x.component=P.component,x.transition&&Hi(x,x.transition),x.shapeFlag|=512,i.delete(R),i.add(R)):(i.add(R),E&&i.size>parseInt(E,10)&&w(i.values().next().value)),x.shapeFlag|=256,o=x,_u(v.type)?v:x}}},SR=RR;function sa(t,e){return le(t)?t.some(n=>sa(n,e)):Qe(t)?t.split(",").includes(e):EA(t)?(t.lastIndex=0,t.test(e)):!1}function Gv(t,e){zv(t,"a",e)}function Kv(t,e){zv(t,"da",e)}function zv(t,e,n=It){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(il(e,r,n),n){let s=n.parent;for(;s&&s.parent;)nc(s.parent.vnode)&&PR(r,e,n,s),s=s.parent}}function PR(t,e,n,r){const s=il(e,t,r,!0);Qv(()=>{td(r[e],s)},n)}function ch(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Lc(t){return t.shapeFlag&128?t.ssContent:t}function il(t,e,n=It,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{lr();const a=sc(n),c=Sn(e,n,t,o);return a(),hr(),c});return r?s.unshift(i):s.push(i),i}}const _r=t=>(e,n=It)=>{(!Ki||t==="sp")&&il(t,(...r)=>e(...r),n)},CR=_r("bm"),pd=_r("m"),xR=_r("bu"),Wv=_r("u"),rc=_r("bum"),Qv=_r("um"),VR=_r("sp"),DR=_r("rtg"),NR=_r("rtc");function Jv(t,e=It){il("ec",t,e)}const Yv="components";function a2(t,e){return Zv(Yv,t,!0,e)||t}const Xv=Symbol.for("v-ndc");function kR(t){return Qe(t)?Zv(Yv,t,!1)||t:t||Xv}function Zv(t,e,n=!0,r=!1){const s=At||It;if(s){const i=s.type;{const a=Zh(i,!1);if(a&&(a===e||a===_n(e)||a===Zu(_n(e))))return i}const o=Xm(s[t]||i[t],e)||Xm(s.appContext[t],e);return!o&&r?i:o}}function Xm(t,e){return t&&(t[e]||t[_n(e)]||t[Zu(_n(e))])}function c2(t,e,n,r){let s;const i=n,o=le(t);if(o||Qe(t)){const a=o&&Hr(t);let c=!1,l=!1;a&&(c=!on(t),l=Kn(t),t=rl(t)),s=new Array(t.length);for(let h=0,f=t.length;h<f;h++)s[h]=e(c?l?ji(Rn(t[h])):Rn(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(Me(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const h=a[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}function u2(t,e,n={},r,s){if(At.ce||At.parent&&ar(At.parent)&&At.parent.ce){const l=Object.keys(n).length>0;return pn(),Fn(Tt,null,[tt("slot",n,r)],l?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),pn();const o=i&&ew(i(n)),a=n.key||o&&o.key,c=Fn(Tt,{key:(a&&!An(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function ew(t){return t.some(e=>$s(e)?!(e.type===it||e.type===Tt&&!ew(e.children)):!0)?t:null}const Kh=t=>t?Sw(t)?cl(t):Kh(t.parent):null,da=vt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Kh(t.parent),$root:t=>Kh(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>nw(t),$forceUpdate:t=>t.f||(t.f=()=>{ud(t.update)}),$nextTick:t=>t.n||(t.n=qi.bind(t.proxy)),$watch:t=>gR.bind(t)}),uh=(t,e)=>t!==Be&&!t.__isScriptSetup&&De(t,e),OR={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(uh(r,e))return o[e]=1,r[e];if(s!==Be&&De(s,e))return o[e]=2,s[e];if(De(i,e))return o[e]=3,i[e];if(n!==Be&&De(n,e))return o[e]=4,n[e];zh&&(o[e]=0)}}const l=da[e];let h,f;if(l)return e==="$attrs"&&Vt(t.attrs,"get",""),l(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Be&&De(n,e))return o[e]=4,n[e];if(f=c.config.globalProperties,De(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return uh(s,e)?(s[e]=n,!0):r!==Be&&De(r,e)?(r[e]=n,!0):De(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},a){let c;return!!(n[a]||t!==Be&&a[0]!=="$"&&De(t,a)||uh(e,a)||De(i,a)||De(r,a)||De(da,a)||De(s.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:De(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Zm(t){return le(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let zh=!0;function MR(t){const e=nw(t),n=t.proxy,r=t.ctx;zh=!1,e.beforeCreate&&eg(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:h,beforeMount:f,mounted:p,beforeUpdate:m,updated:y,activated:w,deactivated:C,beforeDestroy:N,beforeUnmount:D,destroyed:v,unmounted:x,render:k,renderTracked:U,renderTriggered:b,errorCaptured:T,serverPrefetch:E,expose:R,inheritAttrs:P,components:S,directives:I,filters:fe}=e;if(l&&LR(l,r,null),o)for(const pe in o){const re=o[pe];de(re)&&(r[pe]=re.bind(n))}if(s){const pe=s.call(n,n);Me(pe)&&(t.data=gr(pe))}if(zh=!0,i)for(const pe in i){const re=i[pe],Ce=de(re)?re.bind(n,n):de(re.get)?re.get.bind(n,n):$n,Vn=!de(re)&&de(re.set)?re.set.bind(n):$n,Zt=sn({get:Ce,set:Vn});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>Zt.value,set:wt=>Zt.value=wt})}if(a)for(const pe in a)tw(a[pe],r,n,pe);if(c){const pe=de(c)?c.call(n):c;Reflect.ownKeys(pe).forEach(re=>{Gr(re,pe[re])})}h&&eg(h,t,"c");function ie(pe,re){le(re)?re.forEach(Ce=>pe(Ce.bind(n))):re&&pe(re.bind(n))}if(ie(CR,f),ie(pd,p),ie(xR,m),ie(Wv,y),ie(Gv,w),ie(Kv,C),ie(Jv,T),ie(NR,U),ie(DR,b),ie(rc,D),ie(Qv,x),ie(VR,E),le(R))if(R.length){const pe=t.exposed||(t.exposed={});R.forEach(re=>{Object.defineProperty(pe,re,{get:()=>n[re],set:Ce=>n[re]=Ce,enumerable:!0})})}else t.exposed||(t.exposed={});k&&t.render===$n&&(t.render=k),P!=null&&(t.inheritAttrs=P),S&&(t.components=S),I&&(t.directives=I),E&&dd(t)}function LR(t,e,n=$n){le(t)&&(t=Wh(t));for(const r in t){const s=t[r];let i;Me(s)?"default"in s?i=kt(s.from||r,s.default,!0):i=kt(s.from||r):i=kt(s),at(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function eg(t,e,n){Sn(le(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function tw(t,e,n,r){let s=r.includes(".")?Fv(n,r):()=>n[r];if(Qe(t)){const i=e[t];de(i)&&Kr(s,i)}else if(de(t))Kr(s,t.bind(n));else if(Me(t))if(le(t))t.forEach(i=>tw(i,e,n,r));else{const i=de(t.handler)?t.handler.bind(n):e[t.handler];de(i)&&Kr(s,i,t)}}function nw(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(l=>mu(c,l,o,!0)),mu(c,e,o)),Me(e)&&i.set(e,c),c}function mu(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&mu(t,i,n,!0),s&&s.forEach(o=>mu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=FR[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const FR={data:tg,props:ng,emits:ng,methods:ia,computed:ia,beforeCreate:Ft,created:Ft,beforeMount:Ft,mounted:Ft,beforeUpdate:Ft,updated:Ft,beforeDestroy:Ft,beforeUnmount:Ft,destroyed:Ft,unmounted:Ft,activated:Ft,deactivated:Ft,errorCaptured:Ft,serverPrefetch:Ft,components:ia,directives:ia,watch:UR,provide:tg,inject:BR};function tg(t,e){return e?t?function(){return vt(de(t)?t.call(this,this):t,de(e)?e.call(this,this):e)}:e:t}function BR(t,e){return ia(Wh(t),Wh(e))}function Wh(t){if(le(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ft(t,e){return t?[...new Set([].concat(t,e))]:e}function ia(t,e){return t?vt(Object.create(null),t,e):e}function ng(t,e){return t?le(t)&&le(e)?[...new Set([...t,...e])]:vt(Object.create(null),Zm(t),Zm(e??{})):e}function UR(t,e){if(!t)return e;if(!e)return t;const n=vt(Object.create(null),t);for(const r in e)n[r]=Ft(t[r],e[r]);return n}function rw(){return{app:null,config:{isNativeTag:iv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jR=0;function $R(t,e){return function(r,s=null){de(r)||(r=vt({},r)),s!=null&&!Me(s)&&(s=null);const i=rw(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:jR++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:ES,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&de(h.install)?(o.add(h),h.install(l,...f)):de(h)&&(o.add(h),h(l,...f))),l},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),l},component(h,f){return f?(i.components[h]=f,l):i.components[h]},directive(h,f){return f?(i.directives[h]=f,l):i.directives[h]},mount(h,f,p){if(!c){const m=l._ceVNode||tt(r,s);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(m,h):t(m,h,p),c=!0,l._container=h,h.__vue_app__=l,cl(m.component)}},onUnmount(h){a.push(h)},unmount(){c&&(Sn(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(h,f){return i.provides[h]=f,l},runWithContext(h){const f=Fs;Fs=l;try{return h()}finally{Fs=f}}};return l}}let Fs=null;const qR=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${_n(e)}Modifiers`]||t[`${ei(e)}Modifiers`];function HR(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Be;let s=n;const i=e.startsWith("update:"),o=i&&qR(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Qe(h)?h.trim():h)),o.number&&(s=n.map(nd)));let a,c=r[a=nh(e)]||r[a=nh(_n(e))];!c&&i&&(c=r[a=nh(ei(e))]),c&&Sn(c,t,6,s);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Sn(l,t,6,s)}}const GR=new WeakMap;function sw(t,e,n=!1){const r=n?GR:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!de(t)){const c=l=>{const h=sw(l,e,!0);h&&(a=!0,vt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Me(t)&&r.set(t,null),null):(le(i)?i.forEach(c=>o[c]=null):vt(o,i),Me(t)&&r.set(t,o),o)}function ol(t,e){return!t||!ec(e)?!1:(e=e.slice(2).replace(/Once$/,""),De(t,e[0].toLowerCase()+e.slice(1))||De(t,ei(e))||De(t,e))}function lh(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:h,props:f,data:p,setupState:m,ctx:y,inheritAttrs:w}=t,C=du(t);let N,D;try{if(n.shapeFlag&4){const x=s||r,k=x;N=rn(l.call(k,x,h,f,m,p,y)),D=a}else{const x=e;N=rn(x.length>1?x(f,{attrs:a,slots:o,emit:c}):x(f,null)),D=e.props?a:zR(a)}}catch(x){pa.length=0,Eo(x,t,1),N=tt(it)}let v=N;if(D&&w!==!1){const x=Object.keys(D),{shapeFlag:k}=v;x.length&&k&7&&(i&&x.some(ed)&&(D=WR(D,i)),v=fr(v,D,!1,!0))}return n.dirs&&(v=fr(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&Hi(v,n.transition),N=v,du(C),N}function KR(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if($s(s)){if(s.type!==it||s.children==="v-if"){if(n)return;n=s}}else return}return n}const zR=t=>{let e;for(const n in t)(n==="class"||n==="style"||ec(n))&&((e||(e={}))[n]=t[n]);return e},WR=(t,e)=>{const n={};for(const r in t)(!ed(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function QR(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?rg(r,o,l):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==r[p]&&!ol(l,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?rg(r,o,l):!0:!!o;return!1}function rg(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ol(n,i))return!0}return!1}function al({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const iw={},ow=()=>Object.create(iw),aw=t=>Object.getPrototypeOf(t)===iw;function JR(t,e,n,r=!1){const s={},i=ow();t.propsDefaults=Object.create(null),cw(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Bn(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function YR(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Re(s),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(ol(t.emitsOptions,p))continue;const m=e[p];if(c)if(De(i,p))m!==i[p]&&(i[p]=m,l=!0);else{const y=_n(p);s[y]=Qh(c,a,y,m,t,!1)}else m!==i[p]&&(i[p]=m,l=!0)}}}else{cw(t,e,s,i)&&(l=!0);let h;for(const f in a)(!e||!De(e,f)&&((h=ei(f))===f||!De(e,h)))&&(c?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=Qh(c,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!De(e,f))&&(delete i[f],l=!0)}l&&rr(t.attrs,"set","")}function cw(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Di(c))continue;const l=e[c];let h;s&&De(s,h=_n(c))?!i||!i.includes(h)?n[h]=l:(a||(a={}))[h]=l:ol(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=Re(n),l=a||Be;for(let h=0;h<i.length;h++){const f=i[h];n[f]=Qh(s,c,f,l[f],t,!De(l,f))}}return o}function Qh(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=De(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&de(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const h=sc(s);r=l[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===ei(n))&&(r=!0))}return r}const XR=new WeakMap;function uw(t,e,n=!1){const r=n?XR:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!de(t)){const h=f=>{c=!0;const[p,m]=uw(f,e,!0);vt(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Me(t)&&r.set(t,xi),xi;if(le(i))for(let h=0;h<i.length;h++){const f=_n(i[h]);sg(f)&&(o[f]=Be)}else if(i)for(const h in i){const f=_n(h);if(sg(f)){const p=i[h],m=o[f]=le(p)||de(p)?{type:p}:vt({},p),y=m.type;let w=!1,C=!0;if(le(y))for(let N=0;N<y.length;++N){const D=y[N],v=de(D)&&D.name;if(v==="Boolean"){w=!0;break}else v==="String"&&(C=!1)}else w=de(y)&&y.name==="Boolean";m[0]=w,m[1]=C,(w||De(m,"default"))&&a.push(f)}}const l=[o,a];return Me(t)&&r.set(t,l),l}function sg(t){return t[0]!=="$"&&!Di(t)}const md=t=>t==="_"||t==="_ctx"||t==="$stable",gd=t=>le(t)?t.map(rn):[rn(t)],ZR=(t,e,n)=>{if(e._n)return e;const r=ld((...s)=>gd(e(...s)),n);return r._c=!1,r},lw=(t,e,n)=>{const r=t._ctx;for(const s in t){if(md(s))continue;const i=t[s];if(de(i))e[s]=ZR(s,i,r);else if(i!=null){const o=gd(i);e[s]=()=>o}}},hw=(t,e)=>{const n=gd(e);t.slots.default=()=>n},fw=(t,e,n)=>{for(const r in e)(n||!md(r))&&(t[r]=e[r])},eS=(t,e,n)=>{const r=t.slots=ow();if(t.vnode.shapeFlag&32){const s=e._;s?(fw(r,e,n),n&&uv(r,"_",s,!0)):lw(e,r)}else e&&hw(t,e)},tS=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Be;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:fw(s,e,n):(i=!e.$stable,lw(e,s)),o=e}else e&&(hw(t,e),o={default:1});if(i)for(const a in s)!md(a)&&o[a]==null&&delete s[a]},gt=vw;function nS(t){return dw(t)}function rS(t){return dw(t,IR)}function dw(t,e){const n=el();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:h,parentNode:f,nextSibling:p,setScopeId:m=$n,insertStaticContent:y}=t,w=(A,V,L,H=null,j=null,K=null,Q=void 0,W=null,J=!!V.dynamicChildren)=>{if(A===V)return;A&&!En(A,V)&&(H=$(A),wt(A,j,K,!0),A=null),V.patchFlag===-2&&(J=!1,V.dynamicChildren=null);const{type:z,ref:he,shapeFlag:te}=V;switch(z){case Bs:C(A,V,L,H);break;case it:N(A,V,L,H);break;case zc:A==null&&D(V,L,H,Q);break;case Tt:S(A,V,L,H,j,K,Q,W,J);break;default:te&1?k(A,V,L,H,j,K,Q,W,J):te&6?I(A,V,L,H,j,K,Q,W,J):(te&64||te&128)&&z.process(A,V,L,H,j,K,Q,W,J,ue)}he!=null&&j?Oi(he,A&&A.ref,K,V||A,!V):he==null&&A&&A.ref!=null&&Oi(A.ref,null,K,A,!0)},C=(A,V,L,H)=>{if(A==null)r(V.el=a(V.children),L,H);else{const j=V.el=A.el;V.children!==A.children&&l(j,V.children)}},N=(A,V,L,H)=>{A==null?r(V.el=c(V.children||""),L,H):V.el=A.el},D=(A,V,L,H)=>{[A.el,A.anchor]=y(A.children,V,L,H,A.el,A.anchor)},v=({el:A,anchor:V},L,H)=>{let j;for(;A&&A!==V;)j=p(A),r(A,L,H),A=j;r(V,L,H)},x=({el:A,anchor:V})=>{let L;for(;A&&A!==V;)L=p(A),s(A),A=L;s(V)},k=(A,V,L,H,j,K,Q,W,J)=>{if(V.type==="svg"?Q="svg":V.type==="math"&&(Q="mathml"),A==null)U(V,L,H,j,K,Q,W,J);else{const z=A.el&&A.el._isVueCE?A.el:null;try{z&&z._beginPatch(),E(A,V,j,K,Q,W,J)}finally{z&&z._endPatch()}}},U=(A,V,L,H,j,K,Q,W)=>{let J,z;const{props:he,shapeFlag:te,transition:ae,dirs:me}=A;if(J=A.el=o(A.type,K,he&&he.is,he),te&8?h(J,A.children):te&16&&T(A.children,J,null,H,j,hh(A,K),Q,W),me&&On(A,null,H,"created"),b(J,A,A.scopeId,Q,H),he){for(const xe in he)xe!=="value"&&!Di(xe)&&i(J,xe,null,he[xe],K,H);"value"in he&&i(J,"value",null,he.value,K),(z=he.onVnodeBeforeMount)&&zt(z,H,A)}me&&On(A,null,H,"beforeMount");const we=pw(j,ae);we&&ae.beforeEnter(J),r(J,V,L),((z=he&&he.onVnodeMounted)||we||me)&&gt(()=>{z&&zt(z,H,A),we&&ae.enter(J),me&&On(A,null,H,"mounted")},j)},b=(A,V,L,H,j)=>{if(L&&m(A,L),H)for(let K=0;K<H.length;K++)m(A,H[K]);if(j){let K=j.subTree;if(V===K||_u(K.type)&&(K.ssContent===V||K.ssFallback===V)){const Q=j.vnode;b(A,Q,Q.scopeId,Q.slotScopeIds,j.parent)}}},T=(A,V,L,H,j,K,Q,W,J=0)=>{for(let z=J;z<A.length;z++){const he=A[z]=W?Mr(A[z]):rn(A[z]);w(null,he,V,L,H,j,K,Q,W)}},E=(A,V,L,H,j,K,Q)=>{const W=V.el=A.el;let{patchFlag:J,dynamicChildren:z,dirs:he}=V;J|=A.patchFlag&16;const te=A.props||Be,ae=V.props||Be;let me;if(L&&ys(L,!1),(me=ae.onVnodeBeforeUpdate)&&zt(me,L,V,A),he&&On(V,A,L,"beforeUpdate"),L&&ys(L,!0),(te.innerHTML&&ae.innerHTML==null||te.textContent&&ae.textContent==null)&&h(W,""),z?R(A.dynamicChildren,z,W,L,H,hh(V,j),K):Q||re(A,V,W,null,L,H,hh(V,j),K,!1),J>0){if(J&16)P(W,te,ae,L,j);else if(J&2&&te.class!==ae.class&&i(W,"class",null,ae.class,j),J&4&&i(W,"style",te.style,ae.style,j),J&8){const we=V.dynamicProps;for(let xe=0;xe<we.length;xe++){const Pe=we[xe],Pt=te[Pe],ut=ae[Pe];(ut!==Pt||Pe==="value")&&i(W,Pe,Pt,ut,j,L)}}J&1&&A.children!==V.children&&h(W,V.children)}else!Q&&z==null&&P(W,te,ae,L,j);((me=ae.onVnodeUpdated)||he)&&gt(()=>{me&&zt(me,L,V,A),he&&On(V,A,L,"updated")},H)},R=(A,V,L,H,j,K,Q)=>{for(let W=0;W<V.length;W++){const J=A[W],z=V[W],he=J.el&&(J.type===Tt||!En(J,z)||J.shapeFlag&198)?f(J.el):L;w(J,z,he,null,H,j,K,Q,!0)}},P=(A,V,L,H,j)=>{if(V!==L){if(V!==Be)for(const K in V)!Di(K)&&!(K in L)&&i(A,K,V[K],null,j,H);for(const K in L){if(Di(K))continue;const Q=L[K],W=V[K];Q!==W&&K!=="value"&&i(A,K,W,Q,j,H)}"value"in L&&i(A,"value",V.value,L.value,j)}},S=(A,V,L,H,j,K,Q,W,J)=>{const z=V.el=A?A.el:a(""),he=V.anchor=A?A.anchor:a("");let{patchFlag:te,dynamicChildren:ae,slotScopeIds:me}=V;me&&(W=W?W.concat(me):me),A==null?(r(z,L,H),r(he,L,H),T(V.children||[],L,he,j,K,Q,W,J)):te>0&&te&64&&ae&&A.dynamicChildren&&A.dynamicChildren.length===ae.length?(R(A.dynamicChildren,ae,L,j,K,Q,W),(V.key!=null||j&&V===j.subTree)&&mw(A,V,!0)):re(A,V,L,he,j,K,Q,W,J)},I=(A,V,L,H,j,K,Q,W,J)=>{V.slotScopeIds=W,A==null?V.shapeFlag&512?j.ctx.activate(V,L,H,Q,J):fe(V,L,H,j,K,Q,J):Te(A,V,J)},fe=(A,V,L,H,j,K,Q)=>{const W=A.component=mS(A,H,j);if(nc(A)&&(W.ctx.renderer=ue),gS(W,!1,Q),W.asyncDep){if(j&&j.registerDep(W,ie,Q),!A.el){const J=W.subTree=tt(it);N(null,J,V,L),A.placeholder=J.el}}else ie(W,A,V,L,j,K,Q)},Te=(A,V,L)=>{const H=V.component=A.component;if(QR(A,V,L))if(H.asyncDep&&!H.asyncResolved){pe(H,V,L);return}else H.next=V,H.update();else V.el=A.el,H.vnode=V},ie=(A,V,L,H,j,K,Q)=>{const W=()=>{if(A.isMounted){let{next:te,bu:ae,u:me,parent:we,vnode:xe}=A;{const lt=gw(A);if(lt){te&&(te.el=xe.el,pe(A,te,Q)),lt.asyncDep.then(()=>{A.isUnmounted||W()});return}}let Pe=te,Pt;ys(A,!1),te?(te.el=xe.el,pe(A,te,Q)):te=xe,ae&&Ni(ae),(Pt=te.props&&te.props.onVnodeBeforeUpdate)&&zt(Pt,we,te,xe),ys(A,!0);const ut=lh(A),Gt=A.subTree;A.subTree=ut,w(Gt,ut,f(Gt.el),$(Gt),A,j,K),te.el=ut.el,Pe===null&&al(A,ut.el),me&&gt(me,j),(Pt=te.props&&te.props.onVnodeUpdated)&&gt(()=>zt(Pt,we,te,xe),j)}else{let te;const{el:ae,props:me}=V,{bm:we,m:xe,parent:Pe,root:Pt,type:ut}=A,Gt=ar(V);if(ys(A,!1),we&&Ni(we),!Gt&&(te=me&&me.onVnodeBeforeMount)&&zt(te,Pe,V),ys(A,!0),ae&&Le){const lt=()=>{A.subTree=lh(A),Le(ae,A.subTree,A,j,null)};Gt&&ut.__asyncHydrate?ut.__asyncHydrate(ae,A,lt):lt()}else{Pt.ce&&Pt.ce._def.shadowRoot!==!1&&Pt.ce._injectChildStyle(ut);const lt=A.subTree=lh(A);w(null,lt,L,H,A,j,K),V.el=lt.el}if(xe&&gt(xe,j),!Gt&&(te=me&&me.onVnodeMounted)){const lt=V;gt(()=>zt(te,Pe,lt),j)}(V.shapeFlag&256||Pe&&ar(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&A.a&&gt(A.a,j),A.isMounted=!0,V=L=H=null}};A.scope.on();const J=A.effect=new yv(W);A.scope.off();const z=A.update=J.run.bind(J),he=A.job=J.runIfDirty.bind(J);he.i=A,he.id=A.uid,J.scheduler=()=>ud(he),ys(A,!0),z()},pe=(A,V,L)=>{V.component=A;const H=A.vnode.props;A.vnode=V,A.next=null,YR(A,V.props,H,L),tS(A,V.children,L),lr(),zm(A),hr()},re=(A,V,L,H,j,K,Q,W,J=!1)=>{const z=A&&A.children,he=A?A.shapeFlag:0,te=V.children,{patchFlag:ae,shapeFlag:me}=V;if(ae>0){if(ae&128){Vn(z,te,L,H,j,K,Q,W,J);return}else if(ae&256){Ce(z,te,L,H,j,K,Q,W,J);return}}me&8?(he&16&&St(z,j,K),te!==z&&h(L,te)):he&16?me&16?Vn(z,te,L,H,j,K,Q,W,J):St(z,j,K,!0):(he&8&&h(L,""),me&16&&T(te,L,H,j,K,Q,W,J))},Ce=(A,V,L,H,j,K,Q,W,J)=>{A=A||xi,V=V||xi;const z=A.length,he=V.length,te=Math.min(z,he);let ae;for(ae=0;ae<te;ae++){const me=V[ae]=J?Mr(V[ae]):rn(V[ae]);w(A[ae],me,L,null,j,K,Q,W,J)}z>he?St(A,j,K,!0,!1,te):T(V,L,H,j,K,Q,W,J,te)},Vn=(A,V,L,H,j,K,Q,W,J)=>{let z=0;const he=V.length;let te=A.length-1,ae=he-1;for(;z<=te&&z<=ae;){const me=A[z],we=V[z]=J?Mr(V[z]):rn(V[z]);if(En(me,we))w(me,we,L,null,j,K,Q,W,J);else break;z++}for(;z<=te&&z<=ae;){const me=A[te],we=V[ae]=J?Mr(V[ae]):rn(V[ae]);if(En(me,we))w(me,we,L,null,j,K,Q,W,J);else break;te--,ae--}if(z>te){if(z<=ae){const me=ae+1,we=me<he?V[me].el:H;for(;z<=ae;)w(null,V[z]=J?Mr(V[z]):rn(V[z]),L,we,j,K,Q,W,J),z++}}else if(z>ae)for(;z<=te;)wt(A[z],j,K,!0),z++;else{const me=z,we=z,xe=new Map;for(z=we;z<=ae;z++){const Ze=V[z]=J?Mr(V[z]):rn(V[z]);Ze.key!=null&&xe.set(Ze.key,z)}let Pe,Pt=0;const ut=ae-we+1;let Gt=!1,lt=0;const Yn=new Array(ut);for(z=0;z<ut;z++)Yn[z]=0;for(z=me;z<=te;z++){const Ze=A[z];if(Pt>=ut){wt(Ze,j,K,!0);continue}let en;if(Ze.key!=null)en=xe.get(Ze.key);else for(Pe=we;Pe<=ae;Pe++)if(Yn[Pe-we]===0&&En(Ze,V[Pe])){en=Pe;break}en===void 0?wt(Ze,j,K,!0):(Yn[en-we]=z+1,en>=lt?lt=en:Gt=!0,w(Ze,V[en],L,null,j,K,Q,W,J),Pt++)}const ci=Gt?sS(Yn):xi;for(Pe=ci.length-1,z=ut-1;z>=0;z--){const Ze=we+z,en=V[Ze],ds=V[Ze+1],Do=Ze+1<he?ds.el||_w(ds):H;Yn[z]===0?w(null,en,L,Do,j,K,Q,W,J):Gt&&(Pe<0||z!==ci[Pe]?Zt(en,L,Do,2):Pe--)}}},Zt=(A,V,L,H,j=null)=>{const{el:K,type:Q,transition:W,children:J,shapeFlag:z}=A;if(z&6){Zt(A.component.subTree,V,L,H);return}if(z&128){A.suspense.move(V,L,H);return}if(z&64){Q.move(A,V,L,ue);return}if(Q===Tt){r(K,V,L);for(let te=0;te<J.length;te++)Zt(J[te],V,L,H);r(A.anchor,V,L);return}if(Q===zc){v(A,V,L);return}if(H!==2&&z&1&&W)if(H===0)W.beforeEnter(K),r(K,V,L),gt(()=>W.enter(K),j);else{const{leave:te,delayLeave:ae,afterLeave:me}=W,we=()=>{A.ctx.isUnmounted?s(K):r(K,V,L)},xe=()=>{K._isLeaving&&K[nr](!0),te(K,()=>{we(),me&&me()})};ae?ae(K,we,xe):xe()}else r(K,V,L)},wt=(A,V,L,H=!1,j=!1)=>{const{type:K,props:Q,ref:W,children:J,dynamicChildren:z,shapeFlag:he,patchFlag:te,dirs:ae,cacheIndex:me}=A;if(te===-2&&(j=!1),W!=null&&(lr(),Oi(W,null,L,A,!0),hr()),me!=null&&(V.renderCache[me]=void 0),he&256){V.ctx.deactivate(A);return}const we=he&1&&ae,xe=!ar(A);let Pe;if(xe&&(Pe=Q&&Q.onVnodeBeforeUnmount)&&zt(Pe,V,A),he&6)vn(A.component,L,H);else{if(he&128){A.suspense.unmount(L,H);return}we&&On(A,null,V,"beforeUnmount"),he&64?A.type.remove(A,V,L,ue,H):z&&!z.hasOnce&&(K!==Tt||te>0&&te&64)?St(z,V,L,!1,!0):(K===Tt&&te&384||!j&&he&16)&&St(J,V,L),H&&Jn(A)}(xe&&(Pe=Q&&Q.onVnodeUnmounted)||we)&&gt(()=>{Pe&&zt(Pe,V,A),we&&On(A,null,V,"unmounted")},L)},Jn=A=>{const{type:V,el:L,anchor:H,transition:j}=A;if(V===Tt){yn(L,H);return}if(V===zc){x(A);return}const K=()=>{s(L),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(A.shapeFlag&1&&j&&!j.persisted){const{leave:Q,delayLeave:W}=j,J=()=>Q(L,K);W?W(A.el,K,J):J()}else K()},yn=(A,V)=>{let L;for(;A!==V;)L=p(A),s(A),A=L;s(V)},vn=(A,V,L)=>{const{bum:H,scope:j,job:K,subTree:Q,um:W,m:J,a:z}=A;gu(J),gu(z),H&&Ni(H),j.stop(),K&&(K.flags|=8,wt(Q,A,V,L)),W&&gt(W,V),gt(()=>{A.isUnmounted=!0},V)},St=(A,V,L,H=!1,j=!1,K=0)=>{for(let Q=K;Q<A.length;Q++)wt(A[Q],V,L,H,j)},$=A=>{if(A.shapeFlag&6)return $(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const V=p(A.anchor||A.el),L=V&&V[_R];return L?p(L):V};let se=!1;const ee=(A,V,L)=>{let H;A==null?V._vnode&&(wt(V._vnode,null,null,!0),H=V._vnode.component):w(V._vnode||null,A,V,null,null,null,L),V._vnode=A,se||(se=!0,zm(H),fu(),se=!1)},ue={p:w,um:wt,m:Zt,r:Jn,mt:fe,mc:T,pc:re,pbc:R,n:$,o:t};let ve,Le;return e&&([ve,Le]=e(ue)),{render:ee,hydrate:ve,createApp:$R(ee,ve)}}function hh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ys({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function pw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function mw(t,e,n=!1){const r=t.children,s=e.children;if(le(r)&&le(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Mr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&mw(o,a)),a.type===Bs&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===Tt?1:0)),a.type===it&&!a.el&&(a.el=o.el)}}function sS(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(s=n[n.length-1],t[s]<l){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function gw(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:gw(e)}function gu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function _w(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?_w(e.subTree):null}const _u=t=>t.__isSuspense;let Jh=0;const iS={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,c,l){if(t==null)oS(e,n,r,s,i,o,a,c,l);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}aS(t,e,n,r,s,o,a,c,l)}},hydrate:cS,normalize:uS},_d=iS;function xa(t,e){const n=t.props&&t.props[e];de(n)&&n()}function oS(t,e,n,r,s,i,o,a,c){const{p:l,o:{createElement:h}}=c,f=h("div"),p=t.suspense=yw(t,s,r,e,f,n,i,o,a,c);l(null,p.pendingBranch=t.ssContent,f,null,r,p,i,o),p.deps>0?(xa(t,"onPending"),xa(t,"onFallback"),l(null,t.ssFallback,e,n,r,null,i,o),Mi(p,t.ssFallback)):p.resolve(!1,!0)}function aS(t,e,n,r,s,i,o,a,{p:c,um:l,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,m=e.ssFallback,{activeBranch:y,pendingBranch:w,isInFallback:C,isHydrating:N}=f;if(w)f.pendingBranch=p,En(w,p)?(c(w,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():C&&(N||(c(y,m,n,r,s,null,i,o,a),Mi(f,m)))):(f.pendingId=Jh++,N?(f.isHydrating=!1,f.activeBranch=w):l(w,s,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),C?(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():(c(y,m,n,r,s,null,i,o,a),Mi(f,m))):y&&En(y,p)?(c(y,p,n,r,s,f,i,o,a),f.resolve(!0)):(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0&&f.resolve()));else if(y&&En(y,p))c(y,p,n,r,s,f,i,o,a),Mi(f,p);else if(xa(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=Jh++,c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:D,pendingId:v}=f;D>0?setTimeout(()=>{f.pendingId===v&&f.fallback(m)},D):D===0&&f.fallback(m)}}function yw(t,e,n,r,s,i,o,a,c,l,h=!1){const{p:f,m:p,um:m,n:y,o:{parentNode:w,remove:C}}=l;let N;const D=lS(t);D&&e&&e.pendingBranch&&(N=e.pendingId,e.deps++);const v=t.props?lv(t.props.timeout):void 0,x=i,k={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:Jh++,timeout:typeof v=="number"?v:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(U=!1,b=!1){const{vnode:T,activeBranch:E,pendingBranch:R,pendingId:P,effects:S,parentComponent:I,container:fe,isInFallback:Te}=k;let ie=!1;k.isHydrating?k.isHydrating=!1:U||(ie=E&&R.transition&&R.transition.mode==="out-in",ie&&(E.transition.afterLeave=()=>{P===k.pendingId&&(p(R,fe,i===x?y(E):i,0),qh(S),Te&&T.ssFallback&&(T.ssFallback.el=null))}),E&&(w(E.el)===fe&&(i=y(E)),m(E,I,k,!0),!ie&&Te&&T.ssFallback&&gt(()=>T.ssFallback.el=null,k)),ie||p(R,fe,i,0)),Mi(k,R),k.pendingBranch=null,k.isInFallback=!1;let pe=k.parent,re=!1;for(;pe;){if(pe.pendingBranch){pe.effects.push(...S),re=!0;break}pe=pe.parent}!re&&!ie&&qh(S),k.effects=[],D&&e&&e.pendingBranch&&N===e.pendingId&&(e.deps--,e.deps===0&&!b&&e.resolve()),xa(T,"onResolve")},fallback(U){if(!k.pendingBranch)return;const{vnode:b,activeBranch:T,parentComponent:E,container:R,namespace:P}=k;xa(b,"onFallback");const S=y(T),I=()=>{k.isInFallback&&(f(null,U,R,S,E,null,P,a,c),Mi(k,U))},fe=U.transition&&U.transition.mode==="out-in";fe&&(T.transition.afterLeave=I),k.isInFallback=!0,m(T,E,null,!0),fe||I()},move(U,b,T){k.activeBranch&&p(k.activeBranch,U,b,T),k.container=U},next(){return k.activeBranch&&y(k.activeBranch)},registerDep(U,b,T){const E=!!k.pendingBranch;E&&k.deps++;const R=U.vnode.el;U.asyncDep.catch(P=>{Eo(P,U,0)}).then(P=>{if(U.isUnmounted||k.isUnmounted||k.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:S}=U;Xh(U,P),R&&(S.el=R);const I=!R&&U.subTree.el;b(U,S,w(R||U.subTree.el),R?null:y(U.subTree),k,o,T),I&&(S.placeholder=null,C(I)),al(U,S.el),E&&--k.deps===0&&k.resolve()})},unmount(U,b){k.isUnmounted=!0,k.activeBranch&&m(k.activeBranch,n,U,b),k.pendingBranch&&m(k.pendingBranch,n,U,b)}};return k}function cS(t,e,n,r,s,i,o,a,c){const l=e.suspense=yw(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=c(t,l.pendingBranch=e.ssContent,n,l,i,o);return l.deps===0&&l.resolve(!1,!0),h}function uS(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=ig(r?n.default:n),t.ssFallback=r?ig(n.fallback):tt(it)}function ig(t){let e;if(de(t)){const n=Gi&&t._c;n&&(t._d=!1,pn()),t=t(),n&&(t._d=!0,e=Wt,ww())}return le(t)&&(t=KR(t)),t=rn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function vw(t,e){e&&e.pendingBranch?le(t)?e.effects.push(...t):e.effects.push(t):qh(t)}function Mi(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,al(r,s))}function lS(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Tt=Symbol.for("v-fgt"),Bs=Symbol.for("v-txt"),it=Symbol.for("v-cmt"),zc=Symbol.for("v-stc"),pa=[];let Wt=null;function pn(t=!1){pa.push(Wt=t?null:[])}function ww(){pa.pop(),Wt=pa[pa.length-1]||null}let Gi=1;function yu(t,e=!1){Gi+=t,t<0&&Wt&&e&&(Wt.hasOnce=!0)}function Ew(t){return t.dynamicChildren=Gi>0?Wt||xi:null,ww(),Gi>0&&Wt&&Wt.push(t),t}function hS(t,e,n,r,s,i){return Ew(Iw(t,e,n,r,s,i,!0))}function Fn(t,e,n,r,s){return Ew(tt(t,e,n,r,s,!0))}function $s(t){return t?t.__v_isVNode===!0:!1}function En(t,e){return t.type===e.type&&t.key===e.key}const Tw=({key:t})=>t??null,Wc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||at(t)||de(t)?{i:At,r:t,k:e,f:!!n}:t:null);function Iw(t,e=null,n=null,r=0,s=null,i=t===Tt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Tw(e),ref:e&&Wc(e),scopeId:Lv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:At};return a?(yd(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Qe(n)?8:16),Gi>0&&!o&&Wt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Wt.push(c),c}const tt=fS;function fS(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Xv)&&(t=it),$s(t)){const a=fr(t,e,!0);return n&&yd(a,n),Gi>0&&!i&&Wt&&(a.shapeFlag&6?Wt[Wt.indexOf(t)]=a:Wt.push(a)),a.patchFlag=-2,a}if(wS(t)&&(t=t.__vccOpts),e){e=bw(e);let{class:a,style:c}=e;a&&!Qe(a)&&(e.class=nl(a)),Me(c)&&(sl(c)&&!le(c)&&(c=vt({},c)),e.style=tl(c))}const o=Qe(t)?1:_u(t)?128:Bv(t)?64:Me(t)?4:de(t)?2:0;return Iw(t,e,n,r,s,o,i,!0)}function bw(t){return t?sl(t)||aw(t)?vt({},t):t:null}function fr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,l=e?Rw(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Tw(l),ref:e&&e.ref?n&&i?le(i)?i.concat(Wc(e)):[i,Wc(e)]:Wc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Tt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&fr(t.ssContent),ssFallback:t.ssFallback&&fr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Hi(h,c.clone(h)),h}function Aw(t=" ",e=0){return tt(Bs,null,t,e)}function l2(t="",e=!1){return e?(pn(),Fn(it,null,t)):tt(it,null,t)}function rn(t){return t==null||typeof t=="boolean"?tt(it):le(t)?tt(Tt,null,t.slice()):$s(t)?Mr(t):tt(Bs,null,String(t))}function Mr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:fr(t)}function yd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(le(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),yd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!aw(e)?e._ctx=At:s===3&&At&&(At.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:At},n=32):(e=String(e),r&64?(n=16,e=[Aw(e)]):n=8);t.children=e,t.shapeFlag|=n}function Rw(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=nl([e.class,r.class]));else if(s==="style")e.style=tl([e.style,r.style]);else if(ec(s)){const i=e[s],o=r[s];o&&i!==o&&!(le(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function zt(t,e,n,r=null){Sn(t,e,7,[n,r])}const dS=rw();let pS=0;function mS(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||dS,i={uid:pS++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new mv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:uw(r,s),emitsOptions:sw(r,s),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:r.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=HR.bind(null,i),t.ce&&t.ce(i),i}let It=null;const To=()=>It||At;let vu,Yh;{const t=el(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};vu=e("__VUE_INSTANCE_SETTERS__",n=>It=n),Yh=e("__VUE_SSR_SETTERS__",n=>Ki=n)}const sc=t=>{const e=It;return vu(t),t.scope.on(),()=>{t.scope.off(),vu(e)}},og=()=>{It&&It.scope.off(),vu(null)};function Sw(t){return t.vnode.shapeFlag&4}let Ki=!1;function gS(t,e=!1,n=!1){e&&Yh(e);const{props:r,children:s}=t.vnode,i=Sw(t);JR(t,r,i,e),eS(t,s,n||e);const o=i?_S(t,e):void 0;return e&&Yh(!1),o}function _S(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,OR);const{setup:r}=n;if(r){lr();const s=t.setupContext=r.length>1?vS(t):null,i=sc(t),o=tc(r,t,0,[t.props,s]),a=ov(o);if(hr(),i(),(a||t.sp)&&!ar(t)&&dd(t),a){if(o.then(og,og),e)return o.then(c=>{Xh(t,c)}).catch(c=>{Eo(c,t,0)});t.asyncDep=o}else Xh(t,o)}else Pw(t)}function Xh(t,e,n){de(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Me(e)&&(t.setupState=Nv(e)),Pw(t)}function Pw(t,e,n){const r=t.type;t.render||(t.render=r.render||$n);{const s=sc(t);lr();try{MR(t)}finally{hr(),s()}}}const yS={get(t,e){return Vt(t,"get",""),t[e]}};function vS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,yS),slots:t.slots,emit:t.emit,expose:e}}function cl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Nv(ZA(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in da)return da[n](t)},has(e,n){return n in e||n in da}})):t.proxy}function Zh(t,e=!0){return de(t)?t.displayName||t.name:t.name||e&&t.__name}function wS(t){return de(t)&&"__vccOpts"in t}const sn=(t,e)=>cR(t,e,Ki);function Nt(t,e,n){try{yu(-1);const r=arguments.length;return r===2?Me(e)&&!le(e)?$s(e)?tt(t,null,[e]):tt(t,e):tt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&$s(n)&&(n=[n]),tt(t,e,n))}finally{yu(1)}}const ES="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ef;const ag=typeof window<"u"&&window.trustedTypes;if(ag)try{ef=ag.createPolicy("vue",{createHTML:t=>t})}catch{}const Cw=ef?t=>ef.createHTML(t):t=>t,TS="http://www.w3.org/2000/svg",IS="http://www.w3.org/1998/Math/MathML",tr=typeof document<"u"?document:null,cg=tr&&tr.createElement("template"),bS={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?tr.createElementNS(TS,t):e==="mathml"?tr.createElementNS(IS,t):n?tr.createElement(t,{is:n}):tr.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>tr.createTextNode(t),createComment:t=>tr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>tr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{cg.innerHTML=Cw(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=cg.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Pr="transition",Wo="animation",Va=Symbol("_vtc"),xw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},AS=vt({},Uv,xw),RS=t=>(t.displayName="Transition",t.props=AS,t),SS=RS((t,{slots:e})=>Nt(wR,PS(t),e)),vs=(t,e=[])=>{le(t)?t.forEach(n=>n(...e)):t&&t(...e)},ug=t=>t?le(t)?t.some(e=>e.length>1):t.length>1:!1;function PS(t){const e={};for(const S in t)S in xw||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,y=CS(s),w=y&&y[0],C=y&&y[1],{onBeforeEnter:N,onEnter:D,onEnterCancelled:v,onLeave:x,onLeaveCancelled:k,onBeforeAppear:U=N,onAppear:b=D,onAppearCancelled:T=v}=e,E=(S,I,fe,Te)=>{S._enterCancelled=Te,ws(S,I?h:a),ws(S,I?l:o),fe&&fe()},R=(S,I)=>{S._isLeaving=!1,ws(S,f),ws(S,m),ws(S,p),I&&I()},P=S=>(I,fe)=>{const Te=S?b:D,ie=()=>E(I,S,fe);vs(Te,[I,ie]),lg(()=>{ws(I,S?c:i),Zn(I,S?h:a),ug(Te)||hg(I,r,w,ie)})};return vt(e,{onBeforeEnter(S){vs(N,[S]),Zn(S,i),Zn(S,o)},onBeforeAppear(S){vs(U,[S]),Zn(S,c),Zn(S,l)},onEnter:P(!1),onAppear:P(!0),onLeave(S,I){S._isLeaving=!0;const fe=()=>R(S,I);Zn(S,f),S._enterCancelled?(Zn(S,p),pg(S)):(pg(S),Zn(S,p)),lg(()=>{S._isLeaving&&(ws(S,f),Zn(S,m),ug(x)||hg(S,r,C,fe))}),vs(x,[S,fe])},onEnterCancelled(S){E(S,!1,void 0,!0),vs(v,[S])},onAppearCancelled(S){E(S,!0,void 0,!0),vs(T,[S])},onLeaveCancelled(S){R(S),vs(k,[S])}})}function CS(t){if(t==null)return null;if(Me(t))return[fh(t.enter),fh(t.leave)];{const e=fh(t);return[e,e]}}function fh(t){return lv(t)}function Zn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Va]||(t[Va]=new Set)).add(e)}function ws(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Va];n&&(n.delete(e),n.size||(t[Va]=void 0))}function lg(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let xS=0;function hg(t,e,n,r){const s=t._endId=++xS,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=VS(t,e);if(!o)return r();const l=o+"end";let h=0;const f=()=>{t.removeEventListener(l,p),i()},p=m=>{m.target===t&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},a+1),t.addEventListener(l,p)}function VS(t,e){const n=window.getComputedStyle(t),r=y=>(n[y]||"").split(", "),s=r(`${Pr}Delay`),i=r(`${Pr}Duration`),o=fg(s,i),a=r(`${Wo}Delay`),c=r(`${Wo}Duration`),l=fg(a,c);let h=null,f=0,p=0;e===Pr?o>0&&(h=Pr,f=o,p=i.length):e===Wo?l>0&&(h=Wo,f=l,p=c.length):(f=Math.max(o,l),h=f>0?o>l?Pr:Wo:null,p=h?h===Pr?i.length:c.length:0);const m=h===Pr&&/\b(?:transform|all)(?:,|$)/.test(r(`${Pr}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:m}}function fg(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>dg(n)+dg(t[r])))}function dg(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function pg(t){return(t?t.ownerDocument:document).body.offsetHeight}function DS(t,e,n){const r=t[Va];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const mg=Symbol("_vod"),NS=Symbol("_vsh"),kS=Symbol(""),OS=/(?:^|;)\s*display\s*:/;function MS(t,e,n){const r=t.style,s=Qe(n);let i=!1;if(n&&!s){if(e)if(Qe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Qc(r,a,"")}else for(const o in e)n[o]==null&&Qc(r,o,"");for(const o in n)o==="display"&&(i=!0),Qc(r,o,n[o])}else if(s){if(e!==n){const o=r[kS];o&&(n+=";"+o),r.cssText=n,i=OS.test(n)}}else e&&t.removeAttribute("style");mg in t&&(t[mg]=i?r.display:"",t[NS]&&(r.display="none"))}const gg=/\s*!important$/;function Qc(t,e,n){if(le(n))n.forEach(r=>Qc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=LS(t,e);gg.test(n)?t.setProperty(ei(r),n.replace(gg,""),"important"):t[r]=n}}const _g=["Webkit","Moz","ms"],dh={};function LS(t,e){const n=dh[e];if(n)return n;let r=_n(e);if(r!=="filter"&&r in t)return dh[e]=r;r=Zu(r);for(let s=0;s<_g.length;s++){const i=_g[s]+r;if(i in t)return dh[e]=i}return e}const yg="http://www.w3.org/1999/xlink";function vg(t,e,n,r,s,i=VA(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(yg,e.slice(6,e.length)):t.setAttributeNS(yg,e,n):n==null||i&&!hv(n)?t.removeAttribute(e):t.setAttribute(e,i?"":An(n)?String(n):n)}function wg(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Cw(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=hv(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Fr(t,e,n,r){t.addEventListener(e,n,r)}function FS(t,e,n,r){t.removeEventListener(e,n,r)}const Eg=Symbol("_vei");function BS(t,e,n,r,s=null){const i=t[Eg]||(t[Eg]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=US(e);if(r){const l=i[e]=qS(r,s);Fr(t,a,l,c)}else o&&(FS(t,a,o,c),i[e]=void 0)}}const Tg=/(?:Once|Passive|Capture)$/;function US(t){let e;if(Tg.test(t)){e={};let r;for(;r=t.match(Tg);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ei(t.slice(2)),e]}let ph=0;const jS=Promise.resolve(),$S=()=>ph||(jS.then(()=>ph=0),ph=Date.now());function qS(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Sn(HS(r,n.value),e,5,[r])};return n.value=t,n.attached=$S(),n}function HS(t,e){if(le(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Ig=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,GS=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?DS(t,r,o):e==="style"?MS(t,n,r):ec(e)?ed(e)||BS(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):KS(t,e,r,o))?(wg(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&vg(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Qe(r))?wg(t,_n(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),vg(t,e,r,o))};function KS(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ig(e)&&de(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Ig(e)&&Qe(n)?!1:e in t}const zi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return le(e)?n=>Ni(e,n):e};function zS(t){t.target.composing=!0}function bg(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const cr=Symbol("_assign");function Ag(t,e,n){return e&&(t=t.trim()),n&&(t=nd(t)),t}const h2={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[cr]=zi(s);const i=r||s.props&&s.props.type==="number";Fr(t,e?"change":"input",o=>{o.target.composing||t[cr](Ag(t.value,n,i))}),(n||i)&&Fr(t,"change",()=>{t.value=Ag(t.value,n,i)}),e||(Fr(t,"compositionstart",zS),Fr(t,"compositionend",bg),Fr(t,"change",bg))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[cr]=zi(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?nd(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},f2={deep:!0,created(t,e,n){t[cr]=zi(n),Fr(t,"change",()=>{const r=t._modelValue,s=Vw(t),i=t.checked,o=t[cr];if(le(r)){const a=fv(r,s),c=a!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const l=[...r];l.splice(a,1),o(l)}}else if(Ju(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(Dw(t,i))})},mounted:Rg,beforeUpdate(t,e,n){t[cr]=zi(n),Rg(t,e,n)}};function Rg(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(le(e))s=fv(e,r.props.value)>-1;else if(Ju(e))s=e.has(r.props.value);else{if(e===n)return;s=Ui(e,Dw(t,!0))}t.checked!==s&&(t.checked=s)}const d2={created(t,{value:e},n){t.checked=Ui(e,n.props.value),t[cr]=zi(n),Fr(t,"change",()=>{t[cr](Vw(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[cr]=zi(r),e!==n&&(t.checked=Ui(e,r.props.value))}};function Vw(t){return"_value"in t?t._value:t.value}function Dw(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Nw=vt({patchProp:GS},bS);let ma,Sg=!1;function WS(){return ma||(ma=nS(Nw))}function QS(){return ma=Sg?ma:rS(Nw),Sg=!0,ma}const JS=((...t)=>{const e=WS().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Ow(r);if(!s)return;const i=e._component;!de(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,kw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e}),YS=((...t)=>{const e=QS().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Ow(r);if(s)return n(s,!0,kw(s))},e});function kw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ow(t){return Qe(t)?document.querySelector(t):t}const XS=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,ZS=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,e0=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function t0(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){n0(t);return}return e}function n0(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function wu(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!e0.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(XS.test(t)||ZS.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,t0)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const r0=/#/g,s0=/&/g,i0=/\//g,o0=/=/g,vd=/\+/g,a0=/%5e/gi,c0=/%60/gi,u0=/%7c/gi,l0=/%20/gi;function h0(t){return encodeURI(""+t).replace(u0,"|")}function tf(t){return h0(typeof t=="string"?t:JSON.stringify(t)).replace(vd,"%2B").replace(l0,"+").replace(r0,"%23").replace(s0,"%26").replace(c0,"`").replace(a0,"^").replace(i0,"%2F")}function mh(t){return tf(t).replace(o0,"%3D")}function Eu(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function f0(t){return Eu(t.replace(vd," "))}function d0(t){return Eu(t.replace(vd," "))}function Mw(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=f0(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=d0(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function p0(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${mh(t)}=${tf(n)}`).join("&"):`${mh(t)}=${tf(e)}`:mh(t)}function m0(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>p0(e,t[e])).filter(Boolean).join("&")}const g0=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,_0=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,y0=/^([/\\]\s*){2,}[^/\\]/,v0=/^[\s\0]*(blob|data|javascript|vbscript):$/i,w0=/\/$|\/\?|\/#/,E0=/^\.?\//;function ti(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?g0.test(t):_0.test(t)||(e.acceptRelative?y0.test(t):!1)}function T0(t){return!!t&&v0.test(t)}function nf(t="",e){return e?w0.test(t):t.endsWith("/")}function Tu(t="",e){if(!e)return(nf(t)?t.slice(0,-1):t)||"/";if(!nf(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");s!==-1&&(n=t.slice(0,s),r=t.slice(s));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function I0(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(nf(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");if(s!==-1&&(n=t.slice(0,s),r=t.slice(s),!n))return r;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function b0(t,e){if(Fw(e)||ti(t))return t;const n=Tu(e);return t.startsWith(n)?t:wd(n,t)}function Pg(t,e){if(Fw(e))return t;const n=Tu(e);if(!t.startsWith(n))return t;const r=t.slice(n.length);return r[0]==="/"?r:"/"+r}function Lw(t,e){const n=jw(t),r={...Mw(n.search),...e};return n.search=m0(r),S0(n)}function Fw(t){return!t||t==="/"}function A0(t){return t&&t!=="/"}function wd(t,...e){let n=t||"";for(const r of e.filter(s=>A0(s)))if(n){const s=r.replace(E0,"");n=I0(n)+s}else n=r;return n}function Bw(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),r=[];let s=0;for(const o of n)if(!(!o||o==="/")){for(const[a,c]of o.split(e).entries())if(!(!c||c===".")){if(c===".."){if(r.length===1&&ti(r[0]))continue;r.pop(),s--;continue}if(a===1&&r[r.length-1]?.endsWith(":/")){r[r.length-1]+="/"+c;continue}r.push(c),s++}}let i=r.join("/");return s>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function R0(t,e){return Eu(Tu(t))===Eu(Tu(e))}const Uw=Symbol.for("ufo:protocolRelative");function jw(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,p=""]=n;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!ti(t,{acceptRelative:!0}))return Cg(t);const[,r="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:l,hash:h}=Cg(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:l,hash:h,[Uw]:!r}}function Cg(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function S0(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[Uw]?(t.protocol||"")+"//":"")+s+i+e+n+r}class P0 extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function C0(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",r=t.request?.url||String(t.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new P0(o,t.error?{cause:t.error}:void 0);for(const c of["request","options","response"])Object.defineProperty(a,c,{get(){return t[c]}});for(const[c,l]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,c,{get(){return t.response&&t.response[l]}});return a}const x0=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function xg(t="GET"){return x0.has(t.toUpperCase())}function V0(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const D0=new Set(["image/svg","application/xml","application/xhtml","application/html"]),N0=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function k0(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return N0.test(e)?"json":D0.has(e)||e.startsWith("text/")?"text":"blob"}function O0(t,e,n,r){const s=M0(e?.headers??t?.headers,n?.headers,r);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:s}}function M0(t,e,n){if(!e)return new n(t);const r=new n(e);if(t)for(const[s,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))r.set(s,i);return r}async function Fc(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const L0=new Set([408,409,425,429,500,502,503,504]),F0=new Set([101,204,205,304]);function $w(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function s(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let h;typeof a.options.retry=="number"?h=a.options.retry:h=xg(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):L0.has(f))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(m=>setTimeout(m,p)),i(a.request,{...a.options,retry:h-1})}}const l=C0(a);throw Error.captureStackTrace&&Error.captureStackTrace(l,i),l}const i=async function(c,l={}){const h={request:c,options:O0(c,l,t.defaults,n),response:void 0,error:void 0};h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&await Fc(h,h.options.onRequest),typeof h.request=="string"&&(h.options.baseURL&&(h.request=b0(h.request,h.options.baseURL)),h.options.query&&(h.request=Lw(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&xg(h.options.method)&&(V0(h.options.body)?(h.options.body=typeof h.options.body=="string"?h.options.body:JSON.stringify(h.options.body),h.options.headers=new n(h.options.headers||{}),h.options.headers.has("content-type")||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")):("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half")));let f;if(!h.options.signal&&h.options.timeout){const m=new r;f=setTimeout(()=>{const y=new Error("[TimeoutError]: The operation was aborted due to timeout");y.name="TimeoutError",y.code=23,m.abort(y)},h.options.timeout),h.options.signal=m.signal}try{h.response=await e(h.request,h.options)}catch(m){return h.error=m,h.options.onRequestError&&await Fc(h,h.options.onRequestError),await s(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!F0.has(h.response.status)&&h.options.method!=="HEAD"){const m=(h.options.parseResponse?"json":h.options.responseType)||k0(h.response.headers.get("content-type")||"");switch(m){case"json":{const y=await h.response.text(),w=h.options.parseResponse||wu;h.response._data=w(y);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[m]()}}return h.options.onResponse&&await Fc(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await Fc(h,h.options.onResponseError),await s(h)):h.response},o=async function(c,l){return(await i(c,l))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},c={})=>$w({...t,...c,defaults:{...t.defaults,...c.defaults,...a}}),o}const Iu=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),B0=Iu.fetch?(...t)=>Iu.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),U0=Iu.Headers,j0=Iu.AbortController,$0=$w({fetch:B0,Headers:U0,AbortController:j0}),q0=$0,H0=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,Ed=()=>H0().app,G0=()=>Ed().baseURL,K0=()=>Ed().buildAssetsDir,Td=(...t)=>Bw(qw(),K0(),...t),qw=(...t)=>{const e=Ed(),n=e.cdnURL||e.baseURL;return t.length?Bw(n,...t):n};globalThis.__buildAssetsURL=Td,globalThis.__publicAssetsURL=qw;globalThis.$fetch||(globalThis.$fetch=q0.create({baseURL:G0()}));"global"in globalThis||(globalThis.global=globalThis);function rf(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?rf(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const z0={run:t=>t()},W0=()=>z0,Hw=typeof console.createTask<"u"?console.createTask:W0;function Q0(t,e){const n=e.shift(),r=Hw(n);return t.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function J0(t,e){const n=e.shift(),r=Hw(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}function gh(t,e){for(const n of[...t])n(e)}class Y0{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=rf(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const n=rf(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(Q0,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(J0,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&gh(this._before,s);const i=e(n in this._hooks?[...this._hooks[n]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&gh(this._after,s)}):(this._after&&s&&gh(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function Gw(){return new Y0}function X0(t={}){let e,n=!1;const r=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||r(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{r(o),e=o;try{return s?s.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const c=()=>{e=o},l=()=>e===o?c:void 0;sf.add(l);try{const h=s?s.run(o,a):a();return n||(e=void 0),await h}finally{sf.delete(l)}}}}function Z0(t={}){const e={};return{get(n,r={}){return e[n]||(e[n]=X0({...t,...r})),e[n]}}}const bu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Vg="__unctx__",eP=bu[Vg]||(bu[Vg]=Z0()),tP=(t,e={})=>eP.get(t,e),Dg="__unctx_async_handlers__",sf=bu[Dg]||(bu[Dg]=new Set);function Li(t){const e=[];for(const s of sf){const i=s();i&&e.push(i)}const n=()=>{for(const s of e)s()};let r=t();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const nP=!1,Ng=!1,rP=!1,kg={id:"__nuxt-loader"},p2={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},sP="#__nuxt",Kw="nuxt-app",Og=36e5,iP="vite:preloadError";function zw(t=Kw){return tP(t,{asyncContext:!1})}const oP="__nuxt_plugin";function aP(t){let e=0;const n={_id:t.id||Kw||"nuxt-app",_scope:gv(),provide:void 0,versions:{get nuxt(){return"4.2.0"},get vue(){return n.vueApp.version}},payload:Bn({...t.ssrContext?.payload||{},data:Bn({}),state:gr({}),once:new Set,_errors:Bn({})}),static:{data:{}},runWithContext(s){return n._scope.active&&!_v()?n._scope.run(()=>Mg(n,s)):Mg(n,s)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let s=!1;return()=>{if(!s&&(s=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Bn({}),_payloadRevivers:{},...t};{const s=window.__NUXT__;if(s)for(const i in s)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],s[i]);break;default:n.payload[i]=s[i]}}n.hooks=Gw(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(s,i)=>{const o="$"+s;Bc(n,o,i),Bc(n.vueApp.config.globalProperties,o,i)},Bc(n.vueApp,"$nuxt",n),Bc(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(iP,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=dt;const s=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",s)}const r=n.payload.config;return n.provide("config",r),n}function cP(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function uP(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}}async function lP(t,e){const n=new Set,r=[],s=[];let i,o=0;async function a(c){const l=c.dependsOn?.filter(h=>e.some(f=>f._name===h)&&!n.has(h))??[];if(l.length>0)r.push([new Set(l),c]);else{const h=uP(t,c).then(async()=>{c._name&&(n.add(c._name),await Promise.all(r.map(async([f,p])=>{f.has(c._name)&&(f.delete(c._name),f.size===0&&(o++,await a(p)))})))}).catch(f=>{if(!c.parallel&&!t.payload.error)throw f;i||=f});c.parallel?s.push(h):await h}}for(const c of e)cP(t,c);for(const c of e)await a(c);if(await Promise.all(s),o)for(let c=0;c<o;c++)await Promise.all(s);if(i)throw t.payload.error||i}function Qn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[oP]:!0,_name:e})}function Mg(t,e,n){const r=()=>e();return zw(t._id).set(t),t.vueApp.runWithContext(r)}function hP(t){let e;return hd()&&(e=To()?.appContext.app.$nuxt),e||=zw(t).tryUse(),e||null}function dt(t){const e=hP(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function ul(t){return dt().$config}function Bc(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function fP(t,e){return{ctx:{table:t},matchAll:n=>Qw(n,t)}}function Ww(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([r,s])=>[r,Ww(s)])):new Map(Object.entries(t[n]));return e}function dP(t){return fP(Ww(t))}function Qw(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const r=[];for(const[i,o]of Lg(e.wildcard))(t===i||t.startsWith(i+"/"))&&r.push(o);for(const[i,o]of Lg(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");r.push(...Qw(a,o))}const s=e.static.get(t);return s&&r.push(s),r.filter(Boolean)}function Lg(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function _h(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function of(t,e,n=".",r){if(!_h(e))return of(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:_h(o)&&_h(s[i])?s[i]=of(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function pP(t){return(...e)=>e.reduce((n,r)=>of(n,r,"",t),{})}const Jw=pP();function mP(t,e){try{return e in t}catch{return!1}}class Fg extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:af(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=Yw(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function gP(t){if(typeof t=="string")return new Fg(t);if(_P(t))return t;const e=new Fg(t.message??t.statusMessage??"",{cause:t.cause||t});if(mP(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=af(t.statusCode,e.statusCode):t.status&&(e.statusCode=af(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;Yw(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function _P(t){return t?.constructor?.__h3_error__===!0}const yP=/[^\u0009\u0020-\u007E]/g;function Yw(t=""){return t.replace(yP,"")}function af(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const Xw=Symbol("layout-meta"),qs=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const un=()=>dt()?.$router,ll=()=>hd()?kt(qs,dt()._route):dt()._route;const vP=()=>{try{if(dt()._processingMiddleware)return!0}catch{return!1}return!1},m2=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?wP(t):un().resolve(t).href;if(e?.open){const{target:c="_blank",windowFeatures:l={}}=e.open,h=[];for(const[f,p]of Object.entries(l))p!==void 0&&h.push(`${f.toLowerCase()}=${p}`);return open(n,c,h.join(", ")),Promise.resolve()}const r=ti(n,{acceptRelative:!0}),s=e?.external||r;if(s){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(n,window.location.href);if(c&&T0(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const i=vP();if(!s&&i){if(e?.replace){if(typeof t=="string"){const{pathname:c,search:l,hash:h}=jw(t);return{path:c,...l&&{query:Mw(l)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=un(),a=dt();return s?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function wP(t){return Lw(t.path||"",t.query||{})+(t.hash||"")}const Zw="__nuxt_error",hl=()=>iR(dt().payload,"error"),bs=t=>{const e=Us(t);try{const n=hl();dt().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},EP=async(t={})=>{const e=dt(),n=hl();e.callHook("app:error:cleared",t),t.redirect&&await un().replace(t.redirect),n.value=void 0},eE=t=>!!t&&typeof t=="object"&&Zw in t,Us=t=>{const e=gP(t);return Object.defineProperty(e,Zw,{value:!0,configurable:!1,writable:!1}),e};function TP(t){const e=bP(t),n=new ArrayBuffer(e.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return n}const IP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function bP(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,r=0;for(let s=0;s<t.length;s++)n<<=6,n|=IP.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,e+=String.fromCharCode(n)):r===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const AP=-1,RP=-2,SP=-3,PP=-4,CP=-5,xP=-6;function VP(t,e){return DP(JSON.parse(t),e)}function DP(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);function s(i,o=!1){if(i===AP)return;if(i===SP)return NaN;if(i===PP)return 1/0;if(i===CP)return-1/0;if(i===xP)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in r)return r[i];const a=n[i];if(!a||typeof a!="object")r[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],l=e?.[c];if(l){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),r[i]=l(s(h))}switch(c){case"Date":r[i]=new Date(a[1]);break;case"Set":const h=new Set;r[i]=h;for(let m=1;m<a.length;m+=1)h.add(s(a[m]));break;case"Map":const f=new Map;r[i]=f;for(let m=1;m<a.length;m+=2)f.set(s(a[m]),s(a[m+1]));break;case"RegExp":r[i]=new RegExp(a[1],a[2]);break;case"Object":r[i]=Object(a[1]);break;case"BigInt":r[i]=BigInt(a[1]);break;case"null":const p=Object.create(null);r[i]=p;for(let m=1;m<a.length;m+=2)p[a[m]]=s(a[m+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const m=globalThis[c],y=new m(s(a[1]));r[i]=a[2]!==void 0?y.subarray(a[2],a[3]):y;break}case"ArrayBuffer":{const m=a[1],y=TP(m);r[i]=y;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const m=c.slice(9);r[i]=Temporal[m].from(a[1]);break}case"URL":{const m=new URL(a[1]);r[i]=m;break}case"URLSearchParams":{const m=new URLSearchParams(a[1]);r[i]=m;break}default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);r[i]=c;for(let l=0;l<a.length;l+=1){const h=a[l];h!==RP&&(c[l]=s(h))}}else{const c={};r[i]=c;for(const l in a){if(l==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[l];c[l]=s(h)}}return r[i]}return s(0)}const NP=new Set(["link","style","script","noscript"]),kP=new Set(["title","titleTemplate","script","style","noscript"]),Bg=new Set(["base","meta","link","style","script","noscript"]),OP=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),MP=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),LP=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),FP=new Set(["templateParams","htmlAttrs","bodyAttrs"]),BP=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),UP=["name","property","http-equiv"],jP=new Set(["viewport","description","keywords","robots"]);function tE(t){const e=t.split(":");return e.length?BP.has(e[1]):!1}function cf(t){const{props:e,tag:n}=t;if(MP.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const r of UP)if(e[r]!==void 0){const s=e[r],i=s.includes(":"),o=jP.has(s),c=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${s}${c}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(kP.has(n)){const r=t.textContent||t.innerHTML;if(r)return`${n}:content:${r}`}}function Ug(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function Au(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());let s;if(e&&(s=e(n,t)),Array.isArray(s))return s.map(i=>Au(i,e));if(s?.constructor===Object){const i={};for(const o of Object.keys(s))i[o]=Au(s[o],e,o);return i}return s}function $P(t,e){const n=t==="style"?new Map:new Set;function r(s){const i=s.trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(c=>c.trim());o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(r):r(e):Array.isArray(e)?e.forEach(s=>r(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{i&&i!=="false"&&(t==="style"?n.set(s.trim(),i):r(s))}),n}function nE(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,r])=>{if(r===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=$P(n,r);return}if(LP.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof r=="object"){let o=e.type;if(e.type||(o="application/json"),!o?.endsWith("json")&&o!=="speculationrules")return;e.type=o,t.props.type=o,t[n]=JSON.stringify(r)}else t[n]=r;return}const s=String(r),i=n.startsWith("data-");s==="true"||s===""?t.props[n]=i?s:!0:!r&&i&&s==="false"?t.props[n]="false":r!==void 0&&(t.props[n]=r)}),t):t}function qP(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},r=nE({tag:t,props:{}},n);return r.key&&NP.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function HP(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(s,i)=>{for(let o=0;o<e.length;o++)i=e[o](s,i);return i};t=n(void 0,t);const r=[];return t=Au(t,n),Object.entries(t||{}).forEach(([s,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])r.push(qP(s,o))}),r.flat()}const jg=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,$g={base:-10,title:10},GP={critical:-8,high:-1,low:2},qg={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},KP=/@import/,Qo=t=>t===""||t===!0;function zP(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const r=GP[e.tagPriority]||0,s=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:qg;if(e.tag in $g)n=$g[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=qg.meta[i])}else e.tag==="link"&&e.props.rel?n=s.link[e.props.rel]:e.tag==="script"?Qo(e.props.async)?n=s.script.async:e.props.src&&!Qo(e.props.defer)&&!Qo(e.props.async)&&e.props.type!=="module"&&!e.props.type?.endsWith("json")?n=s.script.sync:Qo(e.props.defer)&&e.props.src&&!Qo(e.props.async)&&(n=s.script.defer):e.tag==="style"&&(n=e.innerHTML&&KP.test(e.innerHTML)?s.style.imported:s.style.sync);return(n||100)+r}function Hg(t,e){const n=typeof e=="function"?e(t):e,r=n.key||String(t.plugins.size+1);t.plugins.get(r)||(t.plugins.set(r,n),t.hooks.addHooks(n.hooks||{}))}function WP(t={}){const e=Gw();e.addHooks(t.hooks||{});const n=!t.document,r=new Map,s=new Map,i=new Set,o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:r,headEntries(){return[...r.values()]},use:a=>Hg(o,a),push(a,c){const l={...c||{}};delete l.head;const h=l._index??o._entryCount++,f={_i:h,input:a,options:l},p={_poll(m=!1){o.dirty=!0,!m&&i.add(h),e.callHook("entries:updated",o)},dispose(){r.delete(h)&&o.invalidate()},patch(m){(!l.mode||l.mode==="server"&&n||l.mode==="client"&&!n)&&(f.input=m,r.set(h,f),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const p=i.values().next().value;i.delete(p);const m=r.get(p);if(m){const y={tags:HP(m.input,t.propResolvers||[]).map(w=>Object.assign(w,m.options)),entry:m};await e.callHook("entries:normalize",y),m._tags=y.tags.map((w,C)=>(w._w=zP(o,w),w._p=(m._i<<10)+C,w._d=cf(w),w))}}let c=!1;a.entries.flatMap(p=>(p._tags||[]).map(m=>({...m,props:{...m.props}}))).sort(jg).reduce((p,m)=>{const y=String(m._d||m._p);if(!p.has(y))return p.set(y,m);const w=p.get(y);if((m?.tagDuplicateStrategy||(FP.has(m.tag)?"merge":null)||(m.key&&m.key===w.key?"merge":null))==="merge"){const N={...w.props};Object.entries(m.props).forEach(([D,v])=>N[D]=D==="style"?new Map([...w.props.style||new Map,...v]):D==="class"?new Set([...w.props.class||new Set,...v]):v),p.set(y,{...m,props:N})}else m._p>>10===w._p>>10&&m.tag==="meta"&&tE(y)?(p.set(y,Object.assign([...Array.isArray(w)?w:[w],m],m)),c=!0):(m._w===w._w?m._p>w._p:m?._w<w?._w)&&p.set(y,m);return p},a.tagMap);const l=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=l?.textContent,h){const p=h?.textContent;if(o._titleTemplate=p,p){let m=typeof p=="function"?p(l?.textContent):p;typeof m=="string"&&!o.plugins.has("template-params")&&(m=m.replace("%s",l?.textContent||"")),l?m===null?a.tagMap.delete("title"):a.tagMap.set("title",{...l,textContent:m}):(h.tag="title",h.textContent=m)}}a.tags=Array.from(a.tagMap.values()),c&&(a.tags=a.tags.flat().sort(jg)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const f=[];for(const p of a.tags){const{innerHTML:m,tag:y,props:w}=p;if(OP.has(y)&&!(Object.keys(w).length===0&&!p.innerHTML&&!p.textContent)&&!(y==="meta"&&!w.content&&!w["http-equiv"]&&!w.charset)){if(y==="script"&&m){if(w.type?.endsWith("json")){const C=typeof m=="string"?m:JSON.stringify(m);p.innerHTML=C.replace(/</g,"\\u003C")}else typeof m=="string"&&(p.innerHTML=m.replace(new RegExp(`</${y}`,"g"),`<\\/${y}`));p._d=cf(p)}f.push(p)}}return f},invalidate(){for(const a of r.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>Hg(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const QP=(t,e)=>at(e)?tR(e):e,rE="usehead";function JP(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(rE,t)}}.install}function YP(){if(hd()){const t=kt(rE);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function g2(t,e={}){const n=e.head||YP();return n.ssr?n.push(t||{},e):XP(n,t,e)}function XP(t,e,n={}){const r=or(!1);let s;return mR(()=>{const o=r.value?{}:Au(e,QP);s?s.patch(o):s=t.push(o,n)}),To()&&(rc(()=>{s.dispose()}),Kv(()=>{r.value=!0}),Gv(()=>{r.value=!1})),s}let Jc,Yc;function ZP(){return Jc=$fetch(Td(`builds/meta/${ul().app.buildId}.json`),{responseType:"json"}),Jc.then(t=>{Yc=dP(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),Jc}function fl(){return Jc||ZP()}async function Id(t){const e=typeof t=="string"?t:t.path;if(await fl(),!Yc)return console.error("[nuxt] Error creating app manifest matcher.",Yc),{};try{return Jw({},...Yc.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function Gg(t,e={}){if(!await iE(t))return null;const r=await tC(t,e);return await sE(r)||null}const eC="_payload.json";async function tC(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||ti(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const r=ul(),s=e.hash||(e.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await iE(t)?i:r.app.baseURL;return wd(o,n.pathname,eC+(s?`?${s}`:""))}async function sE(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(oE));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function iE(t=ll().path){const e=dt();return t=t==="/"?t:t.replace(/\/$/,""),(await fl()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const r=await Id({path:t});return!!r.prerender&&!r.redirect})}let Es=null;async function nC(){if(Es)return Es;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await oE(t.textContent||""),n=t.dataset.src?await sE(t.dataset.src):void 0;return Es={...e,...n,...window.__NUXT__},Es.config?.public&&(Es.config.public=gr(Es.config.public)),Es}async function oE(t){return await VP(t,dt()._payloadRevivers)}function rC(t,e){dt()._payloadRevivers[t]=e}const sC=[["NuxtError",t=>Us(t)],["EmptyShallowRef",t=>$i(t==="_"?void 0:t==="0n"?BigInt(0):wu(t))],["EmptyRef",t=>or(t==="_"?void 0:t==="0n"?BigInt(0):wu(t))],["ShallowRef",t=>$i(t)],["ShallowReactive",t=>Bn(t)],["Ref",t=>or(t)],["Reactive",t=>gr(t)]],iC=Qn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[r,s]of sC)rC(r,s);Object.assign(t.payload,([e,n]=Li(()=>t.runWithContext(nC)),e=await e,n(),e)),delete window.__NUXT__}});async function bd(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{const i=new Map,o=new Promise(m=>{t.resolveTags().then(y=>{m(y.map(w=>{const C=i.get(w._d)||0,N={tag:w,id:(C?`${w._d}:${C}`:w._d)||Ug(w),shouldRender:!0};return w._d&&tE(w._d)&&i.set(w._d,C+1),N}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const m of["body","head"]){const y=n[m]?.children;for(const w of y){const C=w.tagName.toLowerCase();if(!Bg.has(C))continue;const N=nE({tag:C,props:{}},{innerHTML:w.innerHTML,...w.getAttributeNames().reduce((D,v)=>(D[v]=w.getAttribute(v),D),{})||{}});if(N.key=w.getAttribute("data-hid")||void 0,N._d=cf(N)||Ug(N),a.elMap.has(N._d)){let D=1,v=N._d;for(;a.elMap.has(v);)v=`${N._d}:${D++}`;a.elMap.set(v,w)}else a.elMap.set(N._d,w)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function c(m,y,w){const C=`${m}:${y}`;a.sideEffects[C]=w,delete a.pendingSideEffects[C]}function l({id:m,$el:y,tag:w}){const C=w.tag.endsWith("Attrs");a.elMap.set(m,y),C||(w.textContent&&w.textContent!==y.textContent&&(y.textContent=w.textContent),w.innerHTML&&w.innerHTML!==y.innerHTML&&(y.innerHTML=w.innerHTML),c(m,"el",()=>{y?.remove(),a.elMap.delete(m)}));for(const N in w.props){if(!Object.prototype.hasOwnProperty.call(w.props,N))continue;const D=w.props[N];if(N.startsWith("on")&&typeof D=="function"){const x=y?.dataset;if(x&&x[`${N}fired`]){const k=N.slice(0,-5);D.call(y,new Event(k.substring(2)))}y.getAttribute(`data-${N}`)!==""&&((w.tag==="bodyAttrs"?n.defaultView:y).addEventListener(N.substring(2),D.bind(y)),y.setAttribute(`data-${N}`,""));continue}const v=`attr:${N}`;if(N==="class"){if(!D)continue;for(const x of D)C&&c(m,`${v}:${x}`,()=>y.classList.remove(x)),!y.classList.contains(x)&&y.classList.add(x)}else if(N==="style"){if(!D)continue;for(const[x,k]of D)c(m,`${v}:${x}`,()=>{y.style.removeProperty(x)}),y.style.setProperty(x,k)}else D!==!1&&D!==null&&(y.getAttribute(N)!==D&&y.setAttribute(N,D===!0?"":String(D)),C&&c(m,v,()=>y.removeAttribute(N)))}}const h=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const m of p){const{tag:y,shouldRender:w,id:C}=m;if(w){if(y.tag==="title"){n.title=y.textContent,c("title","",()=>n.title=a.title);continue}m.$el=m.$el||a.elMap.get(C),m.$el?l(m):Bg.has(y.tag)&&h.push(m)}}for(const m of h){const y=m.tag.tagPosition||"head";m.$el=n.createElement(m.tag.tag),l(m),f[y]=f[y]||n.createDocumentFragment(),f[y].appendChild(m.$el)}for(const m of p)await t.hooks.callHook("dom:renderTag",m,n,c);f.head&&n.head.appendChild(f.head),f.bodyOpen&&n.body.insertBefore(f.bodyOpen,n.body.firstChild),f.bodyClose&&n.body.appendChild(f.bodyClose);for(const m in a.pendingSideEffects)a.pendingSideEffects[m]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function oC(t={}){const e=t.domOptions?.render||bd;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return WP({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function aC(t,e){let n=0;return()=>{const r=++n;e(()=>{n===r&&t()})}}function cC(t={}){const e=oC({domOptions:{render:aC(()=>bd(e),n=>setTimeout(n,0))},...t});return e.install=JP(e),e}const uC={disableDefaults:!0},lC=Qn({name:"nuxt:head",enforce:"pre",setup(t){const e=cC(uC);t.vueApp.use(e);{let n=!0;const r=async()=>{n=!1,await bd(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||r()}),t.hooks.hook("app:error",r),t.hooks.hook("app:suspense:resolve",r)}}});function hC(){return aE().__VUE_DEVTOOLS_GLOBAL_HOOK__}function aE(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const fC=typeof Proxy=="function",dC="devtools-plugin:setup",pC="plugin:settings:set";let pi,uf;function mC(){var t;return pi!==void 0||(typeof window<"u"&&window.performance?(pi=!0,uf=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(pi=!0,uf=globalThis.perf_hooks.performance):pi=!1),pi}function gC(){return mC()?uf.now():Date.now()}class _C{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),a=JSON.parse(o);Object.assign(i,a)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return gC()}},n&&n.on(pC,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...c)=>{this.onQueue.push({method:a,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...c)=>(this.targetQueue.push({method:a,args:c,resolve:()=>{}}),this.fallbacks[a](...c)):(...c)=>new Promise(l=>{this.targetQueue.push({method:a,args:c,resolve:l})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function yC(t,e){const n=t,r=aE(),s=hC(),i=fC&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(dC,t,e);else{const o=i?new _C(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Ii=typeof document<"u";function cE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function vC(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&cE(t.default)}const Ve=Object.assign;function yh(t,e){const n={};for(const r in e){const s=e[r];n[r]=Pn(s)?s.map(t):t(s)}return n}const ga=()=>{},Pn=Array.isArray;function Kg(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const uE=/#/g,wC=/&/g,EC=/\//g,TC=/=/g,IC=/\?/g,lE=/\+/g,bC=/%5B/g,AC=/%5D/g,hE=/%5E/g,RC=/%60/g,fE=/%7B/g,SC=/%7C/g,dE=/%7D/g,PC=/%20/g;function Ad(t){return t==null?"":encodeURI(""+t).replace(SC,"|").replace(bC,"[").replace(AC,"]")}function CC(t){return Ad(t).replace(fE,"{").replace(dE,"}").replace(hE,"^")}function lf(t){return Ad(t).replace(lE,"%2B").replace(PC,"+").replace(uE,"%23").replace(wC,"%26").replace(RC,"`").replace(fE,"{").replace(dE,"}").replace(hE,"^")}function xC(t){return lf(t).replace(TC,"%3D")}function VC(t){return Ad(t).replace(uE,"%23").replace(IC,"%3F")}function DC(t){return VC(t).replace(EC,"%2F")}function Da(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const NC=/\/$/,kC=t=>t.replace(NC,"");function vh(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return c=a>=0&&c>a?-1:c,c>=0&&(r=e.slice(0,c),i=e.slice(c,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=FC(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Da(o)}}function OC(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function zg(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function MC(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Wi(e.matched[r],n.matched[s])&&pE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Wi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function pE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!LC(t[n],e[n]))return!1;return!0}function LC(t,e){return Pn(t)?Wg(t,e):Pn(e)?Wg(e,t):t===e}function Wg(t,e){return Pn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function FC(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const dn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let hf=(function(t){return t.pop="pop",t.push="push",t})({}),wh=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function BC(t){if(!t)if(Ii){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),kC(t)}const UC=/^[^#]+#/;function jC(t,e){return t.replace(UC,"#")+e}function $C(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const dl=()=>({left:window.scrollX,top:window.scrollY});function qC(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=$C(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Qg(t,e){return(history.state?history.state.position-e:-1)+t}const ff=new Map;function HC(t,e){ff.set(t,e)}function GC(t){const e=ff.get(t);return ff.delete(t),e}function KC(t){return typeof t=="string"||t&&typeof t=="object"}function mE(t){return typeof t=="string"||typeof t=="symbol"}let Ye=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const gE=Symbol("");Ye.MATCHER_NOT_FOUND+"",Ye.NAVIGATION_GUARD_REDIRECT+"",Ye.NAVIGATION_ABORTED+"",Ye.NAVIGATION_CANCELLED+"",Ye.NAVIGATION_DUPLICATED+"";function Qi(t,e){return Ve(new Error,{type:t,[gE]:!0},e)}function er(t,e){return t instanceof Error&&gE in t&&(e==null||!!(t.type&e))}const zC=["params","query","hash"];function WC(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of zC)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function QC(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(lE," "),i=s.indexOf("="),o=Da(i<0?s:s.slice(0,i)),a=i<0?null:Da(s.slice(i+1));if(o in e){let c=e[o];Pn(c)||(c=e[o]=[c]),c.push(a)}else e[o]=a}return e}function Jg(t){let e="";for(let n in t){const r=t[n];if(n=xC(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Pn(r)?r.map(s=>s&&lf(s)):[r&&lf(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function JC(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Pn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const YC=Symbol(""),Yg=Symbol(""),Rd=Symbol(""),Sd=Symbol(""),df=Symbol("");function Jo(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Lr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const l=p=>{p===!1?c(Qi(Ye.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?c(p):KC(p)?c(Qi(Ye.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(r&&r.instances[s],e,n,l));let f=Promise.resolve(h);t.length<3&&(f=f.then(l)),f.catch(p=>c(p))})}function Eh(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(cE(c)){const l=(c.__vccOpts||c)[e];l&&i.push(Lr(l,n,r,o,a,s))}else{let l=c();i.push(()=>l.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=vC(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Lr(p,n,r,o,a,s)()}))}}return i}function XC(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>Wi(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Wi(l,c))||s.push(c))}return[n,r,s]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ZC=()=>location.protocol+"//"+location.host;function _E(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),zg(a,"")}return zg(n,t)+r+s}function e1(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const m=_E(t,location),y=n.value,w=e.value;let C=0;if(p){if(n.value=m,e.value=p,o&&o===y){o=null;return}C=w?p.position-w.position:0}else r(m);s.forEach(N=>{N(n.value,y,{delta:C,type:hf.pop,direction:C?C>0?wh.forward:wh.back:wh.unknown})})};function c(){o=n.value}function l(p){s.push(p);const m=()=>{const y=s.indexOf(p);y>-1&&s.splice(y,1)};return i.push(m),m}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Ve({},p.state,{scroll:dl()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:c,listen:l,destroy:f}}function Xg(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?dl():null}}function t1(t){const{history:e,location:n}=window,r={value:_E(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:ZC()+t+c;try{e[h?"replaceState":"pushState"](l,"",p),s.value=l}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(c,l){i(c,Ve({},e.state,Xg(s.value.back,c,s.value.forward,!0),l,{position:s.value.position}),!0),r.value=c}function a(c,l){const h=Ve({},s.value,e.state,{forward:c,scroll:dl()});i(h.current,h,!0),i(c,Ve({},Xg(r.value,c,null),{position:h.position+1},l),!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function n1(t){t=BC(t);const e=t1(t),n=e1(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ve({location:"",base:t,go:r,createHref:jC.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Ns=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var ft=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(ft||{});const r1={type:Ns.Static,value:""},s1=/[a-zA-Z0-9_]/;function i1(t){if(!t)return[[]];if(t==="/")return[[r1]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${l}": ${m}`)}let n=ft.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",h="";function f(){l&&(n===ft.Static?i.push({type:Ns.Static,value:l}):n===ft.Param||n===ft.ParamRegExp||n===ft.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Ns.Param,value:l,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function p(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==ft.ParamRegExp){r=n,n=ft.EscapeNext;continue}switch(n){case ft.Static:c==="/"?(l&&f(),o()):c===":"?(f(),n=ft.Param):p();break;case ft.EscapeNext:p(),n=r;break;case ft.Param:c==="("?n=ft.ParamRegExp:s1.test(c)?p():(f(),n=ft.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case ft.ParamRegExp:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=ft.ParamRegExpEnd:h+=c;break;case ft.ParamRegExpEnd:f(),n=ft.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===ft.ParamRegExp&&e(`Unfinished custom RegExp for param "${l}"`),f(),o(),s}const Zg="[^/]+?",o1={sensitive:!1,strict:!1,start:!0,end:!0};var Bt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Bt||{});const a1=/[.+*?^${}()[\]/\\]/g;function c1(t,e){const n=Ve({},o1,e),r=[];let s=n.start?"^":"";const i=[];for(const l of t){const h=l.length?[]:[Bt.Root];n.strict&&!l.length&&(s+="/");for(let f=0;f<l.length;f++){const p=l[f];let m=Bt.Segment+(n.sensitive?Bt.BonusCaseSensitive:0);if(p.type===Ns.Static)f||(s+="/"),s+=p.value.replace(a1,"\\$&"),m+=Bt.Static;else if(p.type===Ns.Param){const{value:y,repeatable:w,optional:C,regexp:N}=p;i.push({name:y,repeatable:w,optional:C});const D=N||Zg;if(D!==Zg){m+=Bt.BonusCustomRegExp;try{`${D}`}catch(x){throw new Error(`Invalid custom RegExp for param "${y}" (${D}): `+x.message)}}let v=w?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;f||(v=C&&l.length<2?`(?:/${v})`:"/"+v),C&&(v+="?"),s+=v,m+=Bt.Dynamic,C&&(m+=Bt.BonusOptional),w&&(m+=Bt.BonusRepeatable),D===".*"&&(m+=Bt.BonusWildcard)}h.push(m)}r.push(h)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=Bt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const h=l.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",y=i[p-1];f[y.name]=m&&y.repeatable?m.split("/"):m}return f}function c(l){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const m of p)if(m.type===Ns.Static)h+=m.value;else if(m.type===Ns.Param){const{value:y,repeatable:w,optional:C}=m,N=y in l?l[y]:"";if(Pn(N)&&!w)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const D=Pn(N)?N.join("/"):N;if(!D)if(C)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${y}"`);h+=D}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function u1(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Bt.Static+Bt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Bt.Static+Bt.Segment?1:-1:0}function yE(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=u1(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(e_(r))return 1;if(e_(s))return-1}return s.length-r.length}function e_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const l1={strict:!1,end:!0,sensitive:!1};function h1(t,e,n){const r=c1(i1(t.path),n),s=Ve(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function f1(t,e){const n=[],r=new Map;e=Kg(l1,e);function s(f){return r.get(f)}function i(f,p,m){const y=!m,w=n_(f);w.aliasOf=m&&m.record;const C=Kg(e,f),N=[w];if("alias"in f){const x=typeof f.alias=="string"?[f.alias]:f.alias;for(const k of x)N.push(n_(Ve({},w,{components:m?m.record.components:w.components,path:k,aliasOf:m?m.record:w})))}let D,v;for(const x of N){const{path:k}=x;if(p&&k[0]!=="/"){const U=p.record.path,b=U[U.length-1]==="/"?"":"/";x.path=p.record.path+(k&&b+k)}if(D=h1(x,p,C),m?m.alias.push(D):(v=v||D,v!==D&&v.alias.push(D),y&&f.name&&!r_(D)&&o(f.name)),vE(D)&&c(D),w.children){const U=w.children;for(let b=0;b<U.length;b++)i(U[b],D,m&&m.children[b])}m=m||D}return v?()=>{o(v)}:ga}function o(f){if(mE(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function c(f){const p=m1(f,n);n.splice(p,0,f),f.record.name&&!r_(f)&&r.set(f.record.name,f)}function l(f,p){let m,y={},w,C;if("name"in f&&f.name){if(m=r.get(f.name),!m)throw Qi(Ye.MATCHER_NOT_FOUND,{location:f});C=m.record.name,y=Ve(t_(p.params,m.keys.filter(v=>!v.optional).concat(m.parent?m.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),f.params&&t_(f.params,m.keys.map(v=>v.name))),w=m.stringify(y)}else if(f.path!=null)w=f.path,m=n.find(v=>v.re.test(w)),m&&(y=m.parse(w),C=m.record.name);else{if(m=p.name?r.get(p.name):n.find(v=>v.re.test(p.path)),!m)throw Qi(Ye.MATCHER_NOT_FOUND,{location:f,currentLocation:p});C=m.record.name,y=Ve({},p.params,f.params),w=m.stringify(y)}const N=[];let D=m;for(;D;)N.unshift(D.record),D=D.parent;return{name:C,path:w,params:y,matched:N,meta:p1(N)}}t.forEach(f=>i(f));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:l,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function t_(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function n_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:d1(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function d1(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function r_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function p1(t){return t.reduce((e,n)=>Ve(e,n.meta),{})}function m1(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;yE(t,e[i])<0?r=i:n=i+1}const s=g1(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function g1(t){let e=t;for(;e=e.parent;)if(vE(e)&&yE(t,e)===0)return e}function vE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function s_(t){const e=kt(Rd),n=kt(Sd),r=sn(()=>{const c=je(t.to);return e.resolve(c)}),s=sn(()=>{const{matched:c}=r.value,{length:l}=c,h=c[l-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(Wi.bind(null,h));if(p>-1)return p;const m=i_(c[l-2]);return l>1&&i_(h)===m&&f[f.length-1].path!==m?f.findIndex(Wi.bind(null,c[l-2])):p}),i=sn(()=>s.value>-1&&E1(n.params,r.value.params)),o=sn(()=>s.value>-1&&s.value===n.matched.length-1&&pE(n.params,r.value.params));function a(c={}){if(w1(c)){const l=e[je(t.replace)?"replace":"push"](je(t.to)).catch(ga);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:sn(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function _1(t){return t.length===1?t[0]:t}const y1=as({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:s_,setup(t,{slots:e}){const n=gr(s_(t)),{options:r}=kt(Rd),s=sn(()=>({[o_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[o_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&_1(e.default(n));return t.custom?i:Nt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),v1=y1;function w1(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function E1(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Pn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function i_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const o_=(t,e,n)=>t??e??n,T1=as({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=kt(df),s=sn(()=>t.route||r.value),i=kt(Yg,0),o=sn(()=>{let l=je(i);const{matched:h}=s.value;let f;for(;(f=h[l])&&!f.components;)l++;return l}),a=sn(()=>s.value.matched[o.value]);Gr(Yg,sn(()=>o.value+1)),Gr(YC,a),Gr(df,s);const c=or();return Kr(()=>[c.value,a.value,t.name],([l,h,f],[p,m,y])=>{h&&(h.instances[f]=l,m&&m!==h&&l&&l===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),l&&h&&(!m||!Wi(h,m)||!p)&&(h.enterCallbacks[f]||[]).forEach(w=>w(l))},{flush:"post"}),()=>{const l=s.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return a_(n.default,{Component:p,route:l});const m=f.props[h],y=m?m===!0?l.params:typeof m=="function"?m(l):m:null,C=Nt(p,Ve({},y,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return a_(n.default,{Component:C,route:l})||C}}});function a_(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const wE=T1;function I1(t){const e=f1(t.routes,t),n=t.parseQuery||QC,r=t.stringifyQuery||Jg,s=t.history,i=Jo(),o=Jo(),a=Jo(),c=$i(dn);let l=dn;Ii&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=yh.bind(null,$=>""+$),f=yh.bind(null,DC),p=yh.bind(null,Da);function m($,se){let ee,ue;return mE($)?(ee=e.getRecordMatcher($),ue=se):ue=$,e.addRoute(ue,ee)}function y($){const se=e.getRecordMatcher($);se&&e.removeRoute(se)}function w(){return e.getRoutes().map($=>$.record)}function C($){return!!e.getRecordMatcher($)}function N($,se){if(se=Ve({},se||c.value),typeof $=="string"){const V=vh(n,$,se.path),L=e.resolve({path:V.path},se),H=s.createHref(V.fullPath);return Ve(V,L,{params:p(L.params),hash:Da(V.hash),redirectedFrom:void 0,href:H})}let ee;if($.path!=null)ee=Ve({},$,{path:vh(n,$.path,se.path).path});else{const V=Ve({},$.params);for(const L in V)V[L]==null&&delete V[L];ee=Ve({},$,{params:f(V)}),se.params=f(se.params)}const ue=e.resolve(ee,se),ve=$.hash||"";ue.params=h(p(ue.params));const Le=OC(r,Ve({},$,{hash:CC(ve),path:ue.path})),A=s.createHref(Le);return Ve({fullPath:Le,hash:ve,query:r===Jg?JC($.query):$.query||{}},ue,{redirectedFrom:void 0,href:A})}function D($){return typeof $=="string"?vh(n,$,c.value.path):Ve({},$)}function v($,se){if(l!==$)return Qi(Ye.NAVIGATION_CANCELLED,{from:se,to:$})}function x($){return b($)}function k($){return x(Ve(D($),{replace:!0}))}function U($,se){const ee=$.matched[$.matched.length-1];if(ee&&ee.redirect){const{redirect:ue}=ee;let ve=typeof ue=="function"?ue($,se):ue;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=D(ve):{path:ve},ve.params={}),Ve({query:$.query,hash:$.hash,params:ve.path!=null?{}:$.params},ve)}}function b($,se){const ee=l=N($),ue=c.value,ve=$.state,Le=$.force,A=$.replace===!0,V=U(ee,ue);if(V)return b(Ve(D(V),{state:typeof V=="object"?Ve({},ve,V.state):ve,force:Le,replace:A}),se||ee);const L=ee;L.redirectedFrom=se;let H;return!Le&&MC(r,ue,ee)&&(H=Qi(Ye.NAVIGATION_DUPLICATED,{to:L,from:ue}),Zt(ue,ue,!0,!1)),(H?Promise.resolve(H):R(L,ue)).catch(j=>er(j)?er(j,Ye.NAVIGATION_GUARD_REDIRECT)?j:Vn(j):re(j,L,ue)).then(j=>{if(j){if(er(j,Ye.NAVIGATION_GUARD_REDIRECT))return b(Ve({replace:A},D(j.to),{state:typeof j.to=="object"?Ve({},ve,j.to.state):ve,force:Le}),se||L)}else j=S(L,ue,!0,A,ve);return P(L,ue,j),j})}function T($,se){const ee=v($,se);return ee?Promise.reject(ee):Promise.resolve()}function E($){const se=yn.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext($):$()}function R($,se){let ee;const[ue,ve,Le]=XC($,se);ee=Eh(ue.reverse(),"beforeRouteLeave",$,se);for(const V of ue)V.leaveGuards.forEach(L=>{ee.push(Lr(L,$,se))});const A=T.bind(null,$,se);return ee.push(A),St(ee).then(()=>{ee=[];for(const V of i.list())ee.push(Lr(V,$,se));return ee.push(A),St(ee)}).then(()=>{ee=Eh(ve,"beforeRouteUpdate",$,se);for(const V of ve)V.updateGuards.forEach(L=>{ee.push(Lr(L,$,se))});return ee.push(A),St(ee)}).then(()=>{ee=[];for(const V of Le)if(V.beforeEnter)if(Pn(V.beforeEnter))for(const L of V.beforeEnter)ee.push(Lr(L,$,se));else ee.push(Lr(V.beforeEnter,$,se));return ee.push(A),St(ee)}).then(()=>($.matched.forEach(V=>V.enterCallbacks={}),ee=Eh(Le,"beforeRouteEnter",$,se,E),ee.push(A),St(ee))).then(()=>{ee=[];for(const V of o.list())ee.push(Lr(V,$,se));return ee.push(A),St(ee)}).catch(V=>er(V,Ye.NAVIGATION_CANCELLED)?V:Promise.reject(V))}function P($,se,ee){a.list().forEach(ue=>E(()=>ue($,se,ee)))}function S($,se,ee,ue,ve){const Le=v($,se);if(Le)return Le;const A=se===dn,V=Ii?history.state:{};ee&&(ue||A?s.replace($.fullPath,Ve({scroll:A&&V&&V.scroll},ve)):s.push($.fullPath,ve)),c.value=$,Zt($,se,ee,A),Vn()}let I;function fe(){I||(I=s.listen(($,se,ee)=>{if(!vn.listening)return;const ue=N($),ve=U(ue,vn.currentRoute.value);if(ve){b(Ve(ve,{replace:!0,force:!0}),ue).catch(ga);return}l=ue;const Le=c.value;Ii&&HC(Qg(Le.fullPath,ee.delta),dl()),R(ue,Le).catch(A=>er(A,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_CANCELLED)?A:er(A,Ye.NAVIGATION_GUARD_REDIRECT)?(b(Ve(D(A.to),{force:!0}),ue).then(V=>{er(V,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===hf.pop&&s.go(-1,!1)}).catch(ga),Promise.reject()):(ee.delta&&s.go(-ee.delta,!1),re(A,ue,Le))).then(A=>{A=A||S(ue,Le,!1),A&&(ee.delta&&!er(A,Ye.NAVIGATION_CANCELLED)?s.go(-ee.delta,!1):ee.type===hf.pop&&er(A,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),P(ue,Le,A)}).catch(ga)}))}let Te=Jo(),ie=Jo(),pe;function re($,se,ee){Vn($);const ue=ie.list();return ue.length?ue.forEach(ve=>ve($,se,ee)):console.error($),Promise.reject($)}function Ce(){return pe&&c.value!==dn?Promise.resolve():new Promise(($,se)=>{Te.add([$,se])})}function Vn($){return pe||(pe=!$,fe(),Te.list().forEach(([se,ee])=>$?ee($):se()),Te.reset()),$}function Zt($,se,ee,ue){const{scrollBehavior:ve}=t;if(!Ii||!ve)return Promise.resolve();const Le=!ee&&GC(Qg($.fullPath,0))||(ue||!ee)&&history.state&&history.state.scroll||null;return qi().then(()=>ve($,se,Le)).then(A=>A&&qC(A)).catch(A=>re(A,$,se))}const wt=$=>s.go($);let Jn;const yn=new Set,vn={currentRoute:c,listening:!0,addRoute:m,removeRoute:y,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:w,resolve:N,options:t,push:x,replace:k,go:wt,back:()=>wt(-1),forward:()=>wt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ie.add,isReady:Ce,install($){$.component("RouterLink",v1),$.component("RouterView",wE),$.config.globalProperties.$router=vn,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>je(c)}),Ii&&!Jn&&c.value===dn&&(Jn=!0,x(s.location).catch(ue=>{}));const se={};for(const ue in dn)Object.defineProperty(se,ue,{get:()=>c.value[ue],enumerable:!0});$.provide(Rd,vn),$.provide(Sd,Bn(se)),$.provide(df,c);const ee=$.unmount;yn.add($),$.unmount=function(){yn.delete($),yn.size<1&&(l=dn,I&&I(),I=null,c.value=dn,Jn=!1,pe=!1),ee()}}};function St($){return $.reduce((se,ee)=>se.then(()=>E(ee)),Promise.resolve())}return vn}function EE(t){return kt(Sd)}const b1=/(:\w+)\([^)]+\)/g,A1=/(:\w+)[?+*]/g,R1=/:\w+/g,S1=(t,e)=>e.path.replace(b1,"$1").replace(A1,"$1").replace(R1,n=>t.params[n.slice(1)]?.toString()||""),pf=(t,e)=>{const n=t.route.matched.find(s=>s.components?.default===t.Component.type),r=e??n?.meta.key??(n&&S1(t.route,n));return typeof r=="function"?r(t.route):r},P1=(t,e)=>({default:()=>t?Nt(SR,t===!0?{}:t,e):e});function Pd(t){return Array.isArray(t)?t:[t]}const C1="modulepreload",x1=function(t,e){return new URL(t,e).href},c_={},fn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=l(n.map(h=>{if(h=x1(h,r),h in c_)return;c_[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(r)for(let y=o.length-1;y>=0;y--){const w=o[y];if(w.href===h&&(!f||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":C1,f||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((y,w)=>{m.addEventListener("load",y),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Th=[{name:"index",path:"/",component:()=>fn(()=>import("./CV2-DcST.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)},{name:"records-topic",path:"/records/topic",component:()=>fn(()=>import("./9nSlKCSx.js"),__vite__mapDeps([6,1,2,3,7,8,9,10]),import.meta.url)},{name:"users-id",path:"/users/:id()",component:()=>fn(()=>import("./CkXLRlMQ.js"),__vite__mapDeps([11,1,2,4,3,9,12]),import.meta.url)},{name:"records-slow-quiz",path:"/records/slow-quiz",component:()=>fn(()=>import("./CEV5s_as.js"),__vite__mapDeps([13,1,2,7,8,9,14,15]),import.meta.url)},{name:"achievements",path:"/achievements",component:()=>fn(()=>import("./CaiXWy7a.js"),__vite__mapDeps([16,17,4,2,3,18]),import.meta.url)},{name:"records-oneiromancy",path:"/records/oneiromancy",component:()=>fn(()=>import("./BlqwHA0J.js"),__vite__mapDeps([19,1,2,3,7,8,9,20]),import.meta.url)},{name:"categories-id",path:"/categories/:id()",component:()=>fn(()=>import("./Bco-kj8g.js"),__vite__mapDeps([21,17,4,2,3,18]),import.meta.url)},{name:"achievements-id",path:"/achievements/:id()",component:()=>fn(()=>import("./pG6XZ40_.js"),__vite__mapDeps([22,1,2,3,4,23]),import.meta.url)},{name:"records-twenty-questions",path:"/records/twenty-questions",component:()=>fn(()=>import("./rt3IB7wh.js"),__vite__mapDeps([24,1,2,7,14,25]),import.meta.url)}],TE=(t,e)=>({default:()=>t?Nt(SS,t===!0?{}:t,e):e.default?.()}),V1=/(:\w+)\([^)]+\)/g,D1=/(:\w+)[?+*]/g,N1=/:\w+/g;function u_(t){const e=t?.meta.key??t.path.replace(V1,"$1").replace(D1,"$1").replace(N1,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function k1(t,e){return t===e||e===dn?!1:u_(t)!==u_(e)?!0:!t.matched.every((r,s)=>r.components&&r.components.default===e.matched[s]?.components?.default)}const O1={scrollBehavior(t,e,n){const r=dt(),s=un().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:IE(t.hash),behavior:s}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=r._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===dn){a(l_(t,e,n,s));return}r.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(l_(t,e,n,s)))})})}};function IE(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function l_(t,e,n,r){if(n)return n;const s=k1(t,e);return t.hash?{el:t.hash,top:IE(t.hash),behavior:s?r:"instant"}:{left:0,top:0}}const M1={hashMode:!1,scrollBehaviorType:"auto"},Cr={...M1,...O1},L1=async(t,e)=>{let n,r;if(!t.meta?.validate)return;const s=([n,r]=Li(()=>Promise.resolve(t.meta.validate(t))),n=await n,r(),n);if(s===!0)return;const i=Us({fatal:!0,statusCode:s&&s.statusCode||404,statusMessage:s&&s.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},F1=async t=>{let e,n;const r=([e,n]=Li(()=>Id({path:t.path})),e=await e,n(),e);if(r.redirect){const s=r.redirect.includes("#")?r.redirect:r.redirect+t.hash;return ti(s,{acceptRelative:!0})?(window.location.href=s,!1):s}},B1=[L1,F1],mf={};function U1(t,e,n){const{pathname:r,search:s,hash:i}=e,o=t.indexOf("#");if(o>-1){const l=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(l);return h[0]!=="/"&&(h="/"+h),Pg(h,"")}const a=Pg(r,t),c=!n||R0(a,n)?a:n;return c+(c.includes("?")?"":s)+i}const j1=Qn({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,r=ul().app.baseURL;const s=Cr.history?.(r)??n1(r),i=Cr.routes?([e,n]=Li(()=>Cr.routes(Th)),e=await e,n(),e??Th):Th;let o;const a=I1({...Cr,scrollBehavior:(C,N,D)=>{if(N===dn){o=D;return}if(Cr.scrollBehavior){if(a.options.scrollBehavior=Cr.scrollBehavior,"scrollRestoration"in window.history){const v=a.beforeEach(()=>{v(),window.history.scrollRestoration="manual"})}return Cr.scrollBehavior(C,dn,o||D)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const c=$i(a.currentRoute.value);a.afterEach((C,N)=>{c.value=N}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const l=U1(r,window.location,t.payload.path),h=$i(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};t.hook("page:finish",f),a.afterEach((C,N)=>{C.matched[C.matched.length-1]?.components?.default===N.matched[N.matched.length-1]?.components?.default&&f()});const p={};for(const C in h.value)Object.defineProperty(p,C,{get:()=>h.value[C],enumerable:!0});t._route=Bn(p),t._middleware||={global:[],named:{}};const m=hl();a.afterEach(async(C,N,D)=>{delete t._processingMiddleware,!t.isHydrating&&m.value&&await t.runWithContext(EP),D&&await t.callHook("page:loading:end")});try{[e,n]=Li(()=>a.isReady()),await e,n()}catch(C){[e,n]=Li(()=>t.runWithContext(()=>bs(C))),await e,n()}const y=l!==a.currentRoute.value.fullPath?a.resolve(l):a.currentRoute.value;f();const w=t.payload.state._layout;return a.beforeEach(async(C,N)=>{await t.callHook("page:loading:start"),C.meta=gr(C.meta),t.isHydrating&&w&&!Kn(C.meta.layout)&&(C.meta.layout=w),t._processingMiddleware=!0;{const D=new Set([...B1,...t._middleware.global]);for(const v of C.matched){const x=v.meta.middleware;if(x)for(const k of Pd(x))D.add(k)}{const v=await t.runWithContext(()=>Id({path:C.path}));if(v.appMiddleware)for(const x in v.appMiddleware)v.appMiddleware[x]?D.add(x):D.delete(x)}for(const v of D){const x=typeof v=="string"?t._middleware.named[v]||await mf[v]?.().then(k=>k.default||k):v;if(!x)throw new Error(`Unknown route middleware: '${v}'.`);try{const k=await t.runWithContext(()=>x(C,N));if(!t.payload.serverRendered&&t.isHydrating&&(k===!1||k instanceof Error)){const U=k||Us({statusCode:404,statusMessage:`Page Not Found: ${l}`});return await t.runWithContext(()=>bs(U)),!1}if(k===!0)continue;if(k===!1)return k;if(k)return eE(k)&&k.fatal&&await t.runWithContext(()=>bs(k)),k}catch(k){const U=Us(k);return U.fatal&&await t.runWithContext(()=>bs(U)),U}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(C=>{if(C.matched.length===0)return t.runWithContext(()=>bs(Us({statusCode:404,fatal:!1,statusMessage:`Page not found: ${C.fullPath}`,data:{path:C.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in y&&(y.name=void 0),await a.replace({...y,force:!0}),a.options.scrollBehavior=Cr.scrollBehavior}catch(C){await t.runWithContext(()=>bs(C))}}),{provide:{router:a}}}}),h_=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),_2=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),Cd=t=>{const e=dt();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{h_(()=>t())}):h_(()=>t())},$1=Qn({name:"nuxt:payload",setup(t){const e=new Set;un().beforeResolve(async(n,r)=>{if(n.path===r.path)return;const s=await Gg(n.path);if(s){for(const i of e)delete t.static.data[i];for(const i in s.data)i in t.static.data||e.add(i),t.static.data[i]=s.data[i]}}),Cd(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await Gg(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(fl,1e3)})}}),q1=Qn(()=>{const t=un();Cd(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),H1=Qn(t=>{let e;async function n(){let r;try{r=await fl()}catch(s){const i=s;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,Og);try{const s=await $fetch(Td("builds/latest.json")+`?${Date.now()}`);s.id!==r?.id&&(t.hooks.callHook("app:manifest:update",s),e&&clearTimeout(e))}catch{}}Cd(()=>{e=setTimeout(n,Og)})});function G1(t={}){const e=t.path||window.location.pathname;let n={};try{n=wu(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:dt().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const K1=Qn({name:"nuxt:chunk-reload",setup(t){const e=un(),n=ul(),r=new Set;e.beforeEach(()=>{r.clear()}),t.hook("app:chunkError",({error:i})=>{r.add(i)});function s(i){const o=wd(n.app.baseURL,i.fullPath);G1({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{r.has(i)&&s(o)})}}),z1=Qn({name:"nuxt:global-components"}),Ur={default:Gh(()=>fn(()=>import("./D_YvIPFV.js"),__vite__mapDeps([26,3,27]),import.meta.url).then(t=>t.default||t))};function W1(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function Q1(t,e=un()){const{path:n,matched:r}=e.resolve(t);if(!r.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const s=e._preloadPromises||=[];if(s.length>4)return Promise.all(s).then(()=>Q1(t,e));e._routePreloaded.add(n);for(const i of r){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>s.splice(s.indexOf(a)));s.push(a)}await Promise.all(s)}const J1=Qn({name:"nuxt:prefetch",setup(t){const e=un();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const r=n?.meta?.layout;r&&typeof Ur[r]=="function"&&await Ur[r]()})}),t.hooks.hook("link:prefetch",n=>{if(ti(n))return;const r=e.resolve(n);if(!r)return;const s=r.meta.layout;let i=Pd(r.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof mf[o]=="function"&&mf[o]();typeof s=="string"&&s in Ur&&W1(Ur[s])})}});/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var Y1="store";function Io(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function bE(t){return t!==null&&typeof t=="object"}function X1(t){return t&&typeof t.then=="function"}function Z1(t,e){return function(){return t(e)}}function AE(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function RE(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;pl(t,n,[],t._modules.root,!0),xd(t,n,e)}function xd(t,e,n){var r=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},a={},c=gv(!0);c.run(function(){Io(i,function(l,h){o[h]=Z1(l,t),a[h]=sn(function(){return o[h]()}),Object.defineProperty(t.getters,h,{get:function(){return a[h].value},enumerable:!0})})}),t._state=gr({data:e}),t._scope=c,t.strict&&sx(t),r&&n&&t._withCommit(function(){r.data=null}),s&&s.stop()}function pl(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var a=Vd(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit(function(){a[c]=r.state})}var l=r.context=ex(t,o,n);r.forEachMutation(function(h,f){var p=o+f;tx(t,p,h,l)}),r.forEachAction(function(h,f){var p=h.root?f:o+f,m=h.handler||h;nx(t,p,m,l)}),r.forEachGetter(function(h,f){var p=o+f;rx(t,p,h,l)}),r.forEachChild(function(h,f){pl(t,e,n.concat(f),h,s)})}function ex(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,a){var c=Ru(i,o,a),l=c.payload,h=c.options,f=c.type;return(!h||!h.root)&&(f=e+f),t.dispatch(f,l)},commit:r?t.commit:function(i,o,a){var c=Ru(i,o,a),l=c.payload,h=c.options,f=c.type;(!h||!h.root)&&(f=e+f),t.commit(f,l,h)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return SE(t,e)}},state:{get:function(){return Vd(t.state,n)}}}),s}function SE(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function tx(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function nx(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return X1(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):a})}function rx(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function sx(t){Kr(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Vd(t,e){return e.reduce(function(n,r){return n[r]},t)}function Ru(t,e,n){return bE(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var ix="vuex bindings",f_="vuex:mutations",Ih="vuex:actions",mi="vuex",ox=0;function ax(t,e){yC({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[ix]},function(n){n.addTimelineLayer({id:f_,label:"Vuex Mutations",color:d_}),n.addTimelineLayer({id:Ih,label:"Vuex Actions",color:d_}),n.addInspector({id:mi,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===mi)if(r.filter){var s=[];VE(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[xE(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===mi){var s=r.nodeId;SE(e,s),r.state=lx(fx(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===mi){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(mi),n.sendInspectorState(mi),n.addTimelineEvent({layerId:f_,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=ox++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:Ih,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:Ih,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var d_=8702998,cx=6710886,ux=16777215,PE={label:"namespaced",textColor:ux,backgroundColor:cx};function CE(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function xE(t,e){return{id:e||"root",label:CE(e),tags:t.namespaced?[PE]:[],children:Object.keys(t._children).map(function(n){return xE(t._children[n],e+n+"/")})}}function VE(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[PE]:[]}),Object.keys(e._children).forEach(function(s){VE(t,e._children[s],n,r+s+"/")})}function lx(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=hx(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?CE(o):o,editable:!1,value:gf(function(){return i[o]})}})}return s}function hx(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=gf(function(){return t[n]})}else e[n]=gf(function(){return t[n]})}),e}function fx(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function gf(t){try{return t()}catch(e){return e}}var Cn=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},DE={namespaced:{configurable:!0}};DE.namespaced.get=function(){return!!this._rawModule.namespaced};Cn.prototype.addChild=function(e,n){this._children[e]=n};Cn.prototype.removeChild=function(e){delete this._children[e]};Cn.prototype.getChild=function(e){return this._children[e]};Cn.prototype.hasChild=function(e){return e in this._children};Cn.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Cn.prototype.forEachChild=function(e){Io(this._children,e)};Cn.prototype.forEachGetter=function(e){this._rawModule.getters&&Io(this._rawModule.getters,e)};Cn.prototype.forEachAction=function(e){this._rawModule.actions&&Io(this._rawModule.actions,e)};Cn.prototype.forEachMutation=function(e){this._rawModule.mutations&&Io(this._rawModule.mutations,e)};Object.defineProperties(Cn.prototype,DE);var ni=function(e){this.register([],e,!1)};ni.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};ni.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};ni.prototype.update=function(e){NE([],this.root,e)};ni.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new Cn(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&Io(n.modules,function(a,c){s.register(e.concat(c),a,r)})};ni.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};ni.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function NE(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;NE(t.concat(r),e.getChild(r),n.modules[r])}}function dx(t){return new Xt(t)}var Xt=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ni(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,a=this,c=a.dispatch,l=a.commit;this.dispatch=function(p,m){return c.call(o,p,m)},this.commit=function(p,m,y){return l.call(o,p,m,y)},this.strict=s;var h=this._modules.root.state;pl(this,h,[],this._modules.root),xd(this,h),r.forEach(function(f){return f(n)})},Dd={state:{configurable:!0}};Xt.prototype.install=function(e,n){e.provide(n||Y1,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&ax(e,this)};Dd.state.get=function(){return this._state.data};Dd.state.set=function(t){};Xt.prototype.commit=function(e,n,r){var s=this,i=Ru(e,n,r),o=i.type,a=i.payload,c={type:o,payload:a},l=this._mutations[o];l&&(this._withCommit(function(){l.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(h){return h(c,s.state)}))};Xt.prototype.dispatch=function(e,n){var r=this,s=Ru(e,n),i=s.type,o=s.payload,a={type:i,payload:o},c=this._actions[i];if(c){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(a,r.state)})}catch{}var l=c.length>1?Promise.all(c.map(function(h){return h(o)})):c[0](o);return new Promise(function(h,f){l.then(function(p){try{r._actionSubscribers.filter(function(m){return m.after}).forEach(function(m){return m.after(a,r.state)})}catch{}h(p)},function(p){try{r._actionSubscribers.filter(function(m){return m.error}).forEach(function(m){return m.error(a,r.state,p)})}catch{}f(p)})})}};Xt.prototype.subscribe=function(e,n){return AE(e,this._subscribers,n)};Xt.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return AE(r,this._actionSubscribers,n)};Xt.prototype.watch=function(e,n,r){var s=this;return Kr(function(){return e(s.state,s.getters)},n,Object.assign({},r))};Xt.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Xt.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),pl(this,this.state,e,this._modules.get(e),r.preserveState),xd(this,this.state)};Xt.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=Vd(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),RE(this)};Xt.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Xt.prototype.hotUpdate=function(e){this._modules.update(e),RE(this,!0)};Xt.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Xt.prototype,Dd);var y2=kd(function(t,e){var n={};return Nd(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){var a=this.$store.state,c=this.$store.getters;if(t){var l=Od(this.$store,"mapState",t);if(!l)return;a=l.context.state,c=l.context.getters}return typeof i=="function"?i.call(this,a,c):a[i]},n[s].vuex=!0}),n}),v2=kd(function(t,e){var n={};return Nd(e).forEach(function(r){var s=r.key,i=r.val;i=t+i,n[s]=function(){if(!(t&&!Od(this.$store,"mapGetters",t)))return this.$store.getters[i]},n[s].vuex=!0}),n}),w2=kd(function(t,e){var n={};return Nd(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];var l=this.$store.dispatch;if(t){var h=Od(this.$store,"mapActions",t);if(!h)return;l=h.context.dispatch}return typeof i=="function"?i.apply(this,[l].concat(a)):l.apply(this.$store,[i].concat(a))}}),n});function Nd(t){return px(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function px(t){return Array.isArray(t)||bE(t)}function kd(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function Od(t,e,n){var r=t._modulesNamespaceMap[n];return r}/*!
  * vuexfire v3.2.5
  * (c) 2020 Eduardo San Martin Morote
  * @license MIT
  */var kE="vuexfire/SET_VALUE",OE="vuexfire/ARRAY_ADD",ME="vuexfire/ARRAY_REMOVE";function Md(t,e){return e.split(".").reduce(function(n,r){return n[r]},t)}function mx(t,e,n){var r=(""+e).split("."),s=r.pop(),i=r.reduce(function(o,a){return o[a]},t);return Array.isArray(i)?i.splice(Number(s),1,n):i[s]=n}function gx(t){return t&&typeof t=="object"}function _x(t){return t.toDate}function yx(t){return t&&t.onSnapshot}function vx(t,e){var n=!1;return function(){if(!n)return n=!0,t(e())}}function wx(t){return Object.defineProperty(t.data()||{},"id",{value:t.id})}function _f(t,e,n){var r=[{},{}],s=Object.keys(n).reduce(function(o,a){var c=n[a];return o[c.path]=c.data(),o},{});function i(o,a,c,l){a=a||{};var h=l[0],f=l[1];Object.getOwnPropertyNames(o).forEach(function(C){var N=Object.getOwnPropertyDescriptor(o,C);N&&!N.enumerable&&Object.defineProperty(h,C,N)});for(var p in o){var m=o[p];if(m==null||m instanceof Date||_x(m)||m.longitude&&m.latitude)h[p]=m;else if(yx(m))h[p]=typeof a=="object"&&p in a&&typeof a[p]!="string"?a[p]:m.path,f[c+p]=m;else if(Array.isArray(m)){h[p]=Array(m.length);for(var y=0;y<m.length;y++){var w=m[y];w&&w.path in s&&(h[p][y]=s[w.path])}i(m,a[p]||h[p],c+p+".",[h[p],f])}else gx(m)?(h[p]={},i(m,a[p],c+p+".",[h[p],f])):h[p]=m}}return i(t,e,"",r),r}var Na={maxRefDepth:2,reset:!0,serialize:wx,wait:!1};function Su(t){for(var e in t)t[e].unsub()}function LE(t,e,n,r,s,i,o,a){var c=_f(t.serialize(r),Md(e,n),s),l=c[0],h=c[1];i.set(e,n,l),yf(t,e,n,s,h,i,o,a)}function Ex(t,e){var n=t.ref,r=t.target,s=t.path,i=t.depth,o=t.resolve,a=t.ops,c=Object.create(null),l=n.onSnapshot(function(h){h.exists?LE(e,r,s,h,c,a,i,o):(a.set(r,s,null),o())});return function(){l(),Su(c)}}function yf(t,e,n,r,s,i,o,a){var c=Object.keys(s),l=Object.keys(r).filter(function(y){return c.indexOf(y)<0});if(l.forEach(function(y){r[y].unsub(),delete r[y]}),!c.length||++o>t.maxRefDepth)return a(n);var h=0,f=c.length,p=Object.create(null);function m(y){y in p&&++h>=f&&a(n)}c.forEach(function(y){var w=r[y],C=s[y],N=n+"."+y;if(p[N]=!0,w)if(w.path!==C.path)w.unsub();else return;r[y]={data:function(){return Md(e,N)},unsub:Ex({ref:C,target:e,path:N,depth:o,ops:i,resolve:m.bind(null,N)},t),path:C.path}})}function Tx(t,e){var n=t.vm,r=t.key,s=t.collection,i=t.ops,o=t.resolve,a=t.reject;e===void 0&&(e=Na);var c=Object.assign({},Na,e),l=c.wait?[]:i.set(n,r,[]),h=o,f,p=[],m={added:function(w){var C=w.newIndex,N=w.doc;p.splice(C,0,Object.create(null));var D=p[C],v=_f(c.serialize(N),void 0,D),x=v[0],k=v[1];i.add(l,C,x),yf(c,l,C,D,k,i,0,o.bind(null,N))},modified:function(w){var C=w.oldIndex,N=w.newIndex,D=w.doc,v=p[C],x=l[C],k=_f(c.serialize(D),x,v),U=k[0],b=k[1];p.splice(N,0,v),i.remove(l,C),i.add(l,N,U),yf(c,l,N,v,b,i,0,o)},removed:function(w){var C=w.oldIndex;i.remove(l,C),Su(p.splice(C,1)[0])}},y=s.onSnapshot(function(w){var C=typeof w.docChanges=="function"?w.docChanges():w.docChanges;if(!f&&C.length){f=!0;for(var N=0,D=C.length,v=Object.create(null),x=0;x<D;x++)v[C[x].doc.id]=!0;o=function(k){var U=k.id;U in v&&++N>=D&&(c.wait&&i.set(n,r,l),h(n[r]),o=function(){})}}C.forEach(function(k){m[k.type](k)}),C.length||(c.wait&&i.set(n,r,l),o(l))},a);return function(w){if(y(),w!==!1){var C=typeof w=="function"?w():[];i.set(n,r,C)}p.forEach(Su)}}function Ix(t,e){var n=t.vm,r=t.key,s=t.document,i=t.resolve,o=t.reject,a=t.ops;e===void 0&&(e=Na);var c=Object.assign({},Na,e),l=Object.create(null);i=vx(i,function(){return Md(n,r)});var h=s.onSnapshot(function(f){f.exists?LE(c,n,r,f,l,a,0,i):(a.set(n,r,null),i(null))},o);return function(f){if(h(),f!==!1){var p=typeof f=="function"?f():null;a.set(n,r,p)}Su(l)}}var Yo,bx=(Yo={},Yo[kE]=function(t,e){var n=e.path,r=e.target,s=e.data;mx(r,n,s)},Yo[OE]=function(t,e){var n=e.newIndex,r=e.data,s=e.target;s.splice(n,0,r)},Yo[ME]=function(t,e){var n=e.oldIndex,r=e.target;return r.splice(n,1)[0]},Yo);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pu=function(){return Pu=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pu.apply(this,arguments)},bh={root:!0},vf=new WeakMap;function Ax(t,e,n,r,s,i){var o=vf.get(e);return o||(o=Object.create(null),vf.set(e,o)),n in o&&FE(e,n,i.wait?typeof i.reset=="function"?i.reset:!1:i.reset),new Promise(function(a,c){o[n]="where"in r?Tx({vm:t,key:n,collection:r,ops:s,resolve:a,reject:c},i):Ix({vm:t,key:n,document:r,ops:s,resolve:a,reject:c},i)})}function FE(t,e,n){var r=vf.get(t);!r||!r[e]||(r[e](n),delete r[e])}function an(t){return function(n,r){var s=n.state,i=n.commit,o={set:function(a,c,l){return i(kE,{path:c,target:a,data:l},bh),l},add:function(a,c,l){return i(OE,{target:a,newIndex:c,data:l},bh)},remove:function(a,c){var l=a[c];return i(ME,{target:a,oldIndex:c},bh),[l]}};return t.call(this,Pu(Pu({},n),{bindFirestoreRef:function(a,c,l){return Ax(s,i,a,c,o,Object.assign({},Na,l))},unbindFirestoreRef:function(a,c){return FE(i,a,c)}}),r)}}const Rx=()=>{};var p_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Sx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},UE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(p=64)),r.push(n[h],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Sx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||f==null)throw new Px;const p=i<<2|a>>4;if(r.push(p),l!==64){const m=a<<4&240|l>>2;if(r.push(m),f!==64){const y=l<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Px extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Cx=function(t){const e=BE(t);return UE.encodeByteArray(e,!0)},Cu=function(t){return Cx(t).replace(/\./g,"")},jE=function(t){try{return UE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xu(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!xx(n)||(t[n]=xu(t[n],e[n]));return t}function xx(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=()=>Ld().__FIREBASE_DEFAULTS__,Dx=()=>{if(typeof process>"u"||typeof p_>"u")return;const t=p_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Nx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jE(t[1]);return e&&JSON.parse(e)},$E=()=>{try{return Rx()||Vx()||Dx()||Nx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Fd=()=>$E()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ox(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Cu(JSON.stringify(n)),Cu(JSON.stringify(o)),""].join(".")}const _a={};function Lx(){const t={prod:[],emulator:[]};for(const e of Object.keys(_a))_a[e]?t.emulator.push(e):t.prod.push(e);return t}function Fx(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let m_=!1;function Bx(t,e){if(typeof window>"u"||typeof document>"u"||!Bd(window.location.host)||_a[t]===e||_a[t]||m_)return;_a[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=Lx().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function l(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{m_=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=Fx(r),m=n("text"),y=document.getElementById(m)||document.createElement("span"),w=n("learnmore"),C=document.getElementById(w)||document.createElement("a"),N=n("preprendIcon"),D=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const v=p.element;a(v),h(C,w);const x=l();c(D,N),v.append(D,y,C,x),document.body.appendChild(v)}i?(y.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qE(){const t=$E()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ux(){return typeof window<"u"||HE()}function HE(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function GE(){return!qE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KE(){return!qE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function zE(){try{return typeof indexedDB=="object"}catch{return!1}}function jx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="FirebaseError";class ri extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$x,Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ml.prototype.create)}}class ml{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?qx(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ri(s,a,r)}}function qx(t,e){return t.replace(Hx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Hx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ji(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(__(i)&&__(o)){if(!Ji(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function __(t){return t!==null&&typeof t=="object"}function Gx(t,e){const n=new Kx(t,e);return n.subscribe.bind(n)}class Kx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zx(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ah),s.error===void 0&&(s.error=Ah),s.complete===void 0&&(s.complete=Ah);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ah(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Hs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jx(e))try{this.getOrInitializeService({instanceIdentifier:As})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=As){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=As){return this.instances.has(e)}getOptions(e=As){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Qx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=As){return this.component?this.component.multipleInstances?e:As:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qx(t){return t===As?void 0:t}function Jx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Wx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=[];var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const QE={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},Yx=be.INFO,Xx={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},Zx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Xx[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jd{constructor(e){this.name=e,this._logLevel=Yx,this._logHandler=Zx,this._userLogHandler=null,Ud.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}function eV(t){Ud.forEach(e=>{e.setLogLevel(t)})}function tV(t,e){for(const n of Ud){let r=null;e&&e.level&&(r=QE[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(r??s.logLevel)&&t({level:be[i].toLowerCase(),message:a,args:o,type:s.name})}}}const nV=(t,e)=>e.some(n=>t instanceof n);let y_,v_;function rV(){return y_||(y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sV(){return v_||(v_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JE=new WeakMap,wf=new WeakMap,YE=new WeakMap,Rh=new WeakMap,$d=new WeakMap;function iV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(zr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JE.set(n,t)}).catch(()=>{}),$d.set(e,t),e}function oV(t){if(wf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});wf.set(t,e)}let Ef={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||YE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aV(t){Ef=t(Ef)}function cV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Sh(this),e,...n);return YE.set(r,e.sort?e.sort():[e]),zr(r)}:sV().includes(t)?function(...e){return t.apply(Sh(this),e),zr(JE.get(this))}:function(...e){return zr(t.apply(Sh(this),e))}}function uV(t){return typeof t=="function"?cV(t):(t instanceof IDBTransaction&&oV(t),nV(t,rV())?new Proxy(t,Ef):t)}function zr(t){if(t instanceof IDBRequest)return iV(t);if(Rh.has(t))return Rh.get(t);const e=uV(t);return e!==t&&(Rh.set(t,e),$d.set(e,t)),e}const Sh=t=>$d.get(t);function lV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=zr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(zr(o.result),c.oldVersion,c.newVersion,zr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const hV=["get","getKey","getAll","getAllKeys","count"],fV=["put","add","delete","clear"],Ph=new Map;function w_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ph.get(e))return Ph.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hV.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return Ph.set(e,i),i}aV(t=>({...t,get:(e,n,r)=>w_(e,n)||t.get(e,n,r),has:(e,n)=>!!w_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pV(t){return t.getComponent()?.type==="VERSION"}const Du="@firebase/app",Tf="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new jd("@firebase/app"),mV="@firebase/app-compat",gV="@firebase/analytics-compat",_V="@firebase/analytics",yV="@firebase/app-check-compat",vV="@firebase/app-check",wV="@firebase/auth",EV="@firebase/auth-compat",TV="@firebase/database",IV="@firebase/data-connect",bV="@firebase/database-compat",AV="@firebase/functions",RV="@firebase/functions-compat",SV="@firebase/installations",PV="@firebase/installations-compat",CV="@firebase/messaging",xV="@firebase/messaging-compat",VV="@firebase/performance",DV="@firebase/performance-compat",NV="@firebase/remote-config",kV="@firebase/remote-config-compat",OV="@firebase/storage",MV="@firebase/storage-compat",LV="@firebase/firestore",FV="@firebase/ai",BV="@firebase/firestore-compat",UV="firebase",jV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]",$V={[Du]:"fire-core",[mV]:"fire-core-compat",[_V]:"fire-analytics",[gV]:"fire-analytics-compat",[vV]:"fire-app-check",[yV]:"fire-app-check-compat",[wV]:"fire-auth",[EV]:"fire-auth-compat",[TV]:"fire-rtdb",[IV]:"fire-data-connect",[bV]:"fire-rtdb-compat",[AV]:"fire-fn",[RV]:"fire-fn-compat",[SV]:"fire-iid",[PV]:"fire-iid-compat",[CV]:"fire-fcm",[xV]:"fire-fcm-compat",[VV]:"fire-perf",[DV]:"fire-perf-compat",[NV]:"fire-rc",[kV]:"fire-rc-compat",[OV]:"fire-gcs",[MV]:"fire-gcs-compat",[LV]:"fire-fst",[BV]:"fire-fst-compat",[FV]:"fire-vertex","fire-js":"fire-js",[UV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new Map,Yi=new Map,Xi=new Map;function ka(t,e){try{t.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function XE(t,e){t.container.addOrOverwriteComponent(e)}function Zi(t){const e=t.name;if(Xi.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;Xi.set(e,t);for(const n of Xr.values())ka(n,t);for(const n of Yi.values())ka(n,t);return!0}function ZE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qV(t,e,n=Yr){ZE(t,e).clearInstance(n)}function qd(t){return t.options!==void 0}function eT(t){return qd(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function tT(t){return t==null?!1:t.settings!==void 0}function HV(){Xi.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cn=new ml("app","Firebase",GV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nT=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e){const n=jE(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(n).exp*1e3,i=new Date().getTime();s-i<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class KV extends nT{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const a=e;super(a.options,o,s)}this._serverConfig={automaticDataCollectionEnabled:i,...n},this._serverConfig.authIdToken&&E_(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&E_(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,ur(Du,Tf,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Kd(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw cn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=jV;function Gd(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Yr,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw cn.create("bad-app-name",{appName:String(s)});if(n||(n=Fd()),!n)throw cn.create("no-options");const i=Xr.get(s);if(i){if(Ji(n,i.options)&&Ji(r,i.config))return i;throw cn.create("duplicate-app",{appName:s})}const o=new WE(s);for(const c of Xi.values())o.addComponent(c);const a=new nT(n,r,o);return Xr.set(s,a),a}function zV(t,e={}){if(Ux()&&!HE())throw cn.create("invalid-server-app-environment");let n,r=e||{};if(t&&(qd(t)?n=t.options:eT(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=Fd()),!n)throw cn.create("no-options");const s={...r,...n};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const i=h=>[...h].reduce((f,p)=>Math.imul(31,f)+p.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw cn.create("finalization-registry-not-supported",{});const o=""+i(JSON.stringify(s)),a=Yi.get(o);if(a)return a.incRefCount(r.releaseOnDeref),a;const c=new WE(o);for(const h of Xi.values())c.addComponent(h);const l=new KV(n,r,o,c);return Yi.set(o,l),l}function WV(t=Yr){const e=Xr.get(t);if(!e&&t===Yr&&Fd())return Gd();if(!e)throw cn.create("no-app",{appName:t});return e}function QV(){return Array.from(Xr.values())}async function Kd(t){let e=!1;const n=t.name;Xr.has(n)?(e=!0,Xr.delete(n)):Yi.has(n)&&t.decRefCount()<=0&&(Yi.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function ur(t,e,n){let r=$V[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(o.join(" "));return}Zi(new Hs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function rT(t,e){if(t!==null&&typeof t!="function")throw cn.create("invalid-log-argument");tV(t,e)}function sT(t){eV(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV="firebase-heartbeat-database",YV=1,Oa="firebase-heartbeat-store";let Ch=null;function iT(){return Ch||(Ch=lV(JV,YV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oa)}catch(n){console.warn(n)}}}}).catch(t=>{throw cn.create("idb-open",{originalErrorMessage:t.message})})),Ch}async function XV(t){try{const n=(await iT()).transaction(Oa),r=await n.objectStore(Oa).get(oT(t));return await n.done,r}catch(e){if(e instanceof ri)dr.warn(e.message);else{const n=cn.create("idb-get",{originalErrorMessage:e?.message});dr.warn(n.message)}}}async function T_(t,e){try{const r=(await iT()).transaction(Oa,"readwrite");await r.objectStore(Oa).put(e,oT(t)),await r.done}catch(n){if(n instanceof ri)dr.warn(n.message);else{const r=cn.create("idb-set",{originalErrorMessage:n?.message});dr.warn(r.message)}}}function oT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=1024,eD=30;class tD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=I_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>eD){const s=sD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){dr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=I_(),{heartbeatsToSend:n,unsentEntries:r}=nD(this._heartbeatsCache.heartbeats),s=Cu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return dr.warn(e),""}}}function I_(){return new Date().toISOString().substring(0,10)}function nD(t,e=ZV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),b_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),b_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zE()?jx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function b_(t){return Cu(JSON.stringify({version:2,heartbeats:t})).length}function sD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){Zi(new Hs("platform-logger",e=>new dV(e),"PRIVATE")),Zi(new Hs("heartbeat",e=>new tD(e),"PRIVATE")),ur(Du,Tf,t),ur(Du,Tf,"esm2020"),ur("fire-js","")}iD("");const oD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ri,SDK_VERSION:Hd,_DEFAULT_ENTRY_NAME:Yr,_addComponent:ka,_addOrOverwriteComponent:XE,_apps:Xr,_clearComponents:HV,_components:Xi,_getProvider:ZE,_isFirebaseApp:qd,_isFirebaseServerApp:tT,_isFirebaseServerAppSettings:eT,_registerComponent:Zi,_removeServiceInstance:qV,_serverApps:Yi,deleteApp:Kd,getApp:WV,getApps:QV,initializeApp:Gd,initializeServerApp:zV,onLog:rT,registerVersion:ur,setLogLevel:sT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this._delegate=e,this.firebase=n,ka(e,new Hs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Kd(this._delegate)))}_getService(e,n=Yr){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=Yr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){ka(this._delegate,e)}_addOrOverwriteComponent(e){XE(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},A_=new ml("app-compat","Firebase",cD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:ur,setLogLevel:sT,onLog:rT,apps:null,SDK_VERSION:Hd,INTERNAL:{registerComponent:a,removeApp:r,useAsService:c,modularAPIs:oD}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(l){delete e[l]}function s(l){if(l=l||Yr,!g_(e,l))throw A_.create("no-app",{appName:l});return e[l]}s.App=t;function i(l,h={}){const f=Gd(l,h);if(g_(e,f.name))return e[f.name];const p=new t(f,n);return e[f.name]=p,p}function o(){return Object.keys(e).map(l=>e[l])}function a(l){const h=l.name,f=h.replace("-compat","");if(Zi(l)&&l.type==="PUBLIC"){const p=(m=s())=>{if(typeof m[f]!="function")throw A_.create("invalid-app-argument",{appName:h});return m[f]()};l.serviceProps!==void 0&&xu(p,l.serviceProps),n[f]=p,t.prototype[f]=function(...m){return this._getService.bind(this,h).apply(this,l.multipleInstances?m:[])}}return l.type==="PUBLIC"?n[f]:null}function c(l,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){const t=uD(aD);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:aT,extendNamespace:e,createSubscribe:Gx,ErrorFactory:ml,deepExtend:xu};function e(n){xu(t,n)}return t}const lD=aT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new jd("@firebase/app-compat"),hD="@firebase/app-compat",fD="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){ur(hD,fD,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Ld();if(t.firebase!==void 0){R_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&R_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Ma=lD;dD();var pD="firebase",mD="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ma.registerVersion(pD,mD,"app-compat");var S_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,cT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,T){function E(){}E.prototype=T.prototype,b.F=T.prototype,b.prototype=new E,b.prototype.constructor=b,b.D=function(R,P,S){for(var I=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)I[fe-2]=arguments[fe];return T.prototype[P].apply(R,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,T,E){E||(E=0);const R=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)R[P]=T.charCodeAt(E++)|T.charCodeAt(E++)<<8|T.charCodeAt(E++)<<16|T.charCodeAt(E++)<<24;else for(P=0;P<16;++P)R[P]=T[E++]|T[E++]<<8|T[E++]<<16|T[E++]<<24;T=b.g[0],E=b.g[1],P=b.g[2];let S=b.g[3],I;I=T+(S^E&(P^S))+R[0]+3614090360&4294967295,T=E+(I<<7&4294967295|I>>>25),I=S+(P^T&(E^P))+R[1]+3905402710&4294967295,S=T+(I<<12&4294967295|I>>>20),I=P+(E^S&(T^E))+R[2]+606105819&4294967295,P=S+(I<<17&4294967295|I>>>15),I=E+(T^P&(S^T))+R[3]+3250441966&4294967295,E=P+(I<<22&4294967295|I>>>10),I=T+(S^E&(P^S))+R[4]+4118548399&4294967295,T=E+(I<<7&4294967295|I>>>25),I=S+(P^T&(E^P))+R[5]+1200080426&4294967295,S=T+(I<<12&4294967295|I>>>20),I=P+(E^S&(T^E))+R[6]+2821735955&4294967295,P=S+(I<<17&4294967295|I>>>15),I=E+(T^P&(S^T))+R[7]+4249261313&4294967295,E=P+(I<<22&4294967295|I>>>10),I=T+(S^E&(P^S))+R[8]+1770035416&4294967295,T=E+(I<<7&4294967295|I>>>25),I=S+(P^T&(E^P))+R[9]+2336552879&4294967295,S=T+(I<<12&4294967295|I>>>20),I=P+(E^S&(T^E))+R[10]+4294925233&4294967295,P=S+(I<<17&4294967295|I>>>15),I=E+(T^P&(S^T))+R[11]+2304563134&4294967295,E=P+(I<<22&4294967295|I>>>10),I=T+(S^E&(P^S))+R[12]+1804603682&4294967295,T=E+(I<<7&4294967295|I>>>25),I=S+(P^T&(E^P))+R[13]+4254626195&4294967295,S=T+(I<<12&4294967295|I>>>20),I=P+(E^S&(T^E))+R[14]+2792965006&4294967295,P=S+(I<<17&4294967295|I>>>15),I=E+(T^P&(S^T))+R[15]+1236535329&4294967295,E=P+(I<<22&4294967295|I>>>10),I=T+(P^S&(E^P))+R[1]+4129170786&4294967295,T=E+(I<<5&4294967295|I>>>27),I=S+(E^P&(T^E))+R[6]+3225465664&4294967295,S=T+(I<<9&4294967295|I>>>23),I=P+(T^E&(S^T))+R[11]+643717713&4294967295,P=S+(I<<14&4294967295|I>>>18),I=E+(S^T&(P^S))+R[0]+3921069994&4294967295,E=P+(I<<20&4294967295|I>>>12),I=T+(P^S&(E^P))+R[5]+3593408605&4294967295,T=E+(I<<5&4294967295|I>>>27),I=S+(E^P&(T^E))+R[10]+38016083&4294967295,S=T+(I<<9&4294967295|I>>>23),I=P+(T^E&(S^T))+R[15]+3634488961&4294967295,P=S+(I<<14&4294967295|I>>>18),I=E+(S^T&(P^S))+R[4]+3889429448&4294967295,E=P+(I<<20&4294967295|I>>>12),I=T+(P^S&(E^P))+R[9]+568446438&4294967295,T=E+(I<<5&4294967295|I>>>27),I=S+(E^P&(T^E))+R[14]+3275163606&4294967295,S=T+(I<<9&4294967295|I>>>23),I=P+(T^E&(S^T))+R[3]+4107603335&4294967295,P=S+(I<<14&4294967295|I>>>18),I=E+(S^T&(P^S))+R[8]+1163531501&4294967295,E=P+(I<<20&4294967295|I>>>12),I=T+(P^S&(E^P))+R[13]+2850285829&4294967295,T=E+(I<<5&4294967295|I>>>27),I=S+(E^P&(T^E))+R[2]+4243563512&4294967295,S=T+(I<<9&4294967295|I>>>23),I=P+(T^E&(S^T))+R[7]+1735328473&4294967295,P=S+(I<<14&4294967295|I>>>18),I=E+(S^T&(P^S))+R[12]+2368359562&4294967295,E=P+(I<<20&4294967295|I>>>12),I=T+(E^P^S)+R[5]+4294588738&4294967295,T=E+(I<<4&4294967295|I>>>28),I=S+(T^E^P)+R[8]+2272392833&4294967295,S=T+(I<<11&4294967295|I>>>21),I=P+(S^T^E)+R[11]+1839030562&4294967295,P=S+(I<<16&4294967295|I>>>16),I=E+(P^S^T)+R[14]+4259657740&4294967295,E=P+(I<<23&4294967295|I>>>9),I=T+(E^P^S)+R[1]+2763975236&4294967295,T=E+(I<<4&4294967295|I>>>28),I=S+(T^E^P)+R[4]+1272893353&4294967295,S=T+(I<<11&4294967295|I>>>21),I=P+(S^T^E)+R[7]+4139469664&4294967295,P=S+(I<<16&4294967295|I>>>16),I=E+(P^S^T)+R[10]+3200236656&4294967295,E=P+(I<<23&4294967295|I>>>9),I=T+(E^P^S)+R[13]+681279174&4294967295,T=E+(I<<4&4294967295|I>>>28),I=S+(T^E^P)+R[0]+3936430074&4294967295,S=T+(I<<11&4294967295|I>>>21),I=P+(S^T^E)+R[3]+3572445317&4294967295,P=S+(I<<16&4294967295|I>>>16),I=E+(P^S^T)+R[6]+76029189&4294967295,E=P+(I<<23&4294967295|I>>>9),I=T+(E^P^S)+R[9]+3654602809&4294967295,T=E+(I<<4&4294967295|I>>>28),I=S+(T^E^P)+R[12]+3873151461&4294967295,S=T+(I<<11&4294967295|I>>>21),I=P+(S^T^E)+R[15]+530742520&4294967295,P=S+(I<<16&4294967295|I>>>16),I=E+(P^S^T)+R[2]+3299628645&4294967295,E=P+(I<<23&4294967295|I>>>9),I=T+(P^(E|~S))+R[0]+4096336452&4294967295,T=E+(I<<6&4294967295|I>>>26),I=S+(E^(T|~P))+R[7]+1126891415&4294967295,S=T+(I<<10&4294967295|I>>>22),I=P+(T^(S|~E))+R[14]+2878612391&4294967295,P=S+(I<<15&4294967295|I>>>17),I=E+(S^(P|~T))+R[5]+4237533241&4294967295,E=P+(I<<21&4294967295|I>>>11),I=T+(P^(E|~S))+R[12]+1700485571&4294967295,T=E+(I<<6&4294967295|I>>>26),I=S+(E^(T|~P))+R[3]+2399980690&4294967295,S=T+(I<<10&4294967295|I>>>22),I=P+(T^(S|~E))+R[10]+4293915773&4294967295,P=S+(I<<15&4294967295|I>>>17),I=E+(S^(P|~T))+R[1]+2240044497&4294967295,E=P+(I<<21&4294967295|I>>>11),I=T+(P^(E|~S))+R[8]+1873313359&4294967295,T=E+(I<<6&4294967295|I>>>26),I=S+(E^(T|~P))+R[15]+4264355552&4294967295,S=T+(I<<10&4294967295|I>>>22),I=P+(T^(S|~E))+R[6]+2734768916&4294967295,P=S+(I<<15&4294967295|I>>>17),I=E+(S^(P|~T))+R[13]+1309151649&4294967295,E=P+(I<<21&4294967295|I>>>11),I=T+(P^(E|~S))+R[4]+4149444226&4294967295,T=E+(I<<6&4294967295|I>>>26),I=S+(E^(T|~P))+R[11]+3174756917&4294967295,S=T+(I<<10&4294967295|I>>>22),I=P+(T^(S|~E))+R[2]+718787259&4294967295,P=S+(I<<15&4294967295|I>>>17),I=E+(S^(P|~T))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+T&4294967295,b.g[1]=b.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.v=function(b,T){T===void 0&&(T=b.length);const E=T-this.blockSize,R=this.C;let P=this.h,S=0;for(;S<T;){if(P==0)for(;S<=E;)s(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<T;)if(R[P++]=b.charCodeAt(S++),P==this.blockSize){s(this,R),P=0;break}}else for(;S<T;)if(R[P++]=b[S++],P==this.blockSize){s(this,R),P=0;break}}this.h=P,this.o+=T},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var T=1;T<b.length-8;++T)b[T]=0;T=this.o*8;for(var E=b.length-8;E<b.length;++E)b[E]=T&255,T/=256;for(this.v(b),b=Array(16),T=0,E=0;E<4;++E)for(let R=0;R<32;R+=8)b[T++]=this.g[E]>>>R&255;return b};function i(b,T){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=T(b)}function o(b,T){this.h=T;const E=[];let R=!0;for(let P=b.length-1;P>=0;P--){const S=b[P]|0;R&&S==T||(E[P]=S,R=!1)}this.g=E}var a={};function c(b){return-128<=b&&b<128?i(b,function(T){return new o([T|0],T<0?-1:0)}):new o([b|0],b<0?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return f;if(b<0)return C(l(-b));const T=[];let E=1;for(let R=0;b>=E;R++)T[R]=b/E|0,E*=4294967296;return new o(T,0)}function h(b,T){if(b.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b.charAt(0)=="-")return C(h(b.substring(1),T));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=l(Math.pow(T,8));let R=f;for(let S=0;S<b.length;S+=8){var P=Math.min(8,b.length-S);const I=parseInt(b.substring(S,S+P),T);P<8?(P=l(Math.pow(T,P)),R=R.j(P).add(l(I))):(R=R.j(E),R=R.add(l(I)))}return R}var f=c(0),p=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-C(this).m();let b=0,T=1;for(let E=0;E<this.g.length;E++){const R=this.i(E);b+=(R>=0?R:4294967296+R)*T,T*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(y(this))return"0";if(w(this))return"-"+C(this).toString(b);const T=l(Math.pow(b,6));var E=this;let R="";for(;;){const P=x(E,T).g;E=N(E,P.j(T));let S=((E.g.length>0?E.g[0]:E.h)>>>0).toString(b);if(E=P,y(E))return S+R;for(;S.length<6;)S="0"+S;R=S+R}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function y(b){if(b.h!=0)return!1;for(let T=0;T<b.g.length;T++)if(b.g[T]!=0)return!1;return!0}function w(b){return b.h==-1}t.l=function(b){return b=N(this,b),w(b)?-1:y(b)?0:1};function C(b){const T=b.g.length,E=[];for(let R=0;R<T;R++)E[R]=~b.g[R];return new o(E,~b.h).add(p)}t.abs=function(){return w(this)?C(this):this},t.add=function(b){const T=Math.max(this.g.length,b.g.length),E=[];let R=0;for(let P=0;P<=T;P++){let S=R+(this.i(P)&65535)+(b.i(P)&65535),I=(S>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);R=I>>>16,S&=65535,I&=65535,E[P]=I<<16|S}return new o(E,E[E.length-1]&-2147483648?-1:0)};function N(b,T){return b.add(C(T))}t.j=function(b){if(y(this)||y(b))return f;if(w(this))return w(b)?C(this).j(C(b)):C(C(this).j(b));if(w(b))return C(this.j(C(b)));if(this.l(m)<0&&b.l(m)<0)return l(this.m()*b.m());const T=this.g.length+b.g.length,E=[];for(var R=0;R<2*T;R++)E[R]=0;for(R=0;R<this.g.length;R++)for(let P=0;P<b.g.length;P++){const S=this.i(R)>>>16,I=this.i(R)&65535,fe=b.i(P)>>>16,Te=b.i(P)&65535;E[2*R+2*P]+=I*Te,D(E,2*R+2*P),E[2*R+2*P+1]+=S*Te,D(E,2*R+2*P+1),E[2*R+2*P+1]+=I*fe,D(E,2*R+2*P+1),E[2*R+2*P+2]+=S*fe,D(E,2*R+2*P+2)}for(b=0;b<T;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=T;b<2*T;b++)E[b]=0;return new o(E,0)};function D(b,T){for(;(b[T]&65535)!=b[T];)b[T+1]+=b[T]>>>16,b[T]&=65535,T++}function v(b,T){this.g=b,this.h=T}function x(b,T){if(y(T))throw Error("division by zero");if(y(b))return new v(f,f);if(w(b))return T=x(C(b),T),new v(C(T.g),C(T.h));if(w(T))return T=x(b,C(T)),new v(C(T.g),T.h);if(b.g.length>30){if(w(b)||w(T))throw Error("slowDivide_ only works with positive integers.");for(var E=p,R=T;R.l(b)<=0;)E=k(E),R=k(R);var P=U(E,1),S=U(R,1);for(R=U(R,2),E=U(E,2);!y(R);){var I=S.add(R);I.l(b)<=0&&(P=P.add(E),S=I),R=U(R,1),E=U(E,1)}return T=N(b,P.j(T)),new v(P,T)}for(P=f;b.l(T)>=0;){for(E=Math.max(1,Math.floor(b.m()/T.m())),R=Math.ceil(Math.log(E)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),S=l(E),I=S.j(T);w(I)||I.l(b)>0;)E-=R,S=l(E),I=S.j(T);y(S)&&(S=p),P=P.add(S),b=N(b,I)}return new v(P,b)}t.B=function(b){return x(this,b).h},t.and=function(b){const T=Math.max(this.g.length,b.g.length),E=[];for(let R=0;R<T;R++)E[R]=this.i(R)&b.i(R);return new o(E,this.h&b.h)},t.or=function(b){const T=Math.max(this.g.length,b.g.length),E=[];for(let R=0;R<T;R++)E[R]=this.i(R)|b.i(R);return new o(E,this.h|b.h)},t.xor=function(b){const T=Math.max(this.g.length,b.g.length),E=[];for(let R=0;R<T;R++)E[R]=this.i(R)^b.i(R);return new o(E,this.h^b.h)};function k(b){const T=b.g.length+1,E=[];for(let R=0;R<T;R++)E[R]=b.i(R)<<1|b.i(R-1)>>>31;return new o(E,b.h)}function U(b,T){const E=T>>5;T%=32;const R=b.g.length-E,P=[];for(let S=0;S<R;S++)P[S]=T>0?b.i(S+E)>>>T|b.i(S+E+1)<<32-T:b.i(S+E);return new o(P,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,cT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Wr=o}).apply(typeof S_<"u"?S_:typeof self<"u"?self:typeof window<"u"?window:{});var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uT,oa,lT,Xc,If,hT,fT,dT;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uc=="object"&&Uc];for(var d=0;d<u.length;++d){var g=u[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,d){if(d)e:{var g=r;u=u.split(".");for(var _=0;_<u.length-1;_++){var M=u[_];if(!(M in g))break e;g=g[M]}u=u[u.length-1],_=g[u],d=d(_),d!=_&&d!=null&&e(g,u,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(d){var g=[],_;for(_ in d)Object.prototype.hasOwnProperty.call(d,_)&&g.push([_,d[_]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function c(u,d,g){return u.call.apply(u.bind,arguments)}function l(u,d,g){return l=c,l.apply(null,arguments)}function h(u,d){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function f(u,d){function g(){}g.prototype=d.prototype,u.Z=d.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(_,M,B){for(var X=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)X[ye-2]=arguments[ye];return d.prototype[M].apply(_,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const d=u.length;if(d>0){const g=Array(d);for(let _=0;_<d;_++)g[_]=u[_];return g}return[]}function y(u,d){for(let _=1;_<arguments.length;_++){const M=arguments[_];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=u.length||0;const B=M.length||0;u.length=g+B;for(let X=0;X<B;X++)u[g+X]=M[X]}else u.push(M)}}class w{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function C(u){o.setTimeout(()=>{throw u},0)}function N(){var u=b;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class D{constructor(){this.h=this.g=null}add(d,g){const _=v.get();_.set(d,g),this.h?this.h.next=_:this.g=_,this.h=_}}var v=new w(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let k,U=!1,b=new D,T=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(E)}};function E(){for(var u;u=N();){try{u.h.call(u.g)}catch(g){C(g)}var d=v;d.j(u),d.h<100&&(d.h++,u.next=d.g,d.g=u)}U=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,d),o.removeEventListener("test",g,d)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function fe(u,d){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,d)}f(fe,P),fe.prototype.init=function(u,d){const g=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget,d||(g=="mouseover"?d=u.fromElement:g=="mouseout"&&(d=u.toElement)),this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),ie=0;function pe(u,d,g,_,M){this.listener=u,this.proxy=null,this.src=d,this.type=g,this.capture=!!_,this.ha=M,this.key=++ie,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ce(u,d,g){for(const _ in u)d.call(g,u[_],_,u)}function Vn(u,d){for(const g in u)d.call(void 0,u[g],g,u)}function Zt(u){const d={};for(const g in u)d[g]=u[g];return d}const wt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jn(u,d){let g,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(g in _)u[g]=_[g];for(let B=0;B<wt.length;B++)g=wt[B],Object.prototype.hasOwnProperty.call(_,g)&&(u[g]=_[g])}}function yn(u){this.src=u,this.g={},this.h=0}yn.prototype.add=function(u,d,g,_,M){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const X=St(u,d,_,M);return X>-1?(d=u[X],g||(d.fa=!1)):(d=new pe(d,this.src,B,!!_,M),d.fa=g,u.push(d)),d};function vn(u,d){const g=d.type;if(g in u.g){var _=u.g[g],M=Array.prototype.indexOf.call(_,d,void 0),B;(B=M>=0)&&Array.prototype.splice.call(_,M,1),B&&(re(d),u.g[g].length==0&&(delete u.g[g],u.h--))}}function St(u,d,g,_){for(let M=0;M<u.length;++M){const B=u[M];if(!B.da&&B.listener==d&&B.capture==!!g&&B.ha==_)return M}return-1}var $="closure_lm_"+(Math.random()*1e6|0),se={};function ee(u,d,g,_,M){if(Array.isArray(d)){for(let B=0;B<d.length;B++)ee(u,d[B],g,_,M);return null}return g=K(g),u&&u[Te]?u.J(d,g,a(_)?!!_.capture:!1,M):ue(u,d,g,!1,_,M)}function ue(u,d,g,_,M,B){if(!d)throw Error("Invalid event type");const X=a(M)?!!M.capture:!!M;let ye=H(u);if(ye||(u[$]=ye=new yn(u)),g=ye.add(d,g,_,X,B),g.proxy)return g;if(_=ve(),g.proxy=_,_.src=u,_.listener=g,u.addEventListener)S||(M=X),M===void 0&&(M=!1),u.addEventListener(d.toString(),_,M);else if(u.attachEvent)u.attachEvent(V(d.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ve(){function u(g){return d.call(u.src,u.listener,g)}const d=L;return u}function Le(u,d,g,_,M){if(Array.isArray(d))for(var B=0;B<d.length;B++)Le(u,d[B],g,_,M);else _=a(_)?!!_.capture:!!_,g=K(g),u&&u[Te]?(u=u.i,B=String(d).toString(),B in u.g&&(d=u.g[B],g=St(d,g,_,M),g>-1&&(re(d[g]),Array.prototype.splice.call(d,g,1),d.length==0&&(delete u.g[B],u.h--)))):u&&(u=H(u))&&(d=u.g[d.toString()],u=-1,d&&(u=St(d,g,_,M)),(g=u>-1?d[u]:null)&&A(g))}function A(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Te])vn(d.i,u);else{var g=u.type,_=u.proxy;d.removeEventListener?d.removeEventListener(g,_,u.capture):d.detachEvent?d.detachEvent(V(g),_):d.addListener&&d.removeListener&&d.removeListener(_),(g=H(d))?(vn(g,u),g.h==0&&(g.src=null,d[$]=null)):re(u)}}}function V(u){return u in se?se[u]:se[u]="on"+u}function L(u,d){if(u.da)u=!0;else{d=new fe(d,this);const g=u.listener,_=u.ha||u.src;u.fa&&A(u),u=g.call(_,d)}return u}function H(u){return u=u[$],u instanceof yn?u:null}var j="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(u){return typeof u=="function"?u:(u[j]||(u[j]=function(d){return u.handleEvent(d)}),u[j])}function Q(){R.call(this),this.i=new yn(this),this.M=this,this.G=null}f(Q,R),Q.prototype[Te]=!0,Q.prototype.removeEventListener=function(u,d,g,_){Le(this,u,d,g,_)};function W(u,d){var g,_=u.G;if(_)for(g=[];_;_=_.G)g.push(_);if(u=u.M,_=d.type||d,typeof d=="string")d=new P(d,u);else if(d instanceof P)d.target=d.target||u;else{var M=d;d=new P(_,u),Jn(d,M)}M=!0;let B,X;if(g)for(X=g.length-1;X>=0;X--)B=d.g=g[X],M=J(B,_,!0,d)&&M;if(B=d.g=u,M=J(B,_,!0,d)&&M,M=J(B,_,!1,d)&&M,g)for(X=0;X<g.length;X++)B=d.g=g[X],M=J(B,_,!1,d)&&M}Q.prototype.N=function(){if(Q.Z.N.call(this),this.i){var u=this.i;for(const d in u.g){const g=u.g[d];for(let _=0;_<g.length;_++)re(g[_]);delete u.g[d],u.h--}}this.G=null},Q.prototype.J=function(u,d,g,_){return this.i.add(String(u),d,!1,g,_)},Q.prototype.K=function(u,d,g,_){return this.i.add(String(u),d,!0,g,_)};function J(u,d,g,_){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();let M=!0;for(let B=0;B<d.length;++B){const X=d[B];if(X&&!X.da&&X.capture==g){const ye=X.listener,ht=X.ha||X.src;X.fa&&vn(u.i,X),M=ye.call(ht,_)!==!1&&M}}return M&&!_.defaultPrevented}function z(u,d){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=l(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(u,d||0)}function he(u){u.g=z(()=>{u.g=null,u.i&&(u.i=!1,he(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class te extends R{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(u){R.call(this),this.h=u,this.g={}}f(ae,R);var me=[];function we(u){Ce(u.g,function(d,g){this.g.hasOwnProperty(g)&&A(d)},u),u.g={}}ae.prototype.N=function(){ae.Z.N.call(this),we(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=o.JSON.stringify,Pe=o.JSON.parse,Pt=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ut(){}function Gt(){}var lt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yn(){P.call(this,"d")}f(Yn,P);function ci(){P.call(this,"c")}f(ci,P);var Ze={},en=null;function ds(){return en=en||new Q}Ze.Ia="serverreachability";function Do(u){P.call(this,Ze.Ia,u)}f(Do,P);function No(u){const d=ds();W(d,new Do(d))}Ze.STAT_EVENT="statevent";function nm(u,d){P.call(this,Ze.STAT_EVENT,u),this.stat=d}f(nm,P);function Lt(u){const d=ds();W(d,new nm(d,u))}Ze.Ja="timingevent";function rm(u,d){P.call(this,Ze.Ja,u),this.size=d}f(rm,P);function ko(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},d)}function Oo(){this.g=!0}Oo.prototype.ua=function(){this.g=!1};function Xb(u,d,g,_,M,B){u.info(function(){if(u.g)if(B){var X="",ye=B.split("&");for(let Fe=0;Fe<ye.length;Fe++){var ht=ye[Fe].split("=");if(ht.length>1){const mt=ht[0];ht=ht[1];const Nn=mt.split("_");X=Nn.length>=2&&Nn[1]=="type"?X+(mt+"="+ht+"&"):X+(mt+"=redacted&")}}}else X=null;else X=B;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+d+`
`+g+`
`+X})}function Zb(u,d,g,_,M,B,X){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+d+`
`+g+`
`+B+" "+X})}function ui(u,d,g,_){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+tA(u,g)+(_?" "+_:"")})}function eA(u,d){u.info(function(){return"TIMEOUT: "+d})}Oo.prototype.info=function(){};function tA(u,d){if(!u.g)return d;if(!d)return null;try{const B=JSON.parse(d);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var g=B[u];if(!(g.length<2)){var _=g[1];if(Array.isArray(_)&&!(_.length<1)){var M=_[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<_.length;X++)_[X]=""}}}}return xe(B)}catch{return d}}var wc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sm={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},im;function $l(){}f($l,ut),$l.prototype.g=function(){return new XMLHttpRequest},im=new $l;function Mo(u){return encodeURIComponent(String(u))}function nA(u){var d=1;u=u.split(":");const g=[];for(;d>0&&u.length;)g.push(u.shift()),d--;return u.length&&g.push(u.join(":")),g}function Tr(u,d,g,_){this.j=u,this.i=d,this.l=g,this.S=_||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new om}function om(){this.i=null,this.g="",this.h=!1}var am={},ql={};function Hl(u,d,g){u.M=1,u.A=Tc(Dn(d)),u.u=g,u.R=!0,cm(u,null)}function cm(u,d){u.F=Date.now(),Ec(u),u.B=Dn(u.A);var g=u.B,_=u.S;Array.isArray(_)||(_=[String(_)]),Em(g.i,"t",_),u.C=0,g=u.j.L,u.h=new om,u.g=Bm(u.j,g?d:null,!u.u),u.P>0&&(u.O=new te(l(u.Y,u,u.g),u.P)),d=u.V,g=u.g,_=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(me[0]=M.toString()),M=me);for(let B=0;B<M.length;B++){const X=ee(g,M[B],_||d.handleEvent,!1,d.h||d);if(!X)break;d.g[X.key]=X}d=u.J?Zt(u.J):{},u.u?(u.v||(u.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,d)):(u.v="GET",u.g.ea(u.B,u.v,null,d)),No(),Xb(u.i,u.v,u.B,u.l,u.S,u.u)}Tr.prototype.ba=function(u){u=u.target;const d=this.O;d&&Ar(u)==3?d.j():this.Y(u)},Tr.prototype.Y=function(u){try{if(u==this.g)e:{const ye=Ar(this.g),ht=this.g.ya(),Fe=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Pm(this.g)))){this.K||ye!=4||ht==7||(ht==8||Fe<=0?No(3):No(2)),Gl(this);var d=this.g.ca();this.X=d;var g=rA(this);if(this.o=d==200,Zb(this.i,this.v,this.B,this.l,this.S,ye,d),this.o){if(this.U&&!this.L){t:{if(this.g){var _,M=this.g;if((_=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(_)){var B=_;break t}}B=null}if(u=B)ui(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Kl(this,u);else{this.o=!1,this.m=3,Lt(12),ps(this),Lo(this);break e}}if(this.R){u=!0;let mt;for(;!this.K&&this.C<g.length;)if(mt=sA(this,g),mt==ql){ye==4&&(this.m=4,Lt(14),u=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==am){this.m=4,Lt(15),ui(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else ui(this.i,this.l,mt,null),Kl(this,mt);if(um(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||g.length!=0||this.h.h||(this.m=1,Lt(16),u=!1),this.o=this.o&&u,!u)ui(this.i,this.l,g,"[Invalid Chunked Response]"),ps(this),Lo(this);else if(g.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),eh(X),X.P=!0,Lt(11))}}else ui(this.i,this.l,g,null),Kl(this,g);ye==4&&ps(this),this.o&&!this.K&&(ye==4?Om(this.j,this):(this.o=!1,Ec(this)))}else yA(this.g),d==400&&g.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),ps(this),Lo(this)}}}catch{}finally{}};function rA(u){if(!um(u))return u.g.la();const d=Pm(u.g);if(d==="")return"";let g="";const _=d.length,M=Ar(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ps(u),Lo(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<_;B++)u.h.h=!0,g+=u.h.i.decode(d[B],{stream:!(M&&B==_-1)});return d.length=0,u.h.g+=g,u.C=0,u.h.g}function um(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function sA(u,d){var g=u.C,_=d.indexOf(`
`,g);return _==-1?ql:(g=Number(d.substring(g,_)),isNaN(g)?am:(_+=1,_+g>d.length?ql:(d=d.slice(_,_+g),u.C=_+g,d)))}Tr.prototype.cancel=function(){this.K=!0,ps(this)};function Ec(u){u.T=Date.now()+u.H,lm(u,u.H)}function lm(u,d){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ko(l(u.aa,u),d)}function Gl(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Tr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(eA(this.i,this.B),this.M!=2&&(No(),Lt(17)),ps(this),this.m=2,Lo(this)):lm(this,this.T-u)};function Lo(u){u.j.I==0||u.K||Om(u.j,u)}function ps(u){Gl(u);var d=u.O;d&&typeof d.dispose=="function"&&d.dispose(),u.O=null,we(u.V),u.g&&(d=u.g,u.g=null,d.abort(),d.dispose())}function Kl(u,d){try{var g=u.j;if(g.I!=0&&(g.g==u||zl(g.h,u))){if(!u.L&&zl(g.h,u)&&g.I==3){try{var _=g.Ba.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)Sc(g),Ac(g);else break e;Zl(g),Lt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ko(l(g.Va,g),6e3));dm(g.h)<=1&&g.ta&&(g.ta=void 0)}else gs(g,11)}else if((u.L||g.g==u)&&Sc(g),!I(d))for(M=g.Ba.g.parse(d),d=0;d<M.length;d++){let Fe=M[d];const mt=Fe[0];if(!(mt<=g.K))if(g.K=mt,Fe=Fe[1],g.I==2)if(Fe[0]=="c"){g.M=Fe[1],g.ba=Fe[2];const Nn=Fe[3];Nn!=null&&(g.ka=Nn,g.j.info("VER="+g.ka));const _s=Fe[4];_s!=null&&(g.za=_s,g.j.info("SVER="+g.za));const Rr=Fe[5];Rr!=null&&typeof Rr=="number"&&Rr>0&&(_=1.5*Rr,g.O=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Sr=u.g;if(Sr){const Cc=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cc){var B=_.h;B.g||Cc.indexOf("spdy")==-1&&Cc.indexOf("quic")==-1&&Cc.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Wl(B,B.h),B.h=null))}if(_.G){const th=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;th&&(_.wa=th,He(_.J,_.G,th))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),_=g;var X=u;if(_.na=Fm(_,_.L?_.ba:null,_.W),X.L){pm(_.h,X);var ye=X,ht=_.O;ht&&(ye.H=ht),ye.D&&(Gl(ye),Ec(ye)),_.g=X}else Nm(_);g.i.length>0&&Rc(g)}else Fe[0]!="stop"&&Fe[0]!="close"||gs(g,7);else g.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?gs(g,7):Xl(g):Fe[0]!="noop"&&g.l&&g.l.qa(Fe),g.A=0)}}No(4)}catch{}}var iA=class{constructor(u,d){this.g=u,this.map=d}};function hm(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fm(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function dm(u){return u.h?1:u.g?u.g.size:0}function zl(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Wl(u,d){u.g?u.g.add(d):u.h=d}function pm(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}hm.prototype.cancel=function(){if(this.i=mm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function mm(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const g of u.g.values())d=d.concat(g.G);return d}return m(u.i)}var gm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oA(u,d){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const _=u[g].indexOf("=");let M,B=null;_>=0?(M=u[g].substring(0,_),B=u[g].substring(_+1)):M=u[g],d(M,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ir(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;u instanceof Ir?(this.l=u.l,Fo(this,u.j),this.o=u.o,this.g=u.g,Bo(this,u.u),this.h=u.h,Ql(this,Tm(u.i)),this.m=u.m):u&&(d=String(u).match(gm))?(this.l=!1,Fo(this,d[1]||"",!0),this.o=Uo(d[2]||""),this.g=Uo(d[3]||"",!0),Bo(this,d[4]),this.h=Uo(d[5]||"",!0),Ql(this,d[6]||"",!0),this.m=Uo(d[7]||"")):(this.l=!1,this.i=new $o(null,this.l))}Ir.prototype.toString=function(){const u=[];var d=this.j;d&&u.push(jo(d,_m,!0),":");var g=this.g;return(g||d=="file")&&(u.push("//"),(d=this.o)&&u.push(jo(d,_m,!0),"@"),u.push(Mo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(jo(g,g.charAt(0)=="/"?uA:cA,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",jo(g,hA)),u.join("")},Ir.prototype.resolve=function(u){const d=Dn(this);let g=!!u.j;g?Fo(d,u.j):g=!!u.o,g?d.o=u.o:g=!!u.g,g?d.g=u.g:g=u.u!=null;var _=u.h;if(g)Bo(d,u.u);else if(g=!!u.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var M=d.h.lastIndexOf("/");M!=-1&&(_=d.h.slice(0,M+1)+_)}if(M=_,M==".."||M==".")_="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){_=M.lastIndexOf("/",0)==0,M=M.split("/");const B=[];for(let X=0;X<M.length;){const ye=M[X++];ye=="."?_&&X==M.length&&B.push(""):ye==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),_&&X==M.length&&B.push("")):(B.push(ye),_=!0)}_=B.join("/")}else _=M}return g?d.h=_:g=u.i.toString()!=="",g?Ql(d,Tm(u.i)):g=!!u.m,g&&(d.m=u.m),d};function Dn(u){return new Ir(u)}function Fo(u,d,g){u.j=g?Uo(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Bo(u,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);u.u=d}else u.u=null}function Ql(u,d,g){d instanceof $o?(u.i=d,fA(u.i,u.l)):(g||(d=jo(d,lA)),u.i=new $o(d,u.l))}function He(u,d,g){u.i.set(d,g)}function Tc(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Uo(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function jo(u,d,g){return typeof u=="string"?(u=encodeURI(u).replace(d,aA),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function aA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _m=/[#\/\?@]/g,cA=/[#\?:]/g,uA=/[#\?]/g,lA=/[#\?@]/g,hA=/#/g;function $o(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function ms(u){u.g||(u.g=new Map,u.h=0,u.i&&oA(u.i,function(d,g){u.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}t=$o.prototype,t.add=function(u,d){ms(this),this.i=null,u=li(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(d),this.h+=1,this};function ym(u,d){ms(u),d=li(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function vm(u,d){return ms(u),d=li(u,d),u.g.has(d)}t.forEach=function(u,d){ms(this),this.g.forEach(function(g,_){g.forEach(function(M){u.call(d,M,_,this)},this)},this)};function wm(u,d){ms(u);let g=[];if(typeof d=="string")vm(u,d)&&(g=g.concat(u.g.get(li(u,d))));else for(u=Array.from(u.g.values()),d=0;d<u.length;d++)g=g.concat(u[d]);return g}t.set=function(u,d){return ms(this),this.i=null,u=li(this,u),vm(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=wm(this,u),u.length>0?String(u[0]):d):d};function Em(u,d,g){ym(u,d),g.length>0&&(u.i=null,u.g.set(li(u,d),m(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(let _=0;_<d.length;_++){var g=d[_];const M=Mo(g);g=wm(this,g);for(let B=0;B<g.length;B++){let X=M;g[B]!==""&&(X+="="+Mo(g[B])),u.push(X)}}return this.i=u.join("&")};function Tm(u){const d=new $o;return d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),d}function li(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function fA(u,d){d&&!u.j&&(ms(u),u.i=null,u.g.forEach(function(g,_){const M=_.toLowerCase();_!=M&&(ym(this,_),Em(this,M,g))},u)),u.j=d}function dA(u,d){const g=new Oo;if(o.Image){const _=new Image;_.onload=h(br,g,"TestLoadImage: loaded",!0,d,_),_.onerror=h(br,g,"TestLoadImage: error",!1,d,_),_.onabort=h(br,g,"TestLoadImage: abort",!1,d,_),_.ontimeout=h(br,g,"TestLoadImage: timeout",!1,d,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else d(!1)}function pA(u,d){const g=new Oo,_=new AbortController,M=setTimeout(()=>{_.abort(),br(g,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:_.signal}).then(B=>{clearTimeout(M),B.ok?br(g,"TestPingServer: ok",!0,d):br(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),br(g,"TestPingServer: error",!1,d)})}function br(u,d,g,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(g)}catch{}}function mA(){this.g=new Pt}function Jl(u){this.i=u.Sb||null,this.h=u.ab||!1}f(Jl,ut),Jl.prototype.g=function(){return new Ic(this.i,this.h)};function Ic(u,d){Q.call(this),this.H=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Ic,Q),t=Ic.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=d,this.readyState=1,Ho(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(d.body=u),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qo(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ho(this)),this.g&&(this.readyState=3,Ho(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Im(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Im(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?qo(this):Ho(this),this.readyState==3&&Im(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,qo(this))},t.Na=function(u){this.g&&(this.response=u,qo(this))},t.ga=function(){this.g&&qo(this)};function qo(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ho(u)}t.setRequestHeader=function(u,d){this.A.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=d.next();return u.join(`\r
`)};function Ho(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ic.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function bm(u){let d="";return Ce(u,function(g,_){d+=_,d+=":",d+=g,d+=`\r
`}),d}function Yl(u,d,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=bm(g),typeof u=="string"?g!=null&&Mo(g):He(u,d,g))}function Je(u){Q.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Je,Q);var gA=/^https?$/i,_A=["POST","PUT"];t=Je.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,d,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():im.g(),this.g.onreadystatechange=p(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(B){Am(this,B);return}if(u=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)g.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const B of _.keys())g.set(B,_.get(B));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(B=>B.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(_A,d,void 0)>=0)||_||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,X]of g)this.g.setRequestHeader(B,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){Am(this,B)}};function Am(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.o=5,Rm(u),bc(u)}function Rm(u){u.A||(u.A=!0,W(u,"complete"),W(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,W(this,"complete"),W(this,"abort"),bc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bc(this,!0)),Je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sm(this):this.Xa())},t.Xa=function(){Sm(this)};function Sm(u){if(u.h&&typeof i<"u"){if(u.v&&Ar(u)==4)setTimeout(u.Ca.bind(u),0);else if(W(u,"readystatechange"),Ar(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var _;if(_=B===0){let X=String(u.D).match(gm)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),_=!gA.test(X?X.toLowerCase():"")}g=_}if(g)W(u,"complete"),W(u,"success");else{u.o=6;try{var M=Ar(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",Rm(u)}}finally{bc(u)}}}}function bc(u,d){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,d||W(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ar(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Ar(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Pe(d)}};function Pm(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yA(u){const d={};u=(u.g&&Ar(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(I(u[_]))continue;var g=nA(u[_]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const B=d[M]||[];d[M]=B,B.push(g)}Vn(d,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Go(u,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||d}function Cm(u){this.za=0,this.i=[],this.j=new Oo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Go("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Go("baseRetryDelayMs",5e3,u),this.Za=Go("retryDelaySeedMs",1e4,u),this.Ta=Go("forwardChannelMaxRetries",2,u),this.va=Go("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new hm(u&&u.concurrentRequestLimit),this.Ba=new mA,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Cm.prototype,t.ka=8,t.I=1,t.connect=function(u,d,g,_){Lt(0),this.W=u,this.H=d||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.J=Fm(this,null,this.W),Rc(this)};function Xl(u){if(xm(u),u.I==3){var d=u.V++,g=Dn(u.J);if(He(g,"SID",u.M),He(g,"RID",d),He(g,"TYPE","terminate"),Ko(u,g),d=new Tr(u,u.j,d),d.M=2,d.A=Tc(Dn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=d.A,g=!0),g||(d.g=Bm(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ec(d)}Lm(u)}function Ac(u){u.g&&(eh(u),u.g.cancel(),u.g=null)}function xm(u){Ac(u),u.v&&(o.clearTimeout(u.v),u.v=null),Sc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Rc(u){if(!fm(u.h)&&!u.m){u.m=!0;var d=u.Ea;k||T(),U||(k(),U=!0),b.add(d,u),u.D=0}}function vA(u,d){return dm(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=d.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ko(l(u.Ea,u,d),Mm(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Tr(this,this.j,u);let B=this.o;if(this.U&&(B?(B=Zt(B),Jn(B,this.U)):B=this.U),this.u!==null||this.R||(M.J=B,B=null),this.S)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,d>4096){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Dm(this,M,d),g=Dn(this.J),He(g,"RID",u),He(g,"CVER",22),this.G&&He(g,"X-HTTP-Session-Id",this.G),Ko(this,g),B&&(this.R?d="headers="+Mo(bm(B))+"&"+d:this.u&&Yl(g,this.u,B)),Wl(this.h,M),this.Ra&&He(g,"TYPE","init"),this.S?(He(g,"$req",d),He(g,"SID","null"),M.U=!0,Hl(M,g,null)):Hl(M,g,d),this.I=2}}else this.I==3&&(u?Vm(this,u):this.i.length==0||fm(this.h)||Vm(this))};function Vm(u,d){var g;d?g=d.l:g=u.V++;const _=Dn(u.J);He(_,"SID",u.M),He(_,"RID",g),He(_,"AID",u.K),Ko(u,_),u.u&&u.o&&Yl(_,u.u,u.o),g=new Tr(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),d&&(u.i=d.G.concat(u.i)),d=Dm(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Wl(u.h,g),Hl(g,_,d)}function Ko(u,d){u.H&&Ce(u.H,function(g,_){He(d,_,g)}),u.l&&Ce({},function(g,_){He(d,_,g)})}function Dm(u,d,g){g=Math.min(u.i.length,g);const _=u.l?l(u.l.Ka,u.l,u):null;e:{var M=u.i;let ye=-1;for(;;){const ht=["count="+g];ye==-1?g>0?(ye=M[0].g,ht.push("ofs="+ye)):ye=0:ht.push("ofs="+ye);let Fe=!0;for(let mt=0;mt<g;mt++){var B=M[mt].g;const Nn=M[mt].map;if(B-=ye,B<0)ye=Math.max(0,M[mt].g-100),Fe=!1;else try{B="req"+B+"_"||"";try{var X=Nn instanceof Map?Nn:Object.entries(Nn);for(const[_s,Rr]of X){let Sr=Rr;a(Rr)&&(Sr=xe(Rr)),ht.push(B+_s+"="+encodeURIComponent(Sr))}}catch(_s){throw ht.push(B+"type="+encodeURIComponent("_badmap")),_s}}catch{_&&_(Nn)}}if(Fe){X=ht.join("&");break e}}X=void 0}return u=u.i.splice(0,g),d.G=u,X}function Nm(u){if(!u.g&&!u.v){u.Y=1;var d=u.Da;k||T(),U||(k(),U=!0),b.add(d,u),u.A=0}}function Zl(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ko(l(u.Da,u),Mm(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,km(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ko(l(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),Ac(this),km(this))};function eh(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function km(u){u.g=new Tr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var d=Dn(u.na);He(d,"RID","rpc"),He(d,"SID",u.M),He(d,"AID",u.K),He(d,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(d,"TO",u.ia),He(d,"TYPE","xmlhttp"),Ko(u,d),u.u&&u.o&&Yl(d,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=Tc(Dn(d)),g.u=null,g.R=!0,cm(g,u)}t.Va=function(){this.C!=null&&(this.C=null,Ac(this),Zl(this),Lt(19))};function Sc(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Om(u,d){var g=null;if(u.g==d){Sc(u),eh(u),u.g=null;var _=2}else if(zl(u.h,d))g=d.G,pm(u.h,d),_=1;else return;if(u.I!=0){if(d.o)if(_==1){g=d.u?d.u.length:0,d=Date.now()-d.F;var M=u.D;_=ds(),W(_,new rm(_,g)),Rc(u)}else Nm(u);else if(M=d.m,M==3||M==0&&d.X>0||!(_==1&&vA(u,d)||_==2&&Zl(u)))switch(g&&g.length>0&&(d=u.h,d.i=d.i.concat(g)),M){case 1:gs(u,5);break;case 4:gs(u,10);break;case 3:gs(u,6);break;default:gs(u,2)}}}function Mm(u,d){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*d}function gs(u,d){if(u.j.info("Error code "+d),d==2){var g=l(u.bb,u),_=u.Ua;const M=!_;_=new Ir(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Fo(_,"https"),Tc(_),M?dA(_.toString(),g):pA(_.toString(),g)}else Lt(2);u.I=0,u.l&&u.l.pa(d),Lm(u),xm(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Lm(u){if(u.I=0,u.ja=[],u.l){const d=mm(u.h);(d.length!=0||u.i.length!=0)&&(y(u.ja,d),y(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function Fm(u,d,g){var _=g instanceof Ir?Dn(g):new Ir(g);if(_.g!="")d&&(_.g=d+"."+_.g),Bo(_,_.u);else{var M=o.location;_=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;const B=new Ir(null);_&&Fo(B,_),d&&(B.g=d),M&&Bo(B,M),g&&(B.h=g),_=B}return g=u.G,d=u.wa,g&&d&&He(_,g,d),He(_,"VER",u.ka),Ko(u,_),_}function Bm(u,d,g){if(d&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Aa&&!u.ma?new Je(new Jl({ab:g})):new Je(u.ma),d.Fa(u.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Um(){}t=Um.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Pc(){}Pc.prototype.g=function(u,d){return new tn(u,d)};function tn(u,d){Q.call(this),this.g=new Cm(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(u?u["X-WebChannel-Client-Profile"]=d.sa:u={"X-WebChannel-Client-Profile":d.sa}),this.g.U=u,(u=d&&d.Qb)&&!I(u)&&(this.g.u=u),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!I(d)&&(this.g.G=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new hi(this)}f(tn,Q),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Xl(this.g)},tn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=xe(u),u=g);d.i.push(new iA(d.Ya++,u)),d.I==3&&Rc(d)},tn.prototype.N=function(){this.g.l=null,delete this.j,Xl(this.g),delete this.g,tn.Z.N.call(this)};function jm(u){Yn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const g in d){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}f(jm,Yn);function $m(){ci.call(this),this.status=1}f($m,ci);function hi(u){this.g=u}f(hi,Um),hi.prototype.ra=function(){W(this.g,"a")},hi.prototype.qa=function(u){W(this.g,new jm(u))},hi.prototype.pa=function(u){W(this.g,new $m)},hi.prototype.oa=function(){W(this.g,"b")},Pc.prototype.createWebChannel=Pc.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,dT=function(){return new Pc},fT=function(){return ds()},hT=Ze,If={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wc.NO_ERROR=0,wc.TIMEOUT=8,wc.HTTP_ERROR=6,Xc=wc,sm.COMPLETE="complete",lT=sm,Gt.EventType=lt,lt.OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",Q.prototype.listen=Q.prototype.J,oa=Gt,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,uT=Je}).apply(typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{});const P_="@firebase/firestore",C_="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new jd("@firebase/firestore");function bi(){return Zr.logLevel}function gD(t){Zr.setLogLevel(t)}function G(t,...e){if(Zr.logLevel<=be.DEBUG){const n=e.map(zd);Zr.debug(`Firestore (${bo}): ${t}`,...n)}}function et(t,...e){if(Zr.logLevel<=be.ERROR){const n=e.map(zd);Zr.error(`Firestore (${bo}): ${t}`,...n)}}function zn(t,...e){if(Zr.logLevel<=be.WARN){const n=e.map(zd);Zr.warn(`Firestore (${bo}): ${t}`,...n)}}function zd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,pT(t,r,n)}function pT(t,e,n){let r=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw et(r),new Error(r)}function oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||pT(e,s,r)}function _D(t,e){t||ne(57014,e)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends ri{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(yt.UNAUTHENTICATED)))}shutdown(){}}class vD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class wD{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Rt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rt,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rt)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new mT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new yt(e)}}class ED{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ED(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class x_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ID{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new x_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new x_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=bD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function bf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return xh(s)===xh(i)?ge(s,i):xh(s)?1:-1}return ge(t.length,e.length)}const AD=55296,RD=57343;function xh(t){const e=t.charCodeAt(0);return e>=AD&&e<=RD}function eo(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}function gT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="__name__";class Mn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Mn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ge(e.length,n.length)}static compareSegments(e,n){const r=Mn.isNumericId(e),s=Mn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Mn.extractNumericId(e).compare(Mn.extractNumericId(n)):bf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wr.fromString(e.substring(4,e.length-2))}}class Ee extends Mn{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ee(n)}static emptyPath(){return new Ee([])}}const SD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends Mn{construct(e,n,r){return new ze(e,n,r)}static isValidIdentifier(e){return SD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===V_}static keyField(){return new ze([V_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ee.fromString(e))}static fromName(e){return new Y(Ee.fromString(e).popFirst(5))}static empty(){return new Y(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _T(t,e,n,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function D_(t){if(!Y.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function N_(t){if(Y.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Se(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gl(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vT(t,e){if(e<=0)throw new q(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function ic(t,e){if(!yT(t))throw new q(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new q(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=-62135596800,O_=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*O_);return new Ne(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<k_)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/O_}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ic(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-k_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:ot("string",Ne._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new Ne(0,0))}static max(){return new ce(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=-1;class Nu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Af(t){return t.fields.find((e=>e.kind===2))}function Rs(t){return t.fields.filter((e=>e.kind!==2))}Nu.UNKNOWN_ID=-1;class Zc{constructor(e,n){this.fieldPath=e,this.kind=n}}class La{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new La(0,ln.min())}}function wT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new ln(s,Y.empty(),e)}function ET(t){return new ln(t.readTime,t.key,to)}class ln{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ln(ce.min(),Y.empty(),to)}static max(){return new ln(ce.max(),Y.empty(),to)}}function Jd(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cs(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==TT)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):O.reject(n)}static resolve(e){return new O(((n,r)=>{n(e)}))}static reject(e){return new O(((n,r)=>{r(e)}))}static waitFor(e){return new O(((n,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&n()}),(c=>r(c)))})),o=!0,i===s&&n()}))}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next((s=>s?O.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new O(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(e[l]).next((h=>{o[l]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new O(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="SimpleDb";class _l{static open(e,n,r,s){try{return new _l(n,e.transaction(s,r))}catch(i){throw new ya(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Rt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ya(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Yd(r.target.error);this.S.reject(new ya(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(G(nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new CD(n)}}class qn{static delete(e){return G(nn,"Removing database:",e),Ps(Ld().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!zE())return!1;if(qn.F())return!0;const e=Vu(),n=qn.M(e),r=0<n&&n<10,s=bT(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,qn.M(Vu())===12.2&&et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(G(nn,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ya(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new q(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ya(e,o))},s.onupgradeneeded=i=>{G(nn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next((()=>{G(nn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=_l.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next((l=>(a.C(),l))).catch((l=>(a.abort(l),O.reject(l)))).toPromise();return c.catch((()=>{})),await a.D,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(G(nn,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function bT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class PD{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ps(this.U.delete())}}class ya extends q{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function us(t){return t.name==="IndexedDbTransactionError"}class CD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G(nn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(G(nn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ps(r)}add(e){return G(nn,"ADD",this.store.name,e,e),Ps(this.store.add(e))}get(e){return Ps(this.store.get(e)).next((n=>(n===void 0&&(n=null),G(nn,"GET",this.store.name,e,n),n)))}delete(e){return G(nn,"DELETE",this.store.name,e),Ps(this.store.delete(e))}count(){return G(nn,"COUNT",this.store.name),Ps(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new O(((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}}))}{const i=this.cursor(r),o=[];return this.H(i,((a,c)=>{o.push(c)})).next((()=>o))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}Z(e,n){G(nn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,((i,o,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new O(((r,s)=>{n.onerror=i=>{const o=Yd(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}H(e,n){const r=[];return new O(((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new PD(a),l=n(a.primaryKey,a.value,c);if(l instanceof O){const h=l.catch((f=>(c.done(),O.reject(f))));r.push(h)}c.isDone?s():c.G===null?a.continue():a.continue(c.G)}})).next((()=>O.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ps(t){return new O(((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Yd(r.target.error);n(s)}}))}let M_=!1;function Yd(t){const e=qn.M(Vu());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return M_||(M_=!0,setTimeout((()=>{throw r}),0)),r}}return t}const va="IndexBackfiller";class xD{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){G(va,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();G(va,`Documents written: ${n}`)}catch(n){us(n)?G(va,"Ignoring IndexedDB error during index backfill: ",n):await cs(n)}await this.re(6e4)}))}}class VD{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let s=n,i=!0;return O.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return G(va,`Processing collection: ${o}`),this.oe(e,o,s).next((a=>{s-=a,r.add(o)}));i=!1})))).next((()=>n-s))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(s,i))).next((a=>(G(va,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((s,i)=>{const o=ET(i);Jd(o,r)>0&&(r=o)})),new ln(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qt.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=-1;function oc(t){return t==null}function Fa(t){return t===0&&1/t==-1/0}function AT(t){return typeof t=="number"&&Number.isInteger(t)&&!Fa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku="";function Ot(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=L_(e)),e=DD(t.get(n),e);return L_(e)}function DD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ku:n+="";break;default:n+=i}}return n}function L_(t){return t+ku+""}function Un(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===ku&&t.charAt(1)==="",56145,{path:t}),Ee.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(ku,i);switch((o<0||o>n)&&ne(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ne(61167,{path:t})}i=o+2}return new Ee(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="remoteDocuments",ac="owner",gi="owner",Ba="mutationQueues",ND="userId",wn="mutations",F_="batchId",ks="userMutationsIndex",B_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t,e){return[t,Ot(e)]}function RT(t,e,n){return[t,Ot(e),n]}const kD={},no="documentMutations",Ou="remoteDocumentsV14",OD=["prefixPath","collectionGroup","readTime","documentId"],tu="documentKeyIndex",MD=["prefixPath","collectionGroup","documentId"],ST="collectionGroupIndex",LD=["collectionGroup","readTime","prefixPath","documentId"],Ua="remoteDocumentGlobal",Rf="remoteDocumentGlobalKey",ro="targets",PT="queryTargetsIndex",FD=["canonicalId","targetId"],so="targetDocuments",BD=["targetId","path"],Xd="documentTargetsIndex",UD=["path","targetId"],Mu="targetGlobalKey",js="targetGlobal",ja="collectionParents",jD=["collectionId","parent"],io="clientMetadata",$D="clientId",yl="bundles",qD="bundleId",vl="namedQueries",HD="name",Zd="indexConfiguration",GD="indexId",Sf="collectionGroupIndex",KD="collectionGroup",wa="indexState",zD=["indexId","uid"],CT="sequenceNumberIndex",WD=["uid","sequenceNumber"],Ea="indexEntries",QD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xT="documentKeyIndex",JD=["indexId","uid","orderedDocumentKey"],wl="documentOverlays",YD=["userId","collectionPath","documentId"],Pf="collectionPathOverlayIndex",XD=["userId","collectionPath","largestBatchId"],VT="collectionGroupOverlayIndex",ZD=["userId","collectionGroup","largestBatchId"],ep="globals",eN="name",DT=[Ba,wn,no,Ss,ro,ac,js,so,io,Ua,ja,yl,vl],tN=[...DT,wl],NT=[Ba,wn,no,Ou,ro,ac,js,so,io,Ua,ja,yl,vl,wl],kT=NT,tp=[...kT,Zd,wa,Ea],nN=tp,OT=[...tp,ep],rN=OT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends IT{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function pt(t,e){const n=Z(t);return qn.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jc(this.root,e,this.comparator,!0)}}class jc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Et.RED,this.left=s??Et.EMPTY,this.right=i??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j_(this.data.getIterator())}getIteratorFrom(e){return new j_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Oe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Oe(this.comparator);return n.data=e,n}}class j_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _i(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new Oe(ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return eo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new LT("Invalid base64 string: "+i):i}})(e);return new Xe(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const iN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=iN.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mr(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="server_timestamp",BT="__type__",UT="__previous_value__",jT="__local_write_time__";function El(t){return(t?.mapValue?.fields||{})[BT]?.stringValue===FT}function Tl(t){const e=t.mapValue.fields[UT];return El(e)?Tl(e):e}function $a(t){const e=pr(t.mapValue.fields[jT].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n,r,s,i,o,a,c,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}}const xf="(default)";class es{constructor(e,n){this.projectId=e,this.database=n||xf}static empty(){return new es("","")}get isDefaultDatabase(){return this.database===xf}isEqual(e){return e instanceof es&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="__type__",$T="__max__",jr={mapValue:{fields:{__type__:{stringValue:$T}}}},rp="__vector__",oo="value",nu={nullValue:"NULL_VALUE"};function ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?El(t)?4:qT(t)?9007199254740991:Il(t)?10:11:ne(28295,{value:t})}function Wn(t,e){if(t===e)return!0;const n=ts(t);if(n!==ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $a(t).isEqual($a(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=pr(s.timestampValue),a=pr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return mr(s.bytesValue).isEqual(mr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Ke(s.geoPointValue.latitude)===Ke(i.geoPointValue.latitude)&&Ke(s.geoPointValue.longitude)===Ke(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ke(s.integerValue)===Ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ke(s.doubleValue),a=Ke(i.doubleValue);return o===a?Fa(o)===Fa(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return eo(t.arrayValue.values||[],e.arrayValue.values||[],Wn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(U_(o)!==U_(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Wn(o[c],a[c])))return!1;return!0})(t,e);default:return ne(52216,{left:t})}}function qa(t,e){return(t.values||[]).find((n=>Wn(n,e)))!==void 0}function ns(t,e){if(t===e)return 0;const n=ts(t),r=ts(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=Ke(i.integerValue||i.doubleValue),c=Ke(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return $_(t.timestampValue,e.timestampValue);case 4:return $_($a(t),$a(e));case 5:return bf(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=mr(i),c=mr(o);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const h=ge(a[l],c[l]);if(h!==0)return h}return ge(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=ge(Ke(i.latitude),Ke(o.latitude));return a!==0?a:ge(Ke(i.longitude),Ke(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return q_(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},c=o.fields||{},l=a[oo]?.arrayValue,h=c[oo]?.arrayValue,f=ge(l?.values?.length||0,h?.values?.length||0);return f!==0?f:q_(l,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===jr.mapValue&&o===jr.mapValue)return 0;if(i===jr.mapValue)return 1;if(o===jr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=bf(c[f],h[f]);if(p!==0)return p;const m=ns(a[c[f]],l[h[f]]);if(m!==0)return m}return ge(c.length,h.length)})(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function $_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=pr(t),r=pr(e),s=ge(n.seconds,r.seconds);return s!==0?s:ge(n.nanos,r.nanos)}function q_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ns(n[s],r[s]);if(i)return i}return ge(n.length,r.length)}function ao(t){return Vf(t)}function Vf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=pr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return mr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Y.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Vf(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Vf(n.fields[o])}`;return s+"}"})(t.mapValue):ne(61005,{value:t})}function ru(t){switch(ts(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tl(t);return e?16+ru(e):16;case 5:return 2*t.stringValue.length;case 6:return mr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+ru(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return ls(r.fields,((i,o)=>{s+=i.length+ru(o)})),s})(t.mapValue);default:throw ne(13486,{value:t})}}function Gs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Df(t){return!!t&&"integerValue"in t}function Ha(t){return!!t&&"arrayValue"in t}function H_(t){return!!t&&"nullValue"in t}function G_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function su(t){return!!t&&"mapValue"in t}function Il(t){return(t?.mapValue?.fields||{})[np]?.stringValue===rp}function Ta(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ls(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ta(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ta(t.arrayValue.values[n]);return e}return{...t}}function qT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$T}const HT={mapValue:{fields:{[np]:{stringValue:rp},[oo]:{arrayValue:{}}}}};function aN(t){return"nullValue"in t?nu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Gs(es.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Il(t)?HT:{mapValue:{}}:ne(35942,{value:t})}function cN(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Gs(es.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?HT:"mapValue"in t?Il(t)?{mapValue:{}}:jr:ne(61959,{value:t})}function K_(t,e){const n=ns(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function z_(t,e){const n=ns(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!su(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ta(n)}setAll(e){let n=ze.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ta(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());su(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];su(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ls(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new bt(Ta(this.value))}}function GT(t){const e=[];return ls(t.fields,((n,r)=>{const s=new ze([n]);if(su(r)){const i=GT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ge(e,0,ce.min(),ce.min(),ce.min(),bt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ge(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Ge(e,2,n,ce.min(),ce.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new Ge(e,3,n,ce.min(),ce.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ge&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n){this.position=e,this.inclusive=n}}function W_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=ns(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Q_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n="asc"){this.field=e,this.dir=n}}function uN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{}class Ie extends KT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lN(e,n,r):n==="array-contains"?new dN(e,r):n==="in"?new XT(e,r):n==="not-in"?new pN(e,r):n==="array-contains-any"?new mN(e,r):new Ie(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hN(e,r):new fN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ns(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(ns(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ke extends KT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ke(e,n)}matches(e){return co(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function co(t){return t.op==="and"}function Nf(t){return t.op==="or"}function sp(t){return zT(t)&&co(t)}function zT(t){for(const e of t.filters)if(e instanceof ke)return!1;return!0}function kf(t){if(t instanceof Ie)return t.field.canonicalString()+t.op.toString()+ao(t.value);if(sp(t))return t.filters.map((e=>kf(e))).join(",");{const e=t.filters.map((n=>kf(n))).join(",");return`${t.op}(${e})`}}function WT(t,e){return t instanceof Ie?(function(r,s){return s instanceof Ie&&r.op===s.op&&r.field.isEqual(s.field)&&Wn(r.value,s.value)})(t,e):t instanceof ke?(function(r,s){return s instanceof ke&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&WT(o,s.filters[a])),!0):!1})(t,e):void ne(19439)}function QT(t,e){const n=t.filters.concat(e);return ke.create(n,t.op)}function JT(t){return t instanceof Ie?(function(n){return`${n.field.canonicalString()} ${n.op} ${ao(n.value)}`})(t):t instanceof ke?(function(n){return n.op.toString()+" {"+n.getFilters().map(JT).join(" ,")+"}"})(t):"Filter"}class lN extends Ie{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class hN extends Ie{constructor(e,n){super(e,"in",n),this.keys=YT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class fN extends Ie{constructor(e,n){super(e,"not-in",n),this.keys=YT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function YT(t,e){return(e.arrayValue?.values||[]).map((n=>Y.fromName(n.referenceValue)))}class dN extends Ie{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ha(n)&&qa(n.arrayValue,this.value)}}class XT extends Ie{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qa(this.value.arrayValue,n)}}class pN extends Ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qa(this.value.arrayValue,n)}}class mN extends Ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ha(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>qa(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Of(t,e=null,n=[],r=[],s=null,i=null,o=null){return new gN(t,e,n,r,s,i,o)}function Ks(t){const e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>kf(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),oc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ao(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ao(r))).join(",")),e.Te=n}return e.Te}function cc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!WT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Q_(t.startAt,e.startAt)&&Q_(t.endAt,e.endAt)}function Lu(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Fu(t,e){return t.filters.filter((n=>n instanceof Ie&&n.field.isEqual(e)))}function J_(t,e,n){let r=nu,s=!0;for(const i of Fu(t,e)){let o=nu,a=!0;switch(i.op){case"<":case"<=":o=aN(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=nu}K_({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];K_({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Y_(t,e,n){let r=jr,s=!0;for(const i of Fu(t,e)){let o=jr,a=!0;switch(i.op){case">=":case">":o=cN(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=jr}z_({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];z_({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZT(t,e,n,r,s,i,o,a){return new yr(t,e,n,r,s,i,o,a)}function Ao(t){return new yr(t)}function X_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ip(t){return t.collectionGroup!==null}function Fi(t){const e=Z(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Oe(ze.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((l=>{l.isInequality()&&(a=a.add(l.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ga(i,r))})),n.has(ze.keyField().canonicalString())||e.Ie.push(new Ga(ze.keyField(),r))}return e.Ie}function qt(t){const e=Z(t);return e.Ee||(e.Ee=_N(e,Fi(t))),e.Ee}function _N(t,e){if(t.limitType==="F")return Of(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Ga(s.field,i)}));const n=t.endAt?new rs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rs(t.startAt.position,t.startAt.inclusive):null;return Of(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Mf(t,e){const n=t.filters.concat([e]);return new yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Bu(t,e,n){return new yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uc(t,e){return cc(qt(t),qt(e))&&t.limitType===e.limitType}function eI(t){return`${Ks(qt(t))}|lt:${t.limitType}`}function Ai(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>JT(s))).join(", ")}]`),oc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>ao(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>ao(s))).join(",")),`Target(${r})`})(qt(t))}; limitType=${t.limitType})`}function lc(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Fi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,c){const l=W_(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,Fi(r),s)||r.endAt&&!(function(o,a,c){const l=W_(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,Fi(r),s))})(t,e)}function tI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nI(t){return(e,n)=>{let r=!1;for(const s of Fi(t)){const i=yN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function yN(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):(function(i,o,a){const c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?ns(c,l):ne(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ls(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return MT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=new qe(Y.comparator);function Yt(){return vN}const rI=new qe(Y.comparator);function aa(...t){let e=rI;for(const n of t)e=e.insert(n.key,n);return e}function sI(t){let e=rI;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function jn(){return Ia()}function iI(){return Ia()}function Ia(){return new vr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const wN=new qe(Y.comparator),EN=new Oe(Y.comparator);function _e(...t){let e=EN;for(const n of t)e=e.add(n);return e}const TN=new Oe(ge);function op(){return TN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fa(e)?"-0":e}}function oI(t){return{integerValue:""+t}}function aI(t,e){return AT(e)?oI(e):ap(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this._=void 0}}function IN(t,e,n){return t instanceof uo?(function(s,i){const o={fields:{[BT]:{stringValue:FT},[jT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&El(i)&&(i=Tl(i)),i&&(o.fields[UT]=i),{mapValue:o}})(n,e):t instanceof zs?uI(t,e):t instanceof Ws?lI(t,e):(function(s,i){const o=cI(s,i),a=Z_(o)+Z_(s.Ae);return Df(o)&&Df(s.Ae)?oI(a):ap(s.serializer,a)})(t,e)}function bN(t,e,n){return t instanceof zs?uI(t,e):t instanceof Ws?lI(t,e):n}function cI(t,e){return t instanceof lo?(function(r){return Df(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class uo extends bl{}class zs extends bl{constructor(e){super(),this.elements=e}}function uI(t,e){const n=hI(e);for(const r of t.elements)n.some((s=>Wn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ws extends bl{constructor(e){super(),this.elements=e}}function lI(t,e){let n=hI(e);for(const r of t.elements)n=n.filter((s=>!Wn(s,r)));return{arrayValue:{values:n}}}class lo extends bl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Z_(t){return Ke(t.integerValue||t.doubleValue)}function hI(t){return Ha(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n){this.field=e,this.transform=n}}function AN(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof zs&&s instanceof zs||r instanceof Ws&&s instanceof Ws?eo(r.elements,s.elements,Wn):r instanceof lo&&s instanceof lo?Wn(r.Ae,s.Ae):r instanceof uo&&s instanceof uo})(t.transform,e.transform)}class RN{constructor(e,n){this.version=e,this.transformResults=n}}class We{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new We}static exists(e){return new We(void 0,e)}static updateTime(e){return new We(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Al{}function fI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new So(t.key,We.none()):new Ro(t.key,t.data,We.none());{const n=t.data,r=bt.empty();let s=new Oe(ze.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new wr(t.key,r,new Jt(s.toArray()),We.none())}}function SN(t,e,n){t instanceof Ro?(function(s,i,o){const a=s.value.clone(),c=ty(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof wr?(function(s,i,o){if(!iu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ty(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(dI(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function ba(t,e,n,r){return t instanceof Ro?(function(i,o,a,c){if(!iu(i.precondition,o))return a;const l=i.value.clone(),h=ny(i.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof wr?(function(i,o,a,c){if(!iu(i.precondition,o))return a;const l=ny(i.fieldTransforms,c,o),h=o.data;return h.setAll(dI(i)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(t,e,n,r):(function(i,o,a){return iu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function PN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=cI(r.transform,s||null);i!=null&&(n===null&&(n=bt.empty()),n.set(r.field,i))}return n||null}function ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&eo(r,s,((i,o)=>AN(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ro extends Al{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wr extends Al{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function dI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function ty(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,bN(o,a,n[s]))}return r}function ny(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,IN(i,o,e))}return r}class So extends Al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cp extends Al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&SN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ba(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ba(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iI();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=fI(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),_e())}isEqual(e){return this.batchId===e.batchId&&eo(this.mutations,e.mutations,((n,r)=>ey(n,r)))&&eo(this.baseMutations,e.baseMutations,((n,r)=>ey(n,r)))}}class lp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return wN})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new lp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Ae;function pI(t){switch(t){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function mI(t){if(t===void 0)return et("GRPC error has no .code"),F.UNKNOWN;switch(t){case st.OK:return F.OK;case st.CANCELLED:return F.CANCELLED;case st.UNKNOWN:return F.UNKNOWN;case st.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case st.INTERNAL:return F.INTERNAL;case st.UNAVAILABLE:return F.UNAVAILABLE;case st.UNAUTHENTICATED:return F.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case st.NOT_FOUND:return F.NOT_FOUND;case st.ALREADY_EXISTS:return F.ALREADY_EXISTS;case st.PERMISSION_DENIED:return F.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case st.ABORTED:return F.ABORTED;case st.OUT_OF_RANGE:return F.OUT_OF_RANGE;case st.UNIMPLEMENTED:return F.UNIMPLEMENTED;case st.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:t})}}(Ae=st||(st={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=new Wr([4294967295,4294967295],0);function ry(t){const e=gI().encode(t),n=new cT;return n.update(e),new Uint8Array(n.digest())}function sy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Wr([n,r],0),new Wr([s,i],0)]}class fp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ca(`Invalid padding: ${n}`);if(r<0)throw new ca(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ca(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ca(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Wr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Wr.fromNumber(r)));return s.compare(xN)===1&&(s=new Wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ry(e),[r,s]=sy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new fp(i,s,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=ry(e),[r,s]=sy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,dc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fc(ce.min(),s,new qe(ge),Yt(),_e())}}class dc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new dc(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class _I{constructor(e,n){this.targetId=e,this.Ce=n}}class yI{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class iy{constructor(){this.ve=0,this.Fe=oy(),this.Me=Xe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}})),new dc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=oy()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yt(),this.Je=$c(),this.He=$c(),this.Ye=new qe(ge)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Lu(i))if(r===0){const o=new Y(i.path);this.et(n,o,Ge.newNoDocument(o,ce.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=mr(r).toUint8Array()}catch(c){if(c instanceof LT)return zn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new fp(o,s,i)}catch(c){return zn(c instanceof ca?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Lu(a.target)){const c=new Y(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ge.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=_e();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((c=>{const l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new fc(e,n,this.Ye,this.je,r);return this.je=Yt(),this.Je=$c(),this.He=$c(),this.Ye=new qe(ge),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new iy,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Oe(ge),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Oe(ge),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iy),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function $c(){return new qe(Y.comparator)}function oy(){return new qe(Y.comparator)}const DN={asc:"ASCENDING",desc:"DESCENDING"},NN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kN={and:"AND",or:"OR"};class ON{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lf(t,e){return t.useProto3Json||oc(e)?e:{value:e}}function ho(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MN(t,e){return ho(t,e.toTimestamp())}function nt(t){return oe(!!t,49232),ce.fromTimestamp((function(n){const r=pr(n);return new Ne(r.seconds,r.nanos)})(t))}function dp(t,e){return Ff(t,e).canonicalString()}function Ff(t,e){const n=(function(s){return new Ee(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function wI(t){const e=Ee.fromString(t);return oe(xI(e),10190,{key:e.toString()}),e}function Ka(t,e){return dp(t.databaseId,e.path)}function Hn(t,e){const n=wI(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(II(n))}function EI(t,e){return dp(t.databaseId,e)}function TI(t){const e=wI(t);return e.length===4?Ee.emptyPath():II(e)}function Bf(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function II(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ay(t,e,n){return{name:Ka(t,e),fields:n.value.mapValue.fields}}function bI(t,e,n){const r=Hn(t,e.name),s=nt(e.updateTime),i=e.createTime?nt(e.createTime):ce.min(),o=new bt({mapValue:{fields:e.fields}}),a=Ge.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function LN(t,e){return"found"in e?(function(r,s){oe(!!s.found,43571),s.found.name,s.found.updateTime;const i=Hn(r,s.found.name),o=nt(s.found.updateTime),a=s.found.createTime?nt(s.found.createTime):ce.min(),c=new bt({mapValue:{fields:s.found.fields}});return Ge.newFoundDocument(i,o,a,c)})(t,e):"missing"in e?(function(r,s){oe(!!s.missing,3894),oe(!!s.readTime,22933);const i=Hn(r,s.missing),o=nt(s.readTime);return Ge.newNoDocument(i,o)})(t,e):ne(7234,{result:e})}function FN(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(l,h){return l.useProto3Json?(oe(h===void 0||typeof h=="string",58123),Xe.fromBase64String(h||"")):(oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Xe.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){const h=l.code===void 0?F.UNKNOWN:mI(l.code);return new q(h,l.message||"")})(o);n=new yI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Hn(t,r.document.name),i=nt(r.document.updateTime),o=r.document.createTime?nt(r.document.createTime):ce.min(),a=new bt({mapValue:{fields:r.document.fields}}),c=Ge.newFoundDocument(s,i,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ou(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Hn(t,r.document),i=r.readTime?nt(r.readTime):ce.min(),o=Ge.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ou([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Hn(t,r.document),i=r.removedTargetIds||[];n=new ou([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new CN(s,i),a=r.targetId;n=new _I(a,o)}}return n}function za(t,e){let n;if(e instanceof Ro)n={update:ay(t,e.key,e.value)};else if(e instanceof So)n={delete:Ka(t,e.key)};else if(e instanceof wr)n={update:ay(t,e.key,e.data),updateMask:HN(e.fieldMask)};else{if(!(e instanceof cp))return ne(16599,{Vt:e.type});n={verify:Ka(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof uo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ws)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof lo)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ne(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:MN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)})(t,e.precondition)),n}function Uf(t,e){const n=e.currentDocument?(function(i){return i.updateTime!==void 0?We.updateTime(nt(i.updateTime)):i.exists!==void 0?We.exists(i.exists):We.none()})(e.currentDocument):We.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(o,a){let c=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new uo;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new zs(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new Ws(h)}else"increment"in a?c=new lo(o,a.increment):ne(16584,{proto:a});const l=ze.fromServerFormat(a.fieldPath);return new hc(l,c)})(t,s))):[];if(e.update){e.update.name;const s=Hn(t,e.update.name),i=new bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(c){const l=c.fieldPaths||[];return new Jt(l.map((h=>ze.fromServerFormat(h))))})(e.updateMask);return new wr(s,i,o,n,r)}return new Ro(s,i,n,r)}if(e.delete){const s=Hn(t,e.delete);return new So(s,n)}if(e.verify){const s=Hn(t,e.verify);return new cp(s,n)}return ne(1463,{proto:e})}function BN(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?nt(s.updateTime):nt(i);return o.isEqual(ce.min())&&(o=nt(i)),new RN(o,s.transformResults||[])})(n,e)))):[]}function AI(t,e){return{documents:[EI(t,e.path)]}}function RI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=EI(t,s);const i=(function(l){if(l.length!==0)return CI(ke.create(l,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(l){if(l.length!==0)return l.map((h=>(function(p){return{field:Ri(p.field),direction:jN(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Lf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:s}}function SI(t){let e=TI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){oe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(f){const p=PI(f);return p instanceof ke&&sp(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(f){return f.map((p=>(function(y){return new Ga(Si(y.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(y.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,oc(p)?null:p})(n.limit));let c=null;n.startAt&&(c=(function(f){const p=!!f.before,m=f.values||[];return new rs(m,p)})(n.startAt));let l=null;return n.endAt&&(l=(function(f){const p=!f.before,m=f.values||[];return new rs(m,p)})(n.endAt)),ZT(e,s,o,i,a,"F",c,l)}function UN(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PI(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Si(n.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Si(n.unaryFilter.field);return Ie.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Si(n.unaryFilter.field);return Ie.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Si(n.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ie.create(Si(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ke.create(n.compositeFilter.filters.map((r=>PI(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}})(n.compositeFilter.op))})(t):ne(30097,{filter:t})}function jN(t){return DN[t]}function $N(t){return NN[t]}function qN(t){return kN[t]}function Ri(t){return{fieldPath:t.canonicalString()}}function Si(t){return ze.fromServerFormat(t.fieldPath)}function CI(t){return t instanceof Ie?(function(n){if(n.op==="=="){if(G_(n.value))return{unaryFilter:{field:Ri(n.field),op:"IS_NAN"}};if(H_(n.value))return{unaryFilter:{field:Ri(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(G_(n.value))return{unaryFilter:{field:Ri(n.field),op:"IS_NOT_NAN"}};if(H_(n.value))return{unaryFilter:{field:Ri(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ri(n.field),op:$N(n.op),value:n.value}}})(t):t instanceof ke?(function(n){const r=n.getFilters().map((s=>CI(s)));return r.length===1?r[0]:{compositeFilter:{op:qN(n.op),filters:r}}})(t):ne(54877,{filter:t})}function HN(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function xI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=Xe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.yt=e}}function GN(t,e){let n;if(e.document)n=bI(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Y.fromSegments(e.noDocument.path),s=Js(e.noDocument.readTime);n=Ge.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne(56709);{const r=Y.fromSegments(e.unknownDocument.path),s=Js(e.unknownDocument.version);n=Ge.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime((function(s){const i=new Ne(s[0],s[1]);return ce.fromTimestamp(i)})(e.readTime)),n}function cy(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Uu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,o){return{name:Ka(i,o.key),fields:o.data.value.mapValue.fields,updateTime:ho(i,o.version.toTimestamp()),createTime:ho(i,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Qs(e.version)};else{if(!e.isUnknownDocument())return ne(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Qs(e.version)}}return r}function Uu(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Qs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Js(t){const e=new Ne(t.seconds,t.nanoseconds);return ce.fromTimestamp(e)}function Cs(t,e){const n=(e.baseMutations||[]).map((i=>Uf(t.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>Uf(t.yt,i))),s=Ne.fromMillis(e.localWriteTimeMs);return new up(e.batchId,s,n,r)}function ua(t){const e=Js(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Js(t.lastLimboFreeSnapshotVersion):ce.min();let r;return r=(function(i){return i.documents!==void 0})(t.query)?(function(i){const o=i.documents.length;return oe(o===1,1966,{count:o}),qt(Ao(TI(i.documents[0])))})(t.query):(function(i){return qt(SI(i))})(t.query),new ir(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Xe.fromBase64String(t.resumeToken))}function DI(t,e){const n=Qs(e.snapshotVersion),r=Qs(e.lastLimboFreeSnapshotVersion);let s;s=Lu(e.target)?AI(t.yt,e.target):RI(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ks(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function pp(t){const e=SI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bu(e,e.limit,"L"):e}function Vh(t,e){return new hp(e.largestBatchId,Uf(t.yt,e.overlayMutation))}function uy(t,e){const n=e.path.lastSegment();return[t,Ot(e.path.popLast()),n]}function ly(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Qs(r.readTime),documentKey:Ot(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{getBundleMetadata(e,n){return hy(e).get(n).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:Js(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,n){return hy(e).put((function(s){return{bundleId:s.id,createTime:Qs(nt(s.createTime)),version:s.version}})(n))}getNamedQuery(e,n){return fy(e).get(n).next((r=>{if(r)return(function(i){return{name:i.name,query:pp(i.bundledQuery),readTime:Js(i.readTime)}})(r)}))}saveNamedQuery(e,n){return fy(e).put((function(s){return{name:s.name,readTime:Qs(nt(s.readTime)),bundledQuery:s.bundledQuery}})(n))}}function hy(t){return pt(t,yl)}function fy(t){return pt(t,vl)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Rl(e,r)}getOverlay(e,n){return Xo(e).get(uy(this.userId,n)).next((r=>r?Vh(this.serializer,r):null))}getOverlays(e,n){const r=jn();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){const s=[];return r.forEach(((i,o)=>{const a=new hp(n,o);s.push(this.St(e,a))})),O.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach((o=>s.add(Ot(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Xo(e).Z(Pf,a))})),O.waitFor(i)}getOverlaysForCollection(e,n,r){const s=jn(),i=Ot(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Xo(e).J(Pf,o).next((a=>{for(const c of a){const l=Vh(this.serializer,c);s.set(l.getKey(),l)}return s}))}getOverlaysForCollectionGroup(e,n,r,s){const i=jn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Xo(e).ee({index:VT,range:a},((c,l,h)=>{const f=Vh(this.serializer,l);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()})).next((()=>i))}St(e,n){return Xo(e).put((function(s,i,o){const[a,c,l]=uy(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:za(s.yt,o.mutation)}})(this.serializer,this.userId,n))}}function Xo(t){return pt(t,wl)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{bt(e){return pt(e,ep)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?Xe.fromUint8Array(r):Xe.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ke(e.integerValue));else if("doubleValue"in e){const r=Ke(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Fa(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=pr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(mr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?qT(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Il(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):ne(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const s=oo,i=r[s].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ke(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),Y.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}xs.Kt=new xs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=255;function WN(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function dy(t){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=WN(255&r[i]);if(s+=o,o!==8)break}return s})(t);return Math.ceil(e/8)}class QN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=dy(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=dy(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(yi),this.sn(255)}_n(){this.an(yi),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===yi?(this.sn(yi),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===yi?(this.an(yi),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class JN{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class YN{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Zo{constructor(){this.cn=new QN,this.ln=new JN(this.cn),this.hn=new YN(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Vs(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:au(this.En),directionalValue:au(this.dn),orderedDocumentKey:au(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function xr(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=py(t.En,e.En),n!==0?n:(n=py(t.dn,e.dn),n!==0?n:Y.comparator(t.In,e.In)))}function py(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function au(t){return KE()?(function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r})(t):t}function my(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(t)}class gy{constructor(e){this.mn=new Oe(((n,r)=>ze.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Af(e);if(n!==void 0&&!this.wn(n))return!1;const r=Rs(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.Sn(a,c)||!this.bn(this.fn[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Oe(ze.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Zc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Zc(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Zc(r.field,r.dir==="asc"?0:1)));return new Nu(Nu.UNKNOWN_ID,this.collectionId,n,La.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t){if(oe(t instanceof Ie||t instanceof ke,20012),t instanceof Ie){if(t instanceof XT){const n=t.value.arrayValue?.values?.map((r=>Ie.create(t.field,"==",r)))||[];return ke.create(n,"or")}return t}const e=t.filters.map((n=>NI(n)));return ke.create(e,t.op)}function XN(t){if(t.getFilters().length===0)return[];const e=qf(NI(t));return oe(kI(e),7391),jf(e)||$f(e)?[e]:e.getFilters()}function jf(t){return t instanceof Ie}function $f(t){return t instanceof ke&&sp(t)}function kI(t){return jf(t)||$f(t)||(function(n){if(n instanceof ke&&Nf(n)){for(const r of n.getFilters())if(!jf(r)&&!$f(r))return!1;return!0}return!1})(t)}function qf(t){if(oe(t instanceof Ie||t instanceof ke,34018),t instanceof Ie)return t;if(t.filters.length===1)return qf(t.filters[0]);const e=t.filters.map((r=>qf(r)));let n=ke.create(e,t.op);return n=ju(n),kI(n)?n:(oe(n instanceof ke,64498),oe(co(n),40251),oe(n.filters.length>1,57927),n.filters.reduce(((r,s)=>mp(r,s))))}function mp(t,e){let n;return oe(t instanceof Ie||t instanceof ke,38388),oe(e instanceof Ie||e instanceof ke,25473),n=t instanceof Ie?e instanceof Ie?(function(s,i){return ke.create([s,i],"and")})(t,e):_y(t,e):e instanceof Ie?_y(e,t):(function(s,i){if(oe(s.filters.length>0&&i.filters.length>0,48005),co(s)&&co(i))return QT(s,i.getFilters());const o=Nf(s)?s:i,a=Nf(s)?i:s,c=o.filters.map((l=>mp(l,a)));return ke.create(c,"or")})(t,e),ju(n)}function _y(t,e){if(co(e))return QT(e,t.getFilters());{const n=e.filters.map((r=>mp(t,r)));return ke.create(n,"or")}}function ju(t){if(oe(t instanceof Ie||t instanceof ke,11850),t instanceof Ie)return t;const e=t.getFilters();if(e.length===1)return ju(e[0]);if(zT(t))return t;const n=e.map((s=>ju(s))),r=[];return n.forEach((s=>{s instanceof Ie?r.push(s):s instanceof ke&&(s.op===t.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:ke.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.Cn=new gp}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(ln.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(ln.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class gp{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Oe(Ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Oe(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="IndexedDbIndexManager",qc=new Uint8Array(0);class ek{constructor(e,n){this.databaseId=n,this.vn=new gp,this.Fn=new vr((r=>Ks(r)),((r,s)=>cc(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const i={collectionId:r,parent:Ot(s)};return vy(e).put(i)}return O.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[gT(n),""],!1,!0);return vy(e).J(s).next((i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Un(o.parent))}return r}))}addFieldIndex(e,n){const r=ea(e),s=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=wi(e);return i.next((a=>{o.put(ly(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return i.next()}deleteFieldIndex(e,n){const r=ea(e),s=wi(e),i=vi(e);return r.delete(n.indexId).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=ea(e),r=vi(e),s=wi(e);return n.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(e,n){return O.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new gy(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,n){const r=vi(e);let s=!0;const i=new Map;return O.forEach(this.Mn(n),(o=>this.xn(e,o).next((a=>{s&&(s=!!a),i.set(o,a)})))).next((()=>{if(s){let o=_e();const a=[];return O.forEach(i,((c,l)=>{G(yy,`Using index ${(function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map((x=>`${x.fieldPath}:${x.kind}`)).join(",")}`})(c)} to execute ${Ks(n)}`);const h=(function(v,x){const k=Af(x);if(k===void 0)return null;for(const U of Fu(v,k.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null})(l,c),f=(function(v,x){const k=new Map;for(const U of Rs(x))for(const b of Fu(v,U.fieldPath))switch(b.op){case"==":case"in":k.set(U.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return k.set(U.fieldPath.canonicalString(),b.value),Array.from(k.values())}return null})(l,c),p=(function(v,x){const k=[];let U=!0;for(const b of Rs(x)){const T=b.kind===0?J_(v,b.fieldPath,v.startAt):Y_(v,b.fieldPath,v.startAt);k.push(T.value),U&&(U=T.inclusive)}return new rs(k,U)})(l,c),m=(function(v,x){const k=[];let U=!0;for(const b of Rs(x)){const T=b.kind===0?Y_(v,b.fieldPath,v.endAt):J_(v,b.fieldPath,v.endAt);k.push(T.value),U&&(U=T.inclusive)}return new rs(k,U)})(l,c),y=this.On(c,l,p),w=this.On(c,l,m),C=this.Nn(c,l,f),N=this.Bn(c.indexId,h,y,p.inclusive,w,m.inclusive,C);return O.forEach(N,(D=>r.Y(D,n.limit).next((v=>{v.forEach((x=>{const k=Y.fromSegments(x.documentKey);o.has(k)||(o=o.add(k),a.push(k))}))}))))})).next((()=>a))}return O.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=XN(ke.create(e.filters,"and")).map((r=>Of(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),l=c/(n!=null?n.length:1),h=[];for(let f=0;f<c;++f){const p=n?this.Ln(n[f/l]):qc,m=this.kn(e,p,r[f%l],s),y=this.qn(e,p,i[f%l],o),w=a.map((C=>this.kn(e,p,C,!0)));h.push(...this.createRange(m,y,w))}return h}kn(e,n,r,s){const i=new Vs(e,Y.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new Vs(e,Y.empty(),n,r);return s?i.An():i}xn(e,n){const r=new gy(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const s=this.Mn(n);return O.forEach(s,(i=>this.xn(e,i).next((o=>{o?r!==0&&o.fields.length<(function(c){let l=new Oe(ze.comparator),h=!1;for(const f of c.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:l=l.add(p.field));for(const f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(h?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&s.length>1&&r===2?1:r))}Qn(e,n){const r=new Zo;for(const s of Rs(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);xs.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Zo;return xs.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Zo;return xs.Kt.Dt(Gs(this.databaseId,n),r.Pn((function(i){const o=Rs(i);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Zo);let i=0;for(const o of Rs(e)){const a=r[i++];for(const c of s)if(this.Un(n,o.fieldPath)&&Ha(a))s=this.Kn(s,o,a);else{const l=c.Pn(o.kind);xs.Kt.Dt(a,l)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new Zo;c.seed(a.un()),xs.Kt.Dt(o,c.Pn(n.kind)),i.push(c)}return i}Un(e,n){return!!e.filters.find((r=>r instanceof Ie&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=ea(e),s=wi(e);return(n?r.J(Sf,IDBKeyRange.bound(n,n)):r.J()).next((i=>{const o=[];return O.forEach(i,(a=>s.get([a.indexId,this.uid]).next((c=>{o.push((function(h,f){const p=f?new La(f.sequenceNumber,new ln(Js(f.readTime),new Y(Un(f.documentKey)),f.largestBatchId)):La.empty(),m=h.fields.map((([y,w])=>new Zc(ze.fromServerFormat(y),w)));return new Nu(h.indexId,h.collectionGroup,m,p)})(a,c))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ge(r.collectionGroup,s.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const s=ea(e),i=wi(e);return this.Gn(e).next((o=>s.J(Sf,IDBKeyRange.bound(n,n)).next((a=>O.forEach(a,(c=>i.put(ly(c.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,((s,i)=>{const o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((a=>(r.set(s.collectionGroup,a),O.forEach(a,(c=>this.zn(e,s,c).next((l=>{const h=this.jn(i,c);return l.isEqual(h)?O.resolve():this.Jn(e,i,c,l,h)})))))))}))}Hn(e,n,r,s){return vi(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return vi(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=vi(e);let i=new Oe(xr);return s.ee({index:xT,range:IDBKeyRange.only([r.indexId,this.uid,au(this.$n(r,n))])},((o,a)=>{i=i.add(new Vs(r.indexId,n,my(a.arrayValue),my(a.directionalValue)))})).next((()=>i))}jn(e,n){let r=new Oe(xr);const s=this.Qn(n,e);if(s==null)return r;const i=Af(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Ha(o))for(const a of o.arrayValue.values||[])r=r.add(new Vs(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new Vs(n.indexId,e.key,qc,s));return r}Jn(e,n,r,s,i){G(yy,"Updating index entries for document '%s'",n.key);const o=[];return(function(c,l,h,f,p){const m=c.getIterator(),y=l.getIterator();let w=_i(m),C=_i(y);for(;w||C;){let N=!1,D=!1;if(w&&C){const v=h(w,C);v<0?D=!0:v>0&&(N=!0)}else w!=null?D=!0:N=!0;N?(f(C),C=_i(y)):D?(p(w),w=_i(m)):(w=_i(m),C=_i(y))}})(s,i,xr,(a=>{o.push(this.Hn(e,n,r,a))}),(a=>{o.push(this.Yn(e,n,r,a))})),O.waitFor(o)}Gn(e){let n=1;return wi(e).ee({index:CT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),n=s.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>xr(o,a))).filter(((o,a,c)=>!a||xr(o,c[a-1])!==0));const s=[];s.push(e);for(const o of r){const a=xr(o,e),c=xr(o,n);if(a===0)s[0]=e.An();else if(a>0&&c<0)s.push(o),s.push(o.An());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,qc,Y.empty()),c=s[o+1].Vn(this.uid,qc,Y.empty());i.push(IDBKeyRange.bound(a,c))}return i}Zn(e,n){return xr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(wy)}getMinOffset(e,n){return O.mapArray(this.Mn(n),(r=>this.xn(e,r).next((s=>s||ne(44426))))).next(wy)}}function vy(t){return pt(t,ja)}function vi(t){return pt(t,Ea)}function ea(t){return pt(t,Zd)}function wi(t){return pt(t,wa)}function wy(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Jd(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new ln(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OI=41943040;class xt{static withCacheSize(e){return new xt(e,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t,e,n){const r=t.store(wn),s=t.store(no),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.ee({range:o},((h,f,p)=>(a++,p.delete())));i.push(c.next((()=>{oe(a===1,47070,{batchId:n.batchId})})));const l=[];for(const h of n.mutations){const f=RT(e,h.key.path,n.batchId);i.push(s.delete(f)),l.push(h.key)}return O.waitFor(i).next((()=>l))}function $u(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xt.DEFAULT_COLLECTION_PERCENTILE=10,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xt.DEFAULT=new xt(OI,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xt.DISABLED=new xt(-1,0,0);class Sl{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){oe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Sl(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).ee({index:ks,range:r},((s,i,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,s){const i=Pi(e),o=Vr(e);return o.add({}).next((a=>{oe(typeof a=="number",49019);const c=new up(a,n,r,s),l=(function(m,y,w){const C=w.baseMutations.map((D=>za(m.yt,D))),N=w.mutations.map((D=>za(m.yt,D)));return{userId:y,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:C,mutations:N}})(this.serializer,this.userId,c),h=[];let f=new Oe(((p,m)=>ge(p.canonicalString(),m.canonicalString())));for(const p of s){const m=RT(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(i.put(m,kD))}return f.forEach((p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))})),e.addOnCommittedListener((()=>{this.Xn[a]=c.keys()})),O.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return Vr(e).get(n).next((r=>r?(oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Cs(this.serializer,r)):null))}er(e,n){return this.Xn[n]?O.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Vr(e).ee({index:ks,range:s},((o,a,c)=>{a.userId===this.userId&&(oe(a.batchId>=r,47524,{tr:r}),i=Cs(this.serializer,a)),c.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Qr;return Vr(e).ee({index:ks,range:n,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Qr],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).J(ks,n).next((r=>r.map((s=>Cs(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=eu(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Pi(e).ee({range:s},((o,a,c)=>{const[l,h,f]=o,p=Un(h);if(l===this.userId&&n.path.isEqual(p))return Vr(e).get(f).next((m=>{if(!m)throw ne(61480,{nr:o,batchId:f});oe(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:f}),i.push(Cs(this.serializer,m))}));c.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(ge);const s=[];return n.forEach((i=>{const o=eu(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Pi(e).ee({range:a},((l,h,f)=>{const[p,m,y]=l,w=Un(m);p===this.userId&&i.path.isEqual(w)?r=r.add(y):f.done()}));s.push(c)})),O.waitFor(s).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=eu(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Oe(ge);return Pi(e).ee({range:o},((c,l,h)=>{const[f,p,m]=c,y=Un(p);f===this.userId&&r.isPrefixOf(y)?y.length===s&&(a=a.add(m)):h.done()})).next((()=>this.rr(e,a)))}rr(e,n){const r=[],s=[];return n.forEach((i=>{s.push(Vr(e).get(i).next((o=>{if(o===null)throw ne(35274,{batchId:i});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Cs(this.serializer,o))})))})),O.waitFor(s).next((()=>r))}removeMutationBatch(e,n){return MI(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),O.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return Pi(e).ee({range:r},((i,o,a)=>{if(i[0]===this.userId){const c=Un(i[1]);s.push(c)}else a.done()})).next((()=>{oe(s.length===0,56720,{sr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,n){return LI(e,this.userId,n)}_r(e){return FI(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Qr,lastStreamToken:""}))}}function LI(t,e,n){const r=eu(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Pi(t).ee({range:i,X:!0},((a,c,l)=>{const[h,f,p]=a;h===e&&f===s&&(o=!0),l.done()})).next((()=>o))}function Vr(t){return pt(t,wn)}function Pi(t){return pt(t,no)}function FI(t){return pt(t,Ba)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ys(0)}static cr(){return new Ys(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Ys(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>ce.fromTimestamp(new Ne(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Ei(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(oe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let s=0;const i=[];return Ei(e).ee(((o,a)=>{const c=ua(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))})).next((()=>O.waitFor(i))).next((()=>s))}forEachTarget(e,n){return Ei(e).ee(((r,s)=>{const i=ua(s);n(i)}))}lr(e){return Ty(e).get(Mu).next((n=>(oe(n!==null,2888),n)))}hr(e,n){return Ty(e).put(Mu,n)}Pr(e,n){return Ei(e).put(DI(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Ks(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Ei(e).ee({range:s,index:PT},((o,a,c)=>{const l=ua(a);cc(n,l.target)&&(i=l,c.done())})).next((()=>i))}addMatchingKeys(e,n,r){const s=[],i=Br(e);return n.forEach((o=>{const a=Ot(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))})),O.waitFor(s)}removeMatchingKeys(e,n,r){const s=Br(e);return O.forEach(n,(i=>{const o=Ot(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,n){const r=Br(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Br(e);let i=_e();return s.ee({range:r,X:!0},((o,a,c)=>{const l=Un(o[1]),h=new Y(l);i=i.add(h)})).next((()=>i))}containsKey(e,n){const r=Ot(n.path),s=IDBKeyRange.bound([r],[gT(r)],!1,!0);let i=0;return Br(e).ee({index:Xd,X:!0,range:s},(([o,a],c,l)=>{o!==0&&(i++,l.done())})).next((()=>i>0))}At(e,n){return Ei(e).get(n).next((r=>r?ua(r):null))}}function Ei(t){return pt(t,ro)}function Ty(t){return pt(t,js)}function Br(t){return pt(t,so)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="LruGarbageCollector",nk=1048576;function by([t,e],[n,r]){const s=ge(t,n);return s===0?ge(e,r):s}class rk{constructor(e){this.Ir=e,this.buffer=new Oe(by),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();by(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){G(Iy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){us(n)?G(Iy,"Ignoring IndexedDB error during garbage collection: ",n):await cs(n)}await this.Vr(3e5)}))}}class sk{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Qt.ce);const r=new rk(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Ey)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ey):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,c,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s)))).next((f=>(r=f,a=Date.now(),this.removeTargets(e,r,n)))).next((f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(l=Date.now(),bi()<=be.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f}))))}}function UI(t,e){return new sk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this.db=e,this.garbageCollector=UI(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,s)=>n(s)))}addReference(e,n,r){return Hc(e,r)}removeReference(e,n,r){return Hc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Hc(e,n)}br(e,n){return(function(s,i){let o=!1;return FI(s).te((a=>LI(s,a,i).next((c=>(c&&(o=!0),O.resolve(!c)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,((o,a)=>{if(a<=n){const c=this.br(e,o).next((l=>{if(!l)return i++,r.getEntry(e,o).next((()=>(r.removeEntry(o,ce.min()),Br(e).delete((function(f){return[0,Ot(f.path)]})(o)))))}));s.push(c)}})).next((()=>O.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Hc(e,n)}Sr(e,n){const r=Br(e);let s,i=Qt.ce;return r.ee({index:Xd},(([o,a],{path:c,sequenceNumber:l})=>{o===0?(i!==Qt.ce&&n(new Y(Un(s)),i),i=l,s=c):i=Qt.ce})).next((()=>{i!==Qt.ce&&n(new Y(Un(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hc(t,e){return Br(t).put((function(r,s){return{targetId:0,path:Ot(r.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.changes=new vr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ge.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ts(e).put(r)}removeEntry(e,n,r){return Ts(e).delete((function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Uu(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=Ge.newInvalidDocument(n);return Ts(e).ee({index:tu,range:IDBKeyRange.only(ta(n))},((s,i)=>{r=this.Cr(n,i)})).next((()=>r))}vr(e,n){let r={size:0,document:Ge.newInvalidDocument(n)};return Ts(e).ee({index:tu,range:IDBKeyRange.only(ta(n))},((s,i)=>{r={document:this.Cr(n,i),size:$u(i)}})).next((()=>r))}getEntries(e,n){let r=Yt();return this.Fr(e,n,((s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)})).next((()=>r))}Mr(e,n){let r=Yt(),s=new qe(Y.comparator);return this.Fr(e,n,((i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,$u(o))})).next((()=>({documents:r,Or:s})))}Fr(e,n,r){if(n.isEmpty())return O.resolve();let s=new Oe(Sy);n.forEach((c=>s=s.add(c)));const i=IDBKeyRange.bound(ta(s.first()),ta(s.last())),o=s.getIterator();let a=o.getNext();return Ts(e).ee({index:tu,range:i},((c,l,h)=>{const f=Y.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Sy(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.j(ta(a)):h.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Uu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ts(e).J(IDBKeyRange.bound(a,c,!0)).next((l=>{i?.incrementDocumentReadCount(l.length);let h=Yt();for(const f of l){const p=this.Cr(Y.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(lc(n,p)||s.has(p.key))&&(h=h.insert(p.key,p))}return h}))}getAllFromCollectionGroup(e,n,r,s){let i=Yt();const o=Ry(n,r),a=Ry(n,ln.max());return Ts(e).ee({index:ST,range:IDBKeyRange.bound(o,a,!0)},((c,l,h)=>{const f=this.Cr(Y.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);i=i.insert(f.key,f),i.size===s&&h.done()})).next((()=>i))}newChangeBuffer(e){return new ak(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return Ay(e).get(Rf).next((n=>(oe(!!n,20021),n)))}Dr(e,n){return Ay(e).put(Rf,n)}Cr(e,n){if(n){const r=GN(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ce.min())))return r}return Ge.newInvalidDocument(e)}}function $I(t){return new ok(t)}class ak extends jI{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new vr((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const n=[];let r=0,s=new Oe(((i,o)=>ge(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=cy(this.Nr.serializer,o);s=s.add(i.path.popLast());const l=$u(c);r+=l-a.size,n.push(this.Nr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=cy(this.Nr.serializer,o.convertToNoDocument(ce.min()));n.push(this.Nr.addEntry(e,i,c))}})),s.forEach((i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))})),n.push(this.Nr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:s})=>(s.forEach(((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function Ay(t){return pt(t,Ua)}function Ts(t){return pt(t,Ou)}function ta(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ry(t,e){const n=e.documentKey.path.toArray();return[t,Uu(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Sy(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ge(n[i],r[i]),s)return s;return s=ge(n.length,r.length),s||(s=ge(n[n.length-2],r[r.length-2]),s||ge(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&ba(r.mutation,s,Jt.empty(),Ne.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,_e()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=_e()){const s=jn();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=aa();return i.forEach(((a,c)=>{o=o.insert(a,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=jn();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,_e())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,s){let i=Yt();const o=Ia(),a=(function(){return Ia()})();return n.forEach(((c,l)=>{const h=r.get(l.key);s.has(l.key)&&(h===void 0||h.mutation instanceof wr)?i=i.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),ba(h.mutation,l,h.mutation.getFieldMask(),Ne.now())):o.set(l.key,Jt.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((l,h)=>o.set(l,h))),n.forEach(((l,h)=>a.set(l,new ck(h,o.get(l)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=Ia();let s=new qe(((o,a)=>o-a)),i=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((c=>{const l=n.get(c);if(l===null)return;let h=r.get(c)||Jt.empty();h=a.applyToLocalView(l,h),r.set(c,h);const f=(s.get(a.batchId)||_e()).add(c);s=s.insert(a.batchId,f)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,h=c.value,f=iI();h.forEach((p=>{if(!i.has(p)){const m=fI(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return O.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ip(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(jn());let a=to,c=i;return o.next((l=>O.forEach(l,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{c=c.insert(h,p)}))))).next((()=>this.populateOverlays(e,l,i))).next((()=>this.computeViews(e,c,l,_e()))).next((h=>({batchId:a,changes:sI(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next((r=>{let s=aa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=aa();return this.indexManager.getCollectionParents(e,i).next((a=>O.forEach(a,(c=>{const l=(function(f,p){return new yr(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r,s).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((c,l)=>{const h=l.getKey();o.get(h)===null&&(o=o.insert(h,Ge.newInvalidDocument(h)))}));let a=aa();return o.forEach(((c,l)=>{const h=i.get(c);h!==void 0&&ba(h.mutation,l,Jt.empty(),Ne.now()),lc(n,l)&&(a=a.insert(c,l))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:nt(s.createTime)}})(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:pp(s.bundledQuery),readTime:nt(s.readTime)}})(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.overlays=new qe(Y.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=jn();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=jn(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new qe(((l,h)=>l-h));const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=i.get(l.largestBatchId);h===null&&(h=jn(),i=i.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=jn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((l,h)=>a.set(l,h))),!(a.size()>=s)););return O.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hp(n,r));let i=this.qr.get(n);i===void 0&&(i=_e(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this.Qr=new Oe(_t.$r),this.Ur=new Oe(_t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new _t(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Y(new Ee([])),r=new _t(n,e),s=new _t(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new Ee([])),r=new _t(n,e),s=new _t(n,e+1);let i=_e();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new _t(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||ge(e.Yr,n.Yr)}static Kr(e,n){return ge(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Oe(_t.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new up(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new _t(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Qr:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const a=this.Xr(o.Yr);i.push(a)})),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(ge);return n.forEach((s=>{const i=new _t(s,0),o=new _t(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{r=r.add(a.Yr)}))})),O.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new _t(new Y(i),0);let a=new Oe(ge);return this.Zr.forEachWhile((c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c.Yr)),!0)}),o),O.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return O.forEach(n.mutations,(s=>{const i=new _t(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new _t(n,0),s=this.Zr.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.ri=e,this.docs=(function(){return new qe(Y.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Ge.newInvalidDocument(n))}getEntries(e,n){let r=Yt();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ge.newInvalidDocument(s))})),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yt();const o=n.path,a=new Y(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Jd(ET(h),r)<=0||(s.has(h.key)||lc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ii(e,n){return O.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new pk(this)}getSize(e){return O.resolve(this.size)}}class pk extends jI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.persistence=e,this.si=new vr((n=>Ks(n)),cc),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.oi=0,this._i=new _p,this.targetCount=0,this.ai=Ys.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ys(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),O.waitFor(i).next((()=>s))}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n){this.ui={},this.overlays={},this.ci=new Qt(0),this.li=!1,this.li=!0,this.hi=new hk,this.referenceDelegate=e(this),this.Pi=new mk(this),this.indexManager=new ZN,this.remoteDocumentCache=(function(s){return new dk(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new VI(n),this.Ii=new uk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new fk(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new gk(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return O.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class gk extends IT{constructor(e){super(),this.currentSequenceNumber=e}}class Pl{constructor(e){this.persistence=e,this.Ri=new _p,this.Vi=null}static mi(e){return new Pl(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,(r=>{const s=Y.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,ce.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class qu{constructor(e,n){this.persistence=e,this.pi=new vr((r=>Ot(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=UI(this,n)}static mi(e,n){return new qu(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return O.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?O.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,i.removeEntry(o,ce.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ru(e.data.value)),n}br(e,n,r){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return O.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.serializer=e}k(e,n,r,s){const i=new _l("createOrUpgrade",n);r<1&&s>=1&&((function(c){c.createObjectStore(ac)})(e),(function(c){c.createObjectStore(Ba,{keyPath:ND}),c.createObjectStore(wn,{keyPath:F_,autoIncrement:!0}).createIndex(ks,B_,{unique:!0}),c.createObjectStore(no)})(e),Py(e),(function(c){c.createObjectStore(Ss)})(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&((function(c){c.deleteObjectStore(so),c.deleteObjectStore(ro),c.deleteObjectStore(js)})(e),Py(e)),o=o.next((()=>(function(c){const l=c.store(js),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ce.min().toTimestamp(),targetCount:0};return l.put(Mu,h)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(c,l){return l.store(wn).J().next((f=>{c.deleteObjectStore(wn),c.createObjectStore(wn,{keyPath:F_,autoIncrement:!0}).createIndex(ks,B_,{unique:!0});const p=l.store(wn),m=f.map((y=>p.put(y)));return O.waitFor(m)}))})(e,i)))),o=o.next((()=>{(function(c){c.createObjectStore(io,{keyPath:$D})})(e)}))),r<5&&s>=5&&(o=o.next((()=>this.yi(i)))),r<6&&s>=6&&(o=o.next((()=>((function(c){c.createObjectStore(Ua)})(e),this.wi(i))))),r<7&&s>=7&&(o=o.next((()=>this.Si(i)))),r<8&&s>=8&&(o=o.next((()=>this.bi(e,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(o=o.next((()=>this.Di(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(c){c.createObjectStore(yl,{keyPath:qD})})(e),(function(c){c.createObjectStore(vl,{keyPath:HD})})(e)}))),r<12&&s>=12&&(o=o.next((()=>{(function(c){const l=c.createObjectStore(wl,{keyPath:YD});l.createIndex(Pf,XD,{unique:!1}),l.createIndex(VT,ZD,{unique:!1})})(e)}))),r<13&&s>=13&&(o=o.next((()=>(function(c){const l=c.createObjectStore(Ou,{keyPath:OD});l.createIndex(tu,MD),l.createIndex(ST,LD)})(e))).next((()=>this.Ci(e,i))).next((()=>e.deleteObjectStore(Ss)))),r<14&&s>=14&&(o=o.next((()=>this.Fi(e,i)))),r<15&&s>=15&&(o=o.next((()=>(function(c){c.createObjectStore(Zd,{keyPath:GD,autoIncrement:!0}).createIndex(Sf,KD,{unique:!1}),c.createObjectStore(wa,{keyPath:zD}).createIndex(CT,WD,{unique:!1}),c.createObjectStore(Ea,{keyPath:QD}).createIndex(xT,JD,{unique:!1})})(e)))),r<16&&s>=16&&(o=o.next((()=>{n.objectStore(wa).clear()})).next((()=>{n.objectStore(Ea).clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(c){c.createObjectStore(ep,{keyPath:eN})})(e)}))),r<18&&s>=18&&KE()&&(o=o.next((()=>{n.objectStore(wa).clear()})).next((()=>{n.objectStore(Ea).clear()}))),o}wi(e){let n=0;return e.store(Ss).ee(((r,s)=>{n+=$u(s)})).next((()=>{const r={byteSize:n};return e.store(Ua).put(Rf,r)}))}yi(e){const n=e.store(Ba),r=e.store(wn);return n.J().next((s=>O.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,Qr],[i.userId,i.lastAcknowledgedBatchId]);return r.J(ks,o).next((a=>O.forEach(a,(c=>{oe(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const l=Cs(this.serializer,c);return MI(e,i.userId,l).next((()=>{}))}))))}))))}Si(e){const n=e.store(so),r=e.store(Ss);return e.store(js).get(Mu).next((s=>{const i=[];return r.ee(((o,a)=>{const c=new Ee(o),l=(function(f){return[0,Ot(f)]})(c);i.push(n.get(l).next((h=>h?O.resolve():(f=>n.put({targetId:0,path:Ot(f),sequenceNumber:s.highestListenSequenceNumber}))(c))))})).next((()=>O.waitFor(i)))}))}bi(e,n){e.createObjectStore(ja,{keyPath:jD});const r=n.store(ja),s=new gp,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Ot(c)})}};return n.store(Ss).ee({X:!0},((o,a)=>{const c=new Ee(o);return i(c.popLast())})).next((()=>n.store(no).ee({X:!0},(([o,a,c],l)=>{const h=Un(a);return i(h.popLast())}))))}Di(e){const n=e.store(ro);return n.ee(((r,s)=>{const i=ua(s),o=DI(this.serializer,i);return n.put(o)}))}Ci(e,n){const r=n.store(Ss),s=[];return r.ee(((i,o)=>{const a=n.store(Ou),c=(function(f){return f.document?new Y(Ee.fromString(f.document.name).popFirst(5)):f.noDocument?Y.fromSegments(f.noDocument.path):f.unknownDocument?Y.fromSegments(f.unknownDocument.path):ne(36783)})(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(l))})).next((()=>O.waitFor(s)))}Fi(e,n){const r=n.store(wn),s=$I(this.serializer),i=new yp(Pl.mi,this.serializer.yt);return r.J().next((o=>{const a=new Map;return o.forEach((c=>{let l=a.get(c.userId)??_e();Cs(this.serializer,c).keys().forEach((h=>l=l.add(h))),a.set(c.userId,l)})),O.forEach(a,((c,l)=>{const h=new yt(l),f=Rl.wt(this.serializer,h),p=i.getIndexManager(h),m=Sl.wt(h,this.serializer,p,i.referenceDelegate);return new qI(s,m,f,p).recalculateAndSaveOverlaysForDocumentKeys(new Cf(n,Qt.ce),c).next()}))}))}}function Py(t){t.createObjectStore(so,{keyPath:BD}).createIndex(Xd,UD,{unique:!0}),t.createObjectStore(ro,{keyPath:"targetId"}).createIndex(PT,FD,{unique:!0}),t.createObjectStore(js)}const Dr="IndexedDbPersistence",Dh=18e5,Nh=5e3,kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",HI="main";class vp{constructor(e,n,r,s,i,o,a,c,l,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=l,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!vp.v())throw new q(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ik(this,s),this.$i=n+HI,this.serializer=new VI(c),this.Ui=new qn(this.$i,this.Ni,new _k(this.serializer)),this.hi=new zN,this.Pi=new tk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$I(this.serializer),this.Ii=new KN,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&et(Dr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,kh);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Qt(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Gc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(us(e))return G(Dr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G(Dr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return na(e).get(gi).next((n=>O.resolve(this.es(n))))}ts(e){return Gc(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Dh)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=pt(n,io);return r.J().next((s=>{const i=this.ss(s,Dh),o=s.filter((a=>i.indexOf(a)===-1));return O.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?O.resolve(!0):na(e).get(gi).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Nh)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,kh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gc(e).J().next((r=>this.ss(r,Nh).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&G(Dr,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ac,io],(e=>{const n=new Cf(e,Qt.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Gc(e).J().next((n=>this.ss(n,Dh).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Sl.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ek(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Rl.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){G(Dr,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(function(c){return c===18?rN:c===17?OT:c===16?nN:c===15?tp:c===14?kT:c===13?NT:c===12?tN:c===11?DT:void ne(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,s,i,(a=>(o=new Cf(a,this.ci?this.ci.next():Qt.ce),n==="readwrite-primary"?this.Hi(o).next((c=>!!c||this.Yi(o))).next((c=>{if(!c)throw et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new q(F.FAILED_PRECONDITION,TT);return r(o)})).next((c=>this.Xi(o).next((()=>c)))):this.Is(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Is(e){return na(e).get(gi).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Nh)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(F.FAILED_PRECONDITION,kh)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return na(e).put(gi,n)}static v(){return qn.v()}Zi(e){const n=na(e);return n.get(gi).next((r=>this.es(r)?(G(Dr,"Releasing primary lease."),n.delete(gi)):O.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;GE()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return G(Dr,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return et(Dr,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){et("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function na(t){return pt(t,ac)}function Gc(t){return pt(t,io)}function wp(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=_e(),s=_e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ep(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return GE()?8:bT(Vu())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new yk;return this.Ss(e,n,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(bi()<=be.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Ai(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(bi()<=be.DEBUG&&G("QueryEngine","Query:",Ai(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(bi()<=be.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Ai(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qt(n))):O.resolve())}ys(e,n){if(X_(n))return O.resolve(null);let r=qt(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Bu(n,null,"F"),r=qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=_e(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const l=this.Ds(n,a);return this.Cs(n,l,o,c.readTime)?this.ys(e,Bu(n,null,"F")):this.vs(e,l,n,c)}))))})))))}ws(e,n,r,s){return X_(n)||s.isEqual(ce.min())?O.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?O.resolve(null):(bi()<=be.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ai(n)),this.vs(e,o,n,wT(s,to)).next((a=>a)))}))}Ds(e,n){let r=new Oe(nI(e));return n.forEach(((s,i)=>{lc(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return bi()<=be.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Ai(n)),this.ps.getDocumentsMatchingQuery(e,n,ln.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="LocalStore",vk=3e8;class wk{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new qe(ge),this.xs=new vr((i=>Ks(i)),cc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function KI(t,e,n,r){return new wk(t,e,n,r)}async function zI(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let c=_e();for(const l of s){o.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}for(const l of i){a.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((l=>({Ls:l,removedBatchIds:o,addedBatchIds:a})))}))}))}function Ek(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,h){const f=l.batch,p=f.keys();let m=O.resolve();return p.forEach((y=>{m=m.next((()=>h.getEntry(c,y))).next((w=>{const C=l.docVersions.get(y);oe(C!==null,48541),w.version.compareTo(C)<0&&(f.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),h.addEntry(w)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(c,f)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=_e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function WI(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Tk(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach(((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f))));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Xe.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(f,m),(function(w,C,N){return w.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=vk?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))}));let c=Yt(),l=_e();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(QI(i,o,e.documentUpdates).next((h=>{c=h.ks,l=h.qs}))),!r.isEqual(ce.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return O.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,l))).next((()=>c))})).then((i=>(n.Ms=s,i)))}function QI(t,e,n){let r=_e(),s=_e();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=Yt();return n.forEach(((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):G(Tp,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)})),{ks:o,qs:s}}))}function Ik(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Qr),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function fo(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,O.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new ir(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function po(t,e,n){const r=Z(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!us(o))throw o;G(Tp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Hu(t,e,n){const r=Z(t);let s=ce.min(),i=_e();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,l,h){const f=Z(c),p=f.xs.get(h);return p!==void 0?O.resolve(f.Ms.get(p)):f.Pi.getTargetData(l,h)})(r,o,qt(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((c=>{i=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:_e()))).next((a=>(XI(r,tI(e),a),{documents:a,Qs:i})))))}function JI(t,e){const n=Z(t),r=Z(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(i=>r.At(i,e).next((o=>o?o.target:null))))}function YI(t,e){const n=Z(t),r=n.Os.get(e)||ce.min();return n.persistence.runTransaction("Get new document changes","readonly",(s=>n.Ns.getAllFromCollectionGroup(s,e,wT(r,to),Number.MAX_SAFE_INTEGER))).then((s=>(XI(n,e,s),s)))}function XI(t,e,n){let r=t.Os.get(e)||ce.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}async function bk(t,e,n,r){const s=Z(t);let i=_e(),o=Yt();for(const l of n){const h=e.$s(l.metadata.name);l.document&&(i=i.add(h));const f=e.Us(l);f.setReadTime(e.Ks(l.metadata.readTime)),o=o.insert(h,f)}const a=s.Ns.newChangeBuffer({trackRemovals:!0}),c=await fo(s,(function(h){return qt(Ao(Ee.fromString(`__bundle__/docs/${h}`)))})(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",(l=>QI(l,a,o).next((h=>(a.apply(l),h))).next((h=>s.Pi.removeMatchingKeysForTargetId(l,c.targetId).next((()=>s.Pi.addMatchingKeys(l,i,c.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(l,h.ks,h.qs))).next((()=>h.ks))))))}async function Ak(t,e,n=_e()){const r=await fo(t,qt(pp(e.bundledQuery))),s=Z(t);return s.persistence.runTransaction("Save named query","readwrite",(i=>{const o=nt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ii.saveNamedQuery(i,e);const a=r.withResumeToken(Xe.EMPTY_BYTE_STRING,o);return s.Ms=s.Ms.insert(a.targetId,a),s.Pi.updateTargetData(i,a).next((()=>s.Pi.removeMatchingKeysForTargetId(i,r.targetId))).next((()=>s.Pi.addMatchingKeys(i,n,r.targetId))).next((()=>s.Ii.saveNamedQuery(i,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firestore_clients";function Cy(t,e){return`${ZI}_${t}_${e}`}const eb="firestore_mutations";function xy(t,e,n){let r=`${eb}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const tb="firestore_targets";function Oh(t,e){return`${tb}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="SharedClientState";class Gu{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new q(s.error.code,s.error.message))),o?new Gu(e,n,s.state,i):(et(Ln,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Aa{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new q(r.error.code,r.error.message))),i?new Aa(e,r.state,s):(et(Ln,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ku{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=op();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=AT(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Ku(e,i):(et(Ln,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Ip{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Ip(n.clientId,n.onlineState):(et(Ln,`Failed to parse online state: ${e}`),null)}}class Hf{constructor(){this.activeTargetIds=op()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mh{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new qe(ge),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Cy(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Hf),this.ro=new RegExp(`^${ZI}_${o}_([^_]*)$`),this.io=new RegExp(`^${eb}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${tb}_${o}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Cy(this.persistenceKey,r));if(s){const i=Ku.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Oh(this.persistenceKey,e));if(s){const i=Aa.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Oh(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((s=>{this.Po(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return G(Ln,"READ",e,n),n}setItem(e,n){G(Ln,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){G(Ln,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(G(Ln,"EVENT",n.key,n.newValue),n.key===this.eo)return void et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(i){let o=Qt.ce;if(i!=null)try{const a=JSON.parse(i);oe(typeof a=="number",30636,{So:i}),o=a}catch(a){et(Ln,"Failed to read sequence number from WebStorage",a)}return o})(n.newValue);r!==Qt.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new Gu(this.currentUser,e,n,r),i=xy(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=xy(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=Oh(this.persistenceKey,e),i=new Aa(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Ku.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Gu.Ws(new yt(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return Aa.Ws(s,n)}uo(e){return Ip.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);G(Ln,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach((c=>{s.has(c)||o.push(c)})),s.forEach((c=>{i.has(c)||a.push(c)})),this.syncEngine.Fo(o,a).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=op();return e.forEach(((r,s)=>{n=n.unionWith(s.activeTargetIds)})),n}}class nb{constructor(){this.Mo=new Hf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="ConnectivityMonitor";class Dy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){G(Vy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){G(Vy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc=null;function Gf(){return Kc===null?Kc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kc++,"0x"+Kc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="RestConnection",Sk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Pk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===xf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Gf(),a=this.zo(e,n.toUriEncodedString());G(Lh,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:l}=new URL(a),h=Bd(l);return this.Jo(e,a,c,r,h).then((f=>(G(Lh,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw zn(Lh,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=Sk[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class xk extends Pk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Gf();return new Promise(((a,c)=>{const l=new uT;l.setWithCredentials(!0),l.listenOnce(lT.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case Xc.NO_ERROR:const f=l.getResponseJson();G(Ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Xc.TIMEOUT:G(Ct,`RPC '${e}' ${o} timed out`),c(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Xc.HTTP_ERROR:const p=l.getStatus();if(G(Ct,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const w=(function(N){const D=N.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(D)>=0?D:F.UNKNOWN})(y.status);c(new q(w,y.message))}else c(new q(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new q(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{G(Ct,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);G(Ct,`RPC '${e}' ${o} sending request:`,s),l.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=Gf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dT(),a=fT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");G(Ct,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,m=!1;const y=new Ck({Yo:C=>{m?G(Ct,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(p||(G(Ct,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),G(Ct,`RPC '${e}' stream ${s} sending:`,C),f.send(C))},Zo:()=>f.close()}),w=(C,N,D)=>{C.listen(N,(v=>{try{D(v)}catch(x){setTimeout((()=>{throw x}),0)}}))};return w(f,oa.EventType.OPEN,(()=>{m||(G(Ct,`RPC '${e}' stream ${s} transport opened.`),y.o_())})),w(f,oa.EventType.CLOSE,(()=>{m||(m=!0,G(Ct,`RPC '${e}' stream ${s} transport closed`),y.a_(),this.E_(f))})),w(f,oa.EventType.ERROR,(C=>{m||(m=!0,zn(Ct,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),y.a_(new q(F.UNAVAILABLE,"The operation could not be completed")))})),w(f,oa.EventType.MESSAGE,(C=>{if(!m){const N=C.data[0];oe(!!N,16349);const D=N,v=D?.error||D[0]?.error;if(v){G(Ct,`RPC '${e}' stream ${s} received error:`,v);const x=v.status;let k=(function(T){const E=st[T];if(E!==void 0)return mI(E)})(x),U=v.message;k===void 0&&(k=F.INTERNAL,U="Unknown error status: "+x+" with message "+v.message),m=!0,y.a_(new q(k,U)),f.close()}else G(Ct,`RPC '${e}' stream ${s} received:`,N),y.u_(N)}})),w(a,hT.STAT_EVENT,(C=>{C.stat===If.PROXY?G(Ct,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===If.NOPROXY&&G(Ct,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{y.__()}),0),y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){return typeof window<"u"?window:null}function cu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){return new ON(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="PersistentStream";class sb{constructor(e,n,r,s,i,o,a,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(et(n.toString()),et("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return G(Ny,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(G(Ny,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Vk extends sb{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=FN(this.serializer,e),r=(function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?nt(o.readTime):ce.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Bf(this.serializer),n.addTarget=(function(i,o){let a;const c=o.target;if(a=Lu(c)?{documents:AI(i,c)}:{query:RI(i,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=vI(i,o.resumeToken);const l=Lf(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=ho(i,o.snapshotVersion.toTimestamp());const l=Lf(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);const r=UN(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Bf(this.serializer),n.removeTarget=e,this.q_(n)}}class Dk extends sb{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=BN(e.writeResults,e.commitTime),r=nt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Bf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>za(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{}class kk extends Nk{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Ff(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(F.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Ff(n,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ok{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(et(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="RemoteStore";class Mk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{hs(this)&&(G(Xs,"Restarting streams for network reachability change."),await(async function(c){const l=Z(c);l.Ea.add(4),await Po(l),l.Ra.set("Unknown"),l.Ea.delete(4),await mc(l)})(this))}))})),this.Ra=new Ok(r,s)}}async function mc(t){if(hs(t))for(const e of t.da)await e(!0)}async function Po(t){for(const e of t.da)await e(!1)}function Cl(t,e){const n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Sp(n)?Rp(n):xo(n).O_()&&Ap(n,e))}function mo(t,e){const n=Z(t),r=xo(n);n.Ia.delete(e),r.O_()&&ib(n,e),n.Ia.size===0&&(r.O_()?r.L_():hs(n)&&n.Ra.set("Unknown"))}function Ap(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xo(t).Y_(e)}function ib(t,e){t.Va.Ue(e),xo(t).Z_(e)}function Rp(t){t.Va=new VN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),xo(t).start(),t.Ra.ua()}function Sp(t){return hs(t)&&!xo(t).x_()&&t.Ia.size>0}function hs(t){return Z(t).Ea.size===0}function ob(t){t.Va=void 0}async function Lk(t){t.Ra.set("Online")}async function Fk(t){t.Ia.forEach(((e,n)=>{Ap(t,e)}))}async function Bk(t,e){ob(t),Sp(t)?(t.Ra.ha(e),Rp(t)):t.Ra.set("Unknown")}async function Uk(t,e,n){if(t.Ra.set("Online"),e instanceof yI&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))})(t,e)}catch(r){G(Xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zu(t,r)}else if(e instanceof ou?t.Va.Ze(e):e instanceof _I?t.Va.st(e):t.Va.tt(e),!n.isEqual(ce.min()))try{const r=await WI(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(l);h&&i.Ia.set(l,h.withResumeToken(c.resumeToken,o))}})),a.targetMismatches.forEach(((c,l)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Xe.EMPTY_BYTE_STRING,h.snapshotVersion)),ib(i,c);const f=new ir(h.target,c,l,h.sequenceNumber);Ap(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){G(Xs,"Failed to raise snapshot:",r),await zu(t,r)}}async function zu(t,e,n){if(!us(e))throw e;t.Ea.add(1),await Po(t),t.Ra.set("Offline"),n||(n=()=>WI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{G(Xs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await mc(t)}))}function ab(t,e){return e().catch((n=>zu(t,n,e)))}async function Co(t){const e=Z(t),n=ss(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qr;for(;jk(e);)try{const s=await Ik(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,$k(e,s)}catch(s){await zu(e,s)}cb(e)&&ub(e)}function jk(t){return hs(t)&&t.Ta.length<10}function $k(t,e){t.Ta.push(e);const n=ss(t);n.O_()&&n.X_&&n.ea(e.mutations)}function cb(t){return hs(t)&&!ss(t).x_()&&t.Ta.length>0}function ub(t){ss(t).start()}async function qk(t){ss(t).ra()}async function Hk(t){const e=ss(t);for(const n of t.Ta)e.ea(n.mutations)}async function Gk(t,e,n){const r=t.Ta.shift(),s=lp.from(r,e,n);await ab(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Co(t)}async function Kk(t,e){e&&ss(t).X_&&await(async function(r,s){if((function(o){return pI(o)&&o!==F.ABORTED})(s.code)){const i=r.Ta.shift();ss(r).B_(),await ab(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Co(r)}})(t,e),cb(t)&&ub(t)}async function ky(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),G(Xs,"RemoteStore received new credentials");const r=hs(n);n.Ea.add(3),await Po(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await mc(n)}async function Kf(t,e){const n=Z(t);e?(n.Ea.delete(2),await mc(n)):e||(n.Ea.add(2),await Po(n),n.Ra.set("Unknown"))}function xo(t){return t.ma||(t.ma=(function(n,r,s){const i=Z(n);return i.sa(),new Vk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:Lk.bind(null,t),t_:Fk.bind(null,t),r_:Bk.bind(null,t),H_:Uk.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Sp(t)?Rp(t):t.Ra.set("Unknown")):(await t.ma.stop(),ob(t))}))),t.ma}function ss(t){return t.fa||(t.fa=(function(n,r,s){const i=Z(n);return i.sa(),new Dk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:qk.bind(null,t),r_:Kk.bind(null,t),ta:Hk.bind(null,t),na:Gk.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Co(t)):(await t.fa.stop(),t.Ta.length>0&&(G(Xs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Pp(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vo(t,e){if(et("AsyncQueue",`${e}: ${t}`),us(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{static emptySet(e){return new Bi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=aa(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.ga=new qe(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class go{constructor(e,n,r,s,i,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new go(e,n,Bi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Wk{constructor(){this.queries=My(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=My(),i.forEach(((o,a)=>{for(const c of a.Sa)c.onError(r)}))})(this,new q(F.ABORTED,"Firestore shutting down"))}}function My(){return new vr((t=>eI(t)),uc)}async function Cp(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new zk,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Vo(o,`Initialization of query '${Ai(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Vp(n)}async function xp(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Qk(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Vp(n)}function Jk(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Vp(t){t.Ca.forEach((e=>{e.next()}))}var zf,Ly;(Ly=zf||(zf={})).Ma="default",Ly.Cache="cache";class Dp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new go(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zf.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e){this.serializer=e}$s(e){return Hn(this.serializer,e)}Us(e){return e.metadata.exists?bI(this.serializer,e.document,!1):Ge.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return nt(e)}}class Xk{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=lb(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=Ee.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new Fy(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.$s(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||_e()).add(i);n.set(o,a)}}return n}async ja(e){const n=await bk(e,new Fy(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const s of this.Ka)await Ak(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function lb(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.key=e}}class fb{constructor(e){this.key=e}}class db{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=nI(e),this.tu=new Bi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Oy,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,f)=>{const p=s.get(h),m=lc(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let C=!1;p&&m?p.data.isEqual(m.data)?y!==w&&(r.track({type:3,doc:m}),C=!0):this.su(p,m)||(r.track({type:2,doc:m}),C=!0,(c&&this.eu(m,c)>0||l&&this.eu(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),C=!0):p&&!m&&(r.track({type:1,doc:p}),C=!0,(c||l)&&(a=!0)),C&&(m?(o=o.add(m),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(m,y){const w=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:C})}};return w(m)-w(y)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new go(this.query,e.tu,i,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Oy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new fb(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new hb(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return go.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fs="SyncEngine";class Zk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eO{constructor(e){this.key=e,this.hu=!1}}class tO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new vr((a=>eI(a)),uc),this.Iu=new Map,this.Eu=new Set,this.du=new qe(Y.comparator),this.Au=new Map,this.Ru=new _p,this.Vu={},this.mu=new Map,this.fu=Ys.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nO(t,e,n=!0){const r=xl(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await pb(r,e,n,!0),s}async function rO(t,e){const n=xl(t);await pb(n,e,!0,!1)}async function pb(t,e,n,r){const s=await fo(t.localStore,qt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Np(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Cl(t.remoteStore,s),a}async function Np(t,e,n,r,s){t.pu=(f,p,m)=>(async function(w,C,N,D){let v=C.view.ru(N);v.Cs&&(v=await Hu(w.localStore,C.query,!1).then((({documents:b})=>C.view.ru(b,v))));const x=D&&D.targetChanges.get(C.targetId),k=D&&D.targetMismatches.get(C.targetId)!=null,U=C.view.applyChanges(v,w.isPrimaryClient,x,k);return Wf(w,C.targetId,U.au),U.snapshot})(t,f,p,m);const i=await Hu(t.localStore,e,!0),o=new db(e,i.Qs),a=o.ru(i.documents),c=dc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),l=o.applyChanges(a,t.isPrimaryClient,c);Wf(t,n,l.au);const h=new Zk(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function sO(t,e,n){const r=Z(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!uc(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await po(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&mo(r.remoteStore,s.targetId),_o(r,s.targetId)})).catch(cs)):(_o(r,s.targetId),await po(r.localStore,s.targetId,!0))}async function iO(t,e){const n=Z(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mo(n.remoteStore,r.targetId))}async function oO(t,e,n){const r=Lp(t);try{const s=await(function(o,a){const c=Z(o),l=Ne.now(),h=a.reduce(((m,y)=>m.add(y.key)),_e());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let y=Yt(),w=_e();return c.Ns.getEntries(m,h).next((C=>{y=C,y.forEach(((N,D)=>{D.isValidDocument()||(w=w.add(N))}))})).next((()=>c.localDocuments.getOverlayedDocuments(m,y))).next((C=>{f=C;const N=[];for(const D of a){const v=PN(D,f.get(D.key).overlayedDocument);v!=null&&N.push(new wr(D.key,v,GT(v.value.mapValue),We.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,N,a)})).next((C=>{p=C;const N=C.applyToLocalDocumentSet(f,w);return c.documentOverlayCache.saveOverlays(m,C.batchId,N)}))})).then((()=>({batchId:p.batchId,changes:sI(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,c){let l=o.Vu[o.currentUser.toKey()];l||(l=new qe(ge)),l=l.insert(a,c),o.Vu[o.currentUser.toKey()]=l})(r,s.batchId,n),await Er(r,s.changes),await Co(r.remoteStore)}catch(s){const i=Vo(s,"Failed to persist write");n.reject(i)}}async function mb(t,e){const n=Z(t);try{const r=await Tk(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?oe(o.hu,14607):s.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))})),await Er(n,r,e)}catch(r){await cs(r)}}function By(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const c=Z(o);c.onlineState=a;let l=!1;c.queries.forEach(((h,f)=>{for(const p of f.Sa)p.va(a)&&(l=!0)})),l&&Vp(c)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aO(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new qe(Y.comparator);o=o.insert(i,Ge.newNoDocument(i,ce.min()));const a=_e().add(i),c=new fc(ce.min(),new Map,new qe(ge),o,a);await mb(r,c),r.du=r.du.remove(i),r.Au.delete(e),Mp(r)}else await po(r.localStore,e,!1).then((()=>_o(r,e,n))).catch(cs)}async function cO(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await Ek(n.localStore,e);Op(n,r,null),kp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Er(n,s)}catch(s){await cs(s)}}async function uO(t,e,n){const r=Z(t);try{const s=await(function(o,a){const c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next((f=>(oe(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(l,f)))).next((()=>c.mutationQueue.performConsistencyCheck(l))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h))).next((()=>c.localDocuments.getDocuments(l,h)))}))})(r.localStore,e);Op(r,e,n),kp(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Er(r,s)}catch(s){await cs(s)}}async function lO(t,e){const n=Z(t);hs(n.remoteStore)||G(fs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(o){const a=Z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c)))})(n.localStore);if(r===Qr)return void e.resolve();const s=n.mu.get(r)||[];s.push(e),n.mu.set(r,s)}catch(r){const s=Vo(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function kp(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Op(t,e,n){const r=Z(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function _o(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||gb(t,r)}))}function gb(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(mo(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Mp(t))}function Wf(t,e,n){for(const r of n)r instanceof hb?(t.Ru.addReference(r.key,e),hO(t,r)):r instanceof fb?(G(fs,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||gb(t,r.key)):ne(19791,{wu:r})}function hO(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(G(fs,"New document in limbo: "+n),t.Eu.add(r),Mp(t))}function Mp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(Ee.fromString(e)),r=t.fu.next();t.Au.set(r,new eO(n)),t.du=t.du.insert(n,r),Cl(t.remoteStore,new ir(qt(Ao(n.path)),r,"TargetPurposeLimboResolution",Qt.ce))}}async function Er(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,c)=>{o.push(r.pu(c,e,n).then((l=>{if((l||n)&&r.isPrimaryClient){const h=l?!l.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){s.push(l);const h=Ep.As(c.targetId,l);i.push(h)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(c,l){const h=Z(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>O.forEach(l,(p=>O.forEach(p.Es,(m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m))).next((()=>O.forEach(p.ds,(m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))))))}catch(f){if(!us(f))throw f;G(Tp,"Failed to update sequence numbers: "+f)}for(const f of l){const p=f.targetId;if(!f.fromCache){const m=h.Ms.get(p),y=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(y);h.Ms=h.Ms.insert(p,w)}}})(r.localStore,i))}async function fO(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){G(fs,"User change. New user:",e.toKey());const r=await zI(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((c=>{c.reject(new q(F.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Er(n,r.Ls)}}function dO(t,e){const n=Z(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let s=_e();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function pO(t,e){const n=Z(t),r=await Hu(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Wf(n,e.targetId,s.au),s}async function mO(t,e){const n=Z(t);return YI(n.localStore,e).then((r=>Er(n,r)))}async function gO(t,e,n,r){const s=Z(t),i=await(function(a,c){const l=Z(a),h=Z(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",(f=>h.er(f,c).next((p=>p?l.localDocuments.getDocuments(f,p):O.resolve(null)))))})(s.localStore,e);i!==null?(n==="pending"?await Co(s.remoteStore):n==="acknowledged"||n==="rejected"?(Op(s,e,r||null),kp(s,e),(function(a,c){Z(Z(a).mutationQueue).ir(c)})(s.localStore,e)):ne(6720,"Unknown batchState",{Su:n}),await Er(s,i)):G(fs,"Cannot apply mutation batch with id: "+e)}async function _O(t,e){const n=Z(t);if(xl(n),Lp(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await Uy(n,r.toArray());n.gu=!0,await Kf(n.remoteStore,!0);for(const i of s)Cl(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach(((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>(_o(n,o),po(n.localStore,o,!0)))),mo(n.remoteStore,o)})),await s,await Uy(n,r),(function(o){const a=Z(o);a.Au.forEach(((c,l)=>{mo(a.remoteStore,l)})),a.Ru.Jr(),a.Au=new Map,a.du=new qe(Y.comparator)})(n),n.gu=!1,await Kf(n.remoteStore,!1)}}async function Uy(t,e,n){const r=Z(t),s=[],i=[];for(const o of e){let a;const c=r.Iu.get(o);if(c&&c.length!==0){a=await fo(r.localStore,qt(c[0]));for(const l of c){const h=r.Tu.get(l),f=await pO(r,h);f.snapshot&&i.push(f.snapshot)}}else{const l=await JI(r.localStore,o);a=await fo(r.localStore,l),await Np(r,_b(l),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function _b(t){return ZT(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function yO(t){return(function(n){return Z(Z(n).persistence).Ts()})(Z(t).localStore)}async function vO(t,e,n,r){const s=Z(t);if(s.gu)return void G(fs,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await YI(s.localStore,tI(i[0])),a=fc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Xe.EMPTY_BYTE_STRING);await Er(s,o,a);break}case"rejected":await po(s.localStore,e,!0),_o(s,e,r);break;default:ne(64155,n)}}async function wO(t,e,n){const r=xl(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){G(fs,"Adding an already active target "+s);continue}const i=await JI(r.localStore,s),o=await fo(r.localStore,i);await Np(r,_b(i),o.targetId,!1,o.resumeToken),Cl(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await po(r.localStore,s,!1).then((()=>{mo(r.remoteStore,s),_o(r,s)})).catch(cs)}}function xl(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aO.bind(null,e),e.Pu.H_=Qk.bind(null,e.eventManager),e.Pu.yu=Jk.bind(null,e.eventManager),e}function Lp(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uO.bind(null,e),e}function EO(t,e,n){const r=Z(t);(async function(i,o,a){try{const c=await o.getMetadata();if(await(function(m,y){const w=Z(m),C=nt(y.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",(N=>w.Ii.getBundleMetadata(N,y.id))).then((N=>!!N&&N.createTime.compareTo(C)>=0))})(i.localStore,c))return await o.close(),a._completeWith((function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(lb(c));const l=new Xk(c,o.serializer);let h=await o.bu();for(;h;){const p=await l.Ga(h);p&&a._updateProgress(p),h=await o.bu()}const f=await l.ja(i.localStore);return await Er(i,f.Ha,void 0),await(function(m,y){const w=Z(m);return w.persistence.runTransaction("Save bundle","readwrite",(C=>w.Ii.saveBundleMetadata(C,y)))})(i.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Ja)}catch(c){return zn(fs,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(r,e,n).then((s=>{r.sharedClientState.notifyBundleLoaded(s)}))}class Wa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return KI(this.persistence,new GI,e.initialUser,this.serializer)}Cu(e){return new yp(Pl.mi,this.serializer)}Du(e){return new nb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wa.provider={build:()=>new Wa};class TO extends Wa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof qu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new BI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new yp((r=>qu.mi(r,n)),this.serializer)}}class yb extends Wa{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Lp(this.xu.syncEngine),await Co(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return KI(this.persistence,new GI,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new BI(r,e.asyncQueue,n)}Mu(e,n){const r=new VD(n,this.persistence);return new xD(e.asyncQueue,r)}Cu(e){const n=wp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new vp(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,rb(),cu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new nb}}class IO extends yb{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Mh&&(this.sharedClientState.syncEngine={Co:gO.bind(null,n),vo:vO.bind(null,n),Fo:wO.bind(null,n),Ts:yO.bind(null,n),Do:mO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await _O(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=rb();if(!Mh.v(n))throw new q(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mh(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Qa{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>By(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fO.bind(null,this.syncEngine),await Kf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Wk})()}createDatastore(e){const n=pc(e.databaseInfo.databaseId),r=(function(i){return new xk(i)})(e.databaseInfo);return(function(i,o,a,c){return new kk(i,o,a,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,a){return new Mk(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>By(this.syncEngine,n,0)),(function(){return Dy.v()?new Dy:new Rk})())}createSyncEngine(e,n){return(function(s,i,o,a,c,l,h){const f=new tO(s,i,o,a,c,l);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Z(n);G(Xs,"RemoteStore shutting down."),r.Ea.add(5),await Po(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Qa.provider={build:()=>new Qa};function jy(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):et("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Rt,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const s=await this.$u(r);return new Yk(JSON.parse(s),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,i){const o=Z(s),a={documents:i.map((f=>Ka(o.serializer,f)))},c=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Ee.emptyPath(),a,i.length),l=new Map;c.forEach((f=>{const p=LN(o.serializer,f);l.set(p.key.toString(),p)}));const h=[];return i.forEach((f=>{const p=l.get(f.toString());oe(!!p,55234,{key:f}),h.push(p)})),h})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new So(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const s=Y.fromPath(r);this.mutations.push(new cp(s,this.precondition(s)))})),await(async function(r,s){const i=Z(r),o={writes:s.map((a=>za(i.serializer,a)))};await i.Go("Commit",i.serializer.databaseId,Ee.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ne(50498,{Gu:e.constructor.name});n=ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ce.min())?We.exists(!1):We.updateTime(n):We.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ce.min()))throw new q(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return We.updateTime(n)}return We.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new bp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new AO(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Yu(s)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!oc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!pI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="FirestoreClient";class SO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=Wd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{G(is,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(G(is,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vo(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Fh(t,e){t.asyncQueue.verifyOperationInProgress(),G(is,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await zI(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function $y(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Fp(t);G(is,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>ky(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>ky(e.remoteStore,s))),t._onlineComponents=e}async function Fp(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(is,"Using user provided OfflineComponentProvider");try{await Fh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;zn("Error using user provided cache. Falling back to memory cache: "+n),await Fh(t,new Wa)}}else G(is,"Using default OfflineComponentProvider"),await Fh(t,new TO(void 0));return t._offlineComponents}async function Dl(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(is,"Using user provided OnlineComponentProvider"),await $y(t,t._uninitializedComponentsProvider._online)):(G(is,"Using default OnlineComponentProvider"),await $y(t,new Qa))),t._onlineComponents}function vb(t){return Fp(t).then((e=>e.persistence))}function Bp(t){return Fp(t).then((e=>e.localStore))}function wb(t){return Dl(t).then((e=>e.remoteStore))}function Up(t){return Dl(t).then((e=>e.syncEngine))}function PO(t){return Dl(t).then((e=>e.datastore))}async function yo(t){const e=await Dl(t),n=e.eventManager;return n.onListen=nO.bind(null,e.syncEngine),n.onUnlisten=sO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iO.bind(null,e.syncEngine),n}function CO(t){return t.asyncQueue.enqueue((async()=>{const e=await vb(t),n=await wb(t);return e.setNetworkEnabled(!0),(function(s){const i=Z(s);return i.Ea.delete(0),mc(i)})(n)}))}function xO(t){return t.asyncQueue.enqueue((async()=>{const e=await vb(t),n=await wb(t);return e.setNetworkEnabled(!1),(async function(s){const i=Z(s);i.Ea.add(0),await Po(i),i.Ra.set("Offline")})(n)}))}function VO(t,e){const n=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await(function(l,h){const f=Z(l);return f.persistence.runTransaction("read document","readonly",(p=>f.localDocuments.getDocument(p,h)))})(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new q(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=Vo(a,`Failed to get document '${i} from cache`);o.reject(c)}})(await Bp(t),e,n))),n.promise}function Eb(t,e,n={}){const r=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,l){const h=new Vl({next:p=>{h.Nu(),o.enqueueAndForget((()=>xp(i,f)));const m=p.docs.has(a);!m&&p.fromCache?l.reject(new q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?l.reject(new q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new Dp(Ao(a.path),h,{includeMetadataChanges:!0,qa:!0});return Cp(i,f)})(await yo(t),t.asyncQueue,e,n,r))),r.promise}function DO(t,e){const n=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await Hu(s,i,!0),c=new db(i,a.Qs),l=c.ru(a.documents),h=c.applyChanges(l,!1);o.resolve(h.snapshot)}catch(a){const c=Vo(a,`Failed to execute query '${i} against cache`);o.reject(c)}})(await Bp(t),e,n))),n.promise}function Tb(t,e,n={}){const r=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,l){const h=new Vl({next:p=>{h.Nu(),o.enqueueAndForget((()=>xp(i,f))),p.fromCache&&c.source==="server"?l.reject(new q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new Dp(a,h,{includeMetadataChanges:!0,qa:!0});return Cp(i,f)})(await yo(t),t.asyncQueue,e,n,r))),r.promise}function NO(t,e){const n=new Vl(e);return t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.add(i),i.next()})(await yo(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.delete(i)})(await yo(t),n)))}}function kO(t,e,n,r){const s=(function(o,a){let c;return c=typeof o=="string"?gI().encode(o):o,(function(h,f){return new bO(h,f)})((function(h,f){if(h instanceof Uint8Array)return jy(h,f);if(h instanceof ArrayBuffer)return jy(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(n,pc(e));t.asyncQueue.enqueueAndForget((async()=>{EO(await Up(t),s,r)}))}function OO(t,e){return t.asyncQueue.enqueue((async()=>(function(r,s){const i=Z(r);return i.persistence.runTransaction("Get named query","readonly",(o=>i.Ii.getNamedQuery(o,s)))})(await Bp(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="firestore.googleapis.com",Hy=!0;class Gy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bb,this.ssl=Hy}else this.host=e.host,this.ssl=e.ssl??Hy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nk)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_T("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ib(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new yD;switch(r.type){case"firstParty":return new TD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=qy.get(n);r&&(G("ComponentProvider","Removing Datastore"),qy.delete(n),r.terminate())})(this),Promise.resolve()}}function MO(t,e,n,r={}){t=Se(t,gc);const s=Bd(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(Ox(`https://${a}`),Bx("Firestore",!0)),i.host!==bb&&i.host!==a&&zn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:a,ssl:s,emulatorOptions:r};if(!Ji(c,o)&&(t._setSettings(c),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=yt.MOCK_USER;else{l=Mx(r.mockUserToken,t._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new yt(f)}t._authCredentials=new vD(new mT(l,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=class Ab{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ab(this.firestore,e,this._query)}},$e=class la{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new la(this.firestore,e,this._key)}toJSON(){return{type:la._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ic(n,la._jsonSchema))return new la(e,r||null,new Y(Ee.fromString(n.referencePath)))}};$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:ot("string",$e._jsonSchemaVersion),referencePath:ot("string")};let Jr=class Rb extends Ht{constructor(e,n,r){super(e,n,Ao(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new Y(e))}withConverter(e){return new Rb(this.firestore,e,this._path)}};function Sb(t,e,...n){if(t=ct(t),Qd("collection","path",e),t instanceof gc){const r=Ee.fromString(e,...n);return N_(r),new Jr(t,null,r)}{if(!(t instanceof $e||t instanceof Jr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return N_(r),new Jr(t.firestore,null,r)}}function LO(t,e){if(t=Se(t,gc),Qd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ht(t,null,(function(r){return new yr(Ee.emptyPath(),r)})(e))}function Wu(t,e,...n){if(t=ct(t),arguments.length===1&&(e=Wd.newId()),Qd("doc","path",e),t instanceof gc){const r=Ee.fromString(e,...n);return D_(r),new $e(t,null,new Y(r))}{if(!(t instanceof $e||t instanceof Jr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return D_(r),new $e(t.firestore,t instanceof Jr?t.converter:null,new Y(r))}}function Pb(t,e){return t=ct(t),e=ct(e),(t instanceof $e||t instanceof Jr)&&(e instanceof $e||e instanceof Jr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Cb(t,e){return t=ct(t),e=ct(e),t instanceof Ht&&e instanceof Ht&&t.firestore===e.firestore&&uc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="AsyncQueue";class zy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bp(this,"async_queue_retry"),this._c=()=>{const r=cu();r&&G(Ky,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=cu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=cu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Rt;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!us(e))throw e;G(Ky,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,et("INTERNAL UNHANDLED ERROR: ",Wy(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Pp.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:Wy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Wy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class FO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=-1;let rt=class extends gc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new zy,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zy(e),this._firestoreClient=void 0,await e}}};function Mt(t){if(t._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xb(t),t._firestoreClient}function xb(t){const e=t._freezeSettings(),n=(function(s,i,o,a){return new oN(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Ib(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new SO(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}function UO(t,e){zn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Vb(t,Qa.provider,{build:r=>new yb(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function jO(t){zn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();Vb(t,Qa.provider,{build:n=>new IO(n,e.cacheSizeBytes)})}function Vb(t,e,n){if((t=Se(t,rt))._firestoreClient||t._terminated)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new q(F.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},xb(t)}function $O(t){if(t._initialized&&!t._terminated)throw new q(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rt;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!qn.v())return Promise.resolve();const s=r+HI;await qn.delete(s)})(wp(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function qO(t){return(function(n){const r=new Rt;return n.asyncQueue.enqueueAndForget((async()=>lO(await Up(n),r))),r.promise})(Mt(t=Se(t,rt)))}function HO(t){return CO(Mt(t=Se(t,rt)))}function GO(t){return xO(Mt(t=Se(t,rt)))}function KO(t,e){const n=Mt(t=Se(t,rt)),r=new FO;return kO(n,t._databaseId,e,r),r}function zO(t,e){return OO(Mt(t=Se(t,rt)),e).then((n=>n?new Ht(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dt(Xe.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dt(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ic(e,Dt._jsonSchema))return Dt.fromBase64String(e.bytes)}}Dt._jsonSchemaVersion="firestore/bytes/1.0",Dt._jsonSchema={type:ot("string",Dt._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let os=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let si=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:In._jsonSchemaVersion}}static fromJSON(e){if(ic(e,In._jsonSchema))return new In(e.latitude,e.longitude)}}In._jsonSchemaVersion="firestore/geoPoint/1.0",In._jsonSchema={type:ot("string",In._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ic(e,Gn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Gn(e.vectorValues);throw new q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gn._jsonSchemaVersion="firestore/vectorValue/1.0",Gn._jsonSchema={type:ot("string",Gn._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=/^__.*__$/;class QO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ro(e,this.data,n,this.fieldTransforms)}}class Db{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Nb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class Nl{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Nl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Nb(this.Ac)&&WO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class JO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pc(e)}Cc(e,n,r,s=!1){return new Nl({Ac:e,methodName:n,Dc:r,path:ze.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ii(t){const e=t._freezeSettings(),n=pc(t._databaseId);return new JO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kl(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);zp("Data must be an object, but it was:",o,r);const a=Mb(r,o);let c,l;if(i.merge)c=new Jt(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Jf(e,f,n);if(!o.contains(p))throw new q(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Fb(h,p)||h.push(p)}c=new Jt(h),l=o.fieldTransforms.filter((f=>c.covers(f.field)))}else c=null,l=o.fieldTransforms;return new QO(new bt(a),c,l)}class _c extends si{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _c}}function kb(t,e,n){return new Nl({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jp extends si{_toFieldTransform(e){return new hc(e.path,new uo)}isEqual(e){return e instanceof jp}}class $p extends si{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=kb(this,e,!0),r=this.vc.map((i=>oi(i,n))),s=new zs(r);return new hc(e.path,s)}isEqual(e){return e instanceof $p&&Ji(this.vc,e.vc)}}class qp extends si{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=kb(this,e,!0),r=this.vc.map((i=>oi(i,n))),s=new Ws(r);return new hc(e.path,s)}isEqual(e){return e instanceof qp&&Ji(this.vc,e.vc)}}class Hp extends si{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new lo(e.serializer,aI(e.serializer,this.Fc));return new hc(e.path,n)}isEqual(e){return e instanceof Hp&&this.Fc===e.Fc}}function Gp(t,e,n,r){const s=t.Cc(1,e,n);zp("Data must be an object, but it was:",s,r);const i=[],o=bt.empty();ls(r,((c,l)=>{const h=Wp(e,c,n);l=ct(l);const f=s.yc(h);if(l instanceof _c)i.push(h);else{const p=oi(l,f);p!=null&&(i.push(h),o.set(h,p))}}));const a=new Jt(i);return new Db(o,a,s.fieldTransforms)}function Kp(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Jf(e,r,n)],c=[s];if(i.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Jf(e,i[p])),c.push(i[p+1]);const l=[],h=bt.empty();for(let p=a.length-1;p>=0;--p)if(!Fb(l,a[p])){const m=a[p];let y=c[p];y=ct(y);const w=o.yc(m);if(y instanceof _c)l.push(m);else{const C=oi(y,w);C!=null&&(l.push(m),h.set(m,C))}}const f=new Jt(l);return new Db(h,f,o.fieldTransforms)}function Ob(t,e,n,r=!1){return oi(n,t.Cc(r?4:3,e))}function oi(t,e){if(Lb(t=ct(t)))return zp("Unsupported field value:",e,t),Mb(t,e);if(t instanceof si)return(function(r,s){if(!Nb(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let c=oi(a,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ne.fromDate(r);return{timestampValue:ho(s.serializer,i)}}if(r instanceof Ne){const i=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ho(s.serializer,i)}}if(r instanceof In)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dt)return{bytesValue:vI(s.serializer,r._byteString)};if(r instanceof $e){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:dp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Gn)return(function(o,a){return{mapValue:{fields:{[np]:{stringValue:rp},[oo]:{arrayValue:{values:o.toArray().map((l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return ap(a.serializer,l)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${gl(r)}`)})(t,e)}function Mb(t,e){const n={};return MT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ls(t,((r,s)=>{const i=oi(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Lb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof In||t instanceof Dt||t instanceof $e||t instanceof si||t instanceof Gn)}function zp(t,e,n){if(!Lb(n)||!yT(n)){const r=gl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Jf(t,e,n){if((e=ct(e))instanceof os)return e._internalPath;if(typeof e=="string")return Wp(t,e);throw Qu("Field path arguments must be of type string or ",t,!1,void 0,n)}const YO=new RegExp("[~\\*/\\[\\]]");function Wp(t,e,n){if(e.search(YO)>=0)throw Qu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new os(...e.split("."))._internalPath}catch{throw Qu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(F.INVALID_ARGUMENT,a+t+c)}function Fb(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ol("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XO extends Ja{data(){return super.data()}}function Ol(t,e){return typeof e=="string"?Wp(t,e):e instanceof os?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qp{}class yc extends Qp{}function Nr(t,e,...n){let r=[];e instanceof Qp&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((c=>c instanceof Jp)).length,a=i.filter((c=>c instanceof Ml)).length;if(o>1||o>0&&a>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Ml extends yc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ml(e,n,r)}_apply(e){const n=this._parse(e);return jb(e._query,n),new Ht(e.firestore,e.converter,Mf(e._query,n))}_parse(e){const n=ii(e.firestore);return(function(i,o,a,c,l,h,f){let p;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Jy(f,h);const y=[];for(const w of f)y.push(Qy(c,i,w));p={arrayValue:{values:y}}}else p=Qy(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Jy(f,h),p=Ob(a,o,f,h==="in"||h==="not-in");return Ie.create(l,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ZO(t,e,n){const r=e,s=Ol("where",t);return Ml._create(s,r,n)}class Jp extends Qp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jp(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ke.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)jb(o,c),o=Mf(o,c)})(e._query,n),new Ht(e.firestore,e.converter,Mf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yp extends yc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yp(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ga(i,o)})(e._query,this._field,this._direction);return new Ht(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new yr(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function eM(t,e="asc"){const n=e,r=Ol("orderBy",t);return Yp._create(r,n)}class Ll extends yc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ll(e,n,r)}_apply(e){return new Ht(e.firestore,e.converter,Bu(e._query,this._limit,this._limitType))}}function tM(t){return vT("limit",t),Ll._create("limit",t,"F")}function nM(t){return vT("limitToLast",t),Ll._create("limitToLast",t,"L")}class Fl extends yc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Fl(e,n,r)}_apply(e){const n=Ub(e,this.type,this._docOrFields,this._inclusive);return new Ht(e.firestore,e.converter,(function(s,i){return new yr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)})(e._query,n))}}function rM(...t){return Fl._create("startAt",t,!0)}function sM(...t){return Fl._create("startAfter",t,!1)}class Bl extends yc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Bl(e,n,r)}_apply(e){const n=Ub(e,this.type,this._docOrFields,this._inclusive);return new Ht(e.firestore,e.converter,(function(s,i){return new yr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)})(e._query,n))}}function iM(...t){return Bl._create("endBefore",t,!1)}function oM(...t){return Bl._create("endAt",t,!0)}function Ub(t,e,n,r){if(n[0]=ct(n[0]),n[0]instanceof Ja)return(function(i,o,a,c,l){if(!c)throw new q(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of Fi(i))if(f.field.isKeyField())h.push(Gs(o,c.key));else{const p=c.data.field(f.field);if(El(p))throw new q(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=f.field.canonicalString();throw new q(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(p)}return new rs(h,l)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=ii(t.firestore);return(function(o,a,c,l,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new q(F.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<h.length;y++){const w=h[y];if(p[y].field.isKeyField()){if(typeof w!="string")throw new q(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof w}`);if(!ip(o)&&w.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${w}' contains a slash.`);const C=o.path.child(Ee.fromString(w));if(!Y.isDocumentKey(C))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const N=new Y(C);m.push(Gs(a,N))}else{const C=Ob(c,l,w);m.push(C)}}return new rs(m,f)})(t._query,t.firestore._databaseId,s,e,n,r)}}function Qy(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ip(e)&&n.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!Y.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gs(t,new Y(r))}if(n instanceof $e)return Gs(t,n._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gl(n)}.`)}function Jy(t,e){if(!Array.isArray(t)||t.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jb(t,e){const n=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Xp{convertValue(e,n="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ls(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[oo].arrayValue?.values?.map((r=>Ke(r.doubleValue)));return new Gn(n)}convertGeoPoint(e){return new In(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($a(e));default:return null}}convertTimestamp(e){const n=pr(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);oe(xI(r),9688,{name:e});const s=new es(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||et(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class aM extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}class Os{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let gn=class $b extends Ja{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ra(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ol("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$b._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};gn._jsonSchemaVersion="firestore/documentSnapshot/1.0",gn._jsonSchema={type:ot("string",gn._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};let Ra=class extends gn{data(e={}){return super.data(e)}},bn=class qb{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Os(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Ra(this._firestore,this._userDataWriter,r.key,r,new Os(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const c=new Ra(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Os(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const c=new Ra(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Os(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:cM(a.type),doc:c,oldIndex:l,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qb._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function cM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}function Hb(t,e){return t instanceof gn&&e instanceof gn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof bn&&e instanceof bn&&t._firestore===e._firestore&&Cb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t){t=Se(t,$e);const e=Se(t.firestore,rt);return Eb(Mt(e),t._key).then((n=>Zp(e,t,n)))}bn._jsonSchemaVersion="firestore/querySnapshot/1.0",bn._jsonSchema={type:ot("string",bn._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};class ai extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}function lM(t){t=Se(t,$e);const e=Se(t.firestore,rt),n=Mt(e),r=new ai(e);return VO(n,t._key).then((s=>new gn(e,r,t._key,s,new Os(s!==null&&s.hasLocalMutations,!0),t.converter)))}function hM(t){t=Se(t,$e);const e=Se(t.firestore,rt);return Eb(Mt(e),t._key,{source:"server"}).then((n=>Zp(e,t,n)))}function fM(t){t=Se(t,Ht);const e=Se(t.firestore,rt),n=Mt(e),r=new ai(e);return Bb(t._query),Tb(n,t._query).then((s=>new bn(e,r,t,s)))}function dM(t){t=Se(t,Ht);const e=Se(t.firestore,rt),n=Mt(e),r=new ai(e);return DO(n,t._query).then((s=>new bn(e,r,t,s)))}function pM(t){t=Se(t,Ht);const e=Se(t.firestore,rt),n=Mt(e),r=new ai(e);return Tb(n,t._query,{source:"server"}).then((s=>new bn(e,r,t,s)))}function Yy(t,e,n){t=Se(t,$e);const r=Se(t.firestore,rt),s=Ul(t.converter,e,n);return vc(r,[kl(ii(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,We.none())])}function Xy(t,e,n,...r){t=Se(t,$e);const s=Se(t.firestore,rt),i=ii(s);let o;return o=typeof(e=ct(e))=="string"||e instanceof os?Kp(i,"updateDoc",t._key,e,n,r):Gp(i,"updateDoc",t._key,e),vc(s,[o.toMutation(t._key,We.exists(!0))])}function mM(t){return vc(Se(t.firestore,rt),[new So(t._key,We.none())])}function gM(t,e){const n=Se(t.firestore,rt),r=Wu(t),s=Ul(t.converter,e);return vc(n,[kl(ii(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,We.exists(!1))]).then((()=>r))}function Gb(t,...e){t=ct(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Qf(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Qf(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let i,o,a;if(t instanceof $e)o=Se(t.firestore,rt),a=Ao(t._key.path),i={next:c=>{e[r]&&e[r](Zp(o,t,c))},error:e[r+1],complete:e[r+2]};else{const c=Se(t,Ht);o=Se(c.firestore,rt),a=c._query;const l=new ai(o);i={next:h=>{e[r]&&e[r](new bn(o,l,c,h))},error:e[r+1],complete:e[r+2]},Bb(t._query)}return(function(l,h,f,p){const m=new Vl(p),y=new Dp(h,m,f);return l.asyncQueue.enqueueAndForget((async()=>Cp(await yo(l),y))),()=>{m.Nu(),l.asyncQueue.enqueueAndForget((async()=>xp(await yo(l),y)))}})(Mt(o),a,s,i)}function _M(t,e){return NO(Mt(t=Se(t,rt)),Qf(e)?e:{next:e})}function vc(t,e){return(function(r,s){const i=new Rt;return r.asyncQueue.enqueueAndForget((async()=>oO(await Up(r),s,i))),i.promise})(Mt(t),e)}function Zp(t,e,n){const r=n.docs.get(e._key),s=new ai(t);return new gn(t,s,e._key,r,new Os(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vM=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ii(e)}set(e,n,r){this._verifyNotCommitted();const s=$r(e,this._firestore),i=Ul(s.converter,n,r),o=kl(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,We.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=$r(e,this._firestore);let o;return o=typeof(n=ct(n))=="string"||n instanceof os?Kp(this._dataReader,"WriteBatch.update",i._key,n,r,s):Gp(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,We.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$r(e,this._firestore);return this._mutations=this._mutations.concat(new So(n._key,We.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function $r(t,e){if((t=ct(t)).firestore!==e)throw new q(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ii(e)}get(e){const n=$r(e,this._firestore),r=new aM(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return ne(24041);const i=s[0];if(i.isFoundDocument())return new Ja(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Ja(this._firestore,r,n._key,null,n.converter);throw ne(18433,{doc:i})}))}set(e,n,r){const s=$r(e,this._firestore),i=Ul(s.converter,n,r),o=kl(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=$r(e,this._firestore);let o;return o=typeof(n=ct(n))=="string"||n instanceof os?Kp(this._dataReader,"Transaction.update",i._key,n,r,s):Gp(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=$r(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EM=class extends wM{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=$r(e,this._firestore),r=new ai(this._firestore);return super.get(e).then((s=>new gn(this._firestore,r,n._key,s._document,new Os(!1,!1),n.converter)))}};function TM(t,e,n){t=Se(t,rt);const r={...yM,...n};return(function(i){if(i.maxAttempts<1)throw new q(F.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(i,o,a){const c=new Rt;return i.asyncQueue.enqueueAndForget((async()=>{const l=await PO(i);new RO(i.asyncQueue,l,a,o,c).ju()})),c.promise})(Mt(t),(s=>e(new EM(t,s))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(){return new _c("deleteField")}function bM(){return new jp("serverTimestamp")}function AM(...t){return new $p("arrayUnion",t)}function RM(...t){return new qp("arrayRemove",t)}function SM(t){return new Hp("increment",t)}(function(e,n=!0){(function(s){bo=s})(Hd),Zi(new Hs("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new rt(new wD(r.getProvider("auth-internal")),new ID(o,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new es(l.options.projectId,h)})(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),ur(P_,C_,e),ur(P_,C_,"esm2020")})();const PM="@firebase/firestore-compat",CM="0.4.3";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new q("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(){if(typeof Uint8Array>"u")throw new q("unimplemented","Uint8Arrays are not available in this environment.")}function ev(){if(!sN())throw new q("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ya{constructor(e){this._delegate=e}static fromBase64String(e){return ev(),new Ya(Dt.fromBase64String(e))}static fromUint8Array(e){return Zy(),new Ya(Dt.fromUint8Array(e))}toBase64(){return ev(),this._delegate.toBase64()}toUint8Array(){return Zy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t){return xM(t,["next","error","complete"])}function xM(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{enableIndexedDbPersistence(e,n){return UO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return jO(e._delegate)}clearIndexedDbPersistence(e){return $O(e._delegate)}}class Kb{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof es||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&zn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){MO(this._delegate,e,n,r)}enableNetwork(){return HO(this._delegate)}disableNetwork(){return GO(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_T("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return qO(this._delegate)}onSnapshotsInSync(e){return _M(this._delegate,e)}get app(){if(!this._appCompat)throw new q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vo(this,Sb(this._delegate,e))}catch(n){throw jt(n,"collection()","Firestore.collection()")}}doc(e){try{return new mn(this,Wu(this._delegate,e))}catch(n){throw jt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ut(this,LO(this._delegate,e))}catch(n){throw jt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return TM(this._delegate,n=>e(new zb(this,n)))}batch(){return Mt(this._delegate),new Wb(new vM(this._delegate,e=>vc(this._delegate,e)))}loadBundle(e){return KO(this._delegate,e)}namedQuery(e){return zO(this._delegate,e).then(n=>n?new Ut(this,n):null)}}class jl extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ya(new Dt(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return mn.forKey(n,this.firestore,null)}}function DM(t){gD(t)}class zb{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new jl(e)}get(e){const n=Ms(e);return this._delegate.get(n).then(r=>new Xa(this._firestore,new gn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=Ms(e);return r?(em("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Ms(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Ms(e);return this._delegate.delete(n),this}}class Wb{constructor(e){this._delegate=e}set(e,n,r){const s=Ms(e);return r?(em("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Ms(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Ms(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Zs{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Ra(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Za(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Zs.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new Zs(e,new jl(e),n),s.set(n,i)),i}}Zs.INSTANCES=new WeakMap;class mn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new jl(e)}static forPath(e,n,r){if(e.length%2!==0)throw new q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new mn(n,new $e(n._delegate,r,new Y(e)))}static forKey(e,n,r){return new mn(n,new $e(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vo(this.firestore,Sb(this._delegate,e))}catch(n){throw jt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ct(e),e instanceof $e?Pb(this._delegate,e):!1}set(e,n){n=em("DocumentReference.set",n);try{return n?Yy(this._delegate,e,n):Yy(this._delegate,e)}catch(r){throw jt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Xy(this._delegate,e):Xy(this._delegate,e,n,...r)}catch(s){throw jt(s,"updateDoc()","DocumentReference.update()")}}delete(){return mM(this._delegate)}onSnapshot(...e){const n=Qb(e),r=Jb(e,s=>new Xa(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return Gb(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=lM(this._delegate):e?.source==="server"?n=hM(this._delegate):n=uM(this._delegate),n.then(r=>new Xa(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new mn(this.firestore,e?this._delegate.withConverter(Zs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function jt(t,e,n){return t.message=t.message.replace(e,n),t}function Qb(t){for(const e of t)if(typeof e=="object"&&!Yf(e))return e;return{}}function Jb(t,e){let n;return Yf(t[0])?n=t[0]:Yf(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:r=>{n.next&&n.next(e(r))},error:n.error?.bind(n),complete:n.complete?.bind(n)}}class Xa{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new mn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Hb(this._delegate,e._delegate)}}class Za extends Xa{data(e){const n=this._delegate.data(e);return this._delegate._converter||_D(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class Ut{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new jl(e)}where(e,n,r){try{return new Ut(this.firestore,Nr(this._delegate,ZO(e,n,r)))}catch(s){throw jt(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ut(this.firestore,Nr(this._delegate,eM(e,n)))}catch(r){throw jt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ut(this.firestore,Nr(this._delegate,tM(e)))}catch(n){throw jt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ut(this.firestore,Nr(this._delegate,nM(e)))}catch(n){throw jt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ut(this.firestore,Nr(this._delegate,rM(...e)))}catch(n){throw jt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ut(this.firestore,Nr(this._delegate,sM(...e)))}catch(n){throw jt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ut(this.firestore,Nr(this._delegate,iM(...e)))}catch(n){throw jt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ut(this.firestore,Nr(this._delegate,oM(...e)))}catch(n){throw jt(n,"endAt()","Query.endAt()")}}isEqual(e){return Cb(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=dM(this._delegate):e?.source==="server"?n=pM(this._delegate):n=fM(this._delegate),n.then(r=>new Xf(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=Qb(e),r=Jb(e,s=>new Xf(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return Gb(this._delegate,n,r)}withConverter(e){return new Ut(this.firestore,e?this._delegate.withConverter(Zs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class NM{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Za(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Xf{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ut(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Za(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new NM(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Za(this._firestore,r))})}isEqual(e){return Hb(this._delegate,e._delegate)}}class vo extends Ut{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new mn(this.firestore,e):null}doc(e){try{return e===void 0?new mn(this.firestore,Wu(this._delegate)):new mn(this.firestore,Wu(this._delegate,e))}catch(n){throw jt(n,"doc()","CollectionReference.doc()")}}add(e){return gM(this._delegate,e).then(n=>new mn(this.firestore,n))}isEqual(e){return Pb(this._delegate,e._delegate)}withConverter(e){return new vo(this.firestore,e?this._delegate.withConverter(Zs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ms(t){return Se(t,$e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(...e){this._delegate=new os(...e)}static documentId(){return new tm(ze.keyField().canonicalString())}isEqual(e){return e=ct(e),e instanceof os?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{static serverTimestamp(){const e=bM();return e._methodName="FieldValue.serverTimestamp",new Ds(e)}static delete(){const e=IM();return e._methodName="FieldValue.delete",new Ds(e)}static arrayUnion(...e){const n=AM(...e);return n._methodName="FieldValue.arrayUnion",new Ds(n)}static arrayRemove(...e){const n=RM(...e);return n._methodName="FieldValue.arrayRemove",new Ds(n)}static increment(e){const n=SM(e);return n._methodName="FieldValue.increment",new Ds(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM={Firestore:Kb,GeoPoint:In,Timestamp:Ne,Blob:Ya,Transaction:zb,WriteBatch:Wb,DocumentReference:mn,DocumentSnapshot:Xa,Query:Ut,QueryDocumentSnapshot:Za,QuerySnapshot:Xf,CollectionReference:vo,FieldPath:tm,FieldValue:Ds,setLogLevel:DM,CACHE_SIZE_UNLIMITED:BO};function OM(t,e){t.INTERNAL.registerComponent(new Hs("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps({...kM}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(t){OM(t,(e,n)=>new Kb(e,n,new VM)),t.registerVersion(PM,CM)}MM(Ma);Ma.apps.length===0&&Ma.initializeApp({apiKey:"AIzaSyBiI-MHTxhqNpgJ6FMJaVTN3lcBMmL9cqU",authDomain:"tsg-slackbot.firebaseapp.com",projectId:"tsg-slackbot",storageBucket:"tsg-slackbot.appspot.com",messagingSenderId:"382537830947",appId:"1:382537830947:web:41aa27c8a7261f0fe61796",measurementId:"G-NZD98Q80NG"});const LM=Ma.apps[0],xn=LM.firestore(),FM=xn.collection("achievement_data"),BM=()=>({isInitList:null,list:[]}),UM={initList(t){t.isInitList=!0}},jM={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n}),getByCounter:t=>(e=>t.list.filter(n=>n.counter===e).sort((n,r)=>n.value-r.value)),getByCategory:t=>(e=>t.list.filter(n=>n.category===e).sort((n,r)=>(r.count||0)-(n.count||0)))},$M={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",FM)})},qM=Object.freeze(Object.defineProperty({__proto__:null,actions:$M,getters:jM,mutations:UM,state:BM},Symbol.toStringTag,{value:"Module"})),HM=xn.collection("achievement_stats_by_category"),GM=()=>({isInitList:null,list:[]}),KM={initList(t){t.isInitList=!0}},zM={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},WM={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",HM)})},QM=Object.freeze(Object.defineProperty({__proto__:null,actions:WM,getters:zM,mutations:KM,state:GM},Symbol.toStringTag,{value:"Module"})),JM=xn.collection("achievement_stats_by_difficulty"),YM=()=>({isInitList:null,list:[]}),XM={initList(t){t.isInitList=!0}},ZM={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},eL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",JM)})},tL=Object.freeze(Object.defineProperty({__proto__:null,actions:eL,getters:ZM,mutations:XM,state:YM},Symbol.toStringTag,{value:"Module"})),nL=xn.collection("achievement_stats_by_month"),rL=()=>({isInitList:null,list:[]}),sL={initList(t){t.isInitList=!0}},iL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},oL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",nL)})},aL=Object.freeze(Object.defineProperty({__proto__:null,actions:oL,getters:iL,mutations:sL,state:rL},Symbol.toStringTag,{value:"Module"})),ra=xn.collection("achievements"),cL=()=>({isInitList:null,list:[],isInitLatestAchievemnts:null,latestAchievements:[],isInitUsers:{},isInitNames:{},isInitData:{}}),uL={initList(t){t.isInitList=!0},initLatestAchievements(t){t.isInitLatestAchievemnts=!0},initData(t,e){t.isInitData[e]=!0},setUser(t,{id:e,achievements:n}){t.isInitUsers[e]=!0,t[`user_${e}`]=n},setName(t,{name:e,achievements:n}){t.isInitNames[e]=!0,t[`name_${e}`]=n}},lL={list:t=>t.list,initLatestAchievements:t=>t.latestAchievements,data:t=>t.data,getByUser:t=>(e=>t.isInitList?t.list.filter(n=>n.user===e):t[`user_${e}`]||[]),getByName:t=>(e=>t.isInitList?t.list.filter(n=>n.name===e):t[`name_${e}`]||[])},hL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",ra)}),async initLatestAchievements({state:t,dispatch:e,commit:n}){t.isInitLatestAchievemnts||(await e("bindLatestAchievements"),n("initLatestAchievements"))},bindLatestAchievements:an(async({bindFirestoreRef:t})=>{await t("latestAchievements",ra.orderBy("date","desc").limit(15))}),bind:an(async({bindFirestoreRef:t,state:e,commit:n},r)=>{if(e.isInitData[r]===!0||e.isInitList===!0)return;const s=ra.doc(r);await t(`data_${r}`,s),n("initData",r)}),fetchByUser:async({state:t,commit:e},n)=>{if(t.isInitUsers[n]===!0||t.isInitList===!0)return;const r=await ra.where("user","==",n).get();e({type:"setUser",id:n,achievements:r.docs.map(s=>s.data())})},fetchByName:async({state:t,commit:e},n)=>{if(t.isInitNames[n]===!0||t.isInitList===!0)return;const r=await ra.where("name","==",n).get();e({type:"setName",name:n,achievements:r.docs.map(s=>s.data())})}},fL=Object.freeze(Object.defineProperty({__proto__:null,actions:hL,getters:lL,mutations:uL,state:cL},Symbol.toStringTag,{value:"Module"})),dL=xn.collection("oneiromancy_messages"),pL=xn.collection("oneiromancy_criteria"),mL=()=>({isInitOneiromancyMessages:null,oneiromancyMessages:[],isInitOneiromancyCriteria:null,oneiromancyCriteria:[]}),gL={initOneiromancyMessages(t){t.isInitOneiromancyMessages=!0},initOneiromancyCriteria(t){t.isInitOneiromancyCriteria=!0}},_L={oneiromancyMessages:t=>t.oneiromancyMessages,oneiromancyCriteria:t=>t.oneiromancyCriteria},yL={async initOneiromancyMessages({state:t,dispatch:e,commit:n}){t.isInitOneiromancyMessages!==!0&&(await e("bindOneiromancyMessages"),n("initOneiromancyMessages"))},bindOneiromancyMessages:an(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyMessages",dL.orderBy("message.ts","desc")),e("initOneiromancyMessages")}),async initOneiromancyCriteria({state:t,dispatch:e,commit:n}){t.isInitOneiromancyCriteria!==!0&&(await e("bindOneiromancyCriteria"),n("initOneiromancyCriteria"))},bindOneiromancyCriteria:an(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyCriteria",pL.orderBy("point","desc")),e("initOneiromancyCriteria")})},vL=Object.freeze(Object.defineProperty({__proto__:null,actions:yL,getters:_L,mutations:gL,state:mL},Symbol.toStringTag,{value:"Module"})),wL=()=>({isUnauthorized:!1,isInitUsers:!1,isInitTopicMessages:!1,users:[],userMap:new Map,topicMessages:[],topicMessagesMap:new Map}),EL={setUsers(t,e){t.isInitUsers=!0,t.users=e,t.userMap=new Map(e.map(n=>[n.id,n]))},setTopicMessages(t,e){t.isInitTopicMessages=!0,t.topicMessages=e.map(n=>({...n,randomSortKey:Math.random()})),t.topicMessagesMap=new Map(t.topicMessages.map(n=>[n.message.ts,n]))},addTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!0,n.likes=n.likes.concat([null]))},removeTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!1,n.likes=n.likes.slice(1))},isUnauthorized(t){t.isUnauthorized=!0}},TL={users:t=>t.users,getUser:t=>(e=>{const n=t.userMap.get(e);return n===void 0?{id:e}:n}),topicMessages:t=>t.topicMessages,getTopicMessage:t=>(e=>{const n=t.topicMessagesMap.get(e);return n===void 0?{ts:e}:n})},IL={async initUsers({state:t,commit:e}){if(!t.isInitUsers)try{const n=await fetch("https://slackbot-api.tsg.ne.jp/slack/users",{credentials:"include"});if(!n.ok){if(n.status===401){e("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();e("setUsers",r)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))e("isUnauthorized");else throw n}},async initTopicMessages({state:t,commit:e}){if(!t.isInitTopicMessages)try{const n=await fetch("https://slackbot-api.tsg.ne.jp/topic/topics",{credentials:"include"});if(!n.ok){if(n.status===401){e("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();e("setTopicMessages",r)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))e("isUnauthorized");else throw n}},async likeTopicMessage({commit:t},{ts:e}){try{const n=await fetch(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,{method:"PUT",body:"",credentials:"include",headers:{"Content-Type":"text/plain"}});if(!n.ok){if(n.status===401){t("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}t("addTopicMessageLike",e)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))t("isUnauthorized");else throw n}},async unlikeTopicMessage({commit:t},{ts:e}){try{const n=await fetch(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,{method:"DELETE",credentials:"include"});if(!n.ok){if(n.status===401){t("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}t("removeTopicMessageLike",e)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))t("isUnauthorized");else throw n}}},bL=Object.freeze(Object.defineProperty({__proto__:null,actions:IL,getters:TL,mutations:EL,state:wL},Symbol.toStringTag,{value:"Module"})),AL=xn.collection("slow_quiz_games"),RL=()=>({isInitList:null,list:[]}),SL={initList(t){t.isInitList=!0}},PL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},CL={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t,commit:e})=>{await t("list",AL.where("status","==","finished").orderBy("finishDate","desc")),e("initList")})},xL=Object.freeze(Object.defineProperty({__proto__:null,actions:CL,getters:PL,mutations:SL,state:RL},Symbol.toStringTag,{value:"Module"})),VL=xn.collection("twenty_questions_games"),DL=()=>({isInitList:null,list:[]}),NL={initList(t){t.isInitList=!0}},kL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},OL={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t,commit:e})=>{await t("list",VL.orderBy("finishedAt","desc")),e("initList")})},ML=Object.freeze(Object.defineProperty({__proto__:null,actions:OL,getters:kL,mutations:NL,state:DL},Symbol.toStringTag,{value:"Module"})),tv=xn.collection("users");xn.collection("achievements");const LL=()=>({isInitList:null,list:[],isInitData:{},data:{}}),FL={initList(t){t.isInitList=!0},initData(t,e){t.isInitData[e]=!0}},BL={list:t=>t.list,data:t=>t.data,getById:t=>(e=>{if(t[`data_${e}`]!==void 0)return t[`data_${e}`];const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},UL={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t,commit:e})=>{await t("list",tv),e("initList")}),bindById:an(async({bindFirestoreRef:t,state:e,dispatch:n,getters:r,commit:s},i)=>{const o=r.getById(i);if(o!==void 0&&e.isInitData[o.id]===!0)return;const a=await tv.doc(i).get();if(a.exists){const c=t(`data_${a.id}`,a.ref);s("initData",a.id),await Promise.all([c,n("achievements/fetchByUser",a.id,{root:!0})])}})},jL=Object.freeze(Object.defineProperty({__proto__:null,actions:UL,getters:BL,mutations:FL,state:LL},Symbol.toStringTag,{value:"Module"})),$L=Qn(t=>{const e=dx({mutations:{...bx},modules:{achievements:{namespaced:!0,...fL},achievementData:{namespaced:!0,...qM},achievementStatsByCategory:{namespaced:!0,...QM},achievementStatsByDifficulty:{namespaced:!0,...tL},achievementStatsByMonth:{namespaced:!0,...aL},slowQuizGames:{namespaced:!0,...xL},twentyQuestionsGames:{namespaced:!0,...ML},users:{namespaced:!0,...jL},oneiromancies:{namespaced:!0,...vL},slackInfos:{namespaced:!0,...bL}}});return t.vueApp.use(e),{provide:{store:e}}}),qL=[iC,lC,j1,$1,q1,H1,K1,z1,J1,$L],Yb=(t="RouteProvider")=>as({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,r=e.route,s={};for(const i in e.route)Object.defineProperty(s,i,{get:()=>n===e.renderKey?e.route[i]:r[i],enumerable:!0});return Gr(qs,Bn(s)),()=>e.vnode?Nt(e.vnode,{ref:e.vnodeRef}):e.vnode}}),HL=Yb(),nv=new WeakMap,GL=as({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:r}){const s=dt(),i=or(),o=kt(qs,null);let a;r({pageRef:i});const c=kt(Xw,null);let l;const h=s.deferHydration();if(s.isHydrating){const p=s.hooks.hookOnce("app:error",h);un().beforeEach(p)}t.pageKey&&Kr(()=>t.pageKey,(p,m)=>{p!==m&&s.callHook("page:loading:start")});let f=!1;{const p=un().beforeResolve(()=>{f=!1});rc(()=>{p()})}return()=>Nt(wE,{name:t.name,route:t.route,...e},{default:p=>{const m=zL(o,p.route,p.Component),y=o&&o.matched.length===p.route.matched.length;if(!p.Component){if(l&&!y)return l;h();return}if(l&&c&&!c.isCurrent(p.route))return l;if(m&&o&&(!c||c?.isCurrent(o)))return y?l:null;const w=pf(p,t.pageKey),C=WL(o,p.route,p.Component);!s.isHydrating&&a===w&&!C&&qi(()=>{f=!0,s.callHook("page:loading:end")}),a=w;const N=!!(t.transition??p.route.meta.pageTransition??Ng),D=N&&KL([t.transition,p.route.meta.pageTransition,Ng,{onAfterLeave(){delete s._runningTransition,s.callHook("page:transition:finish",p.Component)}}]),v=t.keepalive??p.route.meta.keepalive??rP;return l=TE(N&&D,P1(v,Nt(_d,{suspensible:!0,onPending:()=>{N&&(s._runningTransition=!0),s.callHook("page:start",p.Component)},onResolve:()=>{qi(()=>s.callHook("page:finish",p.Component).then(()=>{if(delete s._runningTransition,!f&&!C)return f=!0,s.callHook("page:loading:end")}).finally(h))}},{default:()=>{const x={key:w||void 0,vnode:n.default?QL(n.default,p):p.Component,route:p.route,renderKey:w||void 0,trackRootNodes:N,vnodeRef:i};if(!v)return Nt(HL,x);const k=p.Component.type,U=k;let b=nv.get(U);return b||(b=Yb(k.name||k.__name),nv.set(U,b)),Nt(b,x)}}))).default(),l}})}});function KL(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?Pd(n.onAfterLeave):void 0});return Jw(...e)}function zL(t,e,n){if(!t)return!1;const r=e.matched.findIndex(s=>s.components?.default===n?.type);return!r||r===-1?!1:e.matched.slice(0,r).some((s,i)=>s.components?.default!==t.matched[i]?.components?.default)||n&&pf({route:e,Component:n})!==pf({route:t,Component:n})}function WL(t,e,n){return t?e.matched.findIndex(s=>s.components?.default===n?.type)<e.matched.length-1:!1}function QL(t,e){const n=t(e);return n.length===1?Nt(n[0]):Nt(Tt,void 0,n)}const JL=as({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>Nt(Ur[t.name],t.layoutProps,e.slots)}}),YL={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},XL=as({name:"NuxtLayout",inheritAttrs:!1,props:YL,setup(t,e){const n=dt(),r=kt(qs),i=!r||r===ll()?EE():r,o=sn(()=>{let h=je(t.name)??i?.meta.layout??"default";return h&&!(h in Ur)&&t.fallback&&(h=je(t.fallback)),h}),a=$i();e.expose({layoutRef:a});const c=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",c);un().beforeEach(h)}let l;return()=>{const h=o.value&&o.value in Ur,f=i?.meta.layoutTransition??nP,p=l;return l=o.value,TE(h&&f,{default:()=>Nt(_d,{suspensible:!0,onResolve:()=>{qi(c)}},{default:()=>Nt(ZL,{layoutProps:Rw(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:m=>m!==p&&m===o.value,hasTransition:!!f},e.slots)})}).default()}}}),ZL=as({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&Gr(Xw,{isCurrent:i=>n===(i.meta.layout??"default")});const r=kt(qs);if(r&&r===ll()){const i=EE(),o={};for(const a in i){const c=a;Object.defineProperty(o,c,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[c]:r[c]})}Gr(qs,Bn(o))}return()=>!n||typeof n=="string"&&!(n in Ur)?e.slots.default?.():Nt(JL,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),e2=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},t2={};function n2(t,e){const n=GL,r=XL;return pn(),Fn(r,null,{default:ld(()=>[tt(n)]),_:1})}const r2=e2(t2,[["render",n2]]),s2={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error;n.stack&&n.stack.split(`
`).splice(1).map(f=>({text:f.replace("webpack:/","").replace(".vue",".js").trim(),internal:f.includes("node_modules")&&!f.includes(".cache")||f.includes("internal")||f.includes("new Promise")})).map(f=>`<span class="stack${f.internal?" internal":""}">${f.text}</span>`).join(`
`);const r=Number(n.statusCode||500),s=r===404,i=n.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=s?Gh(()=>fn(()=>import("./Ca0qzue1.js"),__vite__mapDeps([28,3,29,30]),import.meta.url)):Gh(()=>fn(()=>import("./BXhcHNt4.js"),__vite__mapDeps([31,29,32]),import.meta.url));return(f,p)=>(pn(),Fn(je(h),CA(bw({statusCode:je(r),statusMessage:je(i),description:je(o),stack:je(a)})),null,16))}},i2={key:0},rv={__name:"nuxt-root",setup(t){const e=()=>null,n=dt(),r=n.deferHydration();if(n.isHydrating){const l=n.hooks.hookOnce("app:error",r);un().beforeEach(l)}const s=!1;Gr(qs,ll()),n.hooks.callHookWith(l=>l.map(h=>h()),"vue:setup");const i=hl(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;Jv((l,h,f)=>{if(n.hooks.callHook("vue:error",l,h,f).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",l),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,l),!1;if(eE(l)&&(l.fatal||l.unhandled))return n.runWithContext(()=>bs(l)),!1});const c=!1;return(l,h)=>(pn(),Fn(_d,{onResolve:je(r)},{default:ld(()=>[je(o)?(pn(),hS("div",i2)):je(i)?(pn(),Fn(je(s2),{key:1,error:je(i)},null,8,["error"])):je(c)?(pn(),Fn(je(e),{key:2,context:je(c)},null,8,["context"])):je(s)?(pn(),Fn(kR(je(s)),{key:3})):(pn(),Fn(je(r2),{key:4}))]),_:1},8,["onResolve"]))}};let sv;{let t;sv=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),r=n?YS(rv):JS(rv),s=aP({vueApp:r});async function i(o){await s.callHook("app:error",o),s.payload.error||=Us(o)}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)}),!n&&kg.id&&s.hook("app:suspense:resolve",()=>{document.getElementById(kg.id)?.remove()});try{await lP(s,qL)}catch(o){i(o)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(sP),await s.hooks.callHook("app:mounted",r),await qi()}catch(o){i(o)}return r},t=sv().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{p2 as $,y2 as A,l2 as B,c2 as C,w2 as D,o2 as E,Tt as F,h2 as G,d2 as H,nl as I,tl as J,f2 as K,u2 as L,un as M,Cd as N,h_ as O,qs as P,rc as Q,_2 as R,Mw as S,wP as T,Q1 as U,sn as V,m2 as W,ti as X,wd as Y,ul as Z,e2 as _,Iw as a,I0 as a0,Tu as a1,tt as b,hS as c,Aw as d,dt as e,rE as f,as as g,hd as h,kt as i,Nt as j,pd as k,Qv as l,Kr as m,Re as n,pn as o,sl as p,qi as q,or as r,$i as s,NA as t,g2 as u,ES as v,ld as w,a2 as x,Fn as y,v2 as z};
