const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BXrSWFL_.js","./DdXp5Uh1.js","./Cpj98o6Y.js","./CEa-tM_g.js","./D8DJfoS2.js","./index.4iF0p84D.css","./Cf4UMbS_.js","./CdO2Mfbc.js","./CdjJNdvM.js","./topic.rIgFsbOT.css","./_RJyFOcS.js","./index.BZVQuXzV.css","./Y-4xY7rx.js","./slow-quiz.XCwighz9.css","./DJ8qdfui.js","./Blq4NRID.js","./AchievementCard.DIPBvmTw.css","./BzaG9rpa.js","./oneiromancy.D5JIcBwv.css","./CG8KEV4F.js","./Cl5J-9pp.js","./index.B09IHu_1.css","./DVvGLLR5.js","./default.5rRBYkF3.css","./CyDaLiCf.js","./DkSSr1pv.js","./error-404.BLrjNXsr.css","./B_Z-27y6.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Yh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Le={},ui=[],Vn=()=>{},O_=()=>!1,ga=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Xh=t=>t.startsWith("onUpdate:"),mt=Object.assign,Zh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},SI=Object.prototype.hasOwnProperty,De=(t,e)=>SI.call(t,e),fe=Array.isArray,hi=t=>qi(t)==="[object Map]",M_=t=>qi(t)==="[object Set]",Mp=t=>qi(t)==="[object Date]",PI=t=>qi(t)==="[object RegExp]",me=t=>typeof t=="function",We=t=>typeof t=="string",Tn=t=>typeof t=="symbol",Ne=t=>t!==null&&typeof t=="object",L_=t=>(Ne(t)||me(t))&&me(t.then)&&me(t.catch),F_=Object.prototype.toString,qi=t=>F_.call(t),CI=t=>qi(t).slice(8,-1),B_=t=>qi(t)==="[object Object]",ef=t=>We(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,fi=Yh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},xI=/-\w/g,gn=cl(t=>t.replace(xI,e=>e.slice(1).toUpperCase())),DI=/\B([A-Z])/g,Ns=cl(t=>t.replace(DI,"-$1").toLowerCase()),ll=cl(t=>t.charAt(0).toUpperCase()+t.slice(1)),cu=cl(t=>t?`on${ll(t)}`:""),Sr=(t,e)=>!Object.is(t,e),di=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},U_=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},VI=t=>{const e=parseFloat(t);return isNaN(e)?t:e},j_=t=>{const e=We(t)?Number(t):NaN;return isNaN(e)?t:e};let Lp;const ul=()=>Lp||(Lp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hl(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=We(r)?MI(r):hl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(We(t)||Ne(t))return t}const NI=/;(?![^(]*\))/g,kI=/:([^]+)/,OI=/\/\*[^]*?\*\//g;function MI(t){const e={};return t.replace(OI,"").split(NI).forEach(n=>{if(n){const r=n.split(kI);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function fl(t){let e="";if(We(t))e=t;else if(fe(t))for(let n=0;n<t.length;n++){const r=fl(t[n]);r&&(e+=r+" ")}else if(Ne(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function LI(t){if(!t)return null;let{class:e,style:n}=t;return e&&!We(e)&&(t.class=fl(e)),n&&(t.style=hl(n)),t}const FI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",BI=Yh(FI);function $_(t){return!!t||t===""}function UI(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ic(t[r],e[r]);return n}function Ic(t,e){if(t===e)return!0;let n=Mp(t),r=Mp(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Tn(t),r=Tn(e),n||r)return t===e;if(n=fe(t),r=fe(e),n||r)return n&&r?UI(t,e):!1;if(n=Ne(t),r=Ne(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Ic(t[o],e[o]))return!1}}return String(t)===String(e)}const q_=t=>!!(t&&t.__v_isRef===!0),jI=t=>We(t)?t:t==null?"":fe(t)||Ne(t)&&(t.toString===F_||!me(t.toString))?q_(t)?jI(t.value):JSON.stringify(t,G_,2):String(t),G_=(t,e)=>q_(e)?G_(t,e.value):hi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[lu(r,i)+" =>"]=s,n),{})}:M_(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>lu(n))}:Tn(e)?lu(e):Ne(e)&&!fe(e)&&!B_(e)?String(e):e,lu=(t,e="")=>{var n;return Tn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Kt;class H_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Kt,!e&&Kt&&(this.index=(Kt.scopes||(Kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Kt;try{return Kt=this,e()}finally{Kt=n}}}on(){++this._on===1&&(this.prevScope=Kt,Kt=this)}off(){this._on>0&&--this._on===0&&(Kt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function K_(t){return new H_(t)}function z_(){return Kt}let Be;const uu=new WeakSet;class W_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Kt&&Kt.active&&Kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,uu.has(this)&&(uu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||J_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fp(this),Y_(this);const e=Be,n=En;Be=this,En=!0;try{return this.fn()}finally{X_(this),Be=e,En=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)rf(e);this.deps=this.depsTail=void 0,Fp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?uu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gu(this)&&this.run()}get dirty(){return Gu(this)}}let Q_=0,Vo,No;function J_(t,e=!1){if(t.flags|=8,e){t.next=No,No=t;return}t.next=Vo,Vo=t}function tf(){Q_++}function nf(){if(--Q_>0)return;if(No){let e=No;for(No=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Vo;){let e=Vo;for(Vo=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Y_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function X_(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),rf(r),$I(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Gu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Z_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Z_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Go)||(t.globalVersion=Go,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Gu(t))))return;t.flags|=2;const e=t.dep,n=Be,r=En;Be=t,En=!0;try{Y_(t);const s=t.fn(t._value);(e.version===0||Sr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Be=n,En=r,X_(t),t.flags&=-3}}function rf(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)rf(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function $I(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let En=!0;const ey=[];function Xn(){ey.push(En),En=!1}function Zn(){const t=ey.pop();En=t===void 0?!0:t}function Fp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Be;Be=void 0;try{e()}finally{Be=n}}}let Go=0;class qI{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class sf{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Be||!En||Be===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Be)n=this.activeLink=new qI(Be,this),Be.deps?(n.prevDep=Be.depsTail,Be.depsTail.nextDep=n,Be.depsTail=n):Be.deps=Be.depsTail=n,ty(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Be.depsTail,n.nextDep=void 0,Be.depsTail.nextDep=n,Be.depsTail=n,Be.deps===n&&(Be.deps=r)}return n}trigger(e){this.version++,Go++,this.notify(e)}notify(e){tf();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{nf()}}}function ty(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)ty(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const bc=new WeakMap,ms=Symbol(""),Hu=Symbol(""),Ho=Symbol("");function xt(t,e,n){if(En&&Be){let r=bc.get(t);r||bc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new sf),s.map=r,s.key=n),s.track()}}function zn(t,e,n,r,s,i){const o=bc.get(t);if(!o){Go++;return}const a=c=>{c&&c.trigger()};if(tf(),e==="clear")o.forEach(a);else{const c=fe(t),u=c&&ef(n);if(c&&n==="length"){const h=Number(r);o.forEach((f,p)=>{(p==="length"||p===Ho||!Tn(p)&&p>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Ho)),e){case"add":c?u&&a(o.get("length")):(a(o.get(ms)),hi(t)&&a(o.get(Hu)));break;case"delete":c||(a(o.get(ms)),hi(t)&&a(o.get(Hu)));break;case"set":hi(t)&&a(o.get(ms));break}}nf()}function GI(t,e){const n=bc.get(t);return n&&n.get(e)}function Ws(t){const e=Se(t);return e===t?e:(xt(e,"iterate",Ho),dn(t)?e:e.map(Et))}function dl(t){return xt(t=Se(t),"iterate",Ho),t}const HI={__proto__:null,[Symbol.iterator](){return hu(this,Symbol.iterator,Et)},concat(...t){return Ws(this).concat(...t.map(e=>fe(e)?Ws(e):e))},entries(){return hu(this,"entries",t=>(t[1]=Et(t[1]),t))},every(t,e){return $n(this,"every",t,e,void 0,arguments)},filter(t,e){return $n(this,"filter",t,e,n=>n.map(Et),arguments)},find(t,e){return $n(this,"find",t,e,Et,arguments)},findIndex(t,e){return $n(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return $n(this,"findLast",t,e,Et,arguments)},findLastIndex(t,e){return $n(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return $n(this,"forEach",t,e,void 0,arguments)},includes(...t){return fu(this,"includes",t)},indexOf(...t){return fu(this,"indexOf",t)},join(t){return Ws(this).join(t)},lastIndexOf(...t){return fu(this,"lastIndexOf",t)},map(t,e){return $n(this,"map",t,e,void 0,arguments)},pop(){return mo(this,"pop")},push(...t){return mo(this,"push",t)},reduce(t,...e){return Bp(this,"reduce",t,e)},reduceRight(t,...e){return Bp(this,"reduceRight",t,e)},shift(){return mo(this,"shift")},some(t,e){return $n(this,"some",t,e,void 0,arguments)},splice(...t){return mo(this,"splice",t)},toReversed(){return Ws(this).toReversed()},toSorted(t){return Ws(this).toSorted(t)},toSpliced(...t){return Ws(this).toSpliced(...t)},unshift(...t){return mo(this,"unshift",t)},values(){return hu(this,"values",Et)}};function hu(t,e,n){const r=dl(t),s=r[e]();return r!==t&&!dn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const KI=Array.prototype;function $n(t,e,n,r,s,i){const o=dl(t),a=o!==t&&!dn(t),c=o[e];if(c!==KI[e]){const f=c.apply(t,i);return a?Et(f):f}let u=n;o!==t&&(a?u=function(f,p){return n.call(this,Et(f),p,t)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,t)}));const h=c.call(o,u,r);return a&&s?s(h):h}function Bp(t,e,n,r){const s=dl(t);let i=n;return s!==t&&(dn(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,Et(a),c,t)}),s[e](i,...r)}function fu(t,e,n){const r=Se(t);xt(r,"iterate",Ho);const s=r[e](...n);return(s===-1||s===!1)&&cf(n[0])?(n[0]=Se(n[0]),r[e](...n)):s}function mo(t,e,n=[]){Xn(),tf();const r=Se(t)[e].apply(t,n);return nf(),Zn(),r}const zI=Yh("__proto__,__v_isRef,__isVue"),ny=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Tn));function WI(t){Tn(t)||(t=String(t));const e=Se(this);return xt(e,"has",t),e.hasOwnProperty(t)}class ry{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?sb:ay:i?oy:iy).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=fe(e);if(!s){let c;if(o&&(c=HI[n]))return c;if(n==="hasOwnProperty")return WI}const a=Reflect.get(e,n,lt(e)?e:r);if((Tn(n)?ny.has(n):zI(n))||(s||xt(e,"get",n),i))return a;if(lt(a)){const c=o&&ef(n)?a:a.value;return s&&Ne(c)?zu(c):c}return Ne(a)?s?zu(a):ir(a):a}}class sy extends ry{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const c=er(i);if(!dn(r)&&!er(r)&&(i=Se(i),r=Se(r)),!fe(e)&&lt(i)&&!lt(r))return c||(i.value=r),!0}const o=fe(e)&&ef(n)?Number(n)<e.length:De(e,n),a=Reflect.set(e,n,r,lt(e)?e:s);return e===Se(s)&&(o?Sr(r,i)&&zn(e,"set",n,r):zn(e,"add",n,r)),a}deleteProperty(e,n){const r=De(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&zn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Tn(n)||!ny.has(n))&&xt(e,"has",n),r}ownKeys(e){return xt(e,"iterate",fe(e)?"length":ms),Reflect.ownKeys(e)}}class QI extends ry{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const JI=new sy,YI=new QI,XI=new sy(!0);const Ku=t=>t,Qa=t=>Reflect.getPrototypeOf(t);function ZI(t,e,n){return function(...r){const s=this.__v_raw,i=Se(s),o=hi(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),h=n?Ku:e?Ac:Et;return!e&&xt(i,"iterate",c?Hu:ms),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Ja(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function eb(t,e){const n={get(s){const i=this.__v_raw,o=Se(i),a=Se(s);t||(Sr(s,a)&&xt(o,"get",s),xt(o,"get",a));const{has:c}=Qa(o),u=e?Ku:t?Ac:Et;if(c.call(o,s))return u(i.get(s));if(c.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&xt(Se(s),"iterate",ms),s.size},has(s){const i=this.__v_raw,o=Se(i),a=Se(s);return t||(Sr(s,a)&&xt(o,"has",s),xt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Se(a),u=e?Ku:t?Ac:Et;return!t&&xt(c,"iterate",ms),a.forEach((h,f)=>s.call(i,u(h),u(f),o))}};return mt(n,t?{add:Ja("add"),set:Ja("set"),delete:Ja("delete"),clear:Ja("clear")}:{add(s){!e&&!dn(s)&&!er(s)&&(s=Se(s));const i=Se(this);return Qa(i).has.call(i,s)||(i.add(s),zn(i,"add",s,s)),this},set(s,i){!e&&!dn(i)&&!er(i)&&(i=Se(i));const o=Se(this),{has:a,get:c}=Qa(o);let u=a.call(o,s);u||(s=Se(s),u=a.call(o,s));const h=c.call(o,s);return o.set(s,i),u?Sr(i,h)&&zn(o,"set",s,i):zn(o,"add",s,i),this},delete(s){const i=Se(this),{has:o,get:a}=Qa(i);let c=o.call(i,s);c||(s=Se(s),c=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return c&&zn(i,"delete",s,void 0),u},clear(){const s=Se(this),i=s.size!==0,o=s.clear();return i&&zn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=ZI(s,t,e)}),n}function of(t,e){const n=eb(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(De(n,s)&&s in r?n:r,s,i)}const tb={get:of(!1,!1)},nb={get:of(!1,!0)},rb={get:of(!0,!1)};const iy=new WeakMap,oy=new WeakMap,ay=new WeakMap,sb=new WeakMap;function ib(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ob(t){return t.__v_skip||!Object.isExtensible(t)?0:ib(CI(t))}function ir(t){return er(t)?t:af(t,!1,JI,tb,iy)}function Cn(t){return af(t,!1,XI,nb,oy)}function zu(t){return af(t,!0,YI,rb,ay)}function af(t,e,n,r,s){if(!Ne(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=ob(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function gs(t){return er(t)?gs(t.__v_raw):!!(t&&t.__v_isReactive)}function er(t){return!!(t&&t.__v_isReadonly)}function dn(t){return!!(t&&t.__v_isShallow)}function cf(t){return t?!!t.__v_raw:!1}function Se(t){const e=t&&t.__v_raw;return e?Se(e):t}function ab(t){return!De(t,"__v_skip")&&Object.isExtensible(t)&&U_(t,"__v_skip",!0),t}const Et=t=>Ne(t)?ir(t):t,Ac=t=>Ne(t)?zu(t):t;function lt(t){return t?t.__v_isRef===!0:!1}function Jn(t){return cy(t,!1)}function wi(t){return cy(t,!0)}function cy(t,e){return lt(t)?t:new cb(t,e)}class cb{constructor(e,n){this.dep=new sf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Se(e),this._value=n?e:Et(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||dn(e)||er(e);e=r?e:Se(e),Sr(e,n)&&(this._rawValue=e,this._value=r?e:Et(e),this.dep.trigger())}}function $e(t){return lt(t)?t.value:t}function lb(t){return me(t)?t():$e(t)}const ub={get:(t,e,n)=>e==="__v_raw"?t:$e(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return lt(s)&&!lt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function ly(t){return gs(t)?t:new Proxy(t,ub)}class hb{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return GI(Se(this._object),this._key)}}class fb{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function db(t,e,n){return lt(t)?t:me(t)?new fb(t):Ne(t)&&arguments.length>1?pb(t,e,n):Jn(t)}function pb(t,e,n){const r=t[e];return lt(r)?r:new hb(t,e,n)}class mb{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new sf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Go-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Be!==this)return J_(this,!0),!0}get value(){const e=this.dep.track();return Z_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function gb(t,e,n=!1){let r,s;return me(t)?r=t:(r=t.get,s=t.set),new mb(r,s,n)}const Ya={},Rc=new WeakMap;let rs;function _b(t,e=!1,n=rs){if(n){let r=Rc.get(n);r||Rc.set(n,r=[]),r.push(t)}}function yb(t,e,n=Le){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,u=C=>s?C:dn(C)||s===!1||s===0?Wn(C,1):Wn(C);let h,f,p,m,y=!1,v=!1;if(lt(t)?(f=()=>t.value,y=dn(t)):gs(t)?(f=()=>u(t),y=!0):fe(t)?(v=!0,y=t.some(C=>gs(C)||dn(C)),f=()=>t.map(C=>{if(lt(C))return C.value;if(gs(C))return u(C);if(me(C))return c?c(C,2):C()})):me(t)?e?f=c?()=>c(t,2):t:f=()=>{if(p){Xn();try{p()}finally{Zn()}}const C=rs;rs=h;try{return c?c(t,3,[m]):t(m)}finally{rs=C}}:f=Vn,e&&s){const C=f,k=s===!0?1/0:s;f=()=>Wn(C(),k)}const P=z_(),N=()=>{h.stop(),P&&P.active&&Zh(P.effects,h)};if(i&&e){const C=e;e=(...k)=>{C(...k),N()}}let V=v?new Array(t.length).fill(Ya):Ya;const w=C=>{if(!(!(h.flags&1)||!h.dirty&&!C))if(e){const k=h.run();if(s||y||(v?k.some((B,A)=>Sr(B,V[A])):Sr(k,V))){p&&p();const B=rs;rs=h;try{const A=[k,V===Ya?void 0:v&&V[0]===Ya?[]:V,m];V=k,c?c(e,3,A):e(...A)}finally{rs=B}}}else h.run()};return a&&a(w),h=new W_(f),h.scheduler=o?()=>o(w,!1):w,m=C=>_b(C,!1,h),p=h.onStop=()=>{const C=Rc.get(h);if(C){if(c)c(C,4);else for(const k of C)k();Rc.delete(h)}},e?r?w(!0):V=h.run():o?o(w.bind(null,!0),!0):h.run(),N.pause=h.pause.bind(h),N.resume=h.resume.bind(h),N.stop=N,N}function Wn(t,e=1/0,n){if(e<=0||!Ne(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,lt(t))Wn(t.value,e,n);else if(fe(t))for(let r=0;r<t.length;r++)Wn(t[r],e,n);else if(M_(t)||hi(t))t.forEach(r=>{Wn(r,e,n)});else if(B_(t)){for(const r in t)Wn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Wn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function _a(t,e,n,r){try{return r?t(...r):t()}catch(s){Gi(s,e,n)}}function In(t,e,n,r){if(me(t)){const s=_a(t,e,n,r);return s&&L_(s)&&s.catch(i=>{Gi(i,e,n)}),s}if(fe(t)){const s=[];for(let i=0;i<t.length;i++)s.push(In(t[i],e,n,r));return s}}function Gi(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Le;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,c,u)===!1)return}a=a.parent}if(i){Xn(),_a(i,null,10,[t,c,u]),Zn();return}}vb(t,n,s,r,o)}function vb(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const jt=[];let Rn=-1;const pi=[];let wr=null,ni=0;const uy=Promise.resolve();let Sc=null;function Ei(t){const e=Sc||uy;return t?e.then(this?t.bind(this):t):e}function wb(t){let e=Rn+1,n=jt.length;for(;e<n;){const r=e+n>>>1,s=jt[r],i=Ko(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function lf(t){if(!(t.flags&1)){const e=Ko(t),n=jt[jt.length-1];!n||!(t.flags&2)&&e>=Ko(n)?jt.push(t):jt.splice(wb(e),0,t),t.flags|=1,hy()}}function hy(){Sc||(Sc=uy.then(fy))}function Wu(t){fe(t)?pi.push(...t):wr&&t.id===-1?wr.splice(ni+1,0,t):t.flags&1||(pi.push(t),t.flags|=1),hy()}function Up(t,e,n=Rn+1){for(;n<jt.length;n++){const r=jt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;jt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Pc(t){if(pi.length){const e=[...new Set(pi)].sort((n,r)=>Ko(n)-Ko(r));if(pi.length=0,wr){wr.push(...e);return}for(wr=e,ni=0;ni<wr.length;ni++){const n=wr[ni];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}wr=null,ni=0}}const Ko=t=>t.id==null?t.flags&2?-1:1/0:t.id;function fy(t){try{for(Rn=0;Rn<jt.length;Rn++){const e=jt[Rn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),_a(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Rn<jt.length;Rn++){const e=jt[Rn];e&&(e.flags&=-2)}Rn=-1,jt.length=0,Pc(),Sc=null,(jt.length||pi.length)&&fy()}}let bt=null,dy=null;function Cc(t){const e=bt;return bt=t,dy=t&&t.type.__scopeId||null,e}function uf(t,e=bt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&kc(-1);const i=Cc(e);let o;try{o=t(...s)}finally{Cc(i),r._d&&kc(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function z1(t,e){if(bt===null)return t;const n=_l(bt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=Le]=e[s];i&&(me(i)&&(i={mounted:i,updated:i}),i.deep&&Wn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Sn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Xn(),In(c,n,8,[t.el,a,t,e]),Zn())}}const Eb=Symbol("_vte"),py=t=>t.__isTeleport,Kn=Symbol("_leaveCb"),Xa=Symbol("_enterCb");function Tb(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ff(()=>{t.isMounted=!0}),va(()=>{t.isUnmounting=!0}),t}const ln=[Function,Array],my={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ln,onEnter:ln,onAfterEnter:ln,onEnterCancelled:ln,onBeforeLeave:ln,onLeave:ln,onAfterLeave:ln,onLeaveCancelled:ln,onBeforeAppear:ln,onAppear:ln,onAfterAppear:ln,onAppearCancelled:ln},gy=t=>{const e=t.subTree;return e.component?gy(e.component):e},Ib={name:"BaseTransition",props:my,setup(t,{slots:e}){const n=Hi(),r=Tb();return()=>{const s=e.default&&vy(e.default(),!0);if(!s||!s.length)return;const i=_y(s),o=Se(t),{mode:a}=o;if(r.isLeaving)return du(i);const c=jp(i);if(!c)return du(i);let u=Qu(c,o,r,n,f=>u=f);c.type!==ot&&Ti(c,u);let h=n.subTree&&jp(n.subTree);if(h&&h.type!==ot&&!wn(h,c)&&gy(n).type!==ot){let f=Qu(h,o,r,n);if(Ti(h,f),a==="out-in"&&c.type!==ot)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},du(i);a==="in-out"&&c.type!==ot?f.delayLeave=(p,m,y)=>{const v=yy(r,h);v[String(h.key)]=h,p[Kn]=()=>{m(),p[Kn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{y(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function _y(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==ot){e=n;break}}return e}const bb=Ib;function yy(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Qu(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:y,onLeaveCancelled:v,onBeforeAppear:P,onAppear:N,onAfterAppear:V,onAppearCancelled:w}=e,C=String(t.key),k=yy(n,t),B=(E,b)=>{E&&In(E,r,9,b)},A=(E,b)=>{const x=b[1];B(E,b),fe(E)?E.every(S=>S.length<=1)&&x():E.length<=1&&x()},T={mode:o,persisted:a,beforeEnter(E){let b=c;if(!n.isMounted)if(i)b=P||c;else return;E[Kn]&&E[Kn](!0);const x=k[C];x&&wn(t,x)&&x.el[Kn]&&x.el[Kn](),B(b,[E])},enter(E){let b=u,x=h,S=f;if(!n.isMounted)if(i)b=N||u,x=V||h,S=w||f;else return;let I=!1;const ge=E[Xa]=we=>{I||(I=!0,we?B(S,[E]):B(x,[E]),T.delayedLeave&&T.delayedLeave(),E[Xa]=void 0)};b?A(b,[E,ge]):ge()},leave(E,b){const x=String(t.key);if(E[Xa]&&E[Xa](!0),n.isUnmounting)return b();B(p,[E]);let S=!1;const I=E[Kn]=ge=>{S||(S=!0,b(),ge?B(v,[E]):B(y,[E]),E[Kn]=void 0,k[x]===t&&delete k[x])};k[x]=t,m?A(m,[E,I]):I()},clone(E){const b=Qu(E,e,n,r,s);return s&&s(b),b}};return T}function du(t){if(ya(t))return t=tr(t),t.children=null,t}function jp(t){if(!ya(t))return py(t.type)&&t.children?_y(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&me(n.default))return n.default()}}function Ti(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ti(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function vy(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Dt?(o.patchFlag&128&&s++,r=r.concat(vy(o.children,e,a))):(e||o.type!==ot)&&r.push(a!=null?tr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function qr(t,e){return me(t)?mt({name:t.name},e,{setup:t}):t}function hf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const xc=new WeakMap;function mi(t,e,n,r,s=!1){if(fe(t)){t.forEach((y,v)=>mi(y,e&&(fe(e)?e[v]:e),n,r,s));return}if(Pr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&mi(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?_l(r.component):r.el,o=s?null:i,{i:a,r:c}=t,u=e&&e.r,h=a.refs===Le?a.refs={}:a.refs,f=a.setupState,p=Se(f),m=f===Le?O_:y=>De(p,y);if(u!=null&&u!==c){if($p(e),We(u))h[u]=null,m(u)&&(f[u]=null);else if(lt(u)){u.value=null;const y=e;y.k&&(h[y.k]=null)}}if(me(c))_a(c,a,12,[o,h]);else{const y=We(c),v=lt(c);if(y||v){const P=()=>{if(t.f){const N=y?m(c)?f[c]:h[c]:c.value;if(s)fe(N)&&Zh(N,i);else if(fe(N))N.includes(i)||N.push(i);else if(y)h[c]=[i],m(c)&&(f[c]=h[c]);else{const V=[i];c.value=V,t.k&&(h[t.k]=V)}}else y?(h[c]=o,m(c)&&(f[c]=o)):v&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const N=()=>{P(),xc.delete(t)};N.id=-1,xc.set(t,N),vt(N,n)}else $p(t),P()}}}function $p(t){const e=xc.get(t);e&&(e.flags|=8,xc.delete(t))}let qp=!1;const Qs=()=>{qp||(console.error("Hydration completed but contains mismatches."),qp=!0)},Ab=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",Rb=t=>t.namespaceURI.includes("MathML"),Za=t=>{if(t.nodeType===1){if(Ab(t))return"svg";if(Rb(t))return"mathml"}},li=t=>t.nodeType===8;function Sb(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:c,createComment:u}}=t,h=(w,C)=>{if(!C.hasChildNodes()){n(null,w,C),Pc(),C._vnode=w;return}f(C.firstChild,w,null,null,null),Pc(),C._vnode=w},f=(w,C,k,B,A,T=!1)=>{T=T||!!C.dynamicChildren;const E=li(w)&&w.data==="[",b=()=>v(w,C,k,B,A,E),{type:x,ref:S,shapeFlag:I,patchFlag:ge}=C;let we=w.nodeType;C.el=w,ge===-2&&(T=!1,C.dynamicChildren=null);let ie=null;switch(x){case ys:we!==3?C.children===""?(c(C.el=s(""),o(w),w),ie=w):ie=b():(w.data!==C.children&&(Qs(),w.data=C.children),ie=i(w));break;case ot:V(w)?(ie=i(w),N(C.el=w.content.firstChild,w,k)):we!==8||E?ie=b():ie=i(w);break;case uc:if(E&&(w=i(w),we=w.nodeType),we===1||we===3){ie=w;const pe=!C.children.length;for(let re=0;re<C.staticCount;re++)pe&&(C.children+=ie.nodeType===1?ie.outerHTML:ie.data),re===C.staticCount-1&&(C.anchor=ie),ie=i(ie);return E?i(ie):ie}else b();break;case Dt:E?ie=y(w,C,k,B,A,T):ie=b();break;default:if(I&1)(we!==1||C.type.toLowerCase()!==w.tagName.toLowerCase())&&!V(w)?ie=b():ie=p(w,C,k,B,A,T);else if(I&6){C.slotScopeIds=A;const pe=o(w);if(E?ie=P(w):li(w)&&w.data==="teleport start"?ie=P(w,w.data,"teleport end"):ie=i(w),e(C,pe,null,k,B,Za(pe),T),Pr(C)&&!C.type.__asyncResolved){let re;E?(re=et(Dt),re.anchor=ie?ie.previousSibling:pe.lastChild):re=w.nodeType===3?ev(""):et("div"),re.el=w,C.component.subTree=re}}else I&64?we!==8?ie=b():ie=C.type.hydrate(w,C,k,B,A,T,t,m):I&128&&(ie=C.type.hydrate(w,C,k,B,Za(o(w)),A,T,t,f))}return S!=null&&mi(S,null,B,C),ie},p=(w,C,k,B,A,T)=>{T=T||!!C.dynamicChildren;const{type:E,props:b,patchFlag:x,shapeFlag:S,dirs:I,transition:ge}=C,we=E==="input"||E==="option";if(we||x!==-1){I&&Sn(C,null,k,"created");let ie=!1;if(V(w)){ie=$y(null,ge)&&k&&k.vnode.props&&k.vnode.props.appear;const re=w.content.firstChild;if(ie){const Fe=re.getAttribute("class");Fe&&(re.$cls=Fe),ge.beforeEnter(re)}N(re,w,k),C.el=w=re}if(S&16&&!(b&&(b.innerHTML||b.textContent))){let re=m(w.firstChild,C,w,k,B,A,T);for(;re;){ec(w,1)||Qs();const Fe=re;re=re.nextSibling,a(Fe)}}else if(S&8){let re=C.children;re[0]===`
`&&(w.tagName==="PRE"||w.tagName==="TEXTAREA")&&(re=re.slice(1)),w.textContent!==re&&(ec(w,0)||Qs(),w.textContent=C.children)}if(b){if(we||!T||x&48){const re=w.tagName.includes("-");for(const Fe in b)(we&&(Fe.endsWith("value")||Fe==="indeterminate")||ga(Fe)&&!fi(Fe)||Fe[0]==="."||re)&&r(w,Fe,null,b[Fe],void 0,k)}else if(b.onClick)r(w,"onClick",null,b.onClick,void 0,k);else if(x&4&&gs(b.style))for(const re in b.style)b.style[re]}let pe;(pe=b&&b.onVnodeBeforeMount)&&zt(pe,k,C),I&&Sn(C,null,k,"beforeMount"),((pe=b&&b.onVnodeMounted)||I||ie)&&Wy(()=>{pe&&zt(pe,k,C),ie&&ge.enter(w),I&&Sn(C,null,k,"mounted")},B)}return w.nextSibling},m=(w,C,k,B,A,T,E)=>{E=E||!!C.dynamicChildren;const b=C.children,x=b.length;for(let S=0;S<x;S++){const I=E?b[S]:b[S]=nn(b[S]),ge=I.type===ys;w?(ge&&!E&&S+1<x&&nn(b[S+1]).type===ys&&(c(s(w.data.slice(I.children.length)),k,i(w)),w.data=I.children),w=f(w,I,B,A,T,E)):ge&&!I.children?c(I.el=s(""),k):(ec(k,1)||Qs(),n(null,I,k,null,B,A,Za(k),T))}return w},y=(w,C,k,B,A,T)=>{const{slotScopeIds:E}=C;E&&(A=A?A.concat(E):E);const b=o(w),x=m(i(w),C,b,k,B,A,T);return x&&li(x)&&x.data==="]"?i(C.anchor=x):(Qs(),c(C.anchor=u("]"),b,x),x)},v=(w,C,k,B,A,T)=>{if(ec(w.parentElement,1)||Qs(),C.el=null,T){const x=P(w);for(;;){const S=i(w);if(S&&S!==x)a(S);else break}}const E=i(w),b=o(w);return a(w),n(null,C,b,E,k,B,Za(b),A),k&&(k.vnode.el=C.el,gl(k,C.el)),E},P=(w,C="[",k="]")=>{let B=0;for(;w;)if(w=i(w),w&&li(w)&&(w.data===C&&B++,w.data===k)){if(B===0)return i(w);B--}return w},N=(w,C,k)=>{const B=C.parentNode;B&&B.replaceChild(w,C);let A=k;for(;A;)A.vnode.el===C&&(A.vnode.el=A.subTree.el=w),A=A.parent},V=w=>w.nodeType===1&&w.tagName==="TEMPLATE";return[h,f]}const Gp="data-allow-mismatch",Pb={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function ec(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Gp);)t=t.parentElement;const n=t&&t.getAttribute(Gp);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(Pb[e])}}ul().requestIdleCallback;ul().cancelIdleCallback;function Cb(t,e){if(li(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(li(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const Pr=t=>!!t.type.__asyncLoader;function Ju(t){me(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:c}=t;let u=null,h,f=0;const p=()=>(f++,u=null,m()),m=()=>{let y;return u||(y=u=e().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),c)return new Promise((P,N)=>{c(v,()=>P(p()),()=>N(v),f+1)});throw v}).then(v=>y!==u&&u?u:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),h=v,v)))};return qr({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(y,v,P){let N=!1;(v.bu||(v.bu=[])).push(()=>N=!0);const V=()=>{N||P()},w=i?()=>{const C=i(V,k=>Cb(y,k));C&&(v.bum||(v.bum=[])).push(C)}:V;h?w():m().then(()=>!v.isUnmounted&&w())},get __asyncResolved(){return h},setup(){const y=Tt;if(hf(y),h)return()=>pu(h,y);const v=w=>{u=null,Gi(w,y,13,!r)};if(a&&y.suspense||bi)return m().then(w=>()=>pu(w,y)).catch(w=>(v(w),()=>r?et(r,{error:w}):null));const P=Jn(!1),N=Jn(),V=Jn(!!s);return s&&setTimeout(()=>{V.value=!1},s),o!=null&&setTimeout(()=>{if(!P.value&&!N.value){const w=new Error(`Async component timed out after ${o}ms.`);v(w),N.value=w}},o),m().then(()=>{P.value=!0,y.parent&&ya(y.parent.vnode)&&y.parent.update()}).catch(w=>{v(w),N.value=w}),()=>{if(P.value&&h)return pu(h,y);if(N.value&&r)return et(r,{error:N.value});if(n&&!V.value)return et(n)}}})}function pu(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=et(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const ya=t=>t.type.__isKeepAlive,xb={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Hi(),r=n.ctx;if(!r.renderer)return()=>{const V=e.default&&e.default();return V&&V.length===1?V[0]:V};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:c,m:u,um:h,o:{createElement:f}}}=r,p=f("div");r.activate=(V,w,C,k,B)=>{const A=V.component;u(V,w,C,0,a),c(A.vnode,V,w,C,A,a,k,V.slotScopeIds,B),vt(()=>{A.isDeactivated=!1,A.a&&di(A.a);const T=V.props&&V.props.onVnodeMounted;T&&zt(T,A.parent,V)},a)},r.deactivate=V=>{const w=V.component;Vc(w.m),Vc(w.a),u(V,p,null,1,a),vt(()=>{w.da&&di(w.da);const C=V.props&&V.props.onVnodeUnmounted;C&&zt(C,w.parent,V),w.isDeactivated=!0},a)};function m(V){mu(V),h(V,n,a,!0)}function y(V){s.forEach((w,C)=>{const k=sh(w.type);k&&!V(k)&&v(C)})}function v(V){const w=s.get(V);w&&(!o||!wn(w,o))?m(w):o&&mu(o),s.delete(V),i.delete(V)}xr(()=>[t.include,t.exclude],([V,w])=>{V&&y(C=>Ro(V,C)),w&&y(C=>!Ro(w,C))},{flush:"post",deep:!0});let P=null;const N=()=>{P!=null&&(Nc(n.subTree.type)?vt(()=>{s.set(P,tc(n.subTree))},n.subTree.suspense):s.set(P,tc(n.subTree)))};return ff(N),Iy(N),va(()=>{s.forEach(V=>{const{subTree:w,suspense:C}=n,k=tc(w);if(V.type===k.type&&V.key===k.key){mu(k);const B=k.component.da;B&&vt(B,C);return}m(V)})}),()=>{if(P=null,!e.default)return o=null;const V=e.default(),w=V[0];if(V.length>1)return o=null,V;if(!Es(w)||!(w.shapeFlag&4)&&!(w.shapeFlag&128))return o=null,w;let C=tc(w);if(C.type===ot)return o=null,C;const k=C.type,B=sh(Pr(C)?C.type.__asyncResolved||{}:k),{include:A,exclude:T,max:E}=t;if(A&&(!B||!Ro(A,B))||T&&B&&Ro(T,B))return C.shapeFlag&=-257,o=C,w;const b=C.key==null?k:C.key,x=s.get(b);return C.el&&(C=tr(C),w.shapeFlag&128&&(w.ssContent=C)),P=b,x?(C.el=x.el,C.component=x.component,C.transition&&Ti(C,C.transition),C.shapeFlag|=512,i.delete(b),i.add(b)):(i.add(b),E&&i.size>parseInt(E,10)&&v(i.values().next().value)),C.shapeFlag|=256,o=C,Nc(w.type)?w:C}}},Db=xb;function Ro(t,e){return fe(t)?t.some(n=>Ro(n,e)):We(t)?t.split(",").includes(e):PI(t)?(t.lastIndex=0,t.test(e)):!1}function wy(t,e){Ty(t,"a",e)}function Ey(t,e){Ty(t,"da",e)}function Ty(t,e,n=Tt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(pl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)ya(s.parent.vnode)&&Vb(r,e,n,s),s=s.parent}}function Vb(t,e,n,r){const s=pl(e,t,r,!0);by(()=>{Zh(r[e],s)},n)}function mu(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function tc(t){return t.shapeFlag&128?t.ssContent:t}function pl(t,e,n=Tt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Xn();const a=wa(n),c=In(e,n,t,o);return a(),Zn(),c});return r?s.unshift(i):s.push(i),i}}const or=t=>(e,n=Tt)=>{(!bi||t==="sp")&&pl(t,(...r)=>e(...r),n)},Nb=or("bm"),ff=or("m"),kb=or("bu"),Iy=or("u"),va=or("bum"),by=or("um"),Ob=or("sp"),Mb=or("rtg"),Lb=or("rtc");function Ay(t,e=Tt){pl("ec",t,e)}const Ry="components";function W1(t,e){return Py(Ry,t,!0,e)||t}const Sy=Symbol.for("v-ndc");function Fb(t){return We(t)?Py(Ry,t,!1)||t:t||Sy}function Py(t,e,n=!0,r=!1){const s=bt||Tt;if(s){const i=s.type;{const a=sh(i,!1);if(a&&(a===e||a===gn(e)||a===ll(gn(e))))return i}const o=Hp(s[t]||i[t],e)||Hp(s.appContext[t],e);return!o&&r?i:o}}function Hp(t,e){return t&&(t[e]||t[gn(e)]||t[ll(gn(e))])}function Q1(t,e,n,r){let s;const i=n,o=fe(t);if(o||We(t)){const a=o&&gs(t);let c=!1,u=!1;a&&(c=!dn(t),u=er(t),t=dl(t)),s=new Array(t.length);for(let h=0,f=t.length;h<f;h++)s[h]=e(c?u?Ac(Et(t[h])):Et(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(Ne(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const h=a[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}function J1(t,e,n={},r,s){if(bt.ce||bt.parent&&Pr(bt.parent)&&bt.parent.ce){const u=Object.keys(n).length>0;return hn(),Pn(Dt,null,[et("slot",n,r)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),hn();const o=i&&Cy(i(n)),a=n.key||o&&o.key,c=Pn(Dt,{key:(a&&!Tn(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function Cy(t){return t.some(e=>Es(e)?!(e.type===ot||e.type===Dt&&!Cy(e.children)):!0)?t:null}const Yu=t=>t?nv(t)?_l(t):Yu(t.parent):null,ko=mt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Yu(t.parent),$root:t=>Yu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Dy(t),$forceUpdate:t=>t.f||(t.f=()=>{lf(t.update)}),$nextTick:t=>t.n||(t.n=Ei.bind(t.proxy)),$watch:t=>iA.bind(t)}),gu=(t,e)=>t!==Le&&!t.__isScriptSetup&&De(t,e),Bb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(gu(r,e))return o[e]=1,r[e];if(s!==Le&&De(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&De(u,e))return o[e]=3,i[e];if(n!==Le&&De(n,e))return o[e]=4,n[e];Xu&&(o[e]=0)}}const h=ko[e];let f,p;if(h)return e==="$attrs"&&xt(t.attrs,"get",""),h(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==Le&&De(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,De(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return gu(s,e)?(s[e]=n,!0):r!==Le&&De(r,e)?(r[e]=n,!0):De(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},a){let c,u;return!!(n[a]||t!==Le&&a[0]!=="$"&&De(t,a)||gu(e,a)||(c=i[0])&&De(c,a)||De(r,a)||De(ko,a)||De(s.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:De(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Kp(t){return fe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Xu=!0;function Ub(t){const e=Dy(t),n=t.proxy,r=t.ctx;Xu=!1,e.beforeCreate&&zp(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:h,beforeMount:f,mounted:p,beforeUpdate:m,updated:y,activated:v,deactivated:P,beforeDestroy:N,beforeUnmount:V,destroyed:w,unmounted:C,render:k,renderTracked:B,renderTriggered:A,errorCaptured:T,serverPrefetch:E,expose:b,inheritAttrs:x,components:S,directives:I,filters:ge}=e;if(u&&jb(u,r,null),o)for(const pe in o){const re=o[pe];me(re)&&(r[pe]=re.bind(n))}if(s){const pe=s.call(n,n);Ne(pe)&&(t.data=ir(pe))}if(Xu=!0,i)for(const pe in i){const re=i[pe],Fe=me(re)?re.bind(n,n):me(re.get)?re.get.bind(n,n):Vn,_n=!me(re)&&me(re.set)?re.set.bind(n):Vn,an=rn({get:Fe,set:_n});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>an.value,set:Qe=>an.value=Qe})}if(a)for(const pe in a)xy(a[pe],r,n,pe);if(c){const pe=me(c)?c.call(n):c;Reflect.ownKeys(pe).forEach(re=>{Cr(re,pe[re])})}h&&zp(h,t,"c");function ie(pe,re){fe(re)?re.forEach(Fe=>pe(Fe.bind(n))):re&&pe(re.bind(n))}if(ie(Nb,f),ie(ff,p),ie(kb,m),ie(Iy,y),ie(wy,v),ie(Ey,P),ie(Ay,T),ie(Lb,B),ie(Mb,A),ie(va,V),ie(by,C),ie(Ob,E),fe(b))if(b.length){const pe=t.exposed||(t.exposed={});b.forEach(re=>{Object.defineProperty(pe,re,{get:()=>n[re],set:Fe=>n[re]=Fe,enumerable:!0})})}else t.exposed||(t.exposed={});k&&t.render===Vn&&(t.render=k),x!=null&&(t.inheritAttrs=x),S&&(t.components=S),I&&(t.directives=I),E&&hf(t)}function jb(t,e,n=Vn){fe(t)&&(t=Zu(t));for(const r in t){const s=t[r];let i;Ne(s)?"default"in s?i=Nt(s.from||r,s.default,!0):i=Nt(s.from||r):i=Nt(s),lt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function zp(t,e,n){In(fe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function xy(t,e,n,r){let s=r.includes(".")?Hy(n,r):()=>n[r];if(We(t)){const i=e[t];me(i)&&xr(s,i)}else if(me(t))xr(s,t.bind(n));else if(Ne(t))if(fe(t))t.forEach(i=>xy(i,e,n,r));else{const i=me(t.handler)?t.handler.bind(n):e[t.handler];me(i)&&xr(s,i,t)}}function Dy(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>Dc(c,u,o,!0)),Dc(c,e,o)),Ne(e)&&i.set(e,c),c}function Dc(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Dc(t,i,n,!0),s&&s.forEach(o=>Dc(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=$b[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const $b={data:Wp,props:Qp,emits:Qp,methods:So,computed:So,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:So,directives:So,watch:Gb,provide:Wp,inject:qb};function Wp(t,e){return e?t?function(){return mt(me(t)?t.call(this,this):t,me(e)?e.call(this,this):e)}:e:t}function qb(t,e){return So(Zu(t),Zu(e))}function Zu(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function So(t,e){return t?mt(Object.create(null),t,e):e}function Qp(t,e){return t?fe(t)&&fe(e)?[...new Set([...t,...e])]:mt(Object.create(null),Kp(t),Kp(e??{})):e}function Gb(t,e){if(!t)return e;if(!e)return t;const n=mt(Object.create(null),t);for(const r in e)n[r]=Lt(t[r],e[r]);return n}function Vy(){return{app:null,config:{isNativeTag:O_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Hb=0;function Kb(t,e){return function(r,s=null){me(r)||(r=mt({},r)),s!=null&&!Ne(s)&&(s=null);const i=Vy(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:Hb++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:CA,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&me(h.install)?(o.add(h),h.install(u,...f)):me(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,p){if(!c){const m=u._ceVNode||et(r,s);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(m,h):t(m,h,p),c=!0,u._container=h,h.__vue_app__=u,_l(m.component)}},onUnmount(h){a.push(h)},unmount(){c&&(In(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=_s;_s=u;try{return h()}finally{_s=f}}};return u}}let _s=null;function Cr(t,e){if(Tt){let n=Tt.provides;const r=Tt.parent&&Tt.parent.provides;r===n&&(n=Tt.provides=Object.create(r)),n[t]=e}}function Nt(t,e,n=!1){const r=Hi();if(r||_s){let s=_s?_s._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&me(e)?e.call(r&&r.proxy):e}}function df(){return!!(Hi()||_s)}const Ny={},ky=()=>Object.create(Ny),Oy=t=>Object.getPrototypeOf(t)===Ny;function zb(t,e,n,r=!1){const s={},i=ky();t.propsDefaults=Object.create(null),My(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Cn(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function Wb(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Se(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(ml(t.emitsOptions,p))continue;const m=e[p];if(c)if(De(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const y=gn(p);s[y]=eh(c,a,y,m,t,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{My(t,e,s,i)&&(u=!0);let h;for(const f in a)(!e||!De(e,f)&&((h=Ns(f))===f||!De(e,h)))&&(c?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=eh(c,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!De(e,f))&&(delete i[f],u=!0)}u&&zn(t.attrs,"set","")}function My(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(fi(c))continue;const u=e[c];let h;s&&De(s,h=gn(c))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:ml(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Se(n),u=a||Le;for(let h=0;h<i.length;h++){const f=i[h];n[f]=eh(s,c,f,u[f],t,!De(u,f))}}return o}function eh(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=De(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&me(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=wa(s);r=u[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Ns(n))&&(r=!0))}return r}const Qb=new WeakMap;function Ly(t,e,n=!1){const r=n?Qb:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!me(t)){const h=f=>{c=!0;const[p,m]=Ly(f,e,!0);mt(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Ne(t)&&r.set(t,ui),ui;if(fe(i))for(let h=0;h<i.length;h++){const f=gn(i[h]);Jp(f)&&(o[f]=Le)}else if(i)for(const h in i){const f=gn(h);if(Jp(f)){const p=i[h],m=o[f]=fe(p)||me(p)?{type:p}:mt({},p),y=m.type;let v=!1,P=!0;if(fe(y))for(let N=0;N<y.length;++N){const V=y[N],w=me(V)&&V.name;if(w==="Boolean"){v=!0;break}else w==="String"&&(P=!1)}else v=me(y)&&y.name==="Boolean";m[0]=v,m[1]=P,(v||De(m,"default"))&&a.push(f)}}const u=[o,a];return Ne(t)&&r.set(t,u),u}function Jp(t){return t[0]!=="$"&&!fi(t)}const pf=t=>t==="_"||t==="_ctx"||t==="$stable",mf=t=>fe(t)?t.map(nn):[nn(t)],Jb=(t,e,n)=>{if(e._n)return e;const r=uf((...s)=>mf(e(...s)),n);return r._c=!1,r},Fy=(t,e,n)=>{const r=t._ctx;for(const s in t){if(pf(s))continue;const i=t[s];if(me(i))e[s]=Jb(s,i,r);else if(i!=null){const o=mf(i);e[s]=()=>o}}},By=(t,e)=>{const n=mf(e);t.slots.default=()=>n},Uy=(t,e,n)=>{for(const r in e)(n||!pf(r))&&(t[r]=e[r])},Yb=(t,e,n)=>{const r=t.slots=ky();if(t.vnode.shapeFlag&32){const s=e._;s?(Uy(r,e,n),n&&U_(r,"_",s,!0)):Fy(e,r)}else e&&By(t,e)},Xb=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Le;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Uy(s,e,n):(i=!e.$stable,Fy(e,s)),o=e}else e&&(By(t,e),o={default:1});if(i)for(const a in s)!pf(a)&&o[a]==null&&delete s[a]},vt=Wy;function Zb(t){return jy(t)}function eA(t){return jy(t,Sb)}function jy(t,e){const n=ul();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:h,parentNode:f,nextSibling:p,setScopeId:m=Vn,insertStaticContent:y}=t,v=(R,D,L,H=null,j=null,K=null,Z=void 0,Q=null,W=!!D.dynamicChildren)=>{if(R===D)return;R&&!wn(R,D)&&(H=$(R),Qe(R,j,K,!0),R=null),D.patchFlag===-2&&(W=!1,D.dynamicChildren=null);const{type:z,ref:he,shapeFlag:te}=D;switch(z){case ys:P(R,D,L,H);break;case ot:N(R,D,L,H);break;case uc:R==null&&V(D,L,H,Z);break;case Dt:S(R,D,L,H,j,K,Z,Q,W);break;default:te&1?k(R,D,L,H,j,K,Z,Q,W):te&6?I(R,D,L,H,j,K,Z,Q,W):(te&64||te&128)&&z.process(R,D,L,H,j,K,Z,Q,W,ce)}he!=null&&j?mi(he,R&&R.ref,K,D||R,!D):he==null&&R&&R.ref!=null&&mi(R.ref,null,K,R,!0)},P=(R,D,L,H)=>{if(R==null)r(D.el=a(D.children),L,H);else{const j=D.el=R.el;D.children!==R.children&&u(j,D.children)}},N=(R,D,L,H)=>{R==null?r(D.el=c(D.children||""),L,H):D.el=R.el},V=(R,D,L,H)=>{[R.el,R.anchor]=y(R.children,D,L,H,R.el,R.anchor)},w=({el:R,anchor:D},L,H)=>{let j;for(;R&&R!==D;)j=p(R),r(R,L,H),R=j;r(D,L,H)},C=({el:R,anchor:D})=>{let L;for(;R&&R!==D;)L=p(R),s(R),R=L;s(D)},k=(R,D,L,H,j,K,Z,Q,W)=>{D.type==="svg"?Z="svg":D.type==="math"&&(Z="mathml"),R==null?B(D,L,H,j,K,Z,Q,W):E(R,D,j,K,Z,Q,W)},B=(R,D,L,H,j,K,Z,Q)=>{let W,z;const{props:he,shapeFlag:te,transition:le,dirs:oe}=R;if(W=R.el=o(R.type,K,he&&he.is,he),te&8?h(W,R.children):te&16&&T(R.children,W,null,H,j,_u(R,K),Z,Q),oe&&Sn(R,null,H,"created"),A(W,R,R.scopeId,Z,H),he){for(const Ce in he)Ce!=="value"&&!fi(Ce)&&i(W,Ce,null,he[Ce],K,H);"value"in he&&i(W,"value",null,he.value,K),(z=he.onVnodeBeforeMount)&&zt(z,H,R)}oe&&Sn(R,null,H,"beforeMount");const de=$y(j,le);de&&le.beforeEnter(W),r(W,D,L),((z=he&&he.onVnodeMounted)||de||oe)&&vt(()=>{z&&zt(z,H,R),de&&le.enter(W),oe&&Sn(R,null,H,"mounted")},j)},A=(R,D,L,H,j)=>{if(L&&m(R,L),H)for(let K=0;K<H.length;K++)m(R,H[K]);if(j){let K=j.subTree;if(D===K||Nc(K.type)&&(K.ssContent===D||K.ssFallback===D)){const Z=j.vnode;A(R,Z,Z.scopeId,Z.slotScopeIds,j.parent)}}},T=(R,D,L,H,j,K,Z,Q,W=0)=>{for(let z=W;z<R.length;z++){const he=R[z]=Q?Er(R[z]):nn(R[z]);v(null,he,D,L,H,j,K,Z,Q)}},E=(R,D,L,H,j,K,Z)=>{const Q=D.el=R.el;let{patchFlag:W,dynamicChildren:z,dirs:he}=D;W|=R.patchFlag&16;const te=R.props||Le,le=D.props||Le;let oe;if(L&&Xr(L,!1),(oe=le.onVnodeBeforeUpdate)&&zt(oe,L,D,R),he&&Sn(D,R,L,"beforeUpdate"),L&&Xr(L,!0),(te.innerHTML&&le.innerHTML==null||te.textContent&&le.textContent==null)&&h(Q,""),z?b(R.dynamicChildren,z,Q,L,H,_u(D,j),K):Z||re(R,D,Q,null,L,H,_u(D,j),K,!1),W>0){if(W&16)x(Q,te,le,L,j);else if(W&2&&te.class!==le.class&&i(Q,"class",null,le.class,j),W&4&&i(Q,"style",te.style,le.style,j),W&8){const de=D.dynamicProps;for(let Ce=0;Ce<de.length;Ce++){const Ae=de[Ce],gt=te[Ae],ft=le[Ae];(ft!==gt||Ae==="value")&&i(Q,Ae,gt,ft,j,L)}}W&1&&R.children!==D.children&&h(Q,D.children)}else!Z&&z==null&&x(Q,te,le,L,j);((oe=le.onVnodeUpdated)||he)&&vt(()=>{oe&&zt(oe,L,D,R),he&&Sn(D,R,L,"updated")},H)},b=(R,D,L,H,j,K,Z)=>{for(let Q=0;Q<D.length;Q++){const W=R[Q],z=D[Q],he=W.el&&(W.type===Dt||!wn(W,z)||W.shapeFlag&198)?f(W.el):L;v(W,z,he,null,H,j,K,Z,!0)}},x=(R,D,L,H,j)=>{if(D!==L){if(D!==Le)for(const K in D)!fi(K)&&!(K in L)&&i(R,K,D[K],null,j,H);for(const K in L){if(fi(K))continue;const Z=L[K],Q=D[K];Z!==Q&&K!=="value"&&i(R,K,Q,Z,j,H)}"value"in L&&i(R,"value",D.value,L.value,j)}},S=(R,D,L,H,j,K,Z,Q,W)=>{const z=D.el=R?R.el:a(""),he=D.anchor=R?R.anchor:a("");let{patchFlag:te,dynamicChildren:le,slotScopeIds:oe}=D;oe&&(Q=Q?Q.concat(oe):oe),R==null?(r(z,L,H),r(he,L,H),T(D.children||[],L,he,j,K,Z,Q,W)):te>0&&te&64&&le&&R.dynamicChildren?(b(R.dynamicChildren,le,L,j,K,Z,Q),(D.key!=null||j&&D===j.subTree)&&qy(R,D,!0)):re(R,D,L,he,j,K,Z,Q,W)},I=(R,D,L,H,j,K,Z,Q,W)=>{D.slotScopeIds=Q,R==null?D.shapeFlag&512?j.ctx.activate(D,L,H,Z,W):ge(D,L,H,j,K,Z,W):we(R,D,W)},ge=(R,D,L,H,j,K,Z)=>{const Q=R.component=IA(R,H,j);if(ya(R)&&(Q.ctx.renderer=ce),bA(Q,!1,Z),Q.asyncDep){if(j&&j.registerDep(Q,ie,Z),!R.el){const W=Q.subTree=et(ot);N(null,W,D,L),R.placeholder=W.el}}else ie(Q,R,D,L,j,K,Z)},we=(R,D,L)=>{const H=D.component=R.component;if(fA(R,D,L))if(H.asyncDep&&!H.asyncResolved){pe(H,D,L);return}else H.next=D,H.update();else D.el=R.el,H.vnode=D},ie=(R,D,L,H,j,K,Z)=>{const Q=()=>{if(R.isMounted){let{next:te,bu:le,u:oe,parent:de,vnode:Ce}=R;{const Rt=Gy(R);if(Rt){te&&(te.el=Ce.el,pe(R,te,Z)),Rt.asyncDep.then(()=>{R.isUnmounted||Q()});return}}let Ae=te,gt;Xr(R,!1),te?(te.el=Ce.el,pe(R,te,Z)):te=Ce,le&&di(le),(gt=te.props&&te.props.onVnodeBeforeUpdate)&&zt(gt,de,te,Ce),Xr(R,!0);const ft=yu(R),_t=R.subTree;R.subTree=ft,v(_t,ft,f(_t.el),$(_t),R,j,K),te.el=ft.el,Ae===null&&gl(R,ft.el),oe&&vt(oe,j),(gt=te.props&&te.props.onVnodeUpdated)&&vt(()=>zt(gt,de,te,Ce),j)}else{let te;const{el:le,props:oe}=D,{bm:de,m:Ce,parent:Ae,root:gt,type:ft}=R,_t=Pr(D);if(Xr(R,!1),de&&di(de),!_t&&(te=oe&&oe.onVnodeBeforeMount)&&zt(te,Ae,D),Xr(R,!0),le&&ke){const Rt=()=>{R.subTree=yu(R),ke(le,R.subTree,R,j,null)};_t&&ft.__asyncHydrate?ft.__asyncHydrate(le,R,Rt):Rt()}else{gt.ce&&gt.ce._def.shadowRoot!==!1&&gt.ce._injectChildStyle(ft);const Rt=R.subTree=yu(R);v(null,Rt,L,H,R,j,K),D.el=Rt.el}if(Ce&&vt(Ce,j),!_t&&(te=oe&&oe.onVnodeMounted)){const Rt=D;vt(()=>zt(te,Ae,Rt),j)}(D.shapeFlag&256||Ae&&Pr(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&R.a&&vt(R.a,j),R.isMounted=!0,D=L=H=null}};R.scope.on();const W=R.effect=new W_(Q);R.scope.off();const z=R.update=W.run.bind(W),he=R.job=W.runIfDirty.bind(W);he.i=R,he.id=R.uid,W.scheduler=()=>lf(he),Xr(R,!0),z()},pe=(R,D,L)=>{D.component=R;const H=R.vnode.props;R.vnode=D,R.next=null,Wb(R,D.props,H,L),Xb(R,D.children,L),Xn(),Up(R),Zn()},re=(R,D,L,H,j,K,Z,Q,W=!1)=>{const z=R&&R.children,he=R?R.shapeFlag:0,te=D.children,{patchFlag:le,shapeFlag:oe}=D;if(le>0){if(le&128){_n(z,te,L,H,j,K,Z,Q,W);return}else if(le&256){Fe(z,te,L,H,j,K,Z,Q,W);return}}oe&8?(he&16&&Ht(z,j,K),te!==z&&h(L,te)):he&16?oe&16?_n(z,te,L,H,j,K,Z,Q,W):Ht(z,j,K,!0):(he&8&&h(L,""),oe&16&&T(te,L,H,j,K,Z,Q,W))},Fe=(R,D,L,H,j,K,Z,Q,W)=>{R=R||ui,D=D||ui;const z=R.length,he=D.length,te=Math.min(z,he);let le;for(le=0;le<te;le++){const oe=D[le]=W?Er(D[le]):nn(D[le]);v(R[le],oe,L,null,j,K,Z,Q,W)}z>he?Ht(R,j,K,!0,!1,te):T(D,L,H,j,K,Z,Q,W,te)},_n=(R,D,L,H,j,K,Z,Q,W)=>{let z=0;const he=D.length;let te=R.length-1,le=he-1;for(;z<=te&&z<=le;){const oe=R[z],de=D[z]=W?Er(D[z]):nn(D[z]);if(wn(oe,de))v(oe,de,L,null,j,K,Z,Q,W);else break;z++}for(;z<=te&&z<=le;){const oe=R[te],de=D[le]=W?Er(D[le]):nn(D[le]);if(wn(oe,de))v(oe,de,L,null,j,K,Z,Q,W);else break;te--,le--}if(z>te){if(z<=le){const oe=le+1,de=oe<he?D[oe].el:H;for(;z<=le;)v(null,D[z]=W?Er(D[z]):nn(D[z]),L,de,j,K,Z,Q,W),z++}}else if(z>le)for(;z<=te;)Qe(R[z],j,K,!0),z++;else{const oe=z,de=z,Ce=new Map;for(z=de;z<=le;z++){const Ot=D[z]=W?Er(D[z]):nn(D[z]);Ot.key!=null&&Ce.set(Ot.key,z)}let Ae,gt=0;const ft=le-de+1;let _t=!1,Rt=0;const hr=new Array(ft);for(z=0;z<ft;z++)hr[z]=0;for(z=oe;z<=te;z++){const Ot=R[z];if(gt>=ft){Qe(Ot,j,K,!0);continue}let cn;if(Ot.key!=null)cn=Ce.get(Ot.key);else for(Ae=de;Ae<=le;Ae++)if(hr[Ae-de]===0&&wn(Ot,D[Ae])){cn=Ae;break}cn===void 0?Qe(Ot,j,K,!0):(hr[cn-de]=z+1,cn>=Rt?Rt=cn:_t=!0,v(Ot,D[cn],L,null,j,K,Z,Q,W),gt++)}const $s=_t?tA(hr):ui;for(Ae=$s.length-1,z=ft-1;z>=0;z--){const Ot=de+z,cn=D[Ot],qs=D[Ot+1],to=Ot+1<he?qs.el||qs.placeholder:H;hr[z]===0?v(null,cn,L,to,j,K,Z,Q,W):_t&&(Ae<0||z!==$s[Ae]?an(cn,L,to,2):Ae--)}}},an=(R,D,L,H,j=null)=>{const{el:K,type:Z,transition:Q,children:W,shapeFlag:z}=R;if(z&6){an(R.component.subTree,D,L,H);return}if(z&128){R.suspense.move(D,L,H);return}if(z&64){Z.move(R,D,L,ce);return}if(Z===Dt){r(K,D,L);for(let te=0;te<W.length;te++)an(W[te],D,L,H);r(R.anchor,D,L);return}if(Z===uc){w(R,D,L);return}if(H!==2&&z&1&&Q)if(H===0)Q.beforeEnter(K),r(K,D,L),vt(()=>Q.enter(K),j);else{const{leave:te,delayLeave:le,afterLeave:oe}=Q,de=()=>{R.ctx.isUnmounted?s(K):r(K,D,L)},Ce=()=>{K._isLeaving&&K[Kn](!0),te(K,()=>{de(),oe&&oe()})};le?le(K,de,Ce):Ce()}else r(K,D,L)},Qe=(R,D,L,H=!1,j=!1)=>{const{type:K,props:Z,ref:Q,children:W,dynamicChildren:z,shapeFlag:he,patchFlag:te,dirs:le,cacheIndex:oe}=R;if(te===-2&&(j=!1),Q!=null&&(Xn(),mi(Q,null,L,R,!0),Zn()),oe!=null&&(D.renderCache[oe]=void 0),he&256){D.ctx.deactivate(R);return}const de=he&1&&le,Ce=!Pr(R);let Ae;if(Ce&&(Ae=Z&&Z.onVnodeBeforeUnmount)&&zt(Ae,D,R),he&6)en(R.component,L,H);else{if(he&128){R.suspense.unmount(L,H);return}de&&Sn(R,null,D,"beforeUnmount"),he&64?R.type.remove(R,D,L,ce,H):z&&!z.hasOnce&&(K!==Dt||te>0&&te&64)?Ht(z,D,L,!1,!0):(K===Dt&&te&384||!j&&he&16)&&Ht(W,D,L),H&&Je(R)}(Ce&&(Ae=Z&&Z.onVnodeUnmounted)||de)&&vt(()=>{Ae&&zt(Ae,D,R),de&&Sn(R,null,D,"unmounted")},L)},Je=R=>{const{type:D,el:L,anchor:H,transition:j}=R;if(D===Dt){ur(L,H);return}if(D===uc){C(R);return}const K=()=>{s(L),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(R.shapeFlag&1&&j&&!j.persisted){const{leave:Z,delayLeave:Q}=j,W=()=>Z(L,K);Q?Q(R.el,K,W):W()}else K()},ur=(R,D)=>{let L;for(;R!==D;)L=p(R),s(R),R=L;s(D)},en=(R,D,L)=>{const{bum:H,scope:j,job:K,subTree:Z,um:Q,m:W,a:z}=R;Vc(W),Vc(z),H&&di(H),j.stop(),K&&(K.flags|=8,Qe(Z,R,D,L)),Q&&vt(Q,D),vt(()=>{R.isUnmounted=!0},D)},Ht=(R,D,L,H=!1,j=!1,K=0)=>{for(let Z=K;Z<R.length;Z++)Qe(R[Z],D,L,H,j)},$=R=>{if(R.shapeFlag&6)return $(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const D=p(R.anchor||R.el),L=D&&D[Eb];return L?p(L):D};let se=!1;const ee=(R,D,L)=>{R==null?D._vnode&&Qe(D._vnode,null,null,!0):v(D._vnode||null,R,D,null,null,null,L),D._vnode=R,se||(se=!0,Up(),Pc(),se=!1)},ce={p:v,um:Qe,m:an,r:Je,mt:ge,mc:T,pc:re,pbc:b,n:$,o:t};let ye,ke;return e&&([ye,ke]=e(ce)),{render:ee,hydrate:ye,createApp:Kb(ee,ye)}}function _u({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Xr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function $y(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function qy(t,e,n=!1){const r=t.children,s=e.children;if(fe(r)&&fe(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Er(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&qy(o,a)),a.type===ys&&a.patchFlag!==-1&&(a.el=o.el),a.type===ot&&!a.el&&(a.el=o.el)}}function tA(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Gy(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Gy(e)}function Vc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const nA=Symbol.for("v-scx"),rA=()=>Nt(nA);function sA(t,e){return gf(t,null,e)}function xr(t,e,n){return gf(t,e,n)}function gf(t,e,n=Le){const{immediate:r,deep:s,flush:i,once:o}=n,a=mt({},n),c=e&&r||!e&&i!=="post";let u;if(bi){if(i==="sync"){const m=rA();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!c){const m=()=>{};return m.stop=Vn,m.resume=Vn,m.pause=Vn,m}}const h=Tt;a.call=(m,y,v)=>In(m,h,y,v);let f=!1;i==="post"?a.scheduler=m=>{vt(m,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,y)=>{y?m():lf(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=yb(t,e,a);return bi&&(u?u.push(p):c&&p()),p}function iA(t,e,n){const r=this.proxy,s=We(t)?t.includes(".")?Hy(r,t):()=>r[t]:t.bind(r,r);let i;me(e)?i=e:(i=e.handler,n=e);const o=wa(this),a=gf(s,i.bind(r),n);return o(),a}function Hy(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const oA=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${gn(e)}Modifiers`]||t[`${Ns(e)}Modifiers`];function aA(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Le;let s=n;const i=e.startsWith("update:"),o=i&&oA(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>We(h)?h.trim():h)),o.number&&(s=n.map(VI)));let a,c=r[a=cu(e)]||r[a=cu(gn(e))];!c&&i&&(c=r[a=cu(Ns(e))]),c&&In(c,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,In(u,t,6,s)}}const cA=new WeakMap;function Ky(t,e,n=!1){const r=n?cA:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!me(t)){const c=u=>{const h=Ky(u,e,!0);h&&(a=!0,mt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Ne(t)&&r.set(t,null),null):(fe(i)?i.forEach(c=>o[c]=null):mt(o,i),Ne(t)&&r.set(t,o),o)}function ml(t,e){return!t||!ga(e)?!1:(e=e.slice(2).replace(/Once$/,""),De(t,e[0].toLowerCase()+e.slice(1))||De(t,Ns(e))||De(t,e))}function yu(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:h,props:f,data:p,setupState:m,ctx:y,inheritAttrs:v}=t,P=Cc(t);let N,V;try{if(n.shapeFlag&4){const C=s||r,k=C;N=nn(u.call(k,C,h,f,m,p,y)),V=a}else{const C=e;N=nn(C.length>1?C(f,{attrs:a,slots:o,emit:c}):C(f,null)),V=e.props?a:uA(a)}}catch(C){Oo.length=0,Gi(C,t,1),N=et(ot)}let w=N;if(V&&v!==!1){const C=Object.keys(V),{shapeFlag:k}=w;C.length&&k&7&&(i&&C.some(Xh)&&(V=hA(V,i)),w=tr(w,V,!1,!0))}return n.dirs&&(w=tr(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&Ti(w,n.transition),N=w,Cc(P),N}function lA(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(Es(s)){if(s.type!==ot||s.children==="v-if"){if(n)return;n=s}}else return}return n}const uA=t=>{let e;for(const n in t)(n==="class"||n==="style"||ga(n))&&((e||(e={}))[n]=t[n]);return e},hA=(t,e)=>{const n={};for(const r in t)(!Xh(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function fA(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Yp(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==r[p]&&!ml(u,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Yp(r,o,u):!0:!!o;return!1}function Yp(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ml(n,i))return!0}return!1}function gl({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Nc=t=>t.__isSuspense;let th=0;const dA={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,c,u){if(t==null)pA(e,n,r,s,i,o,a,c,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}mA(t,e,n,r,s,o,a,c,u)}},hydrate:gA,normalize:_A},_f=dA;function zo(t,e){const n=t.props&&t.props[e];me(n)&&n()}function pA(t,e,n,r,s,i,o,a,c){const{p:u,o:{createElement:h}}=c,f=h("div"),p=t.suspense=zy(t,s,r,e,f,n,i,o,a,c);u(null,p.pendingBranch=t.ssContent,f,null,r,p,i,o),p.deps>0?(zo(t,"onPending"),zo(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,i,o),gi(p,t.ssFallback)):p.resolve(!1,!0)}function mA(t,e,n,r,s,i,o,a,{p:c,um:u,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,m=e.ssFallback,{activeBranch:y,pendingBranch:v,isInFallback:P,isHydrating:N}=f;if(v)f.pendingBranch=p,wn(v,p)?(c(v,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():P&&(N||(c(y,m,n,r,s,null,i,o,a),gi(f,m)))):(f.pendingId=th++,N?(f.isHydrating=!1,f.activeBranch=v):u(v,s,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),P?(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():(c(y,m,n,r,s,null,i,o,a),gi(f,m))):y&&wn(y,p)?(c(y,p,n,r,s,f,i,o,a),f.resolve(!0)):(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0&&f.resolve()));else if(y&&wn(y,p))c(y,p,n,r,s,f,i,o,a),gi(f,p);else if(zo(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=th++,c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:V,pendingId:w}=f;V>0?setTimeout(()=>{f.pendingId===w&&f.fallback(m)},V):V===0&&f.fallback(m)}}function zy(t,e,n,r,s,i,o,a,c,u,h=!1){const{p:f,m:p,um:m,n:y,o:{parentNode:v,remove:P}}=u;let N;const V=yA(t);V&&e&&e.pendingBranch&&(N=e.pendingId,e.deps++);const w=t.props?j_(t.props.timeout):void 0,C=i,k={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:th++,timeout:typeof w=="number"?w:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(B=!1,A=!1){const{vnode:T,activeBranch:E,pendingBranch:b,pendingId:x,effects:S,parentComponent:I,container:ge}=k;let we=!1;k.isHydrating?k.isHydrating=!1:B||(we=E&&b.transition&&b.transition.mode==="out-in",we&&(E.transition.afterLeave=()=>{x===k.pendingId&&(p(b,ge,i===C?y(E):i,0),Wu(S))}),E&&(v(E.el)===ge&&(i=y(E)),m(E,I,k,!0)),we||p(b,ge,i,0)),gi(k,b),k.pendingBranch=null,k.isInFallback=!1;let ie=k.parent,pe=!1;for(;ie;){if(ie.pendingBranch){ie.effects.push(...S),pe=!0;break}ie=ie.parent}!pe&&!we&&Wu(S),k.effects=[],V&&e&&e.pendingBranch&&N===e.pendingId&&(e.deps--,e.deps===0&&!A&&e.resolve()),zo(T,"onResolve")},fallback(B){if(!k.pendingBranch)return;const{vnode:A,activeBranch:T,parentComponent:E,container:b,namespace:x}=k;zo(A,"onFallback");const S=y(T),I=()=>{k.isInFallback&&(f(null,B,b,S,E,null,x,a,c),gi(k,B))},ge=B.transition&&B.transition.mode==="out-in";ge&&(T.transition.afterLeave=I),k.isInFallback=!0,m(T,E,null,!0),ge||I()},move(B,A,T){k.activeBranch&&p(k.activeBranch,B,A,T),k.container=B},next(){return k.activeBranch&&y(k.activeBranch)},registerDep(B,A,T){const E=!!k.pendingBranch;E&&k.deps++;const b=B.vnode.el;B.asyncDep.catch(x=>{Gi(x,B,0)}).then(x=>{if(B.isUnmounted||k.isUnmounted||k.pendingId!==B.suspenseId)return;B.asyncResolved=!0;const{vnode:S}=B;rh(B,x),b&&(S.el=b);const I=!b&&B.subTree.el;A(B,S,v(b||B.subTree.el),b?null:y(B.subTree),k,o,T),I&&P(I),gl(B,S.el),E&&--k.deps===0&&k.resolve()})},unmount(B,A){k.isUnmounted=!0,k.activeBranch&&m(k.activeBranch,n,B,A),k.pendingBranch&&m(k.pendingBranch,n,B,A)}};return k}function gA(t,e,n,r,s,i,o,a,c){const u=e.suspense=zy(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=c(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function _A(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Xp(r?n.default:n),t.ssFallback=r?Xp(n.fallback):et(ot)}function Xp(t){let e;if(me(t)){const n=Ii&&t._c;n&&(t._d=!1,hn()),t=t(),n&&(t._d=!0,e=Qt,Qy())}return fe(t)&&(t=lA(t)),t=nn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Wy(t,e){e&&e.pendingBranch?fe(t)?e.effects.push(...t):e.effects.push(t):Wu(t)}function gi(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,gl(r,s))}function yA(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Dt=Symbol.for("v-fgt"),ys=Symbol.for("v-txt"),ot=Symbol.for("v-cmt"),uc=Symbol.for("v-stc"),Oo=[];let Qt=null;function hn(t=!1){Oo.push(Qt=t?null:[])}function Qy(){Oo.pop(),Qt=Oo[Oo.length-1]||null}let Ii=1;function kc(t,e=!1){Ii+=t,t<0&&Qt&&e&&(Qt.hasOnce=!0)}function Jy(t){return t.dynamicChildren=Ii>0?Qt||ui:null,Qy(),Ii>0&&Qt&&Qt.push(t),t}function vA(t,e,n,r,s,i){return Jy(Xy(t,e,n,r,s,i,!0))}function Pn(t,e,n,r,s){return Jy(et(t,e,n,r,s,!0))}function Es(t){return t?t.__v_isVNode===!0:!1}function wn(t,e){return t.type===e.type&&t.key===e.key}const Yy=({key:t})=>t??null,hc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?We(t)||lt(t)||me(t)?{i:bt,r:t,k:e,f:!!n}:t:null);function Xy(t,e=null,n=null,r=0,s=null,i=t===Dt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Yy(e),ref:e&&hc(e),scopeId:dy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:bt};return a?(yf(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=We(n)?8:16),Ii>0&&!o&&Qt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Qt.push(c),c}const et=wA;function wA(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Sy)&&(t=ot),Es(t)){const a=tr(t,e,!0);return n&&yf(a,n),Ii>0&&!i&&Qt&&(a.shapeFlag&6?Qt[Qt.indexOf(t)]=a:Qt.push(a)),a.patchFlag=-2,a}if(PA(t)&&(t=t.__vccOpts),e){e=Zy(e);let{class:a,style:c}=e;a&&!We(a)&&(e.class=fl(a)),Ne(c)&&(cf(c)&&!fe(c)&&(c=mt({},c)),e.style=hl(c))}const o=We(t)?1:Nc(t)?128:py(t)?64:Ne(t)?4:me(t)?2:0;return Xy(t,e,n,r,s,o,i,!0)}function Zy(t){return t?cf(t)||Oy(t)?mt({},t):t:null}function tr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,u=e?tv(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Yy(u),ref:e&&e.ref?n&&i?fe(i)?i.concat(hc(e)):[i,hc(e)]:hc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Dt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&tr(t.ssContent),ssFallback:t.ssFallback&&tr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Ti(h,c.clone(h)),h}function ev(t=" ",e=0){return et(ys,null,t,e)}function Y1(t="",e=!1){return e?(hn(),Pn(ot,null,t)):et(ot,null,t)}function nn(t){return t==null||typeof t=="boolean"?et(ot):fe(t)?et(Dt,null,t.slice()):Es(t)?Er(t):et(ys,null,String(t))}function Er(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:tr(t)}function yf(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(fe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),yf(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Oy(e)?e._ctx=bt:s===3&&bt&&(bt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else me(e)?(e={default:e,_ctx:bt},n=32):(e=String(e),r&64?(n=16,e=[ev(e)]):n=8);t.children=e,t.shapeFlag|=n}function tv(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=fl([e.class,r.class]));else if(s==="style")e.style=hl([e.style,r.style]);else if(ga(s)){const i=e[s],o=r[s];o&&i!==o&&!(fe(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function zt(t,e,n,r=null){In(t,e,7,[n,r])}const EA=Vy();let TA=0;function IA(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||EA,i={uid:TA++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new H_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ly(r,s),emitsOptions:Ky(r,s),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:r.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=aA.bind(null,i),t.ce&&t.ce(i),i}let Tt=null;const Hi=()=>Tt||bt;let Oc,nh;{const t=ul(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Oc=e("__VUE_INSTANCE_SETTERS__",n=>Tt=n),nh=e("__VUE_SSR_SETTERS__",n=>bi=n)}const wa=t=>{const e=Tt;return Oc(t),t.scope.on(),()=>{t.scope.off(),Oc(e)}},Zp=()=>{Tt&&Tt.scope.off(),Oc(null)};function nv(t){return t.vnode.shapeFlag&4}let bi=!1;function bA(t,e=!1,n=!1){e&&nh(e);const{props:r,children:s}=t.vnode,i=nv(t);zb(t,r,i,e),Yb(t,s,n||e);const o=i?AA(t,e):void 0;return e&&nh(!1),o}function AA(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Bb);const{setup:r}=n;if(r){Xn();const s=t.setupContext=r.length>1?SA(t):null,i=wa(t),o=_a(r,t,0,[t.props,s]),a=L_(o);if(Zn(),i(),(a||t.sp)&&!Pr(t)&&hf(t),a){if(o.then(Zp,Zp),e)return o.then(c=>{rh(t,c)}).catch(c=>{Gi(c,t,0)});t.asyncDep=o}else rh(t,o)}else rv(t)}function rh(t,e,n){me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ne(e)&&(t.setupState=ly(e)),rv(t)}function rv(t,e,n){const r=t.type;t.render||(t.render=r.render||Vn);{const s=wa(t);Xn();try{Ub(t)}finally{Zn(),s()}}}const RA={get(t,e){return xt(t,"get",""),t[e]}};function SA(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,RA),slots:t.slots,emit:t.emit,expose:e}}function _l(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ly(ab(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ko)return ko[n](t)},has(e,n){return n in e||n in ko}})):t.proxy}function sh(t,e=!0){return me(t)?t.displayName||t.name:t.name||e&&t.__name}function PA(t){return me(t)&&"__vccOpts"in t}const rn=(t,e)=>gb(t,e,bi);function Vt(t,e,n){try{kc(-1);const r=arguments.length;return r===2?Ne(e)&&!fe(e)?Es(e)?et(t,null,[e]):et(t,e):et(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Es(n)&&(n=[n]),et(t,e,n))}finally{kc(1)}}const CA="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ih;const em=typeof window<"u"&&window.trustedTypes;if(em)try{ih=em.createPolicy("vue",{createHTML:t=>t})}catch{}const sv=ih?t=>ih.createHTML(t):t=>t,xA="http://www.w3.org/2000/svg",DA="http://www.w3.org/1998/Math/MathML",Hn=typeof document<"u"?document:null,tm=Hn&&Hn.createElement("template"),VA={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Hn.createElementNS(xA,t):e==="mathml"?Hn.createElementNS(DA,t):n?Hn.createElement(t,{is:n}):Hn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Hn.createTextNode(t),createComment:t=>Hn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Hn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{tm.innerHTML=sv(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=tm.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},mr="transition",go="animation",Wo=Symbol("_vtc"),iv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},NA=mt({},my,iv),kA=t=>(t.displayName="Transition",t.props=NA,t),OA=kA((t,{slots:e})=>Vt(bb,MA(t),e)),Zr=(t,e=[])=>{fe(t)?t.forEach(n=>n(...e)):t&&t(...e)},nm=t=>t?fe(t)?t.some(e=>e.length>1):t.length>1:!1;function MA(t){const e={};for(const S in t)S in iv||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,y=LA(s),v=y&&y[0],P=y&&y[1],{onBeforeEnter:N,onEnter:V,onEnterCancelled:w,onLeave:C,onLeaveCancelled:k,onBeforeAppear:B=N,onAppear:A=V,onAppearCancelled:T=w}=e,E=(S,I,ge,we)=>{S._enterCancelled=we,es(S,I?h:a),es(S,I?u:o),ge&&ge()},b=(S,I)=>{S._isLeaving=!1,es(S,f),es(S,m),es(S,p),I&&I()},x=S=>(I,ge)=>{const we=S?A:V,ie=()=>E(I,S,ge);Zr(we,[I,ie]),rm(()=>{es(I,S?c:i),qn(I,S?h:a),nm(we)||sm(I,r,v,ie)})};return mt(e,{onBeforeEnter(S){Zr(N,[S]),qn(S,i),qn(S,o)},onBeforeAppear(S){Zr(B,[S]),qn(S,c),qn(S,u)},onEnter:x(!1),onAppear:x(!0),onLeave(S,I){S._isLeaving=!0;const ge=()=>b(S,I);qn(S,f),S._enterCancelled?(qn(S,p),am(S)):(am(S),qn(S,p)),rm(()=>{S._isLeaving&&(es(S,f),qn(S,m),nm(C)||sm(S,r,P,ge))}),Zr(C,[S,ge])},onEnterCancelled(S){E(S,!1,void 0,!0),Zr(w,[S])},onAppearCancelled(S){E(S,!0,void 0,!0),Zr(T,[S])},onLeaveCancelled(S){b(S),Zr(k,[S])}})}function LA(t){if(t==null)return null;if(Ne(t))return[vu(t.enter),vu(t.leave)];{const e=vu(t);return[e,e]}}function vu(t){return j_(t)}function qn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Wo]||(t[Wo]=new Set)).add(e)}function es(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Wo];n&&(n.delete(e),n.size||(t[Wo]=void 0))}function rm(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let FA=0;function sm(t,e,n,r){const s=t._endId=++FA,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=BA(t,e);if(!o)return r();const u=o+"end";let h=0;const f=()=>{t.removeEventListener(u,p),i()},p=m=>{m.target===t&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},a+1),t.addEventListener(u,p)}function BA(t,e){const n=window.getComputedStyle(t),r=y=>(n[y]||"").split(", "),s=r(`${mr}Delay`),i=r(`${mr}Duration`),o=im(s,i),a=r(`${go}Delay`),c=r(`${go}Duration`),u=im(a,c);let h=null,f=0,p=0;e===mr?o>0&&(h=mr,f=o,p=i.length):e===go?u>0&&(h=go,f=u,p=c.length):(f=Math.max(o,u),h=f>0?o>u?mr:go:null,p=h?h===mr?i.length:c.length:0);const m=h===mr&&/\b(?:transform|all)(?:,|$)/.test(r(`${mr}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:m}}function im(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>om(n)+om(t[r])))}function om(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function am(t){return(t?t.ownerDocument:document).body.offsetHeight}function UA(t,e,n){const r=t[Wo];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const cm=Symbol("_vod"),jA=Symbol("_vsh"),$A=Symbol(""),qA=/(?:^|;)\s*display\s*:/;function GA(t,e,n){const r=t.style,s=We(n);let i=!1;if(n&&!s){if(e)if(We(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&fc(r,a,"")}else for(const o in e)n[o]==null&&fc(r,o,"");for(const o in n)o==="display"&&(i=!0),fc(r,o,n[o])}else if(s){if(e!==n){const o=r[$A];o&&(n+=";"+o),r.cssText=n,i=qA.test(n)}}else e&&t.removeAttribute("style");cm in t&&(t[cm]=i?r.display:"",t[jA]&&(r.display="none"))}const lm=/\s*!important$/;function fc(t,e,n){if(fe(n))n.forEach(r=>fc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=HA(t,e);lm.test(n)?t.setProperty(Ns(r),n.replace(lm,""),"important"):t[r]=n}}const um=["Webkit","Moz","ms"],wu={};function HA(t,e){const n=wu[e];if(n)return n;let r=gn(e);if(r!=="filter"&&r in t)return wu[e]=r;r=ll(r);for(let s=0;s<um.length;s++){const i=um[s]+r;if(i in t)return wu[e]=i}return e}const hm="http://www.w3.org/1999/xlink";function fm(t,e,n,r,s,i=BI(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(hm,e.slice(6,e.length)):t.setAttributeNS(hm,e,n):n==null||i&&!$_(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Tn(n)?String(n):n)}function dm(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?sv(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=$_(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function ov(t,e,n,r){t.addEventListener(e,n,r)}function KA(t,e,n,r){t.removeEventListener(e,n,r)}const pm=Symbol("_vei");function zA(t,e,n,r,s=null){const i=t[pm]||(t[pm]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=WA(e);if(r){const u=i[e]=YA(r,s);ov(t,a,u,c)}else o&&(KA(t,a,o,c),i[e]=void 0)}}const mm=/(?:Once|Passive|Capture)$/;function WA(t){let e;if(mm.test(t)){e={};let r;for(;r=t.match(mm);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ns(t.slice(2)),e]}let Eu=0;const QA=Promise.resolve(),JA=()=>Eu||(QA.then(()=>Eu=0),Eu=Date.now());function YA(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;In(XA(r,n.value),e,5,[r])};return n.value=t,n.attached=JA(),n}function XA(t,e){if(fe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const gm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ZA=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?UA(t,r,o):e==="style"?GA(t,n,r):ga(e)?Xh(e)||zA(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):eR(t,e,r,o))?(dm(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&fm(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!We(r))?dm(t,gn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),fm(t,e,r,o))};function eR(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&gm(e)&&me(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return gm(e)&&We(n)?!1:e in t}const _m=t=>{const e=t.props["onUpdate:modelValue"]||!1;return fe(e)?n=>di(e,n):e},Tu=Symbol("_assign"),X1={created(t,{value:e},n){t.checked=Ic(e,n.props.value),t[Tu]=_m(n),ov(t,"change",()=>{t[Tu](tR(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Tu]=_m(r),e!==n&&(t.checked=Ic(e,r.props.value))}};function tR(t){return"_value"in t?t._value:t.value}const av=mt({patchProp:ZA},VA);let Mo,ym=!1;function nR(){return Mo||(Mo=Zb(av))}function rR(){return Mo=ym?Mo:eA(av),ym=!0,Mo}const sR=((...t)=>{const e=nR().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=lv(r);if(!s)return;const i=e._component;!me(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,cv(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e}),iR=((...t)=>{const e=rR().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=lv(r);if(s)return n(s,!0,cv(s))},e});function cv(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function lv(t){return We(t)?document.querySelector(t):t}const oR=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,aR=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,cR=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function lR(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){uR(t);return}return e}function uR(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Mc(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!cR.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(oR.test(t)||aR.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,lR)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const hR=/#/g,fR=/&/g,dR=/\//g,pR=/=/g,vf=/\+/g,mR=/%5e/gi,gR=/%60/gi,_R=/%7c/gi,yR=/%20/gi;function vR(t){return encodeURI(""+t).replace(_R,"|")}function oh(t){return vR(typeof t=="string"?t:JSON.stringify(t)).replace(vf,"%2B").replace(yR,"+").replace(hR,"%23").replace(fR,"%26").replace(gR,"`").replace(mR,"^").replace(dR,"%2F")}function Iu(t){return oh(t).replace(pR,"%3D")}function Lc(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function wR(t){return Lc(t.replace(vf," "))}function ER(t){return Lc(t.replace(vf," "))}function uv(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=wR(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=ER(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function TR(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${Iu(t)}=${oh(n)}`).join("&"):`${Iu(t)}=${oh(e)}`:Iu(t)}function IR(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>TR(e,t[e])).filter(Boolean).join("&")}const bR=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,AR=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,RR=/^([/\\]\s*){2,}[^/\\]/,SR=/^[\s\0]*(blob|data|javascript|vbscript):$/i,PR=/\/$|\/\?|\/#/,CR=/^\.?\//;function ks(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?bR.test(t):AR.test(t)||(e.acceptRelative?RR.test(t):!1)}function xR(t){return!!t&&SR.test(t)}function ah(t="",e){return e?PR.test(t):t.endsWith("/")}function Fc(t="",e){if(!e)return(ah(t)?t.slice(0,-1):t)||"/";if(!ah(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");s!==-1&&(n=t.slice(0,s),r=t.slice(s));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function DR(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(ah(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");if(s!==-1&&(n=t.slice(0,s),r=t.slice(s),!n))return r;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function VR(t,e){if(fv(e)||ks(t))return t;const n=Fc(e);return t.startsWith(n)?t:wf(n,t)}function vm(t,e){if(fv(e))return t;const n=Fc(e);if(!t.startsWith(n))return t;const r=t.slice(n.length);return r[0]==="/"?r:"/"+r}function hv(t,e){const n=mv(t),r={...uv(n.search),...e};return n.search=IR(r),OR(n)}function fv(t){return!t||t==="/"}function NR(t){return t&&t!=="/"}function wf(t,...e){let n=t||"";for(const r of e.filter(s=>NR(s)))if(n){const s=r.replace(CR,"");n=DR(n)+s}else n=r;return n}function dv(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),r=[];let s=0;for(const o of n)if(!(!o||o==="/")){for(const[a,c]of o.split(e).entries())if(!(!c||c===".")){if(c===".."){if(r.length===1&&ks(r[0]))continue;r.pop(),s--;continue}if(a===1&&r[r.length-1]?.endsWith(":/")){r[r.length-1]+="/"+c;continue}r.push(c),s++}}let i=r.join("/");return s>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function kR(t,e){return Lc(Fc(t))===Lc(Fc(e))}const pv=Symbol.for("ufo:protocolRelative");function mv(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,p=""]=n;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!ks(t,{acceptRelative:!0}))return wm(t);const[,r="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:u,hash:h}=wm(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:u,hash:h,[pv]:!r}}function wm(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function OR(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[pv]?(t.protocol||"")+"//":"")+s+i+e+n+r}class MR extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function LR(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",r=t.request?.url||String(t.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new MR(o,t.error?{cause:t.error}:void 0);for(const c of["request","options","response"])Object.defineProperty(a,c,{get(){return t[c]}});for(const[c,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,c,{get(){return t.response&&t.response[u]}});return a}const FR=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Em(t="GET"){return FR.has(t.toUpperCase())}function BR(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const UR=new Set(["image/svg","application/xml","application/xhtml","application/html"]),jR=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function $R(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return jR.test(e)?"json":UR.has(e)||e.startsWith("text/")?"text":"blob"}function qR(t,e,n,r){const s=GR(e?.headers??t?.headers,n?.headers,r);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:s}}function GR(t,e,n){if(!e)return new n(t);const r=new n(e);if(t)for(const[s,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))r.set(s,i);return r}async function nc(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const HR=new Set([408,409,425,429,500,502,503,504]),KR=new Set([101,204,205,304]);function gv(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function s(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let h;typeof a.options.retry=="number"?h=a.options.retry:h=Em(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):HR.has(f))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(m=>setTimeout(m,p)),i(a.request,{...a.options,retry:h-1})}}const u=LR(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(c,u={}){const h={request:c,options:qR(c,u,t.defaults,n),response:void 0,error:void 0};h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&await nc(h,h.options.onRequest),typeof h.request=="string"&&(h.options.baseURL&&(h.request=VR(h.request,h.options.baseURL)),h.options.query&&(h.request=hv(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&Em(h.options.method)&&(BR(h.options.body)?(h.options.body=typeof h.options.body=="string"?h.options.body:JSON.stringify(h.options.body),h.options.headers=new n(h.options.headers||{}),h.options.headers.has("content-type")||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")):("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half")));let f;if(!h.options.signal&&h.options.timeout){const m=new r;f=setTimeout(()=>{const y=new Error("[TimeoutError]: The operation was aborted due to timeout");y.name="TimeoutError",y.code=23,m.abort(y)},h.options.timeout),h.options.signal=m.signal}try{h.response=await e(h.request,h.options)}catch(m){return h.error=m,h.options.onRequestError&&await nc(h,h.options.onRequestError),await s(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!KR.has(h.response.status)&&h.options.method!=="HEAD"){const m=(h.options.parseResponse?"json":h.options.responseType)||$R(h.response.headers.get("content-type")||"");switch(m){case"json":{const y=await h.response.text(),v=h.options.parseResponse||Mc;h.response._data=v(y);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[m]()}}return h.options.onResponse&&await nc(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await nc(h,h.options.onResponseError),await s(h)):h.response},o=async function(c,u){return(await i(c,u))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},c={})=>gv({...t,...c,defaults:{...t.defaults,...c.defaults,...a}}),o}const Bc=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),zR=Bc.fetch?(...t)=>Bc.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),WR=Bc.Headers,QR=Bc.AbortController,JR=gv({fetch:zR,Headers:WR,AbortController:QR}),YR=JR,XR=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,Ef=()=>XR().app,ZR=()=>Ef().baseURL,eS=()=>Ef().buildAssetsDir,Tf=(...t)=>dv(_v(),eS(),...t),_v=(...t)=>{const e=Ef(),n=e.cdnURL||e.baseURL;return t.length?dv(n,...t):n};globalThis.__buildAssetsURL=Tf,globalThis.__publicAssetsURL=_v;globalThis.$fetch||(globalThis.$fetch=YR.create({baseURL:ZR()}));"global"in globalThis||(globalThis.global=globalThis);function ch(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?ch(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const tS={run:t=>t()},nS=()=>tS,yv=typeof console.createTask<"u"?console.createTask:nS;function rS(t,e){const n=e.shift(),r=yv(n);return t.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function sS(t,e){const n=e.shift(),r=yv(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}function bu(t,e){for(const n of[...t])n(e)}class iS{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=ch(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const n=ch(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(rS,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(sS,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&bu(this._before,s);const i=e(n in this._hooks?[...this._hooks[n]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&bu(this._after,s)}):(this._after&&s&&bu(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function vv(){return new iS}function oS(t={}){let e,n=!1;const r=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||r(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{r(o),e=o;try{return s?s.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const c=()=>{e=o},u=()=>e===o?c:void 0;lh.add(u);try{const h=s?s.run(o,a):a();return n||(e=void 0),await h}finally{lh.delete(u)}}}}function aS(t={}){const e={};return{get(n,r={}){return e[n]||(e[n]=oS({...t,...r})),e[n]}}}const Uc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Tm="__unctx__",cS=Uc[Tm]||(Uc[Tm]=aS()),lS=(t,e={})=>cS.get(t,e),Im="__unctx_async_handlers__",lh=Uc[Im]||(Uc[Im]=new Set);function _i(t){const e=[];for(const s of lh){const i=s();i&&e.push(i)}const n=()=>{for(const s of e)s()};let r=t();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const uS=!1,bm=!1,hS=!1,Am={id:"__nuxt-loader"},Z1={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},fS="#__nuxt",wv="nuxt-app",Rm=36e5,dS="vite:preloadError";function Ev(t=wv){return lS(t,{asyncContext:!1})}const pS="__nuxt_plugin";function mS(t){let e=0;const n={_id:t.id||wv||"nuxt-app",_scope:K_(),provide:void 0,versions:{get nuxt(){return"4.2.0"},get vue(){return n.vueApp.version}},payload:Cn({...t.ssrContext?.payload||{},data:Cn({}),state:ir({}),once:new Set,_errors:Cn({})}),static:{data:{}},runWithContext(s){return n._scope.active&&!z_()?n._scope.run(()=>Sm(n,s)):Sm(n,s)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let s=!1;return()=>{if(!s&&(s=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Cn({}),_payloadRevivers:{},...t};{const s=window.__NUXT__;if(s)for(const i in s)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],s[i]);break;default:n.payload[i]=s[i]}}n.hooks=vv(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(s,i)=>{const o="$"+s;rc(n,o,i),rc(n.vueApp.config.globalProperties,o,i)},rc(n.vueApp,"$nuxt",n),rc(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(dS,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=ut;const s=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",s)}const r=n.payload.config;return n.provide("config",r),n}function gS(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function _S(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}}async function yS(t,e){const n=new Set,r=[],s=[];let i,o=0;async function a(c){const u=c.dependsOn?.filter(h=>e.some(f=>f._name===h)&&!n.has(h))??[];if(u.length>0)r.push([new Set(u),c]);else{const h=_S(t,c).then(async()=>{c._name&&(n.add(c._name),await Promise.all(r.map(async([f,p])=>{f.has(c._name)&&(f.delete(c._name),f.size===0&&(o++,await a(p)))})))}).catch(f=>{if(!c.parallel&&!t.payload.error)throw f;i||=f});c.parallel?s.push(h):await h}}for(const c of e)gS(t,c);for(const c of e)await a(c);if(await Promise.all(s),o)for(let c=0;c<o;c++)await Promise.all(s);if(i)throw t.payload.error||i}function Fn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[pS]:!0,_name:e})}function Sm(t,e,n){const r=()=>e();return Ev(t._id).set(t),t.vueApp.runWithContext(r)}function vS(t){let e;return df()&&(e=Hi()?.appContext.app.$nuxt),e||=Ev(t).tryUse(),e||null}function ut(t){const e=vS(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function yl(t){return ut().$config}function rc(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function wS(t,e){return{ctx:{table:t},matchAll:n=>Iv(n,t)}}function Tv(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([r,s])=>[r,Tv(s)])):new Map(Object.entries(t[n]));return e}function ES(t){return wS(Tv(t))}function Iv(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const r=[];for(const[i,o]of Pm(e.wildcard))(t===i||t.startsWith(i+"/"))&&r.push(o);for(const[i,o]of Pm(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");r.push(...Iv(a,o))}const s=e.static.get(t);return s&&r.push(s),r.filter(Boolean)}function Pm(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function Au(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function uh(t,e,n=".",r){if(!Au(e))return uh(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:Au(o)&&Au(s[i])?s[i]=uh(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function TS(t){return(...e)=>e.reduce((n,r)=>uh(n,r,"",t),{})}const bv=TS();function IS(t,e){try{return e in t}catch{return!1}}class Cm extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:hh(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=Av(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function bS(t){if(typeof t=="string")return new Cm(t);if(AS(t))return t;const e=new Cm(t.message??t.statusMessage??"",{cause:t.cause||t});if(IS(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=hh(t.statusCode,e.statusCode):t.status&&(e.statusCode=hh(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;Av(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function AS(t){return t?.constructor?.__h3_error__===!0}const RS=/[^\u0009\u0020-\u007E]/g;function Av(t=""){return t.replace(RS,"")}function hh(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const Rv=Symbol("layout-meta"),Ts=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const sn=()=>ut()?.$router,vl=()=>df()?Nt(Ts,ut()._route):ut()._route;const SS=()=>{try{if(ut()._processingMiddleware)return!0}catch{return!1}return!1},eM=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?PS(t):sn().resolve(t).href;if(e?.open){const{target:c="_blank",windowFeatures:u={}}=e.open,h=[];for(const[f,p]of Object.entries(u))p!==void 0&&h.push(`${f.toLowerCase()}=${p}`);return open(n,c,h.join(", ")),Promise.resolve()}const r=ks(n,{acceptRelative:!0}),s=e?.external||r;if(s){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(n,window.location.href);if(c&&xR(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const i=SS();if(!s&&i){if(e?.replace){if(typeof t=="string"){const{pathname:c,search:u,hash:h}=mv(t);return{path:c,...u&&{query:uv(u)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=sn(),a=ut();return s?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function PS(t){return hv(t.path||"",t.query||{})+(t.hash||"")}const Sv="__nuxt_error",wl=()=>db(ut().payload,"error"),ss=t=>{const e=vs(t);try{const n=wl();ut().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},CS=async(t={})=>{const e=ut(),n=wl();e.callHook("app:error:cleared",t),t.redirect&&await sn().replace(t.redirect),n.value=void 0},Pv=t=>!!t&&typeof t=="object"&&Sv in t,vs=t=>{const e=bS(t);return Object.defineProperty(e,Sv,{value:!0,configurable:!1,writable:!1}),e};function xS(t){const e=VS(t),n=new ArrayBuffer(e.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return n}const DS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function VS(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,r=0;for(let s=0;s<t.length;s++)n<<=6,n|=DS.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,e+=String.fromCharCode(n)):r===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const NS=-1,kS=-2,OS=-3,MS=-4,LS=-5,FS=-6;function BS(t,e){return US(JSON.parse(t),e)}function US(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);function s(i,o=!1){if(i===NS)return;if(i===OS)return NaN;if(i===MS)return 1/0;if(i===LS)return-1/0;if(i===FS)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in r)return r[i];const a=n[i];if(!a||typeof a!="object")r[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],u=e?.[c];if(u){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),r[i]=u(s(h))}switch(c){case"Date":r[i]=new Date(a[1]);break;case"Set":const h=new Set;r[i]=h;for(let m=1;m<a.length;m+=1)h.add(s(a[m]));break;case"Map":const f=new Map;r[i]=f;for(let m=1;m<a.length;m+=2)f.set(s(a[m]),s(a[m+1]));break;case"RegExp":r[i]=new RegExp(a[1],a[2]);break;case"Object":r[i]=Object(a[1]);break;case"BigInt":r[i]=BigInt(a[1]);break;case"null":const p=Object.create(null);r[i]=p;for(let m=1;m<a.length;m+=2)p[a[m]]=s(a[m+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const m=globalThis[c],y=new m(s(a[1]));r[i]=a[2]!==void 0?y.subarray(a[2],a[3]):y;break}case"ArrayBuffer":{const m=a[1],y=xS(m);r[i]=y;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const m=c.slice(9);r[i]=Temporal[m].from(a[1]);break}case"URL":{const m=new URL(a[1]);r[i]=m;break}case"URLSearchParams":{const m=new URLSearchParams(a[1]);r[i]=m;break}default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);r[i]=c;for(let u=0;u<a.length;u+=1){const h=a[u];h!==kS&&(c[u]=s(h))}}else{const c={};r[i]=c;for(const u in a){if(u==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[u];c[u]=s(h)}}return r[i]}return s(0)}const jS=new Set(["link","style","script","noscript"]),$S=new Set(["title","titleTemplate","script","style","noscript"]),xm=new Set(["base","meta","link","style","script","noscript"]),qS=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),GS=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),HS=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),KS=new Set(["templateParams","htmlAttrs","bodyAttrs"]),zS=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),WS=["name","property","http-equiv"],QS=new Set(["viewport","description","keywords","robots"]);function Cv(t){const e=t.split(":");return e.length?zS.has(e[1]):!1}function fh(t){const{props:e,tag:n}=t;if(GS.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const r of WS)if(e[r]!==void 0){const s=e[r],i=s.includes(":"),o=QS.has(s),c=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${s}${c}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if($S.has(n)){const r=t.textContent||t.innerHTML;if(r)return`${n}:content:${r}`}}function Dm(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function jc(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());let s;if(e&&(s=e(n,t)),Array.isArray(s))return s.map(i=>jc(i,e));if(s?.constructor===Object){const i={};for(const o of Object.keys(s))i[o]=jc(s[o],e,o);return i}return s}function JS(t,e){const n=t==="style"?new Map:new Set;function r(s){const i=s.trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(c=>c.trim());o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(r):r(e):Array.isArray(e)?e.forEach(s=>r(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{i&&i!=="false"&&(t==="style"?n.set(s.trim(),i):r(s))}),n}function xv(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,r])=>{if(r===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=JS(n,r);return}if(HS.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof r=="object"){let o=e.type;if(e.type||(o="application/json"),!o?.endsWith("json")&&o!=="speculationrules")return;e.type=o,t.props.type=o,t[n]=JSON.stringify(r)}else t[n]=r;return}const s=String(r),i=n.startsWith("data-");s==="true"||s===""?t.props[n]=i?s:!0:!r&&i&&s==="false"?t.props[n]="false":r!==void 0&&(t.props[n]=r)}),t):t}function YS(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},r=xv({tag:t,props:{}},n);return r.key&&jS.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function XS(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(s,i)=>{for(let o=0;o<e.length;o++)i=e[o](s,i);return i};t=n(void 0,t);const r=[];return t=jc(t,n),Object.entries(t||{}).forEach(([s,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])r.push(YS(s,o))}),r.flat()}const Vm=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,Nm={base:-10,title:10},ZS={critical:-8,high:-1,low:2},km={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},e0=/@import/,_o=t=>t===""||t===!0;function t0(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const r=ZS[e.tagPriority]||0,s=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:km;if(e.tag in Nm)n=Nm[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=km.meta[i])}else e.tag==="link"&&e.props.rel?n=s.link[e.props.rel]:e.tag==="script"?_o(e.props.async)?n=s.script.async:e.props.src&&!_o(e.props.defer)&&!_o(e.props.async)&&e.props.type!=="module"&&!e.props.type?.endsWith("json")?n=s.script.sync:_o(e.props.defer)&&e.props.src&&!_o(e.props.async)&&(n=s.script.defer):e.tag==="style"&&(n=e.innerHTML&&e0.test(e.innerHTML)?s.style.imported:s.style.sync);return(n||100)+r}function Om(t,e){const n=typeof e=="function"?e(t):e,r=n.key||String(t.plugins.size+1);t.plugins.get(r)||(t.plugins.set(r,n),t.hooks.addHooks(n.hooks||{}))}function n0(t={}){const e=vv();e.addHooks(t.hooks||{});const n=!t.document,r=new Map,s=new Map,i=new Set,o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:r,headEntries(){return[...r.values()]},use:a=>Om(o,a),push(a,c){const u={...c||{}};delete u.head;const h=u._index??o._entryCount++,f={_i:h,input:a,options:u},p={_poll(m=!1){o.dirty=!0,!m&&i.add(h),e.callHook("entries:updated",o)},dispose(){r.delete(h)&&o.invalidate()},patch(m){(!u.mode||u.mode==="server"&&n||u.mode==="client"&&!n)&&(f.input=m,r.set(h,f),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const p=i.values().next().value;i.delete(p);const m=r.get(p);if(m){const y={tags:XS(m.input,t.propResolvers||[]).map(v=>Object.assign(v,m.options)),entry:m};await e.callHook("entries:normalize",y),m._tags=y.tags.map((v,P)=>(v._w=t0(o,v),v._p=(m._i<<10)+P,v._d=fh(v),v))}}let c=!1;a.entries.flatMap(p=>(p._tags||[]).map(m=>({...m,props:{...m.props}}))).sort(Vm).reduce((p,m)=>{const y=String(m._d||m._p);if(!p.has(y))return p.set(y,m);const v=p.get(y);if((m?.tagDuplicateStrategy||(KS.has(m.tag)?"merge":null)||(m.key&&m.key===v.key?"merge":null))==="merge"){const N={...v.props};Object.entries(m.props).forEach(([V,w])=>N[V]=V==="style"?new Map([...v.props.style||new Map,...w]):V==="class"?new Set([...v.props.class||new Set,...w]):w),p.set(y,{...m,props:N})}else m._p>>10===v._p>>10&&m.tag==="meta"&&Cv(y)?(p.set(y,Object.assign([...Array.isArray(v)?v:[v],m],m)),c=!0):(m._w===v._w?m._p>v._p:m?._w<v?._w)&&p.set(y,m);return p},a.tagMap);const u=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=u?.textContent,h){const p=h?.textContent;if(o._titleTemplate=p,p){let m=typeof p=="function"?p(u?.textContent):p;typeof m=="string"&&!o.plugins.has("template-params")&&(m=m.replace("%s",u?.textContent||"")),u?m===null?a.tagMap.delete("title"):a.tagMap.set("title",{...u,textContent:m}):(h.tag="title",h.textContent=m)}}a.tags=Array.from(a.tagMap.values()),c&&(a.tags=a.tags.flat().sort(Vm)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const f=[];for(const p of a.tags){const{innerHTML:m,tag:y,props:v}=p;if(qS.has(y)&&!(Object.keys(v).length===0&&!p.innerHTML&&!p.textContent)&&!(y==="meta"&&!v.content&&!v["http-equiv"]&&!v.charset)){if(y==="script"&&m){if(v.type?.endsWith("json")){const P=typeof m=="string"?m:JSON.stringify(m);p.innerHTML=P.replace(/</g,"\\u003C")}else typeof m=="string"&&(p.innerHTML=m.replace(new RegExp(`</${y}`,"g"),`<\\/${y}`));p._d=fh(p)}f.push(p)}}return f},invalidate(){for(const a of r.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>Om(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const r0=(t,e)=>lt(e)?lb(e):e,Dv="usehead";function s0(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(Dv,t)}}.install}function i0(){if(df()){const t=Nt(Dv);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function tM(t,e={}){const n=e.head||i0();return n.ssr?n.push(t||{},e):o0(n,t,e)}function o0(t,e,n={}){const r=Jn(!1);let s;return sA(()=>{const o=r.value?{}:jc(e,r0);s?s.patch(o):s=t.push(o,n)}),Hi()&&(va(()=>{s.dispose()}),Ey(()=>{r.value=!0}),wy(()=>{r.value=!1})),s}let dc,pc;function a0(){return dc=$fetch(Tf(`builds/meta/${yl().app.buildId}.json`),{responseType:"json"}),dc.then(t=>{pc=ES(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),dc}function El(){return dc||a0()}async function If(t){const e=typeof t=="string"?t:t.path;if(await El(),!pc)return console.error("[nuxt] Error creating app manifest matcher.",pc),{};try{return bv({},...pc.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function Mm(t,e={}){if(!await Nv(t))return null;const r=await l0(t,e);return await Vv(r)||null}const c0="_payload.json";async function l0(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||ks(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const r=yl(),s=e.hash||(e.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await Nv(t)?i:r.app.baseURL;return wf(o,n.pathname,c0+(s?`?${s}`:""))}async function Vv(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(kv));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function Nv(t=vl().path){const e=ut();return t=t==="/"?t:t.replace(/\/$/,""),(await El()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const r=await If({path:t});return!!r.prerender&&!r.redirect})}let ts=null;async function u0(){if(ts)return ts;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await kv(t.textContent||""),n=t.dataset.src?await Vv(t.dataset.src):void 0;return ts={...e,...n,...window.__NUXT__},ts.config?.public&&(ts.config.public=ir(ts.config.public)),ts}async function kv(t){return await BS(t,ut()._payloadRevivers)}function h0(t,e){ut()._payloadRevivers[t]=e}const f0=[["NuxtError",t=>vs(t)],["EmptyShallowRef",t=>wi(t==="_"?void 0:t==="0n"?BigInt(0):Mc(t))],["EmptyRef",t=>Jn(t==="_"?void 0:t==="0n"?BigInt(0):Mc(t))],["ShallowRef",t=>wi(t)],["ShallowReactive",t=>Cn(t)],["Ref",t=>Jn(t)],["Reactive",t=>ir(t)]],d0=Fn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[r,s]of f0)h0(r,s);Object.assign(t.payload,([e,n]=_i(()=>t.runWithContext(u0)),e=await e,n(),e)),delete window.__NUXT__}});async function bf(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{const i=new Map,o=new Promise(m=>{t.resolveTags().then(y=>{m(y.map(v=>{const P=i.get(v._d)||0,N={tag:v,id:(P?`${v._d}:${P}`:v._d)||Dm(v),shouldRender:!0};return v._d&&Cv(v._d)&&i.set(v._d,P+1),N}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const m of["body","head"]){const y=n[m]?.children;for(const v of y){const P=v.tagName.toLowerCase();if(!xm.has(P))continue;const N=xv({tag:P,props:{}},{innerHTML:v.innerHTML,...v.getAttributeNames().reduce((V,w)=>(V[w]=v.getAttribute(w),V),{})||{}});if(N.key=v.getAttribute("data-hid")||void 0,N._d=fh(N)||Dm(N),a.elMap.has(N._d)){let V=1,w=N._d;for(;a.elMap.has(w);)w=`${N._d}:${V++}`;a.elMap.set(w,v)}else a.elMap.set(N._d,v)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function c(m,y,v){const P=`${m}:${y}`;a.sideEffects[P]=v,delete a.pendingSideEffects[P]}function u({id:m,$el:y,tag:v}){const P=v.tag.endsWith("Attrs");a.elMap.set(m,y),P||(v.textContent&&v.textContent!==y.textContent&&(y.textContent=v.textContent),v.innerHTML&&v.innerHTML!==y.innerHTML&&(y.innerHTML=v.innerHTML),c(m,"el",()=>{y?.remove(),a.elMap.delete(m)}));for(const N in v.props){if(!Object.prototype.hasOwnProperty.call(v.props,N))continue;const V=v.props[N];if(N.startsWith("on")&&typeof V=="function"){const C=y?.dataset;if(C&&C[`${N}fired`]){const k=N.slice(0,-5);V.call(y,new Event(k.substring(2)))}y.getAttribute(`data-${N}`)!==""&&((v.tag==="bodyAttrs"?n.defaultView:y).addEventListener(N.substring(2),V.bind(y)),y.setAttribute(`data-${N}`,""));continue}const w=`attr:${N}`;if(N==="class"){if(!V)continue;for(const C of V)P&&c(m,`${w}:${C}`,()=>y.classList.remove(C)),!y.classList.contains(C)&&y.classList.add(C)}else if(N==="style"){if(!V)continue;for(const[C,k]of V)c(m,`${w}:${C}`,()=>{y.style.removeProperty(C)}),y.style.setProperty(C,k)}else V!==!1&&V!==null&&(y.getAttribute(N)!==V&&y.setAttribute(N,V===!0?"":String(V)),P&&c(m,w,()=>y.removeAttribute(N)))}}const h=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const m of p){const{tag:y,shouldRender:v,id:P}=m;if(v){if(y.tag==="title"){n.title=y.textContent,c("title","",()=>n.title=a.title);continue}m.$el=m.$el||a.elMap.get(P),m.$el?u(m):xm.has(y.tag)&&h.push(m)}}for(const m of h){const y=m.tag.tagPosition||"head";m.$el=n.createElement(m.tag.tag),u(m),f[y]=f[y]||n.createDocumentFragment(),f[y].appendChild(m.$el)}for(const m of p)await t.hooks.callHook("dom:renderTag",m,n,c);f.head&&n.head.appendChild(f.head),f.bodyOpen&&n.body.insertBefore(f.bodyOpen,n.body.firstChild),f.bodyClose&&n.body.appendChild(f.bodyClose);for(const m in a.pendingSideEffects)a.pendingSideEffects[m]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function p0(t={}){const e=t.domOptions?.render||bf;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return n0({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function m0(t,e){let n=0;return()=>{const r=++n;e(()=>{n===r&&t()})}}function g0(t={}){const e=p0({domOptions:{render:m0(()=>bf(e),n=>setTimeout(n,0))},...t});return e.install=s0(e),e}const _0={disableDefaults:!0},y0=Fn({name:"nuxt:head",enforce:"pre",setup(t){const e=g0(_0);t.vueApp.use(e);{let n=!0;const r=async()=>{n=!1,await bf(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||r()}),t.hooks.hook("app:error",r),t.hooks.hook("app:suspense:resolve",r)}}});function v0(){return Ov().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Ov(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const w0=typeof Proxy=="function",E0="devtools-plugin:setup",T0="plugin:settings:set";let Js,dh;function I0(){var t;return Js!==void 0||(typeof window<"u"&&window.performance?(Js=!0,dh=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(Js=!0,dh=globalThis.perf_hooks.performance):Js=!1),Js}function b0(){return I0()?dh.now():Date.now()}class A0{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),a=JSON.parse(o);Object.assign(i,a)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return b0()}},n&&n.on(T0,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...c)=>{this.onQueue.push({method:a,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...c)=>(this.targetQueue.push({method:a,args:c,resolve:()=>{}}),this.fallbacks[a](...c)):(...c)=>new Promise(u=>{this.targetQueue.push({method:a,args:c,resolve:u})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function R0(t,e){const n=t,r=Ov(),s=v0(),i=w0&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(E0,t,e);else{const o=i?new A0(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const ri=typeof document<"u";function Mv(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function S0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Mv(t.default)}const xe=Object.assign;function Ru(t,e){const n={};for(const r in e){const s=e[r];n[r]=bn(s)?s.map(t):t(s)}return n}const Lo=()=>{},bn=Array.isArray;function Lm(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Lv=/#/g,P0=/&/g,C0=/\//g,x0=/=/g,D0=/\?/g,Fv=/\+/g,V0=/%5B/g,N0=/%5D/g,Bv=/%5E/g,k0=/%60/g,Uv=/%7B/g,O0=/%7C/g,jv=/%7D/g,M0=/%20/g;function Af(t){return t==null?"":encodeURI(""+t).replace(O0,"|").replace(V0,"[").replace(N0,"]")}function L0(t){return Af(t).replace(Uv,"{").replace(jv,"}").replace(Bv,"^")}function ph(t){return Af(t).replace(Fv,"%2B").replace(M0,"+").replace(Lv,"%23").replace(P0,"%26").replace(k0,"`").replace(Uv,"{").replace(jv,"}").replace(Bv,"^")}function F0(t){return ph(t).replace(x0,"%3D")}function B0(t){return Af(t).replace(Lv,"%23").replace(D0,"%3F")}function U0(t){return B0(t).replace(C0,"%2F")}function Qo(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const j0=/\/$/,$0=t=>t.replace(j0,"");function Su(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return c=a>=0&&c>a?-1:c,c>=0&&(r=e.slice(0,c),i=e.slice(c,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=K0(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Qo(o)}}function q0(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Fm(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function G0(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ai(e.matched[r],n.matched[s])&&$v(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ai(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function $v(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!H0(t[n],e[n]))return!1;return!0}function H0(t,e){return bn(t)?Bm(t,e):bn(e)?Bm(e,t):t===e}function Bm(t,e){return bn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function K0(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const un={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let mh=(function(t){return t.pop="pop",t.push="push",t})({}),Pu=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function z0(t){if(!t)if(ri){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),$0(t)}const W0=/^[^#]+#/;function Q0(t,e){return t.replace(W0,"#")+e}function J0(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Tl=()=>({left:window.scrollX,top:window.scrollY});function Y0(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=J0(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Um(t,e){return(history.state?history.state.position-e:-1)+t}const gh=new Map;function X0(t,e){gh.set(t,e)}function Z0(t){const e=gh.get(t);return gh.delete(t),e}function eP(t){return typeof t=="string"||t&&typeof t=="object"}function qv(t){return typeof t=="string"||typeof t=="symbol"}let Ze=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Gv=Symbol("");Ze.MATCHER_NOT_FOUND+"",Ze.NAVIGATION_GUARD_REDIRECT+"",Ze.NAVIGATION_ABORTED+"",Ze.NAVIGATION_CANCELLED+"",Ze.NAVIGATION_DUPLICATED+"";function Ri(t,e){return xe(new Error,{type:t,[Gv]:!0},e)}function Gn(t,e){return t instanceof Error&&Gv in t&&(e==null||!!(t.type&e))}const tP=["params","query","hash"];function nP(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of tP)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function rP(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(Fv," "),i=s.indexOf("="),o=Qo(i<0?s:s.slice(0,i)),a=i<0?null:Qo(s.slice(i+1));if(o in e){let c=e[o];bn(c)||(c=e[o]=[c]),c.push(a)}else e[o]=a}return e}function jm(t){let e="";for(let n in t){const r=t[n];if(n=F0(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(bn(r)?r.map(s=>s&&ph(s)):[r&&ph(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function sP(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=bn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const iP=Symbol(""),$m=Symbol(""),Rf=Symbol(""),Sf=Symbol(""),_h=Symbol("");function yo(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Tr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const u=p=>{p===!1?c(Ri(Ze.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?c(p):eP(p)?c(Ri(Ze.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(p=>c(p))})}function Cu(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Mv(c)){const u=(c.__vccOpts||c)[e];u&&i.push(Tr(u,n,r,o,a,s))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=S0(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Tr(p,n,r,o,a,s)()}))}}return i}function oP(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Ai(u,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(u=>Ai(u,c))||s.push(c))}return[n,r,s]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let aP=()=>location.protocol+"//"+location.host;function Hv(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),Fm(a,"")}return Fm(n,t)+r+s}function cP(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const m=Hv(t,location),y=n.value,v=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===y){o=null;return}P=v?p.position-v.position:0}else r(m);s.forEach(N=>{N(n.value,y,{delta:P,type:mh.pop,direction:P?P>0?Pu.forward:Pu.back:Pu.unknown})})};function c(){o=n.value}function u(p){s.push(p);const m=()=>{const y=s.indexOf(p);y>-1&&s.splice(y,1)};return i.push(m),m}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(xe({},p.state,{scroll:Tl()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:c,listen:u,destroy:f}}function qm(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Tl():null}}function lP(t){const{history:e,location:n}=window,r={value:Hv(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:aP()+t+c;try{e[h?"replaceState":"pushState"](u,"",p),s.value=u}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(c,u){i(c,xe({},e.state,qm(s.value.back,c,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=c}function a(c,u){const h=xe({},s.value,e.state,{forward:c,scroll:Tl()});i(h.current,h,!0),i(c,xe({},qm(r.value,c,null),{position:h.position+1},u),!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function uP(t){t=z0(t);const e=lP(t),n=cP(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=xe({location:"",base:t,go:r,createHref:Q0.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let fs=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var ct=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(ct||{});const hP={type:fs.Static,value:""},fP=/[a-zA-Z0-9_]/;function dP(t){if(!t)return[[]];if(t==="/")return[[hP]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=ct.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,u="",h="";function f(){u&&(n===ct.Static?i.push({type:fs.Static,value:u}):n===ct.Param||n===ct.ParamRegExp||n===ct.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:fs.Param,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==ct.ParamRegExp){r=n,n=ct.EscapeNext;continue}switch(n){case ct.Static:c==="/"?(u&&f(),o()):c===":"?(f(),n=ct.Param):p();break;case ct.EscapeNext:p(),n=r;break;case ct.Param:c==="("?n=ct.ParamRegExp:fP.test(c)?p():(f(),n=ct.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case ct.ParamRegExp:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=ct.ParamRegExpEnd:h+=c;break;case ct.ParamRegExpEnd:f(),n=ct.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===ct.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),s}const Gm="[^/]+?",pP={sensitive:!1,strict:!1,start:!0,end:!0};var Ft=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Ft||{});const mP=/[.+*?^${}()[\]/\\]/g;function gP(t,e){const n=xe({},pP,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[Ft.Root];n.strict&&!u.length&&(s+="/");for(let f=0;f<u.length;f++){const p=u[f];let m=Ft.Segment+(n.sensitive?Ft.BonusCaseSensitive:0);if(p.type===fs.Static)f||(s+="/"),s+=p.value.replace(mP,"\\$&"),m+=Ft.Static;else if(p.type===fs.Param){const{value:y,repeatable:v,optional:P,regexp:N}=p;i.push({name:y,repeatable:v,optional:P});const V=N||Gm;if(V!==Gm){m+=Ft.BonusCustomRegExp;try{`${V}`}catch(C){throw new Error(`Invalid custom RegExp for param "${y}" (${V}): `+C.message)}}let w=v?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;f||(w=P&&u.length<2?`(?:/${w})`:"/"+w),P&&(w+="?"),s+=w,m+=Ft.Dynamic,P&&(m+=Ft.BonusOptional),v&&(m+=Ft.BonusRepeatable),V===".*"&&(m+=Ft.BonusWildcard)}h.push(m)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Ft.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",y=i[p-1];f[y.name]=m&&y.repeatable?m.split("/"):m}return f}function c(u){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const m of p)if(m.type===fs.Static)h+=m.value;else if(m.type===fs.Param){const{value:y,repeatable:v,optional:P}=m,N=y in u?u[y]:"";if(bn(N)&&!v)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const V=bn(N)?N.join("/"):N;if(!V)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${y}"`);h+=V}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function _P(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Ft.Static+Ft.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Ft.Static+Ft.Segment?1:-1:0}function Kv(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=_P(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Hm(r))return 1;if(Hm(s))return-1}return s.length-r.length}function Hm(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const yP={strict:!1,end:!0,sensitive:!1};function vP(t,e,n){const r=gP(dP(t.path),n),s=xe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function wP(t,e){const n=[],r=new Map;e=Lm(yP,e);function s(f){return r.get(f)}function i(f,p,m){const y=!m,v=zm(f);v.aliasOf=m&&m.record;const P=Lm(e,f),N=[v];if("alias"in f){const C=typeof f.alias=="string"?[f.alias]:f.alias;for(const k of C)N.push(zm(xe({},v,{components:m?m.record.components:v.components,path:k,aliasOf:m?m.record:v})))}let V,w;for(const C of N){const{path:k}=C;if(p&&k[0]!=="/"){const B=p.record.path,A=B[B.length-1]==="/"?"":"/";C.path=p.record.path+(k&&A+k)}if(V=vP(C,p,P),m?m.alias.push(V):(w=w||V,w!==V&&w.alias.push(V),y&&f.name&&!Wm(V)&&o(f.name)),zv(V)&&c(V),v.children){const B=v.children;for(let A=0;A<B.length;A++)i(B[A],V,m&&m.children[A])}m=m||V}return w?()=>{o(w)}:Lo}function o(f){if(qv(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function c(f){const p=IP(f,n);n.splice(p,0,f),f.record.name&&!Wm(f)&&r.set(f.record.name,f)}function u(f,p){let m,y={},v,P;if("name"in f&&f.name){if(m=r.get(f.name),!m)throw Ri(Ze.MATCHER_NOT_FOUND,{location:f});P=m.record.name,y=xe(Km(p.params,m.keys.filter(w=>!w.optional).concat(m.parent?m.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),f.params&&Km(f.params,m.keys.map(w=>w.name))),v=m.stringify(y)}else if(f.path!=null)v=f.path,m=n.find(w=>w.re.test(v)),m&&(y=m.parse(v),P=m.record.name);else{if(m=p.name?r.get(p.name):n.find(w=>w.re.test(p.path)),!m)throw Ri(Ze.MATCHER_NOT_FOUND,{location:f,currentLocation:p});P=m.record.name,y=xe({},p.params,f.params),v=m.stringify(y)}const N=[];let V=m;for(;V;)N.unshift(V.record),V=V.parent;return{name:P,path:v,params:y,matched:N,meta:TP(N)}}t.forEach(f=>i(f));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function Km(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function zm(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:EP(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function EP(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Wm(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function TP(t){return t.reduce((e,n)=>xe(e,n.meta),{})}function IP(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Kv(t,e[i])<0?r=i:n=i+1}const s=bP(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function bP(t){let e=t;for(;e=e.parent;)if(zv(e)&&Kv(t,e)===0)return e}function zv({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Qm(t){const e=Nt(Rf),n=Nt(Sf),r=rn(()=>{const c=$e(t.to);return e.resolve(c)}),s=rn(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(Ai.bind(null,h));if(p>-1)return p;const m=Jm(c[u-2]);return u>1&&Jm(h)===m&&f[f.length-1].path!==m?f.findIndex(Ai.bind(null,c[u-2])):p}),i=rn(()=>s.value>-1&&CP(n.params,r.value.params)),o=rn(()=>s.value>-1&&s.value===n.matched.length-1&&$v(n.params,r.value.params));function a(c={}){if(PP(c)){const u=e[$e(t.replace)?"replace":"push"]($e(t.to)).catch(Lo);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:rn(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function AP(t){return t.length===1?t[0]:t}const RP=qr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Qm,setup(t,{slots:e}){const n=ir(Qm(t)),{options:r}=Nt(Rf),s=rn(()=>({[Ym(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Ym(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&AP(e.default(n));return t.custom?i:Vt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),SP=RP;function PP(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function CP(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!bn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Jm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Ym=(t,e,n)=>t??e??n,xP=qr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Nt(_h),s=rn(()=>t.route||r.value),i=Nt($m,0),o=rn(()=>{let u=$e(i);const{matched:h}=s.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=rn(()=>s.value.matched[o.value]);Cr($m,rn(()=>o.value+1)),Cr(iP,a),Cr(_h,s);const c=Jn();return xr(()=>[c.value,a.value,t.name],([u,h,f],[p,m,y])=>{h&&(h.instances[f]=u,m&&m!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!Ai(h,m)||!p)&&(h.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return Xm(n.default,{Component:p,route:u});const m=f.props[h],y=m?m===!0?u.params:typeof m=="function"?m(u):m:null,P=Vt(p,xe({},y,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return Xm(n.default,{Component:P,route:u})||P}}});function Xm(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Wv=xP;function DP(t){const e=wP(t.routes,t),n=t.parseQuery||rP,r=t.stringifyQuery||jm,s=t.history,i=yo(),o=yo(),a=yo(),c=wi(un);let u=un;ri&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Ru.bind(null,$=>""+$),f=Ru.bind(null,U0),p=Ru.bind(null,Qo);function m($,se){let ee,ce;return qv($)?(ee=e.getRecordMatcher($),ce=se):ce=$,e.addRoute(ce,ee)}function y($){const se=e.getRecordMatcher($);se&&e.removeRoute(se)}function v(){return e.getRoutes().map($=>$.record)}function P($){return!!e.getRecordMatcher($)}function N($,se){if(se=xe({},se||c.value),typeof $=="string"){const D=Su(n,$,se.path),L=e.resolve({path:D.path},se),H=s.createHref(D.fullPath);return xe(D,L,{params:p(L.params),hash:Qo(D.hash),redirectedFrom:void 0,href:H})}let ee;if($.path!=null)ee=xe({},$,{path:Su(n,$.path,se.path).path});else{const D=xe({},$.params);for(const L in D)D[L]==null&&delete D[L];ee=xe({},$,{params:f(D)}),se.params=f(se.params)}const ce=e.resolve(ee,se),ye=$.hash||"";ce.params=h(p(ce.params));const ke=q0(r,xe({},$,{hash:L0(ye),path:ce.path})),R=s.createHref(ke);return xe({fullPath:ke,hash:ye,query:r===jm?sP($.query):$.query||{}},ce,{redirectedFrom:void 0,href:R})}function V($){return typeof $=="string"?Su(n,$,c.value.path):xe({},$)}function w($,se){if(u!==$)return Ri(Ze.NAVIGATION_CANCELLED,{from:se,to:$})}function C($){return A($)}function k($){return C(xe(V($),{replace:!0}))}function B($,se){const ee=$.matched[$.matched.length-1];if(ee&&ee.redirect){const{redirect:ce}=ee;let ye=typeof ce=="function"?ce($,se):ce;return typeof ye=="string"&&(ye=ye.includes("?")||ye.includes("#")?ye=V(ye):{path:ye},ye.params={}),xe({query:$.query,hash:$.hash,params:ye.path!=null?{}:$.params},ye)}}function A($,se){const ee=u=N($),ce=c.value,ye=$.state,ke=$.force,R=$.replace===!0,D=B(ee,ce);if(D)return A(xe(V(D),{state:typeof D=="object"?xe({},ye,D.state):ye,force:ke,replace:R}),se||ee);const L=ee;L.redirectedFrom=se;let H;return!ke&&G0(r,ce,ee)&&(H=Ri(Ze.NAVIGATION_DUPLICATED,{to:L,from:ce}),an(ce,ce,!0,!1)),(H?Promise.resolve(H):b(L,ce)).catch(j=>Gn(j)?Gn(j,Ze.NAVIGATION_GUARD_REDIRECT)?j:_n(j):re(j,L,ce)).then(j=>{if(j){if(Gn(j,Ze.NAVIGATION_GUARD_REDIRECT))return A(xe({replace:R},V(j.to),{state:typeof j.to=="object"?xe({},ye,j.to.state):ye,force:ke}),se||L)}else j=S(L,ce,!0,R,ye);return x(L,ce,j),j})}function T($,se){const ee=w($,se);return ee?Promise.reject(ee):Promise.resolve()}function E($){const se=ur.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext($):$()}function b($,se){let ee;const[ce,ye,ke]=oP($,se);ee=Cu(ce.reverse(),"beforeRouteLeave",$,se);for(const D of ce)D.leaveGuards.forEach(L=>{ee.push(Tr(L,$,se))});const R=T.bind(null,$,se);return ee.push(R),Ht(ee).then(()=>{ee=[];for(const D of i.list())ee.push(Tr(D,$,se));return ee.push(R),Ht(ee)}).then(()=>{ee=Cu(ye,"beforeRouteUpdate",$,se);for(const D of ye)D.updateGuards.forEach(L=>{ee.push(Tr(L,$,se))});return ee.push(R),Ht(ee)}).then(()=>{ee=[];for(const D of ke)if(D.beforeEnter)if(bn(D.beforeEnter))for(const L of D.beforeEnter)ee.push(Tr(L,$,se));else ee.push(Tr(D.beforeEnter,$,se));return ee.push(R),Ht(ee)}).then(()=>($.matched.forEach(D=>D.enterCallbacks={}),ee=Cu(ke,"beforeRouteEnter",$,se,E),ee.push(R),Ht(ee))).then(()=>{ee=[];for(const D of o.list())ee.push(Tr(D,$,se));return ee.push(R),Ht(ee)}).catch(D=>Gn(D,Ze.NAVIGATION_CANCELLED)?D:Promise.reject(D))}function x($,se,ee){a.list().forEach(ce=>E(()=>ce($,se,ee)))}function S($,se,ee,ce,ye){const ke=w($,se);if(ke)return ke;const R=se===un,D=ri?history.state:{};ee&&(ce||R?s.replace($.fullPath,xe({scroll:R&&D&&D.scroll},ye)):s.push($.fullPath,ye)),c.value=$,an($,se,ee,R),_n()}let I;function ge(){I||(I=s.listen(($,se,ee)=>{if(!en.listening)return;const ce=N($),ye=B(ce,en.currentRoute.value);if(ye){A(xe(ye,{replace:!0,force:!0}),ce).catch(Lo);return}u=ce;const ke=c.value;ri&&X0(Um(ke.fullPath,ee.delta),Tl()),b(ce,ke).catch(R=>Gn(R,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_CANCELLED)?R:Gn(R,Ze.NAVIGATION_GUARD_REDIRECT)?(A(xe(V(R.to),{force:!0}),ce).then(D=>{Gn(D,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===mh.pop&&s.go(-1,!1)}).catch(Lo),Promise.reject()):(ee.delta&&s.go(-ee.delta,!1),re(R,ce,ke))).then(R=>{R=R||S(ce,ke,!1),R&&(ee.delta&&!Gn(R,Ze.NAVIGATION_CANCELLED)?s.go(-ee.delta,!1):ee.type===mh.pop&&Gn(R,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),x(ce,ke,R)}).catch(Lo)}))}let we=yo(),ie=yo(),pe;function re($,se,ee){_n($);const ce=ie.list();return ce.length?ce.forEach(ye=>ye($,se,ee)):console.error($),Promise.reject($)}function Fe(){return pe&&c.value!==un?Promise.resolve():new Promise(($,se)=>{we.add([$,se])})}function _n($){return pe||(pe=!$,ge(),we.list().forEach(([se,ee])=>$?ee($):se()),we.reset()),$}function an($,se,ee,ce){const{scrollBehavior:ye}=t;if(!ri||!ye)return Promise.resolve();const ke=!ee&&Z0(Um($.fullPath,0))||(ce||!ee)&&history.state&&history.state.scroll||null;return Ei().then(()=>ye($,se,ke)).then(R=>R&&Y0(R)).catch(R=>re(R,$,se))}const Qe=$=>s.go($);let Je;const ur=new Set,en={currentRoute:c,listening:!0,addRoute:m,removeRoute:y,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:v,resolve:N,options:t,push:C,replace:k,go:Qe,back:()=>Qe(-1),forward:()=>Qe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ie.add,isReady:Fe,install($){$.component("RouterLink",SP),$.component("RouterView",Wv),$.config.globalProperties.$router=en,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>$e(c)}),ri&&!Je&&c.value===un&&(Je=!0,C(s.location).catch(ce=>{}));const se={};for(const ce in un)Object.defineProperty(se,ce,{get:()=>c.value[ce],enumerable:!0});$.provide(Rf,en),$.provide(Sf,Cn(se)),$.provide(_h,c);const ee=$.unmount;ur.add($),$.unmount=function(){ur.delete($),ur.size<1&&(u=un,I&&I(),I=null,c.value=un,Je=!1,pe=!1),ee()}}};function Ht($){return $.reduce((se,ee)=>se.then(()=>E(ee)),Promise.resolve())}return en}function Qv(t){return Nt(Sf)}const VP=/(:\w+)\([^)]+\)/g,NP=/(:\w+)[?+*]/g,kP=/:\w+/g,OP=(t,e)=>e.path.replace(VP,"$1").replace(NP,"$1").replace(kP,n=>t.params[n.slice(1)]?.toString()||""),yh=(t,e)=>{const n=t.route.matched.find(s=>s.components?.default===t.Component.type),r=e??n?.meta.key??(n&&OP(t.route,n));return typeof r=="function"?r(t.route):r},MP=(t,e)=>({default:()=>t?Vt(Db,t===!0?{}:t,e):e});function Pf(t){return Array.isArray(t)?t:[t]}const LP="modulepreload",FP=function(t,e){return new URL(t,e).href},Zm={},vn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=u(n.map(h=>{if(h=FP(h,r),h in Zm)return;Zm[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(r)for(let y=o.length-1;y>=0;y--){const v=o[y];if(v.href===h&&(!f||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":LP,f||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},xu=[{name:"index",path:"/",component:()=>vn(()=>import("./BXrSWFL_.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)},{name:"records-topic",path:"/records/topic",component:()=>vn(()=>import("./Cf4UMbS_.js"),__vite__mapDeps([6,1,2,3,7,8,9]),import.meta.url)},{name:"users-_id",path:"/users/_id",component:()=>vn(()=>import("./_RJyFOcS.js"),__vite__mapDeps([10,1,2,4,3,8,11]),import.meta.url)},{name:"records-slow-quiz",path:"/records/slow-quiz",component:()=>vn(()=>import("./Y-4xY7rx.js"),__vite__mapDeps([12,1,2,7,8,13]),import.meta.url)},{name:"achievements",path:"/achievements",component:()=>vn(()=>import("./DJ8qdfui.js"),__vite__mapDeps([14,15,4,2,3,16]),import.meta.url)},{name:"records-oneiromancy",path:"/records/oneiromancy",component:()=>vn(()=>import("./BzaG9rpa.js"),__vite__mapDeps([17,1,2,3,7,8,18]),import.meta.url)},{name:"categories-_id",path:"/categories/_id",component:()=>vn(()=>import("./CG8KEV4F.js"),__vite__mapDeps([19,15,4,2,3,16]),import.meta.url)},{name:"achievements-_id",path:"/achievements/_id",component:()=>vn(()=>import("./Cl5J-9pp.js"),__vite__mapDeps([20,1,2,3,4,21]),import.meta.url)}],Jv=(t,e)=>({default:()=>t?Vt(OA,t===!0?{}:t,e):e.default?.()}),BP=/(:\w+)\([^)]+\)/g,UP=/(:\w+)[?+*]/g,jP=/:\w+/g;function eg(t){const e=t?.meta.key??t.path.replace(BP,"$1").replace(UP,"$1").replace(jP,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function $P(t,e){return t===e||e===un?!1:eg(t)!==eg(e)?!0:!t.matched.every((r,s)=>r.components&&r.components.default===e.matched[s]?.components?.default)}const qP={scrollBehavior(t,e,n){const r=ut(),s=sn().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:Yv(t.hash),behavior:s}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=r._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===un){a(tg(t,e,n,s));return}r.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(tg(t,e,n,s)))})})}};function Yv(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function tg(t,e,n,r){if(n)return n;const s=$P(t,e);return t.hash?{el:t.hash,top:Yv(t.hash),behavior:s?r:"instant"}:{left:0,top:0}}const GP={hashMode:!1,scrollBehaviorType:"auto"},gr={...GP,...qP},HP=async(t,e)=>{let n,r;if(!t.meta?.validate)return;const s=([n,r]=_i(()=>Promise.resolve(t.meta.validate(t))),n=await n,r(),n);if(s===!0)return;const i=vs({fatal:!0,statusCode:s&&s.statusCode||404,statusMessage:s&&s.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},KP=async t=>{let e,n;const r=([e,n]=_i(()=>If({path:t.path})),e=await e,n(),e);if(r.redirect){const s=r.redirect.includes("#")?r.redirect:r.redirect+t.hash;return ks(s,{acceptRelative:!0})?(window.location.href=s,!1):s}},zP=[HP,KP],vh={};function WP(t,e,n){const{pathname:r,search:s,hash:i}=e,o=t.indexOf("#");if(o>-1){const u=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(u);return h[0]!=="/"&&(h="/"+h),vm(h,"")}const a=vm(r,t),c=!n||kR(a,n)?a:n;return c+(c.includes("?")?"":s)+i}const QP=Fn({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,r=yl().app.baseURL;const s=gr.history?.(r)??uP(r),i=gr.routes?([e,n]=_i(()=>gr.routes(xu)),e=await e,n(),e??xu):xu;let o;const a=DP({...gr,scrollBehavior:(P,N,V)=>{if(N===un){o=V;return}if(gr.scrollBehavior){if(a.options.scrollBehavior=gr.scrollBehavior,"scrollRestoration"in window.history){const w=a.beforeEach(()=>{w(),window.history.scrollRestoration="manual"})}return gr.scrollBehavior(P,un,o||V)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const c=wi(a.currentRoute.value);a.afterEach((P,N)=>{c.value=N}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const u=WP(r,window.location,t.payload.path),h=wi(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};t.hook("page:finish",f),a.afterEach((P,N)=>{P.matched[P.matched.length-1]?.components?.default===N.matched[N.matched.length-1]?.components?.default&&f()});const p={};for(const P in h.value)Object.defineProperty(p,P,{get:()=>h.value[P],enumerable:!0});t._route=Cn(p),t._middleware||={global:[],named:{}};const m=wl();a.afterEach(async(P,N,V)=>{delete t._processingMiddleware,!t.isHydrating&&m.value&&await t.runWithContext(CS),V&&await t.callHook("page:loading:end")});try{[e,n]=_i(()=>a.isReady()),await e,n()}catch(P){[e,n]=_i(()=>t.runWithContext(()=>ss(P))),await e,n()}const y=u!==a.currentRoute.value.fullPath?a.resolve(u):a.currentRoute.value;f();const v=t.payload.state._layout;return a.beforeEach(async(P,N)=>{await t.callHook("page:loading:start"),P.meta=ir(P.meta),t.isHydrating&&v&&!er(P.meta.layout)&&(P.meta.layout=v),t._processingMiddleware=!0;{const V=new Set([...zP,...t._middleware.global]);for(const w of P.matched){const C=w.meta.middleware;if(C)for(const k of Pf(C))V.add(k)}{const w=await t.runWithContext(()=>If({path:P.path}));if(w.appMiddleware)for(const C in w.appMiddleware)w.appMiddleware[C]?V.add(C):V.delete(C)}for(const w of V){const C=typeof w=="string"?t._middleware.named[w]||await vh[w]?.().then(k=>k.default||k):w;if(!C)throw new Error(`Unknown route middleware: '${w}'.`);try{const k=await t.runWithContext(()=>C(P,N));if(!t.payload.serverRendered&&t.isHydrating&&(k===!1||k instanceof Error)){const B=k||vs({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await t.runWithContext(()=>ss(B)),!1}if(k===!0)continue;if(k===!1)return k;if(k)return Pv(k)&&k.fatal&&await t.runWithContext(()=>ss(k)),k}catch(k){const B=vs(k);return B.fatal&&await t.runWithContext(()=>ss(B)),B}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(P=>{if(P.matched.length===0)return t.runWithContext(()=>ss(vs({statusCode:404,fatal:!1,statusMessage:`Page not found: ${P.fullPath}`,data:{path:P.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in y&&(y.name=void 0),await a.replace({...y,force:!0}),a.options.scrollBehavior=gr.scrollBehavior}catch(P){await t.runWithContext(()=>ss(P))}}),{provide:{router:a}}}}),ng=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),nM=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),Cf=t=>{const e=ut();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{ng(()=>t())}):ng(()=>t())},JP=Fn({name:"nuxt:payload",setup(t){const e=new Set;sn().beforeResolve(async(n,r)=>{if(n.path===r.path)return;const s=await Mm(n.path);if(s){for(const i of e)delete t.static.data[i];for(const i in s.data)i in t.static.data||e.add(i),t.static.data[i]=s.data[i]}}),Cf(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await Mm(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(El,1e3)})}}),YP=Fn(()=>{const t=sn();Cf(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),XP=Fn(t=>{let e;async function n(){let r;try{r=await El()}catch(s){const i=s;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,Rm);try{const s=await $fetch(Tf("builds/latest.json")+`?${Date.now()}`);s.id!==r?.id&&(t.hooks.callHook("app:manifest:update",s),e&&clearTimeout(e))}catch{}}Cf(()=>{e=setTimeout(n,Rm)})});function ZP(t={}){const e=t.path||window.location.pathname;let n={};try{n=Mc(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:ut().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const eC=Fn({name:"nuxt:chunk-reload",setup(t){const e=sn(),n=yl(),r=new Set;e.beforeEach(()=>{r.clear()}),t.hook("app:chunkError",({error:i})=>{r.add(i)});function s(i){const o=wf(n.app.baseURL,i.fullPath);ZP({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{r.has(i)&&s(o)})}}),tC=Fn({name:"nuxt:global-components"}),Ar={default:Ju(()=>vn(()=>import("./DVvGLLR5.js"),__vite__mapDeps([22,3,23]),import.meta.url).then(t=>t.default||t))};function nC(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function rC(t,e=sn()){const{path:n,matched:r}=e.resolve(t);if(!r.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const s=e._preloadPromises||=[];if(s.length>4)return Promise.all(s).then(()=>rC(t,e));e._routePreloaded.add(n);for(const i of r){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>s.splice(s.indexOf(a)));s.push(a)}await Promise.all(s)}const sC=Fn({name:"nuxt:prefetch",setup(t){const e=sn();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const r=n?.meta?.layout;r&&typeof Ar[r]=="function"&&await Ar[r]()})}),t.hooks.hook("link:prefetch",n=>{if(ks(n))return;const r=e.resolve(n);if(!r)return;const s=r.meta.layout;let i=Pf(r.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof vh[o]=="function"&&vh[o]();typeof s=="string"&&s in Ar&&nC(Ar[s])})}});/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var iC="store";function Ki(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function Xv(t){return t!==null&&typeof t=="object"}function oC(t){return t&&typeof t.then=="function"}function aC(t,e){return function(){return t(e)}}function Zv(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function ew(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Il(t,n,[],t._modules.root,!0),xf(t,n,e)}function xf(t,e,n){var r=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},a={},c=K_(!0);c.run(function(){Ki(i,function(u,h){o[h]=aC(u,t),a[h]=rn(function(){return o[h]()}),Object.defineProperty(t.getters,h,{get:function(){return a[h].value},enumerable:!0})})}),t._state=ir({data:e}),t._scope=c,t.strict&&fC(t),r&&n&&t._withCommit(function(){r.data=null}),s&&s.stop()}function Il(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var a=Df(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit(function(){a[c]=r.state})}var u=r.context=cC(t,o,n);r.forEachMutation(function(h,f){var p=o+f;lC(t,p,h,u)}),r.forEachAction(function(h,f){var p=h.root?f:o+f,m=h.handler||h;uC(t,p,m,u)}),r.forEachGetter(function(h,f){var p=o+f;hC(t,p,h,u)}),r.forEachChild(function(h,f){Il(t,e,n.concat(f),h,s)})}function cC(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,a){var c=$c(i,o,a),u=c.payload,h=c.options,f=c.type;return(!h||!h.root)&&(f=e+f),t.dispatch(f,u)},commit:r?t.commit:function(i,o,a){var c=$c(i,o,a),u=c.payload,h=c.options,f=c.type;(!h||!h.root)&&(f=e+f),t.commit(f,u,h)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return tw(t,e)}},state:{get:function(){return Df(t.state,n)}}}),s}function tw(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function lC(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function uC(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return oC(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):a})}function hC(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function fC(t){xr(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Df(t,e){return e.reduce(function(n,r){return n[r]},t)}function $c(t,e,n){return Xv(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var dC="vuex bindings",rg="vuex:mutations",Du="vuex:actions",Ys="vuex",pC=0;function mC(t,e){R0({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[dC]},function(n){n.addTimelineLayer({id:rg,label:"Vuex Mutations",color:sg}),n.addTimelineLayer({id:Du,label:"Vuex Actions",color:sg}),n.addInspector({id:Ys,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===Ys)if(r.filter){var s=[];iw(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[sw(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===Ys){var s=r.nodeId;tw(e,s),r.state=yC(wC(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===Ys){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(Ys),n.sendInspectorState(Ys),n.addTimelineEvent({layerId:rg,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=pC++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:Du,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:Du,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var sg=8702998,gC=6710886,_C=16777215,nw={label:"namespaced",textColor:_C,backgroundColor:gC};function rw(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function sw(t,e){return{id:e||"root",label:rw(e),tags:t.namespaced?[nw]:[],children:Object.keys(t._children).map(function(n){return sw(t._children[n],e+n+"/")})}}function iw(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[nw]:[]}),Object.keys(e._children).forEach(function(s){iw(t,e._children[s],n,r+s+"/")})}function yC(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=vC(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?rw(o):o,editable:!1,value:wh(function(){return i[o]})}})}return s}function vC(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=wh(function(){return t[n]})}else e[n]=wh(function(){return t[n]})}),e}function wC(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function wh(t){try{return t()}catch(e){return e}}var An=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},ow={namespaced:{configurable:!0}};ow.namespaced.get=function(){return!!this._rawModule.namespaced};An.prototype.addChild=function(e,n){this._children[e]=n};An.prototype.removeChild=function(e){delete this._children[e]};An.prototype.getChild=function(e){return this._children[e]};An.prototype.hasChild=function(e){return e in this._children};An.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};An.prototype.forEachChild=function(e){Ki(this._children,e)};An.prototype.forEachGetter=function(e){this._rawModule.getters&&Ki(this._rawModule.getters,e)};An.prototype.forEachAction=function(e){this._rawModule.actions&&Ki(this._rawModule.actions,e)};An.prototype.forEachMutation=function(e){this._rawModule.mutations&&Ki(this._rawModule.mutations,e)};Object.defineProperties(An.prototype,ow);var Os=function(e){this.register([],e,!1)};Os.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};Os.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};Os.prototype.update=function(e){aw([],this.root,e)};Os.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new An(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&Ki(n.modules,function(a,c){s.register(e.concat(c),a,r)})};Os.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};Os.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function aw(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;aw(t.concat(r),e.getChild(r),n.modules[r])}}function EC(t){return new Zt(t)}var Zt=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Os(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,a=this,c=a.dispatch,u=a.commit;this.dispatch=function(p,m){return c.call(o,p,m)},this.commit=function(p,m,y){return u.call(o,p,m,y)},this.strict=s;var h=this._modules.root.state;Il(this,h,[],this._modules.root),xf(this,h),r.forEach(function(f){return f(n)})},Vf={state:{configurable:!0}};Zt.prototype.install=function(e,n){e.provide(n||iC,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&mC(e,this)};Vf.state.get=function(){return this._state.data};Vf.state.set=function(t){};Zt.prototype.commit=function(e,n,r){var s=this,i=$c(e,n,r),o=i.type,a=i.payload,c={type:o,payload:a},u=this._mutations[o];u&&(this._withCommit(function(){u.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(h){return h(c,s.state)}))};Zt.prototype.dispatch=function(e,n){var r=this,s=$c(e,n),i=s.type,o=s.payload,a={type:i,payload:o},c=this._actions[i];if(c){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(a,r.state)})}catch{}var u=c.length>1?Promise.all(c.map(function(h){return h(o)})):c[0](o);return new Promise(function(h,f){u.then(function(p){try{r._actionSubscribers.filter(function(m){return m.after}).forEach(function(m){return m.after(a,r.state)})}catch{}h(p)},function(p){try{r._actionSubscribers.filter(function(m){return m.error}).forEach(function(m){return m.error(a,r.state,p)})}catch{}f(p)})})}};Zt.prototype.subscribe=function(e,n){return Zv(e,this._subscribers,n)};Zt.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return Zv(r,this._actionSubscribers,n)};Zt.prototype.watch=function(e,n,r){var s=this;return xr(function(){return e(s.state,s.getters)},n,Object.assign({},r))};Zt.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Zt.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),Il(this,this.state,e,this._modules.get(e),r.preserveState),xf(this,this.state)};Zt.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=Df(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),ew(this)};Zt.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Zt.prototype.hotUpdate=function(e){this._modules.update(e),ew(this,!0)};Zt.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Zt.prototype,Vf);var rM=kf(function(t,e){var n={};return Nf(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){var a=this.$store.state,c=this.$store.getters;if(t){var u=Of(this.$store,"mapState",t);if(!u)return;a=u.context.state,c=u.context.getters}return typeof i=="function"?i.call(this,a,c):a[i]},n[s].vuex=!0}),n}),sM=kf(function(t,e){var n={};return Nf(e).forEach(function(r){var s=r.key,i=r.val;i=t+i,n[s]=function(){if(!(t&&!Of(this.$store,"mapGetters",t)))return this.$store.getters[i]},n[s].vuex=!0}),n}),iM=kf(function(t,e){var n={};return Nf(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];var u=this.$store.dispatch;if(t){var h=Of(this.$store,"mapActions",t);if(!h)return;u=h.context.dispatch}return typeof i=="function"?i.apply(this,[u].concat(a)):u.apply(this.$store,[i].concat(a))}}),n});function Nf(t){return TC(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function TC(t){return Array.isArray(t)||Xv(t)}function kf(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function Of(t,e,n){var r=t._modulesNamespaceMap[n];return r}/*!
  * vuexfire v3.2.5
  * (c) 2020 Eduardo San Martin Morote
  * @license MIT
  */var cw="vuexfire/SET_VALUE",lw="vuexfire/ARRAY_ADD",uw="vuexfire/ARRAY_REMOVE";function Mf(t,e){return e.split(".").reduce(function(n,r){return n[r]},t)}function IC(t,e,n){var r=(""+e).split("."),s=r.pop(),i=r.reduce(function(o,a){return o[a]},t);return Array.isArray(i)?i.splice(Number(s),1,n):i[s]=n}function bC(t){return t&&typeof t=="object"}function AC(t){return t.toDate}function RC(t){return t&&t.onSnapshot}function SC(t,e){var n=!1;return function(){if(!n)return n=!0,t(e())}}function PC(t){return Object.defineProperty(t.data()||{},"id",{value:t.id})}function Eh(t,e,n){var r=[{},{}],s=Object.keys(n).reduce(function(o,a){var c=n[a];return o[c.path]=c.data(),o},{});function i(o,a,c,u){a=a||{};var h=u[0],f=u[1];Object.getOwnPropertyNames(o).forEach(function(P){var N=Object.getOwnPropertyDescriptor(o,P);N&&!N.enumerable&&Object.defineProperty(h,P,N)});for(var p in o){var m=o[p];if(m==null||m instanceof Date||AC(m)||m.longitude&&m.latitude)h[p]=m;else if(RC(m))h[p]=typeof a=="object"&&p in a&&typeof a[p]!="string"?a[p]:m.path,f[c+p]=m;else if(Array.isArray(m)){h[p]=Array(m.length);for(var y=0;y<m.length;y++){var v=m[y];v&&v.path in s&&(h[p][y]=s[v.path])}i(m,a[p]||h[p],c+p+".",[h[p],f])}else bC(m)?(h[p]={},i(m,a[p],c+p+".",[h[p],f])):h[p]=m}}return i(t,e,"",r),r}var Jo={maxRefDepth:2,reset:!0,serialize:PC,wait:!1};function qc(t){for(var e in t)t[e].unsub()}function hw(t,e,n,r,s,i,o,a){var c=Eh(t.serialize(r),Mf(e,n),s),u=c[0],h=c[1];i.set(e,n,u),Th(t,e,n,s,h,i,o,a)}function CC(t,e){var n=t.ref,r=t.target,s=t.path,i=t.depth,o=t.resolve,a=t.ops,c=Object.create(null),u=n.onSnapshot(function(h){h.exists?hw(e,r,s,h,c,a,i,o):(a.set(r,s,null),o())});return function(){u(),qc(c)}}function Th(t,e,n,r,s,i,o,a){var c=Object.keys(s),u=Object.keys(r).filter(function(y){return c.indexOf(y)<0});if(u.forEach(function(y){r[y].unsub(),delete r[y]}),!c.length||++o>t.maxRefDepth)return a(n);var h=0,f=c.length,p=Object.create(null);function m(y){y in p&&++h>=f&&a(n)}c.forEach(function(y){var v=r[y],P=s[y],N=n+"."+y;if(p[N]=!0,v)if(v.path!==P.path)v.unsub();else return;r[y]={data:function(){return Mf(e,N)},unsub:CC({ref:P,target:e,path:N,depth:o,ops:i,resolve:m.bind(null,N)},t),path:P.path}})}function xC(t,e){var n=t.vm,r=t.key,s=t.collection,i=t.ops,o=t.resolve,a=t.reject;e===void 0&&(e=Jo);var c=Object.assign({},Jo,e),u=c.wait?[]:i.set(n,r,[]),h=o,f,p=[],m={added:function(v){var P=v.newIndex,N=v.doc;p.splice(P,0,Object.create(null));var V=p[P],w=Eh(c.serialize(N),void 0,V),C=w[0],k=w[1];i.add(u,P,C),Th(c,u,P,V,k,i,0,o.bind(null,N))},modified:function(v){var P=v.oldIndex,N=v.newIndex,V=v.doc,w=p[P],C=u[P],k=Eh(c.serialize(V),C,w),B=k[0],A=k[1];p.splice(N,0,w),i.remove(u,P),i.add(u,N,B),Th(c,u,N,w,A,i,0,o)},removed:function(v){var P=v.oldIndex;i.remove(u,P),qc(p.splice(P,1)[0])}},y=s.onSnapshot(function(v){var P=typeof v.docChanges=="function"?v.docChanges():v.docChanges;if(!f&&P.length){f=!0;for(var N=0,V=P.length,w=Object.create(null),C=0;C<V;C++)w[P[C].doc.id]=!0;o=function(k){var B=k.id;B in w&&++N>=V&&(c.wait&&i.set(n,r,u),h(n[r]),o=function(){})}}P.forEach(function(k){m[k.type](k)}),P.length||(c.wait&&i.set(n,r,u),o(u))},a);return function(v){if(y(),v!==!1){var P=typeof v=="function"?v():[];i.set(n,r,P)}p.forEach(qc)}}function DC(t,e){var n=t.vm,r=t.key,s=t.document,i=t.resolve,o=t.reject,a=t.ops;e===void 0&&(e=Jo);var c=Object.assign({},Jo,e),u=Object.create(null);i=SC(i,function(){return Mf(n,r)});var h=s.onSnapshot(function(f){f.exists?hw(c,n,r,f,u,a,0,i):(a.set(n,r,null),i(null))},o);return function(f){if(h(),f!==!1){var p=typeof f=="function"?f():null;a.set(n,r,p)}qc(u)}}var vo,VC=(vo={},vo[cw]=function(t,e){var n=e.path,r=e.target,s=e.data;IC(r,n,s)},vo[lw]=function(t,e){var n=e.newIndex,r=e.data,s=e.target;s.splice(n,0,r)},vo[uw]=function(t,e){var n=e.oldIndex,r=e.target;return r.splice(n,1)[0]},vo);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gc=function(){return Gc=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gc.apply(this,arguments)},Vu={root:!0},Ih=new WeakMap;function NC(t,e,n,r,s,i){var o=Ih.get(e);return o||(o=Object.create(null),Ih.set(e,o)),n in o&&fw(e,n,i.wait?typeof i.reset=="function"?i.reset:!1:i.reset),new Promise(function(a,c){o[n]="where"in r?xC({vm:t,key:n,collection:r,ops:s,resolve:a,reject:c},i):DC({vm:t,key:n,document:r,ops:s,resolve:a,reject:c},i)})}function fw(t,e,n){var r=Ih.get(t);!r||!r[e]||(r[e](n),delete r[e])}function pn(t){return function(n,r){var s=n.state,i=n.commit,o={set:function(a,c,u){return i(cw,{path:c,target:a,data:u},Vu),u},add:function(a,c,u){return i(lw,{target:a,newIndex:c,data:u},Vu)},remove:function(a,c){var u=a[c];return i(uw,{target:a,oldIndex:c},Vu),[u]}};return t.call(this,Gc(Gc({},n),{bindFirestoreRef:function(a,c,u){return NC(s,i,a,c,o,Object.assign({},Jo,u))},unbindFirestoreRef:function(a,c){return fw(i,a,c)}}),r)}}var ig={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},kC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},pw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;c||(m=64,o||(p=64)),r.push(n[h],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new OC;const p=i<<2|a>>4;if(r.push(p),u!==64){const m=a<<4&240|u>>2;if(r.push(m),f!==64){const y=u<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MC=function(t){const e=dw(t);return pw.encodeByteArray(e,!0)},Hc=function(t){return MC(t).replace(/\./g,"")},LC=function(t){try{return pw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Kc(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!FC(n)||(t[n]=Kc(t[n],e[n]));return t}function FC(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=()=>mw().__FIREBASE_DEFAULTS__,UC=()=>{if(typeof process>"u"||typeof ig>"u")return;const t=ig.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LC(t[1]);return e&&JSON.parse(e)},gw=()=>{try{return BC()||UC()||jC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_w=()=>{var t;return(t=gw())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hc(JSON.stringify(n)),Hc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GC(){var t;const e=(t=gw())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HC(){return typeof window<"u"||yw()}function yw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function vw(){return!GC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ww(){try{return typeof indexedDB=="object"}catch{return!1}}function KC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="FirebaseError";class Ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zC,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bl.prototype.create)}}class bl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?WC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ms(s,a,r)}}function WC(t,e){return t.replace(QC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const QC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ag(i)&&ag(o)){if(!Yo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ag(t){return t!==null&&typeof t=="object"}function JC(t,e){const n=new YC(t,e);return n.subscribe.bind(n)}class YC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Nu),s.error===void 0&&(s.error=Nu),s.complete===void 0&&(s.complete=Nu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class Is{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $C;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tx(e))try{this.getOrInitializeService({instanceIdentifier:is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=is){return this.instances.has(e)}getOptions(e=is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ex(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=is){return this.component?this.component.multipleInstances?e:is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ex(t){return t===is?void 0:t}function tx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=[];var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const Tw={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},nx=Ie.INFO,rx={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},sx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=rx[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ff{constructor(e){this.name=e,this._logLevel=nx,this._logHandler=sx,this._userLogHandler=null,Lf.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}function ix(t){Lf.forEach(e=>{e.setLogLevel(t)})}function ox(t,e){for(const n of Lf){let r=null;e&&e.level&&(r=Tw[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(r??s.logLevel)&&t({level:Ie[i].toLowerCase(),message:a,args:o,type:s.name})}}}const ax=(t,e)=>e.some(n=>t instanceof n);let cg,lg;function cx(){return cg||(cg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lx(){return lg||(lg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Iw=new WeakMap,bh=new WeakMap,bw=new WeakMap,ku=new WeakMap,Bf=new WeakMap;function ux(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Dr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Iw.set(n,t)}).catch(()=>{}),Bf.set(e,t),e}function hx(t){if(bh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});bh.set(t,e)}let Ah={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fx(t){Ah=t(Ah)}function dx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ou(this),e,...n);return bw.set(r,e.sort?e.sort():[e]),Dr(r)}:lx().includes(t)?function(...e){return t.apply(Ou(this),e),Dr(Iw.get(this))}:function(...e){return Dr(t.apply(Ou(this),e))}}function px(t){return typeof t=="function"?dx(t):(t instanceof IDBTransaction&&hx(t),ax(t,cx())?new Proxy(t,Ah):t)}function Dr(t){if(t instanceof IDBRequest)return ux(t);if(ku.has(t))return ku.get(t);const e=px(t);return e!==t&&(ku.set(t,e),Bf.set(e,t)),e}const Ou=t=>Bf.get(t);function mx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Dr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Dr(o.result),c.oldVersion,c.newVersion,Dr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const gx=["get","getKey","getAll","getAllKeys","count"],_x=["put","add","delete","clear"],Mu=new Map;function ug(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mu.get(e))return Mu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=_x.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||gx.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return Mu.set(e,i),i}fx(t=>({...t,get:(e,n,r)=>ug(e,n)||t.get(e,n,r),has:(e,n)=>!!ug(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vx(t){const e=t.getComponent();return e?.type==="VERSION"}const Wc="@firebase/app",Rh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new Ff("@firebase/app"),wx="@firebase/app-compat",Ex="@firebase/analytics-compat",Tx="@firebase/analytics",Ix="@firebase/app-check-compat",bx="@firebase/app-check",Ax="@firebase/auth",Rx="@firebase/auth-compat",Sx="@firebase/database",Px="@firebase/data-connect",Cx="@firebase/database-compat",xx="@firebase/functions",Dx="@firebase/functions-compat",Vx="@firebase/installations",Nx="@firebase/installations-compat",kx="@firebase/messaging",Ox="@firebase/messaging-compat",Mx="@firebase/performance",Lx="@firebase/performance-compat",Fx="@firebase/remote-config",Bx="@firebase/remote-config-compat",Ux="@firebase/storage",jx="@firebase/storage-compat",$x="@firebase/firestore",qx="@firebase/vertexai-preview",Gx="@firebase/firestore-compat",Hx="firebase",Kx="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]",zx={[Wc]:"fire-core",[wx]:"fire-core-compat",[Tx]:"fire-analytics",[Ex]:"fire-analytics-compat",[bx]:"fire-app-check",[Ix]:"fire-app-check-compat",[Ax]:"fire-auth",[Rx]:"fire-auth-compat",[Sx]:"fire-rtdb",[Px]:"fire-data-connect",[Cx]:"fire-rtdb-compat",[xx]:"fire-fn",[Dx]:"fire-fn-compat",[Vx]:"fire-iid",[Nx]:"fire-iid-compat",[kx]:"fire-fcm",[Ox]:"fire-fcm-compat",[Mx]:"fire-perf",[Lx]:"fire-perf-compat",[Fx]:"fire-rc",[Bx]:"fire-rc-compat",[Ux]:"fire-gcs",[jx]:"fire-gcs-compat",[$x]:"fire-fst",[Gx]:"fire-fst-compat",[qx]:"fire-vertex","fire-js":"fire-js",[Hx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new Map,Si=new Map,Pi=new Map;function Xo(t,e){try{t.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Aw(t,e){t.container.addOrOverwriteComponent(e)}function Ci(t){const e=t.name;if(Pi.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;Pi.set(e,t);for(const n of kr.values())Xo(n,t);for(const n of Si.values())Xo(n,t);return!0}function Rw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wx(t,e,n=Nr){Rw(t,e).clearInstance(n)}function Sw(t){return t.options!==void 0}function Qx(t){return t.settings!==void 0}function Jx(){Pi.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mn=new bl("app","Firebase",Yx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pw=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx extends Pw{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const a=e;super(a.options,o,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Yn(Wc,Rh,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){$f(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw mn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=Kx;function jf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Nr,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw mn.create("bad-app-name",{appName:String(s)});if(n||(n=_w()),!n)throw mn.create("no-options");const i=kr.get(s);if(i){if(Yo(n,i.options)&&Yo(r,i.config))return i;throw mn.create("duplicate-app",{appName:s})}const o=new Ew(s);for(const c of Pi.values())o.addComponent(c);const a=new Pw(n,r,o);return kr.set(s,a),a}function Zx(t,e){if(HC()&&!yw())throw mn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;Sw(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=u=>[...u].reduce((h,f)=>Math.imul(31,h)+f.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw mn.create("finalization-registry-not-supported",{});const i=""+s(JSON.stringify(r)),o=Si.get(i);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new Ew(i);for(const u of Pi.values())a.addComponent(u);const c=new Xx(n,e,i,a);return Si.set(i,c),c}function eD(t=Nr){const e=kr.get(t);if(!e&&t===Nr&&_w())return jf();if(!e)throw mn.create("no-app",{appName:t});return e}function tD(){return Array.from(kr.values())}async function $f(t){let e=!1;const n=t.name;kr.has(n)?(e=!0,kr.delete(n)):Si.has(n)&&t.decRefCount()<=0&&(Si.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Yn(t,e,n){var r;let s=(r=zx[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(a.join(" "));return}Ci(new Is(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function Cw(t,e){if(t!==null&&typeof t!="function")throw mn.create("invalid-log-argument");ox(t,e)}function xw(t){ix(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="firebase-heartbeat-database",rD=1,Zo="firebase-heartbeat-store";let Lu=null;function Dw(){return Lu||(Lu=mx(nD,rD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zo)}catch(n){console.warn(n)}}}}).catch(t=>{throw mn.create("idb-open",{originalErrorMessage:t.message})})),Lu}async function sD(t){try{const n=(await Dw()).transaction(Zo),r=await n.objectStore(Zo).get(Vw(t));return await n.done,r}catch(e){if(e instanceof Ms)nr.warn(e.message);else{const n=mn.create("idb-get",{originalErrorMessage:e?.message});nr.warn(n.message)}}}async function hg(t,e){try{const r=(await Dw()).transaction(Zo,"readwrite");await r.objectStore(Zo).put(e,Vw(t)),await r.done}catch(n){if(n instanceof Ms)nr.warn(n.message);else{const r=mn.create("idb-set",{originalErrorMessage:n?.message});nr.warn(r.message)}}}function Vw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=1024,oD=720*60*60*1e3;class aD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=fg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=oD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){nr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fg(),{heartbeatsToSend:r,unsentEntries:s}=cD(this._heartbeatsCache.heartbeats),i=Hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return nr.warn(n),""}}}function fg(){return new Date().toISOString().substring(0,10)}function cD(t,e=iD){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),dg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),dg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class lD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ww()?KC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sD(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function dg(t){return Hc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){Ci(new Is("platform-logger",e=>new yx(e),"PRIVATE")),Ci(new Is("heartbeat",e=>new aD(e),"PRIVATE")),Yn(Wc,Rh,t),Yn(Wc,Rh,"esm2017"),Yn("fire-js","")}uD("");const hD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ms,SDK_VERSION:Uf,_DEFAULT_ENTRY_NAME:Nr,_addComponent:Xo,_addOrOverwriteComponent:Aw,_apps:kr,_clearComponents:Jx,_components:Pi,_getProvider:Rw,_isFirebaseApp:Sw,_isFirebaseServerApp:Qx,_registerComponent:Ci,_removeServiceInstance:Wx,_serverApps:Si,deleteApp:$f,getApp:eD,getApps:tD,initializeApp:jf,initializeServerApp:Zx,onLog:Cw,registerVersion:Yn,setLogLevel:xw},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n){this._delegate=e,this.firebase=n,Xo(e,new Is("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),$f(this._delegate)))}_getService(e,n=Nr){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=Nr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Xo(this._delegate,e)}_addOrOverwriteComponent(e){Aw(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},pg=new bl("app-compat","Firebase",dD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:Yn,setLogLevel:xw,onLog:Cw,apps:null,SDK_VERSION:Uf,INTERNAL:{registerComponent:a,removeApp:r,useAsService:c,modularAPIs:hD}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function s(u){if(u=u||Nr,!og(e,u))throw pg.create("no-app",{appName:u});return e[u]}s.App=t;function i(u,h={}){const f=jf(u,h);if(og(e,f.name))return e[f.name];const p=new t(f,n);return e[f.name]=p,p}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const h=u.name,f=h.replace("-compat","");if(Ci(u)&&u.type==="PUBLIC"){const p=(m=s())=>{if(typeof m[f]!="function")throw pg.create("invalid-app-argument",{appName:h});return m[f]()};u.serviceProps!==void 0&&Kc(p,u.serviceProps),n[f]=p,t.prototype[f]=function(...m){return this._getService.bind(this,h).apply(this,u.multipleInstances?m:[])}}return u.type==="PUBLIC"?n[f]:null}function c(u,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(){const t=pD(fD);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Nw,extendNamespace:e,createSubscribe:JC,ErrorFactory:bl,deepExtend:Kc});function e(n){Kc(t,n)}return t}const mD=Nw();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=new Ff("@firebase/app-compat"),gD="@firebase/app-compat",_D="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t){Yn(gD,_D,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=mw();if(t.firebase!==void 0){mg.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&mg.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ea=mD;yD();var vD="firebase",wD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ea.registerVersion(vD,wD,"app-compat");var gg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ws,kw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function E(){}E.prototype=T.prototype,A.D=T.prototype,A.prototype=new E,A.prototype.constructor=A,A.C=function(b,x,S){for(var I=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)I[ge-2]=arguments[ge];return T.prototype[x].apply(b,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,T,E){E||(E=0);var b=Array(16);if(typeof T=="string")for(var x=0;16>x;++x)b[x]=T.charCodeAt(E++)|T.charCodeAt(E++)<<8|T.charCodeAt(E++)<<16|T.charCodeAt(E++)<<24;else for(x=0;16>x;++x)b[x]=T[E++]|T[E++]<<8|T[E++]<<16|T[E++]<<24;T=A.g[0],E=A.g[1],x=A.g[2];var S=A.g[3],I=T+(S^E&(x^S))+b[0]+3614090360&4294967295;T=E+(I<<7&4294967295|I>>>25),I=S+(x^T&(E^x))+b[1]+3905402710&4294967295,S=T+(I<<12&4294967295|I>>>20),I=x+(E^S&(T^E))+b[2]+606105819&4294967295,x=S+(I<<17&4294967295|I>>>15),I=E+(T^x&(S^T))+b[3]+3250441966&4294967295,E=x+(I<<22&4294967295|I>>>10),I=T+(S^E&(x^S))+b[4]+4118548399&4294967295,T=E+(I<<7&4294967295|I>>>25),I=S+(x^T&(E^x))+b[5]+1200080426&4294967295,S=T+(I<<12&4294967295|I>>>20),I=x+(E^S&(T^E))+b[6]+2821735955&4294967295,x=S+(I<<17&4294967295|I>>>15),I=E+(T^x&(S^T))+b[7]+4249261313&4294967295,E=x+(I<<22&4294967295|I>>>10),I=T+(S^E&(x^S))+b[8]+1770035416&4294967295,T=E+(I<<7&4294967295|I>>>25),I=S+(x^T&(E^x))+b[9]+2336552879&4294967295,S=T+(I<<12&4294967295|I>>>20),I=x+(E^S&(T^E))+b[10]+4294925233&4294967295,x=S+(I<<17&4294967295|I>>>15),I=E+(T^x&(S^T))+b[11]+2304563134&4294967295,E=x+(I<<22&4294967295|I>>>10),I=T+(S^E&(x^S))+b[12]+1804603682&4294967295,T=E+(I<<7&4294967295|I>>>25),I=S+(x^T&(E^x))+b[13]+4254626195&4294967295,S=T+(I<<12&4294967295|I>>>20),I=x+(E^S&(T^E))+b[14]+2792965006&4294967295,x=S+(I<<17&4294967295|I>>>15),I=E+(T^x&(S^T))+b[15]+1236535329&4294967295,E=x+(I<<22&4294967295|I>>>10),I=T+(x^S&(E^x))+b[1]+4129170786&4294967295,T=E+(I<<5&4294967295|I>>>27),I=S+(E^x&(T^E))+b[6]+3225465664&4294967295,S=T+(I<<9&4294967295|I>>>23),I=x+(T^E&(S^T))+b[11]+643717713&4294967295,x=S+(I<<14&4294967295|I>>>18),I=E+(S^T&(x^S))+b[0]+3921069994&4294967295,E=x+(I<<20&4294967295|I>>>12),I=T+(x^S&(E^x))+b[5]+3593408605&4294967295,T=E+(I<<5&4294967295|I>>>27),I=S+(E^x&(T^E))+b[10]+38016083&4294967295,S=T+(I<<9&4294967295|I>>>23),I=x+(T^E&(S^T))+b[15]+3634488961&4294967295,x=S+(I<<14&4294967295|I>>>18),I=E+(S^T&(x^S))+b[4]+3889429448&4294967295,E=x+(I<<20&4294967295|I>>>12),I=T+(x^S&(E^x))+b[9]+568446438&4294967295,T=E+(I<<5&4294967295|I>>>27),I=S+(E^x&(T^E))+b[14]+3275163606&4294967295,S=T+(I<<9&4294967295|I>>>23),I=x+(T^E&(S^T))+b[3]+4107603335&4294967295,x=S+(I<<14&4294967295|I>>>18),I=E+(S^T&(x^S))+b[8]+1163531501&4294967295,E=x+(I<<20&4294967295|I>>>12),I=T+(x^S&(E^x))+b[13]+2850285829&4294967295,T=E+(I<<5&4294967295|I>>>27),I=S+(E^x&(T^E))+b[2]+4243563512&4294967295,S=T+(I<<9&4294967295|I>>>23),I=x+(T^E&(S^T))+b[7]+1735328473&4294967295,x=S+(I<<14&4294967295|I>>>18),I=E+(S^T&(x^S))+b[12]+2368359562&4294967295,E=x+(I<<20&4294967295|I>>>12),I=T+(E^x^S)+b[5]+4294588738&4294967295,T=E+(I<<4&4294967295|I>>>28),I=S+(T^E^x)+b[8]+2272392833&4294967295,S=T+(I<<11&4294967295|I>>>21),I=x+(S^T^E)+b[11]+1839030562&4294967295,x=S+(I<<16&4294967295|I>>>16),I=E+(x^S^T)+b[14]+4259657740&4294967295,E=x+(I<<23&4294967295|I>>>9),I=T+(E^x^S)+b[1]+2763975236&4294967295,T=E+(I<<4&4294967295|I>>>28),I=S+(T^E^x)+b[4]+1272893353&4294967295,S=T+(I<<11&4294967295|I>>>21),I=x+(S^T^E)+b[7]+4139469664&4294967295,x=S+(I<<16&4294967295|I>>>16),I=E+(x^S^T)+b[10]+3200236656&4294967295,E=x+(I<<23&4294967295|I>>>9),I=T+(E^x^S)+b[13]+681279174&4294967295,T=E+(I<<4&4294967295|I>>>28),I=S+(T^E^x)+b[0]+3936430074&4294967295,S=T+(I<<11&4294967295|I>>>21),I=x+(S^T^E)+b[3]+3572445317&4294967295,x=S+(I<<16&4294967295|I>>>16),I=E+(x^S^T)+b[6]+76029189&4294967295,E=x+(I<<23&4294967295|I>>>9),I=T+(E^x^S)+b[9]+3654602809&4294967295,T=E+(I<<4&4294967295|I>>>28),I=S+(T^E^x)+b[12]+3873151461&4294967295,S=T+(I<<11&4294967295|I>>>21),I=x+(S^T^E)+b[15]+530742520&4294967295,x=S+(I<<16&4294967295|I>>>16),I=E+(x^S^T)+b[2]+3299628645&4294967295,E=x+(I<<23&4294967295|I>>>9),I=T+(x^(E|~S))+b[0]+4096336452&4294967295,T=E+(I<<6&4294967295|I>>>26),I=S+(E^(T|~x))+b[7]+1126891415&4294967295,S=T+(I<<10&4294967295|I>>>22),I=x+(T^(S|~E))+b[14]+2878612391&4294967295,x=S+(I<<15&4294967295|I>>>17),I=E+(S^(x|~T))+b[5]+4237533241&4294967295,E=x+(I<<21&4294967295|I>>>11),I=T+(x^(E|~S))+b[12]+1700485571&4294967295,T=E+(I<<6&4294967295|I>>>26),I=S+(E^(T|~x))+b[3]+2399980690&4294967295,S=T+(I<<10&4294967295|I>>>22),I=x+(T^(S|~E))+b[10]+4293915773&4294967295,x=S+(I<<15&4294967295|I>>>17),I=E+(S^(x|~T))+b[1]+2240044497&4294967295,E=x+(I<<21&4294967295|I>>>11),I=T+(x^(E|~S))+b[8]+1873313359&4294967295,T=E+(I<<6&4294967295|I>>>26),I=S+(E^(T|~x))+b[15]+4264355552&4294967295,S=T+(I<<10&4294967295|I>>>22),I=x+(T^(S|~E))+b[6]+2734768916&4294967295,x=S+(I<<15&4294967295|I>>>17),I=E+(S^(x|~T))+b[13]+1309151649&4294967295,E=x+(I<<21&4294967295|I>>>11),I=T+(x^(E|~S))+b[4]+4149444226&4294967295,T=E+(I<<6&4294967295|I>>>26),I=S+(E^(T|~x))+b[11]+3174756917&4294967295,S=T+(I<<10&4294967295|I>>>22),I=x+(T^(S|~E))+b[2]+718787259&4294967295,x=S+(I<<15&4294967295|I>>>17),I=E+(S^(x|~T))+b[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(x+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+x&4294967295,A.g[3]=A.g[3]+S&4294967295}r.prototype.u=function(A,T){T===void 0&&(T=A.length);for(var E=T-this.blockSize,b=this.B,x=this.h,S=0;S<T;){if(x==0)for(;S<=E;)s(this,A,S),S+=this.blockSize;if(typeof A=="string"){for(;S<T;)if(b[x++]=A.charCodeAt(S++),x==this.blockSize){s(this,b),x=0;break}}else for(;S<T;)if(b[x++]=A[S++],x==this.blockSize){s(this,b),x=0;break}}this.h=x,this.o+=T},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;var E=8*this.o;for(T=A.length-8;T<A.length;++T)A[T]=E&255,E/=256;for(this.u(A),A=Array(16),T=E=0;4>T;++T)for(var b=0;32>b;b+=8)A[E++]=this.g[T]>>>b&255;return A};function i(A,T){var E=a;return Object.prototype.hasOwnProperty.call(E,A)?E[A]:E[A]=T(A)}function o(A,T){this.h=T;for(var E=[],b=!0,x=A.length-1;0<=x;x--){var S=A[x]|0;b&&S==T||(E[x]=S,b=!1)}this.g=E}var a={};function c(A){return-128<=A&&128>A?i(A,function(T){return new o([T|0],0>T?-1:0)}):new o([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return P(u(-A));for(var T=[],E=1,b=0;A>=E;b++)T[b]=A/E|0,E*=4294967296;return new o(T,0)}function h(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return P(h(A.substring(1),T));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(T,8)),b=f,x=0;x<A.length;x+=8){var S=Math.min(8,A.length-x),I=parseInt(A.substring(x,x+S),T);8>S?(S=u(Math.pow(T,S)),b=b.j(S).add(u(I))):(b=b.j(E),b=b.add(u(I)))}return b}var f=c(0),p=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(v(this))return-P(this).m();for(var A=0,T=1,E=0;E<this.g.length;E++){var b=this.i(E);A+=(0<=b?b:4294967296+b)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(y(this))return"0";if(v(this))return"-"+P(this).toString(A);for(var T=u(Math.pow(A,6)),E=this,b="";;){var x=C(E,T).g;E=N(E,x.j(T));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(A);if(E=x,y(E))return S+b;for(;6>S.length;)S="0"+S;b=S+b}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function y(A){if(A.h!=0)return!1;for(var T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function v(A){return A.h==-1}t.l=function(A){return A=N(this,A),v(A)?-1:y(A)?0:1};function P(A){for(var T=A.g.length,E=[],b=0;b<T;b++)E[b]=~A.g[b];return new o(E,~A.h).add(p)}t.abs=function(){return v(this)?P(this):this},t.add=function(A){for(var T=Math.max(this.g.length,A.g.length),E=[],b=0,x=0;x<=T;x++){var S=b+(this.i(x)&65535)+(A.i(x)&65535),I=(S>>>16)+(this.i(x)>>>16)+(A.i(x)>>>16);b=I>>>16,S&=65535,I&=65535,E[x]=I<<16|S}return new o(E,E[E.length-1]&-2147483648?-1:0)};function N(A,T){return A.add(P(T))}t.j=function(A){if(y(this)||y(A))return f;if(v(this))return v(A)?P(this).j(P(A)):P(P(this).j(A));if(v(A))return P(this.j(P(A)));if(0>this.l(m)&&0>A.l(m))return u(this.m()*A.m());for(var T=this.g.length+A.g.length,E=[],b=0;b<2*T;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var x=0;x<A.g.length;x++){var S=this.i(b)>>>16,I=this.i(b)&65535,ge=A.i(x)>>>16,we=A.i(x)&65535;E[2*b+2*x]+=I*we,V(E,2*b+2*x),E[2*b+2*x+1]+=S*we,V(E,2*b+2*x+1),E[2*b+2*x+1]+=I*ge,V(E,2*b+2*x+1),E[2*b+2*x+2]+=S*ge,V(E,2*b+2*x+2)}for(b=0;b<T;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=T;b<2*T;b++)E[b]=0;return new o(E,0)};function V(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function w(A,T){this.g=A,this.h=T}function C(A,T){if(y(T))throw Error("division by zero");if(y(A))return new w(f,f);if(v(A))return T=C(P(A),T),new w(P(T.g),P(T.h));if(v(T))return T=C(A,P(T)),new w(P(T.g),T.h);if(30<A.g.length){if(v(A)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var E=p,b=T;0>=b.l(A);)E=k(E),b=k(b);var x=B(E,1),S=B(b,1);for(b=B(b,2),E=B(E,2);!y(b);){var I=S.add(b);0>=I.l(A)&&(x=x.add(E),S=I),b=B(b,1),E=B(E,1)}return T=N(A,x.j(T)),new w(x,T)}for(x=f;0<=A.l(T);){for(E=Math.max(1,Math.floor(A.m()/T.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),S=u(E),I=S.j(T);v(I)||0<I.l(A);)E-=b,S=u(E),I=S.j(T);y(S)&&(S=p),x=x.add(S),A=N(A,I)}return new w(x,A)}t.A=function(A){return C(this,A).h},t.and=function(A){for(var T=Math.max(this.g.length,A.g.length),E=[],b=0;b<T;b++)E[b]=this.i(b)&A.i(b);return new o(E,this.h&A.h)},t.or=function(A){for(var T=Math.max(this.g.length,A.g.length),E=[],b=0;b<T;b++)E[b]=this.i(b)|A.i(b);return new o(E,this.h|A.h)},t.xor=function(A){for(var T=Math.max(this.g.length,A.g.length),E=[],b=0;b<T;b++)E[b]=this.i(b)^A.i(b);return new o(E,this.h^A.h)};function k(A){for(var T=A.g.length+1,E=[],b=0;b<T;b++)E[b]=A.i(b)<<1|A.i(b-1)>>>31;return new o(E,A.h)}function B(A,T){var E=T>>5;T%=32;for(var b=A.g.length-E,x=[],S=0;S<b;S++)x[S]=0<T?A.i(S+E)>>>T|A.i(S+E+1)<<32-T:A.i(S+E);return new o(x,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,kw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ws=o}).apply(typeof gg<"u"?gg:typeof self<"u"?self:typeof window<"u"?window:{});var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ow,Po,Mw,mc,Sh,Lw,Fw,Bw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof sc=="object"&&sc];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,d){if(d)e:{var g=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var O=l[_];if(!(O in g))break e;g=g[O]}l=l[l.length-1],_=g[l],d=d(_),d!=_&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function i(l,d){l instanceof String&&(l+="");var g=0,_=!1,O={next:function(){if(!_&&g<l.length){var U=g++;return{value:d(U,l[U]),done:!1}}return _=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(l){return l||function(){return i(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function u(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,g){return l.call.apply(l.bind,arguments)}function f(l,d,g){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,_),l.apply(d,O)}}return function(){return l.apply(d,arguments)}}function p(l,d,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function m(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function y(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(_,O,U){for(var J=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)J[Me-2]=arguments[Me];return d.prototype[O].apply(_,J)}}function v(l){const d=l.length;if(0<d){const g=Array(d);for(let _=0;_<d;_++)g[_]=l[_];return g}return[]}function P(l,d){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(c(_)){const O=l.length||0,U=_.length||0;l.length=O+U;for(let J=0;J<U;J++)l[O+J]=_[J]}else l.push(_)}}class N{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(l){return/^[\s\xa0]*$/.test(l)}function w(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function C(l){return C[" "](l),l}C[" "]=function(){};var k=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function B(l,d,g){for(const _ in l)d.call(g,l[_],_,l)}function A(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function T(l){const d={};for(const g in l)d[g]=l[g];return d}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,d){let g,_;for(let O=1;O<arguments.length;O++){_=arguments[O];for(g in _)l[g]=_[g];for(let U=0;U<E.length;U++)g=E[U],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function x(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function S(l){a.setTimeout(()=>{throw l},0)}function I(){var l=Fe;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class ge{constructor(){this.h=this.g=null}add(d,g){const _=we.get();_.set(d,g),this.h?this.h.next=_:this.g=_,this.h=_}}var we=new N(()=>new ie,l=>l.reset());class ie{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,re=!1,Fe=new ge,_n=()=>{const l=a.Promise.resolve(void 0);pe=()=>{l.then(an)}};var an=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(g){S(g)}var d=we;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}re=!1};function Qe(){this.s=this.s,this.C=this.C}Qe.prototype.s=!1,Qe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Je(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Je.prototype.h=function(){this.defaultPrevented=!0};var ur=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,d),a.removeEventListener("test",g,d)}catch{}return l})();function en(l,d){if(Je.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(k){e:{try{C(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ht[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&en.aa.h.call(this)}}y(en,Je);var Ht={2:"touch",3:"pen",4:"mouse"};en.prototype.h=function(){en.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),se=0;function ee(l,d,g,_,O){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!_,this.ha=O,this.key=++se,this.da=this.fa=!1}function ce(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ye(l){this.src=l,this.g={},this.h=0}ye.prototype.add=function(l,d,g,_,O){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var J=R(l,d,_,O);return-1<J?(d=l[J],g||(d.fa=!1)):(d=new ee(d,this.src,U,!!_,O),d.fa=g,l.push(d)),d};function ke(l,d){var g=d.type;if(g in l.g){var _=l.g[g],O=Array.prototype.indexOf.call(_,d,void 0),U;(U=0<=O)&&Array.prototype.splice.call(_,O,1),U&&(ce(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function R(l,d,g,_){for(var O=0;O<l.length;++O){var U=l[O];if(!U.da&&U.listener==d&&U.capture==!!g&&U.ha==_)return O}return-1}var D="closure_lm_"+(1e6*Math.random()|0),L={};function H(l,d,g,_,O){if(Array.isArray(d)){for(var U=0;U<d.length;U++)H(l,d[U],g,_,O);return null}return g=le(g),l&&l[$]?l.K(d,g,u(_)?!!_.capture:!1,O):j(l,d,g,!1,_,O)}function j(l,d,g,_,O,U){if(!d)throw Error("Invalid event type");var J=u(O)?!!O.capture:!!O,Me=he(l);if(Me||(l[D]=Me=new ye(l)),g=Me.add(d,g,_,J,U),g.proxy)return g;if(_=K(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)ur||(O=J),O===void 0&&(O=!1),l.addEventListener(d.toString(),_,O);else if(l.attachEvent)l.attachEvent(W(d.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function K(){function l(g){return d.call(l.src,l.listener,g)}const d=z;return l}function Z(l,d,g,_,O){if(Array.isArray(d))for(var U=0;U<d.length;U++)Z(l,d[U],g,_,O);else _=u(_)?!!_.capture:!!_,g=le(g),l&&l[$]?(l=l.i,d=String(d).toString(),d in l.g&&(U=l.g[d],g=R(U,g,_,O),-1<g&&(ce(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete l.g[d],l.h--)))):l&&(l=he(l))&&(d=l.g[d.toString()],l=-1,d&&(l=R(d,g,_,O)),(g=-1<l?d[l]:null)&&Q(g))}function Q(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[$])ke(d.i,l);else{var g=l.type,_=l.proxy;d.removeEventListener?d.removeEventListener(g,_,l.capture):d.detachEvent?d.detachEvent(W(g),_):d.addListener&&d.removeListener&&d.removeListener(_),(g=he(d))?(ke(g,l),g.h==0&&(g.src=null,d[D]=null)):ce(l)}}}function W(l){return l in L?L[l]:L[l]="on"+l}function z(l,d){if(l.da)l=!0;else{d=new en(d,this);var g=l.listener,_=l.ha||l.src;l.fa&&Q(l),l=g.call(_,d)}return l}function he(l){return l=l[D],l instanceof ye?l:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(l){return typeof l=="function"?l:(l[te]||(l[te]=function(d){return l.handleEvent(d)}),l[te])}function oe(){Qe.call(this),this.i=new ye(this),this.M=this,this.F=null}y(oe,Qe),oe.prototype[$]=!0,oe.prototype.removeEventListener=function(l,d,g,_){Z(this,l,d,g,_)};function de(l,d){var g,_=l.F;if(_)for(g=[];_;_=_.F)g.push(_);if(l=l.M,_=d.type||d,typeof d=="string")d=new Je(d,l);else if(d instanceof Je)d.target=d.target||l;else{var O=d;d=new Je(_,l),b(d,O)}if(O=!0,g)for(var U=g.length-1;0<=U;U--){var J=d.g=g[U];O=Ce(J,_,!0,d)&&O}if(J=d.g=l,O=Ce(J,_,!0,d)&&O,O=Ce(J,_,!1,d)&&O,g)for(U=0;U<g.length;U++)J=d.g=g[U],O=Ce(J,_,!1,d)&&O}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],_=0;_<g.length;_++)ce(g[_]);delete l.g[d],l.h--}}this.F=null},oe.prototype.K=function(l,d,g,_){return this.i.add(String(l),d,!1,g,_)},oe.prototype.L=function(l,d,g,_){return this.i.add(String(l),d,!0,g,_)};function Ce(l,d,g,_){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,U=0;U<d.length;++U){var J=d[U];if(J&&!J.da&&J.capture==g){var Me=J.listener,yt=J.ha||J.src;J.fa&&ke(l.i,J),O=Me.call(yt,_)!==!1&&O}}return O&&!_.defaultPrevented}function Ae(l,d,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function gt(l){l.g=Ae(()=>{l.g=null,l.i&&(l.i=!1,gt(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ft extends Qe{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:gt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _t(l){Qe.call(this),this.h=l,this.g={}}y(_t,Qe);var Rt=[];function hr(l){B(l.g,function(d,g){this.g.hasOwnProperty(g)&&Q(d)},l),l.g={}}_t.prototype.N=function(){_t.aa.N.call(this),hr(this)},_t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $s=a.JSON.stringify,Ot=a.JSON.parse,cn=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function qs(){}qs.prototype.h=null;function to(l){return l.h||(l.h=l.i())}function Kd(){}var no={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wl(){Je.call(this,"d")}y(Wl,Je);function Ql(){Je.call(this,"c")}y(Ql,Je);var Wr={},zd=null;function ka(){return zd=zd||new oe}Wr.La="serverreachability";function Wd(l){Je.call(this,Wr.La,l)}y(Wd,Je);function ro(l){const d=ka();de(d,new Wd(d))}Wr.STAT_EVENT="statevent";function Qd(l,d){Je.call(this,Wr.STAT_EVENT,l),this.stat=d}y(Qd,Je);function Mt(l){const d=ka();de(d,new Qd(d,l))}Wr.Ma="timingevent";function Jd(l,d){Je.call(this,Wr.Ma,l),this.size=d}y(Jd,Je);function so(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function io(){this.g=!0}io.prototype.xa=function(){this.g=!1};function sI(l,d,g,_,O,U){l.info(function(){if(l.g)if(U)for(var J="",Me=U.split("&"),yt=0;yt<Me.length;yt++){var Re=Me[yt].split("=");if(1<Re.length){var St=Re[0];Re=Re[1];var Pt=St.split("_");J=2<=Pt.length&&Pt[1]=="type"?J+(St+"="+Re+"&"):J+(St+"=redacted&")}}else J=null;else J=U;return"XMLHTTP REQ ("+_+") [attempt "+O+"]: "+d+`
`+g+`
`+J})}function iI(l,d,g,_,O,U,J){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+O+"]: "+d+`
`+g+`
`+U+" "+J})}function Gs(l,d,g,_){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+aI(l,g)+(_?" "+_:"")})}function oI(l,d){l.info(function(){return"TIMEOUT: "+d})}io.prototype.info=function(){};function aI(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var _=g[l];if(!(2>_.length)){var O=_[1];if(Array.isArray(O)&&!(1>O.length)){var U=O[0];if(U!="noop"&&U!="stop"&&U!="close")for(var J=1;J<O.length;J++)O[J]=""}}}}return $s(g)}catch{return d}}var Oa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jl;function Ma(){}y(Ma,qs),Ma.prototype.g=function(){return new XMLHttpRequest},Ma.prototype.i=function(){return{}},Jl=new Ma;function fr(l,d,g,_){this.j=l,this.i=d,this.l=g,this.R=_||1,this.U=new _t(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xd}function Xd(){this.i=null,this.g="",this.h=!1}var Zd={},Yl={};function Xl(l,d,g){l.L=1,l.v=Ua(Un(d)),l.m=g,l.P=!0,ep(l,null)}function ep(l,d){l.F=Date.now(),La(l),l.A=Un(l.v);var g=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),pp(g.i,"t",_),l.C=0,g=l.j.J,l.h=new Xd,l.g=Vp(l.j,g?d:null,!l.m),0<l.O&&(l.M=new ft(p(l.Y,l,l.g),l.O)),d=l.U,g=l.g,_=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Rt[0]=O.toString()),O=Rt);for(var U=0;U<O.length;U++){var J=H(g,O[U],_||d.handleEvent,!1,d.h||d);if(!J)break;d.g[J.key]=J}d=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),ro(),sI(l.i,l.u,l.A,l.l,l.R,l.m)}fr.prototype.ca=function(l){l=l.target;const d=this.M;d&&jn(l)==3?d.j():this.Y(l)},fr.prototype.Y=function(l){try{if(l==this.g)e:{const Pt=jn(this.g);var d=this.g.Ba();const zs=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Ep(this.g)))){this.J||Pt!=4||d==7||(d==8||0>=zs?ro(3):ro(2)),Zl(this);var g=this.g.Z();this.X=g;t:if(tp(this)){var _=Ep(this.g);l="";var O=_.length,U=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),oo(this);var J="";break t}this.h.i=new a.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,l+=this.h.i.decode(_[d],{stream:!(U&&d==O-1)});_.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=g==200,iI(this.i,this.u,this.A,this.l,this.R,Pt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,yt=this.g;if((Me=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Me)){var Re=Me;break t}}Re=null}if(g=Re)Gs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eu(this,g);else{this.o=!1,this.s=3,Mt(12),Qr(this),oo(this);break e}}if(this.P){g=!0;let yn;for(;!this.J&&this.C<J.length;)if(yn=cI(this,J),yn==Yl){Pt==4&&(this.s=4,Mt(14),g=!1),Gs(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Zd){this.s=4,Mt(15),Gs(this.i,this.l,J,"[Invalid Chunk]"),g=!1;break}else Gs(this.i,this.l,yn,null),eu(this,yn);if(tp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||J.length!=0||this.h.h||(this.s=1,Mt(16),g=!1),this.o=this.o&&g,!g)Gs(this.i,this.l,J,"[Invalid Chunked Response]"),Qr(this),oo(this);else if(0<J.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),ou(St),St.M=!0,Mt(11))}}else Gs(this.i,this.l,J,null),eu(this,J);Pt==4&&Qr(this),this.o&&!this.J&&(Pt==4?Pp(this.j,this):(this.o=!1,La(this)))}else AI(this.g),g==400&&0<J.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Qr(this),oo(this)}}}catch{}finally{}};function tp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function cI(l,d){var g=l.C,_=d.indexOf(`
`,g);return _==-1?Yl:(g=Number(d.substring(g,_)),isNaN(g)?Zd:(_+=1,_+g>d.length?Yl:(d=d.slice(_,_+g),l.C=_+g,d)))}fr.prototype.cancel=function(){this.J=!0,Qr(this)};function La(l){l.S=Date.now()+l.I,np(l,l.I)}function np(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=so(p(l.ba,l),d)}function Zl(l){l.B&&(a.clearTimeout(l.B),l.B=null)}fr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(oI(this.i,this.A),this.L!=2&&(ro(),Mt(17)),Qr(this),this.s=2,oo(this)):np(this,this.S-l)};function oo(l){l.j.G==0||l.J||Pp(l.j,l)}function Qr(l){Zl(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,hr(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function eu(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||tu(g.h,l))){if(!l.K&&tu(g.h,l)&&g.G==3){try{var _=g.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var O=_;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Ka(g),Ga(g);else break e;iu(g),Mt(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=so(p(g.Za,g),6e3));if(1>=ip(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Yr(g,11)}else if((l.K||g.g==l)&&Ka(g),!V(d))for(O=g.Da.g.parse(d),d=0;d<O.length;d++){let Re=O[d];if(g.T=Re[0],Re=Re[1],g.G==2)if(Re[0]=="c"){g.K=Re[1],g.ia=Re[2];const St=Re[3];St!=null&&(g.la=St,g.j.info("VER="+g.la));const Pt=Re[4];Pt!=null&&(g.Aa=Pt,g.j.info("SVER="+g.Aa));const zs=Re[5];zs!=null&&typeof zs=="number"&&0<zs&&(_=1.5*zs,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const yn=l.g;if(yn){const Wa=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wa){var U=_.h;U.g||Wa.indexOf("spdy")==-1&&Wa.indexOf("quic")==-1&&Wa.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(nu(U,U.h),U.h=null))}if(_.D){const au=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;au&&(_.ya=au,je(_.I,_.D,au))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var J=l;if(_.qa=Dp(_,_.J?_.ia:null,_.W),J.K){op(_.h,J);var Me=J,yt=_.L;yt&&(Me.I=yt),Me.B&&(Zl(Me),La(Me)),_.g=J}else Rp(_);0<g.i.length&&Ha(g)}else Re[0]!="stop"&&Re[0]!="close"||Yr(g,7);else g.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Yr(g,7):su(g):Re[0]!="noop"&&g.l&&g.l.ta(Re),g.v=0)}}ro(4)}catch{}}var lI=class{constructor(l,d){this.g=l,this.map=d}};function rp(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ip(l){return l.h?1:l.g?l.g.size:0}function tu(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function nu(l,d){l.g?l.g.add(d):l.h=d}function op(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}rp.prototype.cancel=function(){if(this.i=ap(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function ap(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return v(l.i)}function uI(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var d=[],g=l.length,_=0;_<g;_++)d.push(l[_]);return d}d=[],g=0;for(_ in l)d[g++]=l[_];return d}function hI(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const _ in l)d[g++]=_;return d}}}function cp(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=hI(l),_=uI(l),O=_.length,U=0;U<O;U++)d.call(void 0,_[U],g&&g[U],l)}var lp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fI(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var _=l[g].indexOf("="),O=null;if(0<=_){var U=l[g].substring(0,_);O=l[g].substring(_+1)}else U=l[g];d(U,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Jr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Jr){this.h=l.h,Fa(this,l.j),this.o=l.o,this.g=l.g,Ba(this,l.s),this.l=l.l;var d=l.i,g=new lo;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),up(this,g),this.m=l.m}else l&&(d=String(l).match(lp))?(this.h=!1,Fa(this,d[1]||"",!0),this.o=ao(d[2]||""),this.g=ao(d[3]||"",!0),Ba(this,d[4]),this.l=ao(d[5]||"",!0),up(this,d[6]||"",!0),this.m=ao(d[7]||"")):(this.h=!1,this.i=new lo(null,this.h))}Jr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(co(d,hp,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(co(d,hp,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(co(g,g.charAt(0)=="/"?mI:pI,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",co(g,_I)),l.join("")};function Un(l){return new Jr(l)}function Fa(l,d,g){l.j=g?ao(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Ba(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function up(l,d,g){d instanceof lo?(l.i=d,yI(l.i,l.h)):(g||(d=co(d,gI)),l.i=new lo(d,l.h))}function je(l,d,g){l.i.set(d,g)}function Ua(l){return je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ao(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function co(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,dI),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function dI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var hp=/[#\/\?@]/g,pI=/[#\?:]/g,mI=/[#\?]/g,gI=/[#\?@]/g,_I=/#/g;function lo(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function dr(l){l.g||(l.g=new Map,l.h=0,l.i&&fI(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}t=lo.prototype,t.add=function(l,d){dr(this),this.i=null,l=Hs(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function fp(l,d){dr(l),d=Hs(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function dp(l,d){return dr(l),d=Hs(l,d),l.g.has(d)}t.forEach=function(l,d){dr(this),this.g.forEach(function(g,_){g.forEach(function(O){l.call(d,O,_,this)},this)},this)},t.na=function(){dr(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let _=0;_<d.length;_++){const O=l[_];for(let U=0;U<O.length;U++)g.push(d[_])}return g},t.V=function(l){dr(this);let d=[];if(typeof l=="string")dp(this,l)&&(d=d.concat(this.g.get(Hs(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},t.set=function(l,d){return dr(this),this.i=null,l=Hs(this,l),dp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function pp(l,d,g){fp(l,d),0<g.length&&(l.i=null,l.g.set(Hs(l,d),v(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var _=d[g];const U=encodeURIComponent(String(_)),J=this.V(_);for(_=0;_<J.length;_++){var O=U;J[_]!==""&&(O+="="+encodeURIComponent(String(J[_]))),l.push(O)}}return this.i=l.join("&")};function Hs(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function yI(l,d){d&&!l.j&&(dr(l),l.i=null,l.g.forEach(function(g,_){var O=_.toLowerCase();_!=O&&(fp(this,_),pp(this,O,g))},l)),l.j=d}function vI(l,d){const g=new io;if(a.Image){const _=new Image;_.onload=m(pr,g,"TestLoadImage: loaded",!0,d,_),_.onerror=m(pr,g,"TestLoadImage: error",!1,d,_),_.onabort=m(pr,g,"TestLoadImage: abort",!1,d,_),_.ontimeout=m(pr,g,"TestLoadImage: timeout",!1,d,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else d(!1)}function wI(l,d){const g=new io,_=new AbortController,O=setTimeout(()=>{_.abort(),pr(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:_.signal}).then(U=>{clearTimeout(O),U.ok?pr(g,"TestPingServer: ok",!0,d):pr(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),pr(g,"TestPingServer: error",!1,d)})}function pr(l,d,g,_,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),_(g)}catch{}}function EI(){this.g=new cn}function TI(l,d,g){const _=g||"";try{cp(l,function(O,U){let J=O;u(O)&&(J=$s(O)),d.push(_+U+"="+encodeURIComponent(J))})}catch(O){throw d.push(_+"type="+encodeURIComponent("_badmap")),O}}function ja(l){this.l=l.Ub||null,this.j=l.eb||!1}y(ja,qs),ja.prototype.g=function(){return new $a(this.l,this.j)},ja.prototype.i=(function(l){return function(){return l}})({});function $a(l,d){oe.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y($a,oe),t=$a.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,ho(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ho(this)),this.g&&(this.readyState=3,ho(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function mp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?uo(this):ho(this),this.readyState==3&&mp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,uo(this))},t.Qa=function(l){this.g&&(this.response=l,uo(this))},t.ga=function(){this.g&&uo(this)};function uo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ho(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function ho(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty($a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function gp(l){let d="";return B(l,function(g,_){d+=_,d+=":",d+=g,d+=`\r
`}),d}function ru(l,d,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=gp(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):je(l,d,g))}function Xe(l){oe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Xe,oe);var II=/^https?$/i,bI=["POST","PUT"];t=Xe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jl.g(),this.v=this.o?to(this.o):to(Jl),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(U){_p(this,U);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var O in _)g.set(O,_[O]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const U of _.keys())g.set(U,_.get(U));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),O=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bI,d,void 0))||_||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,J]of g)this.g.setRequestHeader(U,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wp(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){_p(this,U)}};function _p(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,yp(l),qa(l)}function yp(l){l.A||(l.A=!0,de(l,"complete"),de(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,de(this,"complete"),de(this,"abort"),qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qa(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vp(this):this.bb())},t.bb=function(){vp(this)};function vp(l){if(l.h&&typeof o<"u"&&(!l.v[1]||jn(l)!=4||l.Z()!=2)){if(l.u&&jn(l)==4)Ae(l.Ea,0,l);else if(de(l,"readystatechange"),jn(l)==4){l.h=!1;try{const J=l.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var _;if(_=J===0){var O=String(l.D).match(lp)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),_=!II.test(O?O.toLowerCase():"")}g=_}if(g)de(l,"complete"),de(l,"success");else{l.m=6;try{var U=2<jn(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",yp(l)}}finally{qa(l)}}}}function qa(l,d){if(l.g){wp(l);const g=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||de(l,"ready");try{g.onreadystatechange=_}catch{}}}function wp(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function jn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Ot(d)}};function Ep(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function AI(l){const d={};l=(l.g&&2<=jn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(V(l[_]))continue;var g=x(l[_]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=d[O]||[];d[O]=U,U.push(g)}A(d,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fo(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function Tp(l){this.Aa=0,this.i=[],this.j=new io,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fo("baseRetryDelayMs",5e3,l),this.cb=fo("retryDelaySeedMs",1e4,l),this.Wa=fo("forwardChannelMaxRetries",2,l),this.wa=fo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new rp(l&&l.concurrentRequestLimit),this.Da=new EI,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tp.prototype,t.la=8,t.G=1,t.connect=function(l,d,g,_){Mt(0),this.W=l,this.H=d||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Dp(this,null,this.W),Ha(this)};function su(l){if(Ip(l),l.G==3){var d=l.U++,g=Un(l.I);if(je(g,"SID",l.K),je(g,"RID",d),je(g,"TYPE","terminate"),po(l,g),d=new fr(l,l.j,d),d.L=2,d.v=Ua(Un(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=d.v,g=!0),g||(d.g=Vp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),La(d)}xp(l)}function Ga(l){l.g&&(ou(l),l.g.cancel(),l.g=null)}function Ip(l){Ga(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ka(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ha(l){if(!sp(l.h)&&!l.s){l.s=!0;var d=l.Ga;pe||_n(),re||(pe(),re=!0),Fe.add(d,l),l.B=0}}function RI(l,d){return ip(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=so(p(l.Ga,l,d),Cp(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new fr(this,this.j,l);let U=this.o;if(this.S&&(U?(U=T(U),b(U,this.S)):U=this.S),this.m!==null||this.O||(O.H=U,U=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Ap(this,O,d),g=Un(this.I),je(g,"RID",l),je(g,"CVER",22),this.D&&je(g,"X-HTTP-Session-Id",this.D),po(this,g),U&&(this.O?d="headers="+encodeURIComponent(String(gp(U)))+"&"+d:this.m&&ru(g,this.m,U)),nu(this.h,O),this.Ua&&je(g,"TYPE","init"),this.P?(je(g,"$req",d),je(g,"SID","null"),O.T=!0,Xl(O,g,null)):Xl(O,g,d),this.G=2}}else this.G==3&&(l?bp(this,l):this.i.length==0||sp(this.h)||bp(this))};function bp(l,d){var g;d?g=d.l:g=l.U++;const _=Un(l.I);je(_,"SID",l.K),je(_,"RID",g),je(_,"AID",l.T),po(l,_),l.m&&l.o&&ru(_,l.m,l.o),g=new fr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Ap(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),nu(l.h,g),Xl(g,_,d)}function po(l,d){l.H&&B(l.H,function(g,_){je(d,_,g)}),l.l&&cp({},function(g,_){je(d,_,g)})}function Ap(l,d,g){g=Math.min(l.i.length,g);var _=l.l?p(l.l.Na,l.l,l):null;e:{var O=l.i;let U=-1;for(;;){const J=["count="+g];U==-1?0<g?(U=O[0].g,J.push("ofs="+U)):U=0:J.push("ofs="+U);let Me=!0;for(let yt=0;yt<g;yt++){let Re=O[yt].g;const St=O[yt].map;if(Re-=U,0>Re)U=Math.max(0,O[yt].g-100),Me=!1;else try{TI(St,J,"req"+Re+"_")}catch{_&&_(St)}}if(Me){_=J.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,_}function Rp(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;pe||_n(),re||(pe(),re=!0),Fe.add(d,l),l.v=0}}function iu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=so(p(l.Fa,l),Cp(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Sp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=so(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),Ga(this),Sp(this))};function ou(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Sp(l){l.g=new fr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Un(l.qa);je(d,"RID","rpc"),je(d,"SID",l.K),je(d,"AID",l.T),je(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&je(d,"TO",l.ja),je(d,"TYPE","xmlhttp"),po(l,d),l.m&&l.o&&ru(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Ua(Un(d)),g.m=null,g.P=!0,ep(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Ga(this),iu(this),Mt(19))};function Ka(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Pp(l,d){var g=null;if(l.g==d){Ka(l),ou(l),l.g=null;var _=2}else if(tu(l.h,d))g=d.D,op(l.h,d),_=1;else return;if(l.G!=0){if(d.o)if(_==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var O=l.B;_=ka(),de(_,new Jd(_,g)),Ha(l)}else Rp(l);else if(O=d.s,O==3||O==0&&0<d.X||!(_==1&&RI(l,d)||_==2&&iu(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),O){case 1:Yr(l,5);break;case 4:Yr(l,10);break;case 3:Yr(l,6);break;default:Yr(l,2)}}}function Cp(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function Yr(l,d){if(l.j.info("Error code "+d),d==2){var g=p(l.fb,l),_=l.Xa;const O=!_;_=new Jr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fa(_,"https"),Ua(_),O?vI(_.toString(),g):wI(_.toString(),g)}else Mt(2);l.G=0,l.l&&l.l.sa(d),xp(l),Ip(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function xp(l){if(l.G=0,l.ka=[],l.l){const d=ap(l.h);(d.length!=0||l.i.length!=0)&&(P(l.ka,d),P(l.ka,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.ra()}}function Dp(l,d,g){var _=g instanceof Jr?Un(g):new Jr(g);if(_.g!="")d&&(_.g=d+"."+_.g),Ba(_,_.s);else{var O=a.location;_=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var U=new Jr(null);_&&Fa(U,_),d&&(U.g=d),O&&Ba(U,O),g&&(U.l=g),_=U}return g=l.D,d=l.ya,g&&d&&je(_,g,d),je(_,"VER",l.la),po(l,_),_}function Vp(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Xe(new ja({eb:g})):new Xe(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Np(){}t=Np.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function za(){}za.prototype.g=function(l,d){return new tn(l,d)};function tn(l,d){oe.call(this),this.g=new Tp(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!V(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Ks(this)}y(tn,oe),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){su(this.g)},tn.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=$s(l),l=g);d.i.push(new lI(d.Ya++,l)),d.G==3&&Ha(d)},tn.prototype.N=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,tn.aa.N.call(this)};function kp(l){Wl.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}y(kp,Wl);function Op(){Ql.call(this),this.status=1}y(Op,Ql);function Ks(l){this.g=l}y(Ks,Np),Ks.prototype.ua=function(){de(this.g,"a")},Ks.prototype.ta=function(l){de(this.g,new kp(l))},Ks.prototype.sa=function(l){de(this.g,new Op)},Ks.prototype.ra=function(){de(this.g,"b")},za.prototype.createWebChannel=za.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,Bw=function(){return new za},Fw=function(){return ka()},Lw=Wr,Sh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oa.NO_ERROR=0,Oa.TIMEOUT=8,Oa.HTTP_ERROR=6,mc=Oa,Yd.COMPLETE="complete",Mw=Yd,Kd.EventType=no,no.OPEN="a",no.CLOSE="b",no.ERROR="c",no.MESSAGE="d",oe.prototype.listen=oe.prototype.K,Po=Kd,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,Ow=Xe}).apply(typeof sc<"u"?sc:typeof self<"u"?self:typeof window<"u"?window:{});const _g="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Ff("@firebase/firestore");function si(){return Or.logLevel}function ED(t){Or.setLogLevel(t)}function G(t,...e){if(Or.logLevel<=Ie.DEBUG){const n=e.map(qf);Or.debug(`Firestore (${zi}): ${t}`,...n)}}function nt(t,...e){if(Or.logLevel<=Ie.ERROR){const n=e.map(qf);Or.error(`Firestore (${zi}): ${t}`,...n)}}function On(t,...e){if(Or.logLevel<=Ie.WARN){const n=e.map(qf);Or.warn(`Firestore (${zi}): ${t}`,...n)}}function qf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${zi}) INTERNAL ASSERTION FAILED: `+t;throw nt(e),new Error(e)}function ae(t,e){t||ne()}function TD(t,e){t||ne()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ID{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(pt.UNAUTHENTICATED)))}shutdown(){}}class bD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class AD{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new At;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new At,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new At)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string"),new Uw(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new pt(e)}}class RD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class SD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new RD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(pt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class PD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ae(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ae(typeof n.token=="string"),this.R=n.token,new PD(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=xD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function xi(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}function $w(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new ze(0,0))}static max(){return new ue(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ta.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ta?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ee extends ta{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ee(n)}static emptyPath(){return new Ee([])}}const DD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends ta{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return DD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ee.fromString(e))}static fromName(e){return new Y(Ee.fromString(e).popFirst(5))}static empty(){return new Y(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Ph(t){return t.fields.find((e=>e.kind===2))}function os(t){return t.fields.filter((e=>e.kind!==2))}Qc.UNKNOWN_ID=-1;class gc{constructor(e,n){this.fieldPath=e,this.kind=n}}class na{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new na(0,on.min())}}function qw(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new on(s,Y.empty(),e)}function Gw(t){return new on(t.readTime,t.key,-1)}class on{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new on(ue.min(),Y.empty(),-1)}static max(){return new on(ue.max(),Y.empty(),-1)}}function Gf(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gr(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==Hw)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):M.reject(n)}static resolve(e){return new M(((n,r)=>{n(e)}))}static reject(e){return new M(((n,r)=>{r(e)}))}static waitFor(e){return new M(((n,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&n()}),(c=>r(c)))})),o=!0,i===s&&n()}))}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next((s=>s?M.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new M(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next((h=>{o[u]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new M(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new At,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Fo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Hf(r.target.error);this.V.reject(new Fo(e,s))}}static open(e,n,r,s){try{return new Al(n,e.transaction(s,r))}catch(i){throw new Fo(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(G("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new ND(n)}}class Nn{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Nn.S(zc())===12.2&&nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return G("SimpleDb","Removing database:",e),as(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ww())return!1;if(Nn.v())return!0;const e=zc(),n=Nn.S(e),r=0<n&&n<10,s=zw(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(G("SimpleDb","Opening database:",this.name),this.db=await new Promise(((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Fo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new q(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Fo(e,o))},s.onupgradeneeded=i=>{G("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next((()=>{G("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Al.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next((u=>(a.g(),u))).catch((u=>(a.abort(u),M.reject(u)))).toPromise();return c.catch((()=>{})),await a.m,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(G("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function zw(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class VD{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return as(this.B.delete())}}class Fo extends q{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Hr(t){return t.name==="IndexedDbTransactionError"}class ND{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(G("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),as(r)}add(e){return G("SimpleDb","ADD",this.store.name,e,e),as(this.store.add(e))}get(e){return as(this.store.get(e)).next((n=>(n===void 0&&(n=null),G("SimpleDb","GET",this.store.name,e,n),n)))}delete(e){return G("SimpleDb","DELETE",this.store.name,e),as(this.store.delete(e))}count(){return G("SimpleDb","COUNT",this.store.name),as(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new M(((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}}))}{const i=this.cursor(r),o=[];return this.W(i,((a,c)=>{o.push(c)})).next((()=>o))}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}j(e,n){G("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,((i,o,a)=>a.delete()))}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new M(((r,s)=>{n.onerror=i=>{const o=Hf(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}W(e,n){const r=[];return new M(((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new VD(a),u=n(a.primaryKey,a.value,c);if(u instanceof M){const h=u.catch((f=>(c.done(),M.reject(f))));r.push(h)}c.isDone?s():c.K===null?a.continue():a.continue(c.K)}})).next((()=>M.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function as(t){return new M(((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Hf(r.target.error);n(s)}}))}let yg=!1;function Hf(t){const e=Nn.S(zc());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yg||(yg=!0,setTimeout((()=>{throw r}),0)),r}}return t}class kD{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){G("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{G("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Hr(n)?G("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Gr(n)}await this.X(6e4)}))}}class OD{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.te(n,e)))}te(e,n){const r=new Set;let s=n,i=!0;return M.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return G("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next((a=>{s-=a,r.add(o)}));i=!1})))).next((()=>n-s))}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this.re(s,i))).next((a=>(G("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}re(e,n){let r=e;return n.changes.forEach(((s,i)=>{const o=Gw(i);Gf(o,r)>0&&(r=o)})),new on(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jt.oe=-1;function Ea(t){return t==null}function ra(t){return t===0&&1/t==-1/0}function Ww(t){return typeof t=="number"&&Number.isInteger(t)&&!ra(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vg(e)),e=MD(t.get(n),e);return vg(e)}function MD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function vg(t){return t+""}function xn(t){const e=t.length;if(ae(e>=2),e===2)return ae(t.charAt(0)===""&&t.charAt(1)===""),Ee.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&ne(),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ne()}i=o+2}return new Ee(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t,e){return[t,$t(e)]}function Qw(t,e,n){return[t,$t(e),n]}const LD={},FD=["prefixPath","collectionGroup","readTime","documentId"],BD=["prefixPath","collectionGroup","documentId"],UD=["collectionGroup","readTime","prefixPath","documentId"],jD=["canonicalId","targetId"],$D=["targetId","path"],qD=["path","targetId"],GD=["collectionId","parent"],HD=["indexId","uid"],KD=["uid","sequenceNumber"],zD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WD=["indexId","uid","orderedDocumentKey"],QD=["userId","collectionPath","documentId"],JD=["userId","collectionPath","largestBatchId"],YD=["userId","collectionGroup","largestBatchId"],Jw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],XD=[...Jw,"documentOverlays"],Yw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xw=Yw,Kf=[...Xw,"indexConfiguration","indexState","indexEntries"],ZD=Kf,eV=[...Kf,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Kw{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function ht(t,e){const n=X(t);return Nn.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ic(this.root,e,this.comparator,!0)}}class ic{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??wt.RED,this.left=s??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new wt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,s,i){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tg(this.data.getIterator())}getIteratorFrom(e){return new Tg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Oe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Oe(this.comparator);return n.data=e,n}}class Tg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xs(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new Oe(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xi(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new eE("Invalid base64 string: "+i):i}})(e);return new tt(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const nV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rr(t){if(ae(!!t),typeof t=="string"){let e=0;const n=nV.exec(t);if(ae(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function zf(t){const e=t.mapValue.fields.__previous_value__;return Rl(e)?zf(e):e}function sa(t){const e=rr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n,r,s,i,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class Lr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Lr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Lr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yc={nullValue:"NULL_VALUE"};function bs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rl(t)?4:tE(t)?9007199254740991:Sl(t)?10:11:ne()}function Mn(t,e){if(t===e)return!0;const n=bs(t);if(n!==bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sa(t).isEqual(sa(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=rr(s.timestampValue),a=rr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Mr(s.bytesValue).isEqual(Mr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Ge(s.geoPointValue.latitude)===Ge(i.geoPointValue.latitude)&&Ge(s.geoPointValue.longitude)===Ge(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ge(s.integerValue)===Ge(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ge(s.doubleValue),a=Ge(i.doubleValue);return o===a?ra(o)===ra(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return xi(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Eg(o)!==Eg(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Mn(o[c],a[c])))return!1;return!0})(t,e);default:return ne()}}function ia(t,e){return(t.values||[]).find((n=>Mn(n,e)))!==void 0}function Fr(t,e){if(t===e)return 0;const n=bs(t),r=bs(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=Ge(i.integerValue||i.doubleValue),c=Ge(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return Ig(t.timestampValue,e.timestampValue);case 4:return Ig(sa(t),sa(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=Mr(i),c=Mr(o);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=_e(a[u],c[u]);if(h!==0)return h}return _e(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=_e(Ge(i.latitude),Ge(o.latitude));return a!==0?a:_e(Ge(i.longitude),Ge(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return bg(t.arrayValue,e.arrayValue);case 10:return(function(i,o){var a,c,u,h;const f=i.fields||{},p=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,y=(c=p.value)===null||c===void 0?void 0:c.arrayValue,v=_e(((u=m?.values)===null||u===void 0?void 0:u.length)||0,((h=y?.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:bg(m,y)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Rr.mapValue&&o===Rr.mapValue)return 0;if(i===Rr.mapValue)return 1;if(o===Rr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=_e(c[f],h[f]);if(p!==0)return p;const m=Fr(a[c[f]],u[h[f]]);if(m!==0)return m}return _e(c.length,h.length)})(t.mapValue,e.mapValue);default:throw ne()}}function Ig(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=rr(t),r=rr(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function bg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Fr(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function Di(t){return xh(t)}function xh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=rr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Mr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Y.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=xh(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${xh(n.fields[o])}`;return s+"}"})(t.mapValue):ne()}function As(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dh(t){return!!t&&"integerValue"in t}function oa(t){return!!t&&"arrayValue"in t}function Ag(t){return!!t&&"nullValue"in t}function Rg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vc(t){return!!t&&"mapValue"in t}function Sl(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Bo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ls(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Bo(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const nE={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function sV(t){return"nullValue"in t?yc:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?As(Lr.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Sl(t)?nE:{mapValue:{}}:ne()}function iV(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?As(Lr.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?nE:"mapValue"in t?Sl(t)?{mapValue:{}}:Rr:ne()}function Sg(t,e){const n=Fr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Pg(t,e){const n=Fr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bo(n)}setAll(e){let n=He.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Bo(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];vc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ls(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new It(Bo(this.value))}}function rE(t){const e=[];return Ls(t.fields,((n,r)=>{const s=new He([n]);if(vc(r)){const i=rE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qe(e,0,ue.min(),ue.min(),ue.min(),It.empty(),0)}static newFoundDocument(e,n,r,s){return new qe(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new qe(e,2,n,ue.min(),ue.min(),It.empty(),0)}static newUnknownDocument(e,n){return new qe(e,3,n,ue.min(),ue.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){this.position=e,this.inclusive=n}}function Cg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Fr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function xg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n="asc"){this.field=e,this.dir=n}}function oV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{}class Te extends sE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aV(e,n,r):n==="array-contains"?new uV(e,r):n==="in"?new uE(e,r):n==="not-in"?new hV(e,r):n==="array-contains-any"?new fV(e,r):new Te(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cV(e,r):new lV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fr(n,this.value)):n!==null&&bs(this.value)===bs(n)&&this.matchesComparison(Fr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ve extends sE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ve(e,n)}matches(e){return Vi(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vi(t){return t.op==="and"}function Vh(t){return t.op==="or"}function Wf(t){return iE(t)&&Vi(t)}function iE(t){for(const e of t.filters)if(e instanceof Ve)return!1;return!0}function Nh(t){if(t instanceof Te)return t.field.canonicalString()+t.op.toString()+Di(t.value);if(Wf(t))return t.filters.map((e=>Nh(e))).join(",");{const e=t.filters.map((n=>Nh(n))).join(",");return`${t.op}(${e})`}}function oE(t,e){return t instanceof Te?(function(r,s){return s instanceof Te&&r.op===s.op&&r.field.isEqual(s.field)&&Mn(r.value,s.value)})(t,e):t instanceof Ve?(function(r,s){return s instanceof Ve&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&oE(o,s.filters[a])),!0):!1})(t,e):void ne()}function aE(t,e){const n=t.filters.concat(e);return Ve.create(n,t.op)}function cE(t){return t instanceof Te?(function(n){return`${n.field.canonicalString()} ${n.op} ${Di(n.value)}`})(t):t instanceof Ve?(function(n){return n.op.toString()+" {"+n.getFilters().map(cE).join(" ,")+"}"})(t):"Filter"}class aV extends Te{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class cV extends Te{constructor(e,n){super(e,"in",n),this.keys=lE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class lV extends Te{constructor(e,n){super(e,"not-in",n),this.keys=lE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function lE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>Y.fromName(r.referenceValue)))}class uV extends Te{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oa(n)&&ia(n.arrayValue,this.value)}}class uE extends Te{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ia(this.value.arrayValue,n)}}class hV extends Te{constructor(e,n){super(e,"not-in",n)}matches(e){if(ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ia(this.value.arrayValue,n)}}class fV extends Te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oa(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ia(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function kh(t,e=null,n=[],r=[],s=null,i=null,o=null){return new dV(t,e,n,r,s,i,o)}function Rs(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Nh(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Ea(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Di(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Di(r))).join(",")),e.ue=n}return e.ue}function Ta(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xg(t.startAt,e.startAt)&&xg(t.endAt,e.endAt)}function Jc(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Yc(t,e){return t.filters.filter((n=>n instanceof Te&&n.field.isEqual(e)))}function Dg(t,e,n){let r=yc,s=!0;for(const i of Yc(t,e)){let o=yc,a=!0;switch(i.op){case"<":case"<=":o=sV(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=yc}Sg({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Sg({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Vg(t,e,n){let r=Rr,s=!0;for(const i of Yc(t,e)){let o=Rr,a=!0;switch(i.op){case">=":case">":o=iV(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Rr}Pg({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Pg({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hE(t,e,n,r,s,i,o,a){return new ar(t,e,n,r,s,i,o,a)}function Wi(t){return new ar(t)}function Ng(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Qf(t){return t.collectionGroup!==null}function yi(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Oe(He.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new aa(i,r))})),n.has(He.keyField().canonicalString())||e.ce.push(new aa(He.keyField(),r))}return e.ce}function qt(t){const e=X(t);return e.le||(e.le=pV(e,yi(t))),e.le}function pV(t,e){if(t.limitType==="F")return kh(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new aa(s.field,i)}));const n=t.endAt?new Br(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Br(t.startAt.position,t.startAt.inclusive):null;return kh(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Oh(t,e){const n=t.filters.concat([e]);return new ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xc(t,e,n){return new ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ia(t,e){return Ta(qt(t),qt(e))&&t.limitType===e.limitType}function fE(t){return`${Rs(qt(t))}|lt:${t.limitType}`}function ii(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>cE(s))).join(", ")}]`),Ea(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Di(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Di(s))).join(",")),`Target(${r})`})(qt(t))}; limitType=${t.limitType})`}function ba(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of yi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,c){const u=Cg(o,a,c);return o.inclusive?u<=0:u<0})(r.startAt,yi(r),s)||r.endAt&&!(function(o,a,c){const u=Cg(o,a,c);return o.inclusive?u>=0:u>0})(r.endAt,yi(r),s))})(t,e)}function dE(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pE(t){return(e,n)=>{let r=!1;for(const s of yi(t)){const i=mV(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function mV(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):(function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?Fr(c,u):ne()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return Zw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=new Ue(Y.comparator);function Xt(){return gV}const mE=new Ue(Y.comparator);function Co(...t){let e=mE;for(const n of t)e=e.insert(n.key,n);return e}function gE(t){let e=mE;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Dn(){return Uo()}function _E(){return Uo()}function Uo(){return new Kr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const _V=new Ue(Y.comparator),yV=new Oe(Y.comparator);function ve(...t){let e=yV;for(const n of t)e=e.add(n);return e}const vV=new Oe(_e);function Jf(){return vV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ra(e)?"-0":e}}function yE(t){return{integerValue:""+t}}function vE(t,e){return Ww(e)?yE(e):Yf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this._=void 0}}function wV(t,e,n){return t instanceof Ni?(function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rl(i)&&(i=zf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}})(n,e):t instanceof Ss?EE(t,e):t instanceof Ps?TE(t,e):(function(s,i){const o=wE(s,i),a=kg(o)+kg(s.Pe);return Dh(o)&&Dh(s.Pe)?yE(a):Yf(s.serializer,a)})(t,e)}function EV(t,e,n){return t instanceof Ss?EE(t,e):t instanceof Ps?TE(t,e):n}function wE(t,e){return t instanceof ki?(function(r){return Dh(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Ni extends Pl{}class Ss extends Pl{constructor(e){super(),this.elements=e}}function EE(t,e){const n=IE(e);for(const r of t.elements)n.some((s=>Mn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ps extends Pl{constructor(e){super(),this.elements=e}}function TE(t,e){let n=IE(e);for(const r of t.elements)n=n.filter((s=>!Mn(s,r)));return{arrayValue:{values:n}}}class ki extends Pl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function kg(t){return Ge(t.integerValue||t.doubleValue)}function IE(t){return oa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.field=e,this.transform=n}}function TV(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Ss&&s instanceof Ss||r instanceof Ps&&s instanceof Ps?xi(r.elements,s.elements,Mn):r instanceof ki&&s instanceof ki?Mn(r.Pe,s.Pe):r instanceof Ni&&s instanceof Ni})(t.transform,e.transform)}class IV{constructor(e,n){this.version=e,this.transformResults=n}}class Ke{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ke}static exists(e){return new Ke(void 0,e)}static updateTime(e){return new Ke(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cl{}function bE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ji(t.key,Ke.none()):new Qi(t.key,t.data,Ke.none());{const n=t.data,r=It.empty();let s=new Oe(He.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new cr(t.key,r,new Yt(s.toArray()),Ke.none())}}function bV(t,e,n){t instanceof Qi?(function(s,i,o){const a=s.value.clone(),c=Mg(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof cr?(function(s,i,o){if(!wc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Mg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(AE(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function jo(t,e,n,r){return t instanceof Qi?(function(i,o,a,c){if(!wc(i.precondition,o))return a;const u=i.value.clone(),h=Lg(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof cr?(function(i,o,a,c){if(!wc(i.precondition,o))return a;const u=Lg(i.fieldTransforms,c,o),h=o.data;return h.setAll(AE(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(t,e,n,r):(function(i,o,a){return wc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function AV(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=wE(r.transform,s||null);i!=null&&(n===null&&(n=It.empty()),n.set(r.field,i))}return n||null}function Og(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xi(r,s,((i,o)=>TV(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qi extends Cl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class cr extends Cl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function AE(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Mg(t,e,n){const r=new Map;ae(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,EV(o,a,n[s]))}return r}function Lg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,wV(i,o,e))}return r}class Ji extends Cl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xf extends Cl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&bV(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_E();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=bE(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ue.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ve())}isEqual(e){return this.batchId===e.batchId&&xi(this.mutations,e.mutations,((n,r)=>Og(n,r)))&&xi(this.baseMutations,e.baseMutations,((n,r)=>Og(n,r)))}}class ed{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ae(e.mutations.length===r.length);let s=(function(){return _V})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ed(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,be;function RE(t){switch(t){default:return ne();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function SE(t){if(t===void 0)return nt("GRPC error has no .code"),F.UNKNOWN;switch(t){case it.OK:return F.OK;case it.CANCELLED:return F.CANCELLED;case it.UNKNOWN:return F.UNKNOWN;case it.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case it.INTERNAL:return F.INTERNAL;case it.UNAVAILABLE:return F.UNAVAILABLE;case it.UNAUTHENTICATED:return F.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case it.NOT_FOUND:return F.NOT_FOUND;case it.ALREADY_EXISTS:return F.ALREADY_EXISTS;case it.PERMISSION_DENIED:return F.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case it.ABORTED:return F.ABORTED;case it.OUT_OF_RANGE:return F.OUT_OF_RANGE;case it.UNIMPLEMENTED:return F.UNIMPLEMENTED;case it.DATA_LOSS:return F.DATA_LOSS;default:return ne()}}(be=it||(it={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=new ws([4294967295,4294967295],0);function Fg(t){const e=PE().encode(t),n=new kw;return n.update(e),new Uint8Array(n.digest())}function Bg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ws([n,r],0),new ws([s,i],0)]}class nd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xo(`Invalid padding: ${n}`);if(r<0)throw new xo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ws.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ws.fromNumber(r)));return s.compare(SV)===1&&(s=new ws([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Fg(e),[r,s]=Bg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new nd(i,s,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.Ie===0)return;const n=Fg(e),[r,s]=Bg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ra(ue.min(),s,new Ue(_e),Xt(),ve())}}class Sa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sa(r,n,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class CE{constructor(e,n){this.targetId=e,this.me=n}}class xE{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ug{constructor(){this.fe=0,this.ge=$g(),this.pe=tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),n=ve(),r=ve();return this.ge.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne()}})),new Sa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=$g()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class PV{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xt(),this.qe=jg(),this.Qe=new Ue(_e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,s)=>{this.ze(s)&&n(s)}))}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Jc(i))if(r===0){const o=new Y(i.path);this.Ue(n,o,qe.newNoDocument(o,ue.min()))}else ae(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Mr(r).toUint8Array()}catch(c){if(c instanceof eE)return On("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new nd(o,s,i)}catch(c){return On(c instanceof xo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)})),s}rt(e){const n=new Map;this.Be.forEach(((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Jc(a.target)){const c=new Y(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,qe.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}}));let r=ve();this.qe.forEach(((i,o)=>{let a=!0;o.forEachWhile((c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.ke.forEach(((i,o)=>o.setReadTime(e)));const s=new Ra(e,n,this.Qe,this.ke,r);return this.ke=Xt(),this.qe=jg(),this.Qe=new Ue(_e),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ug,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Oe(_e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ug),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function jg(){return new Ue(Y.comparator)}function $g(){return new Ue(Y.comparator)}const CV={asc:"ASCENDING",desc:"DESCENDING"},xV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DV={and:"AND",or:"OR"};class VV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mh(t,e){return t.useProto3Json||Ea(e)?e:{value:e}}function Oi(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NV(t,e){return Oi(t,e.toTimestamp())}function rt(t){return ae(!!t),ue.fromTimestamp((function(n){const r=rr(n);return new ze(r.seconds,r.nanos)})(t))}function rd(t,e){return Lh(t,e).canonicalString()}function Lh(t,e){const n=(function(s){return new Ee(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function VE(t){const e=Ee.fromString(t);return ae($E(e)),e}function ca(t,e){return rd(t.databaseId,e.path)}function kn(t,e){const n=VE(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(OE(n))}function NE(t,e){return rd(t.databaseId,e)}function kE(t){const e=VE(t);return e.length===4?Ee.emptyPath():OE(e)}function Fh(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OE(t){return ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qg(t,e,n){return{name:ca(t,e),fields:n.value.mapValue.fields}}function ME(t,e,n){const r=kn(t,e.name),s=rt(e.updateTime),i=e.createTime?rt(e.createTime):ue.min(),o=new It({mapValue:{fields:e.fields}}),a=qe.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function kV(t,e){return"found"in e?(function(r,s){ae(!!s.found),s.found.name,s.found.updateTime;const i=kn(r,s.found.name),o=rt(s.found.updateTime),a=s.found.createTime?rt(s.found.createTime):ue.min(),c=new It({mapValue:{fields:s.found.fields}});return qe.newFoundDocument(i,o,a,c)})(t,e):"missing"in e?(function(r,s){ae(!!s.missing),ae(!!s.readTime);const i=kn(r,s.missing),o=rt(s.readTime);return qe.newNoDocument(i,o)})(t,e):ne()}function OV(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(ae(h===void 0||typeof h=="string"),tt.fromBase64String(h||"")):(ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array),tt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?F.UNKNOWN:SE(u.code);return new q(h,u.message||"")})(o);n=new xE(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=kn(t,r.document.name),i=rt(r.document.updateTime),o=r.document.createTime?rt(r.document.createTime):ue.min(),a=new It({mapValue:{fields:r.document.fields}}),c=qe.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Ec(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=kn(t,r.document),i=r.readTime?rt(r.readTime):ue.min(),o=qe.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ec([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=kn(t,r.document),i=r.removedTargetIds||[];n=new Ec([],i,s,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new RV(s,i),a=r.targetId;n=new CE(a,o)}}return n}function la(t,e){let n;if(e instanceof Qi)n={update:qg(t,e.key,e.value)};else if(e instanceof Ji)n={delete:ca(t,e.key)};else if(e instanceof cr)n={update:qg(t,e.key,e.data),updateMask:jV(e.fieldMask)};else{if(!(e instanceof Xf))return ne();n={verify:ca(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof Ni)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ss)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ps)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ki)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ne()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:NV(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne()})(t,e.precondition)),n}function Bh(t,e){const n=e.currentDocument?(function(i){return i.updateTime!==void 0?Ke.updateTime(rt(i.updateTime)):i.exists!==void 0?Ke.exists(i.exists):Ke.none()})(e.currentDocument):Ke.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(o,a){let c=null;if("setToServerValue"in a)ae(a.setToServerValue==="REQUEST_TIME"),c=new Ni;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new Ss(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new Ps(h)}else"increment"in a?c=new ki(o,a.increment):ne();const u=He.fromServerFormat(a.fieldPath);return new Aa(u,c)})(t,s))):[];if(e.update){e.update.name;const s=kn(t,e.update.name),i=new It({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(c){const u=c.fieldPaths||[];return new Yt(u.map((h=>He.fromServerFormat(h))))})(e.updateMask);return new cr(s,i,o,n,r)}return new Qi(s,i,n,r)}if(e.delete){const s=kn(t,e.delete);return new Ji(s,n)}if(e.verify){const s=kn(t,e.verify);return new Xf(s,n)}return ne()}function MV(t,e){return t&&t.length>0?(ae(e!==void 0),t.map((n=>(function(s,i){let o=s.updateTime?rt(s.updateTime):rt(i);return o.isEqual(ue.min())&&(o=rt(i)),new IV(o,s.transformResults||[])})(n,e)))):[]}function LE(t,e){return{documents:[NE(t,e.path)]}}function FE(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NE(t,s);const i=(function(u){if(u.length!==0)return jE(Ve.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:oi(p.field),direction:FV(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Mh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{_t:n,parent:s}}function BE(t){let e=kE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ae(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(f){const p=UE(f);return p instanceof Ve&&Wf(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(f){return f.map((p=>(function(y){return new aa(ai(y.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(y.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,Ea(p)?null:p})(n.limit));let c=null;n.startAt&&(c=(function(f){const p=!!f.before,m=f.values||[];return new Br(m,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(f){const p=!f.before,m=f.values||[];return new Br(m,p)})(n.endAt)),hE(e,s,o,i,a,"F",c,u)}function LV(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ai(n.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ai(n.unaryFilter.field);return Te.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ai(n.unaryFilter.field);return Te.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ai(n.unaryFilter.field);return Te.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}})(t):t.fieldFilter!==void 0?(function(n){return Te.create(ai(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ve.create(n.compositeFilter.filters.map((r=>UE(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne()}})(n.compositeFilter.op))})(t):ne()}function FV(t){return CV[t]}function BV(t){return xV[t]}function UV(t){return DV[t]}function oi(t){return{fieldPath:t.canonicalString()}}function ai(t){return He.fromServerFormat(t.fieldPath)}function jE(t){return t instanceof Te?(function(n){if(n.op==="=="){if(Rg(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NAN"}};if(Ag(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rg(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NAN"}};if(Ag(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oi(n.field),op:BV(n.op),value:n.value}}})(t):t instanceof Ve?(function(n){const r=n.getFilters().map((s=>jE(s)));return r.length===1?r[0]:{compositeFilter:{op:UV(n.op),filters:r}}})(t):ne()}function jV(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function $E(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.ct=e}}function $V(t,e){let n;if(e.document)n=ME(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Y.fromSegments(e.noDocument.path),s=xs(e.noDocument.readTime);n=qe.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne();{const r=Y.fromSegments(e.unknownDocument.path),s=xs(e.unknownDocument.version);n=qe.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime((function(s){const i=new ze(s[0],s[1]);return ue.fromTimestamp(i)})(e.readTime)),n}function Gg(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Zc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,o){return{name:ca(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Oi(i,o.version.toTimestamp()),createTime:Oi(i,o.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Cs(e.version)};else{if(!e.isUnknownDocument())return ne();r.unknownDocument={path:n.path.toArray(),version:Cs(e.version)}}return r}function Zc(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Cs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xs(t){const e=new ze(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function cs(t,e){const n=(e.baseMutations||[]).map((i=>Bh(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>Bh(t.ct,i))),s=ze.fromMillis(e.localWriteTimeMs);return new Zf(e.batchId,s,n,r)}function Do(t){const e=xs(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?xs(t.lastLimboFreeSnapshotVersion):ue.min();let r;return r=(function(i){return i.documents!==void 0})(t.query)?(function(i){return ae(i.documents.length===1),qt(Wi(kE(i.documents[0])))})(t.query):(function(i){return qt(BE(i))})(t.query),new Qn(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,tt.fromBase64String(t.resumeToken))}function GE(t,e){const n=Cs(e.snapshotVersion),r=Cs(e.lastLimboFreeSnapshotVersion);let s;s=Jc(e.target)?LE(t.ct,e.target):FE(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Rs(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function sd(t){const e=BE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xc(e,e.limit,"L"):e}function Fu(t,e){return new td(e.largestBatchId,Bh(t.ct,e.overlayMutation))}function Hg(t,e){const n=e.path.lastSegment();return[t,$t(e.path.popLast()),n]}function Kg(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Cs(r.readTime),documentKey:$t(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{getBundleMetadata(e,n){return zg(e).get(n).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:xs(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,n){return zg(e).put((function(s){return{bundleId:s.id,createTime:Cs(rt(s.createTime)),version:s.version}})(n))}getNamedQuery(e,n){return Wg(e).get(n).next((r=>{if(r)return(function(i){return{name:i.name,query:sd(i.bundledQuery),readTime:xs(i.readTime)}})(r)}))}saveNamedQuery(e,n){return Wg(e).put((function(s){return{name:s.name,readTime:Cs(rt(s.readTime)),bundledQuery:s.bundledQuery}})(n))}}function zg(t){return ht(t,"bundles")}function Wg(t){return ht(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new xl(e,r)}getOverlay(e,n){return wo(e).get(Hg(this.userId,n)).next((r=>r?Fu(this.serializer,r):null))}getOverlays(e,n){const r=Dn();return M.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){const s=[];return r.forEach(((i,o)=>{const a=new td(n,o);s.push(this.ht(e,a))})),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach((o=>s.add($t(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(wo(e).j("collectionPathOverlayIndex",a))})),M.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Dn(),i=$t(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return wo(e).U("collectionPathOverlayIndex",o).next((a=>{for(const c of a){const u=Fu(this.serializer,c);s.set(u.getKey(),u)}return s}))}getOverlaysForCollectionGroup(e,n,r,s){const i=Dn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return wo(e).J({index:"collectionGroupOverlayIndex",range:a},((c,u,h)=>{const f=Fu(this.serializer,u);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()})).next((()=>i))}ht(e,n){return wo(e).put((function(s,i,o){const[a,c,u]=Hg(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:la(s.ct,o.mutation)}})(this.serializer,this.userId,n))}}function wo(t){return ht(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{Pt(e){return ht(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((n=>{const r=n?.value;return r?tt.fromUint8Array(r):tt.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ge(e.integerValue));else if("doubleValue"in e){const r=Ge(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),ra(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=rr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Mr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?tE(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Sl(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ne()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(Ge(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),Y.fromName(e).path.forEach((r=>{this.dt(n,60),this.Dt(r,n)}))}dt(e,n){e.At(n)}ft(e){e.At(2)}}ls.vt=new ls;function HV(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function Qg(t){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=HV(255&r[i]);if(s+=o,o!==8)break}return s})(t);return Math.ceil(e/8)}class KV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=Qg(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=Qg(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class zV{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class WV{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Eo{constructor(){this.jt=new KV,this.Ht=new zV(this.jt),this.Jt=new WV(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new us(this.indexId,this.documentKey,this.arrayValue,r)}}function _r(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Jg(t.arrayValue,e.arrayValue),n!==0?n:(n=Jg(t.directionalValue,e.directionalValue),n!==0?n:Y.comparator(t.documentKey,e.documentKey)))}function Jg(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){this.Xt=new Oe(((n,r)=>He.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ae(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Ph(e);if(n!==void 0&&!this.sn(n))return!1;const r=os(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Oe(He.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new gc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new gc(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new gc(r.field,r.dir==="asc"?0:1)));return new Qc(Qc.UNKNOWN_ID,this.collectionId,n,na.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){var e,n;if(ae(t instanceof Te||t instanceof Ve),t instanceof Te){if(t instanceof uE){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map((i=>Te.create(t.field,"==",i))))||[];return Ve.create(s,"or")}return t}const r=t.filters.map((s=>HE(s)));return Ve.create(r,t.op)}function QV(t){if(t.getFilters().length===0)return[];const e=$h(HE(t));return ae(KE(e)),Uh(e)||jh(e)?[e]:e.getFilters()}function Uh(t){return t instanceof Te}function jh(t){return t instanceof Ve&&Wf(t)}function KE(t){return Uh(t)||jh(t)||(function(n){if(n instanceof Ve&&Vh(n)){for(const r of n.getFilters())if(!Uh(r)&&!jh(r))return!1;return!0}return!1})(t)}function $h(t){if(ae(t instanceof Te||t instanceof Ve),t instanceof Te)return t;if(t.filters.length===1)return $h(t.filters[0]);const e=t.filters.map((r=>$h(r)));let n=Ve.create(e,t.op);return n=el(n),KE(n)?n:(ae(n instanceof Ve),ae(Vi(n)),ae(n.filters.length>1),n.filters.reduce(((r,s)=>id(r,s))))}function id(t,e){let n;return ae(t instanceof Te||t instanceof Ve),ae(e instanceof Te||e instanceof Ve),n=t instanceof Te?e instanceof Te?(function(s,i){return Ve.create([s,i],"and")})(t,e):Xg(t,e):e instanceof Te?Xg(e,t):(function(s,i){if(ae(s.filters.length>0&&i.filters.length>0),Vi(s)&&Vi(i))return aE(s,i.getFilters());const o=Vh(s)?s:i,a=Vh(s)?i:s,c=o.filters.map((u=>id(u,a)));return Ve.create(c,"or")})(t,e),el(n)}function Xg(t,e){if(Vi(e))return aE(e,t.getFilters());{const n=e.filters.map((r=>id(t,r)));return Ve.create(n,"or")}}function el(t){if(ae(t instanceof Te||t instanceof Ve),t instanceof Te)return t;const e=t.getFilters();if(e.length===1)return el(e[0]);if(iE(t))return t;const n=e.map((s=>el(s))),r=[];return n.forEach((s=>{s instanceof Te?r.push(s):s instanceof Ve&&(s.op===t.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Ve.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this.un=new od}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(on.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(on.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class od{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Oe(Ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Oe(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Uint8Array(0);class YV{constructor(e,n){this.databaseId=n,this.cn=new od,this.ln=new Kr((r=>Rs(r)),((r,s)=>Ta(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener((()=>{this.cn.add(n)}));const i={collectionId:r,parent:$t(s)};return Zg(e).put(i)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[$w(n),""],!1,!0);return Zg(e).U(s).next((i=>{for(const o of i){if(o.collectionId!==n)break;r.push(xn(o.parent))}return r}))}addFieldIndex(e,n){const r=To(e),s=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ei(e);return i.next((a=>{o.put(Kg(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return i.next()}deleteFieldIndex(e,n){const r=To(e),s=ei(e),i=Zs(e);return r.delete(n.indexId).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=To(e),r=Zs(e),s=ei(e);return n.j().next((()=>r.j())).next((()=>s.j()))}createTargetIndexes(e,n){return M.forEach(this.hn(n),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new Yg(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,n){const r=Zs(e);let s=!0;const i=new Map;return M.forEach(this.hn(n),(o=>this.Pn(e,o).next((a=>{s&&(s=!!a),i.set(o,a)})))).next((()=>{if(s){let o=ve();const a=[];return M.forEach(i,((c,u)=>{G("IndexedDbIndexManager",`Using index ${(function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map((C=>`${C.fieldPath}:${C.kind}`)).join(",")}`})(c)} to execute ${Rs(n)}`);const h=(function(w,C){const k=Ph(C);if(k===void 0)return null;for(const B of Yc(w,k.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null})(u,c),f=(function(w,C){const k=new Map;for(const B of os(C))for(const A of Yc(w,B.fieldPath))switch(A.op){case"==":case"in":k.set(B.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return k.set(B.fieldPath.canonicalString(),A.value),Array.from(k.values())}return null})(u,c),p=(function(w,C){const k=[];let B=!0;for(const A of os(C)){const T=A.kind===0?Dg(w,A.fieldPath,w.startAt):Vg(w,A.fieldPath,w.startAt);k.push(T.value),B&&(B=T.inclusive)}return new Br(k,B)})(u,c),m=(function(w,C){const k=[];let B=!0;for(const A of os(C)){const T=A.kind===0?Vg(w,A.fieldPath,w.endAt):Dg(w,A.fieldPath,w.endAt);k.push(T.value),B&&(B=T.inclusive)}return new Br(k,B)})(u,c),y=this.In(c,u,p),v=this.In(c,u,m),P=this.Tn(c,u,f),N=this.En(c.indexId,h,y,p.inclusive,v,m.inclusive,P);return M.forEach(N,(V=>r.G(V,n.limit).next((w=>{w.forEach((C=>{const k=Y.fromSegments(C.documentKey);o.has(k)||(o=o.add(k),a.push(k))}))}))))})).next((()=>a))}return M.resolve(null)}))}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=QV(Ve.create(e.filters,"and")).map((r=>kh(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),u=c/(n!=null?n.length:1),h=[];for(let f=0;f<c;++f){const p=n?this.dn(n[f/u]):oc,m=this.An(e,p,r[f%u],s),y=this.Rn(e,p,i[f%u],o),v=a.map((P=>this.An(e,p,P,!0)));h.push(...this.createRange(m,y,v))}return h}An(e,n,r,s){const i=new us(e,Y.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new us(e,Y.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new Yg(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const s=this.hn(n);return M.forEach(s,(i=>this.Pn(e,i).next((o=>{o?r!==0&&o.fields.length<(function(c){let u=new Oe(He.comparator),h=!1;for(const f of c.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&s.length>1&&r===2?1:r))}Vn(e,n){const r=new Eo;for(const s of os(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);ls.vt.It(i,o)}return r.zt()}dn(e){const n=new Eo;return ls.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Eo;return ls.vt.It(As(this.databaseId,n),r.Yt((function(i){const o=os(i);return o.length===0?0:o[o.length-1].kind})(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new Eo);let i=0;for(const o of os(e)){const a=r[i++];for(const c of s)if(this.fn(n,o.fieldPath)&&oa(a))s=this.gn(s,o,a);else{const u=c.Yt(o.kind);ls.vt.It(a,u)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new Eo;c.seed(a.zt()),ls.vt.It(o,c.Yt(n.kind)),i.push(c)}return i}fn(e,n){return!!e.filters.find((r=>r instanceof Te&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=To(e),s=ei(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next((i=>{const o=[];return M.forEach(i,(a=>s.get([a.indexId,this.uid]).next((c=>{o.push((function(h,f){const p=f?new na(f.sequenceNumber,new on(xs(f.readTime),new Y(xn(f.documentKey)),f.largestBatchId)):na.empty(),m=h.fields.map((([y,v])=>new gc(He.fromServerFormat(y),v)));return new Qc(h.indexId,h.collectionGroup,m,p)})(a,c))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:_e(r.collectionGroup,s.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const s=To(e),i=ei(e);return this.yn(e).next((o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next((a=>M.forEach(a,(c=>i.put(Kg(c.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,((s,i)=>{const o=r.get(s.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((a=>(r.set(s.collectionGroup,a),M.forEach(a,(c=>this.wn(e,s,c).next((u=>{const h=this.Sn(i,c);return u.isEqual(h)?M.resolve():this.bn(e,i,c,u,h)})))))))}))}Dn(e,n,r,s){return Zs(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return Zs(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=Zs(e);let i=new Oe(_r);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},((o,a)=>{i=i.add(new us(r.indexId,n,a.arrayValue,a.directionalValue))})).next((()=>i))}Sn(e,n){let r=new Oe(_r);const s=this.Vn(n,e);if(s==null)return r;const i=Ph(n);if(i!=null){const o=e.data.field(i.fieldPath);if(oa(o))for(const a of o.arrayValue.values||[])r=r.add(new us(n.indexId,e.key,this.dn(a),s))}else r=r.add(new us(n.indexId,e.key,oc,s));return r}bn(e,n,r,s,i){G("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return(function(c,u,h,f,p){const m=c.getIterator(),y=u.getIterator();let v=Xs(m),P=Xs(y);for(;v||P;){let N=!1,V=!1;if(v&&P){const w=h(v,P);w<0?V=!0:w>0&&(N=!0)}else v!=null?V=!0:N=!0;N?(f(P),P=Xs(y)):V?(p(v),v=Xs(m)):(v=Xs(m),P=Xs(y))}})(s,i,_r,(a=>{o.push(this.Dn(e,n,r,a))}),(a=>{o.push(this.vn(e,n,r,a))})),M.waitFor(o)}yn(e){let n=1;return ei(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),n=s.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>_r(o,a))).filter(((o,a,c)=>!a||_r(o,c[a-1])!==0));const s=[];s.push(e);for(const o of r){const a=_r(o,e),c=_r(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&c<0)s.push(o),s.push(o.Zt());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,oc,[]],c=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,oc,[]];i.push(IDBKeyRange.bound(a,c))}return i}Cn(e,n){return _r(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(e_)}getMinOffset(e,n){return M.mapArray(this.hn(n),(r=>this.Pn(e,r).next((s=>s||ne())))).next(e_)}}function Zg(t){return ht(t,"collectionParents")}function Zs(t){return ht(t,"indexEntries")}function To(t){return ht(t,"indexConfiguration")}function ei(t){return ht(t,"indexState")}function e_(t){ae(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Gf(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new on(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:o},((h,f,p)=>(a++,p.delete())));i.push(c.next((()=>{ae(a===1)})));const u=[];for(const h of n.mutations){const f=Qw(e,h.key.path,n.batchId);i.push(s.delete(f)),u.push(h.key)}return M.waitFor(i).next((()=>u))}function tl(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(41943040,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);class Dl{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){ae(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Dl(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yr(e).J({index:"userMutationsIndex",range:r},((s,i,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,s){const i=ci(e),o=yr(e);return o.add({}).next((a=>{ae(typeof a=="number");const c=new Zf(a,n,r,s),u=(function(m,y,v){const P=v.baseMutations.map((V=>la(m.ct,V))),N=v.mutations.map((V=>la(m.ct,V)));return{userId:y,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:P,mutations:N}})(this.serializer,this.userId,c),h=[];let f=new Oe(((p,m)=>_e(p.canonicalString(),m.canonicalString())));for(const p of s){const m=Qw(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(u)),h.push(i.put(m,LD))}return f.forEach((p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))})),e.addOnCommittedListener((()=>{this.Fn[a]=c.keys()})),M.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return yr(e).get(n).next((r=>r?(ae(r.userId===this.userId),cs(this.serializer,r)):null))}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return yr(e).J({index:"userMutationsIndex",range:s},((o,a,c)=>{a.userId===this.userId&&(ae(a.batchId>=r),i=cs(this.serializer,a)),c.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yr(e).J({index:"userMutationsIndex",range:n,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yr(e).U("userMutationsIndex",n).next((r=>r.map((s=>cs(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=_c(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return ci(e).J({range:s},((o,a,c)=>{const[u,h,f]=o,p=xn(h);if(u===this.userId&&n.path.isEqual(p))return yr(e).get(f).next((m=>{if(!m)throw ne();ae(m.userId===this.userId),i.push(cs(this.serializer,m))}));c.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(_e);const s=[];return n.forEach((i=>{const o=_c(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=ci(e).J({range:a},((u,h,f)=>{const[p,m,y]=u,v=xn(m);p===this.userId&&i.path.isEqual(v)?r=r.add(y):f.done()}));s.push(c)})),M.waitFor(s).next((()=>this.xn(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=_c(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Oe(_e);return ci(e).J({range:o},((c,u,h)=>{const[f,p,m]=c,y=xn(p);f===this.userId&&r.isPrefixOf(y)?y.length===s&&(a=a.add(m)):h.done()})).next((()=>this.xn(e,a)))}xn(e,n){const r=[],s=[];return n.forEach((i=>{s.push(yr(e).get(i).next((o=>{if(o===null)throw ne();ae(o.userId===this.userId),r.push(cs(this.serializer,o))})))})),M.waitFor(s).next((()=>r))}removeMutationBatch(e,n){return zE(e._e,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.On(n.batchId)})),M.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return ci(e).J({range:r},((i,o,a)=>{if(i[0]===this.userId){const c=xn(i[1]);s.push(c)}else a.done()})).next((()=>{ae(s.length===0)}))}))}containsKey(e,n){return WE(e,this.userId,n)}Nn(e){return QE(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function WE(t,e,n){const r=_c(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return ci(t).J({range:i,H:!0},((a,c,u)=>{const[h,f,p]=a;h===e&&f===s&&(o=!0),u.done()})).next((()=>o))}function yr(t){return ht(t,"mutations")}function ci(t){return ht(t,"documentMutations")}function QE(t){return ht(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ds(0)}static kn(){return new Ds(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next((n=>{const r=new Ds(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((n=>ue.fromTimestamp(new ze(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.qn(e).next((s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s))))}addTargetData(e,n){return this.Kn(e,n).next((()=>this.qn(e).next((r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>ti(e).delete(n.targetId))).next((()=>this.qn(e))).next((r=>(ae(r.targetCount>0),r.targetCount-=1,this.Qn(e,r))))}removeTargets(e,n,r){let s=0;const i=[];return ti(e).J(((o,a)=>{const c=Do(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))})).next((()=>M.waitFor(i))).next((()=>s))}forEachTarget(e,n){return ti(e).J(((r,s)=>{const i=Do(s);n(i)}))}qn(e){return n_(e).get("targetGlobalKey").next((n=>(ae(n!==null),n)))}Qn(e,n){return n_(e).put("targetGlobalKey",n)}Kn(e,n){return ti(e).put(GE(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Rs(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return ti(e).J({range:s,index:"queryTargetsIndex"},((o,a,c)=>{const u=Do(a);Ta(n,u.target)&&(i=u,c.done())})).next((()=>i))}addMatchingKeys(e,n,r){const s=[],i=Ir(e);return n.forEach((o=>{const a=$t(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))})),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=Ir(e);return M.forEach(n,(i=>{const o=$t(i.path);return M.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,n){const r=Ir(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Ir(e);let i=ve();return s.J({range:r,H:!0},((o,a,c)=>{const u=xn(o[1]),h=new Y(u);i=i.add(h)})).next((()=>i))}containsKey(e,n){const r=$t(n.path),s=IDBKeyRange.bound([r],[$w(r)],!1,!0);let i=0;return Ir(e).J({index:"documentTargetsIndex",H:!0,range:s},(([o,a],c,u)=>{o!==0&&(i++,u.done())})).next((()=>i>0))}ot(e,n){return ti(e).get(n).next((r=>r?Do(r):null))}}function ti(t){return ht(t,"targets")}function n_(t){return ht(t,"targetGlobal")}function Ir(t){return ht(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_([t,e],[n,r]){const s=_e(t,n);return s===0?_e(e,r):s}class ZV{constructor(e){this.Un=e,this.buffer=new Oe(r_),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();r_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){G("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hr(n)?G("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Gr(n)}await this.Hn(3e5)}))}}class tN{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Jt.oe);const r=new ZV(n);return this.Jn.forEachTarget(e,(s=>r.zn(s.sequenceNumber))).next((()=>this.Jn.Zn(e,(s=>r.zn(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(t_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t_):this.Xn(e,n)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s)))).next((f=>(r=f,a=Date.now(),this.removeTargets(e,r,n)))).next((f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(u=Date.now(),si()<=Ie.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f}))))}}function nN(t,e){return new tN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n){this.db=e,this.garbageCollector=nN(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}er(e){let n=0;return this.Zn(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,((r,s)=>n(s)))}addReference(e,n,r){return ac(e,r)}removeReference(e,n,r){return ac(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ac(e,n)}nr(e,n){return(function(s,i){let o=!1;return QE(s).Y((a=>WE(s,a,i).next((c=>(c&&(o=!0),M.resolve(!c)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,((o,a)=>{if(a<=n){const c=this.nr(e,o).next((u=>{if(!u)return i++,r.getEntry(e,o).next((()=>(r.removeEntry(o,ue.min()),Ir(e).delete((function(f){return[0,$t(f.path)]})(o)))))}));s.push(c)}})).next((()=>M.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ac(e,n)}tr(e,n){const r=Ir(e);let s,i=Jt.oe;return r.J({index:"documentTargetsIndex"},(([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==Jt.oe&&n(new Y(xn(s)),i),i=u,s=c):i=Jt.oe})).next((()=>{i!==Jt.oe&&n(new Y(xn(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ac(t,e){return Ir(t).put((function(r,s){return{targetId:0,path:$t(r.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.changes=new Kr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ns(e).put(r)}removeEntry(e,n,r){return ns(e).delete((function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Zc(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.rr(e,r))))}getEntry(e,n){let r=qe.newInvalidDocument(n);return ns(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Io(n))},((s,i)=>{r=this.ir(n,i)})).next((()=>r))}sr(e,n){let r={size:0,document:qe.newInvalidDocument(n)};return ns(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Io(n))},((s,i)=>{r={document:this.ir(n,i),size:tl(i)}})).next((()=>r))}getEntries(e,n){let r=Xt();return this._r(e,n,((s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)})).next((()=>r))}ar(e,n){let r=Xt(),s=new Ue(Y.comparator);return this._r(e,n,((i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,tl(o))})).next((()=>({documents:r,ur:s})))}_r(e,n,r){if(n.isEmpty())return M.resolve();let s=new Oe(o_);n.forEach((c=>s=s.add(c)));const i=IDBKeyRange.bound(Io(s.first()),Io(s.last())),o=s.getIterator();let a=o.getNext();return ns(e).J({index:"documentKeyIndex",range:i},((c,u,h)=>{const f=Y.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&o_(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.$(Io(a)):h.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Zc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ns(e).U(IDBKeyRange.bound(a,c,!0)).next((u=>{i?.incrementDocumentReadCount(u.length);let h=Xt();for(const f of u){const p=this.ir(Y.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(ba(n,p)||s.has(p.key))&&(h=h.insert(p.key,p))}return h}))}getAllFromCollectionGroup(e,n,r,s){let i=Xt();const o=i_(n,r),a=i_(n,on.max());return ns(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},((c,u,h)=>{const f=this.ir(Y.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===s&&h.done()})).next((()=>i))}newChangeBuffer(e){return new iN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return s_(e).get("remoteDocumentGlobalKey").next((n=>(ae(!!n),n)))}rr(e,n){return s_(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=$V(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return qe.newInvalidDocument(e)}}function YE(t){return new sN(t)}class iN extends JE{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Kr((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const n=[];let r=0,s=new Oe(((i,o)=>_e(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=Gg(this.cr.serializer,o);s=s.add(i.path.popLast());const u=tl(c);r+=u-a.size,n.push(this.cr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=Gg(this.cr.serializer,o.convertToNoDocument(ue.min()));n.push(this.cr.addEntry(e,i,c))}})),s.forEach((i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next((r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.cr.ar(e,n).next((({documents:r,ur:s})=>(s.forEach(((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function s_(t){return ht(t,"remoteDocumentGlobal")}function ns(t){return ht(t,"remoteDocumentsV14")}function Io(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function i_(t,e){const n=e.documentKey.path.toArray();return[t,Zc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function o_(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=_e(n[i],r[i]),s)return s;return s=_e(n.length,r.length),s||(s=_e(n[n.length-2],r[r.length-2]),s||_e(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&jo(r.mutation,s,Yt.empty(),ze.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ve()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ve()){const s=Dn();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=Co();return i.forEach(((a,c)=>{o=o.insert(a,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Dn();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ve())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,s){let i=Xt();const o=Uo(),a=(function(){return Uo()})();return n.forEach(((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof cr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),jo(h.mutation,u,h.mutation.getFieldMask(),ze.now())):o.set(u.key,Yt.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>{var f;return a.set(u,new oN(h,(f=o.get(u))!==null&&f!==void 0?f:null))})),a)))}recalculateAndSaveOverlays(e,n){const r=Uo();let s=new Ue(((o,a)=>o-a)),i=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Yt.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(s.get(a.batchId)||ve()).add(c);s=s.insert(a.batchId,f)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=_E();h.forEach((p=>{if(!i.has(p)){const m=bE(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return M.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Qf(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Dn());let a=-1,c=i;return o.next((u=>M.forEach(u,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{c=c.insert(h,p)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,c,u,ve()))).next((h=>({batchId:a,changes:gE(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next((r=>{let s=Co();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Co();return this.indexManager.getCollectionParents(e,i).next((a=>M.forEach(a,(c=>{const u=(function(f,p){return new ar(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,qe.newInvalidDocument(h)))}));let a=Co();return o.forEach(((c,u)=>{const h=i.get(c);h!==void 0&&jo(h.mutation,u,Yt.empty(),ze.now()),ba(n,u)&&(a=a.insert(c,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:rt(s.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(s){return{name:s.name,query:sd(s.bundledQuery),readTime:rt(s.readTime)}})(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this.overlays=new Ue(Y.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Dn();return M.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.ht(e,n,i)})),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Dn(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ue(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Dn(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Dn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=s)););return M.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new td(n,r));let i=this.Ir.get(n);i===void 0&&(i=ve(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this.Tr=new Oe(dt.Er),this.dr=new Oe(dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new dt(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new Y(new Ee([])),r=new dt(n,e),s=new dt(n,e+1),i=[];return this.dr.forEachInRange([r,s],(o=>{this.Vr(o),i.push(o.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new Ee([])),r=new dt(n,e),s=new dt(n,e+1);let i=ve();return this.dr.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Oe(dt.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Zf(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new dt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),s=new dt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],(o=>{const a=this.Dr(o.wr);i.push(a)})),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(_e);return n.forEach((s=>{const i=new dt(s,0),o=new dt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],(a=>{r=r.add(a.wr)}))})),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new dt(new Y(i),0);let a=new Oe(_e);return this.br.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.wr)),!0)}),o),M.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,(s=>{const i=new dt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new dt(n,0),s=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.Mr=e,this.docs=(function(){return new Ue(Y.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():qe.newInvalidDocument(n))}getEntries(e,n){let r=Xt();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():qe.newInvalidDocument(s))})),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Xt();const o=n.path,a=new Y(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Gf(Gw(h),r)<=0||(s.has(h.key)||ba(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne()}Or(e,n){return M.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new fN(this)}getSize(e){return M.resolve(this.size)}}class fN extends JE{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.persistence=e,this.Nr=new Kr((n=>Rs(n)),Ta),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ad,this.targetCount=0,this.kr=Ds.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,s)=>n(s))),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ds(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),M.waitFor(i).next((()=>s))}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jt(0),this.Kr=!1,this.Kr=!0,this.$r=new lN,this.referenceDelegate=e(this),this.Ur=new dN(this),this.indexManager=new JV,this.remoteDocumentCache=(function(s){return new hN(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new qE(n),this.Gr=new aN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new uN(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new pN(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((i=>this.referenceDelegate.jr(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Hr(e,n){return M.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class pN extends Kw{constructor(e){super(),this.currentSequenceNumber=e}}class Vl{constructor(e){this.persistence=e,this.Jr=new ad,this.Yr=null}static Zr(e){return new Vl(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.Xr.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,(r=>{const s=Y.fromPath(r);return this.ei(e,s).next((i=>{i||n.removeEntry(s,ue.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.serializer=e}O(e,n,r,s){const i=new Al("createOrUpgrade",n);r<1&&s>=1&&((function(c){c.createObjectStore("owner")})(e),(function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wg,{unique:!0}),c.createObjectStore("documentMutations")})(e),a_(e),(function(c){c.createObjectStore("remoteDocuments")})(e));let o=M.resolve();return r<3&&s>=3&&(r!==0&&((function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")})(e),a_(e)),o=o.next((()=>(function(c){const u=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(c,u){return u.store("mutations").U().next((h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wg,{unique:!0});const f=u.store("mutations"),p=h.map((m=>f.put(m)));return M.waitFor(p)}))})(e,i)))),o=o.next((()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),r<5&&s>=5&&(o=o.next((()=>this.ni(i)))),r<6&&s>=6&&(o=o.next((()=>((function(c){c.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),r<7&&s>=7&&(o=o.next((()=>this.ii(i)))),r<8&&s>=8&&(o=o.next((()=>this.si(e,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(o=o.next((()=>this.oi(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(c){c.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),r<12&&s>=12&&(o=o.next((()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:QD});u.createIndex("collectionPathOverlayIndex",JD,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",YD,{unique:!1})})(e)}))),r<13&&s>=13&&(o=o.next((()=>(function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:FD});u.createIndex("documentKeyIndex",BD),u.createIndex("collectionGroupIndex",UD)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&s>=14&&(o=o.next((()=>this.ai(e,i)))),r<15&&s>=15&&(o=o.next((()=>(function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:HD}).createIndex("sequenceNumberIndex",KD,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:zD}).createIndex("documentKeyIndex",WD,{unique:!1})})(e)))),r<16&&s>=16&&(o=o.next((()=>{n.objectStore("indexState").clear()})).next((()=>{n.objectStore("indexEntries").clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)}))),o}ri(e){let n=0;return e.store("remoteDocuments").J(((r,s)=>{n+=tl(s)})).next((()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next((s=>M.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next((a=>M.forEach(a,(c=>{ae(c.userId===i.userId);const u=cs(this.serializer,c);return zE(e,i.userId,u).next((()=>{}))}))))}))))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((s=>{const i=[];return r.J(((o,a)=>{const c=new Ee(o),u=(function(f){return[0,$t(f)]})(c);i.push(n.get(u).next((h=>h?M.resolve():(f=>n.put({targetId:0,path:$t(f),sequenceNumber:s.highestListenSequenceNumber}))(c))))})).next((()=>M.waitFor(i)))}))}si(e,n){e.createObjectStore("collectionParents",{keyPath:GD});const r=n.store("collectionParents"),s=new od,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:$t(c)})}};return n.store("remoteDocuments").J({H:!0},((o,a)=>{const c=new Ee(o);return i(c.popLast())})).next((()=>n.store("documentMutations").J({H:!0},(([o,a,c],u)=>{const h=xn(a);return i(h.popLast())}))))}oi(e){const n=e.store("targets");return n.J(((r,s)=>{const i=Do(s),o=GE(this.serializer,i);return n.put(o)}))}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J(((i,o)=>{const a=n.store("remoteDocumentsV14"),c=(function(f){return f.document?new Y(Ee.fromString(f.document.name).popFirst(5)):f.noDocument?Y.fromSegments(f.noDocument.path):f.unknownDocument?Y.fromSegments(f.unknownDocument.path):ne()})(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))})).next((()=>M.waitFor(s)))}ai(e,n){const r=n.store("mutations"),s=YE(this.serializer),i=new ZE(Vl.Zr,this.serializer.ct);return r.U().next((o=>{const a=new Map;return o.forEach((c=>{var u;let h=(u=a.get(c.userId))!==null&&u!==void 0?u:ve();cs(this.serializer,c).keys().forEach((f=>h=h.add(f))),a.set(c.userId,h)})),M.forEach(a,((c,u)=>{const h=new pt(u),f=xl.lt(this.serializer,h),p=i.getIndexManager(h),m=Dl.lt(h,this.serializer,p,i.referenceDelegate);return new XE(s,m,f,p).recalculateAndSaveOverlaysForDocumentKeys(new Ch(n,Jt.oe),c).next()}))}))}}function a_(t){t.createObjectStore("targetDocuments",{keyPath:$D}).createIndex("documentTargetsIndex",qD,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jD,{unique:!0}),t.createObjectStore("targetGlobal")}const Bu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cd{constructor(e,n,r,s,i,o,a,c,u,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=u,this.li=h,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!cd.D())throw new q(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rN(this,s),this.Ai=n+"main",this.serializer=new qE(c),this.Ri=new Nn(this.Ai,this.hi,new mN(this.serializer)),this.$r=new GV,this.Ur=new XV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=YE(this.serializer),this.Gr=new qV,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&nt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,Bu);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Jt(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>cc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((n=>this.isPrimary&&!n?this.bi(e).next((()=>!1)):!!n&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Hr(e))return G("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return bo(e).get("owner").next((n=>M.resolve(this.vi(n))))}Ci(e){return cc(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=ht(n,"clientMetadata");return r.U().next((s=>{const i=this.xi(s,18e5),o=s.filter((a=>i.indexOf(a)===-1));return M.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):bo(e).get("owner").next((n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,Bu);return!1}}return!(!this.networkEnabled||!this.inForeground)||cc(e).U().next((r=>this.xi(r,5e3).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&G("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const n=new Ch(e,Jt.oe);return this.bi(n).next((()=>this.Ci(n)))})),this.Ri.close(),this.qi()}xi(e,n){return e.filter((r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>cc(e).U().next((n=>this.xi(n,18e5).map((r=>r.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Dl.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new YV(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return xl.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(function(c){return c===17?eV:c===16?ZD:c===15?Kf:c===14?Xw:c===13?Yw:c===12?XD:c===11?Jw:void ne()})(this.hi);let o;return this.Ri.runTransaction(e,s,i,(a=>(o=new Ch(a,this.Qr?this.Qr.next():Jt.oe),n==="readwrite-primary"?this.wi(o).next((c=>!!c||this.Si(o))).next((c=>{if(!c)throw nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new q(F.FAILED_PRECONDITION,Hw);return r(o)})).next((c=>this.Di(o).next((()=>c)))):this.Ki(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Ki(e){return bo(e).get("owner").next((n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(F.FAILED_PRECONDITION,Bu)}))}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bo(e).put("owner",n)}static D(){return Nn.D()}bi(e){const n=bo(e);return n.get("owner").next((r=>this.vi(r)?(G("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve()))}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(nt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;vw()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return G("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){nt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bo(t){return ht(t,"owner")}function cc(t){return ht(t,"clientMetadata")}function ld(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ve(),s=ve();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ud(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return vw()?8:zw(zc())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.Zi(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new gN;return this.Xi(e,n,o).next((a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)}))})).next((()=>i.result))}es(e,n,r,s){return r.documentReadCount<this.ji?(si()<=Ie.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",ii(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(si()<=Ie.DEBUG&&G("QueryEngine","Query:",ii(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(si()<=Ie.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",ii(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qt(n))):M.resolve())}Yi(e,n){if(Ng(n))return M.resolve(null);let r=qt(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Xc(n,null,"F"),r=qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=ve(...i);return this.Ji.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.ts(n,a);return this.ns(n,u,o,c.readTime)?this.Yi(e,Xc(n,null,"F")):this.rs(e,u,n,c)}))))})))))}Zi(e,n,r,s){return Ng(n)||s.isEqual(ue.min())?M.resolve(null):this.Ji.getDocuments(e,r).next((i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?M.resolve(null):(si()<=Ie.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ii(n)),this.rs(e,o,n,qw(s,-1)).next((a=>a)))}))}ts(e,n){let r=new Oe(pE(e));return n.forEach(((s,i)=>{ba(e,i)&&(r=r.add(i))})),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return si()<=Ie.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",ii(n)),this.Ji.getDocumentsMatchingQuery(e,n,on.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ue(_e),this._s=new Kr((i=>Rs(i)),Ta),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function tT(t,e,n,r){return new _N(t,e,n,r)}async function nT(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let c=ve();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((u=>({hs:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function yN(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,h){const f=u.batch,p=f.keys();let m=M.resolve();return p.forEach((y=>{m=m.next((()=>h.getEntry(c,y))).next((v=>{const P=u.docVersions.get(y);ae(P!==null),v.version.compareTo(P)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(c,f)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=ve();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function rT(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function vN(t,e){const n=X(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach(((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next((()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f))));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(tt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(f,m),(function(v,P,N){return v.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(p,m,h)&&a.push(n.Ur.updateTargetData(i,m))}));let c=Xt(),u=ve();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(sT(i,o,e.documentUpdates).next((h=>{c=h.Ps,u=h.Is}))),!r.isEqual(ue.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next((f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return M.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,u))).next((()=>c))})).then((i=>(n.os=s,i)))}function sT(t,e,n){let r=ve(),s=ve();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=Xt();return n.forEach(((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)})),{Ps:o,Is:s}}))}function wN(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Mi(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Ur.getTargetData(r,e).next((i=>i?(s=i,M.resolve(s)):n.Ur.allocateTargetId(r).next((o=>(s=new Qn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function Li(t,e,n){const r=X(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Hr(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function nl(t,e,n){const r=X(t);let s=ue.min(),i=ve();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,u,h){const f=X(c),p=f._s.get(h);return p!==void 0?M.resolve(f.os.get(p)):f.Ur.getTargetData(u,h)})(r,o,qt(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next((c=>{i=c}))})).next((()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:ve()))).next((a=>(aT(r,dE(e),a),{documents:a,Ts:i})))))}function iT(t,e){const n=X(t),r=X(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(i=>r.ot(i,e).next((o=>o?o.target:null))))}function oT(t,e){const n=X(t),r=n.us.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",(s=>n.cs.getAllFromCollectionGroup(s,e,qw(r,-1),Number.MAX_SAFE_INTEGER))).then((s=>(aT(n,e,s),s)))}function aT(t,e,n){let r=t.us.get(e)||ue.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.us.set(e,r)}async function EN(t,e,n,r){const s=X(t);let i=ve(),o=Xt();for(const u of n){const h=e.Es(u.metadata.name);u.document&&(i=i.add(h));const f=e.ds(u);f.setReadTime(e.As(u.metadata.readTime)),o=o.insert(h,f)}const a=s.cs.newChangeBuffer({trackRemovals:!0}),c=await Mi(s,(function(h){return qt(Wi(Ee.fromString(`__bundle__/docs/${h}`)))})(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",(u=>sT(u,a,o).next((h=>(a.apply(u),h))).next((h=>s.Ur.removeMatchingKeysForTargetId(u,c.targetId).next((()=>s.Ur.addMatchingKeys(u,i,c.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,h.Ps,h.Is))).next((()=>h.Ps))))))}async function TN(t,e,n=ve()){const r=await Mi(t,qt(sd(e.bundledQuery))),s=X(t);return s.persistence.runTransaction("Save named query","readwrite",(i=>{const o=rt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Gr.saveNamedQuery(i,e);const a=r.withResumeToken(tt.EMPTY_BYTE_STRING,o);return s.os=s.os.insert(a.targetId,a),s.Ur.updateTargetData(i,a).next((()=>s.Ur.removeMatchingKeysForTargetId(i,r.targetId))).next((()=>s.Ur.addMatchingKeys(i,n,r.targetId))).next((()=>s.Gr.saveNamedQuery(i,e)))}))}function c_(t,e){return`firestore_clients_${t}_${e}`}function l_(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Uu(t,e){return`firestore_targets_${t}_${e}`}class rl{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new q(s.error.code,s.error.message))),o?new rl(e,n,s.state,i):(nt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $o{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new q(r.error.code,r.error.message))),i?new $o(e,r.state,s):(nt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sl{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Jf();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=Ww(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new sl(e,i):(nt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class hd{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new hd(n.clientId,n.onlineState):(nt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qh{constructor(){this.activeTargetIds=Jf()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ju{constructor(e,n,r,s,i){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ue(_e),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=c_(this.persistenceKey,this.ps),this.vs=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new qh),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.Os=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(c_(this.persistenceKey,r));if(s){const i=sl.Rs(r,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Uu(this.persistenceKey,e));if(s){const i=$o.Rs(e,s);i&&(r=i.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uu(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach((s=>{this.Qs(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return G("SharedClientState","READ",e,n),n}setItem(e,n){G("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){G("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(G("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=(function(i){let o=Jt.oe;if(i!=null)try{const a=JSON.parse(i);ae(typeof a=="number"),o=a}catch(a){nt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o})(n.newValue);r!==Jt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map((s=>this.syncEngine.eo(s))))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new rl(this.currentUser,e,n,r),i=l_(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const n=l_(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=Uu(this.persistenceKey,e),i=new $o(e,n,r);this.setItem(s,i.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return sl.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return rl.Rs(new pt(i),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return $o.Rs(s,n)}Ls(e){return hd.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);G("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(r),o=[],a=[];return i.forEach((c=>{s.has(c)||o.push(c)})),s.forEach((c=>{i.has(c)||a.push(c)})),this.syncEngine.io(o,a).then((()=>{this.Ss=r}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Jf();return e.forEach(((r,s)=>{n=n.unionWith(s.activeTargetIds)})),n}}class cT{constructor(){this.so=new qh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc=null;function $u(){return lc===null?lc=(function(){return 268435456+Math.round(2147483648*Math.random())})():lc++,"0x"+lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class RN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=$u(),c=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,c,u,s).then((h=>(G("RestConnection",`Received RPC '${n}' ${a}: `,h),h)),(h=>{throw On("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",s),h}))}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zi})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((i,o)=>n[o]=i)),s&&s.headers.forEach(((i,o)=>n[o]=i))}xo(n,r){const s=bN[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=$u();return new Promise(((o,a)=>{const c=new Ow;c.setWithCredentials(!0),c.listenOnce(Mw.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case mc.NO_ERROR:const h=c.getResponseJson();G(Ct,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case mc.TIMEOUT:G(Ct,`RPC '${e}' ${i} timed out`),a(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const f=c.getStatus();if(G(Ct,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p?.error;if(m&&m.status&&m.message){const y=(function(P){const N=P.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(N)>=0?N:F.UNKNOWN})(m.status);a(new q(y,m.message))}else a(new q(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new q(F.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{G(Ct,`RPC '${e}' ${i} completed.`)}}));const u=JSON.stringify(s);G(Ct,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)}))}Bo(e,n,r){const s=$u(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Bw(),a=Fw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");G(Ct,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);let p=!1,m=!1;const y=new AN({Io:P=>{m?G(Ct,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(p||(G(Ct,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),G(Ct,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},To:()=>f.close()}),v=(P,N,V)=>{P.listen(N,(w=>{try{V(w)}catch(C){setTimeout((()=>{throw C}),0)}}))};return v(f,Po.EventType.OPEN,(()=>{m||(G(Ct,`RPC '${e}' stream ${s} transport opened.`),y.yo())})),v(f,Po.EventType.CLOSE,(()=>{m||(m=!0,G(Ct,`RPC '${e}' stream ${s} transport closed`),y.So())})),v(f,Po.EventType.ERROR,(P=>{m||(m=!0,On(Ct,`RPC '${e}' stream ${s} transport errored:`,P),y.So(new q(F.UNAVAILABLE,"The operation could not be completed")))})),v(f,Po.EventType.MESSAGE,(P=>{var N;if(!m){const V=P.data[0];ae(!!V);const w=V,C=w.error||((N=w[0])===null||N===void 0?void 0:N.error);if(C){G(Ct,`RPC '${e}' stream ${s} received error:`,C);const k=C.status;let B=(function(E){const b=it[E];if(b!==void 0)return SE(b)})(k),A=C.message;B===void 0&&(B=F.INTERNAL,A="Unknown error status: "+k+" with message "+C.message),m=!0,y.So(new q(B,A)),f.close()}else G(Ct,`RPC '${e}' stream ${s} received:`,V),y.bo(V)}})),v(a,Lw.STAT_EVENT,(P=>{P.stat===Sh.PROXY?G(Ct,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Sh.NOPROXY&&G(Ct,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{y.wo()}),0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof window<"u"?window:null}function Tc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){return new VV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r,s,i,o,a,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(nt(n.toString()),nt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===n&&this.P_(r,s)}),(r=>{e((()=>{const s=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SN extends uT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=OV(this.serializer,e),r=(function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?rt(o.readTime):ue.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Fh(this.serializer),n.addTarget=(function(i,o){let a;const c=o.target;if(a=Jc(c)?{documents:LE(i,c)}:{query:FE(i,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=DE(i,o.resumeToken);const u=Mh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=Oi(i,o.snapshotVersion.toTimestamp());const u=Mh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=LV(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Fh(this.serializer),n.removeTarget=e,this.a_(n)}}class PN extends uT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ae(!!e.streamToken),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=MV(e.writeResults,e.commitTime),r=rt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Fh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>la(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Mo(e,Lh(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(F.UNKNOWN,i.toString())}))}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Lo(e,Lh(n,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class xN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(nt(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((o=>{r.enqueueAndForget((async()=>{zr(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await(async function(c){const u=X(c);u.L_.add(4),await Yi(u),u.q_.set("Unknown"),u.L_.delete(4),await Ca(u)})(this))}))})),this.q_=new xN(r,s)}}async function Ca(t){if(zr(t))for(const e of t.B_)await e(!0)}async function Yi(t){for(const e of t.B_)await e(!1)}function Nl(t,e){const n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),md(n)?pd(n):Zi(n).r_()&&dd(n,e))}function Fi(t,e){const n=X(t),r=Zi(n);n.N_.delete(e),r.r_()&&hT(n,e),n.N_.size===0&&(r.r_()?r.o_():zr(n)&&n.q_.set("Unknown"))}function dd(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zi(t).A_(e)}function hT(t,e){t.Q_.xe(e),Zi(t).R_(e)}function pd(t){t.Q_=new PV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Zi(t).start(),t.q_.v_()}function md(t){return zr(t)&&!Zi(t).n_()&&t.N_.size>0}function zr(t){return X(t).L_.size===0}function fT(t){t.Q_=void 0}async function VN(t){t.q_.set("Online")}async function NN(t){t.N_.forEach(((e,n)=>{dd(t,e)}))}async function kN(t,e){fT(t),md(t)?(t.q_.M_(e),pd(t)):t.q_.set("Unknown")}async function ON(t,e,n){if(t.q_.set("Online"),e instanceof xE&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))})(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await il(t,r)}else if(e instanceof Ec?t.Q_.Ke(e):e instanceof CE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await rT(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.N_.get(u);h&&i.N_.set(u,h.withResumeToken(c.resumeToken,o))}})),a.targetMismatches.forEach(((c,u)=>{const h=i.N_.get(c);if(!h)return;i.N_.set(c,h.withResumeToken(tt.EMPTY_BYTE_STRING,h.snapshotVersion)),hT(i,c);const f=new Qn(h.target,c,u,h.sequenceNumber);dd(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await il(t,r)}}async function il(t,e,n){if(!Hr(e))throw e;t.L_.add(1),await Yi(t),t.q_.set("Offline"),n||(n=()=>rT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ca(t)}))}function dT(t,e){return e().catch((n=>il(t,n,e)))}async function Xi(t){const e=X(t),n=Ur(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;MN(e);)try{const s=await wN(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,LN(e,s)}catch(s){await il(e,s)}pT(e)&&mT(e)}function MN(t){return zr(t)&&t.O_.length<10}function LN(t,e){t.O_.push(e);const n=Ur(t);n.r_()&&n.V_&&n.m_(e.mutations)}function pT(t){return zr(t)&&!Ur(t).n_()&&t.O_.length>0}function mT(t){Ur(t).start()}async function FN(t){Ur(t).p_()}async function BN(t){const e=Ur(t);for(const n of t.O_)e.m_(n.mutations)}async function UN(t,e,n){const r=t.O_.shift(),s=ed.from(r,e,n);await dT(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Xi(t)}async function jN(t,e){e&&Ur(t).V_&&await(async function(r,s){if((function(o){return RE(o)&&o!==F.ABORTED})(s.code)){const i=r.O_.shift();Ur(r).s_(),await dT(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Xi(r)}})(t,e),pT(t)&&mT(t)}async function h_(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=zr(n);n.L_.add(3),await Yi(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ca(n)}async function Gh(t,e){const n=X(t);e?(n.L_.delete(2),await Ca(n)):e||(n.L_.add(2),await Yi(n),n.q_.set("Unknown"))}function Zi(t){return t.K_||(t.K_=(function(n,r,s){const i=X(n);return i.w_(),new SN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Eo:VN.bind(null,t),Ro:NN.bind(null,t),mo:kN.bind(null,t),d_:ON.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),md(t)?pd(t):t.q_.set("Unknown")):(await t.K_.stop(),fT(t))}))),t.K_}function Ur(t){return t.U_||(t.U_=(function(n,r,s){const i=X(n);return i.w_(),new PN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:FN.bind(null,t),mo:jN.bind(null,t),f_:BN.bind(null,t),g_:UN.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Xi(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new At,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new gd(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eo(t,e){if(nt("AsyncQueue",`${e}: ${t}`),Hr(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Co(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new vi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.W_=new Ue(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Bi{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Bi(e,n,vi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ia(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class qN{constructor(){this.queries=d_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=d_(),i.forEach(((o,a)=>{for(const c of a.j_)c.onError(r)}))})(this,new q(F.ABORTED,"Firestore shutting down"))}}function d_(){return new Kr((t=>fE(t)),Ia)}async function _d(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new $N,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=eo(o,`Initialization of query '${ii(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&vd(n)}async function yd(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GN(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&vd(n)}function HN(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function vd(t){t.Y_.forEach((e=>{e.next()}))}var Hh,p_;(p_=Hh||(Hh={})).ea="default",p_.Cache="cache";class wd{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Bi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Bi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hh.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.serializer=e}Es(e){return kn(this.serializer,e)}ds(e){return e.metadata.exists?ME(this.serializer,e.document,!1):qe.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return rt(e)}}class zN{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Ee.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new m_(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Es(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||ve()).add(i);n.set(o,a)}}return n}async complete(){const e=await EN(this.localStore,new m_(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await TN(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function gT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.key=e}}class yT{constructor(e){this.key=e}}class vT{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=pE(e),this.Ra=new vi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new f_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,f)=>{const p=s.get(h),m=ba(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?y!==v&&(r.track({type:3,doc:m}),P=!0):this.ga(p,m)||(r.track({type:2,doc:m}),P=!0,(c&&this.Aa(m,c)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),P=!0):p&&!m&&(r.track({type:1,doc:p}),P=!0,(c||u)&&(a=!0)),P&&(m?(o=o.add(m),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((h,f)=>(function(m,y){const v=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return v(m)-v(y)})(h.type,f.type)||this.Aa(h.doc,f.doc))),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Bi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new f_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ve(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new yT(r))})),this.da.forEach((r=>{e.has(r)||n.push(new _T(r))})),n}ba(e){this.Ta=e.Ts,this.da=ve();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Bi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class WN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class QN{constructor(e){this.key=e,this.va=!1}}class JN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Kr((a=>fE(a)),Ia),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(Y.comparator),this.Na=new Map,this.La=new ad,this.Ba={},this.ka=new Map,this.qa=Ds.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function YN(t,e,n=!0){const r=kl(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await wT(r,e,n,!0),s}async function XN(t,e){const n=kl(t);await wT(n,e,!0,!1)}async function wT(t,e,n,r){const s=await Mi(t.localStore,qt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Ed(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Nl(t.remoteStore,s),a}async function Ed(t,e,n,r,s){t.Ka=(f,p,m)=>(async function(v,P,N,V){let w=P.view.ma(N);w.ns&&(w=await nl(v.localStore,P.query,!1).then((({documents:A})=>P.view.ma(A,w))));const C=V&&V.targetChanges.get(P.targetId),k=V&&V.targetMismatches.get(P.targetId)!=null,B=P.view.applyChanges(w,v.isPrimaryClient,C,k);return Kh(v,P.targetId,B.wa),B.snapshot})(t,f,p,m);const i=await nl(t.localStore,e,!0),o=new vT(e,i.Ts),a=o.ma(i.documents),c=Sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);Kh(t,n,u.wa);const h=new WN(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function ZN(t,e,n){const r=X(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter((o=>!Ia(o,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Li(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Fi(r.remoteStore,s.targetId),Ui(r,s.targetId)})).catch(Gr)):(Ui(r,s.targetId),await Li(r.localStore,s.targetId,!0))}async function ek(t,e){const n=X(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fi(n.remoteStore,r.targetId))}async function tk(t,e,n){const r=Ad(t);try{const s=await(function(o,a){const c=X(o),u=ze.now(),h=a.reduce(((m,y)=>m.add(y.key)),ve());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let y=Xt(),v=ve();return c.cs.getEntries(m,h).next((P=>{y=P,y.forEach(((N,V)=>{V.isValidDocument()||(v=v.add(N))}))})).next((()=>c.localDocuments.getOverlayedDocuments(m,y))).next((P=>{f=P;const N=[];for(const V of a){const w=AV(V,f.get(V.key).overlayedDocument);w!=null&&N.push(new cr(V.key,w,rE(w.value.mapValue),Ke.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,N,a)})).next((P=>{p=P;const N=P.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(m,P.batchId,N)}))})).then((()=>({batchId:p.batchId,changes:gE(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Ue(_e)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u})(r,s.batchId,n),await lr(r,s.changes),await Xi(r.remoteStore)}catch(s){const i=eo(s,"Failed to persist write");n.reject(i)}}async function ET(t,e){const n=X(t);try{const r=await vN(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Na.get(i);o&&(ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ae(o.va):s.removedDocuments.size>0&&(ae(o.va),o.va=!1))})),await lr(n,r,e)}catch(r){await Gr(r)}}function g_(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach(((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const c=X(o);c.onlineState=a;let u=!1;c.queries.forEach(((h,f)=>{for(const p of f.j_)p.Z_(a)&&(u=!0)})),u&&vd(c)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nk(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ue(Y.comparator);o=o.insert(i,qe.newNoDocument(i,ue.min()));const a=ve().add(i),c=new Ra(ue.min(),new Map,new Ue(_e),o,a);await ET(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),bd(r)}else await Li(r.localStore,e,!1).then((()=>Ui(r,e,n))).catch(Gr)}async function rk(t,e){const n=X(t),r=e.batch.batchId;try{const s=await yN(n.localStore,e);Id(n,r,null),Td(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await lr(n,s)}catch(s){await Gr(s)}}async function sk(t,e,n){const r=X(t);try{const s=await(function(o,a){const c=X(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next((f=>(ae(f!==null),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>c.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);Id(r,e,n),Td(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await lr(r,s)}catch(s){await Gr(s)}}async function ik(t,e){const n=X(t);zr(n.remoteStore)||G("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(o){const a=X(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c)))})(n.localStore);if(r===-1)return void e.resolve();const s=n.ka.get(r)||[];s.push(e),n.ka.set(r,s)}catch(r){const s=eo(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Td(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function Id(t,e,n){const r=X(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Ui(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||TT(t,r)}))}function TT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Fi(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),bd(t))}function Kh(t,e,n){for(const r of n)r instanceof _T?(t.La.addReference(r.key,e),ok(t,r)):r instanceof yT?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||TT(t,r.key)):ne()}function ok(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),bd(t))}function bd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new QN(n)),t.Oa=t.Oa.insert(n,r),Nl(t.remoteStore,new Qn(qt(Wi(n.path)),r,"TargetPurposeLimboResolution",Jt.oe))}}async function lr(t,e,n){const r=X(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach(((a,c)=>{o.push(r.Ka(c,e,n).then((u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=ud.Wi(c.targetId,u);i.push(f)}})))})),await Promise.all(o),r.Ca.d_(s),await(async function(c,u){const h=X(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>M.forEach(u,(p=>M.forEach(p.$i,(m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m))).next((()=>M.forEach(p.Ui,(m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))))))}catch(f){if(!Hr(f))throw f;G("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const m=h.os.get(p),y=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(p,v)}}})(r.localStore,i))}async function ak(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await nT(n.localStore,e);n.currentUser=e,(function(i,o){i.ka.forEach((a=>{a.forEach((c=>{c.reject(new q(F.CANCELLED,o))}))})),i.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lr(n,r.hs)}}function ck(t,e){const n=X(t),r=n.Na.get(e);if(r&&r.va)return ve().add(r.key);{let s=ve();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}async function lk(t,e){const n=X(t),r=await nl(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&Kh(n,e.targetId,s.wa),s}async function uk(t,e){const n=X(t);return oT(n.localStore,e).then((r=>lr(n,r)))}async function hk(t,e,n,r){const s=X(t),i=await(function(a,c){const u=X(a),h=X(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(f=>h.Mn(f,c).next((p=>p?u.localDocuments.getDocuments(f,p):M.resolve(null)))))})(s.localStore,e);i!==null?(n==="pending"?await Xi(s.remoteStore):n==="acknowledged"||n==="rejected"?(Id(s,e,r||null),Td(s,e),(function(a,c){X(X(a).mutationQueue).On(c)})(s.localStore,e)):ne(),await lr(s,i)):G("SyncEngine","Cannot apply mutation batch with id: "+e)}async function fk(t,e){const n=X(t);if(kl(n),Ad(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await __(n,r.toArray());n.Qa=!0,await Gh(n.remoteStore,!0);for(const i of s)Nl(n.remoteStore,i)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach(((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>(Ui(n,o),Li(n.localStore,o,!0)))),Fi(n.remoteStore,o)})),await s,await __(n,r),(function(o){const a=X(o);a.Na.forEach(((c,u)=>{Fi(a.remoteStore,u)})),a.La.pr(),a.Na=new Map,a.Oa=new Ue(Y.comparator)})(n),n.Qa=!1,await Gh(n.remoteStore,!1)}}async function __(t,e,n){const r=X(t),s=[],i=[];for(const o of e){let a;const c=r.Ma.get(o);if(c&&c.length!==0){a=await Mi(r.localStore,qt(c[0]));for(const u of c){const h=r.Fa.get(u),f=await lk(r,h);f.snapshot&&i.push(f.snapshot)}}else{const u=await iT(r.localStore,o);a=await Mi(r.localStore,u),await Ed(r,IT(u),o,!1,a.resumeToken)}s.push(a)}return r.Ca.d_(i),s}function IT(t){return hE(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dk(t){return(function(n){return X(X(n).persistence).Qi()})(X(t).localStore)}async function pk(t,e,n,r){const s=X(t);if(s.Qa)return void G("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await oT(s.localStore,dE(i[0])),a=Ra.createSynthesizedRemoteEventForCurrentChange(e,n==="current",tt.EMPTY_BYTE_STRING);await lr(s,o,a);break}case"rejected":await Li(s.localStore,e,!0),Ui(s,e,r);break;default:ne()}}async function mk(t,e,n){const r=kl(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){G("SyncEngine","Adding an already active target "+s);continue}const i=await iT(r.localStore,s),o=await Mi(r.localStore,i);await Ed(r,IT(i),o.targetId,!1,o.resumeToken),Nl(r.remoteStore,o)}for(const s of n)r.Ma.has(s)&&await Li(r.localStore,s,!1).then((()=>{Fi(r.remoteStore,s),Ui(r,s)})).catch(Gr)}}function kl(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ET.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ck.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nk.bind(null,e),e.Ca.d_=GN.bind(null,e.eventManager),e.Ca.$a=HN.bind(null,e.eventManager),e}function Ad(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sk.bind(null,e),e}function gk(t,e,n){const r=X(t);(async function(i,o,a){try{const c=await o.getMetadata();if(await(function(m,y){const v=X(m),P=rt(y.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",(N=>v.Gr.getBundleMetadata(N,y.id))).then((N=>!!N&&N.createTime.compareTo(P)>=0))})(i.localStore,c))return await o.close(),a._completeWith((function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(gT(c));const u=new zN(c,i.localStore,o.serializer);let h=await o.Ua();for(;h;){const p=await u.la(h);p&&a._updateProgress(p),h=await o.Ua()}const f=await u.complete();return await lr(i,f.Ia,void 0),await(function(m,y){const v=X(m);return v.persistence.runTransaction("Save bundle","readwrite",(P=>v.Gr.saveBundleMetadata(P,y)))})(i.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return On("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(r,e,n).then((s=>{r.sharedClientState.notifyBundleLoaded(s)}))}class ua{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pa(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return tT(this.persistence,new eT,e.initialUser,this.serializer)}Ga(e){return new ZE(Vl.Zr,this.serializer)}Wa(e){return new cT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ua.provider={build:()=>new ua};class bT extends ua{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Ad(this.Ja.syncEngine),await Xi(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return tT(this.persistence,new eT,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new eN(r,e.asyncQueue,n)}Ha(e,n){const r=new OD(n,this.persistence);return new kD(e.asyncQueue,r)}Ga(e){const n=ld(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new cd(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,lT(),Tc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new cT}}class _k extends bT{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof ju&&(this.sharedClientState.syncEngine={no:hk.bind(null,n),ro:pk.bind(null,n),io:mk.bind(null,n),Qi:dk.bind(null,n),eo:uk.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi((async r=>{await fk(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Wa(e){const n=lT();if(!ju.D(n))throw new q(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ld(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ju(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ha{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ak.bind(null,this.syncEngine),await Gh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qN})()}createDatastore(e){const n=Pa(e.databaseInfo.databaseId),r=(function(i){return new RN(i)})(e.databaseInfo);return(function(i,o,a,c){return new CN(i,o,a,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,a){return new DN(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>g_(this.syncEngine,n,0)),(function(){return u_.D()?new u_:new IN})())}createSyncEngine(e,n){return(function(s,i,o,a,c,u,h){const f=new JN(s,i,o,a,c,u);return h&&(f.Qa=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const i=X(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Yi(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ha.provider={build:()=>new ha};function y_(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):nt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new At,this.buffer=new Uint8Array,this.eu=(function(){return new TextDecoder("utf-8")})(),this.tu().then((r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const s=await this.iu(r);return new KN(JSON.parse(s),e.length+r)}su(){return this.buffer.findIndex((e=>e===123))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,i){const o=X(s),a={documents:i.map((f=>ca(o.serializer,f)))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Ee.emptyPath(),a,i.length),u=new Map;c.forEach((f=>{const p=kV(o.serializer,f);u.set(p.key.toString(),p)}));const h=[];return i.forEach((f=>{const p=u.get(f.toString());ae(!!p),h.push(p)})),h})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ji(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const s=Y.fromPath(r);this.mutations.push(new Xf(s,this.precondition(s)))})),await(async function(r,s){const i=X(r),o={writes:s.map((a=>la(i.serializer,a)))};await i.Mo("Commit",i.serializer.databaseId,Ee.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ne();n=ue.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ue.min())?Ke.exists(!1):Ke.updateTime(n):Ke.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ue.min()))throw new q(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ke.updateTime(n)}return Ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new fd(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new vk(this.datastore),n=this.cu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.lu(s)}))))})).catch((r=>{this.lu(r)}))}))}cu(e){try{const n=this.updateFunction(e);return!Ea(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!RE(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=jw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new At;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=eo(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function qu(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await nT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function v_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Rd(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>h_(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>h_(e.remoteStore,s))),t._onlineComponents=e}async function Rd(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await qu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;On("Error using user provided cache. Falling back to memory cache: "+n),await qu(t,new ua)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await qu(t,new ua);return t._offlineComponents}async function Ml(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await v_(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await v_(t,new ha))),t._onlineComponents}function AT(t){return Rd(t).then((e=>e.persistence))}function Sd(t){return Rd(t).then((e=>e.localStore))}function RT(t){return Ml(t).then((e=>e.remoteStore))}function Pd(t){return Ml(t).then((e=>e.syncEngine))}function Tk(t){return Ml(t).then((e=>e.datastore))}async function ji(t){const e=await Ml(t),n=e.eventManager;return n.onListen=YN.bind(null,e.syncEngine),n.onUnlisten=ZN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ek.bind(null,e.syncEngine),n}function Ik(t){return t.asyncQueue.enqueue((async()=>{const e=await AT(t),n=await RT(t);return e.setNetworkEnabled(!0),(function(s){const i=X(s);return i.L_.delete(0),Ca(i)})(n)}))}function bk(t){return t.asyncQueue.enqueue((async()=>{const e=await AT(t),n=await RT(t);return e.setNetworkEnabled(!1),(async function(s){const i=X(s);i.L_.add(0),await Yi(i),i.q_.set("Offline")})(n)}))}function Ak(t,e){const n=new At;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await(function(u,h){const f=X(u);return f.persistence.runTransaction("read document","readonly",(p=>f.localDocuments.getDocument(p,h)))})(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new q(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=eo(a,`Failed to get document '${i} from cache`);o.reject(c)}})(await Sd(t),e,n))),n.promise}function ST(t,e,n={}){const r=new At;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,u){const h=new Ol({next:p=>{h.Za(),o.enqueueAndForget((()=>yd(i,f)));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?u.reject(new q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new wd(Wi(a.path),h,{includeMetadataChanges:!0,_a:!0});return _d(i,f)})(await ji(t),t.asyncQueue,e,n,r))),r.promise}function Rk(t,e){const n=new At;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await nl(s,i,!0),c=new vT(i,a.Ts),u=c.ma(a.documents),h=c.applyChanges(u,!1);o.resolve(h.snapshot)}catch(a){const c=eo(a,`Failed to execute query '${i} against cache`);o.reject(c)}})(await Sd(t),e,n))),n.promise}function PT(t,e,n={}){const r=new At;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,u){const h=new Ol({next:p=>{h.Za(),o.enqueueAndForget((()=>yd(i,f))),p.fromCache&&c.source==="server"?u.reject(new q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new wd(a,h,{includeMetadataChanges:!0,_a:!0});return _d(i,f)})(await ji(t),t.asyncQueue,e,n,r))),r.promise}function Sk(t,e){const n=new Ol(e);return t.asyncQueue.enqueueAndForget((async()=>(function(s,i){X(s).Y_.add(i),i.next()})(await ji(t),n))),()=>{n.Za(),t.asyncQueue.enqueueAndForget((async()=>(function(s,i){X(s).Y_.delete(i)})(await ji(t),n)))}}function Pk(t,e,n,r){const s=(function(o,a){let c;return c=typeof o=="string"?PE().encode(o):o,(function(h,f){return new yk(h,f)})((function(h,f){if(h instanceof Uint8Array)return y_(h,f);if(h instanceof ArrayBuffer)return y_(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(n,Pa(e));t.asyncQueue.enqueueAndForget((async()=>{gk(await Pd(t),s,r)}))}function Ck(t,e){return t.asyncQueue.enqueue((async()=>(function(r,s){const i=X(r);return i.persistence.runTransaction("Get named query","readonly",(o=>i.Gr.getNamedQuery(o,s)))})(await Sd(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xT(t,e,n,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function E_(t){if(!Y.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function T_(t){if(Y.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ll(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function Pe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ll(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function DT(t,e){if(e<=0)throw new q(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xa{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new I_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new I_(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ID;switch(r.type){case"firstParty":return new SD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=w_.get(n);r&&(G("ComponentProvider","Removing Datastore"),w_.delete(n),r.terminate())})(this),Promise.resolve()}}function xk(t,e,n,r={}){var s;const i=(t=Pe(t,xa))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&On("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=pt.MOCK_USER;else{a=qC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new pt(u)}t._authCredentials=new bD(new Uw(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gt=class VT{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new VT(this.firestore,e,this._query)}},Ye=class NT{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new NT(this.firestore,e,this._key)}},Vr=class kT extends Gt{constructor(e,n,r){super(e,n,Wi(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new Y(e))}withConverter(e){return new kT(this.firestore,e,this._path)}};function OT(t,e,...n){if(t=at(t),Cd("collection","path",e),t instanceof xa){const r=Ee.fromString(e,...n);return T_(r),new Vr(t,null,r)}{if(!(t instanceof Ye||t instanceof Vr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return T_(r),new Vr(t.firestore,null,r)}}function Dk(t,e){if(t=Pe(t,xa),Cd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gt(t,null,(function(r){return new ar(Ee.emptyPath(),r)})(e))}function ol(t,e,...n){if(t=at(t),arguments.length===1&&(e=jw.newId()),Cd("doc","path",e),t instanceof xa){const r=Ee.fromString(e,...n);return E_(r),new Ye(t,null,new Y(r))}{if(!(t instanceof Ye||t instanceof Vr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return E_(r),new Ye(t.firestore,t instanceof Vr?t.converter:null,new Y(r))}}function MT(t,e){return t=at(t),e=at(e),(t instanceof Ye||t instanceof Vr)&&(e instanceof Ye||e instanceof Vr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function LT(t,e){return t=at(t),e=at(e),t instanceof Gt&&e instanceof Gt&&t.firestore===e.firestore&&Ia(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fd(this,"async_queue_retry"),this.Vu=()=>{const r=Tc();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Tc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Tc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new At;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Hr(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a})(r);throw nt("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=gd.createAndSchedule(this,e,n,r,(i=>this.yu(i)));return this.Tu.push(s),s}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function zh(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class Vk{constructor(){this._progressObserver={},this._taskCompletionResolver=new At,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=-1;let st=class extends xa{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new b_,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b_(e),this._firestoreClient=void 0,await e}}};function kt(t){if(t._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FT(t),t._firestoreClient}function FT(t){var e,n,r;const s=t._freezeSettings(),i=(function(a,c,u,h){return new rV(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,CT(h.experimentalLongPollingOptions),h.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Ek(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(t._componentsProvider))}function kk(t,e){On("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return BT(t,ha.provider,{build:r=>new bT(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function Ok(t){On("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();BT(t,ha.provider,{build:n=>new _k(n,e.cacheSizeBytes)})}function BT(t,e,n){if((t=Pe(t,st))._firestoreClient||t._terminated)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new q(F.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},FT(t)}function Mk(t){if(t._initialized&&!t._terminated)throw new q(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new At;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Nn.D())return Promise.resolve();const s=r+"main";await Nn.delete(s)})(ld(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function Lk(t){return(function(n){const r=new At;return n.asyncQueue.enqueueAndForget((async()=>ik(await Pd(n),r))),r.promise})(kt(t=Pe(t,st)))}function Fk(t){return Ik(kt(t=Pe(t,st)))}function Bk(t){return bk(kt(t=Pe(t,st)))}function Uk(t,e){const n=kt(t=Pe(t,st)),r=new Vk;return Pk(n,t._databaseId,e,r),r}function jk(t,e){return Ck(kt(t=Pe(t,st)),e).then((n=>n?new Gt(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(tt.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fs=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=/^__.*__$/;class qk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qi(e,this.data,n,this.fieldTransforms)}}class UT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Bl{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Bl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return al(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jT(this.Cu)&&$k.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Gk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pa(e)}Qu(e,n,r,s=!1){return new Bl({Cu:e,methodName:n,qu:r,path:He.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bs(t){const e=t._freezeSettings(),n=Pa(t._databaseId);return new Gk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ul(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Ld("Data must be an object, but it was:",o,r);const a=GT(r,o);let c,u;if(i.merge)c=new Yt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Wh(e,f,n);if(!o.contains(p))throw new q(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);KT(h,p)||h.push(p)}c=new Yt(h),u=o.fieldTransforms.filter((f=>c.covers(f.field)))}else c=null,u=o.fieldTransforms;return new qk(new It(a),c,u)}class Da extends Fs{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Da}}function $T(t,e,n){return new Bl({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Dd extends Fs{_toFieldTransform(e){return new Aa(e.path,new Ni)}isEqual(e){return e instanceof Dd}}class Vd extends Fs{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=$T(this,e,!0),r=this.Ku.map((i=>Us(i,n))),s=new Ss(r);return new Aa(e.path,s)}isEqual(e){return e instanceof Vd&&Yo(this.Ku,e.Ku)}}class Nd extends Fs{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=$T(this,e,!0),r=this.Ku.map((i=>Us(i,n))),s=new Ps(r);return new Aa(e.path,s)}isEqual(e){return e instanceof Nd&&Yo(this.Ku,e.Ku)}}class kd extends Fs{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new ki(e.serializer,vE(e.serializer,this.$u));return new Aa(e.path,n)}isEqual(e){return e instanceof kd&&this.$u===e.$u}}function Od(t,e,n,r){const s=t.Qu(1,e,n);Ld("Data must be an object, but it was:",s,r);const i=[],o=It.empty();Ls(r,((c,u)=>{const h=Fd(e,c,n);u=at(u);const f=s.Nu(h);if(u instanceof Da)i.push(h);else{const p=Us(u,f);p!=null&&(i.push(h),o.set(h,p))}}));const a=new Yt(i);return new UT(o,a,s.fieldTransforms)}function Md(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Wh(e,r,n)],c=[s];if(i.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Wh(e,i[p])),c.push(i[p+1]);const u=[],h=It.empty();for(let p=a.length-1;p>=0;--p)if(!KT(u,a[p])){const m=a[p];let y=c[p];y=at(y);const v=o.Nu(m);if(y instanceof Da)u.push(m);else{const P=Us(y,v);P!=null&&(u.push(m),h.set(m,P))}}const f=new Yt(u);return new UT(h,f,o.fieldTransforms)}function qT(t,e,n,r=!1){return Us(n,t.Qu(r?4:3,e))}function Us(t,e){if(HT(t=at(t)))return Ld("Unsupported field value:",e,t),GT(t,e);if(t instanceof Fs)return(function(r,s){if(!jT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let c=Us(a,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:Oi(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oi(s.serializer,i)}}if(r instanceof Fl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:DE(s.serializer,r._byteString)};if(r instanceof Ye){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof xd)return(function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Yf(a.serializer,c)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${Ll(r)}`)})(t,e)}function GT(t,e){const n={};return Zw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(t,((r,s)=>{const i=Us(s,e.Mu(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function HT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Fl||t instanceof Ln||t instanceof Ye||t instanceof Fs||t instanceof xd)}function Ld(t,e,n){if(!HT(n)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(n)){const r=Ll(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Wh(t,e,n){if((e=at(e))instanceof jr)return e._internalPath;if(typeof e=="string")return Fd(t,e);throw al("Field path arguments must be of type string or ",t,!1,void 0,n)}const Hk=new RegExp("[~\\*/\\[\\]]");function Fd(t,e,n){if(e.search(Hk)>=0)throw al(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jr(...e.split("."))._internalPath}catch{throw al(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function al(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(F.INVALID_ARGUMENT,a+t+c)}function KT(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Kk extends fa{data(){return super.data()}}function jl(t,e){return typeof e=="string"?Fd(t,e):e instanceof jr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bd{}class Va extends Bd{}function vr(t,e,...n){let r=[];e instanceof Bd&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((c=>c instanceof Ud)).length,a=i.filter((c=>c instanceof $l)).length;if(o>1||o>0&&a>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class $l extends Va{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new $l(e,n,r)}_apply(e){const n=this._parse(e);return QT(e._query,n),new Gt(e.firestore,e.converter,Oh(e._query,n))}_parse(e){const n=Bs(e.firestore);return(function(i,o,a,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){R_(f,h);const m=[];for(const y of f)m.push(A_(c,i,y));p={arrayValue:{values:m}}}else p=A_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||R_(f,h),p=qT(a,o,f,h==="in"||h==="not-in");return Te.create(u,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zk(t,e,n){const r=e,s=jl("where",t);return $l._create(s,r,n)}class Ud extends Bd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ud(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ve.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)QT(o,c),o=Oh(o,c)})(e._query,n),new Gt(e.firestore,e.converter,Oh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jd extends Va{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jd(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new aa(i,o)})(e._query,this._field,this._direction);return new Gt(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new ar(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function Wk(t,e="asc"){const n=e,r=jl("orderBy",t);return jd._create(r,n)}class ql extends Va{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ql(e,n,r)}_apply(e){return new Gt(e.firestore,e.converter,Xc(e._query,this._limit,this._limitType))}}function Qk(t){return DT("limit",t),ql._create("limit",t,"F")}function Jk(t){return DT("limitToLast",t),ql._create("limitToLast",t,"L")}class Gl extends Va{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Gl(e,n,r)}_apply(e){const n=WT(e,this.type,this._docOrFields,this._inclusive);return new Gt(e.firestore,e.converter,(function(s,i){return new ar(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)})(e._query,n))}}function Yk(...t){return Gl._create("startAt",t,!0)}function Xk(...t){return Gl._create("startAfter",t,!1)}class Hl extends Va{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Hl(e,n,r)}_apply(e){const n=WT(e,this.type,this._docOrFields,this._inclusive);return new Gt(e.firestore,e.converter,(function(s,i){return new ar(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)})(e._query,n))}}function Zk(...t){return Hl._create("endBefore",t,!1)}function eO(...t){return Hl._create("endAt",t,!0)}function WT(t,e,n,r){if(n[0]=at(n[0]),n[0]instanceof fa)return(function(i,o,a,c,u){if(!c)throw new q(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of yi(i))if(f.field.isKeyField())h.push(As(o,c.key));else{const p=c.data.field(f.field);if(Rl(p))throw new q(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=f.field.canonicalString();throw new q(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(p)}return new Br(h,u)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Bs(t.firestore);return(function(o,a,c,u,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new q(F.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<h.length;y++){const v=h[y];if(p[y].field.isKeyField()){if(typeof v!="string")throw new q(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof v}`);if(!Qf(o)&&v.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${v}' contains a slash.`);const P=o.path.child(Ee.fromString(v));if(!Y.isDocumentKey(P))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const N=new Y(P);m.push(As(a,N))}else{const P=qT(c,u,v);m.push(P)}}return new Br(m,f)})(t._query,t.firestore._databaseId,s,e,n,r)}}function A_(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qf(e)&&n.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!Y.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return As(t,new Y(r))}if(n instanceof Ye)return As(t,n._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ll(n)}.`)}function R_(t,e){if(!Array.isArray(t)||t.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QT(t,e){const n=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $d{convertValue(e,n="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ls(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((o=>Ge(o.doubleValue)));return new xd(i)}convertGeoPoint(e){return new Fl(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sa(e));default:return null}}convertTimestamp(e){const n=rr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);ae($E(r));const s=new Lr(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||nt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class tO extends $d{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let sr=class extends fa{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},qo=class extends sr{data(e={}){return super.data(e)}},$r=class{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ds(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new qo(this._firestore,this._userDataWriter,r.key,r,new ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const c=new qo(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ds(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const c=new qo(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ds(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:nO(a.type),doc:c,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function nO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}function JT(t,e){return t instanceof sr&&e instanceof sr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $r&&e instanceof $r&&t._firestore===e._firestore&&LT(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t){t=Pe(t,Ye);const e=Pe(t.firestore,st);return ST(kt(e),t._key).then((n=>qd(e,t,n)))}class js extends $d{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}function sO(t){t=Pe(t,Ye);const e=Pe(t.firestore,st),n=kt(e),r=new js(e);return Ak(n,t._key).then((s=>new sr(e,r,t._key,s,new ds(s!==null&&s.hasLocalMutations,!0),t.converter)))}function iO(t){t=Pe(t,Ye);const e=Pe(t.firestore,st);return ST(kt(e),t._key,{source:"server"}).then((n=>qd(e,t,n)))}function oO(t){t=Pe(t,Gt);const e=Pe(t.firestore,st),n=kt(e),r=new js(e);return zT(t._query),PT(n,t._query).then((s=>new $r(e,r,t,s)))}function aO(t){t=Pe(t,Gt);const e=Pe(t.firestore,st),n=kt(e),r=new js(e);return Rk(n,t._query).then((s=>new $r(e,r,t,s)))}function cO(t){t=Pe(t,Gt);const e=Pe(t.firestore,st),n=kt(e),r=new js(e);return PT(n,t._query,{source:"server"}).then((s=>new $r(e,r,t,s)))}function S_(t,e,n){t=Pe(t,Ye);const r=Pe(t.firestore,st),s=Kl(t.converter,e,n);return Na(r,[Ul(Bs(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ke.none())])}function P_(t,e,n,...r){t=Pe(t,Ye);const s=Pe(t.firestore,st),i=Bs(s);let o;return o=typeof(e=at(e))=="string"||e instanceof jr?Md(i,"updateDoc",t._key,e,n,r):Od(i,"updateDoc",t._key,e),Na(s,[o.toMutation(t._key,Ke.exists(!0))])}function lO(t){return Na(Pe(t.firestore,st),[new Ji(t._key,Ke.none())])}function uO(t,e){const n=Pe(t.firestore,st),r=ol(t),s=Kl(t.converter,e);return Na(n,[Ul(Bs(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ke.exists(!1))]).then((()=>r))}function YT(t,...e){var n,r,s;t=at(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||zh(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(zh(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(t instanceof Ye)u=Pe(t.firestore,st),h=Wi(t._key.path),c={next:f=>{e[o]&&e[o](qd(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Pe(t,Gt);u=Pe(f.firestore,st),h=f._query;const p=new js(u);c={next:m=>{e[o]&&e[o](new $r(u,p,f,m))},error:e[o+1],complete:e[o+2]},zT(t._query)}return(function(p,m,y,v){const P=new Ol(v),N=new wd(m,P,y);return p.asyncQueue.enqueueAndForget((async()=>_d(await ji(p),N))),()=>{P.Za(),p.asyncQueue.enqueueAndForget((async()=>yd(await ji(p),N)))}})(kt(u),h,a,c)}function hO(t,e){return Sk(kt(t=Pe(t,st)),zh(e)?e:{next:e})}function Na(t,e){return(function(r,s){const i=new At;return r.asyncQueue.enqueueAndForget((async()=>tk(await Pd(r),s,i))),i.promise})(kt(t),e)}function qd(t,e,n){const r=n.docs.get(e._key),s=new js(t);return new sr(t,s,e._key,r,new ds(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dO=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Bs(e)}set(e,n,r){this._verifyNotCommitted();const s=br(e,this._firestore),i=Kl(s.converter,n,r),o=Ul(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Ke.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=br(e,this._firestore);let o;return o=typeof(n=at(n))=="string"||n instanceof jr?Md(this._dataReader,"WriteBatch.update",i._key,n,r,s):Od(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Ke.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=br(e,this._firestore);return this._mutations=this._mutations.concat(new Ji(n._key,Ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function br(t,e){if((t=at(t)).firestore!==e)throw new q(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pO=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Bs(n)}get(n){const r=br(n,this._firestore),s=new tO(this._firestore);return this._transaction.lookup([r._key]).then((i=>{if(!i||i.length!==1)return ne();const o=i[0];if(o.isFoundDocument())return new fa(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new fa(this._firestore,s,r._key,null,r.converter);throw ne()}))}set(n,r,s){const i=br(n,this._firestore),o=Kl(i.converter,r,s),a=Ul(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=br(n,this._firestore);let a;return a=typeof(r=at(r))=="string"||r instanceof jr?Md(this._dataReader,"Transaction.update",o._key,r,s,i):Od(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=br(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=br(e,this._firestore),r=new js(this._firestore);return super.get(e).then((s=>new sr(this._firestore,r,n._key,s._document,new ds(!1,!1),n.converter)))}};function mO(t,e,n){t=Pe(t,st);const r=Object.assign(Object.assign({},fO),n);return(function(i){if(i.maxAttempts<1)throw new q(F.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(i,o,a){const c=new At;return i.asyncQueue.enqueueAndForget((async()=>{const u=await Tk(i);new wk(i.asyncQueue,u,a,o,c).au()})),c.promise})(kt(t),(s=>e(new pO(t,s))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(){return new Da("deleteField")}function _O(){return new Dd("serverTimestamp")}function yO(...t){return new Vd("arrayUnion",t)}function vO(...t){return new Nd("arrayRemove",t)}function wO(t){return new kd("increment",t)}(function(e,n=!0){(function(s){zi=s})(Uf),Ci(new Is("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new st(new AD(r.getProvider("auth-internal")),new CD(r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lr(u.options.projectId,h)})(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Yn(_g,"4.7.3",e),Yn(_g,"4.7.3","esm2017")})();const EO="@firebase/firestore-compat",TO="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new q("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(){if(typeof Uint8Array>"u")throw new q("unimplemented","Uint8Arrays are not available in this environment.")}function x_(){if(!tV())throw new q("unimplemented","Blobs are unavailable in Firestore in this environment.")}class da{constructor(e){this._delegate=e}static fromBase64String(e){return x_(),new da(Ln.fromBase64String(e))}static fromUint8Array(e){return C_(),new da(Ln.fromUint8Array(e))}toBase64(){return x_(),this._delegate.toBase64()}toUint8Array(){return C_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t){return IO(t,["next","error","complete"])}function IO(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{enableIndexedDbPersistence(e,n){return kk(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Ok(e._delegate)}clearIndexedDbPersistence(e){return Mk(e._delegate)}}class XT{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Lr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&On("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){xk(this._delegate,e,n,r)}enableNetwork(){return Fk(this._delegate)}disableNetwork(){return Bk(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,xT("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Lk(this._delegate)}onSnapshotsInSync(e){return hO(this._delegate,e)}get app(){if(!this._appCompat)throw new q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $i(this,OT(this._delegate,e))}catch(n){throw Ut(n,"collection()","Firestore.collection()")}}doc(e){try{return new fn(this,ol(this._delegate,e))}catch(n){throw Ut(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bt(this,Dk(this._delegate,e))}catch(n){throw Ut(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return mO(this._delegate,n=>e(new ZT(this,n)))}batch(){return kt(this._delegate),new eI(new dO(this._delegate,e=>Na(this._delegate,e)))}loadBundle(e){return Uk(this._delegate,e)}namedQuery(e){return jk(this._delegate,e).then(n=>n?new Bt(this,n):null)}}class zl extends $d{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(new Ln(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return fn.forKey(n,this.firestore,null)}}function AO(t){ED(t)}class ZT{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new zl(e)}get(e){const n=ps(e);return this._delegate.get(n).then(r=>new pa(this._firestore,new sr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=ps(e);return r?(Gd("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=ps(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=ps(e);return this._delegate.delete(n),this}}class eI{constructor(e){this._delegate=e}set(e,n,r){const s=ps(e);return r?(Gd("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=ps(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=ps(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Vs{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new qo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ma(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Vs.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new Vs(e,new zl(e),n),s.set(n,i)),i}}Vs.INSTANCES=new WeakMap;class fn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new zl(e)}static forPath(e,n,r){if(e.length%2!==0)throw new q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fn(n,new Ye(n._delegate,r,new Y(e)))}static forKey(e,n,r){return new fn(n,new Ye(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $i(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $i(this.firestore,OT(this._delegate,e))}catch(n){throw Ut(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=at(e),e instanceof Ye?MT(this._delegate,e):!1}set(e,n){n=Gd("DocumentReference.set",n);try{return n?S_(this._delegate,e,n):S_(this._delegate,e)}catch(r){throw Ut(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?P_(this._delegate,e):P_(this._delegate,e,n,...r)}catch(s){throw Ut(s,"updateDoc()","DocumentReference.update()")}}delete(){return lO(this._delegate)}onSnapshot(...e){const n=tI(e),r=nI(e,s=>new pa(this.firestore,new sr(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return YT(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=sO(this._delegate):e?.source==="server"?n=iO(this._delegate):n=rO(this._delegate),n.then(r=>new pa(this.firestore,new sr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new fn(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ut(t,e,n){return t.message=t.message.replace(e,n),t}function tI(t){for(const e of t)if(typeof e=="object"&&!Qh(e))return e;return{}}function nI(t,e){var n,r;let s;return Qh(t[0])?s=t[0]:Qh(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:i=>{s.next&&s.next(e(i))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class pa{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new fn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return JT(this._delegate,e._delegate)}}class ma extends pa{data(e){const n=this._delegate.data(e);return this._delegate._converter||TD(n!==void 0),n}}class Bt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new zl(e)}where(e,n,r){try{return new Bt(this.firestore,vr(this._delegate,zk(e,n,r)))}catch(s){throw Ut(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Bt(this.firestore,vr(this._delegate,Wk(e,n)))}catch(r){throw Ut(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Bt(this.firestore,vr(this._delegate,Qk(e)))}catch(n){throw Ut(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Bt(this.firestore,vr(this._delegate,Jk(e)))}catch(n){throw Ut(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Bt(this.firestore,vr(this._delegate,Yk(...e)))}catch(n){throw Ut(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Bt(this.firestore,vr(this._delegate,Xk(...e)))}catch(n){throw Ut(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Bt(this.firestore,vr(this._delegate,Zk(...e)))}catch(n){throw Ut(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Bt(this.firestore,vr(this._delegate,eO(...e)))}catch(n){throw Ut(n,"endAt()","Query.endAt()")}}isEqual(e){return LT(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=aO(this._delegate):e?.source==="server"?n=cO(this._delegate):n=oO(this._delegate),n.then(r=>new Jh(this.firestore,new $r(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=tI(e),r=nI(e,s=>new Jh(this.firestore,new $r(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return YT(this._delegate,n,r)}withConverter(e){return new Bt(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class RO{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ma(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Jh{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Bt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ma(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new RO(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ma(this._firestore,r))})}isEqual(e){return JT(this._delegate,e._delegate)}}class $i extends Bt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fn(this.firestore,e):null}doc(e){try{return e===void 0?new fn(this.firestore,ol(this._delegate)):new fn(this.firestore,ol(this._delegate,e))}catch(n){throw Ut(n,"doc()","CollectionReference.doc()")}}add(e){return uO(this._delegate,e).then(n=>new fn(this.firestore,n))}isEqual(e){return MT(this._delegate,e._delegate)}withConverter(e){return new $i(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ps(t){return Pe(t,Ye)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(...e){this._delegate=new jr(...e)}static documentId(){return new Hd(He.keyField().canonicalString())}isEqual(e){return e=at(e),e instanceof jr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this._delegate=e}static serverTimestamp(){const e=_O();return e._methodName="FieldValue.serverTimestamp",new hs(e)}static delete(){const e=gO();return e._methodName="FieldValue.delete",new hs(e)}static arrayUnion(...e){const n=yO(...e);return n._methodName="FieldValue.arrayUnion",new hs(n)}static arrayRemove(...e){const n=vO(...e);return n._methodName="FieldValue.arrayRemove",new hs(n)}static increment(e){const n=wO(e);return n._methodName="FieldValue.increment",new hs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO={Firestore:XT,GeoPoint:Fl,Timestamp:ze,Blob:da,Transaction:ZT,WriteBatch:eI,DocumentReference:fn,DocumentSnapshot:pa,Query:Bt,QueryDocumentSnapshot:ma,QuerySnapshot:Jh,CollectionReference:$i,FieldPath:Hd,FieldValue:hs,setLogLevel:AO,CACHE_SIZE_UNLIMITED:Nk};function PO(t,e){t.INTERNAL.registerComponent(new Is("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},SO)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t){PO(t,(e,n)=>new XT(e,n,new bO)),t.registerVersion(EO,TO)}CO(ea);ea.apps.length===0&&ea.initializeApp({apiKey:"AIzaSyBiI-MHTxhqNpgJ6FMJaVTN3lcBMmL9cqU",authDomain:"tsg-slackbot.firebaseapp.com",projectId:"tsg-slackbot",storageBucket:"tsg-slackbot.appspot.com",messagingSenderId:"382537830947",appId:"1:382537830947:web:41aa27c8a7261f0fe61796",measurementId:"G-NZD98Q80NG"});const xO=ea.apps[0],Bn=xO.firestore(),Ao=Bn.collection("achievements"),DO=()=>({isInitList:null,list:[],isInitLatestAchievemnts:null,latestAchievements:[],isInitUsers:{},isInitNames:{},isInitData:{}}),VO={initList(t){t.isInitList=!0},initLatestAchievements(t){t.isInitLatestAchievemnts=!0},initData(t,e){t.isInitData[e]=!0},setUser(t,{id:e,achievements:n}){t.isInitUsers[e]=!0,t[`user_${e}`]=n},setName(t,{name:e,achievements:n}){t.isInitNames[e]=!0,t[`name_${e}`]=n}},NO={list:t=>t.list,initLatestAchievements:t=>t.latestAchievements,data:t=>t.data,getByUser:t=>(e=>t.isInitList?t.list.filter(n=>n.user===e):t[`user_${e}`]||[]),getByName:t=>(e=>t.isInitList?t.list.filter(n=>n.name===e):t[`name_${e}`]||[])},kO={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:pn(async({bindFirestoreRef:t})=>{await t("list",Ao)}),async initLatestAchievements({state:t,dispatch:e,commit:n}){t.isInitLatestAchievemnts||(await e("bindLatestAchievements"),n("initLatestAchievements"))},bindLatestAchievements:pn(async({bindFirestoreRef:t})=>{await t("latestAchievements",Ao.orderBy("date","desc").limit(15))}),bind:pn(async({bindFirestoreRef:t,state:e,commit:n},r)=>{if(e.isInitData[r]===!0||e.isInitList===!0)return;const s=Ao.doc(r);await t(`data_${r}`,s),n("initData",r)}),fetchByUser:async({state:t,commit:e},n)=>{if(t.isInitUsers[n]===!0||t.isInitList===!0)return;const r=await Ao.where("user","==",n).get();e({type:"setUser",id:n,achievements:r.docs.map(s=>s.data())})},fetchByName:async({state:t,commit:e},n)=>{if(t.isInitNames[n]===!0||t.isInitList===!0)return;const r=await Ao.where("name","==",n).get();e({type:"setName",name:n,achievements:r.docs.map(s=>s.data())})}},OO=Object.freeze(Object.defineProperty({__proto__:null,actions:kO,getters:NO,mutations:VO,state:DO},Symbol.toStringTag,{value:"Module"})),MO=Bn.collection("achievement_data"),LO=()=>({isInitList:null,list:[]}),FO={initList(t){t.isInitList=!0}},BO={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n}),getByCounter:t=>(e=>t.list.filter(n=>n.counter===e).sort((n,r)=>n.value-r.value)),getByCategory:t=>(e=>t.list.filter(n=>n.category===e).sort((n,r)=>(r.count||0)-(n.count||0)))},UO={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:pn(async({bindFirestoreRef:t})=>{await t("list",MO)})},jO=Object.freeze(Object.defineProperty({__proto__:null,actions:UO,getters:BO,mutations:FO,state:LO},Symbol.toStringTag,{value:"Module"})),$O=Bn.collection("achievement_stats_by_category"),qO=()=>({isInitList:null,list:[]}),GO={initList(t){t.isInitList=!0}},HO={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},KO={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:pn(async({bindFirestoreRef:t})=>{await t("list",$O)})},zO=Object.freeze(Object.defineProperty({__proto__:null,actions:KO,getters:HO,mutations:GO,state:qO},Symbol.toStringTag,{value:"Module"})),WO=Bn.collection("achievement_stats_by_difficulty"),QO=()=>({isInitList:null,list:[]}),JO={initList(t){t.isInitList=!0}},YO={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},XO={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:pn(async({bindFirestoreRef:t})=>{await t("list",WO)})},ZO=Object.freeze(Object.defineProperty({__proto__:null,actions:XO,getters:YO,mutations:JO,state:QO},Symbol.toStringTag,{value:"Module"})),e1=Bn.collection("achievement_stats_by_month"),t1=()=>({isInitList:null,list:[]}),n1={initList(t){t.isInitList=!0}},r1={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},s1={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:pn(async({bindFirestoreRef:t})=>{await t("list",e1)})},i1=Object.freeze(Object.defineProperty({__proto__:null,actions:s1,getters:r1,mutations:n1,state:t1},Symbol.toStringTag,{value:"Module"})),o1=Bn.collection("slow_quiz_games"),a1=()=>({isInitList:null,list:[]}),c1={initList(t){t.isInitList=!0}},l1={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},u1={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:pn(async({bindFirestoreRef:t,commit:e})=>{await t("list",o1.where("status","==","finished").orderBy("finishDate","desc")),e("initList")})},h1=Object.freeze(Object.defineProperty({__proto__:null,actions:u1,getters:l1,mutations:c1,state:a1},Symbol.toStringTag,{value:"Module"})),D_=Bn.collection("users");Bn.collection("achievements");const f1=()=>({isInitList:null,list:[],isInitData:{},data:{}}),d1={initList(t){t.isInitList=!0},initData(t,e){t.isInitData[e]=!0}},p1={list:t=>t.list,data:t=>t.data,getById:t=>(e=>{if(t[`data_${e}`]!==void 0)return t[`data_${e}`];const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},m1={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:pn(async({bindFirestoreRef:t,commit:e})=>{await t("list",D_),e("initList")}),bindById:pn(async({bindFirestoreRef:t,state:e,dispatch:n,getters:r,commit:s},i)=>{const o=r.getById(i);if(o!==void 0&&e.isInitData[o.id]===!0)return;const a=await D_.doc(i).get();if(a.exists){const c=t(`data_${a.id}`,a.ref);s("initData",a.id),await Promise.all([c,n("achievements/fetchByUser",a.id,{root:!0})])}})},g1=Object.freeze(Object.defineProperty({__proto__:null,actions:m1,getters:p1,mutations:d1,state:f1},Symbol.toStringTag,{value:"Module"})),_1=Bn.collection("oneiromancy_messages"),y1=Bn.collection("oneiromancy_criteria"),v1=()=>({isInitOneiromancyMessages:null,oneiromancyMessages:[],isInitOneiromancyCriteria:null,oneiromancyCriteria:[]}),w1={initOneiromancyMessages(t){t.isInitOneiromancyMessages=!0},initOneiromancyCriteria(t){t.isInitOneiromancyCriteria=!0}},E1={oneiromancyMessages:t=>t.oneiromancyMessages,oneiromancyCriteria:t=>t.oneiromancyCriteria},T1={async initOneiromancyMessages({state:t,dispatch:e,commit:n}){t.isInitOneiromancyMessages!==!0&&(await e("bindOneiromancyMessages"),n("initOneiromancyMessages"))},bindOneiromancyMessages:pn(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyMessages",_1.orderBy("message.ts","desc")),e("initOneiromancyMessages")}),async initOneiromancyCriteria({state:t,dispatch:e,commit:n}){t.isInitOneiromancyCriteria!==!0&&(await e("bindOneiromancyCriteria"),n("initOneiromancyCriteria"))},bindOneiromancyCriteria:pn(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyCriteria",y1.orderBy("point","desc")),e("initOneiromancyCriteria")})},I1=Object.freeze(Object.defineProperty({__proto__:null,actions:T1,getters:E1,mutations:w1,state:v1},Symbol.toStringTag,{value:"Module"})),b1=()=>({isUnauthorized:!1,isInitUsers:!1,isInitTopicMessages:!1,users:[],userMap:new Map,topicMessages:[],topicMessagesMap:new Map}),A1={setUsers(t,e){t.isInitUsers=!0,t.users=e,t.userMap=new Map(e.map(n=>[n.id,n]))},setTopicMessages(t,e){t.isInitTopicMessages=!0,t.topicMessages=e.map(n=>({...n,randomSortKey:Math.random()})),t.topicMessagesMap=new Map(t.topicMessages.map(n=>[n.message.ts,n]))},addTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!0,n.likes=n.likes.concat([null]))},removeTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!1,n.likes=n.likes.slice(1))},isUnauthorized(t){t.isUnauthorized=!0}},R1={users:t=>t.users,getUser:t=>(e=>{const n=t.userMap.get(e);return n===void 0?{id:e}:n}),topicMessages:t=>t.topicMessages,getTopicMessage:t=>(e=>{const n=t.topicMessagesMap.get(e);return n===void 0?{ts:e}:n})},S1={async initUsers({state:t,commit:e}){if(!t.isInitUsers)try{const n=await fetch("https://slackbot-api.tsg.ne.jp/slack/users",{credentials:"include"});if(!n.ok){if(n.status===401){e("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();e("setUsers",r)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))e("isUnauthorized");else throw n}},async initTopicMessages({state:t,commit:e}){if(!t.isInitTopicMessages)try{const n=await fetch("https://slackbot-api.tsg.ne.jp/topic/topics",{credentials:"include"});if(!n.ok){if(n.status===401){e("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();e("setTopicMessages",r)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))e("isUnauthorized");else throw n}},async likeTopicMessage({commit:t},{ts:e}){try{const n=await fetch(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,{method:"PUT",body:"",credentials:"include",headers:{"Content-Type":"text/plain"}});if(!n.ok){if(n.status===401){t("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}t("addTopicMessageLike",e)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))t("isUnauthorized");else throw n}},async unlikeTopicMessage({commit:t},{ts:e}){try{const n=await fetch(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,{method:"DELETE",credentials:"include"});if(!n.ok){if(n.status===401){t("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}t("removeTopicMessageLike",e)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))t("isUnauthorized");else throw n}}},P1=Object.freeze(Object.defineProperty({__proto__:null,actions:S1,getters:R1,mutations:A1,state:b1},Symbol.toStringTag,{value:"Module"})),C1=Fn(t=>{const e=EC({mutations:{...VC},modules:{achievements:{namespaced:!0,...OO},achievementData:{namespaced:!0,...jO},achievementStatsByCategory:{namespaced:!0,...zO},achievementStatsByDifficulty:{namespaced:!0,...ZO},achievementStatsByMonth:{namespaced:!0,...i1},slowQuizGames:{namespaced:!0,...h1},users:{namespaced:!0,...g1},oneiromancies:{namespaced:!0,...I1},slackInfos:{namespaced:!0,...P1}}});return t.vueApp.use(e),{provide:{store:e}}}),x1=[d0,y0,QP,JP,YP,XP,eC,tC,sC,C1],rI=(t="RouteProvider")=>qr({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,r=e.route,s={};for(const i in e.route)Object.defineProperty(s,i,{get:()=>n===e.renderKey?e.route[i]:r[i],enumerable:!0});return Cr(Ts,Cn(s)),()=>e.vnode?Vt(e.vnode,{ref:e.vnodeRef}):e.vnode}}),D1=rI(),V_=new WeakMap,V1=qr({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:r}){const s=ut(),i=Jn(),o=Nt(Ts,null);let a;r({pageRef:i});const c=Nt(Rv,null);let u;const h=s.deferHydration();if(s.isHydrating){const p=s.hooks.hookOnce("app:error",h);sn().beforeEach(p)}t.pageKey&&xr(()=>t.pageKey,(p,m)=>{p!==m&&s.callHook("page:loading:start")});let f=!1;{const p=sn().beforeResolve(()=>{f=!1});va(()=>{p()})}return()=>Vt(Wv,{name:t.name,route:t.route,...e},{default:p=>{const m=k1(o,p.route,p.Component),y=o&&o.matched.length===p.route.matched.length;if(!p.Component){if(u&&!y)return u;h();return}if(u&&c&&!c.isCurrent(p.route))return u;if(m&&o&&(!c||c?.isCurrent(o)))return y?u:null;const v=yh(p,t.pageKey),P=O1(o,p.route,p.Component);!s.isHydrating&&a===v&&!P&&Ei(()=>{f=!0,s.callHook("page:loading:end")}),a=v;const N=!!(t.transition??p.route.meta.pageTransition??bm),V=N&&N1([t.transition,p.route.meta.pageTransition,bm,{onAfterLeave(){delete s._runningTransition,s.callHook("page:transition:finish",p.Component)}}]),w=t.keepalive??p.route.meta.keepalive??hS;return u=Jv(N&&V,MP(w,Vt(_f,{suspensible:!0,onPending:()=>{N&&(s._runningTransition=!0),s.callHook("page:start",p.Component)},onResolve:()=>{Ei(()=>s.callHook("page:finish",p.Component).then(()=>{if(delete s._runningTransition,!f&&!P)return f=!0,s.callHook("page:loading:end")}).finally(h))}},{default:()=>{const C={key:v||void 0,vnode:n.default?M1(n.default,p):p.Component,route:p.route,renderKey:v||void 0,trackRootNodes:N,vnodeRef:i};if(!w)return Vt(D1,C);const k=p.Component.type,B=k;let A=V_.get(B);return A||(A=rI(k.name||k.__name),V_.set(B,A)),Vt(A,C)}}))).default(),u}})}});function N1(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?Pf(n.onAfterLeave):void 0});return bv(...e)}function k1(t,e,n){if(!t)return!1;const r=e.matched.findIndex(s=>s.components?.default===n?.type);return!r||r===-1?!1:e.matched.slice(0,r).some((s,i)=>s.components?.default!==t.matched[i]?.components?.default)||n&&yh({route:e,Component:n})!==yh({route:t,Component:n})}function O1(t,e,n){return t?e.matched.findIndex(s=>s.components?.default===n?.type)<e.matched.length-1:!1}function M1(t,e){const n=t(e);return n.length===1?Vt(n[0]):Vt(Dt,void 0,n)}const L1=qr({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>Vt(Ar[t.name],t.layoutProps,e.slots)}}),F1={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},B1=qr({name:"NuxtLayout",inheritAttrs:!1,props:F1,setup(t,e){const n=ut(),r=Nt(Ts),i=!r||r===vl()?Qv():r,o=rn(()=>{let h=$e(t.name)??i?.meta.layout??"default";return h&&!(h in Ar)&&t.fallback&&(h=$e(t.fallback)),h}),a=wi();e.expose({layoutRef:a});const c=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",c);sn().beforeEach(h)}let u;return()=>{const h=o.value&&o.value in Ar,f=i?.meta.layoutTransition??uS,p=u;return u=o.value,Jv(h&&f,{default:()=>Vt(_f,{suspensible:!0,onResolve:()=>{Ei(c)}},{default:()=>Vt(U1,{layoutProps:tv(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:m=>m!==p&&m===o.value,hasTransition:!!f},e.slots)})}).default()}}}),U1=qr({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&Cr(Rv,{isCurrent:i=>n===(i.meta.layout??"default")});const r=Nt(Ts);if(r&&r===vl()){const i=Qv(),o={};for(const a in i){const c=a;Object.defineProperty(o,c,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[c]:r[c]})}Cr(Ts,Cn(o))}return()=>!n||typeof n=="string"&&!(n in Ar)?e.slots.default?.():Vt(L1,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),j1=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},$1={};function q1(t,e){const n=V1,r=B1;return hn(),Pn(r,null,{default:uf(()=>[et(n)]),_:1})}const G1=j1($1,[["render",q1]]),H1={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error;n.stack&&n.stack.split(`
`).splice(1).map(f=>({text:f.replace("webpack:/","").replace(".vue",".js").trim(),internal:f.includes("node_modules")&&!f.includes(".cache")||f.includes("internal")||f.includes("new Promise")})).map(f=>`<span class="stack${f.internal?" internal":""}">${f.text}</span>`).join(`
`);const r=Number(n.statusCode||500),s=r===404,i=n.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=s?Ju(()=>vn(()=>import("./CyDaLiCf.js"),__vite__mapDeps([24,3,25,26]),import.meta.url)):Ju(()=>vn(()=>import("./B_Z-27y6.js"),__vite__mapDeps([27,25,28]),import.meta.url));return(f,p)=>(hn(),Pn($e(h),LI(Zy({statusCode:$e(r),statusMessage:$e(i),description:$e(o),stack:$e(a)})),null,16))}},K1={key:0},N_={__name:"nuxt-root",setup(t){const e=()=>null,n=ut(),r=n.deferHydration();if(n.isHydrating){const u=n.hooks.hookOnce("app:error",r);sn().beforeEach(u)}const s=!1;Cr(Ts,vl()),n.hooks.callHookWith(u=>u.map(h=>h()),"vue:setup");const i=wl(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;Ay((u,h,f)=>{if(n.hooks.callHook("vue:error",u,h,f).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",u),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,u),!1;if(Pv(u)&&(u.fatal||u.unhandled))return n.runWithContext(()=>ss(u)),!1});const c=!1;return(u,h)=>(hn(),Pn(_f,{onResolve:$e(r)},{default:uf(()=>[$e(o)?(hn(),vA("div",K1)):$e(i)?(hn(),Pn($e(H1),{key:1,error:$e(i)},null,8,["error"])):$e(c)?(hn(),Pn($e(e),{key:2,context:$e(c)},null,8,["context"])):$e(s)?(hn(),Pn(Fb($e(s)),{key:3})):(hn(),Pn($e(G1),{key:4}))]),_:1},8,["onResolve"]))}};let k_;{let t;k_=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),r=n?iR(N_):sR(N_),s=mS({vueApp:r});async function i(o){await s.callHook("app:error",o),s.payload.error||=vs(o)}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)}),!n&&Am.id&&s.hook("app:suspense:resolve",()=>{document.getElementById(Am.id)?.remove()});try{await yS(s,x1)}catch(o){i(o)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(fS),await s.hooks.callHook("app:mounted",r),await Ei()}catch(o){i(o)}return r},t=k_().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{Fc as $,rM as A,Y1 as B,Q1 as C,iM as D,z1 as E,Dt as F,X1 as G,hl as H,fl as I,J1 as J,sn as K,Cf as L,ng as M,va as N,nM as O,Ts as P,uv as Q,PS as R,rC as S,rn as T,eM as U,ks as V,wf as W,yl as X,Z1 as Y,DR as Z,j1 as _,Xy as a,et as b,vA as c,ev as d,ut as e,Dv as f,qr as g,df as h,Nt as i,Vt as j,ff as k,by as l,xr as m,Se as n,hn as o,cf as p,Ei as q,Jn as r,wi as s,jI as t,tM as u,CA as v,uf as w,W1 as x,Pn as y,sM as z};
