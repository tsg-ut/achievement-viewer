const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DQMN8C8o.js","./DwfEbU-y.js","./Cpj98o6Y.js","./DWi_eH_I.js","./CoBj5HAs.js","./index.4iF0p84D.css","./S06JYVEJ.js","./DfAzwDaU.js","./DnES6ZWg.js","./CdjJNdvM.js","./topic.UPFfNaHU.css","./1vf0Zs1h.js","./index.BZVQuXzV.css","./b8ThfLaH.js","./Wuodhnj2.js","./slow-quiz.XCwighz9.css","./ehbSTN-v.js","./BEPSkY2s.js","./AchievementCard.DIPBvmTw.css","./Fal2vt9I.js","./oneiromancy.D5JIcBwv.css","./7_S02YZe.js","./tH3y0nE7.js","./index.B09IHu_1.css","./CZSXG4hA.js","./twenty-questions._MGYqerZ.css","./CAK7je82.js","./default.5rRBYkF3.css","./B78ev5Uj.js","./CC1sUnER.js","./error-404.BLrjNXsr.css","./DbsU1BWQ.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.28
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ed(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Be={},Ni=[],Gn=()=>{},ov=()=>!1,sc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),td=t=>t.startsWith("onUpdate:"),pt=Object.assign,nd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},bA=Object.prototype.hasOwnProperty,Ne=(t,e)=>bA.call(t,e),le=Array.isArray,ki=t=>To(t)==="[object Map]",Zu=t=>To(t)==="[object Set]",qm=t=>To(t)==="[object Date]",AA=t=>To(t)==="[object RegExp]",de=t=>typeof t=="function",Qe=t=>typeof t=="string",Rn=t=>typeof t=="symbol",xe=t=>t!==null&&typeof t=="object",av=t=>(xe(t)||de(t))&&de(t.then)&&de(t.catch),cv=Object.prototype.toString,To=t=>cv.call(t),RA=t=>To(t).slice(8,-1),uv=t=>To(t)==="[object Object]",el=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ms=ed(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),tl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},SA=/-\w/g,_n=tl(t=>t.replace(SA,e=>e.slice(1).toUpperCase())),PA=/\B([A-Z])/g,ri=tl(t=>t.replace(PA,"-$1").toLowerCase()),nl=tl(t=>t.charAt(0).toUpperCase()+t.slice(1)),sh=tl(t=>t?`on${nl(t)}`:""),qr=(t,e)=>!Object.is(t,e),Oi=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},lv=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},rd=t=>{const e=parseFloat(t);return isNaN(e)?t:e},hv=t=>{const e=Qe(t)?Number(t):NaN;return isNaN(e)?t:e};let Hm;const rl=()=>Hm||(Hm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function sl(t){if(le(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Qe(r)?DA(r):sl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Qe(t)||xe(t))return t}const CA=/;(?![^(]*\))/g,xA=/:([^]+)/,VA=/\/\*[^]*?\*\//g;function DA(t){const e={};return t.replace(VA,"").split(CA).forEach(n=>{if(n){const r=n.split(xA);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function il(t){let e="";if(Qe(t))e=t;else if(le(t))for(let n=0;n<t.length;n++){const r=il(t[n]);r&&(e+=r+" ")}else if(xe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function NA(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Qe(e)&&(t.class=il(e)),n&&(t.style=sl(n)),t}const kA="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",OA=ed(kA);function fv(t){return!!t||t===""}function MA(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=$s(t[r],e[r]);return n}function $s(t,e){if(t===e)return!0;let n=qm(t),r=qm(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Rn(t),r=Rn(e),n||r)return t===e;if(n=le(t),r=le(e),n||r)return n&&r?MA(t,e):!1;if(n=xe(t),r=xe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!$s(t[o],e[o]))return!1}}return String(t)===String(e)}function dv(t,e){return t.findIndex(n=>$s(n,e))}const pv=t=>!!(t&&t.__v_isRef===!0),LA=t=>Qe(t)?t:t==null?"":le(t)||xe(t)&&(t.toString===cv||!de(t.toString))?pv(t)?LA(t.value):JSON.stringify(t,mv,2):String(t),mv=(t,e)=>pv(e)?mv(t,e.value):ki(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[ih(r,i)+" =>"]=s,n),{})}:Zu(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ih(n))}:Rn(e)?ih(e):xe(e)&&!le(e)&&!uv(e)?String(e):e,ih=(t,e="")=>{var n;return Rn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.28
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zt;class gv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.__v_skip=!0,this.parent=zt,!e&&zt&&(this.index=(zt.scopes||(zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=zt;try{return zt=this,e()}finally{zt=n}}}on(){++this._on===1&&(this.prevScope=zt,zt=this)}off(){this._on>0&&--this._on===0&&(zt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function _v(t){return new gv(t)}function yv(){return zt}let Ue;const oh=new WeakSet;class vv{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,zt&&zt.active&&zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,oh.has(this)&&(oh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||wv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Gm(this),Tv(this);const e=Ue,n=Tn;Ue=this,Tn=!0;try{return this.fn()}finally{Iv(this),Ue=e,Tn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)od(e);this.deps=this.depsTail=void 0,Gm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?oh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){jh(this)&&this.run()}get dirty(){return jh(this)}}let Ev=0,ma,ga;function wv(t,e=!1){if(t.flags|=8,e){t.next=ga,ga=t;return}t.next=ma,ma=t}function sd(){Ev++}function id(){if(--Ev>0)return;if(ga){let e=ga;for(ga=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ma;){let e=ma;for(ma=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Tv(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Iv(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),od(r),FA(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function jh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(bv(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function bv(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Va)||(t.globalVersion=Va,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!jh(t))))return;t.flags|=2;const e=t.dep,n=Ue,r=Tn;Ue=t,Tn=!0;try{Tv(t);const s=t.fn(t._value);(e.version===0||qr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ue=n,Tn=r,Iv(t),t.flags&=-3}}function od(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)od(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function FA(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Tn=!0;const Av=[];function hr(){Av.push(Tn),Tn=!1}function fr(){const t=Av.pop();Tn=t===void 0?!0:t}function Gm(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ue;Ue=void 0;try{e()}finally{Ue=n}}}let Va=0;class BA{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ad{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ue||!Tn||Ue===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ue)n=this.activeLink=new BA(Ue,this),Ue.deps?(n.prevDep=Ue.depsTail,Ue.depsTail.nextDep=n,Ue.depsTail=n):Ue.deps=Ue.depsTail=n,Rv(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ue.depsTail,n.nextDep=void 0,Ue.depsTail.nextDep=n,Ue.depsTail=n,Ue.deps===n&&(Ue.deps=r)}return n}trigger(e){this.version++,Va++,this.notify(e)}notify(e){sd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{id()}}}function Rv(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Rv(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const fu=new WeakMap,Ls=Symbol(""),$h=Symbol(""),Da=Symbol("");function xt(t,e,n){if(Tn&&Ue){let r=fu.get(t);r||fu.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new ad),s.map=r,s.key=n),s.track()}}function sr(t,e,n,r,s,i){const o=fu.get(t);if(!o){Va++;return}const a=c=>{c&&c.trigger()};if(sd(),e==="clear")o.forEach(a);else{const c=le(t),l=c&&el(n);if(c&&n==="length"){const h=Number(r);o.forEach((f,p)=>{(p==="length"||p===Da||!Rn(p)&&p>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(Da)),e){case"add":c?l&&a(o.get("length")):(a(o.get(Ls)),ki(t)&&a(o.get($h)));break;case"delete":c||(a(o.get(Ls)),ki(t)&&a(o.get($h)));break;case"set":ki(t)&&a(o.get(Ls));break}}id()}function UA(t,e){const n=fu.get(t);return n&&n.get(e)}function mi(t){const e=Re(t);return e===t?e:(xt(e,"iterate",Da),on(t)?e:e.map(Sn))}function ol(t){return xt(t=Re(t),"iterate",Da),t}function Or(t,e){return Wn(t)?qi(Hr(t)?Sn(e):e):Sn(e)}const jA={__proto__:null,[Symbol.iterator](){return ah(this,Symbol.iterator,t=>Or(this,t))},concat(...t){return mi(this).concat(...t.map(e=>le(e)?mi(e):e))},entries(){return ah(this,"entries",t=>(t[1]=Or(this,t[1]),t))},every(t,e){return Zn(this,"every",t,e,void 0,arguments)},filter(t,e){return Zn(this,"filter",t,e,n=>n.map(r=>Or(this,r)),arguments)},find(t,e){return Zn(this,"find",t,e,n=>Or(this,n),arguments)},findIndex(t,e){return Zn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Zn(this,"findLast",t,e,n=>Or(this,n),arguments)},findLastIndex(t,e){return Zn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Zn(this,"forEach",t,e,void 0,arguments)},includes(...t){return ch(this,"includes",t)},indexOf(...t){return ch(this,"indexOf",t)},join(t){return mi(this).join(t)},lastIndexOf(...t){return ch(this,"lastIndexOf",t)},map(t,e){return Zn(this,"map",t,e,void 0,arguments)},pop(){return Qo(this,"pop")},push(...t){return Qo(this,"push",t)},reduce(t,...e){return zm(this,"reduce",t,e)},reduceRight(t,...e){return zm(this,"reduceRight",t,e)},shift(){return Qo(this,"shift")},some(t,e){return Zn(this,"some",t,e,void 0,arguments)},splice(...t){return Qo(this,"splice",t)},toReversed(){return mi(this).toReversed()},toSorted(t){return mi(this).toSorted(t)},toSpliced(...t){return mi(this).toSpliced(...t)},unshift(...t){return Qo(this,"unshift",t)},values(){return ah(this,"values",t=>Or(this,t))}};function ah(t,e,n){const r=ol(t),s=r[e]();return r!==t&&!on(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const $A=Array.prototype;function Zn(t,e,n,r,s,i){const o=ol(t),a=o!==t&&!on(t),c=o[e];if(c!==$A[e]){const f=c.apply(t,i);return a?Sn(f):f}let l=n;o!==t&&(a?l=function(f,p){return n.call(this,Or(t,f),p,t)}:n.length>2&&(l=function(f,p){return n.call(this,f,p,t)}));const h=c.call(o,l,r);return a&&s?s(h):h}function zm(t,e,n,r){const s=ol(t);let i=n;return s!==t&&(on(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,Or(t,a),c,t)}),s[e](i,...r)}function ch(t,e,n){const r=Re(t);xt(r,"iterate",Da);const s=r[e](...n);return(s===-1||s===!1)&&al(n[0])?(n[0]=Re(n[0]),r[e](...n)):s}function Qo(t,e,n=[]){hr(),sd();const r=Re(t)[e].apply(t,n);return id(),fr(),r}const qA=ed("__proto__,__v_isRef,__isVue"),Sv=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Rn));function HA(t){Rn(t)||(t=String(t));const e=Re(this);return xt(e,"has",t),e.hasOwnProperty(t)}class Pv{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?eR:Dv:i?Vv:xv).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=le(e);if(!s){let c;if(o&&(c=jA[n]))return c;if(n==="hasOwnProperty")return HA}const a=Reflect.get(e,n,at(e)?e:r);if((Rn(n)?Sv.has(n):qA(n))||(s||xt(e,"get",n),i))return a;if(at(a)){const c=o&&el(n)?a:a.value;return s&&xe(c)?Hh(c):c}return xe(a)?s?Hh(a):_r(a):a}}class Cv extends Pv{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=le(e)&&el(n);if(!this._isShallow){const l=Wn(i);if(!on(r)&&!Wn(r)&&(i=Re(i),r=Re(r)),!o&&at(i)&&!at(r))return l||(i.value=r),!0}const a=o?Number(n)<e.length:Ne(e,n),c=Reflect.set(e,n,r,at(e)?e:s);return e===Re(s)&&(a?qr(r,i)&&sr(e,"set",n,r):sr(e,"add",n,r)),c}deleteProperty(e,n){const r=Ne(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&sr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Rn(n)||!Sv.has(n))&&xt(e,"has",n),r}ownKeys(e){return xt(e,"iterate",le(e)?"length":Ls),Reflect.ownKeys(e)}}class GA extends Pv{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const zA=new Cv,KA=new GA,WA=new Cv(!0);const qh=t=>t,kc=t=>Reflect.getPrototypeOf(t);function QA(t,e,n){return function(...r){const s=this.__v_raw,i=Re(s),o=ki(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=s[t](...r),h=n?qh:e?qi:Sn;return!e&&xt(i,"iterate",c?$h:Ls),pt(Object.create(l),{next(){const{value:f,done:p}=l.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}}})}}function Oc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function JA(t,e){const n={get(s){const i=this.__v_raw,o=Re(i),a=Re(s);t||(qr(s,a)&&xt(o,"get",s),xt(o,"get",a));const{has:c}=kc(o),l=e?qh:t?qi:Sn;if(c.call(o,s))return l(i.get(s));if(c.call(o,a))return l(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&xt(Re(s),"iterate",Ls),s.size},has(s){const i=this.__v_raw,o=Re(i),a=Re(s);return t||(qr(s,a)&&xt(o,"has",s),xt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Re(a),l=e?qh:t?qi:Sn;return!t&&xt(c,"iterate",Ls),a.forEach((h,f)=>s.call(i,l(h),l(f),o))}};return pt(n,t?{add:Oc("add"),set:Oc("set"),delete:Oc("delete"),clear:Oc("clear")}:{add(s){!e&&!on(s)&&!Wn(s)&&(s=Re(s));const i=Re(this);return kc(i).has.call(i,s)||(i.add(s),sr(i,"add",s,s)),this},set(s,i){!e&&!on(i)&&!Wn(i)&&(i=Re(i));const o=Re(this),{has:a,get:c}=kc(o);let l=a.call(o,s);l||(s=Re(s),l=a.call(o,s));const h=c.call(o,s);return o.set(s,i),l?qr(i,h)&&sr(o,"set",s,i):sr(o,"add",s,i),this},delete(s){const i=Re(this),{has:o,get:a}=kc(i);let c=o.call(i,s);c||(s=Re(s),c=o.call(i,s)),a&&a.call(i,s);const l=i.delete(s);return c&&sr(i,"delete",s,void 0),l},clear(){const s=Re(this),i=s.size!==0,o=s.clear();return i&&sr(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=QA(s,t,e)}),n}function cd(t,e){const n=JA(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ne(n,s)&&s in r?n:r,s,i)}const YA={get:cd(!1,!1)},XA={get:cd(!1,!0)},ZA={get:cd(!0,!1)};const xv=new WeakMap,Vv=new WeakMap,Dv=new WeakMap,eR=new WeakMap;function tR(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nR(t){return t.__v_skip||!Object.isExtensible(t)?0:tR(RA(t))}function _r(t){return Wn(t)?t:ud(t,!1,zA,YA,xv)}function $n(t){return ud(t,!1,WA,XA,Vv)}function Hh(t){return ud(t,!0,KA,ZA,Dv)}function ud(t,e,n,r,s){if(!xe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=nR(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Hr(t){return Wn(t)?Hr(t.__v_raw):!!(t&&t.__v_isReactive)}function Wn(t){return!!(t&&t.__v_isReadonly)}function on(t){return!!(t&&t.__v_isShallow)}function al(t){return t?!!t.__v_raw:!1}function Re(t){const e=t&&t.__v_raw;return e?Re(e):t}function rR(t){return!Ne(t,"__v_skip")&&Object.isExtensible(t)&&lv(t,"__v_skip",!0),t}const Sn=t=>xe(t)?_r(t):t,qi=t=>xe(t)?Hh(t):t;function at(t){return t?t.__v_isRef===!0:!1}function ar(t){return Nv(t,!1)}function Hi(t){return Nv(t,!0)}function Nv(t,e){return at(t)?t:new sR(t,e)}class sR{constructor(e,n){this.dep=new ad,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Re(e),this._value=n?e:Sn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||on(e)||Wn(e);e=r?e:Re(e),qr(e,n)&&(this._rawValue=e,this._value=r?e:Sn(e),this.dep.trigger())}}function je(t){return at(t)?t.value:t}function iR(t){return de(t)?t():je(t)}const oR={get:(t,e,n)=>e==="__v_raw"?t:je(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return at(s)&&!at(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function kv(t){return Hr(t)?t:new Proxy(t,oR)}class aR{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=Re(e);let s=!0,i=e;if(!le(e)||!el(String(n)))do s=!al(i)||on(i);while(s&&(i=i.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=je(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&at(this._raw[this._key])){const n=this._object[this._key];if(at(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return UA(this._raw,this._key)}}class cR{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function uR(t,e,n){return at(t)?t:de(t)?new cR(t):xe(t)&&arguments.length>1?lR(t,e,n):ar(t)}function lR(t,e,n){return new aR(t,e,n)}class hR{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ad(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Va-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ue!==this)return wv(this,!0),!0}get value(){const e=this.dep.track();return bv(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function fR(t,e,n=!1){let r,s;return de(t)?r=t:(r=t.get,s=t.set),new hR(r,s,n)}const Mc={},du=new WeakMap;let Ts;function dR(t,e=!1,n=Ts){if(n){let r=du.get(n);r||du.set(n,r=[]),r.push(t)}}function pR(t,e,n=Be){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,l=x=>s?x:on(x)||s===!1||s===0?ir(x,1):ir(x);let h,f,p,m,_=!1,y=!1;if(at(t)?(f=()=>t.value,_=on(t)):Hr(t)?(f=()=>l(t),_=!0):le(t)?(y=!0,_=t.some(x=>Hr(x)||on(x)),f=()=>t.map(x=>{if(at(x))return x.value;if(Hr(x))return l(x);if(de(x))return c?c(x,2):x()})):de(t)?e?f=c?()=>c(t,2):t:f=()=>{if(p){hr();try{p()}finally{fr()}}const x=Ts;Ts=h;try{return c?c(t,3,[m]):t(m)}finally{Ts=x}}:f=Gn,e&&s){const x=f,N=s===!0?1/0:s;f=()=>ir(x(),N)}const C=yv(),k=()=>{h.stop(),C&&C.active&&nd(C.effects,h)};if(i&&e){const x=e;e=(...N)=>{x(...N),k()}}let D=y?new Array(t.length).fill(Mc):Mc;const E=x=>{if(!(!(h.flags&1)||!h.dirty&&!x))if(e){const N=h.run();if(s||_||(y?N.some((U,I)=>qr(U,D[I])):qr(N,D))){p&&p();const U=Ts;Ts=h;try{const I=[N,D===Mc?void 0:y&&D[0]===Mc?[]:D,m];D=N,c?c(e,3,I):e(...I)}finally{Ts=U}}}else h.run()};return a&&a(E),h=new vv(f),h.scheduler=o?()=>o(E,!1):E,m=x=>dR(x,!1,h),p=h.onStop=()=>{const x=du.get(h);if(x){if(c)c(x,4);else for(const N of x)N();du.delete(h)}},e?r?E(!0):D=h.run():o?o(E.bind(null,!0),!0):h.run(),k.pause=h.pause.bind(h),k.resume=h.resume.bind(h),k.stop=k,k}function ir(t,e=1/0,n){if(e<=0||!xe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,at(t))ir(t.value,e,n);else if(le(t))for(let r=0;r<t.length;r++)ir(t[r],e,n);else if(Zu(t)||ki(t))t.forEach(r=>{ir(r,e,n)});else if(uv(t)){for(const r in t)ir(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&ir(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.28
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ic(t,e,n,r){try{return r?t(...r):t()}catch(s){Io(s,e,n)}}function Pn(t,e,n,r){if(de(t)){const s=ic(t,e,n,r);return s&&av(s)&&s.catch(i=>{Io(i,e,n)}),s}if(le(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Pn(t[i],e,n,r));return s}}function Io(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Be;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,c,l)===!1)return}a=a.parent}if(i){hr(),ic(i,null,10,[t,c,l]),fr();return}}mR(t,n,s,r,o)}function mR(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const $t=[];let Mn=-1;const Mi=[];let Mr=null,Ai=0;const Ov=Promise.resolve();let pu=null;function Gi(t){const e=pu||Ov;return t?e.then(this?t.bind(this):t):e}function gR(t){let e=Mn+1,n=$t.length;for(;e<n;){const r=e+n>>>1,s=$t[r],i=Na(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function ld(t){if(!(t.flags&1)){const e=Na(t),n=$t[$t.length-1];!n||!(t.flags&2)&&e>=Na(n)?$t.push(t):$t.splice(gR(e),0,t),t.flags|=1,Mv()}}function Mv(){pu||(pu=Ov.then(Lv))}function Gh(t){le(t)?Mi.push(...t):Mr&&t.id===-1?Mr.splice(Ai+1,0,t):t.flags&1||(Mi.push(t),t.flags|=1),Mv()}function Km(t,e,n=Mn+1){for(;n<$t.length;n++){const r=$t[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;$t.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function mu(t){if(Mi.length){const e=[...new Set(Mi)].sort((n,r)=>Na(n)-Na(r));if(Mi.length=0,Mr){Mr.push(...e);return}for(Mr=e,Ai=0;Ai<Mr.length;Ai++){const n=Mr[Ai];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Mr=null,Ai=0}}const Na=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Lv(t){try{for(Mn=0;Mn<$t.length;Mn++){const e=$t[Mn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ic(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Mn<$t.length;Mn++){const e=$t[Mn];e&&(e.flags&=-2)}Mn=-1,$t.length=0,mu(),pu=null,($t.length||Mi.length)&&Lv()}}let bt=null,Fv=null;function gu(t){const e=bt;return bt=t,Fv=t&&t.type.__scopeId||null,e}function hd(t,e=bt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&wu(-1);const i=gu(e);let o;try{o=t(...s)}finally{gu(i),r._d&&wu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function TF(t,e){if(bt===null)return t;const n=hl(bt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=Be]=e[s];i&&(de(i)&&(i={mounted:i,updated:i}),i.deep&&ir(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Ln(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(hr(),Pn(c,n,8,[t.el,a,t,e]),fr())}}function Gr(t,e){if(Tt){let n=Tt.provides;const r=Tt.parent&&Tt.parent.provides;r===n&&(n=Tt.provides=Object.create(r)),n[t]=e}}function kt(t,e,n=!1){const r=bo();if(r||Fs){let s=Fs?Fs._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&de(e)?e.call(r&&r.proxy):e}}function fd(){return!!(bo()||Fs)}const _R=Symbol.for("v-scx"),yR=()=>kt(_R);function vR(t,e){return dd(t,null,e)}function zr(t,e,n){return dd(t,e,n)}function dd(t,e,n=Be){const{immediate:r,deep:s,flush:i,once:o}=n,a=pt({},n),c=e&&r||!e&&i!=="post";let l;if(Wi){if(i==="sync"){const m=yR();l=m.__watcherHandles||(m.__watcherHandles=[])}else if(!c){const m=()=>{};return m.stop=Gn,m.resume=Gn,m.pause=Gn,m}}const h=Tt;a.call=(m,_,y)=>Pn(m,h,_,y);let f=!1;i==="post"?a.scheduler=m=>{dt(m,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,_)=>{_?m():ld(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=pR(t,e,a);return Wi&&(l?l.push(p):c&&p()),p}function ER(t,e,n){const r=this.proxy,s=Qe(t)?t.includes(".")?Bv(r,t):()=>r[t]:t.bind(r,r);let i;de(e)?i=e:(i=e.handler,n=e);const o=cc(this),a=dd(s,i.bind(r),n);return o(),a}function Bv(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const wR=Symbol("_vte"),Uv=t=>t.__isTeleport,Fn=Symbol("_leaveCb"),Jo=Symbol("_enterCb");function TR(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return md(()=>{t.isMounted=!0}),ac(()=>{t.isUnmounting=!0}),t}const hn=[Function,Array],jv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hn,onEnter:hn,onAfterEnter:hn,onEnterCancelled:hn,onBeforeLeave:hn,onLeave:hn,onAfterLeave:hn,onLeaveCancelled:hn,onBeforeAppear:hn,onAppear:hn,onAfterAppear:hn,onAppearCancelled:hn},$v=t=>{const e=t.subTree;return e.component?$v(e.component):e},IR={name:"BaseTransition",props:jv,setup(t,{slots:e}){const n=bo(),r=TR();return()=>{const s=e.default&&Gv(e.default(),!0);if(!s||!s.length)return;const i=qv(s),o=Re(t),{mode:a}=o;if(r.isLeaving)return uh(i);const c=Wm(i);if(!c)return uh(i);let l=zh(c,o,r,n,f=>l=f);c.type!==it&&zi(c,l);let h=n.subTree&&Wm(n.subTree);if(h&&h.type!==it&&!wn(h,c)&&$v(n).type!==it){let f=zh(h,o,r,n);if(zi(h,f),a==="out-in"&&c.type!==it)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},uh(i);a==="in-out"&&c.type!==it?f.delayLeave=(p,m,_)=>{const y=Hv(r,h);y[String(h.key)]=h,p[Fn]=()=>{m(),p[Fn]=void 0,delete l.delayedLeave,h=void 0},l.delayedLeave=()=>{_(),delete l.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function qv(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==it){e=n;break}}return e}const bR=IR;function Hv(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function zh(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:_,onLeaveCancelled:y,onBeforeAppear:C,onAppear:k,onAfterAppear:D,onAppearCancelled:E}=e,x=String(t.key),N=Hv(n,t),U=(w,R)=>{w&&Pn(w,r,9,R)},I=(w,R)=>{const P=R[1];U(w,R),le(w)?w.every(S=>S.length<=1)&&P():w.length<=1&&P()},T={mode:o,persisted:a,beforeEnter(w){let R=c;if(!n.isMounted)if(i)R=C||c;else return;w[Fn]&&w[Fn](!0);const P=N[x];P&&wn(t,P)&&P.el[Fn]&&P.el[Fn](),U(R,[w])},enter(w){let R=l,P=h,S=f;if(!n.isMounted)if(i)R=k||l,P=D||h,S=E||f;else return;let b=!1;w[Jo]=Te=>{b||(b=!0,Te?U(S,[w]):U(P,[w]),T.delayedLeave&&T.delayedLeave(),w[Jo]=void 0)};const fe=w[Jo].bind(null,!1);R?I(R,[w,fe]):fe()},leave(w,R){const P=String(t.key);if(w[Jo]&&w[Jo](!0),n.isUnmounting)return R();U(p,[w]);let S=!1;w[Fn]=fe=>{S||(S=!0,R(),fe?U(y,[w]):U(_,[w]),w[Fn]=void 0,N[P]===t&&delete N[P])};const b=w[Fn].bind(null,!1);N[P]=t,m?I(m,[w,b]):b()},clone(w){const R=zh(w,e,n,r,s);return s&&s(R),R}};return T}function uh(t){if(oc(t))return t=dr(t),t.children=null,t}function Wm(t){if(!oc(t))return Uv(t.type)&&t.children?qv(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&de(n.default))return n.default()}}function zi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,zi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Gv(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Vt?(o.patchFlag&128&&s++,r=r.concat(Gv(o.children,e,a))):(e||o.type!==it)&&r.push(a!=null?dr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function os(t,e){return de(t)?pt({name:t.name},e,{setup:t}):t}function pd(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Qm(t,e){let n;return!!((n=Object.getOwnPropertyDescriptor(t,e))&&!n.configurable)}const _u=new WeakMap;function Li(t,e,n,r,s=!1){if(le(t)){t.forEach((y,C)=>Li(y,e&&(le(e)?e[C]:e),n,r,s));return}if(cr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Li(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?hl(r.component):r.el,o=s?null:i,{i:a,r:c}=t,l=e&&e.r,h=a.refs===Be?a.refs={}:a.refs,f=a.setupState,p=Re(f),m=f===Be?ov:y=>Qm(h,y)?!1:Ne(p,y),_=(y,C)=>!(C&&Qm(h,C));if(l!=null&&l!==c){if(Jm(e),Qe(l))h[l]=null,m(l)&&(f[l]=null);else if(at(l)){const y=e;_(l,y.k)&&(l.value=null),y.k&&(h[y.k]=null)}}if(de(c))ic(c,a,12,[o,h]);else{const y=Qe(c),C=at(c);if(y||C){const k=()=>{if(t.f){const D=y?m(c)?f[c]:h[c]:_()||!t.k?c.value:h[t.k];if(s)le(D)&&nd(D,i);else if(le(D))D.includes(i)||D.push(i);else if(y)h[c]=[i],m(c)&&(f[c]=h[c]);else{const E=[i];_(c,t.k)&&(c.value=E),t.k&&(h[t.k]=E)}}else y?(h[c]=o,m(c)&&(f[c]=o)):C&&(_(c,t.k)&&(c.value=o),t.k&&(h[t.k]=o))};if(o){const D=()=>{k(),_u.delete(t)};D.id=-1,_u.set(t,D),dt(D,n)}else Jm(t),k()}}}function Jm(t){const e=_u.get(t);e&&(e.flags|=8,_u.delete(t))}let Ym=!1;const gi=()=>{Ym||(console.error("Hydration completed but contains mismatches."),Ym=!0)},AR=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",RR=t=>t.namespaceURI.includes("MathML"),Lc=t=>{if(t.nodeType===1){if(AR(t))return"svg";if(RR(t))return"mathml"}},Di=t=>t.nodeType===8;function SR(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:c,createComment:l}}=t,h=(E,x)=>{if(!x.hasChildNodes()){n(null,E,x),mu(),x._vnode=E;return}f(x.firstChild,E,null,null,null),mu(),x._vnode=E},f=(E,x,N,U,I,T=!1)=>{T=T||!!x.dynamicChildren;const w=Di(E)&&E.data==="[",R=()=>y(E,x,N,U,I,w),{type:P,ref:S,shapeFlag:b,patchFlag:fe}=x;let Te=E.nodeType;x.el=E,fe===-2&&(T=!1,x.dynamicChildren=null);let ie=null;switch(P){case Bs:Te!==3?x.children===""?(c(x.el=s(""),o(E),E),ie=E):ie=R():(E.data!==x.children&&(gi(),E.data=x.children),ie=i(E));break;case it:D(E)?(ie=i(E),k(x.el=E.content.firstChild,E,N)):Te!==8||w?ie=R():ie=i(E);break;case Jc:if(w&&(E=i(E),Te=E.nodeType),Te===1||Te===3){ie=E;const pe=!x.children.length;for(let re=0;re<x.staticCount;re++)pe&&(x.children+=ie.nodeType===1?ie.outerHTML:ie.data),re===x.staticCount-1&&(x.anchor=ie),ie=i(ie);return w?i(ie):ie}else R();break;case Vt:w?ie=_(E,x,N,U,I,T):ie=R();break;default:if(b&1)(Te!==1||x.type.toLowerCase()!==E.tagName.toLowerCase())&&!D(E)?ie=R():ie=p(E,x,N,U,I,T);else if(b&6){x.slotScopeIds=I;const pe=o(E);if(w?ie=C(E):Di(E)&&E.data==="teleport start"?ie=C(E,E.data,"teleport end"):ie=i(E),e(x,pe,null,N,U,Lc(pe),T),cr(x)&&!x.type.__asyncResolved){let re;w?(re=tt(Vt),re.anchor=ie?ie.previousSibling:pe.lastChild):re=E.nodeType===3?SE(""):tt("div"),re.el=E,x.component.subTree=re}}else b&64?Te!==8?ie=R():ie=x.type.hydrate(E,x,N,U,I,T,t,m):b&128&&(ie=x.type.hydrate(E,x,N,U,Lc(o(E)),I,T,t,f))}return S!=null&&Li(S,null,U,x),ie},p=(E,x,N,U,I,T)=>{T=T||!!x.dynamicChildren;const{type:w,props:R,patchFlag:P,shapeFlag:S,dirs:b,transition:fe}=x,Te=w==="input"||w==="option";if(Te||P!==-1){b&&Ln(x,null,N,"created");let ie=!1;if(D(E)){ie=gE(null,fe)&&N&&N.vnode.props&&N.vnode.props.appear;const re=E.content.firstChild;if(ie){const Pe=re.getAttribute("class");Pe&&(re.$cls=Pe),fe.beforeEnter(re)}k(re,E,N),x.el=E=re}if(S&16&&!(R&&(R.innerHTML||R.textContent))){let re=m(E.firstChild,x,E,N,U,I,T);for(;re;){Fc(E,1)||gi();const Pe=re;re=re.nextSibling,a(Pe)}}else if(S&8){let re=x.children;re[0]===`
`&&(E.tagName==="PRE"||E.tagName==="TEXTAREA")&&(re=re.slice(1));const{textContent:Pe}=E;Pe!==re&&Pe!==re.replace(/\r\n|\r/g,`
`)&&(Fc(E,0)||gi(),E.textContent=x.children)}if(R){if(Te||!T||P&48){const re=E.tagName.includes("-");for(const Pe in R)(Te&&(Pe.endsWith("value")||Pe==="indeterminate")||sc(Pe)&&!Ms(Pe)||Pe[0]==="."||re&&!Ms(Pe))&&r(E,Pe,null,R[Pe],void 0,N)}else if(R.onClick)r(E,"onClick",null,R.onClick,void 0,N);else if(P&4&&Hr(R.style))for(const re in R.style)R.style[re]}let pe;(pe=R&&R.onVnodeBeforeMount)&&Kt(pe,N,x),b&&Ln(x,null,N,"beforeMount"),((pe=R&&R.onVnodeMounted)||b||ie)&&wE(()=>{pe&&Kt(pe,N,x),ie&&fe.enter(E),b&&Ln(x,null,N,"mounted")},U)}return E.nextSibling},m=(E,x,N,U,I,T,w)=>{w=w||!!x.dynamicChildren;const R=x.children,P=R.length;for(let S=0;S<P;S++){const b=w?R[S]:R[S]=rn(R[S]),fe=b.type===Bs;E?(fe&&!w&&S+1<P&&rn(R[S+1]).type===Bs&&(c(s(E.data.slice(b.children.length)),N,i(E)),E.data=b.children),E=f(E,b,U,I,T,w)):fe&&!b.children?c(b.el=s(""),N):(Fc(N,1)||gi(),n(null,b,N,null,U,I,Lc(N),T))}return E},_=(E,x,N,U,I,T)=>{const{slotScopeIds:w}=x;w&&(I=I?I.concat(w):w);const R=o(E),P=m(i(E),x,R,N,U,I,T);return P&&Di(P)&&P.data==="]"?i(x.anchor=P):(gi(),c(x.anchor=l("]"),R,P),P)},y=(E,x,N,U,I,T)=>{if(Fc(E.parentElement,1)||gi(),x.el=null,T){const P=C(E);for(;;){const S=i(E);if(S&&S!==P)a(S);else break}}const w=i(E),R=o(E);return a(E),n(null,x,R,w,N,U,Lc(R),I),N&&(N.vnode.el=x.el,ll(N,x.el)),w},C=(E,x="[",N="]")=>{let U=0;for(;E;)if(E=i(E),E&&Di(E)&&(E.data===x&&U++,E.data===N)){if(U===0)return i(E);U--}return E},k=(E,x,N)=>{const U=x.parentNode;U&&U.replaceChild(E,x);let I=N;for(;I;)I.vnode.el===x&&(I.vnode.el=I.subTree.el=E),I=I.parent},D=E=>E.nodeType===1&&E.tagName==="TEMPLATE";return[h,f]}const Xm="data-allow-mismatch",PR={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Fc(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Xm);)t=t.parentElement;const n=t&&t.getAttribute(Xm);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(PR[e])}}rl().requestIdleCallback;rl().cancelIdleCallback;function CR(t,e){if(Di(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(Di(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const cr=t=>!!t.type.__asyncLoader;function Kh(t){de(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:c}=t;let l=null,h,f=0;const p=()=>(f++,l=null,m()),m=()=>{let _;return l||(_=l=e().catch(y=>{if(y=y instanceof Error?y:new Error(String(y)),c)return new Promise((C,k)=>{c(y,()=>C(p()),()=>k(y),f+1)});throw y}).then(y=>_!==l&&l?l:(y&&(y.__esModule||y[Symbol.toStringTag]==="Module")&&(y=y.default),h=y,y)))};return os({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(_,y,C){let k=!1;(y.bu||(y.bu=[])).push(()=>k=!0);const D=()=>{k||C()},E=i?()=>{const x=i(D,N=>CR(_,N));x&&(y.bum||(y.bum=[])).push(x)}:D;h?E():m().then(()=>!y.isUnmounted&&E())},get __asyncResolved(){return h},setup(){const _=Tt;if(pd(_),h)return()=>Bc(h,_);const y=E=>{l=null,Io(E,_,13,!r)};if(a&&_.suspense||Wi)return m().then(E=>()=>Bc(E,_)).catch(E=>(y(E),()=>r?tt(r,{error:E}):null));const C=ar(!1),k=ar(),D=ar(!!s);return s&&setTimeout(()=>{D.value=!1},s),o!=null&&setTimeout(()=>{if(!C.value&&!k.value){const E=new Error(`Async component timed out after ${o}ms.`);y(E),k.value=E}},o),m().then(()=>{C.value=!0,_.parent&&oc(_.parent.vnode)&&_.parent.update()}).catch(E=>{y(E),k.value=E}),()=>{if(C.value&&h)return Bc(h,_);if(k.value&&r)return tt(r,{error:k.value});if(n&&!D.value)return Bc(n,_)}}})}function Bc(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=tt(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const oc=t=>t.type.__isKeepAlive,xR={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=bo(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:c,m:l,um:h,o:{createElement:f}}}=r,p=f("div");r.activate=(D,E,x,N,U)=>{const I=D.component;l(D,E,x,0,a),c(I.vnode,D,E,x,I,a,N,D.slotScopeIds,U),dt(()=>{I.isDeactivated=!1,I.a&&Oi(I.a);const T=D.props&&D.props.onVnodeMounted;T&&Kt(T,I.parent,D)},a)},r.deactivate=D=>{const E=D.component;vu(E.m),vu(E.a),l(D,p,null,1,a),dt(()=>{E.da&&Oi(E.da);const x=D.props&&D.props.onVnodeUnmounted;x&&Kt(x,E.parent,D),E.isDeactivated=!0},a)};function m(D){lh(D),h(D,n,a,!0)}function _(D){s.forEach((E,x)=>{const N=tf(cr(E)?E.type.__asyncResolved||{}:E.type);N&&!D(N)&&y(x)})}function y(D){const E=s.get(D);E&&(!o||!wn(E,o))?m(E):o&&lh(o),s.delete(D),i.delete(D)}zr(()=>[t.include,t.exclude],([D,E])=>{D&&_(x=>ca(D,x)),E&&_(x=>!ca(E,x))},{flush:"post",deep:!0});let C=null;const k=()=>{C!=null&&(Eu(n.subTree.type)?dt(()=>{s.set(C,Uc(n.subTree))},n.subTree.suspense):s.set(C,Uc(n.subTree)))};return md(k),Qv(k),ac(()=>{s.forEach(D=>{const{subTree:E,suspense:x}=n,N=Uc(E);if(D.type===N.type&&D.key===N.key){lh(N);const U=N.component.da;U&&dt(U,x);return}m(D)})}),()=>{if(C=null,!e.default)return o=null;const D=e.default(),E=D[0];if(D.length>1)return o=null,D;if(!qs(E)||!(E.shapeFlag&4)&&!(E.shapeFlag&128))return o=null,E;let x=Uc(E);if(x.type===it)return o=null,x;const N=x.type,U=tf(cr(x)?x.type.__asyncResolved||{}:N),{include:I,exclude:T,max:w}=t;if(I&&(!U||!ca(I,U))||T&&U&&ca(T,U))return x.shapeFlag&=-257,o=x,E;const R=x.key==null?N:x.key,P=s.get(R);return x.el&&(x=dr(x),E.shapeFlag&128&&(E.ssContent=x)),C=R,P?(x.el=P.el,x.component=P.component,x.transition&&zi(x,x.transition),x.shapeFlag|=512,i.delete(R),i.add(R)):(i.add(R),w&&i.size>parseInt(w,10)&&y(i.values().next().value)),x.shapeFlag|=256,o=x,Eu(E.type)?E:x}}},VR=xR;function ca(t,e){return le(t)?t.some(n=>ca(n,e)):Qe(t)?t.split(",").includes(e):AA(t)?(t.lastIndex=0,t.test(e)):!1}function zv(t,e){Wv(t,"a",e)}function Kv(t,e){Wv(t,"da",e)}function Wv(t,e,n=Tt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(cl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)oc(s.parent.vnode)&&DR(r,e,n,s),s=s.parent}}function DR(t,e,n,r){const s=cl(e,t,r,!0);Jv(()=>{nd(r[e],s)},n)}function lh(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Uc(t){return t.shapeFlag&128?t.ssContent:t}function cl(t,e,n=Tt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{hr();const a=cc(n),c=Pn(e,n,t,o);return a(),fr(),c});return r?s.unshift(i):s.push(i),i}}const yr=t=>(e,n=Tt)=>{(!Wi||t==="sp")&&cl(t,(...r)=>e(...r),n)},NR=yr("bm"),md=yr("m"),kR=yr("bu"),Qv=yr("u"),ac=yr("bum"),Jv=yr("um"),OR=yr("sp"),MR=yr("rtg"),LR=yr("rtc");function Yv(t,e=Tt){cl("ec",t,e)}const Xv="components";function IF(t,e){return eE(Xv,t,!0,e)||t}const Zv=Symbol.for("v-ndc");function FR(t){return Qe(t)?eE(Xv,t,!1)||t:t||Zv}function eE(t,e,n=!0,r=!1){const s=bt||Tt;if(s){const i=s.type;{const a=tf(i,!1);if(a&&(a===e||a===_n(e)||a===nl(_n(e))))return i}const o=Zm(s[t]||i[t],e)||Zm(s.appContext[t],e);return!o&&r?i:o}}function Zm(t,e){return t&&(t[e]||t[_n(e)]||t[nl(_n(e))])}function bF(t,e,n,r){let s;const i=n,o=le(t);if(o||Qe(t)){const a=o&&Hr(t);let c=!1,l=!1;a&&(c=!on(t),l=Wn(t),t=ol(t)),s=new Array(t.length);for(let h=0,f=t.length;h<f;h++)s[h]=e(c?l?qi(Sn(t[h])):Sn(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(xe(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const h=a[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}function AF(t,e,n={},r,s){if(bt.ce||bt.parent&&cr(bt.parent)&&bt.parent.ce){const l=Object.keys(n).length>0;return pn(),jn(Vt,null,[tt("slot",n,r)],l?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),pn();const o=i&&tE(i(n)),a=n.key||o&&o.key,c=jn(Vt,{key:(a&&!Rn(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function tE(t){return t.some(e=>qs(e)?!(e.type===it||e.type===Vt&&!tE(e.children)):!0)?t:null}const Wh=t=>t?CE(t)?hl(t):Wh(t.parent):null,_a=pt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Wh(t.parent),$root:t=>Wh(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>rE(t),$forceUpdate:t=>t.f||(t.f=()=>{ld(t.update)}),$nextTick:t=>t.n||(t.n=Gi.bind(t.proxy)),$watch:t=>ER.bind(t)}),hh=(t,e)=>t!==Be&&!t.__isScriptSetup&&Ne(t,e),BR={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(hh(r,e))return o[e]=1,r[e];if(s!==Be&&Ne(s,e))return o[e]=2,s[e];if(Ne(i,e))return o[e]=3,i[e];if(n!==Be&&Ne(n,e))return o[e]=4,n[e];Qh&&(o[e]=0)}}const l=_a[e];let h,f;if(l)return e==="$attrs"&&xt(t.attrs,"get",""),l(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Be&&Ne(n,e))return o[e]=4,n[e];if(f=c.config.globalProperties,Ne(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return hh(s,e)?(s[e]=n,!0):r!==Be&&Ne(r,e)?(r[e]=n,!0):Ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},a){let c;return!!(n[a]||t!==Be&&a[0]!=="$"&&Ne(t,a)||hh(e,a)||Ne(i,a)||Ne(r,a)||Ne(_a,a)||Ne(s.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ne(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function eg(t){return le(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Qh=!0;function UR(t){const e=rE(t),n=t.proxy,r=t.ctx;Qh=!1,e.beforeCreate&&tg(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:h,beforeMount:f,mounted:p,beforeUpdate:m,updated:_,activated:y,deactivated:C,beforeDestroy:k,beforeUnmount:D,destroyed:E,unmounted:x,render:N,renderTracked:U,renderTriggered:I,errorCaptured:T,serverPrefetch:w,expose:R,inheritAttrs:P,components:S,directives:b,filters:fe}=e;if(l&&jR(l,r,null),o)for(const pe in o){const re=o[pe];de(re)&&(r[pe]=re.bind(n))}if(s){const pe=s.call(n,n);xe(pe)&&(t.data=_r(pe))}if(Qh=!0,i)for(const pe in i){const re=i[pe],Pe=de(re)?re.bind(n,n):de(re.get)?re.get.bind(n,n):Gn,Nn=!de(re)&&de(re.set)?re.set.bind(n):Gn,Zt=sn({get:Pe,set:Nn});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>Zt.value,set:Et=>Zt.value=Et})}if(a)for(const pe in a)nE(a[pe],r,n,pe);if(c){const pe=de(c)?c.call(n):c;Reflect.ownKeys(pe).forEach(re=>{Gr(re,pe[re])})}h&&tg(h,t,"c");function ie(pe,re){le(re)?re.forEach(Pe=>pe(Pe.bind(n))):re&&pe(re.bind(n))}if(ie(NR,f),ie(md,p),ie(kR,m),ie(Qv,_),ie(zv,y),ie(Kv,C),ie(Yv,T),ie(LR,U),ie(MR,I),ie(ac,D),ie(Jv,x),ie(OR,w),le(R))if(R.length){const pe=t.exposed||(t.exposed={});R.forEach(re=>{Object.defineProperty(pe,re,{get:()=>n[re],set:Pe=>n[re]=Pe,enumerable:!0})})}else t.exposed||(t.exposed={});N&&t.render===Gn&&(t.render=N),P!=null&&(t.inheritAttrs=P),S&&(t.components=S),b&&(t.directives=b),w&&pd(t)}function jR(t,e,n=Gn){le(t)&&(t=Jh(t));for(const r in t){const s=t[r];let i;xe(s)?"default"in s?i=kt(s.from||r,s.default,!0):i=kt(s.from||r):i=kt(s),at(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function tg(t,e,n){Pn(le(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function nE(t,e,n,r){let s=r.includes(".")?Bv(n,r):()=>n[r];if(Qe(t)){const i=e[t];de(i)&&zr(s,i)}else if(de(t))zr(s,t.bind(n));else if(xe(t))if(le(t))t.forEach(i=>nE(i,e,n,r));else{const i=de(t.handler)?t.handler.bind(n):e[t.handler];de(i)&&zr(s,i,t)}}function rE(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(l=>yu(c,l,o,!0)),yu(c,e,o)),xe(e)&&i.set(e,c),c}function yu(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&yu(t,i,n,!0),s&&s.forEach(o=>yu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=$R[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const $R={data:ng,props:rg,emits:rg,methods:ua,computed:ua,beforeCreate:Ft,created:Ft,beforeMount:Ft,mounted:Ft,beforeUpdate:Ft,updated:Ft,beforeDestroy:Ft,beforeUnmount:Ft,destroyed:Ft,unmounted:Ft,activated:Ft,deactivated:Ft,errorCaptured:Ft,serverPrefetch:Ft,components:ua,directives:ua,watch:HR,provide:ng,inject:qR};function ng(t,e){return e?t?function(){return pt(de(t)?t.call(this,this):t,de(e)?e.call(this,this):e)}:e:t}function qR(t,e){return ua(Jh(t),Jh(e))}function Jh(t){if(le(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ft(t,e){return t?[...new Set([].concat(t,e))]:e}function ua(t,e){return t?pt(Object.create(null),t,e):e}function rg(t,e){return t?le(t)&&le(e)?[...new Set([...t,...e])]:pt(Object.create(null),eg(t),eg(e??{})):e}function HR(t,e){if(!t)return e;if(!e)return t;const n=pt(Object.create(null),t);for(const r in e)n[r]=Ft(t[r],e[r]);return n}function sE(){return{app:null,config:{isNativeTag:ov,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let GR=0;function zR(t,e){return function(r,s=null){de(r)||(r=pt({},r)),s!=null&&!xe(s)&&(s=null);const i=sE(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:GR++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:AS,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&de(h.install)?(o.add(h),h.install(l,...f)):de(h)&&(o.add(h),h(l,...f))),l},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),l},component(h,f){return f?(i.components[h]=f,l):i.components[h]},directive(h,f){return f?(i.directives[h]=f,l):i.directives[h]},mount(h,f,p){if(!c){const m=l._ceVNode||tt(r,s);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(m,h):t(m,h,p),c=!0,l._container=h,h.__vue_app__=l,hl(m.component)}},onUnmount(h){a.push(h)},unmount(){c&&(Pn(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(h,f){return i.provides[h]=f,l},runWithContext(h){const f=Fs;Fs=l;try{return h()}finally{Fs=f}}};return l}}let Fs=null;const KR=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${_n(e)}Modifiers`]||t[`${ri(e)}Modifiers`];function WR(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Be;let s=n;const i=e.startsWith("update:"),o=i&&KR(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Qe(h)?h.trim():h)),o.number&&(s=n.map(rd)));let a,c=r[a=sh(e)]||r[a=sh(_n(e))];!c&&i&&(c=r[a=sh(ri(e))]),c&&Pn(c,t,6,s);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Pn(l,t,6,s)}}const QR=new WeakMap;function iE(t,e,n=!1){const r=n?QR:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!de(t)){const c=l=>{const h=iE(l,e,!0);h&&(a=!0,pt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(xe(t)&&r.set(t,null),null):(le(i)?i.forEach(c=>o[c]=null):pt(o,i),xe(t)&&r.set(t,o),o)}function ul(t,e){return!t||!sc(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ne(t,e[0].toLowerCase()+e.slice(1))||Ne(t,ri(e))||Ne(t,e))}function fh(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:h,props:f,data:p,setupState:m,ctx:_,inheritAttrs:y}=t,C=gu(t);let k,D;try{if(n.shapeFlag&4){const x=s||r,N=x;k=rn(l.call(N,x,h,f,m,p,_)),D=a}else{const x=e;k=rn(x.length>1?x(f,{attrs:a,slots:o,emit:c}):x(f,null)),D=e.props?a:YR(a)}}catch(x){ya.length=0,Io(x,t,1),k=tt(it)}let E=k;if(D&&y!==!1){const x=Object.keys(D),{shapeFlag:N}=E;x.length&&N&7&&(i&&x.some(td)&&(D=XR(D,i)),E=dr(E,D,!1,!0))}return n.dirs&&(E=dr(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&zi(E,n.transition),k=E,gu(C),k}function JR(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(qs(s)){if(s.type!==it||s.children==="v-if"){if(n)return;n=s}}else return}return n}const YR=t=>{let e;for(const n in t)(n==="class"||n==="style"||sc(n))&&((e||(e={}))[n]=t[n]);return e},XR=(t,e)=>{const n={};for(const r in t)(!td(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function ZR(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?sg(r,o,l):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(oE(o,r,p)&&!ul(l,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?sg(r,o,l):!0:!!o;return!1}function sg(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(oE(e,t,i)&&!ul(n,i))return!0}return!1}function oE(t,e,n){const r=t[n],s=e[n];return n==="style"&&xe(r)&&xe(s)?!$s(r,s):r!==s}function ll({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const aE={},cE=()=>Object.create(aE),uE=t=>Object.getPrototypeOf(t)===aE;function eS(t,e,n,r=!1){const s={},i=cE();t.propsDefaults=Object.create(null),lE(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:$n(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function tS(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Re(s),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(ul(t.emitsOptions,p))continue;const m=e[p];if(c)if(Ne(i,p))m!==i[p]&&(i[p]=m,l=!0);else{const _=_n(p);s[_]=Yh(c,a,_,m,t,!1)}else m!==i[p]&&(i[p]=m,l=!0)}}}else{lE(t,e,s,i)&&(l=!0);let h;for(const f in a)(!e||!Ne(e,f)&&((h=ri(f))===f||!Ne(e,h)))&&(c?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=Yh(c,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!Ne(e,f))&&(delete i[f],l=!0)}l&&sr(t.attrs,"set","")}function lE(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Ms(c))continue;const l=e[c];let h;s&&Ne(s,h=_n(c))?!i||!i.includes(h)?n[h]=l:(a||(a={}))[h]=l:ul(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=Re(n),l=a||Be;for(let h=0;h<i.length;h++){const f=i[h];n[f]=Yh(s,c,f,l[f],t,!Ne(l,f))}}return o}function Yh(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ne(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&de(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const h=cc(s);r=l[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===ri(n))&&(r=!0))}return r}const nS=new WeakMap;function hE(t,e,n=!1){const r=n?nS:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!de(t)){const h=f=>{c=!0;const[p,m]=hE(f,e,!0);pt(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return xe(t)&&r.set(t,Ni),Ni;if(le(i))for(let h=0;h<i.length;h++){const f=_n(i[h]);ig(f)&&(o[f]=Be)}else if(i)for(const h in i){const f=_n(h);if(ig(f)){const p=i[h],m=o[f]=le(p)||de(p)?{type:p}:pt({},p),_=m.type;let y=!1,C=!0;if(le(_))for(let k=0;k<_.length;++k){const D=_[k],E=de(D)&&D.name;if(E==="Boolean"){y=!0;break}else E==="String"&&(C=!1)}else y=de(_)&&_.name==="Boolean";m[0]=y,m[1]=C,(y||Ne(m,"default"))&&a.push(f)}}const l=[o,a];return xe(t)&&r.set(t,l),l}function ig(t){return t[0]!=="$"&&!Ms(t)}const gd=t=>t==="_"||t==="_ctx"||t==="$stable",_d=t=>le(t)?t.map(rn):[rn(t)],rS=(t,e,n)=>{if(e._n)return e;const r=hd((...s)=>_d(e(...s)),n);return r._c=!1,r},fE=(t,e,n)=>{const r=t._ctx;for(const s in t){if(gd(s))continue;const i=t[s];if(de(i))e[s]=rS(s,i,r);else if(i!=null){const o=_d(i);e[s]=()=>o}}},dE=(t,e)=>{const n=_d(e);t.slots.default=()=>n},pE=(t,e,n)=>{for(const r in e)(n||!gd(r))&&(t[r]=e[r])},sS=(t,e,n)=>{const r=t.slots=cE();if(t.vnode.shapeFlag&32){const s=e._;s?(pE(r,e,n),n&&lv(r,"_",s,!0)):fE(e,r)}else e&&dE(t,e)},iS=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Be;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:pE(s,e,n):(i=!e.$stable,fE(e,s)),o=e}else e&&(dE(t,e),o={default:1});if(i)for(const a in s)!gd(a)&&o[a]==null&&delete s[a]},dt=wE;function oS(t){return mE(t)}function aS(t){return mE(t,SR)}function mE(t,e){const n=rl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:h,parentNode:f,nextSibling:p,setScopeId:m=Gn,insertStaticContent:_}=t,y=(A,V,L,H=null,j=null,z=null,Q=void 0,W=null,J=!!V.dynamicChildren)=>{if(A===V)return;A&&!wn(A,V)&&(H=$(A),Et(A,j,z,!0),A=null),V.patchFlag===-2&&(J=!1,V.dynamicChildren=null);const{type:K,ref:he,shapeFlag:te}=V;switch(K){case Bs:C(A,V,L,H);break;case it:k(A,V,L,H);break;case Jc:A==null&&D(V,L,H,Q);break;case Vt:S(A,V,L,H,j,z,Q,W,J);break;default:te&1?N(A,V,L,H,j,z,Q,W,J):te&6?b(A,V,L,H,j,z,Q,W,J):(te&64||te&128)&&K.process(A,V,L,H,j,z,Q,W,J,ue)}he!=null&&j?Li(he,A&&A.ref,z,V||A,!V):he==null&&A&&A.ref!=null&&Li(A.ref,null,z,A,!0)},C=(A,V,L,H)=>{if(A==null)r(V.el=a(V.children),L,H);else{const j=V.el=A.el;V.children!==A.children&&l(j,V.children)}},k=(A,V,L,H)=>{A==null?r(V.el=c(V.children||""),L,H):V.el=A.el},D=(A,V,L,H)=>{[A.el,A.anchor]=_(A.children,V,L,H,A.el,A.anchor)},E=({el:A,anchor:V},L,H)=>{let j;for(;A&&A!==V;)j=p(A),r(A,L,H),A=j;r(V,L,H)},x=({el:A,anchor:V})=>{let L;for(;A&&A!==V;)L=p(A),s(A),A=L;s(V)},N=(A,V,L,H,j,z,Q,W,J)=>{if(V.type==="svg"?Q="svg":V.type==="math"&&(Q="mathml"),A==null)U(V,L,H,j,z,Q,W,J);else{const K=A.el&&A.el._isVueCE?A.el:null;try{K&&K._beginPatch(),w(A,V,j,z,Q,W,J)}finally{K&&K._endPatch()}}},U=(A,V,L,H,j,z,Q,W)=>{let J,K;const{props:he,shapeFlag:te,transition:ae,dirs:me}=A;if(J=A.el=o(A.type,z,he&&he.is,he),te&8?h(J,A.children):te&16&&T(A.children,J,null,H,j,dh(A,z),Q,W),me&&Ln(A,null,H,"created"),I(J,A,A.scopeId,Q,H),he){for(const Ve in he)Ve!=="value"&&!Ms(Ve)&&i(J,Ve,null,he[Ve],z,H);"value"in he&&i(J,"value",null,he.value,z),(K=he.onVnodeBeforeMount)&&Kt(K,H,A)}me&&Ln(A,null,H,"beforeMount");const Ee=gE(j,ae);Ee&&ae.beforeEnter(J),r(J,V,L),((K=he&&he.onVnodeMounted)||Ee||me)&&dt(()=>{K&&Kt(K,H,A),Ee&&ae.enter(J),me&&Ln(A,null,H,"mounted")},j)},I=(A,V,L,H,j)=>{if(L&&m(A,L),H)for(let z=0;z<H.length;z++)m(A,H[z]);if(j){let z=j.subTree;if(V===z||Eu(z.type)&&(z.ssContent===V||z.ssFallback===V)){const Q=j.vnode;I(A,Q,Q.scopeId,Q.slotScopeIds,j.parent)}}},T=(A,V,L,H,j,z,Q,W,J=0)=>{for(let K=J;K<A.length;K++){const he=A[K]=W?rr(A[K]):rn(A[K]);y(null,he,V,L,H,j,z,Q,W)}},w=(A,V,L,H,j,z,Q)=>{const W=V.el=A.el;let{patchFlag:J,dynamicChildren:K,dirs:he}=V;J|=A.patchFlag&16;const te=A.props||Be,ae=V.props||Be;let me;if(L&&_s(L,!1),(me=ae.onVnodeBeforeUpdate)&&Kt(me,L,V,A),he&&Ln(V,A,L,"beforeUpdate"),L&&_s(L,!0),(te.innerHTML&&ae.innerHTML==null||te.textContent&&ae.textContent==null)&&h(W,""),K?R(A.dynamicChildren,K,W,L,H,dh(V,j),z):Q||re(A,V,W,null,L,H,dh(V,j),z,!1),J>0){if(J&16)P(W,te,ae,L,j);else if(J&2&&te.class!==ae.class&&i(W,"class",null,ae.class,j),J&4&&i(W,"style",te.style,ae.style,j),J&8){const Ee=V.dynamicProps;for(let Ve=0;Ve<Ee.length;Ve++){const Ce=Ee[Ve],St=te[Ce],ut=ae[Ce];(ut!==St||Ce==="value")&&i(W,Ce,St,ut,j,L)}}J&1&&A.children!==V.children&&h(W,V.children)}else!Q&&K==null&&P(W,te,ae,L,j);((me=ae.onVnodeUpdated)||he)&&dt(()=>{me&&Kt(me,L,V,A),he&&Ln(V,A,L,"updated")},H)},R=(A,V,L,H,j,z,Q)=>{for(let W=0;W<V.length;W++){const J=A[W],K=V[W],he=J.el&&(J.type===Vt||!wn(J,K)||J.shapeFlag&198)?f(J.el):L;y(J,K,he,null,H,j,z,Q,!0)}},P=(A,V,L,H,j)=>{if(V!==L){if(V!==Be)for(const z in V)!Ms(z)&&!(z in L)&&i(A,z,V[z],null,j,H);for(const z in L){if(Ms(z))continue;const Q=L[z],W=V[z];Q!==W&&z!=="value"&&i(A,z,W,Q,j,H)}"value"in L&&i(A,"value",V.value,L.value,j)}},S=(A,V,L,H,j,z,Q,W,J)=>{const K=V.el=A?A.el:a(""),he=V.anchor=A?A.anchor:a("");let{patchFlag:te,dynamicChildren:ae,slotScopeIds:me}=V;me&&(W=W?W.concat(me):me),A==null?(r(K,L,H),r(he,L,H),T(V.children||[],L,he,j,z,Q,W,J)):te>0&&te&64&&ae&&A.dynamicChildren&&A.dynamicChildren.length===ae.length?(R(A.dynamicChildren,ae,L,j,z,Q,W),(V.key!=null||j&&V===j.subTree)&&_E(A,V,!0)):re(A,V,L,he,j,z,Q,W,J)},b=(A,V,L,H,j,z,Q,W,J)=>{V.slotScopeIds=W,A==null?V.shapeFlag&512?j.ctx.activate(V,L,H,Q,J):fe(V,L,H,j,z,Q,J):Te(A,V,J)},fe=(A,V,L,H,j,z,Q)=>{const W=A.component=vS(A,H,j);if(oc(A)&&(W.ctx.renderer=ue),ES(W,!1,Q),W.asyncDep){if(j&&j.registerDep(W,ie,Q),!A.el){const J=W.subTree=tt(it);k(null,J,V,L),A.placeholder=J.el}}else ie(W,A,V,L,j,z,Q)},Te=(A,V,L)=>{const H=V.component=A.component;if(ZR(A,V,L))if(H.asyncDep&&!H.asyncResolved){pe(H,V,L);return}else H.next=V,H.update();else V.el=A.el,H.vnode=V},ie=(A,V,L,H,j,z,Q)=>{const W=()=>{if(A.isMounted){let{next:te,bu:ae,u:me,parent:Ee,vnode:Ve}=A;{const lt=yE(A);if(lt){te&&(te.el=Ve.el,pe(A,te,Q)),lt.asyncDep.then(()=>{dt(()=>{A.isUnmounted||K()},j)});return}}let Ce=te,St;_s(A,!1),te?(te.el=Ve.el,pe(A,te,Q)):te=Ve,ae&&Oi(ae),(St=te.props&&te.props.onVnodeBeforeUpdate)&&Kt(St,Ee,te,Ve),_s(A,!0);const ut=fh(A),Gt=A.subTree;A.subTree=ut,y(Gt,ut,f(Gt.el),$(Gt),A,j,z),te.el=ut.el,Ce===null&&ll(A,ut.el),me&&dt(me,j),(St=te.props&&te.props.onVnodeUpdated)&&dt(()=>Kt(St,Ee,te,Ve),j)}else{let te;const{el:ae,props:me}=V,{bm:Ee,m:Ve,parent:Ce,root:St,type:ut}=A,Gt=cr(V);if(_s(A,!1),Ee&&Oi(Ee),!Gt&&(te=me&&me.onVnodeBeforeMount)&&Kt(te,Ce,V),_s(A,!0),ae&&Le){const lt=()=>{A.subTree=fh(A),Le(ae,A.subTree,A,j,null)};Gt&&ut.__asyncHydrate?ut.__asyncHydrate(ae,A,lt):lt()}else{St.ce&&St.ce._hasShadowRoot()&&St.ce._injectChildStyle(ut);const lt=A.subTree=fh(A);y(null,lt,L,H,A,j,z),V.el=lt.el}if(Ve&&dt(Ve,j),!Gt&&(te=me&&me.onVnodeMounted)){const lt=V;dt(()=>Kt(te,Ce,lt),j)}(V.shapeFlag&256||Ce&&cr(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&A.a&&dt(A.a,j),A.isMounted=!0,V=L=H=null}};A.scope.on();const J=A.effect=new vv(W);A.scope.off();const K=A.update=J.run.bind(J),he=A.job=J.runIfDirty.bind(J);he.i=A,he.id=A.uid,J.scheduler=()=>ld(he),_s(A,!0),K()},pe=(A,V,L)=>{V.component=A;const H=A.vnode.props;A.vnode=V,A.next=null,tS(A,V.props,H,L),iS(A,V.children,L),hr(),Km(A),fr()},re=(A,V,L,H,j,z,Q,W,J=!1)=>{const K=A&&A.children,he=A?A.shapeFlag:0,te=V.children,{patchFlag:ae,shapeFlag:me}=V;if(ae>0){if(ae&128){Nn(K,te,L,H,j,z,Q,W,J);return}else if(ae&256){Pe(K,te,L,H,j,z,Q,W,J);return}}me&8?(he&16&&Rt(K,j,z),te!==K&&h(L,te)):he&16?me&16?Nn(K,te,L,H,j,z,Q,W,J):Rt(K,j,z,!0):(he&8&&h(L,""),me&16&&T(te,L,H,j,z,Q,W,J))},Pe=(A,V,L,H,j,z,Q,W,J)=>{A=A||Ni,V=V||Ni;const K=A.length,he=V.length,te=Math.min(K,he);let ae;for(ae=0;ae<te;ae++){const me=V[ae]=J?rr(V[ae]):rn(V[ae]);y(A[ae],me,L,null,j,z,Q,W,J)}K>he?Rt(A,j,z,!0,!1,te):T(V,L,H,j,z,Q,W,J,te)},Nn=(A,V,L,H,j,z,Q,W,J)=>{let K=0;const he=V.length;let te=A.length-1,ae=he-1;for(;K<=te&&K<=ae;){const me=A[K],Ee=V[K]=J?rr(V[K]):rn(V[K]);if(wn(me,Ee))y(me,Ee,L,null,j,z,Q,W,J);else break;K++}for(;K<=te&&K<=ae;){const me=A[te],Ee=V[ae]=J?rr(V[ae]):rn(V[ae]);if(wn(me,Ee))y(me,Ee,L,null,j,z,Q,W,J);else break;te--,ae--}if(K>te){if(K<=ae){const me=ae+1,Ee=me<he?V[me].el:H;for(;K<=ae;)y(null,V[K]=J?rr(V[K]):rn(V[K]),L,Ee,j,z,Q,W,J),K++}}else if(K>ae)for(;K<=te;)Et(A[K],j,z,!0),K++;else{const me=K,Ee=K,Ve=new Map;for(K=Ee;K<=ae;K++){const Ze=V[K]=J?rr(V[K]):rn(V[K]);Ze.key!=null&&Ve.set(Ze.key,K)}let Ce,St=0;const ut=ae-Ee+1;let Gt=!1,lt=0;const Xn=new Array(ut);for(K=0;K<ut;K++)Xn[K]=0;for(K=me;K<=te;K++){const Ze=A[K];if(St>=ut){Et(Ze,j,z,!0);continue}let en;if(Ze.key!=null)en=Ve.get(Ze.key);else for(Ce=Ee;Ce<=ae;Ce++)if(Xn[Ce-Ee]===0&&wn(Ze,V[Ce])){en=Ce;break}en===void 0?Et(Ze,j,z,!0):(Xn[en-Ee]=K+1,en>=lt?lt=en:Gt=!0,y(Ze,V[en],L,null,j,z,Q,W,J),St++)}const hi=Gt?cS(Xn):Ni;for(Ce=hi.length-1,K=ut-1;K>=0;K--){const Ze=Ee+K,en=V[Ze],fs=V[Ze+1],ko=Ze+1<he?fs.el||vE(fs):H;Xn[K]===0?y(null,en,L,ko,j,z,Q,W,J):Gt&&(Ce<0||K!==hi[Ce]?Zt(en,L,ko,2):Ce--)}}},Zt=(A,V,L,H,j=null)=>{const{el:z,type:Q,transition:W,children:J,shapeFlag:K}=A;if(K&6){Zt(A.component.subTree,V,L,H);return}if(K&128){A.suspense.move(V,L,H);return}if(K&64){Q.move(A,V,L,ue);return}if(Q===Vt){r(z,V,L);for(let te=0;te<J.length;te++)Zt(J[te],V,L,H);r(A.anchor,V,L);return}if(Q===Jc){E(A,V,L);return}if(H!==2&&K&1&&W)if(H===0)W.beforeEnter(z),r(z,V,L),dt(()=>W.enter(z),j);else{const{leave:te,delayLeave:ae,afterLeave:me}=W,Ee=()=>{A.ctx.isUnmounted?s(z):r(z,V,L)},Ve=()=>{z._isLeaving&&z[Fn](!0),te(z,()=>{Ee(),me&&me()})};ae?ae(z,Ee,Ve):Ve()}else r(z,V,L)},Et=(A,V,L,H=!1,j=!1)=>{const{type:z,props:Q,ref:W,children:J,dynamicChildren:K,shapeFlag:he,patchFlag:te,dirs:ae,cacheIndex:me}=A;if(te===-2&&(j=!1),W!=null&&(hr(),Li(W,null,L,A,!0),fr()),me!=null&&(V.renderCache[me]=void 0),he&256){V.ctx.deactivate(A);return}const Ee=he&1&&ae,Ve=!cr(A);let Ce;if(Ve&&(Ce=Q&&Q.onVnodeBeforeUnmount)&&Kt(Ce,V,A),he&6)vn(A.component,L,H);else{if(he&128){A.suspense.unmount(L,H);return}Ee&&Ln(A,null,V,"beforeUnmount"),he&64?A.type.remove(A,V,L,ue,H):K&&!K.hasOnce&&(z!==Vt||te>0&&te&64)?Rt(K,V,L,!1,!0):(z===Vt&&te&384||!j&&he&16)&&Rt(J,V,L),H&&Yn(A)}(Ve&&(Ce=Q&&Q.onVnodeUnmounted)||Ee)&&dt(()=>{Ce&&Kt(Ce,V,A),Ee&&Ln(A,null,V,"unmounted")},L)},Yn=A=>{const{type:V,el:L,anchor:H,transition:j}=A;if(V===Vt){yn(L,H);return}if(V===Jc){x(A);return}const z=()=>{s(L),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(A.shapeFlag&1&&j&&!j.persisted){const{leave:Q,delayLeave:W}=j,J=()=>Q(L,z);W?W(A.el,z,J):J()}else z()},yn=(A,V)=>{let L;for(;A!==V;)L=p(A),s(A),A=L;s(V)},vn=(A,V,L)=>{const{bum:H,scope:j,job:z,subTree:Q,um:W,m:J,a:K}=A;vu(J),vu(K),H&&Oi(H),j.stop(),z&&(z.flags|=8,Et(Q,A,V,L)),W&&dt(W,V),dt(()=>{A.isUnmounted=!0},V)},Rt=(A,V,L,H=!1,j=!1,z=0)=>{for(let Q=z;Q<A.length;Q++)Et(A[Q],V,L,H,j)},$=A=>{if(A.shapeFlag&6)return $(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const V=p(A.anchor||A.el),L=V&&V[wR];return L?p(L):V};let se=!1;const ee=(A,V,L)=>{let H;A==null?V._vnode&&(Et(V._vnode,null,null,!0),H=V._vnode.component):y(V._vnode||null,A,V,null,null,null,L),V._vnode=A,se||(se=!0,Km(H),mu(),se=!1)},ue={p:y,um:Et,m:Zt,r:Yn,mt:fe,mc:T,pc:re,pbc:R,n:$,o:t};let ve,Le;return e&&([ve,Le]=e(ue)),{render:ee,hydrate:ve,createApp:zR(ee,ve)}}function dh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function _s({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function gE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function _E(t,e,n=!1){const r=t.children,s=e.children;if(le(r)&&le(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=rr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&_E(o,a)),a.type===Bs&&(a.patchFlag===-1&&(a=s[i]=rr(a)),a.el=o.el),a.type===it&&!a.el&&(a.el=o.el)}}function cS(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(s=n[n.length-1],t[s]<l){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function yE(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:yE(e)}function vu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function vE(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?vE(e.subTree):null}const Eu=t=>t.__isSuspense;let Xh=0;const uS={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,c,l){if(t==null)lS(e,n,r,s,i,o,a,c,l);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}hS(t,e,n,r,s,o,a,c,l)}},hydrate:fS,normalize:dS},yd=uS;function ka(t,e){const n=t.props&&t.props[e];de(n)&&n()}function lS(t,e,n,r,s,i,o,a,c){const{p:l,o:{createElement:h}}=c,f=h("div"),p=t.suspense=EE(t,s,r,e,f,n,i,o,a,c);l(null,p.pendingBranch=t.ssContent,f,null,r,p,i,o),p.deps>0?(ka(t,"onPending"),ka(t,"onFallback"),l(null,t.ssFallback,e,n,r,null,i,o),Fi(p,t.ssFallback)):p.resolve(!1,!0)}function hS(t,e,n,r,s,i,o,a,{p:c,um:l,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,m=e.ssFallback,{activeBranch:_,pendingBranch:y,isInFallback:C,isHydrating:k}=f;if(y)f.pendingBranch=p,wn(y,p)?(c(y,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():C&&(k||(c(_,m,n,r,s,null,i,o,a),Fi(f,m)))):(f.pendingId=Xh++,k?(f.isHydrating=!1,f.activeBranch=y):l(y,s,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),C?(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():(c(_,m,n,r,s,null,i,o,a),Fi(f,m))):_&&wn(_,p)?(c(_,p,n,r,s,f,i,o,a),f.resolve(!0)):(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0&&f.resolve()));else if(_&&wn(_,p))c(_,p,n,r,s,f,i,o,a),Fi(f,p);else if(ka(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=Xh++,c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:D,pendingId:E}=f;D>0?setTimeout(()=>{f.pendingId===E&&f.fallback(m)},D):D===0&&f.fallback(m)}}function EE(t,e,n,r,s,i,o,a,c,l,h=!1){const{p:f,m:p,um:m,n:_,o:{parentNode:y,remove:C}}=l;let k;const D=pS(t);D&&e&&e.pendingBranch&&(k=e.pendingId,e.deps++);const E=t.props?hv(t.props.timeout):void 0,x=i,N={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:Xh++,timeout:typeof E=="number"?E:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(U=!1,I=!1){const{vnode:T,activeBranch:w,pendingBranch:R,pendingId:P,effects:S,parentComponent:b,container:fe,isInFallback:Te}=N;let ie=!1;N.isHydrating?N.isHydrating=!1:U||(ie=w&&R.transition&&R.transition.mode==="out-in",ie&&(w.transition.afterLeave=()=>{P===N.pendingId&&(p(R,fe,i===x?_(w):i,0),Gh(S),Te&&T.ssFallback&&(T.ssFallback.el=null))}),w&&(y(w.el)===fe&&(i=_(w)),m(w,b,N,!0),!ie&&Te&&T.ssFallback&&dt(()=>T.ssFallback.el=null,N)),ie||p(R,fe,i,0)),Fi(N,R),N.pendingBranch=null,N.isInFallback=!1;let pe=N.parent,re=!1;for(;pe;){if(pe.pendingBranch){pe.effects.push(...S),re=!0;break}pe=pe.parent}!re&&!ie&&Gh(S),N.effects=[],D&&e&&e.pendingBranch&&k===e.pendingId&&(e.deps--,e.deps===0&&!I&&e.resolve()),ka(T,"onResolve")},fallback(U){if(!N.pendingBranch)return;const{vnode:I,activeBranch:T,parentComponent:w,container:R,namespace:P}=N;ka(I,"onFallback");const S=_(T),b=()=>{N.isInFallback&&(f(null,U,R,S,w,null,P,a,c),Fi(N,U))},fe=U.transition&&U.transition.mode==="out-in";fe&&(T.transition.afterLeave=b),N.isInFallback=!0,m(T,w,null,!0),fe||b()},move(U,I,T){N.activeBranch&&p(N.activeBranch,U,I,T),N.container=U},next(){return N.activeBranch&&_(N.activeBranch)},registerDep(U,I,T){const w=!!N.pendingBranch;w&&N.deps++;const R=U.vnode.el;U.asyncDep.catch(P=>{Io(P,U,0)}).then(P=>{if(U.isUnmounted||N.isUnmounted||N.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:S}=U;ef(U,P),R&&(S.el=R);const b=!R&&U.subTree.el;I(U,S,y(R||U.subTree.el),R?null:_(U.subTree),N,o,T),b&&(S.placeholder=null,C(b)),ll(U,S.el),w&&--N.deps===0&&N.resolve()})},unmount(U,I){N.isUnmounted=!0,N.activeBranch&&m(N.activeBranch,n,U,I),N.pendingBranch&&m(N.pendingBranch,n,U,I)}};return N}function fS(t,e,n,r,s,i,o,a,c){const l=e.suspense=EE(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=c(t,l.pendingBranch=e.ssContent,n,l,i,o);return l.deps===0&&l.resolve(!1,!0),h}function dS(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=og(r?n.default:n),t.ssFallback=r?og(n.fallback):tt(it)}function og(t){let e;if(de(t)){const n=Ki&&t._c;n&&(t._d=!1,pn()),t=t(),n&&(t._d=!0,e=Wt,TE())}return le(t)&&(t=JR(t)),t=rn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function wE(t,e){e&&e.pendingBranch?le(t)?e.effects.push(...t):e.effects.push(t):Gh(t)}function Fi(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,ll(r,s))}function pS(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Vt=Symbol.for("v-fgt"),Bs=Symbol.for("v-txt"),it=Symbol.for("v-cmt"),Jc=Symbol.for("v-stc"),ya=[];let Wt=null;function pn(t=!1){ya.push(Wt=t?null:[])}function TE(){ya.pop(),Wt=ya[ya.length-1]||null}let Ki=1;function wu(t,e=!1){Ki+=t,t<0&&Wt&&e&&(Wt.hasOnce=!0)}function IE(t){return t.dynamicChildren=Ki>0?Wt||Ni:null,TE(),Ki>0&&Wt&&Wt.push(t),t}function mS(t,e,n,r,s,i){return IE(AE(t,e,n,r,s,i,!0))}function jn(t,e,n,r,s){return IE(tt(t,e,n,r,s,!0))}function qs(t){return t?t.__v_isVNode===!0:!1}function wn(t,e){return t.type===e.type&&t.key===e.key}const bE=({key:t})=>t??null,Yc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||at(t)||de(t)?{i:bt,r:t,k:e,f:!!n}:t:null);function AE(t,e=null,n=null,r=0,s=null,i=t===Vt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&bE(e),ref:e&&Yc(e),scopeId:Fv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:bt};return a?(vd(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Qe(n)?8:16),Ki>0&&!o&&Wt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Wt.push(c),c}const tt=gS;function gS(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Zv)&&(t=it),qs(t)){const a=dr(t,e,!0);return n&&vd(a,n),Ki>0&&!i&&Wt&&(a.shapeFlag&6?Wt[Wt.indexOf(t)]=a:Wt.push(a)),a.patchFlag=-2,a}if(bS(t)&&(t=t.__vccOpts),e){e=RE(e);let{class:a,style:c}=e;a&&!Qe(a)&&(e.class=il(a)),xe(c)&&(al(c)&&!le(c)&&(c=pt({},c)),e.style=sl(c))}const o=Qe(t)?1:Eu(t)?128:Uv(t)?64:xe(t)?4:de(t)?2:0;return AE(t,e,n,r,s,o,i,!0)}function RE(t){return t?al(t)||uE(t)?pt({},t):t:null}function dr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,l=e?PE(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&bE(l),ref:e&&e.ref?n&&i?le(i)?i.concat(Yc(e)):[i,Yc(e)]:Yc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Vt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&dr(t.ssContent),ssFallback:t.ssFallback&&dr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&zi(h,c.clone(h)),h}function SE(t=" ",e=0){return tt(Bs,null,t,e)}function RF(t="",e=!1){return e?(pn(),jn(it,null,t)):tt(it,null,t)}function rn(t){return t==null||typeof t=="boolean"?tt(it):le(t)?tt(Vt,null,t.slice()):qs(t)?rr(t):tt(Bs,null,String(t))}function rr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:dr(t)}function vd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(le(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),vd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!uE(e)?e._ctx=bt:s===3&&bt&&(bt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:bt},n=32):(e=String(e),r&64?(n=16,e=[SE(e)]):n=8);t.children=e,t.shapeFlag|=n}function PE(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=il([e.class,r.class]));else if(s==="style")e.style=sl([e.style,r.style]);else if(sc(s)){const i=e[s],o=r[s];o&&i!==o&&!(le(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Kt(t,e,n,r=null){Pn(t,e,7,[n,r])}const _S=sE();let yS=0;function vS(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||_S,i={uid:yS++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new gv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hE(r,s),emitsOptions:iE(r,s),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:r.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=WR.bind(null,i),t.ce&&t.ce(i),i}let Tt=null;const bo=()=>Tt||bt;let Tu,Zh;{const t=rl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Tu=e("__VUE_INSTANCE_SETTERS__",n=>Tt=n),Zh=e("__VUE_SSR_SETTERS__",n=>Wi=n)}const cc=t=>{const e=Tt;return Tu(t),t.scope.on(),()=>{t.scope.off(),Tu(e)}},ag=()=>{Tt&&Tt.scope.off(),Tu(null)};function CE(t){return t.vnode.shapeFlag&4}let Wi=!1;function ES(t,e=!1,n=!1){e&&Zh(e);const{props:r,children:s}=t.vnode,i=CE(t);eS(t,r,i,e),sS(t,s,n||e);const o=i?wS(t,e):void 0;return e&&Zh(!1),o}function wS(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,BR);const{setup:r}=n;if(r){hr();const s=t.setupContext=r.length>1?IS(t):null,i=cc(t),o=ic(r,t,0,[t.props,s]),a=av(o);if(fr(),i(),(a||t.sp)&&!cr(t)&&pd(t),a){if(o.then(ag,ag),e)return o.then(c=>{ef(t,c)}).catch(c=>{Io(c,t,0)});t.asyncDep=o}else ef(t,o)}else xE(t)}function ef(t,e,n){de(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:xe(e)&&(t.setupState=kv(e)),xE(t)}function xE(t,e,n){const r=t.type;t.render||(t.render=r.render||Gn);{const s=cc(t);hr();try{UR(t)}finally{fr(),s()}}}const TS={get(t,e){return xt(t,"get",""),t[e]}};function IS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,TS),slots:t.slots,emit:t.emit,expose:e}}function hl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(kv(rR(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in _a)return _a[n](t)},has(e,n){return n in e||n in _a}})):t.proxy}function tf(t,e=!0){return de(t)?t.displayName||t.name:t.name||e&&t.__name}function bS(t){return de(t)&&"__vccOpts"in t}const sn=(t,e)=>fR(t,e,Wi);function Nt(t,e,n){try{wu(-1);const r=arguments.length;return r===2?xe(e)&&!le(e)?qs(e)?tt(t,null,[e]):tt(t,e):tt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&qs(n)&&(n=[n]),tt(t,e,n))}finally{wu(1)}}const AS="3.5.28";/**
* @vue/runtime-dom v3.5.28
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nf;const cg=typeof window<"u"&&window.trustedTypes;if(cg)try{nf=cg.createPolicy("vue",{createHTML:t=>t})}catch{}const VE=nf?t=>nf.createHTML(t):t=>t,RS="http://www.w3.org/2000/svg",SS="http://www.w3.org/1998/Math/MathML",nr=typeof document<"u"?document:null,ug=nr&&nr.createElement("template"),PS={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?nr.createElementNS(RS,t):e==="mathml"?nr.createElementNS(SS,t):n?nr.createElement(t,{is:n}):nr.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>nr.createTextNode(t),createComment:t=>nr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>nr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{ug.innerHTML=VE(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=ug.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Cr="transition",Yo="animation",Oa=Symbol("_vtc"),DE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},CS=pt({},jv,DE),xS=t=>(t.displayName="Transition",t.props=CS,t),VS=xS((t,{slots:e})=>Nt(bR,DS(t),e)),ys=(t,e=[])=>{le(t)?t.forEach(n=>n(...e)):t&&t(...e)},lg=t=>t?le(t)?t.some(e=>e.length>1):t.length>1:!1;function DS(t){const e={};for(const S in t)S in DE||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,_=NS(s),y=_&&_[0],C=_&&_[1],{onBeforeEnter:k,onEnter:D,onEnterCancelled:E,onLeave:x,onLeaveCancelled:N,onBeforeAppear:U=k,onAppear:I=D,onAppearCancelled:T=E}=e,w=(S,b,fe,Te)=>{S._enterCancelled=Te,vs(S,b?h:a),vs(S,b?l:o),fe&&fe()},R=(S,b)=>{S._isLeaving=!1,vs(S,f),vs(S,m),vs(S,p),b&&b()},P=S=>(b,fe)=>{const Te=S?I:D,ie=()=>w(b,S,fe);ys(Te,[b,ie]),hg(()=>{vs(b,S?c:i),er(b,S?h:a),lg(Te)||fg(b,r,y,ie)})};return pt(e,{onBeforeEnter(S){ys(k,[S]),er(S,i),er(S,o)},onBeforeAppear(S){ys(U,[S]),er(S,c),er(S,l)},onEnter:P(!1),onAppear:P(!0),onLeave(S,b){S._isLeaving=!0;const fe=()=>R(S,b);er(S,f),S._enterCancelled?(er(S,p),mg(S)):(mg(S),er(S,p)),hg(()=>{S._isLeaving&&(vs(S,f),er(S,m),lg(x)||fg(S,r,C,fe))}),ys(x,[S,fe])},onEnterCancelled(S){w(S,!1,void 0,!0),ys(E,[S])},onAppearCancelled(S){w(S,!0,void 0,!0),ys(T,[S])},onLeaveCancelled(S){R(S),ys(N,[S])}})}function NS(t){if(t==null)return null;if(xe(t))return[ph(t.enter),ph(t.leave)];{const e=ph(t);return[e,e]}}function ph(t){return hv(t)}function er(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Oa]||(t[Oa]=new Set)).add(e)}function vs(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Oa];n&&(n.delete(e),n.size||(t[Oa]=void 0))}function hg(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let kS=0;function fg(t,e,n,r){const s=t._endId=++kS,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=OS(t,e);if(!o)return r();const l=o+"end";let h=0;const f=()=>{t.removeEventListener(l,p),i()},p=m=>{m.target===t&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},a+1),t.addEventListener(l,p)}function OS(t,e){const n=window.getComputedStyle(t),r=_=>(n[_]||"").split(", "),s=r(`${Cr}Delay`),i=r(`${Cr}Duration`),o=dg(s,i),a=r(`${Yo}Delay`),c=r(`${Yo}Duration`),l=dg(a,c);let h=null,f=0,p=0;e===Cr?o>0&&(h=Cr,f=o,p=i.length):e===Yo?l>0&&(h=Yo,f=l,p=c.length):(f=Math.max(o,l),h=f>0?o>l?Cr:Yo:null,p=h?h===Cr?i.length:c.length:0);const m=h===Cr&&/\b(?:transform|all)(?:,|$)/.test(r(`${Cr}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:m}}function dg(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>pg(n)+pg(t[r])))}function pg(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function mg(t){return(t?t.ownerDocument:document).body.offsetHeight}function MS(t,e,n){const r=t[Oa];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const gg=Symbol("_vod"),LS=Symbol("_vsh"),FS=Symbol(""),BS=/(?:^|;)\s*display\s*:/;function US(t,e,n){const r=t.style,s=Qe(n);let i=!1;if(n&&!s){if(e)if(Qe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Xc(r,a,"")}else for(const o in e)n[o]==null&&Xc(r,o,"");for(const o in n)o==="display"&&(i=!0),Xc(r,o,n[o])}else if(s){if(e!==n){const o=r[FS];o&&(n+=";"+o),r.cssText=n,i=BS.test(n)}}else e&&t.removeAttribute("style");gg in t&&(t[gg]=i?r.display:"",t[LS]&&(r.display="none"))}const _g=/\s*!important$/;function Xc(t,e,n){if(le(n))n.forEach(r=>Xc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=jS(t,e);_g.test(n)?t.setProperty(ri(r),n.replace(_g,""),"important"):t[r]=n}}const yg=["Webkit","Moz","ms"],mh={};function jS(t,e){const n=mh[e];if(n)return n;let r=_n(e);if(r!=="filter"&&r in t)return mh[e]=r;r=nl(r);for(let s=0;s<yg.length;s++){const i=yg[s]+r;if(i in t)return mh[e]=i}return e}const vg="http://www.w3.org/1999/xlink";function Eg(t,e,n,r,s,i=OA(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(vg,e.slice(6,e.length)):t.setAttributeNS(vg,e,n):n==null||i&&!fv(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Rn(n)?String(n):n)}function wg(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?VE(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=fv(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Fr(t,e,n,r){t.addEventListener(e,n,r)}function $S(t,e,n,r){t.removeEventListener(e,n,r)}const Tg=Symbol("_vei");function qS(t,e,n,r,s=null){const i=t[Tg]||(t[Tg]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=HS(e);if(r){const l=i[e]=KS(r,s);Fr(t,a,l,c)}else o&&($S(t,a,o,c),i[e]=void 0)}}const Ig=/(?:Once|Passive|Capture)$/;function HS(t){let e;if(Ig.test(t)){e={};let r;for(;r=t.match(Ig);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ri(t.slice(2)),e]}let gh=0;const GS=Promise.resolve(),zS=()=>gh||(GS.then(()=>gh=0),gh=Date.now());function KS(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Pn(WS(r,n.value),e,5,[r])};return n.value=t,n.attached=zS(),n}function WS(t,e){if(le(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const bg=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,QS=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?MS(t,r,o):e==="style"?US(t,n,r):sc(e)?td(e)||qS(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):JS(t,e,r,o))?(wg(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Eg(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Qe(r))?wg(t,_n(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Eg(t,e,r,o))};function JS(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&bg(e)&&de(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return bg(e)&&Qe(n)?!1:e in t}const Qi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return le(e)?n=>Oi(e,n):e};function YS(t){t.target.composing=!0}function Ag(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ur=Symbol("_assign");function Rg(t,e,n){return e&&(t=t.trim()),n&&(t=rd(t)),t}const SF={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[ur]=Qi(s);const i=r||s.props&&s.props.type==="number";Fr(t,e?"change":"input",o=>{o.target.composing||t[ur](Rg(t.value,n,i))}),(n||i)&&Fr(t,"change",()=>{t.value=Rg(t.value,n,i)}),e||(Fr(t,"compositionstart",YS),Fr(t,"compositionend",Ag),Fr(t,"change",Ag))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[ur]=Qi(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?rd(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},PF={deep:!0,created(t,e,n){t[ur]=Qi(n),Fr(t,"change",()=>{const r=t._modelValue,s=NE(t),i=t.checked,o=t[ur];if(le(r)){const a=dv(r,s),c=a!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const l=[...r];l.splice(a,1),o(l)}}else if(Zu(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(kE(t,i))})},mounted:Sg,beforeUpdate(t,e,n){t[ur]=Qi(n),Sg(t,e,n)}};function Sg(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(le(e))s=dv(e,r.props.value)>-1;else if(Zu(e))s=e.has(r.props.value);else{if(e===n)return;s=$s(e,kE(t,!0))}t.checked!==s&&(t.checked=s)}const CF={created(t,{value:e},n){t.checked=$s(e,n.props.value),t[ur]=Qi(n),Fr(t,"change",()=>{t[ur](NE(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[ur]=Qi(r),e!==n&&(t.checked=$s(e,r.props.value))}};function NE(t){return"_value"in t?t._value:t.value}function kE(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const OE=pt({patchProp:QS},PS);let va,Pg=!1;function XS(){return va||(va=oS(OE))}function ZS(){return va=Pg?va:aS(OE),Pg=!0,va}const e0=((...t)=>{const e=XS().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=LE(r);if(!s)return;const i=e._component;!de(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,ME(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e}),t0=((...t)=>{const e=ZS().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=LE(r);if(s)return n(s,!0,ME(s))},e});function ME(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function LE(t){return Qe(t)?document.querySelector(t):t}const n0=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,r0=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,s0=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function i0(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){o0(t);return}return e}function o0(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Iu(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!s0.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(n0.test(t)||r0.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,i0)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const a0=/#/g,c0=/&/g,u0=/\//g,l0=/=/g,Ed=/\+/g,h0=/%5e/gi,f0=/%60/gi,d0=/%7c/gi,p0=/%20/gi;function m0(t){return encodeURI(""+t).replace(d0,"|")}function rf(t){return m0(typeof t=="string"?t:JSON.stringify(t)).replace(Ed,"%2B").replace(p0,"+").replace(a0,"%23").replace(c0,"%26").replace(f0,"`").replace(h0,"^").replace(u0,"%2F")}function _h(t){return rf(t).replace(l0,"%3D")}function bu(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function g0(t){return bu(t.replace(Ed," "))}function _0(t){return bu(t.replace(Ed," "))}function FE(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=g0(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=_0(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function y0(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${_h(t)}=${rf(n)}`).join("&"):`${_h(t)}=${rf(e)}`:_h(t)}function v0(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>y0(e,t[e])).filter(Boolean).join("&")}const E0=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,w0=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,T0=/^([/\\]\s*){2,}[^/\\]/,I0=/^[\s\0]*(blob|data|javascript|vbscript):$/i,b0=/\/$|\/\?|\/#/,A0=/^\.?\//;function si(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?E0.test(t):w0.test(t)||(e.acceptRelative?T0.test(t):!1)}function R0(t){return!!t&&I0.test(t)}function sf(t="",e){return e?b0.test(t):t.endsWith("/")}function Au(t="",e){if(!e)return(sf(t)?t.slice(0,-1):t)||"/";if(!sf(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");s!==-1&&(n=t.slice(0,s),r=t.slice(s));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function S0(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(sf(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");if(s!==-1&&(n=t.slice(0,s),r=t.slice(s),!n))return r;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function P0(t,e){if(UE(e)||si(t))return t;const n=Au(e);if(t.startsWith(n)){const r=t[n.length];if(!r||r==="/"||r==="?")return t}return wd(n,t)}function Cg(t,e){if(UE(e))return t;const n=Au(e);if(!t.startsWith(n))return t;const r=t[n.length];if(r&&r!=="/"&&r!=="?")return t;const s=t.slice(n.length);return s[0]==="/"?s:"/"+s}function BE(t,e){const n=qE(t),r={...FE(n.search),...e};return n.search=v0(r),V0(n)}function UE(t){return!t||t==="/"}function C0(t){return t&&t!=="/"}function wd(t,...e){let n=t||"";for(const r of e.filter(s=>C0(s)))if(n){const s=r.replace(A0,"");n=S0(n)+s}else n=r;return n}function jE(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),r=[];let s=0;for(const o of n)if(!(!o||o==="/")){for(const[a,c]of o.split(e).entries())if(!(!c||c===".")){if(c===".."){if(r.length===1&&si(r[0]))continue;r.pop(),s--;continue}if(a===1&&r[r.length-1]?.endsWith(":/")){r[r.length-1]+="/"+c;continue}r.push(c),s++}}let i=r.join("/");return s>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function x0(t,e){return bu(Au(t))===bu(Au(e))}const $E=Symbol.for("ufo:protocolRelative");function qE(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,p=""]=n;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!si(t,{acceptRelative:!0}))return xg(t);const[,r="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:l,hash:h}=xg(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:l,hash:h,[$E]:!r}}function xg(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function V0(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[$E]?(t.protocol||"")+"//":"")+s+i+e+n+r}class D0 extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function N0(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",r=t.request?.url||String(t.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new D0(o,t.error?{cause:t.error}:void 0);for(const c of["request","options","response"])Object.defineProperty(a,c,{get(){return t[c]}});for(const[c,l]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,c,{get(){return t.response&&t.response[l]}});return a}const k0=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Vg(t="GET"){return k0.has(t.toUpperCase())}function O0(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const M0=new Set(["image/svg","application/xml","application/xhtml","application/html"]),L0=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function F0(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return L0.test(e)?"json":M0.has(e)||e.startsWith("text/")?"text":"blob"}function B0(t,e,n,r){const s=U0(e?.headers??t?.headers,n?.headers,r);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:s}}function U0(t,e,n){if(!e)return new n(t);const r=new n(e);if(t)for(const[s,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))r.set(s,i);return r}async function jc(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const j0=new Set([408,409,425,429,500,502,503,504]),$0=new Set([101,204,205,304]);function HE(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function s(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let h;typeof a.options.retry=="number"?h=a.options.retry:h=Vg(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):j0.has(f))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(m=>setTimeout(m,p)),i(a.request,{...a.options,retry:h-1})}}const l=N0(a);throw Error.captureStackTrace&&Error.captureStackTrace(l,i),l}const i=async function(c,l={}){const h={request:c,options:B0(c,l,t.defaults,n),response:void 0,error:void 0};h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&await jc(h,h.options.onRequest),typeof h.request=="string"&&(h.options.baseURL&&(h.request=P0(h.request,h.options.baseURL)),h.options.query&&(h.request=BE(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&Vg(h.options.method)&&(O0(h.options.body)?(h.options.body=typeof h.options.body=="string"?h.options.body:JSON.stringify(h.options.body),h.options.headers=new n(h.options.headers||{}),h.options.headers.has("content-type")||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")):("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half")));let f;if(!h.options.signal&&h.options.timeout){const m=new r;f=setTimeout(()=>{const _=new Error("[TimeoutError]: The operation was aborted due to timeout");_.name="TimeoutError",_.code=23,m.abort(_)},h.options.timeout),h.options.signal=m.signal}try{h.response=await e(h.request,h.options)}catch(m){return h.error=m,h.options.onRequestError&&await jc(h,h.options.onRequestError),await s(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!$0.has(h.response.status)&&h.options.method!=="HEAD"){const m=(h.options.parseResponse?"json":h.options.responseType)||F0(h.response.headers.get("content-type")||"");switch(m){case"json":{const _=await h.response.text(),y=h.options.parseResponse||Iu;h.response._data=y(_);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[m]()}}return h.options.onResponse&&await jc(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await jc(h,h.options.onResponseError),await s(h)):h.response},o=async function(c,l){return(await i(c,l))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},c={})=>HE({...t,...c,defaults:{...t.defaults,...c.defaults,...a}}),o}const Ru=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),q0=Ru.fetch?(...t)=>Ru.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),H0=Ru.Headers,G0=Ru.AbortController,z0=HE({fetch:q0,Headers:H0,AbortController:G0}),K0=z0,W0=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,Td=()=>W0().app,Q0=()=>Td().baseURL,J0=()=>Td().buildAssetsDir,Id=(...t)=>jE(GE(),J0(),...t),GE=(...t)=>{const e=Td(),n=e.cdnURL||e.baseURL;return t.length?jE(n,...t):n};globalThis.__buildAssetsURL=Id,globalThis.__publicAssetsURL=GE;globalThis.$fetch||(globalThis.$fetch=K0.create({baseURL:Q0()}));"global"in globalThis||(globalThis.global=globalThis);function of(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?of(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const Y0={run:t=>t()},X0=()=>Y0,zE=typeof console.createTask<"u"?console.createTask:X0;function Z0(t,e){const n=e.shift(),r=zE(n);return t.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function eP(t,e){const n=e.shift(),r=zE(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}function yh(t,e){for(const n of[...t])n(e)}class tP{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=of(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const n=of(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(Z0,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(eP,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&yh(this._before,s);const i=e(n in this._hooks?[...this._hooks[n]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&yh(this._after,s)}):(this._after&&s&&yh(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function KE(){return new tP}function nP(t={}){let e,n=!1;const r=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||r(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{r(o),e=o;try{return s?s.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const c=()=>{e=o},l=()=>e===o?c:void 0;af.add(l);try{const h=s?s.run(o,a):a();return n||(e=void 0),await h}finally{af.delete(l)}}}}function rP(t={}){const e={};return{get(n,r={}){return e[n]||(e[n]=nP({...t,...r})),e[n]}}}const Su=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Dg="__unctx__",sP=Su[Dg]||(Su[Dg]=rP()),iP=(t,e={})=>sP.get(t,e),Ng="__unctx_async_handlers__",af=Su[Ng]||(Su[Ng]=new Set);function Bi(t){const e=[];for(const s of af){const i=s();i&&e.push(i)}const n=()=>{for(const s of e)s()};let r=t();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const oP=!1,kg=!1,aP=!1,Og={id:"__nuxt-loader"},xF={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},cP="#__nuxt",WE="nuxt-app",Mg=36e5,uP="vite:preloadError";function QE(t=WE){return iP(t,{asyncContext:!1})}const lP="__nuxt_plugin";function hP(t){let e=0;const n={_id:t.id||WE||"nuxt-app",_scope:_v(),provide:void 0,versions:{get nuxt(){return"4.2.0"},get vue(){return n.vueApp.version}},payload:$n({...t.ssrContext?.payload||{},data:$n({}),state:_r({}),once:new Set,_errors:$n({})}),static:{data:{}},runWithContext(s){return n._scope.active&&!yv()?n._scope.run(()=>Lg(n,s)):Lg(n,s)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let s=!1;return()=>{if(!s&&(s=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:$n({}),_payloadRevivers:{},...t};{const s=window.__NUXT__;if(s)for(const i in s)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],s[i]);break;default:n.payload[i]=s[i]}}n.hooks=KE(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(s,i)=>{const o="$"+s;$c(n,o,i),$c(n.vueApp.config.globalProperties,o,i)},$c(n.vueApp,"$nuxt",n),$c(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(uP,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=mt;const s=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",s)}const r=n.payload.config;return n.provide("config",r),n}function fP(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function dP(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}}async function pP(t,e){const n=new Set,r=[],s=[];let i,o=0;async function a(c){const l=c.dependsOn?.filter(h=>e.some(f=>f._name===h)&&!n.has(h))??[];if(l.length>0)r.push([new Set(l),c]);else{const h=dP(t,c).then(async()=>{c._name&&(n.add(c._name),await Promise.all(r.map(async([f,p])=>{f.has(c._name)&&(f.delete(c._name),f.size===0&&(o++,await a(p)))})))}).catch(f=>{if(!c.parallel&&!t.payload.error)throw f;i||=f});c.parallel?s.push(h):await h}}for(const c of e)fP(t,c);for(const c of e)await a(c);if(await Promise.all(s),o)for(let c=0;c<o;c++)await Promise.all(s);if(i)throw t.payload.error||i}function Jn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[lP]:!0,_name:e})}function Lg(t,e,n){const r=()=>e();return QE(t._id).set(t),t.vueApp.runWithContext(r)}function mP(t){let e;return fd()&&(e=bo()?.appContext.app.$nuxt),e||=QE(t).tryUse(),e||null}function mt(t){const e=mP(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function fl(t){return mt().$config}function $c(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function gP(t,e){return{ctx:{table:t},matchAll:n=>YE(n,t)}}function JE(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([r,s])=>[r,JE(s)])):new Map(Object.entries(t[n]));return e}function _P(t){return gP(JE(t))}function YE(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const r=[];for(const[i,o]of Fg(e.wildcard))(t===i||t.startsWith(i+"/"))&&r.push(o);for(const[i,o]of Fg(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");r.push(...YE(a,o))}const s=e.static.get(t);return s&&r.push(s),r.filter(Boolean)}function Fg(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function vh(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function cf(t,e,n=".",r){if(!vh(e))return cf(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:vh(o)&&vh(s[i])?s[i]=cf(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function yP(t){return(...e)=>e.reduce((n,r)=>cf(n,r,"",t),{})}const XE=yP();function vP(t,e){try{return e in t}catch{return!1}}class Bg extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:uf(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=ZE(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function EP(t){if(typeof t=="string")return new Bg(t);if(wP(t))return t;const e=new Bg(t.message??t.statusMessage??"",{cause:t.cause||t});if(vP(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=uf(t.statusCode,e.statusCode):t.status&&(e.statusCode=uf(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;ZE(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function wP(t){return t?.constructor?.__h3_error__===!0}const TP=/[^\u0009\u0020-\u007E]/g;function ZE(t=""){return t.replace(TP,"")}function uf(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const ew=Symbol("layout-meta"),Hs=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const un=()=>mt()?.$router,dl=()=>fd()?kt(Hs,mt()._route):mt()._route;const IP=()=>{try{if(mt()._processingMiddleware)return!0}catch{return!1}return!1},VF=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?bP(t):un().resolve(t).href;if(e?.open){const{target:c="_blank",windowFeatures:l={}}=e.open,h=[];for(const[f,p]of Object.entries(l))p!==void 0&&h.push(`${f.toLowerCase()}=${p}`);return open(n,c,h.join(", ")),Promise.resolve()}const r=si(n,{acceptRelative:!0}),s=e?.external||r;if(s){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(n,window.location.href);if(c&&R0(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const i=IP();if(!s&&i){if(e?.replace){if(typeof t=="string"){const{pathname:c,search:l,hash:h}=qE(t);return{path:c,...l&&{query:FE(l)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=un(),a=mt();return s?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function bP(t){return BE(t.path||"",t.query||{})+(t.hash||"")}const tw="__nuxt_error",pl=()=>uR(mt().payload,"error"),Is=t=>{const e=Us(t);try{const n=pl();mt().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},AP=async(t={})=>{const e=mt(),n=pl();e.callHook("app:error:cleared",t),t.redirect&&await un().replace(t.redirect),n.value=void 0},nw=t=>!!t&&typeof t=="object"&&tw in t,Us=t=>{const e=EP(t);return Object.defineProperty(e,tw,{value:!0,configurable:!1,writable:!1}),e};function RP(t){const e=PP(t),n=new ArrayBuffer(e.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return n}const SP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function PP(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,r=0;for(let s=0;s<t.length;s++)n<<=6,n|=SP.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,e+=String.fromCharCode(n)):r===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const CP=-1,xP=-2,VP=-3,DP=-4,NP=-5,kP=-6;function OP(t,e){return MP(JSON.parse(t),e)}function MP(t,e){if(typeof t=="number")return i(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);let s=null;function i(o,a=!1){if(o===CP)return;if(o===VP)return NaN;if(o===DP)return 1/0;if(o===NP)return-1/0;if(o===kP)return-0;if(a||typeof o!="number")throw new Error("Invalid input");if(o in r)return r[o];const c=n[o];if(!c||typeof c!="object")r[o]=c;else if(Array.isArray(c))if(typeof c[0]=="string"){const l=c[0],h=e&&Object.hasOwn(e,l)?e[l]:void 0;if(h){let f=c[1];if(typeof f!="number"&&(f=n.push(c[1])-1),s??=new Set,s.has(f))throw new Error("Invalid circular reference");return s.add(f),r[o]=h(i(f)),s.delete(f),r[o]}switch(l){case"Date":r[o]=new Date(c[1]);break;case"Set":const f=new Set;r[o]=f;for(let _=1;_<c.length;_+=1)f.add(i(c[_]));break;case"Map":const p=new Map;r[o]=p;for(let _=1;_<c.length;_+=2)p.set(i(c[_]),i(c[_+1]));break;case"RegExp":r[o]=new RegExp(c[1],c[2]);break;case"Object":r[o]=Object(c[1]);break;case"BigInt":r[o]=BigInt(c[1]);break;case"null":const m=Object.create(null);r[o]=m;for(let _=1;_<c.length;_+=2)m[c[_]]=i(c[_+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{if(n[c[1]][0]!=="ArrayBuffer")throw new Error("Invalid data");const _=globalThis[l],y=i(c[1]),C=new _(y);r[o]=c[2]!==void 0?C.subarray(c[2],c[3]):C;break}case"ArrayBuffer":{const _=c[1];if(typeof _!="string")throw new Error("Invalid ArrayBuffer encoding");const y=RP(_);r[o]=y;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const _=l.slice(9);r[o]=Temporal[_].from(c[1]);break}case"URL":{const _=new URL(c[1]);r[o]=_;break}case"URLSearchParams":{const _=new URLSearchParams(c[1]);r[o]=_;break}default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(c.length);r[o]=l;for(let h=0;h<c.length;h+=1){const f=c[h];f!==xP&&(l[h]=i(f))}}else{const l={};r[o]=l;for(const h in c){if(h==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const f=c[h];l[h]=i(f)}}return r[o]}return i(0)}const LP=new Set(["link","style","script","noscript"]),FP=new Set(["title","titleTemplate","script","style","noscript"]),Ug=new Set(["base","meta","link","style","script","noscript"]),BP=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),UP=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),jP=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),$P=new Set(["templateParams","htmlAttrs","bodyAttrs"]),qP=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),HP=["name","property","http-equiv"],GP=new Set(["viewport","description","keywords","robots"]);function rw(t){const e=t.split(":");return e.length?qP.has(e[1]):!1}function lf(t){const{props:e,tag:n}=t;if(UP.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const r of HP)if(e[r]!==void 0){const s=e[r],i=s.includes(":"),o=GP.has(s),c=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${s}${c}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(FP.has(n)){const r=t.textContent||t.innerHTML;if(r)return`${n}:content:${r}`}}function jg(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function Pu(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());let s;if(e&&(s=e(n,t)),Array.isArray(s))return s.map(i=>Pu(i,e));if(s?.constructor===Object){const i={};for(const o of Object.keys(s))i[o]=Pu(s[o],e,o);return i}return s}function zP(t,e){const n=t==="style"?new Map:new Set;function r(s){const i=s.trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(c=>c.trim());o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(r):r(e):Array.isArray(e)?e.forEach(s=>r(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{i&&i!=="false"&&(t==="style"?n.set(s.trim(),i):r(s))}),n}function sw(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,r])=>{if(r===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=zP(n,r);return}if(jP.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof r=="object"){let o=e.type;if(e.type||(o="application/json"),!o?.endsWith("json")&&o!=="speculationrules")return;e.type=o,t.props.type=o,t[n]=JSON.stringify(r)}else t[n]=r;return}const s=String(r),i=n.startsWith("data-");s==="true"||s===""?t.props[n]=i?s:!0:!r&&i&&s==="false"?t.props[n]="false":r!==void 0&&(t.props[n]=r)}),t):t}function KP(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},r=sw({tag:t,props:{}},n);return r.key&&LP.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function WP(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(s,i)=>{for(let o=0;o<e.length;o++)i=e[o](s,i);return i};t=n(void 0,t);const r=[];return t=Pu(t,n),Object.entries(t||{}).forEach(([s,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])r.push(KP(s,o))}),r.flat()}const $g=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,qg={base:-10,title:10},QP={critical:-8,high:-1,low:2},Hg={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},JP=/@import/,Xo=t=>t===""||t===!0;function YP(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const r=QP[e.tagPriority]||0,s=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:Hg;if(e.tag in qg)n=qg[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=Hg.meta[i])}else e.tag==="link"&&e.props.rel?n=s.link[e.props.rel]:e.tag==="script"?Xo(e.props.async)?n=s.script.async:e.props.src&&!Xo(e.props.defer)&&!Xo(e.props.async)&&e.props.type!=="module"&&!e.props.type?.endsWith("json")?n=s.script.sync:Xo(e.props.defer)&&e.props.src&&!Xo(e.props.async)&&(n=s.script.defer):e.tag==="style"&&(n=e.innerHTML&&JP.test(e.innerHTML)?s.style.imported:s.style.sync);return(n||100)+r}function Gg(t,e){const n=typeof e=="function"?e(t):e,r=n.key||String(t.plugins.size+1);t.plugins.get(r)||(t.plugins.set(r,n),t.hooks.addHooks(n.hooks||{}))}function XP(t={}){const e=KE();e.addHooks(t.hooks||{});const n=!t.document,r=new Map,s=new Map,i=new Set,o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:r,headEntries(){return[...r.values()]},use:a=>Gg(o,a),push(a,c){const l={...c||{}};delete l.head;const h=l._index??o._entryCount++,f={_i:h,input:a,options:l},p={_poll(m=!1){o.dirty=!0,!m&&i.add(h),e.callHook("entries:updated",o)},dispose(){r.delete(h)&&o.invalidate()},patch(m){(!l.mode||l.mode==="server"&&n||l.mode==="client"&&!n)&&(f.input=m,r.set(h,f),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const p=i.values().next().value;i.delete(p);const m=r.get(p);if(m){const _={tags:WP(m.input,t.propResolvers||[]).map(y=>Object.assign(y,m.options)),entry:m};await e.callHook("entries:normalize",_),m._tags=_.tags.map((y,C)=>(y._w=YP(o,y),y._p=(m._i<<10)+C,y._d=lf(y),y))}}let c=!1;a.entries.flatMap(p=>(p._tags||[]).map(m=>({...m,props:{...m.props}}))).sort($g).reduce((p,m)=>{const _=String(m._d||m._p);if(!p.has(_))return p.set(_,m);const y=p.get(_);if((m?.tagDuplicateStrategy||($P.has(m.tag)?"merge":null)||(m.key&&m.key===y.key?"merge":null))==="merge"){const k={...y.props};Object.entries(m.props).forEach(([D,E])=>k[D]=D==="style"?new Map([...y.props.style||new Map,...E]):D==="class"?new Set([...y.props.class||new Set,...E]):E),p.set(_,{...m,props:k})}else m._p>>10===y._p>>10&&m.tag==="meta"&&rw(_)?(p.set(_,Object.assign([...Array.isArray(y)?y:[y],m],m)),c=!0):(m._w===y._w?m._p>y._p:m?._w<y?._w)&&p.set(_,m);return p},a.tagMap);const l=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=l?.textContent,h){const p=h?.textContent;if(o._titleTemplate=p,p){let m=typeof p=="function"?p(l?.textContent):p;typeof m=="string"&&!o.plugins.has("template-params")&&(m=m.replace("%s",l?.textContent||"")),l?m===null?a.tagMap.delete("title"):a.tagMap.set("title",{...l,textContent:m}):(h.tag="title",h.textContent=m)}}a.tags=Array.from(a.tagMap.values()),c&&(a.tags=a.tags.flat().sort($g)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const f=[];for(const p of a.tags){const{innerHTML:m,tag:_,props:y}=p;if(BP.has(_)&&!(Object.keys(y).length===0&&!p.innerHTML&&!p.textContent)&&!(_==="meta"&&!y.content&&!y["http-equiv"]&&!y.charset)){if(_==="script"&&m){if(y.type?.endsWith("json")){const C=typeof m=="string"?m:JSON.stringify(m);p.innerHTML=C.replace(/</g,"\\u003C")}else typeof m=="string"&&(p.innerHTML=m.replace(new RegExp(`</${_}`,"g"),`<\\/${_}`));p._d=lf(p)}f.push(p)}}return f},invalidate(){for(const a of r.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>Gg(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const ZP=(t,e)=>at(e)?iR(e):e,iw="usehead";function eC(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(iw,t)}}.install}function tC(){if(fd()){const t=kt(iw);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function DF(t,e={}){const n=e.head||tC();return n.ssr?n.push(t||{},e):nC(n,t,e)}function nC(t,e,n={}){const r=ar(!1);let s;return vR(()=>{const o=r.value?{}:Pu(e,ZP);s?s.patch(o):s=t.push(o,n)}),bo()&&(ac(()=>{s.dispose()}),Kv(()=>{r.value=!0}),zv(()=>{r.value=!1})),s}let Zc,eu;function rC(){return Zc=$fetch(Id(`builds/meta/${fl().app.buildId}.json`),{responseType:"json"}),Zc.then(t=>{eu=_P(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),Zc}function ml(){return Zc||rC()}async function bd(t){const e=typeof t=="string"?t:t.path;if(await ml(),!eu)return console.error("[nuxt] Error creating app manifest matcher.",eu),{};try{return XE({},...eu.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function zg(t,e={}){if(!await aw(t))return null;const r=await iC(t,e);return await ow(r)||null}const sC="_payload.json";async function iC(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||si(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const r=fl(),s=e.hash||(e.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await aw(t)?i:r.app.baseURL;return wd(o,n.pathname,sC+(s?`?${s}`:""))}async function ow(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(cw));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function aw(t=dl().path){const e=mt();return t=t==="/"?t:t.replace(/\/$/,""),(await ml()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const r=await bd({path:t});return!!r.prerender&&!r.redirect})}let Es=null;async function oC(){if(Es)return Es;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await cw(t.textContent||""),n=t.dataset.src?await ow(t.dataset.src):void 0;return Es={...e,...n,...window.__NUXT__},Es.config?.public&&(Es.config.public=_r(Es.config.public)),Es}async function cw(t){return await OP(t,mt()._payloadRevivers)}function aC(t,e){mt()._payloadRevivers[t]=e}const cC=[["NuxtError",t=>Us(t)],["EmptyShallowRef",t=>Hi(t==="_"?void 0:t==="0n"?BigInt(0):Iu(t))],["EmptyRef",t=>ar(t==="_"?void 0:t==="0n"?BigInt(0):Iu(t))],["ShallowRef",t=>Hi(t)],["ShallowReactive",t=>$n(t)],["Ref",t=>ar(t)],["Reactive",t=>_r(t)]],uC=Jn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[r,s]of cC)aC(r,s);Object.assign(t.payload,([e,n]=Bi(()=>t.runWithContext(oC)),e=await e,n(),e)),delete window.__NUXT__}});async function Ad(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{const i=new Map,o=new Promise(m=>{t.resolveTags().then(_=>{m(_.map(y=>{const C=i.get(y._d)||0,k={tag:y,id:(C?`${y._d}:${C}`:y._d)||jg(y),shouldRender:!0};return y._d&&rw(y._d)&&i.set(y._d,C+1),k}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const m of["body","head"]){const _=n[m]?.children;for(const y of _){const C=y.tagName.toLowerCase();if(!Ug.has(C))continue;const k=sw({tag:C,props:{}},{innerHTML:y.innerHTML,...y.getAttributeNames().reduce((D,E)=>(D[E]=y.getAttribute(E),D),{})||{}});if(k.key=y.getAttribute("data-hid")||void 0,k._d=lf(k)||jg(k),a.elMap.has(k._d)){let D=1,E=k._d;for(;a.elMap.has(E);)E=`${k._d}:${D++}`;a.elMap.set(E,y)}else a.elMap.set(k._d,y)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function c(m,_,y){const C=`${m}:${_}`;a.sideEffects[C]=y,delete a.pendingSideEffects[C]}function l({id:m,$el:_,tag:y}){const C=y.tag.endsWith("Attrs");a.elMap.set(m,_),C||(y.textContent&&y.textContent!==_.textContent&&(_.textContent=y.textContent),y.innerHTML&&y.innerHTML!==_.innerHTML&&(_.innerHTML=y.innerHTML),c(m,"el",()=>{_?.remove(),a.elMap.delete(m)}));for(const k in y.props){if(!Object.prototype.hasOwnProperty.call(y.props,k))continue;const D=y.props[k];if(k.startsWith("on")&&typeof D=="function"){const x=_?.dataset;if(x&&x[`${k}fired`]){const N=k.slice(0,-5);D.call(_,new Event(N.substring(2)))}_.getAttribute(`data-${k}`)!==""&&((y.tag==="bodyAttrs"?n.defaultView:_).addEventListener(k.substring(2),D.bind(_)),_.setAttribute(`data-${k}`,""));continue}const E=`attr:${k}`;if(k==="class"){if(!D)continue;for(const x of D)C&&c(m,`${E}:${x}`,()=>_.classList.remove(x)),!_.classList.contains(x)&&_.classList.add(x)}else if(k==="style"){if(!D)continue;for(const[x,N]of D)c(m,`${E}:${x}`,()=>{_.style.removeProperty(x)}),_.style.setProperty(x,N)}else D!==!1&&D!==null&&(_.getAttribute(k)!==D&&_.setAttribute(k,D===!0?"":String(D)),C&&c(m,E,()=>_.removeAttribute(k)))}}const h=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const m of p){const{tag:_,shouldRender:y,id:C}=m;if(y){if(_.tag==="title"){n.title=_.textContent,c("title","",()=>n.title=a.title);continue}m.$el=m.$el||a.elMap.get(C),m.$el?l(m):Ug.has(_.tag)&&h.push(m)}}for(const m of h){const _=m.tag.tagPosition||"head";m.$el=n.createElement(m.tag.tag),l(m),f[_]=f[_]||n.createDocumentFragment(),f[_].appendChild(m.$el)}for(const m of p)await t.hooks.callHook("dom:renderTag",m,n,c);f.head&&n.head.appendChild(f.head),f.bodyOpen&&n.body.insertBefore(f.bodyOpen,n.body.firstChild),f.bodyClose&&n.body.appendChild(f.bodyClose);for(const m in a.pendingSideEffects)a.pendingSideEffects[m]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function lC(t={}){const e=t.domOptions?.render||Ad;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return XP({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function hC(t,e){let n=0;return()=>{const r=++n;e(()=>{n===r&&t()})}}function fC(t={}){const e=lC({domOptions:{render:hC(()=>Ad(e),n=>setTimeout(n,0))},...t});return e.install=eC(e),e}const dC={disableDefaults:!0},pC=Jn({name:"nuxt:head",enforce:"pre",setup(t){const e=fC(dC);t.vueApp.use(e);{let n=!0;const r=async()=>{n=!1,await Ad(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||r()}),t.hooks.hook("app:error",r),t.hooks.hook("app:suspense:resolve",r)}}});function mC(){return uw().__VUE_DEVTOOLS_GLOBAL_HOOK__}function uw(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const gC=typeof Proxy=="function",_C="devtools-plugin:setup",yC="plugin:settings:set";let _i,hf;function vC(){var t;return _i!==void 0||(typeof window<"u"&&window.performance?(_i=!0,hf=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(_i=!0,hf=globalThis.perf_hooks.performance):_i=!1),_i}function EC(){return vC()?hf.now():Date.now()}class wC{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),a=JSON.parse(o);Object.assign(i,a)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return EC()}},n&&n.on(yC,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...c)=>{this.onQueue.push({method:a,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...c)=>(this.targetQueue.push({method:a,args:c,resolve:()=>{}}),this.fallbacks[a](...c)):(...c)=>new Promise(l=>{this.targetQueue.push({method:a,args:c,resolve:l})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function TC(t,e){const n=t,r=uw(),s=mC(),i=gC&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(_C,t,e);else{const o=i?new wC(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Ri=typeof document<"u";function lw(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function IC(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&lw(t.default)}const De=Object.assign;function Eh(t,e){const n={};for(const r in e){const s=e[r];n[r]=Cn(s)?s.map(t):t(s)}return n}const Ea=()=>{},Cn=Array.isArray;function Kg(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const hw=/#/g,bC=/&/g,AC=/\//g,RC=/=/g,SC=/\?/g,fw=/\+/g,PC=/%5B/g,CC=/%5D/g,dw=/%5E/g,xC=/%60/g,pw=/%7B/g,VC=/%7C/g,mw=/%7D/g,DC=/%20/g;function Rd(t){return t==null?"":encodeURI(""+t).replace(VC,"|").replace(PC,"[").replace(CC,"]")}function NC(t){return Rd(t).replace(pw,"{").replace(mw,"}").replace(dw,"^")}function ff(t){return Rd(t).replace(fw,"%2B").replace(DC,"+").replace(hw,"%23").replace(bC,"%26").replace(xC,"`").replace(pw,"{").replace(mw,"}").replace(dw,"^")}function kC(t){return ff(t).replace(RC,"%3D")}function OC(t){return Rd(t).replace(hw,"%23").replace(SC,"%3F")}function MC(t){return OC(t).replace(AC,"%2F")}function Ma(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const LC=/\/$/,FC=t=>t.replace(LC,"");function wh(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return c=a>=0&&c>a?-1:c,c>=0&&(r=e.slice(0,c),i=e.slice(c,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=$C(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Ma(o)}}function BC(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Wg(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function UC(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ji(e.matched[r],n.matched[s])&&gw(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ji(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function gw(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!jC(t[n],e[n]))return!1;return!0}function jC(t,e){return Cn(t)?Qg(t,e):Cn(e)?Qg(e,t):t===e}function Qg(t,e){return Cn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function $C(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const dn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let df=(function(t){return t.pop="pop",t.push="push",t})({}),Th=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function qC(t){if(!t)if(Ri){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),FC(t)}const HC=/^[^#]+#/;function GC(t,e){return t.replace(HC,"#")+e}function zC(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const gl=()=>({left:window.scrollX,top:window.scrollY});function KC(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=zC(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Jg(t,e){return(history.state?history.state.position-e:-1)+t}const pf=new Map;function WC(t,e){pf.set(t,e)}function QC(t){const e=pf.get(t);return pf.delete(t),e}function JC(t){return typeof t=="string"||t&&typeof t=="object"}function _w(t){return typeof t=="string"||typeof t=="symbol"}let Ye=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const yw=Symbol("");Ye.MATCHER_NOT_FOUND+"",Ye.NAVIGATION_GUARD_REDIRECT+"",Ye.NAVIGATION_ABORTED+"",Ye.NAVIGATION_CANCELLED+"",Ye.NAVIGATION_DUPLICATED+"";function Yi(t,e){return De(new Error,{type:t,[yw]:!0},e)}function tr(t,e){return t instanceof Error&&yw in t&&(e==null||!!(t.type&e))}const YC=["params","query","hash"];function XC(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of YC)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function ZC(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(fw," "),i=s.indexOf("="),o=Ma(i<0?s:s.slice(0,i)),a=i<0?null:Ma(s.slice(i+1));if(o in e){let c=e[o];Cn(c)||(c=e[o]=[c]),c.push(a)}else e[o]=a}return e}function Yg(t){let e="";for(let n in t){const r=t[n];if(n=kC(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Cn(r)?r.map(s=>s&&ff(s)):[r&&ff(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function ex(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Cn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const tx=Symbol(""),Xg=Symbol(""),Sd=Symbol(""),Pd=Symbol(""),mf=Symbol("");function Zo(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Lr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const l=p=>{p===!1?c(Yi(Ye.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?c(p):JC(p)?c(Yi(Ye.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(r&&r.instances[s],e,n,l));let f=Promise.resolve(h);t.length<3&&(f=f.then(l)),f.catch(p=>c(p))})}function Ih(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(lw(c)){const l=(c.__vccOpts||c)[e];l&&i.push(Lr(l,n,r,o,a,s))}else{let l=c();i.push(()=>l.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=IC(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Lr(p,n,r,o,a,s)()}))}}return i}function nx(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>Ji(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Ji(l,c))||s.push(c))}return[n,r,s]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let rx=()=>location.protocol+"//"+location.host;function vw(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),Wg(a,"")}return Wg(n,t)+r+s}function sx(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const m=vw(t,location),_=n.value,y=e.value;let C=0;if(p){if(n.value=m,e.value=p,o&&o===_){o=null;return}C=y?p.position-y.position:0}else r(m);s.forEach(k=>{k(n.value,_,{delta:C,type:df.pop,direction:C?C>0?Th.forward:Th.back:Th.unknown})})};function c(){o=n.value}function l(p){s.push(p);const m=()=>{const _=s.indexOf(p);_>-1&&s.splice(_,1)};return i.push(m),m}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(De({},p.state,{scroll:gl()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:c,listen:l,destroy:f}}function Zg(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?gl():null}}function ix(t){const{history:e,location:n}=window,r={value:vw(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:rx()+t+c;try{e[h?"replaceState":"pushState"](l,"",p),s.value=l}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(c,l){i(c,De({},e.state,Zg(s.value.back,c,s.value.forward,!0),l,{position:s.value.position}),!0),r.value=c}function a(c,l){const h=De({},s.value,e.state,{forward:c,scroll:gl()});i(h.current,h,!0),i(c,De({},Zg(r.value,c,null),{position:h.position+1},l),!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function ox(t){t=qC(t);const e=ix(t),n=sx(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=De({location:"",base:t,go:r,createHref:GC.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Ds=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var ft=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(ft||{});const ax={type:Ds.Static,value:""},cx=/[a-zA-Z0-9_]/;function ux(t){if(!t)return[[]];if(t==="/")return[[ax]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${l}": ${m}`)}let n=ft.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",h="";function f(){l&&(n===ft.Static?i.push({type:Ds.Static,value:l}):n===ft.Param||n===ft.ParamRegExp||n===ft.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Ds.Param,value:l,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function p(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==ft.ParamRegExp){r=n,n=ft.EscapeNext;continue}switch(n){case ft.Static:c==="/"?(l&&f(),o()):c===":"?(f(),n=ft.Param):p();break;case ft.EscapeNext:p(),n=r;break;case ft.Param:c==="("?n=ft.ParamRegExp:cx.test(c)?p():(f(),n=ft.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case ft.ParamRegExp:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=ft.ParamRegExpEnd:h+=c;break;case ft.ParamRegExpEnd:f(),n=ft.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===ft.ParamRegExp&&e(`Unfinished custom RegExp for param "${l}"`),f(),o(),s}const e_="[^/]+?",lx={sensitive:!1,strict:!1,start:!0,end:!0};var Bt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Bt||{});const hx=/[.+*?^${}()[\]/\\]/g;function fx(t,e){const n=De({},lx,e),r=[];let s=n.start?"^":"";const i=[];for(const l of t){const h=l.length?[]:[Bt.Root];n.strict&&!l.length&&(s+="/");for(let f=0;f<l.length;f++){const p=l[f];let m=Bt.Segment+(n.sensitive?Bt.BonusCaseSensitive:0);if(p.type===Ds.Static)f||(s+="/"),s+=p.value.replace(hx,"\\$&"),m+=Bt.Static;else if(p.type===Ds.Param){const{value:_,repeatable:y,optional:C,regexp:k}=p;i.push({name:_,repeatable:y,optional:C});const D=k||e_;if(D!==e_){m+=Bt.BonusCustomRegExp;try{`${D}`}catch(x){throw new Error(`Invalid custom RegExp for param "${_}" (${D}): `+x.message)}}let E=y?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;f||(E=C&&l.length<2?`(?:/${E})`:"/"+E),C&&(E+="?"),s+=E,m+=Bt.Dynamic,C&&(m+=Bt.BonusOptional),y&&(m+=Bt.BonusRepeatable),D===".*"&&(m+=Bt.BonusWildcard)}h.push(m)}r.push(h)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=Bt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const h=l.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",_=i[p-1];f[_.name]=m&&_.repeatable?m.split("/"):m}return f}function c(l){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const m of p)if(m.type===Ds.Static)h+=m.value;else if(m.type===Ds.Param){const{value:_,repeatable:y,optional:C}=m,k=_ in l?l[_]:"";if(Cn(k)&&!y)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const D=Cn(k)?k.join("/"):k;if(!D)if(C)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);h+=D}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function dx(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Bt.Static+Bt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Bt.Static+Bt.Segment?1:-1:0}function Ew(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=dx(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(t_(r))return 1;if(t_(s))return-1}return s.length-r.length}function t_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const px={strict:!1,end:!0,sensitive:!1};function mx(t,e,n){const r=fx(ux(t.path),n),s=De(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function gx(t,e){const n=[],r=new Map;e=Kg(px,e);function s(f){return r.get(f)}function i(f,p,m){const _=!m,y=r_(f);y.aliasOf=m&&m.record;const C=Kg(e,f),k=[y];if("alias"in f){const x=typeof f.alias=="string"?[f.alias]:f.alias;for(const N of x)k.push(r_(De({},y,{components:m?m.record.components:y.components,path:N,aliasOf:m?m.record:y})))}let D,E;for(const x of k){const{path:N}=x;if(p&&N[0]!=="/"){const U=p.record.path,I=U[U.length-1]==="/"?"":"/";x.path=p.record.path+(N&&I+N)}if(D=mx(x,p,C),m?m.alias.push(D):(E=E||D,E!==D&&E.alias.push(D),_&&f.name&&!s_(D)&&o(f.name)),ww(D)&&c(D),y.children){const U=y.children;for(let I=0;I<U.length;I++)i(U[I],D,m&&m.children[I])}m=m||D}return E?()=>{o(E)}:Ea}function o(f){if(_w(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function c(f){const p=vx(f,n);n.splice(p,0,f),f.record.name&&!s_(f)&&r.set(f.record.name,f)}function l(f,p){let m,_={},y,C;if("name"in f&&f.name){if(m=r.get(f.name),!m)throw Yi(Ye.MATCHER_NOT_FOUND,{location:f});C=m.record.name,_=De(n_(p.params,m.keys.filter(E=>!E.optional).concat(m.parent?m.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),f.params&&n_(f.params,m.keys.map(E=>E.name))),y=m.stringify(_)}else if(f.path!=null)y=f.path,m=n.find(E=>E.re.test(y)),m&&(_=m.parse(y),C=m.record.name);else{if(m=p.name?r.get(p.name):n.find(E=>E.re.test(p.path)),!m)throw Yi(Ye.MATCHER_NOT_FOUND,{location:f,currentLocation:p});C=m.record.name,_=De({},p.params,f.params),y=m.stringify(_)}const k=[];let D=m;for(;D;)k.unshift(D.record),D=D.parent;return{name:C,path:y,params:_,matched:k,meta:yx(k)}}t.forEach(f=>i(f));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:l,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function n_(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function r_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:_x(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function _x(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function s_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function yx(t){return t.reduce((e,n)=>De(e,n.meta),{})}function vx(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Ew(t,e[i])<0?r=i:n=i+1}const s=Ex(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function Ex(t){let e=t;for(;e=e.parent;)if(ww(e)&&Ew(t,e)===0)return e}function ww({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function i_(t){const e=kt(Sd),n=kt(Pd),r=sn(()=>{const c=je(t.to);return e.resolve(c)}),s=sn(()=>{const{matched:c}=r.value,{length:l}=c,h=c[l-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(Ji.bind(null,h));if(p>-1)return p;const m=o_(c[l-2]);return l>1&&o_(h)===m&&f[f.length-1].path!==m?f.findIndex(Ji.bind(null,c[l-2])):p}),i=sn(()=>s.value>-1&&Ax(n.params,r.value.params)),o=sn(()=>s.value>-1&&s.value===n.matched.length-1&&gw(n.params,r.value.params));function a(c={}){if(bx(c)){const l=e[je(t.replace)?"replace":"push"](je(t.to)).catch(Ea);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:sn(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function wx(t){return t.length===1?t[0]:t}const Tx=os({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:i_,setup(t,{slots:e}){const n=_r(i_(t)),{options:r}=kt(Sd),s=sn(()=>({[a_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[a_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&wx(e.default(n));return t.custom?i:Nt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Ix=Tx;function bx(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Ax(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Cn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function o_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const a_=(t,e,n)=>t??e??n,Rx=os({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=kt(mf),s=sn(()=>t.route||r.value),i=kt(Xg,0),o=sn(()=>{let l=je(i);const{matched:h}=s.value;let f;for(;(f=h[l])&&!f.components;)l++;return l}),a=sn(()=>s.value.matched[o.value]);Gr(Xg,sn(()=>o.value+1)),Gr(tx,a),Gr(mf,s);const c=ar();return zr(()=>[c.value,a.value,t.name],([l,h,f],[p,m,_])=>{h&&(h.instances[f]=l,m&&m!==h&&l&&l===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),l&&h&&(!m||!Ji(h,m)||!p)&&(h.enterCallbacks[f]||[]).forEach(y=>y(l))},{flush:"post"}),()=>{const l=s.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return c_(n.default,{Component:p,route:l});const m=f.props[h],_=m?m===!0?l.params:typeof m=="function"?m(l):m:null,C=Nt(p,De({},_,e,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return c_(n.default,{Component:C,route:l})||C}}});function c_(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Tw=Rx;function Sx(t){const e=gx(t.routes,t),n=t.parseQuery||ZC,r=t.stringifyQuery||Yg,s=t.history,i=Zo(),o=Zo(),a=Zo(),c=Hi(dn);let l=dn;Ri&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Eh.bind(null,$=>""+$),f=Eh.bind(null,MC),p=Eh.bind(null,Ma);function m($,se){let ee,ue;return _w($)?(ee=e.getRecordMatcher($),ue=se):ue=$,e.addRoute(ue,ee)}function _($){const se=e.getRecordMatcher($);se&&e.removeRoute(se)}function y(){return e.getRoutes().map($=>$.record)}function C($){return!!e.getRecordMatcher($)}function k($,se){if(se=De({},se||c.value),typeof $=="string"){const V=wh(n,$,se.path),L=e.resolve({path:V.path},se),H=s.createHref(V.fullPath);return De(V,L,{params:p(L.params),hash:Ma(V.hash),redirectedFrom:void 0,href:H})}let ee;if($.path!=null)ee=De({},$,{path:wh(n,$.path,se.path).path});else{const V=De({},$.params);for(const L in V)V[L]==null&&delete V[L];ee=De({},$,{params:f(V)}),se.params=f(se.params)}const ue=e.resolve(ee,se),ve=$.hash||"";ue.params=h(p(ue.params));const Le=BC(r,De({},$,{hash:NC(ve),path:ue.path})),A=s.createHref(Le);return De({fullPath:Le,hash:ve,query:r===Yg?ex($.query):$.query||{}},ue,{redirectedFrom:void 0,href:A})}function D($){return typeof $=="string"?wh(n,$,c.value.path):De({},$)}function E($,se){if(l!==$)return Yi(Ye.NAVIGATION_CANCELLED,{from:se,to:$})}function x($){return I($)}function N($){return x(De(D($),{replace:!0}))}function U($,se){const ee=$.matched[$.matched.length-1];if(ee&&ee.redirect){const{redirect:ue}=ee;let ve=typeof ue=="function"?ue($,se):ue;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=D(ve):{path:ve},ve.params={}),De({query:$.query,hash:$.hash,params:ve.path!=null?{}:$.params},ve)}}function I($,se){const ee=l=k($),ue=c.value,ve=$.state,Le=$.force,A=$.replace===!0,V=U(ee,ue);if(V)return I(De(D(V),{state:typeof V=="object"?De({},ve,V.state):ve,force:Le,replace:A}),se||ee);const L=ee;L.redirectedFrom=se;let H;return!Le&&UC(r,ue,ee)&&(H=Yi(Ye.NAVIGATION_DUPLICATED,{to:L,from:ue}),Zt(ue,ue,!0,!1)),(H?Promise.resolve(H):R(L,ue)).catch(j=>tr(j)?tr(j,Ye.NAVIGATION_GUARD_REDIRECT)?j:Nn(j):re(j,L,ue)).then(j=>{if(j){if(tr(j,Ye.NAVIGATION_GUARD_REDIRECT))return I(De({replace:A},D(j.to),{state:typeof j.to=="object"?De({},ve,j.to.state):ve,force:Le}),se||L)}else j=S(L,ue,!0,A,ve);return P(L,ue,j),j})}function T($,se){const ee=E($,se);return ee?Promise.reject(ee):Promise.resolve()}function w($){const se=yn.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext($):$()}function R($,se){let ee;const[ue,ve,Le]=nx($,se);ee=Ih(ue.reverse(),"beforeRouteLeave",$,se);for(const V of ue)V.leaveGuards.forEach(L=>{ee.push(Lr(L,$,se))});const A=T.bind(null,$,se);return ee.push(A),Rt(ee).then(()=>{ee=[];for(const V of i.list())ee.push(Lr(V,$,se));return ee.push(A),Rt(ee)}).then(()=>{ee=Ih(ve,"beforeRouteUpdate",$,se);for(const V of ve)V.updateGuards.forEach(L=>{ee.push(Lr(L,$,se))});return ee.push(A),Rt(ee)}).then(()=>{ee=[];for(const V of Le)if(V.beforeEnter)if(Cn(V.beforeEnter))for(const L of V.beforeEnter)ee.push(Lr(L,$,se));else ee.push(Lr(V.beforeEnter,$,se));return ee.push(A),Rt(ee)}).then(()=>($.matched.forEach(V=>V.enterCallbacks={}),ee=Ih(Le,"beforeRouteEnter",$,se,w),ee.push(A),Rt(ee))).then(()=>{ee=[];for(const V of o.list())ee.push(Lr(V,$,se));return ee.push(A),Rt(ee)}).catch(V=>tr(V,Ye.NAVIGATION_CANCELLED)?V:Promise.reject(V))}function P($,se,ee){a.list().forEach(ue=>w(()=>ue($,se,ee)))}function S($,se,ee,ue,ve){const Le=E($,se);if(Le)return Le;const A=se===dn,V=Ri?history.state:{};ee&&(ue||A?s.replace($.fullPath,De({scroll:A&&V&&V.scroll},ve)):s.push($.fullPath,ve)),c.value=$,Zt($,se,ee,A),Nn()}let b;function fe(){b||(b=s.listen(($,se,ee)=>{if(!vn.listening)return;const ue=k($),ve=U(ue,vn.currentRoute.value);if(ve){I(De(ve,{replace:!0,force:!0}),ue).catch(Ea);return}l=ue;const Le=c.value;Ri&&WC(Jg(Le.fullPath,ee.delta),gl()),R(ue,Le).catch(A=>tr(A,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_CANCELLED)?A:tr(A,Ye.NAVIGATION_GUARD_REDIRECT)?(I(De(D(A.to),{force:!0}),ue).then(V=>{tr(V,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===df.pop&&s.go(-1,!1)}).catch(Ea),Promise.reject()):(ee.delta&&s.go(-ee.delta,!1),re(A,ue,Le))).then(A=>{A=A||S(ue,Le,!1),A&&(ee.delta&&!tr(A,Ye.NAVIGATION_CANCELLED)?s.go(-ee.delta,!1):ee.type===df.pop&&tr(A,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),P(ue,Le,A)}).catch(Ea)}))}let Te=Zo(),ie=Zo(),pe;function re($,se,ee){Nn($);const ue=ie.list();return ue.length?ue.forEach(ve=>ve($,se,ee)):console.error($),Promise.reject($)}function Pe(){return pe&&c.value!==dn?Promise.resolve():new Promise(($,se)=>{Te.add([$,se])})}function Nn($){return pe||(pe=!$,fe(),Te.list().forEach(([se,ee])=>$?ee($):se()),Te.reset()),$}function Zt($,se,ee,ue){const{scrollBehavior:ve}=t;if(!Ri||!ve)return Promise.resolve();const Le=!ee&&QC(Jg($.fullPath,0))||(ue||!ee)&&history.state&&history.state.scroll||null;return Gi().then(()=>ve($,se,Le)).then(A=>A&&KC(A)).catch(A=>re(A,$,se))}const Et=$=>s.go($);let Yn;const yn=new Set,vn={currentRoute:c,listening:!0,addRoute:m,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:y,resolve:k,options:t,push:x,replace:N,go:Et,back:()=>Et(-1),forward:()=>Et(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ie.add,isReady:Pe,install($){$.component("RouterLink",Ix),$.component("RouterView",Tw),$.config.globalProperties.$router=vn,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>je(c)}),Ri&&!Yn&&c.value===dn&&(Yn=!0,x(s.location).catch(ue=>{}));const se={};for(const ue in dn)Object.defineProperty(se,ue,{get:()=>c.value[ue],enumerable:!0});$.provide(Sd,vn),$.provide(Pd,$n(se)),$.provide(mf,c);const ee=$.unmount;yn.add($),$.unmount=function(){yn.delete($),yn.size<1&&(l=dn,b&&b(),b=null,c.value=dn,Yn=!1,pe=!1),ee()}}};function Rt($){return $.reduce((se,ee)=>se.then(()=>w(ee)),Promise.resolve())}return vn}function Iw(t){return kt(Pd)}const Px=/(:\w+)\([^)]+\)/g,Cx=/(:\w+)[?+*]/g,xx=/:\w+/g,Vx=(t,e)=>e.path.replace(Px,"$1").replace(Cx,"$1").replace(xx,n=>t.params[n.slice(1)]?.toString()||""),gf=(t,e)=>{const n=t.route.matched.find(s=>s.components?.default===t.Component.type),r=e??n?.meta.key??(n&&Vx(t.route,n));return typeof r=="function"?r(t.route):r},Dx=(t,e)=>({default:()=>t?Nt(VR,t===!0?{}:t,e):e});function Cd(t){return Array.isArray(t)?t:[t]}const Nx="modulepreload",kx=function(t,e){return new URL(t,e).href},u_={},fn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=l(n.map(h=>{if(h=kx(h,r),h in u_)return;u_[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(r)for(let _=o.length-1;_>=0;_--){const y=o[_];if(y.href===h&&(!f||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":Nx,f||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((_,y)=>{m.addEventListener("load",_),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},bh=[{name:"index",path:"/",component:()=>fn(()=>import("./DQMN8C8o.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)},{name:"records-topic",path:"/records/topic",component:()=>fn(()=>import("./S06JYVEJ.js"),__vite__mapDeps([6,1,2,3,7,8,9,10]),import.meta.url)},{name:"users-id",path:"/users/:id()",component:()=>fn(()=>import("./1vf0Zs1h.js"),__vite__mapDeps([11,1,2,4,3,9,12]),import.meta.url)},{name:"records-slow-quiz",path:"/records/slow-quiz",component:()=>fn(()=>import("./b8ThfLaH.js"),__vite__mapDeps([13,1,2,7,8,9,14,15]),import.meta.url)},{name:"achievements",path:"/achievements",component:()=>fn(()=>import("./ehbSTN-v.js"),__vite__mapDeps([16,17,4,2,3,18]),import.meta.url)},{name:"records-oneiromancy",path:"/records/oneiromancy",component:()=>fn(()=>import("./Fal2vt9I.js"),__vite__mapDeps([19,1,2,3,7,8,9,20]),import.meta.url)},{name:"categories-id",path:"/categories/:id()",component:()=>fn(()=>import("./7_S02YZe.js"),__vite__mapDeps([21,17,4,2,3,18]),import.meta.url)},{name:"achievements-id",path:"/achievements/:id()",component:()=>fn(()=>import("./tH3y0nE7.js"),__vite__mapDeps([22,1,2,3,4,23]),import.meta.url)},{name:"records-twenty-questions",path:"/records/twenty-questions",component:()=>fn(()=>import("./CZSXG4hA.js"),__vite__mapDeps([24,1,2,7,14,25]),import.meta.url)}],bw=(t,e)=>({default:()=>t?Nt(VS,t===!0?{}:t,e):e.default?.()}),Ox=/(:\w+)\([^)]+\)/g,Mx=/(:\w+)[?+*]/g,Lx=/:\w+/g;function l_(t){const e=t?.meta.key??t.path.replace(Ox,"$1").replace(Mx,"$1").replace(Lx,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function Fx(t,e){return t===e||e===dn?!1:l_(t)!==l_(e)?!0:!t.matched.every((r,s)=>r.components&&r.components.default===e.matched[s]?.components?.default)}const Bx={scrollBehavior(t,e,n){const r=mt(),s=un().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:Aw(t.hash),behavior:s}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=r._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===dn){a(h_(t,e,n,s));return}r.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(h_(t,e,n,s)))})})}};function Aw(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function h_(t,e,n,r){if(n)return n;const s=Fx(t,e);return t.hash?{el:t.hash,top:Aw(t.hash),behavior:s?r:"instant"}:{left:0,top:0}}const Ux={hashMode:!1,scrollBehaviorType:"auto"},xr={...Ux,...Bx},jx=async(t,e)=>{let n,r;if(!t.meta?.validate)return;const s=([n,r]=Bi(()=>Promise.resolve(t.meta.validate(t))),n=await n,r(),n);if(s===!0)return;const i=Us({fatal:!0,statusCode:s&&s.statusCode||404,statusMessage:s&&s.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},$x=async t=>{let e,n;const r=([e,n]=Bi(()=>bd({path:t.path})),e=await e,n(),e);if(r.redirect){const s=r.redirect.includes("#")?r.redirect:r.redirect+t.hash;return si(s,{acceptRelative:!0})?(window.location.href=s,!1):s}},qx=[jx,$x],_f={};function Hx(t,e,n){const{pathname:r,search:s,hash:i}=e,o=t.indexOf("#");if(o>-1){const l=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(l);return h[0]!=="/"&&(h="/"+h),Cg(h,"")}const a=Cg(r,t),c=!n||x0(a,n)?a:n;return c+(c.includes("?")?"":s)+i}const Gx=Jn({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,r=fl().app.baseURL;const s=xr.history?.(r)??ox(r),i=xr.routes?([e,n]=Bi(()=>xr.routes(bh)),e=await e,n(),e??bh):bh;let o;const a=Sx({...xr,scrollBehavior:(C,k,D)=>{if(k===dn){o=D;return}if(xr.scrollBehavior){if(a.options.scrollBehavior=xr.scrollBehavior,"scrollRestoration"in window.history){const E=a.beforeEach(()=>{E(),window.history.scrollRestoration="manual"})}return xr.scrollBehavior(C,dn,o||D)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const c=Hi(a.currentRoute.value);a.afterEach((C,k)=>{c.value=k}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const l=Hx(r,window.location,t.payload.path),h=Hi(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};t.hook("page:finish",f),a.afterEach((C,k)=>{C.matched[C.matched.length-1]?.components?.default===k.matched[k.matched.length-1]?.components?.default&&f()});const p={};for(const C in h.value)Object.defineProperty(p,C,{get:()=>h.value[C],enumerable:!0});t._route=$n(p),t._middleware||={global:[],named:{}};const m=pl();a.afterEach(async(C,k,D)=>{delete t._processingMiddleware,!t.isHydrating&&m.value&&await t.runWithContext(AP),D&&await t.callHook("page:loading:end")});try{[e,n]=Bi(()=>a.isReady()),await e,n()}catch(C){[e,n]=Bi(()=>t.runWithContext(()=>Is(C))),await e,n()}const _=l!==a.currentRoute.value.fullPath?a.resolve(l):a.currentRoute.value;f();const y=t.payload.state._layout;return a.beforeEach(async(C,k)=>{await t.callHook("page:loading:start"),C.meta=_r(C.meta),t.isHydrating&&y&&!Wn(C.meta.layout)&&(C.meta.layout=y),t._processingMiddleware=!0;{const D=new Set([...qx,...t._middleware.global]);for(const E of C.matched){const x=E.meta.middleware;if(x)for(const N of Cd(x))D.add(N)}{const E=await t.runWithContext(()=>bd({path:C.path}));if(E.appMiddleware)for(const x in E.appMiddleware)E.appMiddleware[x]?D.add(x):D.delete(x)}for(const E of D){const x=typeof E=="string"?t._middleware.named[E]||await _f[E]?.().then(N=>N.default||N):E;if(!x)throw new Error(`Unknown route middleware: '${E}'.`);try{const N=await t.runWithContext(()=>x(C,k));if(!t.payload.serverRendered&&t.isHydrating&&(N===!1||N instanceof Error)){const U=N||Us({statusCode:404,statusMessage:`Page Not Found: ${l}`});return await t.runWithContext(()=>Is(U)),!1}if(N===!0)continue;if(N===!1)return N;if(N)return nw(N)&&N.fatal&&await t.runWithContext(()=>Is(N)),N}catch(N){const U=Us(N);return U.fatal&&await t.runWithContext(()=>Is(U)),U}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(C=>{if(C.matched.length===0)return t.runWithContext(()=>Is(Us({statusCode:404,fatal:!1,statusMessage:`Page not found: ${C.fullPath}`,data:{path:C.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in _&&(_.name=void 0),await a.replace({..._,force:!0}),a.options.scrollBehavior=xr.scrollBehavior}catch(C){await t.runWithContext(()=>Is(C))}}),{provide:{router:a}}}}),f_=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),NF=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),xd=t=>{const e=mt();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{f_(()=>t())}):f_(()=>t())},zx=Jn({name:"nuxt:payload",setup(t){const e=new Set;un().beforeResolve(async(n,r)=>{if(n.path===r.path)return;const s=await zg(n.path);if(s){for(const i of e)delete t.static.data[i];for(const i in s.data)i in t.static.data||e.add(i),t.static.data[i]=s.data[i]}}),xd(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await zg(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(ml,1e3)})}}),Kx=Jn(()=>{const t=un();xd(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),Wx=Jn(t=>{let e;async function n(){let r;try{r=await ml()}catch(s){const i=s;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,Mg);try{const s=await $fetch(Id("builds/latest.json")+`?${Date.now()}`);s.id!==r?.id&&(t.hooks.callHook("app:manifest:update",s),e&&clearTimeout(e))}catch{}}xd(()=>{e=setTimeout(n,Mg)})});function Qx(t={}){const e=t.path||window.location.pathname;let n={};try{n=Iu(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:mt().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const Jx=Jn({name:"nuxt:chunk-reload",setup(t){const e=un(),n=fl(),r=new Set;e.beforeEach(()=>{r.clear()}),t.hook("app:chunkError",({error:i})=>{r.add(i)});function s(i){const o=wd(n.app.baseURL,i.fullPath);Qx({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{r.has(i)&&s(o)})}}),Yx=Jn({name:"nuxt:global-components"}),Ur={default:Kh(()=>fn(()=>import("./CAK7je82.js"),__vite__mapDeps([26,3,27]),import.meta.url).then(t=>t.default||t))};function Xx(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function Zx(t,e=un()){const{path:n,matched:r}=e.resolve(t);if(!r.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const s=e._preloadPromises||=[];if(s.length>4)return Promise.all(s).then(()=>Zx(t,e));e._routePreloaded.add(n);for(const i of r){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>s.splice(s.indexOf(a)));s.push(a)}await Promise.all(s)}const e1=Jn({name:"nuxt:prefetch",setup(t){const e=un();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const r=n?.meta?.layout;r&&typeof Ur[r]=="function"&&await Ur[r]()})}),t.hooks.hook("link:prefetch",n=>{if(si(n))return;const r=e.resolve(n);if(!r)return;const s=r.meta.layout;let i=Cd(r.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof _f[o]=="function"&&_f[o]();typeof s=="string"&&s in Ur&&Xx(Ur[s])})}});/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var t1="store";function Ao(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function Rw(t){return t!==null&&typeof t=="object"}function n1(t){return t&&typeof t.then=="function"}function r1(t,e){return function(){return t(e)}}function Sw(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function Pw(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;_l(t,n,[],t._modules.root,!0),Vd(t,n,e)}function Vd(t,e,n){var r=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},a={},c=_v(!0);c.run(function(){Ao(i,function(l,h){o[h]=r1(l,t),a[h]=sn(function(){return o[h]()}),Object.defineProperty(t.getters,h,{get:function(){return a[h].value},enumerable:!0})})}),t._state=_r({data:e}),t._scope=c,t.strict&&c1(t),r&&n&&t._withCommit(function(){r.data=null}),s&&s.stop()}function _l(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var a=Dd(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit(function(){a[c]=r.state})}var l=r.context=s1(t,o,n);r.forEachMutation(function(h,f){var p=o+f;i1(t,p,h,l)}),r.forEachAction(function(h,f){var p=h.root?f:o+f,m=h.handler||h;o1(t,p,m,l)}),r.forEachGetter(function(h,f){var p=o+f;a1(t,p,h,l)}),r.forEachChild(function(h,f){_l(t,e,n.concat(f),h,s)})}function s1(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,a){var c=Cu(i,o,a),l=c.payload,h=c.options,f=c.type;return(!h||!h.root)&&(f=e+f),t.dispatch(f,l)},commit:r?t.commit:function(i,o,a){var c=Cu(i,o,a),l=c.payload,h=c.options,f=c.type;(!h||!h.root)&&(f=e+f),t.commit(f,l,h)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return Cw(t,e)}},state:{get:function(){return Dd(t.state,n)}}}),s}function Cw(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function i1(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function o1(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return n1(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):a})}function a1(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function c1(t){zr(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Dd(t,e){return e.reduce(function(n,r){return n[r]},t)}function Cu(t,e,n){return Rw(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var u1="vuex bindings",d_="vuex:mutations",Ah="vuex:actions",yi="vuex",l1=0;function h1(t,e){TC({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[u1]},function(n){n.addTimelineLayer({id:d_,label:"Vuex Mutations",color:p_}),n.addTimelineLayer({id:Ah,label:"Vuex Actions",color:p_}),n.addInspector({id:yi,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===yi)if(r.filter){var s=[];Nw(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[Dw(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===yi){var s=r.nodeId;Cw(e,s),r.state=p1(g1(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===yi){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(yi),n.sendInspectorState(yi),n.addTimelineEvent({layerId:d_,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=l1++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:Ah,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:Ah,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var p_=8702998,f1=6710886,d1=16777215,xw={label:"namespaced",textColor:d1,backgroundColor:f1};function Vw(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function Dw(t,e){return{id:e||"root",label:Vw(e),tags:t.namespaced?[xw]:[],children:Object.keys(t._children).map(function(n){return Dw(t._children[n],e+n+"/")})}}function Nw(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[xw]:[]}),Object.keys(e._children).forEach(function(s){Nw(t,e._children[s],n,r+s+"/")})}function p1(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=m1(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?Vw(o):o,editable:!1,value:yf(function(){return i[o]})}})}return s}function m1(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=yf(function(){return t[n]})}else e[n]=yf(function(){return t[n]})}),e}function g1(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function yf(t){try{return t()}catch(e){return e}}var Vn=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},kw={namespaced:{configurable:!0}};kw.namespaced.get=function(){return!!this._rawModule.namespaced};Vn.prototype.addChild=function(e,n){this._children[e]=n};Vn.prototype.removeChild=function(e){delete this._children[e]};Vn.prototype.getChild=function(e){return this._children[e]};Vn.prototype.hasChild=function(e){return e in this._children};Vn.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Vn.prototype.forEachChild=function(e){Ao(this._children,e)};Vn.prototype.forEachGetter=function(e){this._rawModule.getters&&Ao(this._rawModule.getters,e)};Vn.prototype.forEachAction=function(e){this._rawModule.actions&&Ao(this._rawModule.actions,e)};Vn.prototype.forEachMutation=function(e){this._rawModule.mutations&&Ao(this._rawModule.mutations,e)};Object.defineProperties(Vn.prototype,kw);var ii=function(e){this.register([],e,!1)};ii.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};ii.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};ii.prototype.update=function(e){Ow([],this.root,e)};ii.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new Vn(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&Ao(n.modules,function(a,c){s.register(e.concat(c),a,r)})};ii.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};ii.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function Ow(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;Ow(t.concat(r),e.getChild(r),n.modules[r])}}function _1(t){return new Xt(t)}var Xt=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ii(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,a=this,c=a.dispatch,l=a.commit;this.dispatch=function(p,m){return c.call(o,p,m)},this.commit=function(p,m,_){return l.call(o,p,m,_)},this.strict=s;var h=this._modules.root.state;_l(this,h,[],this._modules.root),Vd(this,h),r.forEach(function(f){return f(n)})},Nd={state:{configurable:!0}};Xt.prototype.install=function(e,n){e.provide(n||t1,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&h1(e,this)};Nd.state.get=function(){return this._state.data};Nd.state.set=function(t){};Xt.prototype.commit=function(e,n,r){var s=this,i=Cu(e,n,r),o=i.type,a=i.payload,c={type:o,payload:a},l=this._mutations[o];l&&(this._withCommit(function(){l.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(h){return h(c,s.state)}))};Xt.prototype.dispatch=function(e,n){var r=this,s=Cu(e,n),i=s.type,o=s.payload,a={type:i,payload:o},c=this._actions[i];if(c){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(a,r.state)})}catch{}var l=c.length>1?Promise.all(c.map(function(h){return h(o)})):c[0](o);return new Promise(function(h,f){l.then(function(p){try{r._actionSubscribers.filter(function(m){return m.after}).forEach(function(m){return m.after(a,r.state)})}catch{}h(p)},function(p){try{r._actionSubscribers.filter(function(m){return m.error}).forEach(function(m){return m.error(a,r.state,p)})}catch{}f(p)})})}};Xt.prototype.subscribe=function(e,n){return Sw(e,this._subscribers,n)};Xt.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return Sw(r,this._actionSubscribers,n)};Xt.prototype.watch=function(e,n,r){var s=this;return zr(function(){return e(s.state,s.getters)},n,Object.assign({},r))};Xt.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Xt.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),_l(this,this.state,e,this._modules.get(e),r.preserveState),Vd(this,this.state)};Xt.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=Dd(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),Pw(this)};Xt.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Xt.prototype.hotUpdate=function(e){this._modules.update(e),Pw(this,!0)};Xt.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Xt.prototype,Nd);var kF=Od(function(t,e){var n={};return kd(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){var a=this.$store.state,c=this.$store.getters;if(t){var l=Md(this.$store,"mapState",t);if(!l)return;a=l.context.state,c=l.context.getters}return typeof i=="function"?i.call(this,a,c):a[i]},n[s].vuex=!0}),n}),OF=Od(function(t,e){var n={};return kd(e).forEach(function(r){var s=r.key,i=r.val;i=t+i,n[s]=function(){if(!(t&&!Md(this.$store,"mapGetters",t)))return this.$store.getters[i]},n[s].vuex=!0}),n}),MF=Od(function(t,e){var n={};return kd(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];var l=this.$store.dispatch;if(t){var h=Md(this.$store,"mapActions",t);if(!h)return;l=h.context.dispatch}return typeof i=="function"?i.apply(this,[l].concat(a)):l.apply(this.$store,[i].concat(a))}}),n});function kd(t){return y1(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function y1(t){return Array.isArray(t)||Rw(t)}function Od(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function Md(t,e,n){var r=t._modulesNamespaceMap[n];return r}/*!
  * vuexfire v3.2.5
  * (c) 2020 Eduardo San Martin Morote
  * @license MIT
  */var Mw="vuexfire/SET_VALUE",Lw="vuexfire/ARRAY_ADD",Fw="vuexfire/ARRAY_REMOVE";function Ld(t,e){return e.split(".").reduce(function(n,r){return n[r]},t)}function v1(t,e,n){var r=(""+e).split("."),s=r.pop(),i=r.reduce(function(o,a){return o[a]},t);return Array.isArray(i)?i.splice(Number(s),1,n):i[s]=n}function E1(t){return t&&typeof t=="object"}function w1(t){return t.toDate}function T1(t){return t&&t.onSnapshot}function I1(t,e){var n=!1;return function(){if(!n)return n=!0,t(e())}}function b1(t){return Object.defineProperty(t.data()||{},"id",{value:t.id})}function vf(t,e,n){var r=[{},{}],s=Object.keys(n).reduce(function(o,a){var c=n[a];return o[c.path]=c.data(),o},{});function i(o,a,c,l){a=a||{};var h=l[0],f=l[1];Object.getOwnPropertyNames(o).forEach(function(C){var k=Object.getOwnPropertyDescriptor(o,C);k&&!k.enumerable&&Object.defineProperty(h,C,k)});for(var p in o){var m=o[p];if(m==null||m instanceof Date||w1(m)||m.longitude&&m.latitude)h[p]=m;else if(T1(m))h[p]=typeof a=="object"&&p in a&&typeof a[p]!="string"?a[p]:m.path,f[c+p]=m;else if(Array.isArray(m)){h[p]=Array(m.length);for(var _=0;_<m.length;_++){var y=m[_];y&&y.path in s&&(h[p][_]=s[y.path])}i(m,a[p]||h[p],c+p+".",[h[p],f])}else E1(m)?(h[p]={},i(m,a[p],c+p+".",[h[p],f])):h[p]=m}}return i(t,e,"",r),r}var La={maxRefDepth:2,reset:!0,serialize:b1,wait:!1};function xu(t){for(var e in t)t[e].unsub()}function Bw(t,e,n,r,s,i,o,a){var c=vf(t.serialize(r),Ld(e,n),s),l=c[0],h=c[1];i.set(e,n,l),Ef(t,e,n,s,h,i,o,a)}function A1(t,e){var n=t.ref,r=t.target,s=t.path,i=t.depth,o=t.resolve,a=t.ops,c=Object.create(null),l=n.onSnapshot(function(h){h.exists?Bw(e,r,s,h,c,a,i,o):(a.set(r,s,null),o())});return function(){l(),xu(c)}}function Ef(t,e,n,r,s,i,o,a){var c=Object.keys(s),l=Object.keys(r).filter(function(_){return c.indexOf(_)<0});if(l.forEach(function(_){r[_].unsub(),delete r[_]}),!c.length||++o>t.maxRefDepth)return a(n);var h=0,f=c.length,p=Object.create(null);function m(_){_ in p&&++h>=f&&a(n)}c.forEach(function(_){var y=r[_],C=s[_],k=n+"."+_;if(p[k]=!0,y)if(y.path!==C.path)y.unsub();else return;r[_]={data:function(){return Ld(e,k)},unsub:A1({ref:C,target:e,path:k,depth:o,ops:i,resolve:m.bind(null,k)},t),path:C.path}})}function R1(t,e){var n=t.vm,r=t.key,s=t.collection,i=t.ops,o=t.resolve,a=t.reject;e===void 0&&(e=La);var c=Object.assign({},La,e),l=c.wait?[]:i.set(n,r,[]),h=o,f,p=[],m={added:function(y){var C=y.newIndex,k=y.doc;p.splice(C,0,Object.create(null));var D=p[C],E=vf(c.serialize(k),void 0,D),x=E[0],N=E[1];i.add(l,C,x),Ef(c,l,C,D,N,i,0,o.bind(null,k))},modified:function(y){var C=y.oldIndex,k=y.newIndex,D=y.doc,E=p[C],x=l[C],N=vf(c.serialize(D),x,E),U=N[0],I=N[1];p.splice(k,0,E),i.remove(l,C),i.add(l,k,U),Ef(c,l,k,E,I,i,0,o)},removed:function(y){var C=y.oldIndex;i.remove(l,C),xu(p.splice(C,1)[0])}},_=s.onSnapshot(function(y){var C=typeof y.docChanges=="function"?y.docChanges():y.docChanges;if(!f&&C.length){f=!0;for(var k=0,D=C.length,E=Object.create(null),x=0;x<D;x++)E[C[x].doc.id]=!0;o=function(N){var U=N.id;U in E&&++k>=D&&(c.wait&&i.set(n,r,l),h(n[r]),o=function(){})}}C.forEach(function(N){m[N.type](N)}),C.length||(c.wait&&i.set(n,r,l),o(l))},a);return function(y){if(_(),y!==!1){var C=typeof y=="function"?y():[];i.set(n,r,C)}p.forEach(xu)}}function S1(t,e){var n=t.vm,r=t.key,s=t.document,i=t.resolve,o=t.reject,a=t.ops;e===void 0&&(e=La);var c=Object.assign({},La,e),l=Object.create(null);i=I1(i,function(){return Ld(n,r)});var h=s.onSnapshot(function(f){f.exists?Bw(c,n,r,f,l,a,0,i):(a.set(n,r,null),i(null))},o);return function(f){if(h(),f!==!1){var p=typeof f=="function"?f():null;a.set(n,r,p)}xu(l)}}var ea,P1=(ea={},ea[Mw]=function(t,e){var n=e.path,r=e.target,s=e.data;v1(r,n,s)},ea[Lw]=function(t,e){var n=e.newIndex,r=e.data,s=e.target;s.splice(n,0,r)},ea[Fw]=function(t,e){var n=e.oldIndex,r=e.target;return r.splice(n,1)[0]},ea);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vu=function(){return Vu=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vu.apply(this,arguments)},Rh={root:!0},wf=new WeakMap;function C1(t,e,n,r,s,i){var o=wf.get(e);return o||(o=Object.create(null),wf.set(e,o)),n in o&&Uw(e,n,i.wait?typeof i.reset=="function"?i.reset:!1:i.reset),new Promise(function(a,c){o[n]="where"in r?R1({vm:t,key:n,collection:r,ops:s,resolve:a,reject:c},i):S1({vm:t,key:n,document:r,ops:s,resolve:a,reject:c},i)})}function Uw(t,e,n){var r=wf.get(t);!r||!r[e]||(r[e](n),delete r[e])}function an(t){return function(n,r){var s=n.state,i=n.commit,o={set:function(a,c,l){return i(Mw,{path:c,target:a,data:l},Rh),l},add:function(a,c,l){return i(Lw,{target:a,newIndex:c,data:l},Rh)},remove:function(a,c){var l=a[c];return i(Fw,{target:a,oldIndex:c},Rh),[l]}};return t.call(this,Vu(Vu({},n),{bindFirestoreRef:function(a,c,l){return C1(s,i,a,c,o,Object.assign({},La,l))},unbindFirestoreRef:function(a,c){return Uw(i,a,c)}}),r)}}const x1=()=>{};var m_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},V1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},$w={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(p=64)),r.push(n[h],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):V1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||f==null)throw new D1;const p=i<<2|a>>4;if(r.push(p),l!==64){const m=a<<4&240|l>>2;if(r.push(m),f!==64){const _=l<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class D1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N1=function(t){const e=jw(t);return $w.encodeByteArray(e,!0)},Du=function(t){return N1(t).replace(/\./g,"")},qw=function(t){try{return $w.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Nu(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!k1(n)||(t[n]=Nu(t[n],e[n]));return t}function k1(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=()=>Fd().__FIREBASE_DEFAULTS__,M1=()=>{if(typeof process>"u"||typeof m_>"u")return;const t=m_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},L1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qw(t[1]);return e&&JSON.parse(e)},Hw=()=>{try{return x1()||O1()||M1()||L1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bd=()=>Hw()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function B1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Du(JSON.stringify(n)),Du(JSON.stringify(o)),""].join(".")}const wa={};function j1(){const t={prod:[],emulator:[]};for(const e of Object.keys(wa))wa[e]?t.emulator.push(e):t.prod.push(e);return t}function $1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let g_=!1;function q1(t,e){if(typeof window>"u"||typeof document>"u"||!Ud(window.location.host)||wa[t]===e||wa[t]||g_)return;wa[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=j1().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function l(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{g_=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=$1(r),m=n("text"),_=document.getElementById(m)||document.createElement("span"),y=n("learnmore"),C=document.getElementById(y)||document.createElement("a"),k=n("preprendIcon"),D=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const E=p.element;a(E),h(C,y);const x=l();c(D,k),E.append(D,_,C,x),document.body.appendChild(E)}i?(_.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gw(){const t=Hw()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function H1(){return typeof window<"u"||zw()}function zw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Kw(){return!Gw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ww(){return!Gw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Qw(){try{return typeof indexedDB=="object"}catch{return!1}}function G1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="FirebaseError";class oi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=z1,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?K1(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new oi(s,a,r)}}function K1(t,e){return t.replace(W1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const W1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(y_(i)&&y_(o)){if(!Xi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function y_(t){return t!==null&&typeof t=="object"}function Q1(t,e){const n=new J1(t,e);return n.subscribe.bind(n)}class J1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Y1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Sh),s.error===void 0&&(s.error=Sh),s.complete===void 0&&(s.complete=Sh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Gs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new F1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eV(e))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bs){return this.instances.has(e)}getOptions(e=bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Z1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bs){return this.component?this.component.multipleInstances?e:bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z1(t){return t===bs?void 0:t}function eV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new X1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=[];var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const Yw={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},tV=be.INFO,nV={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},rV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=nV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $d{constructor(e){this.name=e,this._logLevel=tV,this._logHandler=rV,this._userLogHandler=null,jd.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}function sV(t){jd.forEach(e=>{e.setLogLevel(t)})}function iV(t,e){for(const n of jd){let r=null;e&&e.level&&(r=Yw[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(r??s.logLevel)&&t({level:be[i].toLowerCase(),message:a,args:o,type:s.name})}}}const oV=(t,e)=>e.some(n=>t instanceof n);let v_,E_;function aV(){return v_||(v_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cV(){return E_||(E_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xw=new WeakMap,Tf=new WeakMap,Zw=new WeakMap,Ph=new WeakMap,qd=new WeakMap;function uV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Kr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Xw.set(n,t)}).catch(()=>{}),qd.set(e,t),e}function lV(t){if(Tf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Tf.set(t,e)}let If={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hV(t){If=t(If)}function fV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ch(this),e,...n);return Zw.set(r,e.sort?e.sort():[e]),Kr(r)}:cV().includes(t)?function(...e){return t.apply(Ch(this),e),Kr(Xw.get(this))}:function(...e){return Kr(t.apply(Ch(this),e))}}function dV(t){return typeof t=="function"?fV(t):(t instanceof IDBTransaction&&lV(t),oV(t,aV())?new Proxy(t,If):t)}function Kr(t){if(t instanceof IDBRequest)return uV(t);if(Ph.has(t))return Ph.get(t);const e=dV(t);return e!==t&&(Ph.set(t,e),qd.set(e,t)),e}const Ch=t=>qd.get(t);function pV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Kr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Kr(o.result),c.oldVersion,c.newVersion,Kr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const mV=["get","getKey","getAll","getAllKeys","count"],gV=["put","add","delete","clear"],xh=new Map;function w_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xh.get(e))return xh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=gV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||mV.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return xh.set(e,i),i}hV(t=>({...t,get:(e,n,r)=>w_(e,n)||t.get(e,n,r),has:(e,n)=>!!w_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yV(t){return t.getComponent()?.type==="VERSION"}const Ou="@firebase/app",bf="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new $d("@firebase/app"),vV="@firebase/app-compat",EV="@firebase/analytics-compat",wV="@firebase/analytics",TV="@firebase/app-check-compat",IV="@firebase/app-check",bV="@firebase/auth",AV="@firebase/auth-compat",RV="@firebase/database",SV="@firebase/data-connect",PV="@firebase/database-compat",CV="@firebase/functions",xV="@firebase/functions-compat",VV="@firebase/installations",DV="@firebase/installations-compat",NV="@firebase/messaging",kV="@firebase/messaging-compat",OV="@firebase/performance",MV="@firebase/performance-compat",LV="@firebase/remote-config",FV="@firebase/remote-config-compat",BV="@firebase/storage",UV="@firebase/storage-compat",jV="@firebase/firestore",$V="@firebase/ai",qV="@firebase/firestore-compat",HV="firebase",GV="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]",zV={[Ou]:"fire-core",[vV]:"fire-core-compat",[wV]:"fire-analytics",[EV]:"fire-analytics-compat",[IV]:"fire-app-check",[TV]:"fire-app-check-compat",[bV]:"fire-auth",[AV]:"fire-auth-compat",[RV]:"fire-rtdb",[SV]:"fire-data-connect",[PV]:"fire-rtdb-compat",[CV]:"fire-fn",[xV]:"fire-fn-compat",[VV]:"fire-iid",[DV]:"fire-iid-compat",[NV]:"fire-fcm",[kV]:"fire-fcm-compat",[OV]:"fire-perf",[MV]:"fire-perf-compat",[LV]:"fire-rc",[FV]:"fire-rc-compat",[BV]:"fire-gcs",[UV]:"fire-gcs-compat",[jV]:"fire-fst",[qV]:"fire-fst-compat",[$V]:"fire-vertex","fire-js":"fire-js",[HV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new Map,Zi=new Map,eo=new Map;function Fa(t,e){try{t.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function eT(t,e){t.container.addOrOverwriteComponent(e)}function to(t){const e=t.name;if(eo.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;eo.set(e,t);for(const n of Xr.values())Fa(n,t);for(const n of Zi.values())Fa(n,t);return!0}function tT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function KV(t,e,n=Yr){tT(t,e).clearInstance(n)}function Hd(t){return t.options!==void 0}function nT(t){return Hd(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function rT(t){return t==null?!1:t.settings!==void 0}function WV(){eo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cn=new yl("app","Firebase",QV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sT=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t,e){const n=qw(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(n).exp*1e3,i=new Date().getTime();s-i<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class JV extends sT{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const a=e;super(a.options,o,s)}this._serverConfig={automaticDataCollectionEnabled:i,...n},this._serverConfig.authIdToken&&T_(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&T_(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,lr(Ou,bf,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Kd(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw cn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=GV;function zd(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Yr,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw cn.create("bad-app-name",{appName:String(s)});if(n||(n=Bd()),!n)throw cn.create("no-options");const i=Xr.get(s);if(i){if(Xi(n,i.options)&&Xi(r,i.config))return i;throw cn.create("duplicate-app",{appName:s})}const o=new Jw(s);for(const c of eo.values())o.addComponent(c);const a=new sT(n,r,o);return Xr.set(s,a),a}function YV(t,e={}){if(H1()&&!zw())throw cn.create("invalid-server-app-environment");let n,r=e||{};if(t&&(Hd(t)?n=t.options:nT(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=Bd()),!n)throw cn.create("no-options");const s={...r,...n};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const i=h=>[...h].reduce((f,p)=>Math.imul(31,f)+p.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw cn.create("finalization-registry-not-supported",{});const o=""+i(JSON.stringify(s)),a=Zi.get(o);if(a)return a.incRefCount(r.releaseOnDeref),a;const c=new Jw(o);for(const h of eo.values())c.addComponent(h);const l=new JV(n,r,o,c);return Zi.set(o,l),l}function XV(t=Yr){const e=Xr.get(t);if(!e&&t===Yr&&Bd())return zd();if(!e)throw cn.create("no-app",{appName:t});return e}function ZV(){return Array.from(Xr.values())}async function Kd(t){let e=!1;const n=t.name;Xr.has(n)?(e=!0,Xr.delete(n)):Zi.has(n)&&t.decRefCount()<=0&&(Zi.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function lr(t,e,n){let r=zV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(o.join(" "));return}to(new Gs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function iT(t,e){if(t!==null&&typeof t!="function")throw cn.create("invalid-log-argument");iV(t,e)}function oT(t){sV(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="firebase-heartbeat-database",tD=1,Ba="firebase-heartbeat-store";let Vh=null;function aT(){return Vh||(Vh=pV(eD,tD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw cn.create("idb-open",{originalErrorMessage:t.message})})),Vh}async function nD(t){try{const n=(await aT()).transaction(Ba),r=await n.objectStore(Ba).get(cT(t));return await n.done,r}catch(e){if(e instanceof oi)pr.warn(e.message);else{const n=cn.create("idb-get",{originalErrorMessage:e?.message});pr.warn(n.message)}}}async function I_(t,e){try{const r=(await aT()).transaction(Ba,"readwrite");await r.objectStore(Ba).put(e,cT(t)),await r.done}catch(n){if(n instanceof oi)pr.warn(n.message);else{const r=cn.create("idb-set",{originalErrorMessage:n?.message});pr.warn(r.message)}}}function cT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=1024,sD=30;class iD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=b_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>sD){const s=cD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){pr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=b_(),{heartbeatsToSend:n,unsentEntries:r}=oD(this._heartbeatsCache.heartbeats),s=Du(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return pr.warn(e),""}}}function b_(){return new Date().toISOString().substring(0,10)}function oD(t,e=rD){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),A_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),A_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class aD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qw()?G1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nD(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return I_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return I_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function A_(t){return Du(JSON.stringify({version:2,heartbeats:t})).length}function cD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){to(new Gs("platform-logger",e=>new _V(e),"PRIVATE")),to(new Gs("heartbeat",e=>new iD(e),"PRIVATE")),lr(Ou,bf,t),lr(Ou,bf,"esm2020"),lr("fire-js","")}uD("");const lD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:oi,SDK_VERSION:Gd,_DEFAULT_ENTRY_NAME:Yr,_addComponent:Fa,_addOrOverwriteComponent:eT,_apps:Xr,_clearComponents:WV,_components:eo,_getProvider:tT,_isFirebaseApp:Hd,_isFirebaseServerApp:rT,_isFirebaseServerAppSettings:nT,_registerComponent:to,_removeServiceInstance:KV,_serverApps:Zi,deleteApp:Kd,getApp:XV,getApps:ZV,initializeApp:zd,initializeServerApp:YV,onLog:iT,registerVersion:lr,setLogLevel:oT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this._delegate=e,this.firebase=n,Fa(e,new Gs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Kd(this._delegate)))}_getService(e,n=Yr){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=Yr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Fa(this._delegate,e)}_addOrOverwriteComponent(e){eT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},R_=new yl("app-compat","Firebase",fD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:lr,setLogLevel:oT,onLog:iT,apps:null,SDK_VERSION:Gd,INTERNAL:{registerComponent:a,removeApp:r,useAsService:c,modularAPIs:lD}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(l){delete e[l]}function s(l){if(l=l||Yr,!__(e,l))throw R_.create("no-app",{appName:l});return e[l]}s.App=t;function i(l,h={}){const f=zd(l,h);if(__(e,f.name))return e[f.name];const p=new t(f,n);return e[f.name]=p,p}function o(){return Object.keys(e).map(l=>e[l])}function a(l){const h=l.name,f=h.replace("-compat","");if(to(l)&&l.type==="PUBLIC"){const p=(m=s())=>{if(typeof m[f]!="function")throw R_.create("invalid-app-argument",{appName:h});return m[f]()};l.serviceProps!==void 0&&Nu(p,l.serviceProps),n[f]=p,t.prototype[f]=function(...m){return this._getService.bind(this,h).apply(this,l.multipleInstances?m:[])}}return l.type==="PUBLIC"?n[f]:null}function c(l,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(){const t=dD(hD);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:uT,extendNamespace:e,createSubscribe:Q1,ErrorFactory:yl,deepExtend:Nu};function e(n){Nu(t,n)}return t}const pD=uT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new $d("@firebase/app-compat"),mD="@firebase/app-compat",gD="0.5.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t){lr(mD,gD,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Fd();if(t.firebase!==void 0){S_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&S_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Ua=pD;_D();var yD="firebase",vD="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ua.registerVersion(yD,vD,"app-compat");var P_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,lT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,T){function w(){}w.prototype=T.prototype,I.F=T.prototype,I.prototype=new w,I.prototype.constructor=I,I.D=function(R,P,S){for(var b=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)b[fe-2]=arguments[fe];return T.prototype[P].apply(R,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,T,w){w||(w=0);const R=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)R[P]=T.charCodeAt(w++)|T.charCodeAt(w++)<<8|T.charCodeAt(w++)<<16|T.charCodeAt(w++)<<24;else for(P=0;P<16;++P)R[P]=T[w++]|T[w++]<<8|T[w++]<<16|T[w++]<<24;T=I.g[0],w=I.g[1],P=I.g[2];let S=I.g[3],b;b=T+(S^w&(P^S))+R[0]+3614090360&4294967295,T=w+(b<<7&4294967295|b>>>25),b=S+(P^T&(w^P))+R[1]+3905402710&4294967295,S=T+(b<<12&4294967295|b>>>20),b=P+(w^S&(T^w))+R[2]+606105819&4294967295,P=S+(b<<17&4294967295|b>>>15),b=w+(T^P&(S^T))+R[3]+3250441966&4294967295,w=P+(b<<22&4294967295|b>>>10),b=T+(S^w&(P^S))+R[4]+4118548399&4294967295,T=w+(b<<7&4294967295|b>>>25),b=S+(P^T&(w^P))+R[5]+1200080426&4294967295,S=T+(b<<12&4294967295|b>>>20),b=P+(w^S&(T^w))+R[6]+2821735955&4294967295,P=S+(b<<17&4294967295|b>>>15),b=w+(T^P&(S^T))+R[7]+4249261313&4294967295,w=P+(b<<22&4294967295|b>>>10),b=T+(S^w&(P^S))+R[8]+1770035416&4294967295,T=w+(b<<7&4294967295|b>>>25),b=S+(P^T&(w^P))+R[9]+2336552879&4294967295,S=T+(b<<12&4294967295|b>>>20),b=P+(w^S&(T^w))+R[10]+4294925233&4294967295,P=S+(b<<17&4294967295|b>>>15),b=w+(T^P&(S^T))+R[11]+2304563134&4294967295,w=P+(b<<22&4294967295|b>>>10),b=T+(S^w&(P^S))+R[12]+1804603682&4294967295,T=w+(b<<7&4294967295|b>>>25),b=S+(P^T&(w^P))+R[13]+4254626195&4294967295,S=T+(b<<12&4294967295|b>>>20),b=P+(w^S&(T^w))+R[14]+2792965006&4294967295,P=S+(b<<17&4294967295|b>>>15),b=w+(T^P&(S^T))+R[15]+1236535329&4294967295,w=P+(b<<22&4294967295|b>>>10),b=T+(P^S&(w^P))+R[1]+4129170786&4294967295,T=w+(b<<5&4294967295|b>>>27),b=S+(w^P&(T^w))+R[6]+3225465664&4294967295,S=T+(b<<9&4294967295|b>>>23),b=P+(T^w&(S^T))+R[11]+643717713&4294967295,P=S+(b<<14&4294967295|b>>>18),b=w+(S^T&(P^S))+R[0]+3921069994&4294967295,w=P+(b<<20&4294967295|b>>>12),b=T+(P^S&(w^P))+R[5]+3593408605&4294967295,T=w+(b<<5&4294967295|b>>>27),b=S+(w^P&(T^w))+R[10]+38016083&4294967295,S=T+(b<<9&4294967295|b>>>23),b=P+(T^w&(S^T))+R[15]+3634488961&4294967295,P=S+(b<<14&4294967295|b>>>18),b=w+(S^T&(P^S))+R[4]+3889429448&4294967295,w=P+(b<<20&4294967295|b>>>12),b=T+(P^S&(w^P))+R[9]+568446438&4294967295,T=w+(b<<5&4294967295|b>>>27),b=S+(w^P&(T^w))+R[14]+3275163606&4294967295,S=T+(b<<9&4294967295|b>>>23),b=P+(T^w&(S^T))+R[3]+4107603335&4294967295,P=S+(b<<14&4294967295|b>>>18),b=w+(S^T&(P^S))+R[8]+1163531501&4294967295,w=P+(b<<20&4294967295|b>>>12),b=T+(P^S&(w^P))+R[13]+2850285829&4294967295,T=w+(b<<5&4294967295|b>>>27),b=S+(w^P&(T^w))+R[2]+4243563512&4294967295,S=T+(b<<9&4294967295|b>>>23),b=P+(T^w&(S^T))+R[7]+1735328473&4294967295,P=S+(b<<14&4294967295|b>>>18),b=w+(S^T&(P^S))+R[12]+2368359562&4294967295,w=P+(b<<20&4294967295|b>>>12),b=T+(w^P^S)+R[5]+4294588738&4294967295,T=w+(b<<4&4294967295|b>>>28),b=S+(T^w^P)+R[8]+2272392833&4294967295,S=T+(b<<11&4294967295|b>>>21),b=P+(S^T^w)+R[11]+1839030562&4294967295,P=S+(b<<16&4294967295|b>>>16),b=w+(P^S^T)+R[14]+4259657740&4294967295,w=P+(b<<23&4294967295|b>>>9),b=T+(w^P^S)+R[1]+2763975236&4294967295,T=w+(b<<4&4294967295|b>>>28),b=S+(T^w^P)+R[4]+1272893353&4294967295,S=T+(b<<11&4294967295|b>>>21),b=P+(S^T^w)+R[7]+4139469664&4294967295,P=S+(b<<16&4294967295|b>>>16),b=w+(P^S^T)+R[10]+3200236656&4294967295,w=P+(b<<23&4294967295|b>>>9),b=T+(w^P^S)+R[13]+681279174&4294967295,T=w+(b<<4&4294967295|b>>>28),b=S+(T^w^P)+R[0]+3936430074&4294967295,S=T+(b<<11&4294967295|b>>>21),b=P+(S^T^w)+R[3]+3572445317&4294967295,P=S+(b<<16&4294967295|b>>>16),b=w+(P^S^T)+R[6]+76029189&4294967295,w=P+(b<<23&4294967295|b>>>9),b=T+(w^P^S)+R[9]+3654602809&4294967295,T=w+(b<<4&4294967295|b>>>28),b=S+(T^w^P)+R[12]+3873151461&4294967295,S=T+(b<<11&4294967295|b>>>21),b=P+(S^T^w)+R[15]+530742520&4294967295,P=S+(b<<16&4294967295|b>>>16),b=w+(P^S^T)+R[2]+3299628645&4294967295,w=P+(b<<23&4294967295|b>>>9),b=T+(P^(w|~S))+R[0]+4096336452&4294967295,T=w+(b<<6&4294967295|b>>>26),b=S+(w^(T|~P))+R[7]+1126891415&4294967295,S=T+(b<<10&4294967295|b>>>22),b=P+(T^(S|~w))+R[14]+2878612391&4294967295,P=S+(b<<15&4294967295|b>>>17),b=w+(S^(P|~T))+R[5]+4237533241&4294967295,w=P+(b<<21&4294967295|b>>>11),b=T+(P^(w|~S))+R[12]+1700485571&4294967295,T=w+(b<<6&4294967295|b>>>26),b=S+(w^(T|~P))+R[3]+2399980690&4294967295,S=T+(b<<10&4294967295|b>>>22),b=P+(T^(S|~w))+R[10]+4293915773&4294967295,P=S+(b<<15&4294967295|b>>>17),b=w+(S^(P|~T))+R[1]+2240044497&4294967295,w=P+(b<<21&4294967295|b>>>11),b=T+(P^(w|~S))+R[8]+1873313359&4294967295,T=w+(b<<6&4294967295|b>>>26),b=S+(w^(T|~P))+R[15]+4264355552&4294967295,S=T+(b<<10&4294967295|b>>>22),b=P+(T^(S|~w))+R[6]+2734768916&4294967295,P=S+(b<<15&4294967295|b>>>17),b=w+(S^(P|~T))+R[13]+1309151649&4294967295,w=P+(b<<21&4294967295|b>>>11),b=T+(P^(w|~S))+R[4]+4149444226&4294967295,T=w+(b<<6&4294967295|b>>>26),b=S+(w^(T|~P))+R[11]+3174756917&4294967295,S=T+(b<<10&4294967295|b>>>22),b=P+(T^(S|~w))+R[2]+718787259&4294967295,P=S+(b<<15&4294967295|b>>>17),b=w+(S^(P|~T))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+T&4294967295,I.g[1]=I.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.v=function(I,T){T===void 0&&(T=I.length);const w=T-this.blockSize,R=this.C;let P=this.h,S=0;for(;S<T;){if(P==0)for(;S<=w;)s(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<T;)if(R[P++]=I.charCodeAt(S++),P==this.blockSize){s(this,R),P=0;break}}else for(;S<T;)if(R[P++]=I[S++],P==this.blockSize){s(this,R),P=0;break}}this.h=P,this.o+=T},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var T=1;T<I.length-8;++T)I[T]=0;T=this.o*8;for(var w=I.length-8;w<I.length;++w)I[w]=T&255,T/=256;for(this.v(I),I=Array(16),T=0,w=0;w<4;++w)for(let R=0;R<32;R+=8)I[T++]=this.g[w]>>>R&255;return I};function i(I,T){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=T(I)}function o(I,T){this.h=T;const w=[];let R=!0;for(let P=I.length-1;P>=0;P--){const S=I[P]|0;R&&S==T||(w[P]=S,R=!1)}this.g=w}var a={};function c(I){return-128<=I&&I<128?i(I,function(T){return new o([T|0],T<0?-1:0)}):new o([I|0],I<0?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(I<0)return C(l(-I));const T=[];let w=1;for(let R=0;I>=w;R++)T[R]=I/w|0,w*=4294967296;return new o(T,0)}function h(I,T){if(I.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(I.charAt(0)=="-")return C(h(I.substring(1),T));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=l(Math.pow(T,8));let R=f;for(let S=0;S<I.length;S+=8){var P=Math.min(8,I.length-S);const b=parseInt(I.substring(S,S+P),T);P<8?(P=l(Math.pow(T,P)),R=R.j(P).add(l(b))):(R=R.j(w),R=R.add(l(b)))}return R}var f=c(0),p=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-C(this).m();let I=0,T=1;for(let w=0;w<this.g.length;w++){const R=this.i(w);I+=(R>=0?R:4294967296+R)*T,T*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(y(this))return"-"+C(this).toString(I);const T=l(Math.pow(I,6));var w=this;let R="";for(;;){const P=x(w,T).g;w=k(w,P.j(T));let S=((w.g.length>0?w.g[0]:w.h)>>>0).toString(I);if(w=P,_(w))return S+R;for(;S.length<6;)S="0"+S;R=S+R}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(let T=0;T<I.g.length;T++)if(I.g[T]!=0)return!1;return!0}function y(I){return I.h==-1}t.l=function(I){return I=k(this,I),y(I)?-1:_(I)?0:1};function C(I){const T=I.g.length,w=[];for(let R=0;R<T;R++)w[R]=~I.g[R];return new o(w,~I.h).add(p)}t.abs=function(){return y(this)?C(this):this},t.add=function(I){const T=Math.max(this.g.length,I.g.length),w=[];let R=0;for(let P=0;P<=T;P++){let S=R+(this.i(P)&65535)+(I.i(P)&65535),b=(S>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);R=b>>>16,S&=65535,b&=65535,w[P]=b<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function k(I,T){return I.add(C(T))}t.j=function(I){if(_(this)||_(I))return f;if(y(this))return y(I)?C(this).j(C(I)):C(C(this).j(I));if(y(I))return C(this.j(C(I)));if(this.l(m)<0&&I.l(m)<0)return l(this.m()*I.m());const T=this.g.length+I.g.length,w=[];for(var R=0;R<2*T;R++)w[R]=0;for(R=0;R<this.g.length;R++)for(let P=0;P<I.g.length;P++){const S=this.i(R)>>>16,b=this.i(R)&65535,fe=I.i(P)>>>16,Te=I.i(P)&65535;w[2*R+2*P]+=b*Te,D(w,2*R+2*P),w[2*R+2*P+1]+=S*Te,D(w,2*R+2*P+1),w[2*R+2*P+1]+=b*fe,D(w,2*R+2*P+1),w[2*R+2*P+2]+=S*fe,D(w,2*R+2*P+2)}for(I=0;I<T;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=T;I<2*T;I++)w[I]=0;return new o(w,0)};function D(I,T){for(;(I[T]&65535)!=I[T];)I[T+1]+=I[T]>>>16,I[T]&=65535,T++}function E(I,T){this.g=I,this.h=T}function x(I,T){if(_(T))throw Error("division by zero");if(_(I))return new E(f,f);if(y(I))return T=x(C(I),T),new E(C(T.g),C(T.h));if(y(T))return T=x(I,C(T)),new E(C(T.g),T.h);if(I.g.length>30){if(y(I)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var w=p,R=T;R.l(I)<=0;)w=N(w),R=N(R);var P=U(w,1),S=U(R,1);for(R=U(R,2),w=U(w,2);!_(R);){var b=S.add(R);b.l(I)<=0&&(P=P.add(w),S=b),R=U(R,1),w=U(w,1)}return T=k(I,P.j(T)),new E(P,T)}for(P=f;I.l(T)>=0;){for(w=Math.max(1,Math.floor(I.m()/T.m())),R=Math.ceil(Math.log(w)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),S=l(w),b=S.j(T);y(b)||b.l(I)>0;)w-=R,S=l(w),b=S.j(T);_(S)&&(S=p),P=P.add(S),I=k(I,b)}return new E(P,I)}t.B=function(I){return x(this,I).h},t.and=function(I){const T=Math.max(this.g.length,I.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)&I.i(R);return new o(w,this.h&I.h)},t.or=function(I){const T=Math.max(this.g.length,I.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)|I.i(R);return new o(w,this.h|I.h)},t.xor=function(I){const T=Math.max(this.g.length,I.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)^I.i(R);return new o(w,this.h^I.h)};function N(I){const T=I.g.length+1,w=[];for(let R=0;R<T;R++)w[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(w,I.h)}function U(I,T){const w=T>>5;T%=32;const R=I.g.length-w,P=[];for(let S=0;S<R;S++)P[S]=T>0?I.i(S+w)>>>T|I.i(S+w+1)<<32-T:I.i(S+w);return new o(P,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,lT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Wr=o}).apply(typeof P_<"u"?P_:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hT,la,fT,tu,Af,dT,pT,mT;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var d=0;d<u.length;++d){var g=u[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,d){if(d)e:{var g=r;u=u.split(".");for(var v=0;v<u.length-1;v++){var M=u[v];if(!(M in g))break e;g=g[M]}u=u[u.length-1],v=g[u],d=d(v),d!=v&&d!=null&&e(g,u,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(d){var g=[],v;for(v in d)Object.prototype.hasOwnProperty.call(d,v)&&g.push([v,d[v]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function c(u,d,g){return u.call.apply(u.bind,arguments)}function l(u,d,g){return l=c,l.apply(null,arguments)}function h(u,d){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function f(u,d){function g(){}g.prototype=d.prototype,u.Z=d.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(v,M,B){for(var X=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)X[ye-2]=arguments[ye];return d.prototype[M].apply(v,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const d=u.length;if(d>0){const g=Array(d);for(let v=0;v<d;v++)g[v]=u[v];return g}return[]}function _(u,d){for(let v=1;v<arguments.length;v++){const M=arguments[v];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=u.length||0;const B=M.length||0;u.length=g+B;for(let X=0;X<B;X++)u[g+X]=M[X]}else u.push(M)}}class y{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function C(u){o.setTimeout(()=>{throw u},0)}function k(){var u=I;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class D{constructor(){this.h=this.g=null}add(d,g){const v=E.get();v.set(d,g),this.h?this.h.next=v:this.g=v,this.h=v}}var E=new y(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let N,U=!1,I=new D,T=()=>{const u=Promise.resolve(void 0);N=()=>{u.then(w)}};function w(){for(var u;u=k();){try{u.h.call(u.g)}catch(g){C(g)}var d=E;d.j(u),d.h<100&&(d.h++,u.next=d.g,d.g=u)}U=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,d),o.removeEventListener("test",g,d)}catch{}return u})();function b(u){return/^[\s\xa0]*$/.test(u)}function fe(u,d){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,d)}f(fe,P),fe.prototype.init=function(u,d){const g=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget,d||(g=="mouseover"?d=u.fromElement:g=="mouseout"&&(d=u.toElement)),this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),ie=0;function pe(u,d,g,v,M){this.listener=u,this.proxy=null,this.src=d,this.type=g,this.capture=!!v,this.ha=M,this.key=++ie,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Pe(u,d,g){for(const v in u)d.call(g,u[v],v,u)}function Nn(u,d){for(const g in u)d.call(void 0,u[g],g,u)}function Zt(u){const d={};for(const g in u)d[g]=u[g];return d}const Et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yn(u,d){let g,v;for(let M=1;M<arguments.length;M++){v=arguments[M];for(g in v)u[g]=v[g];for(let B=0;B<Et.length;B++)g=Et[B],Object.prototype.hasOwnProperty.call(v,g)&&(u[g]=v[g])}}function yn(u){this.src=u,this.g={},this.h=0}yn.prototype.add=function(u,d,g,v,M){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const X=Rt(u,d,v,M);return X>-1?(d=u[X],g||(d.fa=!1)):(d=new pe(d,this.src,B,!!v,M),d.fa=g,u.push(d)),d};function vn(u,d){const g=d.type;if(g in u.g){var v=u.g[g],M=Array.prototype.indexOf.call(v,d,void 0),B;(B=M>=0)&&Array.prototype.splice.call(v,M,1),B&&(re(d),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Rt(u,d,g,v){for(let M=0;M<u.length;++M){const B=u[M];if(!B.da&&B.listener==d&&B.capture==!!g&&B.ha==v)return M}return-1}var $="closure_lm_"+(Math.random()*1e6|0),se={};function ee(u,d,g,v,M){if(Array.isArray(d)){for(let B=0;B<d.length;B++)ee(u,d[B],g,v,M);return null}return g=z(g),u&&u[Te]?u.J(d,g,a(v)?!!v.capture:!1,M):ue(u,d,g,!1,v,M)}function ue(u,d,g,v,M,B){if(!d)throw Error("Invalid event type");const X=a(M)?!!M.capture:!!M;let ye=H(u);if(ye||(u[$]=ye=new yn(u)),g=ye.add(d,g,v,X,B),g.proxy)return g;if(v=ve(),g.proxy=v,v.src=u,v.listener=g,u.addEventListener)S||(M=X),M===void 0&&(M=!1),u.addEventListener(d.toString(),v,M);else if(u.attachEvent)u.attachEvent(V(d.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ve(){function u(g){return d.call(u.src,u.listener,g)}const d=L;return u}function Le(u,d,g,v,M){if(Array.isArray(d))for(var B=0;B<d.length;B++)Le(u,d[B],g,v,M);else v=a(v)?!!v.capture:!!v,g=z(g),u&&u[Te]?(u=u.i,B=String(d).toString(),B in u.g&&(d=u.g[B],g=Rt(d,g,v,M),g>-1&&(re(d[g]),Array.prototype.splice.call(d,g,1),d.length==0&&(delete u.g[B],u.h--)))):u&&(u=H(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Rt(d,g,v,M)),(g=u>-1?d[u]:null)&&A(g))}function A(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Te])vn(d.i,u);else{var g=u.type,v=u.proxy;d.removeEventListener?d.removeEventListener(g,v,u.capture):d.detachEvent?d.detachEvent(V(g),v):d.addListener&&d.removeListener&&d.removeListener(v),(g=H(d))?(vn(g,u),g.h==0&&(g.src=null,d[$]=null)):re(u)}}}function V(u){return u in se?se[u]:se[u]="on"+u}function L(u,d){if(u.da)u=!0;else{d=new fe(d,this);const g=u.listener,v=u.ha||u.src;u.fa&&A(u),u=g.call(v,d)}return u}function H(u){return u=u[$],u instanceof yn?u:null}var j="__closure_events_fn_"+(Math.random()*1e9>>>0);function z(u){return typeof u=="function"?u:(u[j]||(u[j]=function(d){return u.handleEvent(d)}),u[j])}function Q(){R.call(this),this.i=new yn(this),this.M=this,this.G=null}f(Q,R),Q.prototype[Te]=!0,Q.prototype.removeEventListener=function(u,d,g,v){Le(this,u,d,g,v)};function W(u,d){var g,v=u.G;if(v)for(g=[];v;v=v.G)g.push(v);if(u=u.M,v=d.type||d,typeof d=="string")d=new P(d,u);else if(d instanceof P)d.target=d.target||u;else{var M=d;d=new P(v,u),Yn(d,M)}M=!0;let B,X;if(g)for(X=g.length-1;X>=0;X--)B=d.g=g[X],M=J(B,v,!0,d)&&M;if(B=d.g=u,M=J(B,v,!0,d)&&M,M=J(B,v,!1,d)&&M,g)for(X=0;X<g.length;X++)B=d.g=g[X],M=J(B,v,!1,d)&&M}Q.prototype.N=function(){if(Q.Z.N.call(this),this.i){var u=this.i;for(const d in u.g){const g=u.g[d];for(let v=0;v<g.length;v++)re(g[v]);delete u.g[d],u.h--}}this.G=null},Q.prototype.J=function(u,d,g,v){return this.i.add(String(u),d,!1,g,v)},Q.prototype.K=function(u,d,g,v){return this.i.add(String(u),d,!0,g,v)};function J(u,d,g,v){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();let M=!0;for(let B=0;B<d.length;++B){const X=d[B];if(X&&!X.da&&X.capture==g){const ye=X.listener,ht=X.ha||X.src;X.fa&&vn(u.i,X),M=ye.call(ht,v)!==!1&&M}}return M&&!v.defaultPrevented}function K(u,d){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=l(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(u,d||0)}function he(u){u.g=K(()=>{u.g=null,u.i&&(u.i=!1,he(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class te extends R{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(u){R.call(this),this.h=u,this.g={}}f(ae,R);var me=[];function Ee(u){Pe(u.g,function(d,g){this.g.hasOwnProperty(g)&&A(d)},u),u.g={}}ae.prototype.N=function(){ae.Z.N.call(this),Ee(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ve=o.JSON.stringify,Ce=o.JSON.parse,St=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ut(){}function Gt(){}var lt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xn(){P.call(this,"d")}f(Xn,P);function hi(){P.call(this,"c")}f(hi,P);var Ze={},en=null;function fs(){return en=en||new Q}Ze.Ia="serverreachability";function ko(u){P.call(this,Ze.Ia,u)}f(ko,P);function Oo(u){const d=fs();W(d,new ko(d))}Ze.STAT_EVENT="statevent";function nm(u,d){P.call(this,Ze.STAT_EVENT,u),this.stat=d}f(nm,P);function Lt(u){const d=fs();W(d,new nm(d,u))}Ze.Ja="timingevent";function rm(u,d){P.call(this,Ze.Ja,u),this.size=d}f(rm,P);function Mo(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},d)}function Lo(){this.g=!0}Lo.prototype.ua=function(){this.g=!1};function nA(u,d,g,v,M,B){u.info(function(){if(u.g)if(B){var X="",ye=B.split("&");for(let Fe=0;Fe<ye.length;Fe++){var ht=ye[Fe].split("=");if(ht.length>1){const _t=ht[0];ht=ht[1];const On=_t.split("_");X=On.length>=2&&On[1]=="type"?X+(_t+"="+ht+"&"):X+(_t+"=redacted&")}}}else X=null;else X=B;return"XMLHTTP REQ ("+v+") [attempt "+M+"]: "+d+`
`+g+`
`+X})}function rA(u,d,g,v,M,B,X){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+M+"]: "+d+`
`+g+`
`+B+" "+X})}function fi(u,d,g,v){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+iA(u,g)+(v?" "+v:"")})}function sA(u,d){u.info(function(){return"TIMEOUT: "+d})}Lo.prototype.info=function(){};function iA(u,d){if(!u.g)return d;if(!d)return null;try{const B=JSON.parse(d);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var g=B[u];if(!(g.length<2)){var v=g[1];if(Array.isArray(v)&&!(v.length<1)){var M=v[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<v.length;X++)v[X]=""}}}}return Ve(B)}catch{return d}}var bc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sm={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},im;function Hl(){}f(Hl,ut),Hl.prototype.g=function(){return new XMLHttpRequest},im=new Hl;function Fo(u){return encodeURIComponent(String(u))}function oA(u){var d=1;u=u.split(":");const g=[];for(;d>0&&u.length;)g.push(u.shift()),d--;return u.length&&g.push(u.join(":")),g}function Ir(u,d,g,v){this.j=u,this.i=d,this.l=g,this.S=v||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new om}function om(){this.i=null,this.g="",this.h=!1}var am={},Gl={};function zl(u,d,g){u.M=1,u.A=Rc(kn(d)),u.u=g,u.R=!0,cm(u,null)}function cm(u,d){u.F=Date.now(),Ac(u),u.B=kn(u.A);var g=u.B,v=u.S;Array.isArray(v)||(v=[String(v)]),wm(g.i,"t",v),u.C=0,g=u.j.L,u.h=new om,u.g=Bm(u.j,g?d:null,!u.u),u.P>0&&(u.O=new te(l(u.Y,u,u.g),u.P)),d=u.V,g=u.g,v=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(me[0]=M.toString()),M=me);for(let B=0;B<M.length;B++){const X=ee(g,M[B],v||d.handleEvent,!1,d.h||d);if(!X)break;d.g[X.key]=X}d=u.J?Zt(u.J):{},u.u?(u.v||(u.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,d)):(u.v="GET",u.g.ea(u.B,u.v,null,d)),Oo(),nA(u.i,u.v,u.B,u.l,u.S,u.u)}Ir.prototype.ba=function(u){u=u.target;const d=this.O;d&&Rr(u)==3?d.j():this.Y(u)},Ir.prototype.Y=function(u){try{if(u==this.g)e:{const ye=Rr(this.g),ht=this.g.ya(),Fe=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Pm(this.g)))){this.K||ye!=4||ht==7||(ht==8||Fe<=0?Oo(3):Oo(2)),Kl(this);var d=this.g.ca();this.X=d;var g=aA(this);if(this.o=d==200,rA(this.i,this.v,this.B,this.l,this.S,ye,d),this.o){if(this.U&&!this.L){t:{if(this.g){var v,M=this.g;if((v=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(v)){var B=v;break t}}B=null}if(u=B)fi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wl(this,u);else{this.o=!1,this.m=3,Lt(12),ds(this),Bo(this);break e}}if(this.R){u=!0;let _t;for(;!this.K&&this.C<g.length;)if(_t=cA(this,g),_t==Gl){ye==4&&(this.m=4,Lt(14),u=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==am){this.m=4,Lt(15),fi(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else fi(this.i,this.l,_t,null),Wl(this,_t);if(um(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||g.length!=0||this.h.h||(this.m=1,Lt(16),u=!1),this.o=this.o&&u,!u)fi(this.i,this.l,g,"[Invalid Chunked Response]"),ds(this),Bo(this);else if(g.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),nh(X),X.P=!0,Lt(11))}}else fi(this.i,this.l,g,null),Wl(this,g);ye==4&&ds(this),this.o&&!this.K&&(ye==4?Om(this.j,this):(this.o=!1,Ac(this)))}else TA(this.g),d==400&&g.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),ds(this),Bo(this)}}}catch{}finally{}};function aA(u){if(!um(u))return u.g.la();const d=Pm(u.g);if(d==="")return"";let g="";const v=d.length,M=Rr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ds(u),Bo(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<v;B++)u.h.h=!0,g+=u.h.i.decode(d[B],{stream:!(M&&B==v-1)});return d.length=0,u.h.g+=g,u.C=0,u.h.g}function um(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function cA(u,d){var g=u.C,v=d.indexOf(`
`,g);return v==-1?Gl:(g=Number(d.substring(g,v)),isNaN(g)?am:(v+=1,v+g>d.length?Gl:(d=d.slice(v,v+g),u.C=v+g,d)))}Ir.prototype.cancel=function(){this.K=!0,ds(this)};function Ac(u){u.T=Date.now()+u.H,lm(u,u.H)}function lm(u,d){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Mo(l(u.aa,u),d)}function Kl(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Ir.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(sA(this.i,this.B),this.M!=2&&(Oo(),Lt(17)),ds(this),this.m=2,Bo(this)):lm(this,this.T-u)};function Bo(u){u.j.I==0||u.K||Om(u.j,u)}function ds(u){Kl(u);var d=u.O;d&&typeof d.dispose=="function"&&d.dispose(),u.O=null,Ee(u.V),u.g&&(d=u.g,u.g=null,d.abort(),d.dispose())}function Wl(u,d){try{var g=u.j;if(g.I!=0&&(g.g==u||Ql(g.h,u))){if(!u.L&&Ql(g.h,u)&&g.I==3){try{var v=g.Ba.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var M=v;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)Vc(g),Cc(g);else break e;th(g),Lt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Mo(l(g.Va,g),6e3));dm(g.h)<=1&&g.ta&&(g.ta=void 0)}else ms(g,11)}else if((u.L||g.g==u)&&Vc(g),!b(d))for(M=g.Ba.g.parse(d),d=0;d<M.length;d++){let Fe=M[d];const _t=Fe[0];if(!(_t<=g.K))if(g.K=_t,Fe=Fe[1],g.I==2)if(Fe[0]=="c"){g.M=Fe[1],g.ba=Fe[2];const On=Fe[3];On!=null&&(g.ka=On,g.j.info("VER="+g.ka));const gs=Fe[4];gs!=null&&(g.za=gs,g.j.info("SVER="+g.za));const Sr=Fe[5];Sr!=null&&typeof Sr=="number"&&Sr>0&&(v=1.5*Sr,g.O=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const Pr=u.g;if(Pr){const Nc=Pr.g?Pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nc){var B=v.h;B.g||Nc.indexOf("spdy")==-1&&Nc.indexOf("quic")==-1&&Nc.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Jl(B,B.h),B.h=null))}if(v.G){const rh=Pr.g?Pr.g.getResponseHeader("X-HTTP-Session-Id"):null;rh&&(v.wa=rh,He(v.J,v.G,rh))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),v=g;var X=u;if(v.na=Fm(v,v.L?v.ba:null,v.W),X.L){pm(v.h,X);var ye=X,ht=v.O;ht&&(ye.H=ht),ye.D&&(Kl(ye),Ac(ye)),v.g=X}else Nm(v);g.i.length>0&&xc(g)}else Fe[0]!="stop"&&Fe[0]!="close"||ms(g,7);else g.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ms(g,7):eh(g):Fe[0]!="noop"&&g.l&&g.l.qa(Fe),g.A=0)}}Oo(4)}catch{}}var uA=class{constructor(u,d){this.g=u,this.map=d}};function hm(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fm(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function dm(u){return u.h?1:u.g?u.g.size:0}function Ql(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Jl(u,d){u.g?u.g.add(d):u.h=d}function pm(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}hm.prototype.cancel=function(){if(this.i=mm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function mm(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const g of u.g.values())d=d.concat(g.G);return d}return m(u.i)}var gm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lA(u,d){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const v=u[g].indexOf("=");let M,B=null;v>=0?(M=u[g].substring(0,v),B=u[g].substring(v+1)):M=u[g],d(M,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function br(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;u instanceof br?(this.l=u.l,Uo(this,u.j),this.o=u.o,this.g=u.g,jo(this,u.u),this.h=u.h,Yl(this,Tm(u.i)),this.m=u.m):u&&(d=String(u).match(gm))?(this.l=!1,Uo(this,d[1]||"",!0),this.o=$o(d[2]||""),this.g=$o(d[3]||"",!0),jo(this,d[4]),this.h=$o(d[5]||"",!0),Yl(this,d[6]||"",!0),this.m=$o(d[7]||"")):(this.l=!1,this.i=new Ho(null,this.l))}br.prototype.toString=function(){const u=[];var d=this.j;d&&u.push(qo(d,_m,!0),":");var g=this.g;return(g||d=="file")&&(u.push("//"),(d=this.o)&&u.push(qo(d,_m,!0),"@"),u.push(Fo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(qo(g,g.charAt(0)=="/"?dA:fA,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",qo(g,mA)),u.join("")},br.prototype.resolve=function(u){const d=kn(this);let g=!!u.j;g?Uo(d,u.j):g=!!u.o,g?d.o=u.o:g=!!u.g,g?d.g=u.g:g=u.u!=null;var v=u.h;if(g)jo(d,u.u);else if(g=!!u.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var M=d.h.lastIndexOf("/");M!=-1&&(v=d.h.slice(0,M+1)+v)}if(M=v,M==".."||M==".")v="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){v=M.lastIndexOf("/",0)==0,M=M.split("/");const B=[];for(let X=0;X<M.length;){const ye=M[X++];ye=="."?v&&X==M.length&&B.push(""):ye==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),v&&X==M.length&&B.push("")):(B.push(ye),v=!0)}v=B.join("/")}else v=M}return g?d.h=v:g=u.i.toString()!=="",g?Yl(d,Tm(u.i)):g=!!u.m,g&&(d.m=u.m),d};function kn(u){return new br(u)}function Uo(u,d,g){u.j=g?$o(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function jo(u,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);u.u=d}else u.u=null}function Yl(u,d,g){d instanceof Ho?(u.i=d,gA(u.i,u.l)):(g||(d=qo(d,pA)),u.i=new Ho(d,u.l))}function He(u,d,g){u.i.set(d,g)}function Rc(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function $o(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qo(u,d,g){return typeof u=="string"?(u=encodeURI(u).replace(d,hA),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function hA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _m=/[#\/\?@]/g,fA=/[#\?:]/g,dA=/[#\?]/g,pA=/[#\?@]/g,mA=/#/g;function Ho(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function ps(u){u.g||(u.g=new Map,u.h=0,u.i&&lA(u.i,function(d,g){u.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}t=Ho.prototype,t.add=function(u,d){ps(this),this.i=null,u=di(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(d),this.h+=1,this};function ym(u,d){ps(u),d=di(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function vm(u,d){return ps(u),d=di(u,d),u.g.has(d)}t.forEach=function(u,d){ps(this),this.g.forEach(function(g,v){g.forEach(function(M){u.call(d,M,v,this)},this)},this)};function Em(u,d){ps(u);let g=[];if(typeof d=="string")vm(u,d)&&(g=g.concat(u.g.get(di(u,d))));else for(u=Array.from(u.g.values()),d=0;d<u.length;d++)g=g.concat(u[d]);return g}t.set=function(u,d){return ps(this),this.i=null,u=di(this,u),vm(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=Em(this,u),u.length>0?String(u[0]):d):d};function wm(u,d,g){ym(u,d),g.length>0&&(u.i=null,u.g.set(di(u,d),m(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(let v=0;v<d.length;v++){var g=d[v];const M=Fo(g);g=Em(this,g);for(let B=0;B<g.length;B++){let X=M;g[B]!==""&&(X+="="+Fo(g[B])),u.push(X)}}return this.i=u.join("&")};function Tm(u){const d=new Ho;return d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),d}function di(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function gA(u,d){d&&!u.j&&(ps(u),u.i=null,u.g.forEach(function(g,v){const M=v.toLowerCase();v!=M&&(ym(this,v),wm(this,M,g))},u)),u.j=d}function _A(u,d){const g=new Lo;if(o.Image){const v=new Image;v.onload=h(Ar,g,"TestLoadImage: loaded",!0,d,v),v.onerror=h(Ar,g,"TestLoadImage: error",!1,d,v),v.onabort=h(Ar,g,"TestLoadImage: abort",!1,d,v),v.ontimeout=h(Ar,g,"TestLoadImage: timeout",!1,d,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else d(!1)}function yA(u,d){const g=new Lo,v=new AbortController,M=setTimeout(()=>{v.abort(),Ar(g,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:v.signal}).then(B=>{clearTimeout(M),B.ok?Ar(g,"TestPingServer: ok",!0,d):Ar(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),Ar(g,"TestPingServer: error",!1,d)})}function Ar(u,d,g,v,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),v(g)}catch{}}function vA(){this.g=new St}function Xl(u){this.i=u.Sb||null,this.h=u.ab||!1}f(Xl,ut),Xl.prototype.g=function(){return new Sc(this.i,this.h)};function Sc(u,d){Q.call(this),this.H=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Sc,Q),t=Sc.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=d,this.readyState=1,zo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(d.body=u),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Go(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,zo(this)),this.g&&(this.readyState=3,zo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Im(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Im(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Go(this):zo(this),this.readyState==3&&Im(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Go(this))},t.Na=function(u){this.g&&(this.response=u,Go(this))},t.ga=function(){this.g&&Go(this)};function Go(u){u.readyState=4,u.l=null,u.j=null,u.B=null,zo(u)}t.setRequestHeader=function(u,d){this.A.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=d.next();return u.join(`\r
`)};function zo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function bm(u){let d="";return Pe(u,function(g,v){d+=v,d+=":",d+=g,d+=`\r
`}),d}function Zl(u,d,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=bm(g),typeof u=="string"?g!=null&&Fo(g):He(u,d,g))}function Je(u){Q.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Je,Q);var EA=/^https?$/i,wA=["POST","PUT"];t=Je.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,d,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():im.g(),this.g.onreadystatechange=p(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(B){Am(this,B);return}if(u=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var M in v)g.set(M,v[M]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const B of v.keys())g.set(B,v.get(B));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(B=>B.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(wA,d,void 0)>=0)||v||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,X]of g)this.g.setRequestHeader(B,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){Am(this,B)}};function Am(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.o=5,Rm(u),Pc(u)}function Rm(u){u.A||(u.A=!0,W(u,"complete"),W(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,W(this,"complete"),W(this,"abort"),Pc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pc(this,!0)),Je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sm(this):this.Xa())},t.Xa=function(){Sm(this)};function Sm(u){if(u.h&&typeof i<"u"){if(u.v&&Rr(u)==4)setTimeout(u.Ca.bind(u),0);else if(W(u,"readystatechange"),Rr(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var v;if(v=B===0){let X=String(u.D).match(gm)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),v=!EA.test(X?X.toLowerCase():"")}g=v}if(g)W(u,"complete"),W(u,"success");else{u.o=6;try{var M=Rr(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",Rm(u)}}finally{Pc(u)}}}}function Pc(u,d){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,d||W(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Rr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Rr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Ce(d)}};function Pm(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function TA(u){const d={};u=(u.g&&Rr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(b(u[v]))continue;var g=oA(u[v]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const B=d[M]||[];d[M]=B,B.push(g)}Nn(d,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ko(u,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||d}function Cm(u){this.za=0,this.i=[],this.j=new Lo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ko("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ko("baseRetryDelayMs",5e3,u),this.Za=Ko("retryDelaySeedMs",1e4,u),this.Ta=Ko("forwardChannelMaxRetries",2,u),this.va=Ko("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new hm(u&&u.concurrentRequestLimit),this.Ba=new vA,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Cm.prototype,t.ka=8,t.I=1,t.connect=function(u,d,g,v){Lt(0),this.W=u,this.H=d||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.J=Fm(this,null,this.W),xc(this)};function eh(u){if(xm(u),u.I==3){var d=u.V++,g=kn(u.J);if(He(g,"SID",u.M),He(g,"RID",d),He(g,"TYPE","terminate"),Wo(u,g),d=new Ir(u,u.j,d),d.M=2,d.A=Rc(kn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=d.A,g=!0),g||(d.g=Bm(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ac(d)}Lm(u)}function Cc(u){u.g&&(nh(u),u.g.cancel(),u.g=null)}function xm(u){Cc(u),u.v&&(o.clearTimeout(u.v),u.v=null),Vc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function xc(u){if(!fm(u.h)&&!u.m){u.m=!0;var d=u.Ea;N||T(),U||(N(),U=!0),I.add(d,u),u.D=0}}function IA(u,d){return dm(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=d.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Mo(l(u.Ea,u,d),Mm(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Ir(this,this.j,u);let B=this.o;if(this.U&&(B?(B=Zt(B),Yn(B,this.U)):B=this.U),this.u!==null||this.R||(M.J=B,B=null),this.S)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,d>4096){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Dm(this,M,d),g=kn(this.J),He(g,"RID",u),He(g,"CVER",22),this.G&&He(g,"X-HTTP-Session-Id",this.G),Wo(this,g),B&&(this.R?d="headers="+Fo(bm(B))+"&"+d:this.u&&Zl(g,this.u,B)),Jl(this.h,M),this.Ra&&He(g,"TYPE","init"),this.S?(He(g,"$req",d),He(g,"SID","null"),M.U=!0,zl(M,g,null)):zl(M,g,d),this.I=2}}else this.I==3&&(u?Vm(this,u):this.i.length==0||fm(this.h)||Vm(this))};function Vm(u,d){var g;d?g=d.l:g=u.V++;const v=kn(u.J);He(v,"SID",u.M),He(v,"RID",g),He(v,"AID",u.K),Wo(u,v),u.u&&u.o&&Zl(v,u.u,u.o),g=new Ir(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),d&&(u.i=d.G.concat(u.i)),d=Dm(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Jl(u.h,g),zl(g,v,d)}function Wo(u,d){u.H&&Pe(u.H,function(g,v){He(d,v,g)}),u.l&&Pe({},function(g,v){He(d,v,g)})}function Dm(u,d,g){g=Math.min(u.i.length,g);const v=u.l?l(u.l.Ka,u.l,u):null;e:{var M=u.i;let ye=-1;for(;;){const ht=["count="+g];ye==-1?g>0?(ye=M[0].g,ht.push("ofs="+ye)):ye=0:ht.push("ofs="+ye);let Fe=!0;for(let _t=0;_t<g;_t++){var B=M[_t].g;const On=M[_t].map;if(B-=ye,B<0)ye=Math.max(0,M[_t].g-100),Fe=!1;else try{B="req"+B+"_"||"";try{var X=On instanceof Map?On:Object.entries(On);for(const[gs,Sr]of X){let Pr=Sr;a(Sr)&&(Pr=Ve(Sr)),ht.push(B+gs+"="+encodeURIComponent(Pr))}}catch(gs){throw ht.push(B+"type="+encodeURIComponent("_badmap")),gs}}catch{v&&v(On)}}if(Fe){X=ht.join("&");break e}}X=void 0}return u=u.i.splice(0,g),d.G=u,X}function Nm(u){if(!u.g&&!u.v){u.Y=1;var d=u.Da;N||T(),U||(N(),U=!0),I.add(d,u),u.A=0}}function th(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Mo(l(u.Da,u),Mm(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,km(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Mo(l(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),Cc(this),km(this))};function nh(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function km(u){u.g=new Ir(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var d=kn(u.na);He(d,"RID","rpc"),He(d,"SID",u.M),He(d,"AID",u.K),He(d,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(d,"TO",u.ia),He(d,"TYPE","xmlhttp"),Wo(u,d),u.u&&u.o&&Zl(d,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=Rc(kn(d)),g.u=null,g.R=!0,cm(g,u)}t.Va=function(){this.C!=null&&(this.C=null,Cc(this),th(this),Lt(19))};function Vc(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Om(u,d){var g=null;if(u.g==d){Vc(u),nh(u),u.g=null;var v=2}else if(Ql(u.h,d))g=d.G,pm(u.h,d),v=1;else return;if(u.I!=0){if(d.o)if(v==1){g=d.u?d.u.length:0,d=Date.now()-d.F;var M=u.D;v=fs(),W(v,new rm(v,g)),xc(u)}else Nm(u);else if(M=d.m,M==3||M==0&&d.X>0||!(v==1&&IA(u,d)||v==2&&th(u)))switch(g&&g.length>0&&(d=u.h,d.i=d.i.concat(g)),M){case 1:ms(u,5);break;case 4:ms(u,10);break;case 3:ms(u,6);break;default:ms(u,2)}}}function Mm(u,d){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*d}function ms(u,d){if(u.j.info("Error code "+d),d==2){var g=l(u.bb,u),v=u.Ua;const M=!v;v=new br(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Uo(v,"https"),Rc(v),M?_A(v.toString(),g):yA(v.toString(),g)}else Lt(2);u.I=0,u.l&&u.l.pa(d),Lm(u),xm(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Lm(u){if(u.I=0,u.ja=[],u.l){const d=mm(u.h);(d.length!=0||u.i.length!=0)&&(_(u.ja,d),_(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function Fm(u,d,g){var v=g instanceof br?kn(g):new br(g);if(v.g!="")d&&(v.g=d+"."+v.g),jo(v,v.u);else{var M=o.location;v=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;const B=new br(null);v&&Uo(B,v),d&&(B.g=d),M&&jo(B,M),g&&(B.h=g),v=B}return g=u.G,d=u.wa,g&&d&&He(v,g,d),He(v,"VER",u.ka),Wo(u,v),v}function Bm(u,d,g){if(d&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Aa&&!u.ma?new Je(new Xl({ab:g})):new Je(u.ma),d.Fa(u.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Um(){}t=Um.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Dc(){}Dc.prototype.g=function(u,d){return new tn(u,d)};function tn(u,d){Q.call(this),this.g=new Cm(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(u?u["X-WebChannel-Client-Profile"]=d.sa:u={"X-WebChannel-Client-Profile":d.sa}),this.g.U=u,(u=d&&d.Qb)&&!b(u)&&(this.g.u=u),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!b(d)&&(this.g.G=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new pi(this)}f(tn,Q),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){eh(this.g)},tn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Ve(u),u=g);d.i.push(new uA(d.Ya++,u)),d.I==3&&xc(d)},tn.prototype.N=function(){this.g.l=null,delete this.j,eh(this.g),delete this.g,tn.Z.N.call(this)};function jm(u){Xn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const g in d){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}f(jm,Xn);function $m(){hi.call(this),this.status=1}f($m,hi);function pi(u){this.g=u}f(pi,Um),pi.prototype.ra=function(){W(this.g,"a")},pi.prototype.qa=function(u){W(this.g,new jm(u))},pi.prototype.pa=function(u){W(this.g,new $m)},pi.prototype.oa=function(){W(this.g,"b")},Dc.prototype.createWebChannel=Dc.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,mT=function(){return new Dc},pT=function(){return fs()},dT=Ze,Af={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bc.NO_ERROR=0,bc.TIMEOUT=8,bc.HTTP_ERROR=6,tu=bc,sm.COMPLETE="complete",fT=sm,Gt.EventType=lt,lt.OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",Q.prototype.listen=Q.prototype.J,la=Gt,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,hT=Je}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="12.9.0";function ED(t){Ro=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new $d("@firebase/firestore");function Si(){return Zr.logLevel}function wD(t){Zr.setLogLevel(t)}function G(t,...e){if(Zr.logLevel<=be.DEBUG){const n=e.map(Wd);Zr.debug(`Firestore (${Ro}): ${t}`,...n)}}function et(t,...e){if(Zr.logLevel<=be.ERROR){const n=e.map(Wd);Zr.error(`Firestore (${Ro}): ${t}`,...n)}}function xn(t,...e){if(Zr.logLevel<=be.WARN){const n=e.map(Wd);Zr.warn(`Firestore (${Ro}): ${t}`,...n)}}function Wd(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,gT(t,r,n)}function gT(t,e,n){let r=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw et(r),new Error(r)}function oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||gT(e,s,r)}function TD(t,e){t||ne(57014,e)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ID{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(vt.UNAUTHENTICATED)))}shutdown(){}}class bD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class AD{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new At;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new At,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new At)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new _T(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new vt(e)}}class RD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class SD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new RD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(vt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class C_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new C_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new C_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=CD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function Rf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Dh(s)===Dh(i)?ge(s,i):Dh(s)?1:-1}return ge(t.length,e.length)}const xD=55296,VD=57343;function Dh(t){const e=t.charCodeAt(0);return e>=xD&&e<=VD}function no(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}function yT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="__name__";class Bn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Bn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ge(e.length,n.length)}static compareSegments(e,n){const r=Bn.isNumericId(e),s=Bn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Bn.extractNumericId(e).compare(Bn.extractNumericId(n)):Rf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wr.fromString(e.substring(4,e.length-2))}}class we extends Bn{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new we(n)}static emptyPath(){return new we([])}}const DD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends Bn{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return DD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===x_}static keyField(){return new Ke([x_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(we.fromString(e))}static fromName(e){return new Y(we.fromString(e).popFirst(5))}static empty(){return new Y(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new we(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vT(t,e,n,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function V_(t){if(!Y.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function D_(t){if(Y.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ET(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Se(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vl(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function wT(t,e){if(e<=0)throw new q(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function uc(t,e){if(!ET(t))throw new q(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new q(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=-62135596800,k_=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*k_);return new ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<N_)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/k_}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uc(e,ke._jsonSchema))return new ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-N_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:ot("string",ke._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new ke(0,0))}static max(){return new ce(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=-1;class Mu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Sf(t){return t.fields.find((e=>e.kind===2))}function As(t){return t.fields.filter((e=>e.kind!==2))}Mu.UNKNOWN_ID=-1;class nu{constructor(e,n){this.fieldPath=e,this.kind=n}}class ja{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ja(0,ln.min())}}function TT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new ln(s,Y.empty(),e)}function IT(t){return new ln(t.readTime,t.key,ro)}class ln{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ln(ce.min(),Y.empty(),ro)}static max(){return new ln(ce.max(),Y.empty(),ro)}}function Yd(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function as(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==bT)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):O.reject(n)}static resolve(e){return new O(((n,r)=>{n(e)}))}static reject(e){return new O(((n,r)=>{r(e)}))}static waitFor(e){return new O(((n,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&n()}),(c=>r(c)))})),o=!0,i===s&&n()}))}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next((s=>s?O.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new O(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(e[l]).next((h=>{o[l]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new O(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="SimpleDb";class El{static open(e,n,r,s){try{return new El(n,e.transaction(s,r))}catch(i){throw new Ta(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new At,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Ta(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Xd(r.target.error);this.S.reject(new Ta(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(G(nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new kD(n)}}class zn{static delete(e){return G(nn,"Removing database:",e),Ss(Fd().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Qw())return!1;if(zn.F())return!0;const e=ku(),n=zn.M(e),r=0<n&&n<10,s=RT(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,zn.M(ku())===12.2&&et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(G(nn,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Ta(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new q(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ta(e,o))},s.onupgradeneeded=i=>{G(nn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next((()=>{G(nn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=El.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next((l=>(a.C(),l))).catch((l=>(a.abort(l),O.reject(l)))).toPromise();return c.catch((()=>{})),await a.D,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(G(nn,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function RT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class ND{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Ss(this.U.delete())}}class Ta extends q{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function cs(t){return t.name==="IndexedDbTransactionError"}class kD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G(nn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(G(nn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ss(r)}add(e){return G(nn,"ADD",this.store.name,e,e),Ss(this.store.add(e))}get(e){return Ss(this.store.get(e)).next((n=>(n===void 0&&(n=null),G(nn,"GET",this.store.name,e,n),n)))}delete(e){return G(nn,"DELETE",this.store.name,e),Ss(this.store.delete(e))}count(){return G(nn,"COUNT",this.store.name),Ss(this.store.count())}H(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new O(((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}}))}{const i=this.cursor(r),o=[];return this.J(i,((a,c)=>{o.push(c)})).next((()=>o))}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}X(e,n){G(nn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const s=this.cursor(r);return this.J(s,((i,o,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.J(s,n)}te(e){const n=this.cursor({});return new O(((r,s)=>{n.onerror=i=>{const o=Xd(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}J(e,n){const r=[];return new O(((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new ND(a),l=n(a.primaryKey,a.value,c);if(l instanceof O){const h=l.catch((f=>(c.done(),O.reject(f))));r.push(h)}c.isDone?s():c.G===null?a.continue():a.continue(c.G)}})).next((()=>O.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ss(t){return new O(((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Xd(r.target.error);n(s)}}))}let O_=!1;function Xd(t){const e=zn.M(ku());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return O_||(O_=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Ia="IndexBackfiller";class OD{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){G(Ia,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();G(Ia,`Documents written: ${n}`)}catch(n){cs(n)?G(Ia,"Ignoring IndexedDB error during index backfill: ",n):await as(n)}await this.re(6e4)}))}}class MD{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let s=n,i=!0;return O.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return G(Ia,`Processing collection: ${o}`),this.oe(e,o,s).next((a=>{s-=a,r.add(o)}));i=!1})))).next((()=>n-s))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(s,i))).next((a=>(G(Ia,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((s,i)=>{const o=IT(i);Yd(o,r)>0&&(r=o)})),new ln(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qt.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=-1;function lc(t){return t==null}function $a(t){return t===0&&1/t==-1/0}function ST(t){return typeof t=="number"&&Number.isInteger(t)&&!$a(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="";function Ot(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=M_(e)),e=LD(t.get(n),e);return M_(e)}function LD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Lu:n+="";break;default:n+=i}}return n}function M_(t){return t+Lu+""}function qn(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===Lu&&t.charAt(1)==="",56145,{path:t}),we.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Lu,i);switch((o<0||o>n)&&ne(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ne(61167,{path:t})}i=o+2}return new we(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="remoteDocuments",hc="owner",vi="owner",qa="mutationQueues",FD="userId",En="mutations",L_="batchId",Ns="userMutationsIndex",F_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t,e){return[t,Ot(e)]}function PT(t,e,n){return[t,Ot(e),n]}const BD={},so="documentMutations",Fu="remoteDocumentsV14",UD=["prefixPath","collectionGroup","readTime","documentId"],su="documentKeyIndex",jD=["prefixPath","collectionGroup","documentId"],CT="collectionGroupIndex",$D=["collectionGroup","readTime","prefixPath","documentId"],Ha="remoteDocumentGlobal",Pf="remoteDocumentGlobalKey",io="targets",xT="queryTargetsIndex",qD=["canonicalId","targetId"],oo="targetDocuments",HD=["targetId","path"],Zd="documentTargetsIndex",GD=["path","targetId"],Bu="targetGlobalKey",js="targetGlobal",Ga="collectionParents",zD=["collectionId","parent"],ao="clientMetadata",KD="clientId",wl="bundles",WD="bundleId",Tl="namedQueries",QD="name",ep="indexConfiguration",JD="indexId",Cf="collectionGroupIndex",YD="collectionGroup",ba="indexState",XD=["indexId","uid"],VT="sequenceNumberIndex",ZD=["uid","sequenceNumber"],Aa="indexEntries",eN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DT="documentKeyIndex",tN=["indexId","uid","orderedDocumentKey"],Il="documentOverlays",nN=["userId","collectionPath","documentId"],xf="collectionPathOverlayIndex",rN=["userId","collectionPath","largestBatchId"],NT="collectionGroupOverlayIndex",sN=["userId","collectionGroup","largestBatchId"],tp="globals",iN="name",kT=[qa,En,so,Rs,io,hc,js,oo,ao,Ha,Ga,wl,Tl],oN=[...kT,Il],OT=[qa,En,so,Fu,io,hc,js,oo,ao,Ha,Ga,wl,Tl,Il],MT=OT,np=[...MT,ep,ba,Aa],aN=np,LT=[...np,tp],cN=LT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends AT{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function gt(t,e){const n=Z(t);return zn.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function us(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hc(this.root,e,this.comparator,!0)}}class Hc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??wt.RED,this.left=s??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new wt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new U_(this.data.getIterator())}getIteratorFrom(e){return new U_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Me)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Me(this.comparator);return n.data=e,n}}class U_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ei(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new Me(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return no(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new BT("Invalid base64 string: "+i):i}})(e);return new Xe(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const lN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=lN.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gr(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="server_timestamp",jT="__type__",$T="__previous_value__",qT="__local_write_time__";function bl(t){return(t?.mapValue?.fields||{})[jT]?.stringValue===UT}function Al(t){const e=t.mapValue.fields[$T];return bl(e)?Al(e):e}function za(t){const e=mr(t.mapValue.fields[qT].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r,s,i,o,a,c,l,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h,this.apiKey=f}}const Df="(default)";class es{constructor(e,n){this.projectId=e,this.database=n||Df}static empty(){return new es("","")}get isDefaultDatabase(){return this.database===Df}isEqual(e){return e instanceof es&&e.projectId===this.projectId&&e.database===this.database}}function fN(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new es(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="__type__",HT="__max__",jr={mapValue:{fields:{__type__:{stringValue:HT}}}},sp="__vector__",co="value",iu={nullValue:"NULL_VALUE"};function ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bl(t)?4:GT(t)?9007199254740991:Rl(t)?10:11:ne(28295,{value:t})}function Qn(t,e){if(t===e)return!0;const n=ts(t);if(n!==ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return za(t).isEqual(za(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=mr(s.timestampValue),a=mr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return gr(s.bytesValue).isEqual(gr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return ze(s.geoPointValue.latitude)===ze(i.geoPointValue.latitude)&&ze(s.geoPointValue.longitude)===ze(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return ze(s.integerValue)===ze(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ze(s.doubleValue),a=ze(i.doubleValue);return o===a?$a(o)===$a(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return no(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(B_(o)!==B_(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Qn(o[c],a[c])))return!1;return!0})(t,e);default:return ne(52216,{left:t})}}function Ka(t,e){return(t.values||[]).find((n=>Qn(n,e)))!==void 0}function ns(t,e){if(t===e)return 0;const n=ts(t),r=ts(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=ze(i.integerValue||i.doubleValue),c=ze(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return j_(t.timestampValue,e.timestampValue);case 4:return j_(za(t),za(e));case 5:return Rf(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=gr(i),c=gr(o);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const h=ge(a[l],c[l]);if(h!==0)return h}return ge(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=ge(ze(i.latitude),ze(o.latitude));return a!==0?a:ge(ze(i.longitude),ze(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return $_(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},c=o.fields||{},l=a[co]?.arrayValue,h=c[co]?.arrayValue,f=ge(l?.values?.length||0,h?.values?.length||0);return f!==0?f:$_(l,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===jr.mapValue&&o===jr.mapValue)return 0;if(i===jr.mapValue)return 1;if(o===jr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Rf(c[f],h[f]);if(p!==0)return p;const m=ns(a[c[f]],l[h[f]]);if(m!==0)return m}return ge(c.length,h.length)})(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function j_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=mr(t),r=mr(e),s=ge(n.seconds,r.seconds);return s!==0?s:ge(n.nanos,r.nanos)}function $_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ns(n[s],r[s]);if(i)return i}return ge(n.length,r.length)}function uo(t){return Nf(t)}function Nf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=mr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return gr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Y.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Nf(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Nf(n.fields[o])}`;return s+"}"})(t.mapValue):ne(61005,{value:t})}function ou(t){switch(ts(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Al(t);return e?16+ou(e):16;case 5:return 2*t.stringValue.length;case 6:return gr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+ou(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return us(r.fields,((i,o)=>{s+=i.length+ou(o)})),s})(t.mapValue);default:throw ne(13486,{value:t})}}function zs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kf(t){return!!t&&"integerValue"in t}function Wa(t){return!!t&&"arrayValue"in t}function q_(t){return!!t&&"nullValue"in t}function H_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function au(t){return!!t&&"mapValue"in t}function Rl(t){return(t?.mapValue?.fields||{})[rp]?.stringValue===sp}function Ra(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return us(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ra(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ra(t.arrayValue.values[n]);return e}return{...t}}function GT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===HT}const zT={mapValue:{fields:{[rp]:{stringValue:sp},[co]:{arrayValue:{}}}}};function dN(t){return"nullValue"in t?iu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?zs(es.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Rl(t)?zT:{mapValue:{}}:ne(35942,{value:t})}function pN(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?zs(es.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?zT:"mapValue"in t?Rl(t)?{mapValue:{}}:jr:ne(61959,{value:t})}function G_(t,e){const n=ns(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function z_(t,e){const n=ns(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!au(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(n)}setAll(e){let n=Ke.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ra(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());au(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];au(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){us(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new It(Ra(this.value))}}function KT(t){const e=[];return us(t.fields,((n,r)=>{const s=new Ke([n]);if(au(r)){const i=KT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ge(e,0,ce.min(),ce.min(),ce.min(),It.empty(),0)}static newFoundDocument(e,n,r,s){return new Ge(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Ge(e,2,n,ce.min(),ce.min(),It.empty(),0)}static newUnknownDocument(e,n){return new Ge(e,3,n,ce.min(),ce.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ge&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n){this.position=e,this.inclusive=n}}function K_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=ns(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function W_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n="asc"){this.field=e,this.dir=n}}function mN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{}class Ie extends WT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gN(e,n,r):n==="array-contains"?new vN(e,r):n==="in"?new eI(e,r):n==="not-in"?new EN(e,r):n==="array-contains-any"?new wN(e,r):new Ie(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _N(e,r):new yN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ns(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(ns(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oe extends WT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Oe(e,n)}matches(e){return lo(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lo(t){return t.op==="and"}function Of(t){return t.op==="or"}function ip(t){return QT(t)&&lo(t)}function QT(t){for(const e of t.filters)if(e instanceof Oe)return!1;return!0}function Mf(t){if(t instanceof Ie)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(ip(t))return t.filters.map((e=>Mf(e))).join(",");{const e=t.filters.map((n=>Mf(n))).join(",");return`${t.op}(${e})`}}function JT(t,e){return t instanceof Ie?(function(r,s){return s instanceof Ie&&r.op===s.op&&r.field.isEqual(s.field)&&Qn(r.value,s.value)})(t,e):t instanceof Oe?(function(r,s){return s instanceof Oe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&JT(o,s.filters[a])),!0):!1})(t,e):void ne(19439)}function YT(t,e){const n=t.filters.concat(e);return Oe.create(n,t.op)}function XT(t){return t instanceof Ie?(function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`})(t):t instanceof Oe?(function(n){return n.op.toString()+" {"+n.getFilters().map(XT).join(" ,")+"}"})(t):"Filter"}class gN extends Ie{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class _N extends Ie{constructor(e,n){super(e,"in",n),this.keys=ZT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class yN extends Ie{constructor(e,n){super(e,"not-in",n),this.keys=ZT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function ZT(t,e){return(e.arrayValue?.values||[]).map((n=>Y.fromName(n.referenceValue)))}class vN extends Ie{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wa(n)&&Ka(n.arrayValue,this.value)}}class eI extends Ie{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ka(this.value.arrayValue,n)}}class EN extends Ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ka(this.value.arrayValue,n)}}class wN extends Ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wa(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ka(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Lf(t,e=null,n=[],r=[],s=null,i=null,o=null){return new TN(t,e,n,r,s,i,o)}function Ks(t){const e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Mf(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),lc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>uo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>uo(r))).join(",")),e.Te=n}return e.Te}function fc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!W_(t.startAt,e.startAt)&&W_(t.endAt,e.endAt)}function Uu(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ju(t,e){return t.filters.filter((n=>n instanceof Ie&&n.field.isEqual(e)))}function Q_(t,e,n){let r=iu,s=!0;for(const i of ju(t,e)){let o=iu,a=!0;switch(i.op){case"<":case"<=":o=dN(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=iu}G_({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];G_({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function J_(t,e,n){let r=jr,s=!0;for(const i of ju(t,e)){let o=jr,a=!0;switch(i.op){case">=":case">":o=pN(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=jr}z_({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];z_({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function tI(t,e,n,r,s,i,o,a){return new vr(t,e,n,r,s,i,o,a)}function So(t){return new vr(t)}function Y_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function IN(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function op(t){return t.collectionGroup!==null}function Ui(t){const e=Z(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Me(Ke.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((l=>{l.isInequality()&&(a=a.add(l.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Qa(i,r))})),n.has(Ke.keyField().canonicalString())||e.Ie.push(new Qa(Ke.keyField(),r))}return e.Ie}function qt(t){const e=Z(t);return e.Ee||(e.Ee=bN(e,Ui(t))),e.Ee}function bN(t,e){if(t.limitType==="F")return Lf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Qa(s.field,i)}));const n=t.endAt?new rs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rs(t.startAt.position,t.startAt.inclusive):null;return Lf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ff(t,e){const n=t.filters.concat([e]);return new vr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function AN(t,e){const n=t.explicitOrderBy.concat([e]);return new vr(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function $u(t,e,n){return new vr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function RN(t,e){return new vr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function SN(t,e){return new vr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function dc(t,e){return fc(qt(t),qt(e))&&t.limitType===e.limitType}function nI(t){return`${Ks(qt(t))}|lt:${t.limitType}`}function Pi(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>XT(s))).join(", ")}]`),lc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>uo(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>uo(s))).join(",")),`Target(${r})`})(qt(t))}; limitType=${t.limitType})`}function pc(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Ui(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,c){const l=K_(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,Ui(r),s)||r.endAt&&!(function(o,a,c){const l=K_(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,Ui(r),s))})(t,e)}function rI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sI(t){return(e,n)=>{let r=!1;for(const s of Ui(t)){const i=PN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function PN(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):(function(i,o,a){const c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?ns(c,l):ne(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return FT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new qe(Y.comparator);function Yt(){return CN}const iI=new qe(Y.comparator);function ha(...t){let e=iI;for(const n of t)e=e.insert(n.key,n);return e}function oI(t){let e=iI;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Hn(){return Sa()}function aI(){return Sa()}function Sa(){return new Er((t=>t.toString()),((t,e)=>t.isEqual(e)))}const xN=new qe(Y.comparator),VN=new Me(Y.comparator);function _e(...t){let e=VN;for(const n of t)e=e.add(n);return e}const DN=new Me(ge);function ap(){return DN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$a(e)?"-0":e}}function cI(t){return{integerValue:""+t}}function uI(t,e){return ST(e)?cI(e):cp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this._=void 0}}function NN(t,e,n){return t instanceof ho?(function(s,i){const o={fields:{[jT]:{stringValue:UT},[qT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&bl(i)&&(i=Al(i)),i&&(o.fields[$T]=i),{mapValue:o}})(n,e):t instanceof Ws?hI(t,e):t instanceof Qs?fI(t,e):(function(s,i){const o=lI(s,i),a=X_(o)+X_(s.Ae);return kf(o)&&kf(s.Ae)?cI(a):cp(s.serializer,a)})(t,e)}function kN(t,e,n){return t instanceof Ws?hI(t,e):t instanceof Qs?fI(t,e):n}function lI(t,e){return t instanceof fo?(function(r){return kf(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class ho extends Sl{}class Ws extends Sl{constructor(e){super(),this.elements=e}}function hI(t,e){const n=dI(e);for(const r of t.elements)n.some((s=>Qn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Qs extends Sl{constructor(e){super(),this.elements=e}}function fI(t,e){let n=dI(e);for(const r of t.elements)n=n.filter((s=>!Qn(s,r)));return{arrayValue:{values:n}}}class fo extends Sl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function X_(t){return ze(t.integerValue||t.doubleValue)}function dI(t){return Wa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this.field=e,this.transform=n}}function ON(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Ws&&s instanceof Ws||r instanceof Qs&&s instanceof Qs?no(r.elements,s.elements,Qn):r instanceof fo&&s instanceof fo?Qn(r.Ae,s.Ae):r instanceof ho&&s instanceof ho})(t.transform,e.transform)}class MN{constructor(e,n){this.version=e,this.transformResults=n}}class We{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new We}static exists(e){return new We(void 0,e)}static updateTime(e){return new We(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pl{}function pI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Co(t.key,We.none()):new Po(t.key,t.data,We.none());{const n=t.data,r=It.empty();let s=new Me(Ke.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new wr(t.key,r,new Jt(s.toArray()),We.none())}}function LN(t,e,n){t instanceof Po?(function(s,i,o){const a=s.value.clone(),c=ey(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof wr?(function(s,i,o){if(!cu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ey(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(mI(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Pa(t,e,n,r){return t instanceof Po?(function(i,o,a,c){if(!cu(i.precondition,o))return a;const l=i.value.clone(),h=ty(i.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof wr?(function(i,o,a,c){if(!cu(i.precondition,o))return a;const l=ty(i.fieldTransforms,c,o),h=o.data;return h.setAll(mI(i)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(t,e,n,r):(function(i,o,a){return cu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function FN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=lI(r.transform,s||null);i!=null&&(n===null&&(n=It.empty()),n.set(r.field,i))}return n||null}function Z_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&no(r,s,((i,o)=>ON(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Po extends Pl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wr extends Pl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function ey(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,kN(o,a,n[s]))}return r}function ty(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,NN(i,o,e))}return r}class Co extends Pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class up extends Pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&LN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=aI();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=pI(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),_e())}isEqual(e){return this.batchId===e.batchId&&no(this.mutations,e.mutations,((n,r)=>Z_(n,r)))&&no(this.baseMutations,e.baseMutations,((n,r)=>Z_(n,r)))}}class hp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return xN})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new hp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Ae;function gI(t){switch(t){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function _I(t){if(t===void 0)return et("GRPC error has no .code"),F.UNKNOWN;switch(t){case st.OK:return F.OK;case st.CANCELLED:return F.CANCELLED;case st.UNKNOWN:return F.UNKNOWN;case st.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case st.INTERNAL:return F.INTERNAL;case st.UNAVAILABLE:return F.UNAVAILABLE;case st.UNAUTHENTICATED:return F.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case st.NOT_FOUND:return F.NOT_FOUND;case st.ALREADY_EXISTS:return F.ALREADY_EXISTS;case st.PERMISSION_DENIED:return F.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case st.ABORTED:return F.ABORTED;case st.OUT_OF_RANGE:return F.OUT_OF_RANGE;case st.UNIMPLEMENTED:return F.UNIMPLEMENTED;case st.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:t})}}(Ae=st||(st={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=new Wr([4294967295,4294967295],0);function ny(t){const e=yI().encode(t),n=new lT;return n.update(e),new Uint8Array(n.digest())}function ry(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Wr([n,r],0),new Wr([s,i],0)]}class dp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fa(`Invalid padding: ${n}`);if(r<0)throw new fa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Wr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Wr.fromNumber(r)));return s.compare(UN)===1&&(s=new Wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ny(e),[r,s]=ry(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new dp(i,s,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=ny(e),[r,s]=ry(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,_c.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gc(ce.min(),s,new qe(ge),Yt(),_e())}}class _c{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _c(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class vI{constructor(e,n){this.targetId=e,this.Ce=n}}class EI{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class sy{constructor(){this.ve=0,this.Fe=iy(),this.Me=Xe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}})),new _c(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=iy()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class jN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yt(),this.He=Gc(),this.Je=Gc(),this.Ze=new qe(ge)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Uu(i))if(r===0){const o=new Y(i.path);this.et(n,o,Ge.newNoDocument(o,ce.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=gr(r).toUint8Array()}catch(c){if(c instanceof BT)return xn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new dp(o,s,i)}catch(c){return xn(c instanceof fa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Uu(a.target)){const c=new Y(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ge.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}}));let r=_e();this.Je.forEach(((i,o)=>{let a=!0;o.forEachWhile((c=>{const l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new gc(e,n,this.Ze,this.je,r);return this.je=Yt(),this.He=Gc(),this.Je=Gc(),this.Ze=new qe(ge),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new sy,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Me(ge),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Me(ge),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sy),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gc(){return new qe(Y.comparator)}function iy(){return new qe(Y.comparator)}const $N={asc:"ASCENDING",desc:"DESCENDING"},qN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HN={and:"AND",or:"OR"};class GN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bf(t,e){return t.useProto3Json||lc(e)?e:{value:e}}function po(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zN(t,e){return po(t,e.toTimestamp())}function nt(t){return oe(!!t,49232),ce.fromTimestamp((function(n){const r=mr(n);return new ke(r.seconds,r.nanos)})(t))}function pp(t,e){return Uf(t,e).canonicalString()}function Uf(t,e){const n=(function(s){return new we(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function TI(t){const e=we.fromString(t);return oe(DI(e),10190,{key:e.toString()}),e}function Ja(t,e){return pp(t.databaseId,e.path)}function Kn(t,e){const n=TI(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(AI(n))}function II(t,e){return pp(t.databaseId,e)}function bI(t){const e=TI(t);return e.length===4?we.emptyPath():AI(e)}function jf(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AI(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function oy(t,e,n){return{name:Ja(t,e),fields:n.value.mapValue.fields}}function RI(t,e,n){const r=Kn(t,e.name),s=nt(e.updateTime),i=e.createTime?nt(e.createTime):ce.min(),o=new It({mapValue:{fields:e.fields}}),a=Ge.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function KN(t,e){return"found"in e?(function(r,s){oe(!!s.found,43571),s.found.name,s.found.updateTime;const i=Kn(r,s.found.name),o=nt(s.found.updateTime),a=s.found.createTime?nt(s.found.createTime):ce.min(),c=new It({mapValue:{fields:s.found.fields}});return Ge.newFoundDocument(i,o,a,c)})(t,e):"missing"in e?(function(r,s){oe(!!s.missing,3894),oe(!!s.readTime,22933);const i=Kn(r,s.missing),o=nt(s.readTime);return Ge.newNoDocument(i,o)})(t,e):ne(7234,{result:e})}function WN(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(l,h){return l.useProto3Json?(oe(h===void 0||typeof h=="string",58123),Xe.fromBase64String(h||"")):(oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Xe.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){const h=l.code===void 0?F.UNKNOWN:_I(l.code);return new q(h,l.message||"")})(o);n=new EI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Kn(t,r.document.name),i=nt(r.document.updateTime),o=r.document.createTime?nt(r.document.createTime):ce.min(),a=new It({mapValue:{fields:r.document.fields}}),c=Ge.newFoundDocument(s,i,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new uu(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Kn(t,r.document),i=r.readTime?nt(r.readTime):ce.min(),o=Ge.newNoDocument(s,i),a=r.removedTargetIds||[];n=new uu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Kn(t,r.document),i=r.removedTargetIds||[];n=new uu([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new BN(s,i),a=r.targetId;n=new vI(a,o)}}return n}function Ya(t,e){let n;if(e instanceof Po)n={update:oy(t,e.key,e.value)};else if(e instanceof Co)n={delete:Ja(t,e.key)};else if(e instanceof wr)n={update:oy(t,e.key,e.data),updateMask:ek(e.fieldMask)};else{if(!(e instanceof up))return ne(16599,{dt:e.type});n={verify:Ja(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof ho)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ws)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fo)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ne(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:zN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)})(t,e.precondition)),n}function $f(t,e){const n=e.currentDocument?(function(i){return i.updateTime!==void 0?We.updateTime(nt(i.updateTime)):i.exists!==void 0?We.exists(i.exists):We.none()})(e.currentDocument):We.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(o,a){let c=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new ho;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new Ws(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new Qs(h)}else"increment"in a?c=new fo(o,a.increment):ne(16584,{proto:a});const l=Ke.fromServerFormat(a.fieldPath);return new mc(l,c)})(t,s))):[];if(e.update){e.update.name;const s=Kn(t,e.update.name),i=new It({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(c){const l=c.fieldPaths||[];return new Jt(l.map((h=>Ke.fromServerFormat(h))))})(e.updateMask);return new wr(s,i,o,n,r)}return new Po(s,i,n,r)}if(e.delete){const s=Kn(t,e.delete);return new Co(s,n)}if(e.verify){const s=Kn(t,e.verify);return new up(s,n)}return ne(1463,{proto:e})}function QN(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?nt(s.updateTime):nt(i);return o.isEqual(ce.min())&&(o=nt(i)),new MN(o,s.transformResults||[])})(n,e)))):[]}function SI(t,e){return{documents:[II(t,e.path)]}}function PI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=II(t,s);const i=(function(l){if(l.length!==0)return VI(Oe.create(l,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(l){if(l.length!==0)return l.map((h=>(function(p){return{field:Ci(p.field),direction:YN(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Bf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:s}}function CI(t){let e=bI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){oe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(f){const p=xI(f);return p instanceof Oe&&ip(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(f){return f.map((p=>(function(_){return new Qa(xi(_.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,lc(p)?null:p})(n.limit));let c=null;n.startAt&&(c=(function(f){const p=!!f.before,m=f.values||[];return new rs(m,p)})(n.startAt));let l=null;return n.endAt&&(l=(function(f){const p=!f.before,m=f.values||[];return new rs(m,p)})(n.endAt)),tI(e,s,o,i,a,"F",c,l)}function JN(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xI(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xi(n.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xi(n.unaryFilter.field);return Ie.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xi(n.unaryFilter.field);return Ie.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xi(n.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ie.create(xi(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Oe.create(n.compositeFilter.filters.map((r=>xI(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}})(n.compositeFilter.op))})(t):ne(30097,{filter:t})}function YN(t){return $N[t]}function XN(t){return qN[t]}function ZN(t){return HN[t]}function Ci(t){return{fieldPath:t.canonicalString()}}function xi(t){return Ke.fromServerFormat(t.fieldPath)}function VI(t){return t instanceof Ie?(function(n){if(n.op==="=="){if(H_(n.value))return{unaryFilter:{field:Ci(n.field),op:"IS_NAN"}};if(q_(n.value))return{unaryFilter:{field:Ci(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(H_(n.value))return{unaryFilter:{field:Ci(n.field),op:"IS_NOT_NAN"}};if(q_(n.value))return{unaryFilter:{field:Ci(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ci(n.field),op:XN(n.op),value:n.value}}})(t):t instanceof Oe?(function(n){const r=n.getFilters().map((s=>VI(s)));return r.length===1?r[0]:{compositeFilter:{op:ZN(n.op),filters:r}}})(t):ne(54877,{filter:t})}function ek(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function DI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function NI(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=Xe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.yt=e}}function tk(t,e){let n;if(e.document)n=RI(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Y.fromSegments(e.noDocument.path),s=Ys(e.noDocument.readTime);n=Ge.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne(56709);{const r=Y.fromSegments(e.unknownDocument.path),s=Ys(e.unknownDocument.version);n=Ge.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime((function(s){const i=new ke(s[0],s[1]);return ce.fromTimestamp(i)})(e.readTime)),n}function ay(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:qu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,o){return{name:Ja(i,o.key),fields:o.data.value.mapValue.fields,updateTime:po(i,o.version.toTimestamp()),createTime:po(i,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Js(e.version)};else{if(!e.isUnknownDocument())return ne(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Js(e.version)}}return r}function qu(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Js(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ys(t){const e=new ke(t.seconds,t.nanoseconds);return ce.fromTimestamp(e)}function Ps(t,e){const n=(e.baseMutations||[]).map((i=>$f(t.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>$f(t.yt,i))),s=ke.fromMillis(e.localWriteTimeMs);return new lp(e.batchId,s,n,r)}function da(t){const e=Ys(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ys(t.lastLimboFreeSnapshotVersion):ce.min();let r;return r=(function(i){return i.documents!==void 0})(t.query)?(function(i){const o=i.documents.length;return oe(o===1,1966,{count:o}),qt(So(bI(i.documents[0])))})(t.query):(function(i){return qt(CI(i))})(t.query),new or(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Xe.fromBase64String(t.resumeToken))}function OI(t,e){const n=Js(e.snapshotVersion),r=Js(e.lastLimboFreeSnapshotVersion);let s;s=Uu(e.target)?SI(t.yt,e.target):PI(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ks(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function mp(t){const e=CI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$u(e,e.limit,"L"):e}function Nh(t,e){return new fp(e.largestBatchId,$f(t.yt,e.overlayMutation))}function cy(t,e){const n=e.path.lastSegment();return[t,Ot(e.path.popLast()),n]}function uy(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Js(r.readTime),documentKey:Ot(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{getBundleMetadata(e,n){return ly(e).get(n).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:Ys(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,n){return ly(e).put((function(s){return{bundleId:s.id,createTime:Js(nt(s.createTime)),version:s.version}})(n))}getNamedQuery(e,n){return hy(e).get(n).next((r=>{if(r)return(function(i){return{name:i.name,query:mp(i.bundledQuery),readTime:Ys(i.readTime)}})(r)}))}saveNamedQuery(e,n){return hy(e).put((function(s){return{name:s.name,readTime:Js(nt(s.readTime)),bundledQuery:s.bundledQuery}})(n))}}function ly(t){return gt(t,wl)}function hy(t){return gt(t,Tl)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Cl(e,r)}getOverlay(e,n){return ta(e).get(cy(this.userId,n)).next((r=>r?Nh(this.serializer,r):null))}getOverlays(e,n){const r=Hn();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){const s=[];return r.forEach(((i,o)=>{const a=new fp(n,o);s.push(this.bt(e,a))})),O.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach((o=>s.add(Ot(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(ta(e).X(xf,a))})),O.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Hn(),i=Ot(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ta(e).H(xf,o).next((a=>{for(const c of a){const l=Nh(this.serializer,c);s.set(l.getKey(),l)}return s}))}getOverlaysForCollectionGroup(e,n,r,s){const i=Hn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ta(e).ee({index:NT,range:a},((c,l,h)=>{const f=Nh(this.serializer,l);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()})).next((()=>i))}bt(e,n){return ta(e).put((function(s,i,o){const[a,c,l]=cy(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ya(s.yt,o.mutation)}})(this.serializer,this.userId,n))}}function ta(t){return gt(t,Il)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{St(e){return gt(e,tp)}getSessionToken(e){return this.St(e).get("sessionToken").next((n=>{const r=n?.value;return r?Xe.fromUint8Array(r):Xe.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(ze(e.integerValue));else if("doubleValue"in e){const r=ze(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),$a(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=mr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(gr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?GT(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Rl(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):ne(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const s=co,i=r[s].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(ze(i)),this.Ot(s,n),this.Ct(r[s],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),Y.fromName(e).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Cs.Wt=new Cs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=255;function sk(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function fy(t){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=sk(255&r[i]);if(s+=o,o!==8)break}return s})(t);return Math.ceil(e/8)}class ik{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const s=n.codePointAt(0);this.Ht(240|s>>>18),this.Ht(128|63&s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s)}}this.Jt()}Yt(e){const n=this.en(e),r=fy(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=fy(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(wi),this.sn(255)}_n(){this.an(wi),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===wi?(this.sn(wi),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===wi?(this.an(wi),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class ok{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class ak{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class na{constructor(){this.cn=new ik,this.ascending=new ok(this.cn),this.descending=new ak(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,r,s){this.hn=e,this.Pn=n,this.Tn=r,this.In=s}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new xs(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:lu(this.Tn),directionalValue:lu(this.In),orderedDocumentKey:lu(n),documentKey:r.path.toArray()}}An(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Vr(t,e){let n=t.hn-e.hn;return n!==0?n:(n=dy(t.Tn,e.Tn),n!==0?n:(n=dy(t.In,e.In),n!==0?n:Y.comparator(t.Pn,e.Pn)))}function dy(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function lu(t){return Ww()?(function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r})(t):t}function py(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(t)}class my{constructor(e){this.Vn=new Me(((n,r)=>Ke.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=Sf(e);if(n!==void 0&&!this.pn(n))return!1;const r=As(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.pn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Vn.size>0){const a=this.Vn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.yn(a,c)||!this.wn(this.dn[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.dn.length||!this.wn(this.dn[o++],a))return!1}return!0}bn(){if(this.fn)return null;let e=new Me(Ke.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new nu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new nu(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new nu(r.field,r.dir==="asc"?0:1)));return new Mu(Mu.UNKNOWN_ID,this.collectionId,n,ja.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t){if(oe(t instanceof Ie||t instanceof Oe,20012),t instanceof Ie){if(t instanceof eI){const n=t.value.arrayValue?.values?.map((r=>Ie.create(t.field,"==",r)))||[];return Oe.create(n,"or")}return t}const e=t.filters.map((n=>MI(n)));return Oe.create(e,t.op)}function ck(t){if(t.getFilters().length===0)return[];const e=Gf(MI(t));return oe(LI(e),7391),qf(e)||Hf(e)?[e]:e.getFilters()}function qf(t){return t instanceof Ie}function Hf(t){return t instanceof Oe&&ip(t)}function LI(t){return qf(t)||Hf(t)||(function(n){if(n instanceof Oe&&Of(n)){for(const r of n.getFilters())if(!qf(r)&&!Hf(r))return!1;return!0}return!1})(t)}function Gf(t){if(oe(t instanceof Ie||t instanceof Oe,34018),t instanceof Ie)return t;if(t.filters.length===1)return Gf(t.filters[0]);const e=t.filters.map((r=>Gf(r)));let n=Oe.create(e,t.op);return n=Hu(n),LI(n)?n:(oe(n instanceof Oe,64498),oe(lo(n),40251),oe(n.filters.length>1,57927),n.filters.reduce(((r,s)=>gp(r,s))))}function gp(t,e){let n;return oe(t instanceof Ie||t instanceof Oe,38388),oe(e instanceof Ie||e instanceof Oe,25473),n=t instanceof Ie?e instanceof Ie?(function(s,i){return Oe.create([s,i],"and")})(t,e):gy(t,e):e instanceof Ie?gy(e,t):(function(s,i){if(oe(s.filters.length>0&&i.filters.length>0,48005),lo(s)&&lo(i))return YT(s,i.getFilters());const o=Of(s)?s:i,a=Of(s)?i:s,c=o.filters.map((l=>gp(l,a)));return Oe.create(c,"or")})(t,e),Hu(n)}function gy(t,e){if(lo(e))return YT(e,t.getFilters());{const n=e.filters.map((r=>gp(t,r)));return Oe.create(n,"or")}}function Hu(t){if(oe(t instanceof Ie||t instanceof Oe,11850),t instanceof Ie)return t;const e=t.getFilters();if(e.length===1)return Hu(e[0]);if(QT(t))return t;const n=e.map((s=>Hu(s))),r=[];return n.forEach((s=>{s instanceof Ie?r.push(s):s instanceof Oe&&(s.op===t.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Oe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.Sn=new _p}addToCollectionParentIndex(e,n){return this.Sn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(ln.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(ln.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class _p{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Me(we.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Me(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="IndexedDbIndexManager",zc=new Uint8Array(0);class lk{constructor(e,n){this.databaseId=n,this.Dn=new _p,this.Cn=new Er((r=>Ks(r)),((r,s)=>fc(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener((()=>{this.Dn.add(n)}));const i={collectionId:r,parent:Ot(s)};return yy(e).put(i)}return O.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[yT(n),""],!1,!0);return yy(e).H(s).next((i=>{for(const o of i){if(o.collectionId!==n)break;r.push(qn(o.parent))}return r}))}addFieldIndex(e,n){const r=ra(e),s=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Ii(e);return i.next((a=>{o.put(uy(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return i.next()}deleteFieldIndex(e,n){const r=ra(e),s=Ii(e),i=Ti(e);return r.delete(n.indexId).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=ra(e),r=Ti(e),s=Ii(e);return n.X().next((()=>r.X())).next((()=>s.X()))}createTargetIndexes(e,n){return O.forEach(this.vn(n),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new my(r).bn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,n){const r=Ti(e);let s=!0;const i=new Map;return O.forEach(this.vn(n),(o=>this.Fn(e,o).next((a=>{s&&(s=!!a),i.set(o,a)})))).next((()=>{if(s){let o=_e();const a=[];return O.forEach(i,((c,l)=>{G(_y,`Using index ${(function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map((x=>`${x.fieldPath}:${x.kind}`)).join(",")}`})(c)} to execute ${Ks(n)}`);const h=(function(E,x){const N=Sf(x);if(N===void 0)return null;for(const U of ju(E,N.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null})(l,c),f=(function(E,x){const N=new Map;for(const U of As(x))for(const I of ju(E,U.fieldPath))switch(I.op){case"==":case"in":N.set(U.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return N.set(U.fieldPath.canonicalString(),I.value),Array.from(N.values())}return null})(l,c),p=(function(E,x){const N=[];let U=!0;for(const I of As(x)){const T=I.kind===0?Q_(E,I.fieldPath,E.startAt):J_(E,I.fieldPath,E.startAt);N.push(T.value),U&&(U=T.inclusive)}return new rs(N,U)})(l,c),m=(function(E,x){const N=[];let U=!0;for(const I of As(x)){const T=I.kind===0?J_(E,I.fieldPath,E.endAt):Q_(E,I.fieldPath,E.endAt);N.push(T.value),U&&(U=T.inclusive)}return new rs(N,U)})(l,c),_=this.Mn(c,l,p),y=this.Mn(c,l,m),C=this.xn(c,l,f),k=this.On(c.indexId,h,_,p.inclusive,y,m.inclusive,C);return O.forEach(k,(D=>r.Z(D,n.limit).next((E=>{E.forEach((x=>{const N=Y.fromSegments(x.documentKey);o.has(N)||(o=o.add(N),a.push(N))}))}))))})).next((()=>a))}return O.resolve(null)}))}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=ck(Oe.create(e.filters,"and")).map((r=>Lf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,n),n)}On(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),l=c/(n!=null?n.length:1),h=[];for(let f=0;f<c;++f){const p=n?this.Nn(n[f/l]):zc,m=this.Bn(e,p,r[f%l],s),_=this.Ln(e,p,i[f%l],o),y=a.map((C=>this.Bn(e,p,C,!0)));h.push(...this.createRange(m,_,y))}return h}Bn(e,n,r,s){const i=new xs(e,Y.empty(),n,r);return s?i:i.En()}Ln(e,n,r,s){const i=new xs(e,Y.empty(),n,r);return s?i.En():i}Fn(e,n){const r=new my(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let o=null;for(const a of i)r.gn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const s=this.vn(n);return O.forEach(s,(i=>this.Fn(e,i).next((o=>{o?r!==0&&o.fields.length<(function(c){let l=new Me(Ke.comparator),h=!1;for(const f of c.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:l=l.add(p.field));for(const f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(h?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&s.length>1&&r===2?1:r))}kn(e,n){const r=new na;for(const s of As(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.ln(s.kind);Cs.Wt.Dt(i,o)}return r.un()}Nn(e){const n=new na;return Cs.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new na;return Cs.Wt.Dt(zs(this.databaseId,n),r.ln((function(i){const o=As(i);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}xn(e,n,r){if(r===null)return[];let s=[];s.push(new na);let i=0;for(const o of As(e)){const a=r[i++];for(const c of s)if(this.qn(n,o.fieldPath)&&Wa(a))s=this.Un(s,o,a);else{const l=c.ln(o.kind);Cs.Wt.Dt(a,l)}}return this.$n(s)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new na;c.seed(a.un()),Cs.Wt.Dt(o,c.ln(n.kind)),i.push(c)}return i}qn(e,n){return!!e.filters.find((r=>r instanceof Ie&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=ra(e),s=Ii(e);return(n?r.H(Cf,IDBKeyRange.bound(n,n)):r.H()).next((i=>{const o=[];return O.forEach(i,(a=>s.get([a.indexId,this.uid]).next((c=>{o.push((function(h,f){const p=f?new ja(f.sequenceNumber,new ln(Ys(f.readTime),new Y(qn(f.documentKey)),f.largestBatchId)):ja.empty(),m=h.fields.map((([_,y])=>new nu(Ke.fromServerFormat(_),y)));return new Mu(h.indexId,h.collectionGroup,m,p)})(a,c))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ge(r.collectionGroup,s.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const s=ra(e),i=Ii(e);return this.Wn(e).next((o=>s.H(Cf,IDBKeyRange.bound(n,n)).next((a=>O.forEach(a,(c=>i.put(uy(c.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,((s,i)=>{const o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((a=>(r.set(s.collectionGroup,a),O.forEach(a,(c=>this.Qn(e,s,c).next((l=>{const h=this.Gn(i,c);return l.isEqual(h)?O.resolve():this.zn(e,i,c,l,h)})))))))}))}jn(e,n,r,s){return Ti(e).put(s.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,s){return Ti(e).delete(s.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const s=Ti(e);let i=new Me(Vr);return s.ee({index:DT,range:IDBKeyRange.only([r.indexId,this.uid,lu(this.Kn(r,n))])},((o,a)=>{i=i.add(new xs(r.indexId,n,py(a.arrayValue),py(a.directionalValue)))})).next((()=>i))}Gn(e,n){let r=new Me(Vr);const s=this.kn(n,e);if(s==null)return r;const i=Sf(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Wa(o))for(const a of o.arrayValue.values||[])r=r.add(new xs(n.indexId,e.key,this.Nn(a),s))}else r=r.add(new xs(n.indexId,e.key,zc,s));return r}zn(e,n,r,s,i){G(_y,"Updating index entries for document '%s'",n.key);const o=[];return(function(c,l,h,f,p){const m=c.getIterator(),_=l.getIterator();let y=Ei(m),C=Ei(_);for(;y||C;){let k=!1,D=!1;if(y&&C){const E=h(y,C);E<0?D=!0:E>0&&(k=!0)}else y!=null?D=!0:k=!0;k?(f(C),C=Ei(_)):D?(p(y),y=Ei(m)):(y=Ei(m),C=Ei(_))}})(s,i,Vr,(a=>{o.push(this.jn(e,n,r,a))}),(a=>{o.push(this.Hn(e,n,r,a))})),O.waitFor(o)}Wn(e){let n=1;return Ii(e).ee({index:VT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),n=s.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>Vr(o,a))).filter(((o,a,c)=>!a||Vr(o,c[a-1])!==0));const s=[];s.push(e);for(const o of r){const a=Vr(o,e),c=Vr(o,n);if(a===0)s[0]=e.En();else if(a>0&&c<0)s.push(o),s.push(o.En());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Jn(s[o],s[o+1]))return[];const a=s[o].An(this.uid,zc,Y.empty()),c=s[o+1].An(this.uid,zc,Y.empty());i.push(IDBKeyRange.bound(a,c))}return i}Jn(e,n){return Vr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(vy)}getMinOffset(e,n){return O.mapArray(this.vn(n),(r=>this.Fn(e,r).next((s=>s||ne(44426))))).next(vy)}}function yy(t){return gt(t,Ga)}function Ti(t){return gt(t,Aa)}function ra(t){return gt(t,ep)}function Ii(t){return gt(t,ba)}function vy(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Yd(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new ln(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FI=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e,n){const r=t.store(En),s=t.store(so),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.ee({range:o},((h,f,p)=>(a++,p.delete())));i.push(c.next((()=>{oe(a===1,47070,{batchId:n.batchId})})));const l=[];for(const h of n.mutations){const f=PT(e,h.key.path,n.batchId);i.push(s.delete(f)),l.push(h.key)}return O.waitFor(i).next((()=>l))}function Gu(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(FI,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);class xl{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Zn={}}static wt(e,n,r,s){oe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new xl(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dr(e).ee({index:Ns,range:r},((s,i,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,s){const i=Vi(e),o=Dr(e);return o.add({}).next((a=>{oe(typeof a=="number",49019);const c=new lp(a,n,r,s),l=(function(m,_,y){const C=y.baseMutations.map((D=>Ya(m.yt,D))),k=y.mutations.map((D=>Ya(m.yt,D)));return{userId:_,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:C,mutations:k}})(this.serializer,this.userId,c),h=[];let f=new Me(((p,m)=>ge(p.canonicalString(),m.canonicalString())));for(const p of s){const m=PT(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(i.put(m,BD))}return f.forEach((p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))})),e.addOnCommittedListener((()=>{this.Zn[a]=c.keys()})),O.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return Dr(e).get(n).next((r=>r?(oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ps(this.serializer,r)):null))}Xn(e,n){return this.Zn[n]?O.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const s=r.keys();return this.Zn[n]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Dr(e).ee({index:Ns,range:s},((o,a,c)=>{a.userId===this.userId&&(oe(a.batchId>=r,47524,{Yn:r}),i=Ps(this.serializer,a)),c.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Qr;return Dr(e).ee({index:Ns,range:n,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Qr],[this.userId,Number.POSITIVE_INFINITY]);return Dr(e).H(Ns,n).next((r=>r.map((s=>Ps(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=ru(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Vi(e).ee({range:s},((o,a,c)=>{const[l,h,f]=o,p=qn(h);if(l===this.userId&&n.path.isEqual(p))return Dr(e).get(f).next((m=>{if(!m)throw ne(61480,{er:o,batchId:f});oe(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:f}),i.push(Ps(this.serializer,m))}));c.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(ge);const s=[];return n.forEach((i=>{const o=ru(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Vi(e).ee({range:a},((l,h,f)=>{const[p,m,_]=l,y=qn(m);p===this.userId&&i.path.isEqual(y)?r=r.add(_):f.done()}));s.push(c)})),O.waitFor(s).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=ru(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Me(ge);return Vi(e).ee({range:o},((c,l,h)=>{const[f,p,m]=c,_=qn(p);f===this.userId&&r.isPrefixOf(_)?_.length===s&&(a=a.add(m)):h.done()})).next((()=>this.tr(e,a)))}tr(e,n){const r=[],s=[];return n.forEach((i=>{s.push(Dr(e).get(i).next((o=>{if(o===null)throw ne(35274,{batchId:i});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Ps(this.serializer,o))})))})),O.waitFor(s).next((()=>r))}removeMutationBatch(e,n){return BI(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.nr(n.batchId)})),O.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return Vi(e).ee({range:r},((i,o,a)=>{if(i[0]===this.userId){const c=qn(i[1]);s.push(c)}else a.done()})).next((()=>{oe(s.length===0,56720,{rr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,n){return UI(e,this.userId,n)}ir(e){return jI(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Qr,lastStreamToken:""}))}}function UI(t,e,n){const r=ru(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Vi(t).ee({range:i,Y:!0},((a,c,l)=>{const[h,f,p]=a;h===e&&f===s&&(o=!0),l.done()})).next((()=>o))}function Dr(t){return gt(t,En)}function Vi(t){return gt(t,so)}function jI(t){return gt(t,qa)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Xs(0)}static ar(){return new Xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next((n=>{const r=new Xs(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((n=>ce.fromTimestamp(new ke(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.ur(e).next((s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.cr(e,s))))}addTargetData(e,n){return this.lr(e,n).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>bi(e).delete(n.targetId))).next((()=>this.ur(e))).next((r=>(oe(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,n,r){let s=0;const i=[];return bi(e).ee(((o,a)=>{const c=da(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))})).next((()=>O.waitFor(i))).next((()=>s))}forEachTarget(e,n){return bi(e).ee(((r,s)=>{const i=da(s);n(i)}))}ur(e){return wy(e).get(Bu).next((n=>(oe(n!==null,2888),n)))}cr(e,n){return wy(e).put(Bu,n)}lr(e,n){return bi(e).put(OI(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Ks(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return bi(e).ee({range:s,index:xT},((o,a,c)=>{const l=da(a);fc(n,l.target)&&(i=l,c.done())})).next((()=>i))}addMatchingKeys(e,n,r){const s=[],i=Br(e);return n.forEach((o=>{const a=Ot(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))})),O.waitFor(s)}removeMatchingKeys(e,n,r){const s=Br(e);return O.forEach(n,(i=>{const o=Ot(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,n){const r=Br(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Br(e);let i=_e();return s.ee({range:r,Y:!0},((o,a,c)=>{const l=qn(o[1]),h=new Y(l);i=i.add(h)})).next((()=>i))}containsKey(e,n){const r=Ot(n.path),s=IDBKeyRange.bound([r],[yT(r)],!1,!0);let i=0;return Br(e).ee({index:Zd,Y:!0,range:s},(([o,a],c,l)=>{o!==0&&(i++,l.done())})).next((()=>i>0))}At(e,n){return bi(e).get(n).next((r=>r?da(r):null))}}function bi(t){return gt(t,io)}function wy(t){return gt(t,js)}function Br(t){return gt(t,oo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="LruGarbageCollector",fk=1048576;function Iy([t,e],[n,r]){const s=ge(t,n);return s===0?ge(e,r):s}class dk{constructor(e){this.Pr=e,this.buffer=new Me(Iy),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Iy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $I{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){G(Ty,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){cs(n)?G(Ty,"Ignoring IndexedDB error during garbage collection: ",n):await as(n)}await this.Ar(3e5)}))}}class pk{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Qt.ce);const r=new dk(n);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Ey)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ey):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,a,c,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s)))).next((f=>(r=f,a=Date.now(),this.removeTargets(e,r,n)))).next((f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(l=Date.now(),Si()<=be.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f}))))}}function qI(t,e){return new pk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n){this.db=e,this.garbageCollector=qI(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,((r,s)=>n(s)))}addReference(e,n,r){return Kc(e,r)}removeReference(e,n,r){return Kc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Kc(e,n)}wr(e,n){return(function(s,i){let o=!1;return jI(s).te((a=>UI(s,a,i).next((c=>(c&&(o=!0),O.resolve(!c)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.yr(e,((o,a)=>{if(a<=n){const c=this.wr(e,o).next((l=>{if(!l)return i++,r.getEntry(e,o).next((()=>(r.removeEntry(o,ce.min()),Br(e).delete((function(f){return[0,Ot(f.path)]})(o)))))}));s.push(c)}})).next((()=>O.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Kc(e,n)}yr(e,n){const r=Br(e);let s,i=Qt.ce;return r.ee({index:Zd},(([o,a],{path:c,sequenceNumber:l})=>{o===0?(i!==Qt.ce&&n(new Y(qn(s)),i),i=l,s=c):i=Qt.ce})).next((()=>{i!==Qt.ce&&n(new Y(qn(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kc(t,e){return Br(t).put((function(r,s){return{targetId:0,path:Ot(r.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.changes=new Er((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ge.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ws(e).put(r)}removeEntry(e,n,r){return ws(e).delete((function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],qu(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.br(e,r))))}getEntry(e,n){let r=Ge.newInvalidDocument(n);return ws(e).ee({index:su,range:IDBKeyRange.only(sa(n))},((s,i)=>{r=this.Sr(n,i)})).next((()=>r))}Dr(e,n){let r={size:0,document:Ge.newInvalidDocument(n)};return ws(e).ee({index:su,range:IDBKeyRange.only(sa(n))},((s,i)=>{r={document:this.Sr(n,i),size:Gu(i)}})).next((()=>r))}getEntries(e,n){let r=Yt();return this.Cr(e,n,((s,i)=>{const o=this.Sr(s,i);r=r.insert(s,o)})).next((()=>r))}vr(e,n){let r=Yt(),s=new qe(Y.comparator);return this.Cr(e,n,((i,o)=>{const a=this.Sr(i,o);r=r.insert(i,a),s=s.insert(i,Gu(o))})).next((()=>({documents:r,Fr:s})))}Cr(e,n,r){if(n.isEmpty())return O.resolve();let s=new Me(Ry);n.forEach((c=>s=s.add(c)));const i=IDBKeyRange.bound(sa(s.first()),sa(s.last())),o=s.getIterator();let a=o.getNext();return ws(e).ee({index:su,range:i},((c,l,h)=>{const f=Y.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Ry(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.j(sa(a)):h.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),qu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ws(e).H(IDBKeyRange.bound(a,c,!0)).next((l=>{i?.incrementDocumentReadCount(l.length);let h=Yt();for(const f of l){const p=this.Sr(Y.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(pc(n,p)||s.has(p.key))&&(h=h.insert(p.key,p))}return h}))}getAllFromCollectionGroup(e,n,r,s){let i=Yt();const o=Ay(n,r),a=Ay(n,ln.max());return ws(e).ee({index:CT,range:IDBKeyRange.bound(o,a,!0)},((c,l,h)=>{const f=this.Sr(Y.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);i=i.insert(f.key,f),i.size===s&&h.done()})).next((()=>i))}newChangeBuffer(e){return new _k(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return by(e).get(Pf).next((n=>(oe(!!n,20021),n)))}br(e,n){return by(e).put(Pf,n)}Sr(e,n){if(n){const r=tk(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ce.min())))return r}return Ge.newInvalidDocument(e)}}function GI(t){return new gk(t)}class _k extends HI{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new Er((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const n=[];let r=0,s=new Me(((i,o)=>ge(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.Or.get(i);if(n.push(this.Mr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=ay(this.Mr.serializer,o);s=s.add(i.path.popLast());const l=Gu(c);r+=l-a.size,n.push(this.Mr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=ay(this.Mr.serializer,o.convertToNoDocument(ce.min()));n.push(this.Mr.addEntry(e,i,c))}})),s.forEach((i=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,i))})),n.push(this.Mr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Mr.vr(e,n).next((({documents:r,Fr:s})=>(s.forEach(((i,o)=>{this.Or.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function by(t){return gt(t,Ha)}function ws(t){return gt(t,Fu)}function sa(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ay(t,e){const n=e.documentKey.path.toArray();return[t,qu(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ry(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ge(n[i],r[i]),s)return s;return s=ge(n.length,r.length),s||(s=ge(n[n.length-2],r[r.length-2]),s||ge(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Pa(r.mutation,s,Jt.empty(),ke.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,_e()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=_e()){const s=Hn();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=ha();return i.forEach(((a,c)=>{o=o.insert(a,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Hn();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,_e())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,s){let i=Yt();const o=Sa(),a=(function(){return Sa()})();return n.forEach(((c,l)=>{const h=r.get(l.key);s.has(l.key)&&(h===void 0||h.mutation instanceof wr)?i=i.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Pa(h.mutation,l,h.mutation.getFieldMask(),ke.now())):o.set(l.key,Jt.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((l,h)=>o.set(l,h))),n.forEach(((l,h)=>a.set(l,new yk(h,o.get(l)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=Sa();let s=new qe(((o,a)=>o-a)),i=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((c=>{const l=n.get(c);if(l===null)return;let h=r.get(c)||Jt.empty();h=a.applyToLocalView(l,h),r.set(c,h);const f=(s.get(a.batchId)||_e()).add(c);s=s.insert(a.batchId,f)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,h=c.value,f=aI();h.forEach((p=>{if(!i.has(p)){const m=pI(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return O.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return IN(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):op(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(Hn());let a=ro,c=i;return o.next((l=>O.forEach(l,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{c=c.insert(h,p)}))))).next((()=>this.populateOverlays(e,l,i))).next((()=>this.computeViews(e,c,l,_e()))).next((h=>({batchId:a,changes:oI(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next((r=>{let s=ha();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ha();return this.indexManager.getCollectionParents(e,i).next((a=>O.forEach(a,(c=>{const l=(function(f,p){return new vr(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r,s).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((c,l)=>{const h=l.getKey();o.get(h)===null&&(o=o.insert(h,Ge.newInvalidDocument(h)))}));let a=ha();return o.forEach(((c,l)=>{const h=i.get(c);h!==void 0&&Pa(h.mutation,l,Jt.empty(),ke.now()),pc(n,l)&&(a=a.insert(c,l))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return O.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:nt(s.createTime)}})(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(s){return{name:s.name,query:mp(s.bundledQuery),readTime:nt(s.readTime)}})(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.overlays=new qe(Y.comparator),this.Lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hn();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.bt(e,n,i)})),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=Hn(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new qe(((l,h)=>l-h));const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=i.get(l.largestBatchId);h===null&&(h=Hn(),i=i.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Hn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((l,h)=>a.set(l,h))),!(a.size()>=s)););return O.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new fp(n,r));let i=this.Lr.get(n);i===void 0&&(i=_e(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this.kr=new Me(yt.Kr),this.qr=new Me(yt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new yt(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Y(new we([])),r=new yt(n,e),s=new yt(n,e+1),i=[];return this.qr.forEachInRange([r,s],(o=>{this.Wr(o),i.push(o.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Y(new we([])),r=new yt(n,e),s=new yt(n,e+1);let i=_e();return this.qr.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new yt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Y.comparator(e.key,n.key)||ge(e.Hr,n.Hr)}static Ur(e,n){return ge(e.Hr,n.Hr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Me(yt.Kr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lp(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Jr=this.Jr.add(new yt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Qr:this.Yn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),s=new yt(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],(o=>{const a=this.Zr(o.Hr);i.push(a)})),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(ge);return n.forEach((s=>{const i=new yt(s,0),o=new yt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],(a=>{r=r.add(a.Hr)}))})),O.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new yt(new Y(i),0);let a=new Me(ge);return this.Jr.forEachWhile((c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c.Hr)),!0)}),o),O.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){oe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return O.forEach(n.mutations,(s=>{const i=new yt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new yt(n,0),s=this.Jr.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.ti=e,this.docs=(function(){return new qe(Y.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Ge.newInvalidDocument(n))}getEntries(e,n){let r=Yt();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ge.newInvalidDocument(s))})),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yt();const o=n.path,a=new Y(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Yd(IT(h),r)<=0||(s.has(h.key)||pc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ni(e,n){return O.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new bk(this)}getSize(e){return O.resolve(this.size)}}class bk extends HI{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),O.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.persistence=e,this.ri=new Er((n=>Ks(n)),fc),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.ii=0,this.si=new yp,this.targetCount=0,this.oi=Xs._r()}forEachTarget(e,n){return this.ri.forEach(((r,s)=>n(s))),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),O.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Xs(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.lr(n),O.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),O.waitFor(i).next((()=>s))}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n){this._i={},this.overlays={},this.ai=new Qt(0),this.ui=!1,this.ui=!0,this.ci=new wk,this.referenceDelegate=e(this),this.li=new Ak(this),this.indexManager=new uk,this.remoteDocumentCache=(function(s){return new Ik(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new kI(n),this.Pi=new vk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ek,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Tk(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new Rk(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((i=>this.referenceDelegate.Ii(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(e,n){return O.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class Rk extends AT{constructor(e){super(),this.currentSequenceNumber=e}}class Vl{constructor(e){this.persistence=e,this.Ri=new yp,this.Ai=null}static Vi(e){return new Vl(e)}get di(){if(this.Ai)return this.Ai;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.di.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,(r=>{const s=Y.fromPath(r);return this.mi(e,s).next((i=>{i||n.removeEntry(s,ce.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class zu{constructor(e,n){this.persistence=e,this.fi=new Er((r=>Ot(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=qI(this,n)}static Vi(e,n){return new zu(e,n)}Ti(){}Ii(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return O.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((i=>i?O.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,(o=>this.wr(e,o,n).next((a=>{a||(r++,i.removeEntry(o,ce.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ou(e.data.value)),n}wr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return O.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.serializer=e}k(e,n,r,s){const i=new El("createOrUpgrade",n);r<1&&s>=1&&((function(c){c.createObjectStore(hc)})(e),(function(c){c.createObjectStore(qa,{keyPath:FD}),c.createObjectStore(En,{keyPath:L_,autoIncrement:!0}).createIndex(Ns,F_,{unique:!0}),c.createObjectStore(so)})(e),Sy(e),(function(c){c.createObjectStore(Rs)})(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&((function(c){c.deleteObjectStore(oo),c.deleteObjectStore(io),c.deleteObjectStore(js)})(e),Sy(e)),o=o.next((()=>(function(c){const l=c.store(js),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ce.min().toTimestamp(),targetCount:0};return l.put(Bu,h)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(c,l){return l.store(En).H().next((f=>{c.deleteObjectStore(En),c.createObjectStore(En,{keyPath:L_,autoIncrement:!0}).createIndex(Ns,F_,{unique:!0});const p=l.store(En),m=f.map((_=>p.put(_)));return O.waitFor(m)}))})(e,i)))),o=o.next((()=>{(function(c){c.createObjectStore(ao,{keyPath:KD})})(e)}))),r<5&&s>=5&&(o=o.next((()=>this.gi(i)))),r<6&&s>=6&&(o=o.next((()=>((function(c){c.createObjectStore(Ha)})(e),this.pi(i))))),r<7&&s>=7&&(o=o.next((()=>this.yi(i)))),r<8&&s>=8&&(o=o.next((()=>this.wi(e,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(o=o.next((()=>this.bi(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(c){c.createObjectStore(wl,{keyPath:WD})})(e),(function(c){c.createObjectStore(Tl,{keyPath:QD})})(e)}))),r<12&&s>=12&&(o=o.next((()=>{(function(c){const l=c.createObjectStore(Il,{keyPath:nN});l.createIndex(xf,rN,{unique:!1}),l.createIndex(NT,sN,{unique:!1})})(e)}))),r<13&&s>=13&&(o=o.next((()=>(function(c){const l=c.createObjectStore(Fu,{keyPath:UD});l.createIndex(su,jD),l.createIndex(CT,$D)})(e))).next((()=>this.Si(e,i))).next((()=>e.deleteObjectStore(Rs)))),r<14&&s>=14&&(o=o.next((()=>this.Di(e,i)))),r<15&&s>=15&&(o=o.next((()=>(function(c){c.createObjectStore(ep,{keyPath:JD,autoIncrement:!0}).createIndex(Cf,YD,{unique:!1}),c.createObjectStore(ba,{keyPath:XD}).createIndex(VT,ZD,{unique:!1}),c.createObjectStore(Aa,{keyPath:eN}).createIndex(DT,tN,{unique:!1})})(e)))),r<16&&s>=16&&(o=o.next((()=>{n.objectStore(ba).clear()})).next((()=>{n.objectStore(Aa).clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(c){c.createObjectStore(tp,{keyPath:iN})})(e)}))),r<18&&s>=18&&Ww()&&(o=o.next((()=>{n.objectStore(ba).clear()})).next((()=>{n.objectStore(Aa).clear()}))),o}pi(e){let n=0;return e.store(Rs).ee(((r,s)=>{n+=Gu(s)})).next((()=>{const r={byteSize:n};return e.store(Ha).put(Pf,r)}))}gi(e){const n=e.store(qa),r=e.store(En);return n.H().next((s=>O.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,Qr],[i.userId,i.lastAcknowledgedBatchId]);return r.H(Ns,o).next((a=>O.forEach(a,(c=>{oe(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const l=Ps(this.serializer,c);return BI(e,i.userId,l).next((()=>{}))}))))}))))}yi(e){const n=e.store(oo),r=e.store(Rs);return e.store(js).get(Bu).next((s=>{const i=[];return r.ee(((o,a)=>{const c=new we(o),l=(function(f){return[0,Ot(f)]})(c);i.push(n.get(l).next((h=>h?O.resolve():(f=>n.put({targetId:0,path:Ot(f),sequenceNumber:s.highestListenSequenceNumber}))(c))))})).next((()=>O.waitFor(i)))}))}wi(e,n){e.createObjectStore(Ga,{keyPath:zD});const r=n.store(Ga),s=new _p,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Ot(c)})}};return n.store(Rs).ee({Y:!0},((o,a)=>{const c=new we(o);return i(c.popLast())})).next((()=>n.store(so).ee({Y:!0},(([o,a,c],l)=>{const h=qn(a);return i(h.popLast())}))))}bi(e){const n=e.store(io);return n.ee(((r,s)=>{const i=da(s),o=OI(this.serializer,i);return n.put(o)}))}Si(e,n){const r=n.store(Rs),s=[];return r.ee(((i,o)=>{const a=n.store(Fu),c=(function(f){return f.document?new Y(we.fromString(f.document.name).popFirst(5)):f.noDocument?Y.fromSegments(f.noDocument.path):f.unknownDocument?Y.fromSegments(f.unknownDocument.path):ne(36783)})(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(l))})).next((()=>O.waitFor(s)))}Di(e,n){const r=n.store(En),s=GI(this.serializer),i=new vp(Vl.Vi,this.serializer.yt);return r.H().next((o=>{const a=new Map;return o.forEach((c=>{let l=a.get(c.userId)??_e();Ps(this.serializer,c).keys().forEach((h=>l=l.add(h))),a.set(c.userId,l)})),O.forEach(a,((c,l)=>{const h=new vt(l),f=Cl.wt(this.serializer,h),p=i.getIndexManager(h),m=xl.wt(h,this.serializer,p,i.referenceDelegate);return new zI(s,m,f,p).recalculateAndSaveOverlaysForDocumentKeys(new Vf(n,Qt.ce),c).next()}))}))}}function Sy(t){t.createObjectStore(oo,{keyPath:HD}).createIndex(Zd,GD,{unique:!0}),t.createObjectStore(io,{keyPath:"targetId"}).createIndex(xT,qD,{unique:!0}),t.createObjectStore(js)}const Nr="IndexedDbPersistence",kh=18e5,Oh=5e3,Mh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",KI="main";class Ep{constructor(e,n,r,s,i,o,a,c,l,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=i,this.window=o,this.document=a,this.Fi=l,this.Mi=h,this.xi=f,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=p=>Promise.resolve(),!Ep.v())throw new q(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mk(this,s),this.Ki=n+KI,this.serializer=new kI(c),this.qi=new zn(this.Ki,this.xi,new Sk(this.serializer)),this.ci=new rk,this.li=new hk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=GI(this.serializer),this.Pi=new nk,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,h===!1&&et(Nr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,Mh);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Qt(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Wc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((n=>this.isPrimary&&!n?this.Ji(e).next((()=>!1)):!!n&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(cs(e))return G(Nr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G(Nr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return ia(e).get(vi).next((n=>O.resolve(this.Xi(n))))}Yi(e){return Wc(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,kh)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=gt(n,ao);return r.H().next((s=>{const i=this.ns(s,kh),o=s.filter((a=>i.indexOf(a)===-1));return O.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?O.resolve(!0):ia(e).get(vi).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Oh)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,Mh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wc(e).H().next((r=>this.ns(r,Oh).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&G(Nr,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[hc,ao],(e=>{const n=new Vf(e,Qt.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(e,n){return e.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Wc(e).H().next((n=>this.ns(n,kh).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return xl.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lk(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Cl.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){G(Nr,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(function(c){return c===18?cN:c===17?LT:c===16?aN:c===15?np:c===14?MT:c===13?OT:c===12?oN:c===11?kT:void ne(60245)})(this.xi);let o;return this.qi.runTransaction(e,s,i,(a=>(o=new Vf(a,this.ai?this.ai.next():Qt.ce),n==="readwrite-primary"?this.ji(o).next((c=>!!c||this.Hi(o))).next((c=>{if(!c)throw et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new q(F.FAILED_PRECONDITION,bT);return r(o)})).next((c=>this.Zi(o).next((()=>c)))):this.Ps(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Ps(e){return ia(e).get(vi).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Oh)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(F.FAILED_PRECONDITION,Mh)}))}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ia(e).put(vi,n)}static v(){return zn.v()}Ji(e){const n=ia(e);return n.get(vi).next((r=>this.Xi(r)?(G(Nr,"Releasing primary lease."),n.delete(vi)):O.resolve()))}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;Kw()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const n=this.Ui?.getItem(this.rs(e))!==null;return G(Nr,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return et(Nr,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){et("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ia(t){return gt(t,hc)}function Wc(t){return gt(t,ao)}function wp(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=_e(),s=_e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Tp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Kw()?8:RT(ku())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ps(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new Pk;return this.ys(e,n,o).next((a=>{if(i.result=a,this.As)return this.ws(e,n,o,a.size)}))})).next((()=>i.result))}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Si()<=be.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(Si()<=be.DEBUG&&G("QueryEngine","Query:",Pi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Si()<=be.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qt(n))):O.resolve())}gs(e,n){if(Y_(n))return O.resolve(null);let r=qt(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=$u(n,null,"F"),r=qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=_e(...i);return this.fs.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const l=this.bs(n,a);return this.Ss(n,l,o,c.readTime)?this.gs(e,$u(n,null,"F")):this.Ds(e,l,n,c)}))))})))))}ps(e,n,r,s){return Y_(n)||s.isEqual(ce.min())?O.resolve(null):this.fs.getDocuments(e,r).next((i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?O.resolve(null):(Si()<=be.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pi(n)),this.Ds(e,o,n,TT(s,ro)).next((a=>a)))}))}bs(e,n){let r=new Me(sI(e));return n.forEach(((s,i)=>{pc(e,i)&&(r=r.add(i))})),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Si()<=be.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Pi(n)),this.fs.getDocumentsMatchingQuery(e,n,ln.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="LocalStore",Ck=3e8;class xk{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new qe(ge),this.Fs=new Er((i=>Ks(i)),fc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function QI(t,e,n,r){return new xk(t,e,n,r)}async function JI(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let c=_e();for(const l of s){o.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}for(const l of i){a.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((l=>({Ns:l,removedBatchIds:o,addedBatchIds:a})))}))}))}function Vk(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,h){const f=l.batch,p=f.keys();let m=O.resolve();return p.forEach((_=>{m=m.next((()=>h.getEntry(c,_))).next((y=>{const C=l.docVersions.get(_);oe(C!==null,48541),y.version.compareTo(C)<0&&(f.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),h.addEntry(y)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(c,f)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=_e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function YI(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function Dk(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const a=[];e.targetChanges.forEach(((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.li.removeMatchingKeys(i,h.removedDocuments,f).next((()=>n.li.addMatchingKeys(i,h.addedDocuments,f))));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Xe.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(f,m),(function(y,C,k){return y.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=Ck?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(p,m,h)&&a.push(n.li.updateTargetData(i,m))}));let c=Yt(),l=_e();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(XI(i,o,e.documentUpdates).next((h=>{c=h.Bs,l=h.Ls}))),!r.isEqual(ce.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next((f=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return O.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,l))).next((()=>c))})).then((i=>(n.vs=s,i)))}function XI(t,e,n){let r=_e(),s=_e();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=Yt();return n.forEach(((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):G(Ip,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)})),{Bs:o,Ls:s}}))}function Nk(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Qr),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function mo(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.li.getTargetData(r,e).next((i=>i?(s=i,O.resolve(s)):n.li.allocateTargetId(r).next((o=>(s=new or(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function go(t,e,n){const r=Z(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!cs(o))throw o;G(Ip,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Ku(t,e,n){const r=Z(t);let s=ce.min(),i=_e();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,l,h){const f=Z(c),p=f.Fs.get(h);return p!==void 0?O.resolve(f.vs.get(p)):f.li.getTargetData(l,h)})(r,o,qt(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next((c=>{i=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:_e()))).next((a=>(tb(r,rI(e),a),{documents:a,ks:i})))))}function ZI(t,e){const n=Z(t),r=Z(n.li),s=n.vs.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(i=>r.At(i,e).next((o=>o?o.target:null))))}function eb(t,e){const n=Z(t),r=n.Ms.get(e)||ce.min();return n.persistence.runTransaction("Get new document changes","readonly",(s=>n.xs.getAllFromCollectionGroup(s,e,TT(r,ro),Number.MAX_SAFE_INTEGER))).then((s=>(tb(n,e,s),s)))}function tb(t,e,n){let r=t.Ms.get(e)||ce.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Ms.set(e,r)}async function kk(t,e,n,r){const s=Z(t);let i=_e(),o=Yt();for(const l of n){const h=e.Ks(l.metadata.name);l.document&&(i=i.add(h));const f=e.qs(l);f.setReadTime(e.Us(l.metadata.readTime)),o=o.insert(h,f)}const a=s.xs.newChangeBuffer({trackRemovals:!0}),c=await mo(s,(function(h){return qt(So(we.fromString(`__bundle__/docs/${h}`)))})(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",(l=>XI(l,a,o).next((h=>(a.apply(l),h))).next((h=>s.li.removeMatchingKeysForTargetId(l,c.targetId).next((()=>s.li.addMatchingKeys(l,i,c.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(l,h.Bs,h.Ls))).next((()=>h.Bs))))))}async function Ok(t,e,n=_e()){const r=await mo(t,qt(mp(e.bundledQuery))),s=Z(t);return s.persistence.runTransaction("Save named query","readwrite",(i=>{const o=nt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Pi.saveNamedQuery(i,e);const a=r.withResumeToken(Xe.EMPTY_BYTE_STRING,o);return s.vs=s.vs.insert(a.targetId,a),s.li.updateTargetData(i,a).next((()=>s.li.removeMatchingKeysForTargetId(i,r.targetId))).next((()=>s.li.addMatchingKeys(i,n,r.targetId))).next((()=>s.Pi.saveNamedQuery(i,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="firestore_clients";function Py(t,e){return`${nb}_${t}_${e}`}const rb="firestore_mutations";function Cy(t,e,n){let r=`${rb}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const sb="firestore_targets";function Lh(t,e){return`${sb}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="SharedClientState";class Wu{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static $s(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new q(s.error.code,s.error.message))),o?new Wu(e,n,s.state,i):(et(Un,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ca{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new q(r.error.code,r.error.message))),i?new Ca(e,r.state,s):(et(Un,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qu{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=ap();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=ST(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Qu(e,i):(et(Un,`Failed to parse client data for instance '${e}': ${n}`),null)}}class bp{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new bp(n.clientId,n.onlineState):(et(Un,`Failed to parse online state: ${e}`),null)}}class zf{constructor(){this.activeTargetIds=ap()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fh{constructor(e,n,r,s,i){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new qe(ge),this.started=!1,this.Zs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Xs=Py(this.persistenceKey,this.zs),this.Ys=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new zf),this.eo=new RegExp(`^${nb}_${o}_([^_]*)$`),this.no=new RegExp(`^${rb}_${o}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${sb}_${o}_(\\d+)$`),this.io=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.so=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const s=this.getItem(Py(this.persistenceKey,r));if(s){const i=Qu.$s(r,s);i&&(this.Js=this.Js.insert(i.clientId,i))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Lh(this.persistenceKey,e));if(s){const i=Ca.$s(e,s);i&&(r=i.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Lh(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach((s=>{this.lo(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return G(Un,"READ",e,n),n}setItem(e,n){G(Un,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){G(Un,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(G(Un,"EVENT",n.key,n.newValue),n.key===this.Xs)return void et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(i){let o=Qt.ce;if(i!=null)try{const a=JSON.parse(i);oe(typeof a=="number",30636,{yo:i}),o=a}catch(a){et(Un,"Failed to read sequence number from WebStorage",a)}return o})(n.newValue);r!==Qt.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((s=>this.syncEngine.bo(s))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const s=new Wu(this.currentUser,e,n,r),i=Cy(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Ws())}lo(e){const n=Cy(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const s=Lh(this.persistenceKey,e),i=new Ca(e,n,r);this.setItem(s,i.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return Qu.$s(r,n)}Vo(e,n){const r=this.no.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Wu.$s(new vt(i),s,n)}fo(e,n){const r=this.ro.exec(e),s=Number(r[1]);return Ca.$s(s,n)}_o(e){return bp.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);G(Un,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),s=this.uo(this.Js),i=this.uo(r),o=[],a=[];return i.forEach((c=>{s.has(c)||o.push(c)})),s.forEach((c=>{i.has(c)||a.push(c)})),this.syncEngine.Co(o,a).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=ap();return e.forEach(((r,s)=>{n=n.unionWith(s.activeTargetIds)})),n}}class ib{constructor(){this.vo=new zf,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new zf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="ConnectivityMonitor";class Vy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){G(xy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){G(xy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function Kf(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="RestConnection",Lk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Fk{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Df?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Kf(),a=this.Qo(e,n.toUriEncodedString());G(Bh,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:l}=new URL(a),h=Ud(l);return this.zo(e,a,c,r,h).then((f=>(G(Bh,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw xn(Bh,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f}))}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ro})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}Qo(e,n){const r=Lk[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection",oa=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class ji extends Fk{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ji.c_){const e=pT();oa(e,dT.STAT_EVENT,(n=>{n.stat===Af.PROXY?G(Pt,"STAT_EVENT: detected buffering proxy"):n.stat===Af.NOPROXY&&G(Pt,"STAT_EVENT: detected no buffering proxy")})),ji.c_=!0}}zo(e,n,r,s,i){const o=Kf();return new Promise(((a,c)=>{const l=new hT;l.setWithCredentials(!0),l.listenOnce(fT.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case tu.NO_ERROR:const f=l.getResponseJson();G(Pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case tu.TIMEOUT:G(Pt,`RPC '${e}' ${o} timed out`),c(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case tu.HTTP_ERROR:const p=l.getStatus();if(G(Pt,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m?.error;if(_&&_.status&&_.message){const y=(function(k){const D=k.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(D)>=0?D:F.UNKNOWN})(_.status);c(new q(y,_.message))}else c(new q(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new q(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{G(Pt,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);G(Pt,`RPC '${e}' ${o} sending request:`,s),l.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=Kf(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const l=i.join("");G(Pt,`Creating RPC '${e}' stream ${s}: ${l}`,a);const h=o.createWebChannel(l,a);this.I_(h);let f=!1,p=!1;const m=new Bk({Ho:_=>{p?G(Pt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(f||(G(Pt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),G(Pt,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},Jo:()=>h.close()});return oa(h,la.EventType.OPEN,(()=>{p||(G(Pt,`RPC '${e}' stream ${s} transport opened.`),m.i_())})),oa(h,la.EventType.CLOSE,(()=>{p||(p=!0,G(Pt,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(h))})),oa(h,la.EventType.ERROR,(_=>{p||(p=!0,xn(Pt,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),m.o_(new q(F.UNAVAILABLE,"The operation could not be completed")))})),oa(h,la.EventType.MESSAGE,(_=>{if(!p){const y=_.data[0];oe(!!y,16349);const C=y,k=C?.error||C[0]?.error;if(k){G(Pt,`RPC '${e}' stream ${s} received error:`,k);const D=k.status;let E=(function(U){const I=st[U];if(I!==void 0)return _I(I)})(D),x=k.message;D==="NOT_FOUND"&&x.includes("database")&&x.includes("does not exist")&&x.includes(this.databaseId.database)&&xn(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),E===void 0&&(E=F.INTERNAL,x="Unknown error status: "+D+" with message "+k.message),p=!0,m.o_(new q(E,x)),h.close()}else G(Pt,`RPC '${e}' stream ${s} received:`,y),m.__(y)}})),ji.u_(),setTimeout((()=>{m.s_()}),0),m}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return mT()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t){return new ji(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(){return typeof window<"u"?window:null}function hu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){return new GN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji.c_=!1;class Ap{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="PersistentStream";class ab{constructor(e,n,r,s,i,o,a,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ap(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(et(n.toString()),et("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return G(Dy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(G(Dy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jk extends ab{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=WN(this.serializer,e),r=(function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?nt(o.readTime):ce.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=jf(this.serializer),n.addTarget=(function(i,o){let a;const c=o.target;if(a=Uu(c)?{documents:SI(i,c)}:{query:PI(i,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wI(i,o.resumeToken);const l=Bf(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=po(i,o.snapshotVersion.toTimestamp());const l=Bf(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);const r=JN(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=jf(this.serializer),n.removeTarget=e,this.K_(n)}}class $k extends ab{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=QN(e.writeResults,e.commitTime),r=nt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jf(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Ya(this.serializer,r)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{}class Hk extends qk{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Wo(e,Uf(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(F.UNKNOWN,i.toString())}))}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.jo(e,Uf(n,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Gk(t,e,n,r){return new Hk(t,e,n,r)}class zk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(et(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="RemoteStore";class Kk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((o=>{r.enqueueAndForget((async()=>{ls(this)&&(G(Zs,"Restarting streams for network reachability change."),await(async function(c){const l=Z(c);l.Ea.add(4),await xo(l),l.Va.set("Unknown"),l.Ea.delete(4),await vc(l)})(this))}))})),this.Va=new zk(r,s)}}async function vc(t){if(ls(t))for(const e of t.Ra)await e(!0)}async function xo(t){for(const e of t.Ra)await e(!1)}function Dl(t,e){const n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Pp(n)?Sp(n):Do(n).O_()&&Rp(n,e))}function _o(t,e){const n=Z(t),r=Do(n);n.Ia.delete(e),r.O_()&&cb(n,e),n.Ia.size===0&&(r.O_()?r.L_():ls(n)&&n.Va.set("Unknown"))}function Rp(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Do(t).Z_(e)}function cb(t,e){t.da.$e(e),Do(t).X_(e)}function Sp(t){t.da=new jN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Do(t).start(),t.Va.ua()}function Pp(t){return ls(t)&&!Do(t).x_()&&t.Ia.size>0}function ls(t){return Z(t).Ea.size===0}function ub(t){t.da=void 0}async function Wk(t){t.Va.set("Online")}async function Qk(t){t.Ia.forEach(((e,n)=>{Rp(t,e)}))}async function Jk(t,e){ub(t),Pp(t)?(t.Va.ha(e),Sp(t)):t.Va.set("Unknown")}async function Yk(t,e,n){if(t.Va.set("Online"),e instanceof EI&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.da.removeTarget(a))})(t,e)}catch(r){G(Zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ju(t,r)}else if(e instanceof uu?t.da.Xe(e):e instanceof vI?t.da.st(e):t.da.tt(e),!n.isEqual(ce.min()))try{const r=await YI(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const a=i.da.Tt(o);return a.targetChanges.forEach(((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(l);h&&i.Ia.set(l,h.withResumeToken(c.resumeToken,o))}})),a.targetMismatches.forEach(((c,l)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Xe.EMPTY_BYTE_STRING,h.snapshotVersion)),cb(i,c);const f=new or(h.target,c,l,h.sequenceNumber);Rp(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){G(Zs,"Failed to raise snapshot:",r),await Ju(t,r)}}async function Ju(t,e,n){if(!cs(e))throw e;t.Ea.add(1),await xo(t),t.Va.set("Offline"),n||(n=()=>YI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{G(Zs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await vc(t)}))}function lb(t,e){return e().catch((n=>Ju(t,n,e)))}async function Vo(t){const e=Z(t),n=ss(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qr;for(;Xk(e);)try{const s=await Nk(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Zk(e,s)}catch(s){await Ju(e,s)}hb(e)&&fb(e)}function Xk(t){return ls(t)&&t.Ta.length<10}function Zk(t,e){t.Ta.push(e);const n=ss(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function hb(t){return ls(t)&&!ss(t).x_()&&t.Ta.length>0}function fb(t){ss(t).start()}async function eO(t){ss(t).ra()}async function tO(t){const e=ss(t);for(const n of t.Ta)e.ea(n.mutations)}async function nO(t,e,n){const r=t.Ta.shift(),s=hp.from(r,e,n);await lb(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Vo(t)}async function rO(t,e){e&&ss(t).Y_&&await(async function(r,s){if((function(o){return gI(o)&&o!==F.ABORTED})(s.code)){const i=r.Ta.shift();ss(r).B_(),await lb(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Vo(r)}})(t,e),hb(t)&&fb(t)}async function Ny(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),G(Zs,"RemoteStore received new credentials");const r=ls(n);n.Ea.add(3),await xo(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await vc(n)}async function Wf(t,e){const n=Z(t);e?(n.Ea.delete(2),await vc(n)):e||(n.Ea.add(2),await xo(n),n.Va.set("Unknown"))}function Do(t){return t.ma||(t.ma=(function(n,r,s){const i=Z(n);return i.sa(),new jk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:Wk.bind(null,t),Yo:Qk.bind(null,t),t_:Jk.bind(null,t),J_:Yk.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Pp(t)?Sp(t):t.Va.set("Unknown")):(await t.ma.stop(),ub(t))}))),t.ma}function ss(t){return t.fa||(t.fa=(function(n,r,s){const i=Z(n);return i.sa(),new $k(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:eO.bind(null,t),t_:rO.bind(null,t),ta:tO.bind(null,t),na:nO.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Vo(t)):(await t.fa.stop(),t.Ta.length>0&&(G(Zs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new At,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Cp(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function No(t,e){if(et("AsyncQueue",`${e}: ${t}`),cs(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{static emptySet(e){return new $i(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=ha(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $i)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $i;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.ga=new qe(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class yo{constructor(e,n,r,s,i,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new yo(e,n,$i.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class iO{constructor(){this.queries=Oy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=Oy(),i.forEach(((o,a)=>{for(const c of a.ba)c.onError(r)}))})(this,new q(F.ABORTED,"Firestore shutting down"))}}function Oy(){return new Er((t=>nI(t)),dc)}async function xp(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new sO,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=No(o,`Initialization of query '${Pi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Dp(n)}async function Vp(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function oO(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ba)a.Fa(s)&&(r=!0);o.wa=s}}r&&Dp(n)}function aO(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Dp(t){t.Ca.forEach((e=>{e.next()}))}var Qf,My;(My=Qf||(Qf={})).Ma="default",My.Cache="cache";class Np{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qf.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n){this.qa=e,this.byteLength=n}Ua(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this.serializer=e}Ks(e){return Kn(this.serializer,e)}qs(e){return e.metadata.exists?RI(this.serializer,e.document,!1):Ge.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return nt(e)}}class uO{constructor(e,n){this.$a=e,this.serializer=n,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=db(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const r=we.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new Ly(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Ks(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||_e()).add(i);n.set(o,a)}}return n}async ja(e){const n=await kk(e,new Ly(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const s of this.Wa)await Ok(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:n}}}function db(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.key=e}}class mb{constructor(e){this.key=e}}class gb{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=_e(),this.mutatedKeys=_e(),this.eu=sI(e),this.tu=new $i(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new ky,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,f)=>{const p=s.get(h),m=pc(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let C=!1;p&&m?p.data.isEqual(m.data)?_!==y&&(r.track({type:3,doc:m}),C=!0):this.su(p,m)||(r.track({type:2,doc:m}),C=!0,(c&&this.eu(m,c)>0||l&&this.eu(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),C=!0):p&&!m&&(r.track({type:1,doc:p}),C=!0,(c||l)&&(a=!0)),C&&(m?(o=o.add(m),i=y?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(m,_){const y=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:C})}};return y(m)-y(_)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,l=c!==this.Xa;return this.Xa=c,o.length!==0||l?{snapshot:new yo(this.query,e.tu,i,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ky,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=_e(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new mb(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new pb(r))})),n}cu(e){this.Za=e.ks,this.Ya=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return yo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const hs="SyncEngine";class lO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hO{constructor(e){this.key=e,this.hu=!1}}class fO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Er((a=>nI(a)),dc),this.Iu=new Map,this.Eu=new Set,this.Ru=new qe(Y.comparator),this.Au=new Map,this.Vu=new yp,this.du={},this.mu=new Map,this.fu=Xs.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dO(t,e,n=!0){const r=Nl(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await _b(r,e,n,!0),s}async function pO(t,e){const n=Nl(t);await _b(n,e,!0,!1)}async function _b(t,e,n,r){const s=await mo(t.localStore,qt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await kp(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Dl(t.remoteStore,s),a}async function kp(t,e,n,r,s){t.pu=(f,p,m)=>(async function(y,C,k,D){let E=C.view.ru(k);E.Ss&&(E=await Ku(y.localStore,C.query,!1).then((({documents:I})=>C.view.ru(I,E))));const x=D&&D.targetChanges.get(C.targetId),N=D&&D.targetMismatches.get(C.targetId)!=null,U=C.view.applyChanges(E,y.isPrimaryClient,x,N);return Jf(y,C.targetId,U.au),U.snapshot})(t,f,p,m);const i=await Ku(t.localStore,e,!0),o=new gb(e,i.ks),a=o.ru(i.documents),c=_c.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),l=o.applyChanges(a,t.isPrimaryClient,c);Jf(t,n,l.au);const h=new lO(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function mO(t,e,n){const r=Z(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!dc(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await go(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_o(r.remoteStore,s.targetId),vo(r,s.targetId)})).catch(as)):(vo(r,s.targetId),await go(r.localStore,s.targetId,!0))}async function gO(t,e){const n=Z(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_o(n.remoteStore,r.targetId))}async function _O(t,e,n){const r=Fp(t);try{const s=await(function(o,a){const c=Z(o),l=ke.now(),h=a.reduce(((m,_)=>m.add(_.key)),_e());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let _=Yt(),y=_e();return c.xs.getEntries(m,h).next((C=>{_=C,_.forEach(((k,D)=>{D.isValidDocument()||(y=y.add(k))}))})).next((()=>c.localDocuments.getOverlayedDocuments(m,_))).next((C=>{f=C;const k=[];for(const D of a){const E=FN(D,f.get(D.key).overlayedDocument);E!=null&&k.push(new wr(D.key,E,KT(E.value.mapValue),We.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,k,a)})).next((C=>{p=C;const k=C.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(m,C.batchId,k)}))})).then((()=>({batchId:p.batchId,changes:oI(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,c){let l=o.du[o.currentUser.toKey()];l||(l=new qe(ge)),l=l.insert(a,c),o.du[o.currentUser.toKey()]=l})(r,s.batchId,n),await Tr(r,s.changes),await Vo(r.remoteStore)}catch(s){const i=No(s,"Failed to persist write");n.reject(i)}}async function yb(t,e){const n=Z(t);try{const r=await Dk(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?oe(o.hu,14607):s.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))})),await Tr(n,r,e)}catch(r){await as(r)}}function Fy(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const c=Z(o);c.onlineState=a;let l=!1;c.queries.forEach(((h,f)=>{for(const p of f.ba)p.va(a)&&(l=!0)})),l&&Dp(c)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yO(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new qe(Y.comparator);o=o.insert(i,Ge.newNoDocument(i,ce.min()));const a=_e().add(i),c=new gc(ce.min(),new Map,new qe(ge),o,a);await yb(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),Lp(r)}else await go(r.localStore,e,!1).then((()=>vo(r,e,n))).catch(as)}async function vO(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await Vk(n.localStore,e);Mp(n,r,null),Op(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tr(n,s)}catch(s){await as(s)}}async function EO(t,e,n){const r=Z(t);try{const s=await(function(o,a){const c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next((f=>(oe(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(l,f)))).next((()=>c.mutationQueue.performConsistencyCheck(l))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h))).next((()=>c.localDocuments.getDocuments(l,h)))}))})(r.localStore,e);Mp(r,e,n),Op(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Tr(r,s)}catch(s){await as(s)}}async function wO(t,e){const n=Z(t);ls(n.remoteStore)||G(hs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(o){const a=Z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c)))})(n.localStore);if(r===Qr)return void e.resolve();const s=n.mu.get(r)||[];s.push(e),n.mu.set(r,s)}catch(r){const s=No(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Op(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Mp(t,e,n){const r=Z(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function vo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||vb(t,r)}))}function vb(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(_o(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Lp(t))}function Jf(t,e,n){for(const r of n)r instanceof pb?(t.Vu.addReference(r.key,e),TO(t,r)):r instanceof mb?(G(hs,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||vb(t,r.key)):ne(19791,{wu:r})}function TO(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(G(hs,"New document in limbo: "+n),t.Eu.add(r),Lp(t))}function Lp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(we.fromString(e)),r=t.fu.next();t.Au.set(r,new hO(n)),t.Ru=t.Ru.insert(n,r),Dl(t.remoteStore,new or(qt(So(n.path)),r,"TargetPurposeLimboResolution",Qt.ce))}}async function Tr(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,c)=>{o.push(r.pu(c,e,n).then((l=>{if((l||n)&&r.isPrimaryClient){const h=l?!l.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){s.push(l);const h=Tp.Es(c.targetId,l);i.push(h)}})))})),await Promise.all(o),r.Pu.J_(s),await(async function(c,l){const h=Z(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>O.forEach(l,(p=>O.forEach(p.Ts,(m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m))).next((()=>O.forEach(p.Is,(m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))))))}catch(f){if(!cs(f))throw f;G(Ip,"Failed to update sequence numbers: "+f)}for(const f of l){const p=f.targetId;if(!f.fromCache){const m=h.vs.get(p),_=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(_);h.vs=h.vs.insert(p,y)}}})(r.localStore,i))}async function IO(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){G(hs,"User change. New user:",e.toKey());const r=await JI(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((c=>{c.reject(new q(F.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tr(n,r.Ns)}}function bO(t,e){const n=Z(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let s=_e();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function AO(t,e){const n=Z(t),r=await Ku(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Jf(n,e.targetId,s.au),s}async function RO(t,e){const n=Z(t);return eb(n.localStore,e).then((r=>Tr(n,r)))}async function SO(t,e,n,r){const s=Z(t),i=await(function(a,c){const l=Z(a),h=Z(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",(f=>h.Xn(f,c).next((p=>p?l.localDocuments.getDocuments(f,p):O.resolve(null)))))})(s.localStore,e);i!==null?(n==="pending"?await Vo(s.remoteStore):n==="acknowledged"||n==="rejected"?(Mp(s,e,r||null),Op(s,e),(function(a,c){Z(Z(a).mutationQueue).nr(c)})(s.localStore,e)):ne(6720,"Unknown batchState",{bu:n}),await Tr(s,i)):G(hs,"Cannot apply mutation batch with id: "+e)}async function PO(t,e){const n=Z(t);if(Nl(n),Fp(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await By(n,r.toArray());n.gu=!0,await Wf(n.remoteStore,!0);for(const i of s)Dl(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach(((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>(vo(n,o),go(n.localStore,o,!0)))),_o(n.remoteStore,o)})),await s,await By(n,r),(function(o){const a=Z(o);a.Au.forEach(((c,l)=>{_o(a.remoteStore,l)})),a.Vu.zr(),a.Au=new Map,a.Ru=new qe(Y.comparator)})(n),n.gu=!1,await Wf(n.remoteStore,!1)}}async function By(t,e,n){const r=Z(t),s=[],i=[];for(const o of e){let a;const c=r.Iu.get(o);if(c&&c.length!==0){a=await mo(r.localStore,qt(c[0]));for(const l of c){const h=r.Tu.get(l),f=await AO(r,h);f.snapshot&&i.push(f.snapshot)}}else{const l=await ZI(r.localStore,o);a=await mo(r.localStore,l),await kp(r,Eb(l),o,!1,a.resumeToken)}s.push(a)}return r.Pu.J_(i),s}function Eb(t){return tI(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function CO(t){return(function(n){return Z(Z(n).persistence).hs()})(Z(t).localStore)}async function xO(t,e,n,r){const s=Z(t);if(s.gu)return void G(hs,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await eb(s.localStore,rI(i[0])),a=gc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Xe.EMPTY_BYTE_STRING);await Tr(s,o,a);break}case"rejected":await go(s.localStore,e,!0),vo(s,e,r);break;default:ne(64155,n)}}async function VO(t,e,n){const r=Nl(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){G(hs,"Adding an already active target "+s);continue}const i=await ZI(r.localStore,s),o=await mo(r.localStore,i);await kp(r,Eb(i),o.targetId,!1,o.resumeToken),Dl(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await go(r.localStore,s,!1).then((()=>{_o(r.remoteStore,s),vo(r,s)})).catch(as)}}function Nl(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yO.bind(null,e),e.Pu.J_=oO.bind(null,e.eventManager),e.Pu.yu=aO.bind(null,e.eventManager),e}function Fp(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EO.bind(null,e),e}function DO(t,e,n){const r=Z(t);(async function(i,o,a){try{const c=await o.getMetadata();if(await(function(m,_){const y=Z(m),C=nt(_.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",(k=>y.Pi.getBundleMetadata(k,_.id))).then((k=>!!k&&k.createTime.compareTo(C)>=0))})(i.localStore,c))return await o.close(),a._completeWith((function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(db(c));const l=new uO(c,o.serializer);let h=await o.Su();for(;h;){const p=await l.Ga(h);p&&a._updateProgress(p),h=await o.Su()}const f=await l.ja(i.localStore);return await Tr(i,f.Ja,void 0),await(function(m,_){const y=Z(m);return y.persistence.runTransaction("Save bundle","readwrite",(C=>y.Pi.saveBundleMetadata(C,_)))})(i.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Ha)}catch(c){return xn(hs,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(r,e,n).then((s=>{r.sharedClientState.notifyBundleLoaded(s)}))}class Xa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return QI(this.persistence,new WI,e.initialUser,this.serializer)}Cu(e){return new vp(Vl.Vi,this.serializer)}Du(e){return new ib}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xa.provider={build:()=>new Xa};class NO extends Xa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof zu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $I(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new vp((r=>zu.Vi(r,n)),this.serializer)}}class wb extends Xa{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Fp(this.xu.syncEngine),await Vo(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return QI(this.persistence,new WI,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new $I(r,e.asyncQueue,n)}Mu(e,n){const r=new MD(n,this.persistence);return new OD(e.asyncQueue,r)}Cu(e){const n=wp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new Ep(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,ob(),hu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new ib}}class kO extends wb{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Fh&&(this.sharedClientState.syncEngine={So:SO.bind(null,n),Do:xO.bind(null,n),Co:VO.bind(null,n),hs:CO.bind(null,n),bo:RO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await PO(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=ob();if(!Fh.v(n))throw new q(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fh(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Za{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IO.bind(null,this.syncEngine),await Wf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iO})()}createDatastore(e){const n=yc(e.databaseInfo.databaseId),r=Uk(e.databaseInfo);return Gk(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,a){return new Kk(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>Fy(this.syncEngine,n,0)),(function(){return Vy.v()?new Vy:new Mk})())}createSyncEngine(e,n){return(function(s,i,o,a,c,l,h){const f=new fO(s,i,o,a,c,l);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Z(n);G(Zs,"RemoteStore shutting down."),r.Ea.add(5),await xo(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Za.provider={build:()=>new Za};function Uy(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):et("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new At,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const s=await this.Uu(r);return new cO(JSON.parse(s),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MO=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,i){const o=Z(s),a={documents:i.map((f=>Ja(o.serializer,f)))},c=await o.jo("BatchGetDocuments",o.serializer.databaseId,we.emptyPath(),a,i.length),l=new Map;c.forEach((f=>{const p=KN(o.serializer,f);l.set(p.key.toString(),p)}));const h=[];return i.forEach((f=>{const p=l.get(f.toString());oe(!!p,55234,{key:f}),h.push(p)})),h})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Co(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const s=Y.fromPath(r);this.mutations.push(new up(s,this.precondition(s)))})),await(async function(r,s){const i=Z(r),o={writes:s.map((a=>Ya(i.serializer,a)))};await i.Wo("Commit",i.serializer.databaseId,we.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ne(50498,{Gu:e.constructor.name});n=ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ce.min())?We.exists(!1):We.updateTime(n):We.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ce.min()))throw new q(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return We.updateTime(n)}return We.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new Ap(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new MO(this.datastore),n=this.Ju(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Zu(s)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const n=this.updateFunction(e);return!lc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!gI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="FirestoreClient";class FO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=vt.UNAUTHENTICATED,this.clientId=Qd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{G(is,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(G(is,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new At;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=No(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Uh(t,e){t.asyncQueue.verifyOperationInProgress(),G(is,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await JI(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function jy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Bp(t);G(is,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Ny(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Ny(e.remoteStore,s))),t._onlineComponents=e}async function Bp(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(is,"Using user provided OfflineComponentProvider");try{await Uh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;xn("Error using user provided cache. Falling back to memory cache: "+n),await Uh(t,new Xa)}}else G(is,"Using default OfflineComponentProvider"),await Uh(t,new NO(void 0));return t._offlineComponents}async function Ol(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(is,"Using user provided OnlineComponentProvider"),await jy(t,t._uninitializedComponentsProvider._online)):(G(is,"Using default OnlineComponentProvider"),await jy(t,new Za))),t._onlineComponents}function Tb(t){return Bp(t).then((e=>e.persistence))}function Up(t){return Bp(t).then((e=>e.localStore))}function Ib(t){return Ol(t).then((e=>e.remoteStore))}function jp(t){return Ol(t).then((e=>e.syncEngine))}function BO(t){return Ol(t).then((e=>e.datastore))}async function Eo(t){const e=await Ol(t),n=e.eventManager;return n.onListen=dO.bind(null,e.syncEngine),n.onUnlisten=mO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gO.bind(null,e.syncEngine),n}function UO(t){return t.asyncQueue.enqueue((async()=>{const e=await Tb(t),n=await Ib(t);return e.setNetworkEnabled(!0),(function(s){const i=Z(s);return i.Ea.delete(0),vc(i)})(n)}))}function jO(t){return t.asyncQueue.enqueue((async()=>{const e=await Tb(t),n=await Ib(t);return e.setNetworkEnabled(!1),(async function(s){const i=Z(s);i.Ea.add(0),await xo(i),i.Va.set("Offline")})(n)}))}function $O(t,e,n,r){const s=new kl(r),i=new Np(e,s,n);return t.asyncQueue.enqueueAndForget((async()=>xp(await Eo(t),i))),()=>{s.Nu(),t.asyncQueue.enqueueAndForget((async()=>Vp(await Eo(t),i)))}}function qO(t,e){const n=new At;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await(function(l,h){const f=Z(l);return f.persistence.runTransaction("read document","readonly",(p=>f.localDocuments.getDocument(p,h)))})(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new q(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=No(a,`Failed to get document '${i} from cache`);o.reject(c)}})(await Up(t),e,n))),n.promise}function bb(t,e,n={}){const r=new At;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,l){const h=new kl({next:p=>{h.Nu(),o.enqueueAndForget((()=>Vp(i,f)));const m=p.docs.has(a);!m&&p.fromCache?l.reject(new q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?l.reject(new q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new Np(So(a.path),h,{includeMetadataChanges:!0,Ka:!0});return xp(i,f)})(await Eo(t),t.asyncQueue,e,n,r))),r.promise}function HO(t,e){const n=new At;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await Ku(s,i,!0),c=new gb(i,a.ks),l=c.ru(a.documents),h=c.applyChanges(l,!1);o.resolve(h.snapshot)}catch(a){const c=No(a,`Failed to execute query '${i} against cache`);o.reject(c)}})(await Up(t),e,n))),n.promise}function Ab(t,e,n={}){const r=new At;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,l){const h=new kl({next:p=>{h.Nu(),o.enqueueAndForget((()=>Vp(i,f))),p.fromCache&&c.source==="server"?l.reject(new q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new Np(a,h,{includeMetadataChanges:!0,Ka:!0});return xp(i,f)})(await Eo(t),t.asyncQueue,e,n,r))),r.promise}function GO(t,e){const n=new At;return t.asyncQueue.enqueueAndForget((async()=>_O(await jp(t),e,n))),n.promise}function zO(t,e){const n=new kl(e);return t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.add(i),i.next()})(await Eo(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.delete(i)})(await Eo(t),n)))}}function KO(t,e,n){const r=new At;return t.asyncQueue.enqueueAndForget((async()=>{const s=await BO(t);new LO(t.asyncQueue,s,n,e,r).ju()})),r.promise}function WO(t,e,n,r){const s=(function(o,a){let c;return c=typeof o=="string"?yI().encode(o):o,(function(h,f){return new OO(h,f)})((function(h,f){if(h instanceof Uint8Array)return Uy(h,f);if(h instanceof ArrayBuffer)return Uy(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(n,yc(e));t.asyncQueue.enqueueAndForget((async()=>{DO(await jp(t),s,r)}))}function QO(t,e){return t.asyncQueue.enqueue((async()=>(function(r,s){const i=Z(r);return i.persistence.runTransaction("Get named query","readonly",(o=>i.Pi.getNamedQuery(o,s)))})(await Up(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="ComponentProvider",$y=new Map;function YO(t,e,n,r,s){return new hN(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Rb(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="firestore.googleapis.com",qy=!0;class Hy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sb,this.ssl=qy}else this.host=e.host,this.ssl=e.ssl??qy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fk)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rb(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ec{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ID;switch(r.type){case"firstParty":return new SD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=$y.get(n);r&&(G(JO,"Removing Datastore"),$y.delete(n),r.terminate())})(this),Promise.resolve()}}function XO(t,e,n,r={}){t=Se(t,Ec);const s=Ud(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(B1(`https://${a}`),q1("Firestore",!0)),i.host!==Sb&&i.host!==a&&xn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:a,ssl:s,emulatorOptions:r};if(!Xi(c,o)&&(t._setSettings(c),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=vt.MOCK_USER;else{l=U1(r.mockUserToken,t._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new vt(f)}t._authCredentials=new bD(new _T(l,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=class Pb{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pb(this.firestore,e,this._query)}},$e=class pa{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pa(this.firestore,e,this._key)}toJSON(){return{type:pa._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(uc(n,pa._jsonSchema))return new pa(e,r||null,new Y(we.fromString(n.referencePath)))}};$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:ot("string",$e._jsonSchemaVersion),referencePath:ot("string")};let Jr=class Cb extends Ht{constructor(e,n,r){super(e,n,So(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new Y(e))}withConverter(e){return new Cb(this.firestore,e,this._path)}};function xb(t,e,...n){if(t=ct(t),Jd("collection","path",e),t instanceof Ec){const r=we.fromString(e,...n);return D_(r),new Jr(t,null,r)}{if(!(t instanceof $e||t instanceof Jr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return D_(r),new Jr(t.firestore,null,r)}}function ZO(t,e){if(t=Se(t,Ec),Jd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ht(t,null,(function(r){return new vr(we.emptyPath(),r)})(e))}function Yu(t,e,...n){if(t=ct(t),arguments.length===1&&(e=Qd.newId()),Jd("doc","path",e),t instanceof Ec){const r=we.fromString(e,...n);return V_(r),new $e(t,null,new Y(r))}{if(!(t instanceof $e||t instanceof Jr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return V_(r),new $e(t.firestore,t instanceof Jr?t.converter:null,new Y(r))}}function Vb(t,e){return t=ct(t),e=ct(e),(t instanceof $e||t instanceof Jr)&&(e instanceof $e||e instanceof Jr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Db(t,e){return t=ct(t),e=ct(e),t instanceof Ht&&e instanceof Ht&&t.firestore===e.firestore&&dc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="AsyncQueue";class zy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ap(this,"async_queue_retry"),this._c=()=>{const r=hu();r&&G(Gy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=hu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=hu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new At;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!cs(e))throw e;G(Gy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,et("INTERNAL UNHANDLED ERROR: ",Ky(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Cp.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:Ky(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ky(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(){this._progressObserver={},this._taskCompletionResolver=new At,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=-1;let rt=class extends Ec{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new zy,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zy(e),this._firestoreClient=void 0,await e}}};function Mt(t){if(t._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Nb(t),t._firestoreClient}function Nb(t){const e=t._freezeSettings(),n=YO(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new FO(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}function nM(t,e){xn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return kb(t,Za.provider,{build:r=>new wb(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function rM(t){xn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();kb(t,Za.provider,{build:n=>new kO(n,e.cacheSizeBytes)})}function kb(t,e,n){if((t=Se(t,rt))._firestoreClient||t._terminated)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new q(F.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Nb(t)}function sM(t){if(t._initialized&&!t._terminated)throw new q(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new At;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!zn.v())return Promise.resolve();const s=r+KI;await zn.delete(s)})(wp(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function iM(t){return(function(n){const r=new At;return n.asyncQueue.enqueueAndForget((async()=>wO(await jp(n),r))),r.promise})(Mt(t=Se(t,rt)))}function oM(t){return UO(Mt(t=Se(t,rt)))}function aM(t){return jO(Mt(t=Se(t,rt)))}function cM(t,e){const n=Mt(t=Se(t,rt)),r=new eM;return WO(n,t._databaseId,e,r),r}function uM(t,e){return QO(Mt(t=Se(t,rt)),e).then((n=>n?new Ht(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dt(Xe.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dt(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uc(e,Dt._jsonSchema))return Dt.fromBase64String(e.bytes)}}Dt._jsonSchemaVersion="firestore/bytes/1.0",Dt._jsonSchema={type:ot("string",Dt._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ai=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:In._jsonSchemaVersion}}static fromJSON(e){if(uc(e,In._jsonSchema))return new In(e.latitude,e.longitude)}}In._jsonSchemaVersion="firestore/geoPoint/1.0",In._jsonSchema={type:ot("string",In._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uc(e,bn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new bn(e.vectorValues);throw new q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bn._jsonSchemaVersion="firestore/vectorValue/1.0",bn._jsonSchema={type:ot("string",bn._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=/^__.*__$/;class hM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Po(e,this.data,n,this.fieldTransforms)}}class Ob{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Mb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{dataSource:t})}}class Ml{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ml({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Xu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Mb(this.dataSource)&&lM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class fM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yc(e)}createContext(e,n,r,s=!1){return new Ml({dataSource:e,methodName:n,targetDoc:r,path:Ke.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ci(t){const e=t._freezeSettings(),n=yc(t._databaseId);return new fM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ll(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);Wp("Data must be an object, but it was:",o,r);const a=Bb(r,o);let c,l;if(i.merge)c=new Jt(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=ti(e,f,n);if(!o.contains(p))throw new q(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);$b(h,p)||h.push(p)}c=new Jt(h),l=o.fieldTransforms.filter((f=>c.covers(f.field)))}else c=null,l=o.fieldTransforms;return new hM(new It(a),c,l)}class wc extends ai{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wc}}function Lb(t,e,n){return new Ml({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class $p extends ai{_toFieldTransform(e){return new mc(e.path,new ho)}isEqual(e){return e instanceof $p}}class qp extends ai{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=Lb(this,e,!0),r=this.Ac.map((i=>ui(i,n))),s=new Ws(r);return new mc(e.path,s)}isEqual(e){return e instanceof qp&&Xi(this.Ac,e.Ac)}}class Hp extends ai{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=Lb(this,e,!0),r=this.Ac.map((i=>ui(i,n))),s=new Qs(r);return new mc(e.path,s)}isEqual(e){return e instanceof Hp&&Xi(this.Ac,e.Ac)}}class Gp extends ai{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new fo(e.serializer,uI(e.serializer,this.Vc));return new mc(e.path,n)}isEqual(e){return e instanceof Gp&&this.Vc===e.Vc}}function zp(t,e,n,r){const s=t.createContext(1,e,n);Wp("Data must be an object, but it was:",s,r);const i=[],o=It.empty();us(r,((c,l)=>{const h=jb(e,c,n);l=ct(l);const f=s.childContextForFieldPath(h);if(l instanceof wc)i.push(h);else{const p=ui(l,f);p!=null&&(i.push(h),o.set(h,p))}}));const a=new Jt(i);return new Ob(o,a,s.fieldTransforms)}function Kp(t,e,n,r,s,i){const o=t.createContext(1,e,n),a=[ti(e,r,n)],c=[s];if(i.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(ti(e,i[p])),c.push(i[p+1]);const l=[],h=It.empty();for(let p=a.length-1;p>=0;--p)if(!$b(l,a[p])){const m=a[p];let _=c[p];_=ct(_);const y=o.childContextForFieldPath(m);if(_ instanceof wc)l.push(m);else{const C=ui(_,y);C!=null&&(l.push(m),h.set(m,C))}}const f=new Jt(l);return new Ob(h,f,o.fieldTransforms)}function Fb(t,e,n,r=!1){return ui(n,t.createContext(r?4:3,e))}function ui(t,e){if(Ub(t=ct(t)))return Wp("Unsupported field value:",e,t),Bb(t,e);if(t instanceof ai)return(function(r,s){if(!Mb(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let c=ui(a,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:po(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:po(s.serializer,i)}}if(r instanceof In)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dt)return{bytesValue:wI(s.serializer,r._byteString)};if(r instanceof $e){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof bn)return(function(o,a){const c=o instanceof bn?o.toArray():o;return{mapValue:{fields:{[rp]:{stringValue:sp},[co]:{arrayValue:{values:c.map((h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return cp(a.serializer,h)}))}}}}}})(r,s);if(NI(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${vl(r)}`)})(t,e)}function Bb(t,e){const n={};return FT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(t,((r,s)=>{const i=ui(s,e.childContextForField(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Ub(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof In||t instanceof Dt||t instanceof $e||t instanceof ai||t instanceof bn||NI(t))}function Wp(t,e,n){if(!Ub(n)||!ET(n)){const r=vl(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function ti(t,e,n){if((e=ct(e))instanceof ei)return e._internalPath;if(typeof e=="string")return jb(t,e);throw Xu("Field path arguments must be of type string or ",t,!1,void 0,n)}const dM=new RegExp("[~\\*/\\[\\]]");function jb(t,e,n){if(e.search(dM)>=0)throw Xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ei(...e.split("."))._internalPath}catch{throw Xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(F.INVALID_ARGUMENT,a+t+c)}function $b(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{convertValue(e,n="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return us(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[co].arrayValue?.values?.map((r=>ze(r.doubleValue)));return new bn(n)}convertGeoPoint(e){return new In(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Al(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(za(e));default:return null}}convertTimestamp(e){const n=mr(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);oe(DI(r),9688,{name:e});const s=new es(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||et(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Qp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(){return new wc("deleteField")}function mM(){return new $p("serverTimestamp")}function gM(...t){return new qp("arrayUnion",t)}function _M(...t){return new Hp("arrayRemove",t)}function yM(t){return new Gp("increment",t)}const Wy="@firebase/firestore",Qy="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(ti("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vM extends ec{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jp{}class Tc extends Jp{}function kr(t,e,...n){let r=[];e instanceof Jp&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((c=>c instanceof Yp)).length,a=i.filter((c=>c instanceof Fl)).length;if(o>1||o>0&&a>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Fl extends Tc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fl(e,n,r)}_apply(e){const n=this._parse(e);return Gb(e._query,n),new Ht(e.firestore,e.converter,Ff(e._query,n))}_parse(e){const n=ci(e.firestore);return(function(i,o,a,c,l,h,f){let p;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Yy(f,h);const _=[];for(const y of f)_.push(Jy(c,i,y));p={arrayValue:{values:_}}}else p=Jy(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Yy(f,h),p=Fb(a,o,f,h==="in"||h==="not-in");return Ie.create(l,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function EM(t,e,n){const r=e,s=ti("where",t);return Fl._create(s,r,n)}class Yp extends Jp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yp(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Oe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)Gb(o,c),o=Ff(o,c)})(e._query,n),new Ht(e.firestore,e.converter,Ff(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xp extends Tc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xp(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qa(i,o)})(e._query,this._field,this._direction);return new Ht(e.firestore,e.converter,AN(e._query,n))}}function wM(t,e="asc"){const n=e,r=ti("orderBy",t);return Xp._create(r,n)}class Bl extends Tc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Bl(e,n,r)}_apply(e){return new Ht(e.firestore,e.converter,$u(e._query,this._limit,this._limitType))}}function TM(t){return wT("limit",t),Bl._create("limit",t,"F")}function IM(t){return wT("limitToLast",t),Bl._create("limitToLast",t,"L")}class Ul extends Tc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ul(e,n,r)}_apply(e){const n=Hb(e,this.type,this._docOrFields,this._inclusive);return new Ht(e.firestore,e.converter,RN(e._query,n))}}function bM(...t){return Ul._create("startAt",t,!0)}function AM(...t){return Ul._create("startAfter",t,!1)}class jl extends Tc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new jl(e,n,r)}_apply(e){const n=Hb(e,this.type,this._docOrFields,this._inclusive);return new Ht(e.firestore,e.converter,SN(e._query,n))}}function RM(...t){return jl._create("endBefore",t,!1)}function SM(...t){return jl._create("endAt",t,!0)}function Hb(t,e,n,r){if(n[0]=ct(n[0]),n[0]instanceof ec)return(function(i,o,a,c,l){if(!c)throw new q(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of Ui(i))if(f.field.isKeyField())h.push(zs(o,c.key));else{const p=c.data.field(f.field);if(bl(p))throw new q(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=f.field.canonicalString();throw new q(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(p)}return new rs(h,l)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=ci(t.firestore);return(function(o,a,c,l,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new q(F.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let _=0;_<h.length;_++){const y=h[_];if(p[_].field.isKeyField()){if(typeof y!="string")throw new q(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof y}`);if(!op(o)&&y.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${y}' contains a slash.`);const C=o.path.child(we.fromString(y));if(!Y.isDocumentKey(C))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const k=new Y(C);m.push(zs(a,k))}else{const C=Fb(c,l,y);m.push(C)}}return new rs(m,f)})(t._query,t.firestore._databaseId,s,e,n,r)}}function Jy(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!op(e)&&n.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!Y.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zs(t,new Y(r))}if(n instanceof $e)return zs(t,n._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vl(n)}.`)}function Yy(t,e){if(!Array.isArray(t)||t.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Gb(t,e){const n=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function $l(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class PM extends Qp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}class ks{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let gn=class zb extends ec{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ti("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=zb._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};gn._jsonSchemaVersion="firestore/documentSnapshot/1.0",gn._jsonSchema={type:ot("string",gn._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};let xa=class extends gn{data(e={}){return super.data(e)}},An=class Kb{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ks(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new xa(this._firestore,this._userDataWriter,r.key,r,new ks(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const c=new xa(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ks(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const c=new xa(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ks(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:CM(a.type),doc:c,oldIndex:l,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Kb._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function CM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}function Wb(t,e){return t instanceof gn&&e instanceof gn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof An&&e instanceof An&&t._firestore===e._firestore&&Db(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An._jsonSchemaVersion="firestore/querySnapshot/1.0",An._jsonSchema={type:ot("string",An._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};const xM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VM=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ci(e)}set(e,n,r){this._verifyNotCommitted();const s=$r(e,this._firestore),i=$l(s.converter,n,r),o=Ll(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,We.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=$r(e,this._firestore);let o;return o=typeof(n=ct(n))=="string"||n instanceof ei?Kp(this._dataReader,"WriteBatch.update",i._key,n,r,s):zp(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,We.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$r(e,this._firestore);return this._mutations=this._mutations.concat(new Co(n._key,We.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function $r(t,e){if((t=ct(t)).firestore!==e)throw new q(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ci(e)}get(e){const n=$r(e,this._firestore),r=new PM(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return ne(24041);const i=s[0];if(i.isFoundDocument())return new ec(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ec(this._firestore,r,n._key,null,n.converter);throw ne(18433,{doc:i})}))}set(e,n,r){const s=$r(e,this._firestore),i=$l(s.converter,n,r),o=Ll(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=$r(e,this._firestore);let o;return o=typeof(n=ct(n))=="string"||n instanceof ei?Kp(this._dataReader,"Transaction.update",i._key,n,r,s):zp(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=$r(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NM=class extends DM{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=$r(e,this._firestore),r=new li(this._firestore);return super.get(e).then((s=>new gn(this._firestore,r,n._key,s._document,new ks(!1,!1),n.converter)))}};function kM(t,e,n){t=Se(t,rt);const r={...xM,...n};(function(o){if(o.maxAttempts<1)throw new q(F.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const s=Mt(t);return KO(s,(i=>e(new NM(t,i))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){t=Se(t,$e);const e=Se(t.firestore,rt),n=Mt(e);return bb(n,t._key).then((r=>Zp(e,t,r)))}function MM(t){t=Se(t,$e);const e=Se(t.firestore,rt),n=Mt(e),r=new li(e);return qO(n,t._key).then((s=>new gn(e,r,t._key,s,new ks(s!==null&&s.hasLocalMutations,!0),t.converter)))}function LM(t){t=Se(t,$e);const e=Se(t.firestore,rt),n=Mt(e);return bb(n,t._key,{source:"server"}).then((r=>Zp(e,t,r)))}function FM(t){t=Se(t,Ht);const e=Se(t.firestore,rt),n=Mt(e),r=new li(e);return qb(t._query),Ab(n,t._query).then((s=>new An(e,r,t,s)))}function BM(t){t=Se(t,Ht);const e=Se(t.firestore,rt),n=Mt(e),r=new li(e);return HO(n,t._query).then((s=>new An(e,r,t,s)))}function UM(t){t=Se(t,Ht);const e=Se(t.firestore,rt),n=Mt(e),r=new li(e);return Ab(n,t._query,{source:"server"}).then((s=>new An(e,r,t,s)))}function Xy(t,e,n){t=Se(t,$e);const r=Se(t.firestore,rt),s=$l(t.converter,e,n),i=ci(r);return Ic(r,[Ll(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,We.none())])}function Zy(t,e,n,...r){t=Se(t,$e);const s=Se(t.firestore,rt),i=ci(s);let o;return o=typeof(e=ct(e))=="string"||e instanceof ei?Kp(i,"updateDoc",t._key,e,n,r):zp(i,"updateDoc",t._key,e),Ic(s,[o.toMutation(t._key,We.exists(!0))])}function jM(t){return Ic(Se(t.firestore,rt),[new Co(t._key,We.none())])}function $M(t,e){const n=Se(t.firestore,rt),r=Yu(t),s=$l(t.converter,e),i=ci(t.firestore);return Ic(n,[Ll(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,We.exists(!1))]).then((()=>r))}function Qb(t,...e){t=ct(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Yf(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Yf(e[r])){const l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let i,o,a;if(t instanceof $e)o=Se(t.firestore,rt),a=So(t._key.path),i={next:l=>{e[r]&&e[r](Zp(o,t,l))},error:e[r+1],complete:e[r+2]};else{const l=Se(t,Ht);o=Se(l.firestore,rt),a=l._query;const h=new li(o);i={next:f=>{e[r]&&e[r](new An(o,h,l,f))},error:e[r+1],complete:e[r+2]},qb(t._query)}const c=Mt(o);return $O(c,a,s,i)}function qM(t,e){t=Se(t,rt);const n=Mt(t),r=Yf(e)?e:{next:e};return zO(n,r)}function Ic(t,e){const n=Mt(t);return GO(n,e)}function Zp(t,e,n){const r=n.docs.get(e._key),s=new li(t);return new gn(t,s,e._key,r,new ks(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){ED(Gd),to(new Gs("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new rt(new AD(r.getProvider("auth-internal")),new PD(o,r.getProvider("app-check-internal")),fN(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),lr(Wy,Qy,e),lr(Wy,Qy,"esm2020")})();const HM="@firebase/firestore-compat",GM="0.4.5";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new q("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(){if(typeof Uint8Array>"u")throw new q("unimplemented","Uint8Arrays are not available in this environment.")}function tv(){if(!uN())throw new q("unimplemented","Blobs are unavailable in Firestore in this environment.")}class tc{constructor(e){this._delegate=e}static fromBase64String(e){return tv(),new tc(Dt.fromBase64String(e))}static fromUint8Array(e){return ev(),new tc(Dt.fromUint8Array(e))}toBase64(){return tv(),this._delegate.toBase64()}toUint8Array(){return ev(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t){return zM(t,["next","error","complete"])}function zM(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{enableIndexedDbPersistence(e,n){return nM(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return rM(e._delegate)}clearIndexedDbPersistence(e){return sM(e._delegate)}}class Jb{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof es||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&xn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){XO(this._delegate,e,n,r)}enableNetwork(){return oM(this._delegate)}disableNetwork(){return aM(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,vT("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return iM(this._delegate)}onSnapshotsInSync(e){return qM(this._delegate,e)}get app(){if(!this._appCompat)throw new q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wo(this,xb(this._delegate,e))}catch(n){throw jt(n,"collection()","Firestore.collection()")}}doc(e){try{return new mn(this,Yu(this._delegate,e))}catch(n){throw jt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ut(this,ZO(this._delegate,e))}catch(n){throw jt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return kM(this._delegate,n=>e(new Yb(this,n)))}batch(){return Mt(this._delegate),new Xb(new VM(this._delegate,e=>Ic(this._delegate,e)))}loadBundle(e){return cM(this._delegate,e)}namedQuery(e){return uM(this._delegate,e).then(n=>n?new Ut(this,n):null)}}class ql extends Qp{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(new Dt(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return mn.forKey(n,this.firestore,null)}}function WM(t){wD(t)}class Yb{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new ql(e)}get(e){const n=Os(e);return this._delegate.get(n).then(r=>new nc(this._firestore,new gn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=Os(e);return r?(em("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Os(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Os(e);return this._delegate.delete(n),this}}class Xb{constructor(e){this._delegate=e}set(e,n,r){const s=Os(e);return r?(em("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Os(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Os(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ni{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new xa(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=ni.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new ni(e,new ql(e),n),s.set(n,i)),i}}ni.INSTANCES=new WeakMap;class mn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ql(e)}static forPath(e,n,r){if(e.length%2!==0)throw new q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new mn(n,new $e(n._delegate,r,new Y(e)))}static forKey(e,n,r){return new mn(n,new $e(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new wo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wo(this.firestore,xb(this._delegate,e))}catch(n){throw jt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ct(e),e instanceof $e?Vb(this._delegate,e):!1}set(e,n){n=em("DocumentReference.set",n);try{return n?Xy(this._delegate,e,n):Xy(this._delegate,e)}catch(r){throw jt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Zy(this._delegate,e):Zy(this._delegate,e,n,...r)}catch(s){throw jt(s,"updateDoc()","DocumentReference.update()")}}delete(){return jM(this._delegate)}onSnapshot(...e){const n=Zb(e),r=eA(e,s=>new nc(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return Qb(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=MM(this._delegate):e?.source==="server"?n=LM(this._delegate):n=OM(this._delegate),n.then(r=>new nc(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new mn(this.firestore,e?this._delegate.withConverter(ni.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function jt(t,e,n){return t.message=t.message.replace(e,n),t}function Zb(t){for(const e of t)if(typeof e=="object"&&!Xf(e))return e;return{}}function eA(t,e){let n;return Xf(t[0])?n=t[0]:Xf(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:r=>{n.next&&n.next(e(r))},error:n.error?.bind(n),complete:n.complete?.bind(n)}}class nc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new mn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Wb(this._delegate,e._delegate)}}class rc extends nc{data(e){const n=this._delegate.data(e);return this._delegate._converter||TD(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class Ut{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ql(e)}where(e,n,r){try{return new Ut(this.firestore,kr(this._delegate,EM(e,n,r)))}catch(s){throw jt(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ut(this.firestore,kr(this._delegate,wM(e,n)))}catch(r){throw jt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ut(this.firestore,kr(this._delegate,TM(e)))}catch(n){throw jt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ut(this.firestore,kr(this._delegate,IM(e)))}catch(n){throw jt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ut(this.firestore,kr(this._delegate,bM(...e)))}catch(n){throw jt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ut(this.firestore,kr(this._delegate,AM(...e)))}catch(n){throw jt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ut(this.firestore,kr(this._delegate,RM(...e)))}catch(n){throw jt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ut(this.firestore,kr(this._delegate,SM(...e)))}catch(n){throw jt(n,"endAt()","Query.endAt()")}}isEqual(e){return Db(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=BM(this._delegate):e?.source==="server"?n=UM(this._delegate):n=FM(this._delegate),n.then(r=>new Zf(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=Zb(e),r=eA(e,s=>new Zf(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return Qb(this._delegate,n,r)}withConverter(e){return new Ut(this.firestore,e?this._delegate.withConverter(ni.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class QM{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new rc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Zf{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ut(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new QM(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new rc(this._firestore,r))})}isEqual(e){return Wb(this._delegate,e._delegate)}}class wo extends Ut{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new mn(this.firestore,e):null}doc(e){try{return e===void 0?new mn(this.firestore,Yu(this._delegate)):new mn(this.firestore,Yu(this._delegate,e))}catch(n){throw jt(n,"doc()","CollectionReference.doc()")}}add(e){return $M(this._delegate,e).then(n=>new mn(this.firestore,n))}isEqual(e){return Vb(this._delegate,e._delegate)}withConverter(e){return new wo(this.firestore,e?this._delegate.withConverter(ni.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Os(t){return Se(t,$e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(...e){this._delegate=new ei(...e)}static documentId(){return new tm(Ke.keyField().canonicalString())}isEqual(e){return e=ct(e),e instanceof ei?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{static serverTimestamp(){const e=mM();return e._methodName="FieldValue.serverTimestamp",new Vs(e)}static delete(){const e=pM();return e._methodName="FieldValue.delete",new Vs(e)}static arrayUnion(...e){const n=gM(...e);return n._methodName="FieldValue.arrayUnion",new Vs(n)}static arrayRemove(...e){const n=_M(...e);return n._methodName="FieldValue.arrayRemove",new Vs(n)}static increment(e){const n=yM(e);return n._methodName="FieldValue.increment",new Vs(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM={Firestore:Jb,GeoPoint:In,Timestamp:ke,Blob:tc,Transaction:Yb,WriteBatch:Xb,DocumentReference:mn,DocumentSnapshot:nc,Query:Ut,QueryDocumentSnapshot:rc,QuerySnapshot:Zf,CollectionReference:wo,FieldPath:tm,FieldValue:Vs,setLogLevel:WM,CACHE_SIZE_UNLIMITED:tM};function YM(t,e){t.INTERNAL.registerComponent(new Gs("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps({...JM}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(t){YM(t,(e,n)=>new Jb(e,n,new KM)),t.registerVersion(HM,GM)}XM(Ua);Ua.apps.length===0&&Ua.initializeApp({apiKey:"AIzaSyBiI-MHTxhqNpgJ6FMJaVTN3lcBMmL9cqU",authDomain:"tsg-slackbot.firebaseapp.com",projectId:"tsg-slackbot",storageBucket:"tsg-slackbot.appspot.com",messagingSenderId:"382537830947",appId:"1:382537830947:web:41aa27c8a7261f0fe61796",measurementId:"G-NZD98Q80NG"});const ZM=Ua.apps[0],Dn=ZM.firestore(),eL=Dn.collection("achievement_data"),tL=()=>({isInitList:null,list:[]}),nL={initList(t){t.isInitList=!0}},rL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n}),getByCounter:t=>(e=>t.list.filter(n=>n.counter===e).sort((n,r)=>n.value-r.value)),getByCategory:t=>(e=>t.list.filter(n=>n.category===e).sort((n,r)=>(r.count||0)-(n.count||0)))},sL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",eL)})},iL=Object.freeze(Object.defineProperty({__proto__:null,actions:sL,getters:rL,mutations:nL,state:tL},Symbol.toStringTag,{value:"Module"})),oL=Dn.collection("achievement_stats_by_category"),aL=()=>({isInitList:null,list:[]}),cL={initList(t){t.isInitList=!0}},uL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},lL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",oL)})},hL=Object.freeze(Object.defineProperty({__proto__:null,actions:lL,getters:uL,mutations:cL,state:aL},Symbol.toStringTag,{value:"Module"})),fL=Dn.collection("achievement_stats_by_difficulty"),dL=()=>({isInitList:null,list:[]}),pL={initList(t){t.isInitList=!0}},mL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},gL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",fL)})},_L=Object.freeze(Object.defineProperty({__proto__:null,actions:gL,getters:mL,mutations:pL,state:dL},Symbol.toStringTag,{value:"Module"})),yL=Dn.collection("achievement_stats_by_month"),vL=()=>({isInitList:null,list:[]}),EL={initList(t){t.isInitList=!0}},wL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},TL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",yL)})},IL=Object.freeze(Object.defineProperty({__proto__:null,actions:TL,getters:wL,mutations:EL,state:vL},Symbol.toStringTag,{value:"Module"})),aa=Dn.collection("achievements"),bL=()=>({isInitList:null,list:[],isInitLatestAchievemnts:null,latestAchievements:[],isInitUsers:{},isInitNames:{},isInitData:{}}),AL={initList(t){t.isInitList=!0},initLatestAchievements(t){t.isInitLatestAchievemnts=!0},initData(t,e){t.isInitData[e]=!0},setUser(t,{id:e,achievements:n}){t.isInitUsers[e]=!0,t[`user_${e}`]=n},setName(t,{name:e,achievements:n}){t.isInitNames[e]=!0,t[`name_${e}`]=n}},RL={list:t=>t.list,initLatestAchievements:t=>t.latestAchievements,data:t=>t.data,getByUser:t=>(e=>t.isInitList?t.list.filter(n=>n.user===e):t[`user_${e}`]||[]),getByName:t=>(e=>t.isInitList?t.list.filter(n=>n.name===e):t[`name_${e}`]||[])},SL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",aa)}),async initLatestAchievements({state:t,dispatch:e,commit:n}){t.isInitLatestAchievemnts||(await e("bindLatestAchievements"),n("initLatestAchievements"))},bindLatestAchievements:an(async({bindFirestoreRef:t})=>{await t("latestAchievements",aa.orderBy("date","desc").limit(15))}),bind:an(async({bindFirestoreRef:t,state:e,commit:n},r)=>{if(e.isInitData[r]===!0||e.isInitList===!0)return;const s=aa.doc(r);await t(`data_${r}`,s),n("initData",r)}),fetchByUser:async({state:t,commit:e},n)=>{if(t.isInitUsers[n]===!0||t.isInitList===!0)return;const r=await aa.where("user","==",n).get();e({type:"setUser",id:n,achievements:r.docs.map(s=>s.data())})},fetchByName:async({state:t,commit:e},n)=>{if(t.isInitNames[n]===!0||t.isInitList===!0)return;const r=await aa.where("name","==",n).get();e({type:"setName",name:n,achievements:r.docs.map(s=>s.data())})}},PL=Object.freeze(Object.defineProperty({__proto__:null,actions:SL,getters:RL,mutations:AL,state:bL},Symbol.toStringTag,{value:"Module"})),CL=Dn.collection("oneiromancy_messages"),xL=Dn.collection("oneiromancy_criteria"),VL=()=>({isInitOneiromancyMessages:null,oneiromancyMessages:[],isInitOneiromancyCriteria:null,oneiromancyCriteria:[]}),DL={initOneiromancyMessages(t){t.isInitOneiromancyMessages=!0},initOneiromancyCriteria(t){t.isInitOneiromancyCriteria=!0}},NL={oneiromancyMessages:t=>t.oneiromancyMessages,oneiromancyCriteria:t=>t.oneiromancyCriteria},kL={async initOneiromancyMessages({state:t,dispatch:e,commit:n}){t.isInitOneiromancyMessages!==!0&&(await e("bindOneiromancyMessages"),n("initOneiromancyMessages"))},bindOneiromancyMessages:an(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyMessages",CL.orderBy("message.ts","desc")),e("initOneiromancyMessages")}),async initOneiromancyCriteria({state:t,dispatch:e,commit:n}){t.isInitOneiromancyCriteria!==!0&&(await e("bindOneiromancyCriteria"),n("initOneiromancyCriteria"))},bindOneiromancyCriteria:an(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyCriteria",xL.orderBy("point","desc")),e("initOneiromancyCriteria")})},OL=Object.freeze(Object.defineProperty({__proto__:null,actions:kL,getters:NL,mutations:DL,state:VL},Symbol.toStringTag,{value:"Module"})),ML=()=>({isUnauthorized:!1,isInitUsers:!1,isInitTopicMessages:!1,users:[],userMap:new Map,topicMessages:[],topicMessagesMap:new Map}),LL={setUsers(t,e){t.isInitUsers=!0,t.users=e,t.userMap=new Map(e.map(n=>[n.id,n]))},setTopicMessages(t,e){t.isInitTopicMessages=!0,t.topicMessages=e.map(n=>({...n,randomSortKey:Math.random()})),t.topicMessagesMap=new Map(t.topicMessages.map(n=>[n.message.ts,n]))},addTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!0,n.likes=n.likes.concat([null]))},removeTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!1,n.likes=n.likes.slice(1))},isUnauthorized(t){t.isUnauthorized=!0}},FL={users:t=>t.users,getUser:t=>(e=>{const n=t.userMap.get(e);return n===void 0?{id:e}:n}),topicMessages:t=>t.topicMessages,getTopicMessage:t=>(e=>{const n=t.topicMessagesMap.get(e);return n===void 0?{ts:e}:n})},BL={async initUsers({state:t,commit:e}){if(!t.isInitUsers)try{const n=await fetch("https://slackbot-api.tsg.ne.jp/slack/users",{credentials:"include"});if(!n.ok){if(n.status===401){e("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();e("setUsers",r)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))e("isUnauthorized");else throw n}},async initTopicMessages({state:t,commit:e}){if(!t.isInitTopicMessages)try{const n=await fetch("https://slackbot-api.tsg.ne.jp/topic/topics",{credentials:"include"});if(!n.ok){if(n.status===401){e("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();e("setTopicMessages",r)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))e("isUnauthorized");else throw n}},async likeTopicMessage({commit:t},{ts:e}){try{const n=await fetch(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,{method:"PUT",body:"",credentials:"include",headers:{"Content-Type":"text/plain"}});if(!n.ok){if(n.status===401){t("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}t("addTopicMessageLike",e)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))t("isUnauthorized");else throw n}},async unlikeTopicMessage({commit:t},{ts:e}){try{const n=await fetch(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,{method:"DELETE",credentials:"include"});if(!n.ok){if(n.status===401){t("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}t("removeTopicMessageLike",e)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))t("isUnauthorized");else throw n}}},UL=Object.freeze(Object.defineProperty({__proto__:null,actions:BL,getters:FL,mutations:LL,state:ML},Symbol.toStringTag,{value:"Module"})),jL=Dn.collection("slow_quiz_games"),$L=()=>({isInitList:null,list:[]}),qL={initList(t){t.isInitList=!0}},HL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},GL={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t,commit:e})=>{await t("list",jL.where("status","==","finished").orderBy("finishDate","desc")),e("initList")})},zL=Object.freeze(Object.defineProperty({__proto__:null,actions:GL,getters:HL,mutations:qL,state:$L},Symbol.toStringTag,{value:"Module"})),KL=Dn.collection("twenty_questions_games"),WL=()=>({isInitList:null,list:[]}),QL={initList(t){t.isInitList=!0}},JL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},YL={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t,commit:e})=>{await t("list",KL.orderBy("finishedAt","desc")),e("initList")})},XL=Object.freeze(Object.defineProperty({__proto__:null,actions:YL,getters:JL,mutations:QL,state:WL},Symbol.toStringTag,{value:"Module"})),nv=Dn.collection("users");Dn.collection("achievements");const ZL=()=>({isInitList:null,list:[],isInitData:{},data:{}}),eF={initList(t){t.isInitList=!0},initData(t,e){t.isInitData[e]=!0}},tF={list:t=>t.list,data:t=>t.data,getById:t=>(e=>{if(t[`data_${e}`]!==void 0)return t[`data_${e}`];const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},nF={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t,commit:e})=>{await t("list",nv),e("initList")}),bindById:an(async({bindFirestoreRef:t,state:e,dispatch:n,getters:r,commit:s},i)=>{const o=r.getById(i);if(o!==void 0&&e.isInitData[o.id]===!0)return;const a=await nv.doc(i).get();if(a.exists){const c=t(`data_${a.id}`,a.ref);s("initData",a.id),await Promise.all([c,n("achievements/fetchByUser",a.id,{root:!0})])}})},rF=Object.freeze(Object.defineProperty({__proto__:null,actions:nF,getters:tF,mutations:eF,state:ZL},Symbol.toStringTag,{value:"Module"})),sF=Jn(t=>{const e=_1({mutations:{...P1},modules:{achievements:{namespaced:!0,...PL},achievementData:{namespaced:!0,...iL},achievementStatsByCategory:{namespaced:!0,...hL},achievementStatsByDifficulty:{namespaced:!0,..._L},achievementStatsByMonth:{namespaced:!0,...IL},slowQuizGames:{namespaced:!0,...zL},twentyQuestionsGames:{namespaced:!0,...XL},users:{namespaced:!0,...rF},oneiromancies:{namespaced:!0,...OL},slackInfos:{namespaced:!0,...UL}}});return t.vueApp.use(e),{provide:{store:e}}}),iF=[uC,pC,Gx,zx,Kx,Wx,Jx,Yx,e1,sF],tA=(t="RouteProvider")=>os({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,r=e.route,s={};for(const i in e.route)Object.defineProperty(s,i,{get:()=>n===e.renderKey?e.route[i]:r[i],enumerable:!0});return Gr(Hs,$n(s)),()=>e.vnode?Nt(e.vnode,{ref:e.vnodeRef}):e.vnode}}),oF=tA(),rv=new WeakMap,aF=os({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:r}){const s=mt(),i=ar(),o=kt(Hs,null);let a;r({pageRef:i});const c=kt(ew,null);let l;const h=s.deferHydration();if(s.isHydrating){const p=s.hooks.hookOnce("app:error",h);un().beforeEach(p)}t.pageKey&&zr(()=>t.pageKey,(p,m)=>{p!==m&&s.callHook("page:loading:start")});let f=!1;{const p=un().beforeResolve(()=>{f=!1});ac(()=>{p()})}return()=>Nt(Tw,{name:t.name,route:t.route,...e},{default:p=>{const m=uF(o,p.route,p.Component),_=o&&o.matched.length===p.route.matched.length;if(!p.Component){if(l&&!_)return l;h();return}if(l&&c&&!c.isCurrent(p.route))return l;if(m&&o&&(!c||c?.isCurrent(o)))return _?l:null;const y=gf(p,t.pageKey),C=lF(o,p.route,p.Component);!s.isHydrating&&a===y&&!C&&Gi(()=>{f=!0,s.callHook("page:loading:end")}),a=y;const k=!!(t.transition??p.route.meta.pageTransition??kg),D=k&&cF([t.transition,p.route.meta.pageTransition,kg,{onAfterLeave(){delete s._runningTransition,s.callHook("page:transition:finish",p.Component)}}]),E=t.keepalive??p.route.meta.keepalive??aP;return l=bw(k&&D,Dx(E,Nt(yd,{suspensible:!0,onPending:()=>{k&&(s._runningTransition=!0),s.callHook("page:start",p.Component)},onResolve:()=>{Gi(()=>s.callHook("page:finish",p.Component).then(()=>{if(delete s._runningTransition,!f&&!C)return f=!0,s.callHook("page:loading:end")}).finally(h))}},{default:()=>{const x={key:y||void 0,vnode:n.default?hF(n.default,p):p.Component,route:p.route,renderKey:y||void 0,trackRootNodes:k,vnodeRef:i};if(!E)return Nt(oF,x);const N=p.Component.type,U=N;let I=rv.get(U);return I||(I=tA(N.name||N.__name),rv.set(U,I)),Nt(I,x)}}))).default(),l}})}});function cF(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?Cd(n.onAfterLeave):void 0});return XE(...e)}function uF(t,e,n){if(!t)return!1;const r=e.matched.findIndex(s=>s.components?.default===n?.type);return!r||r===-1?!1:e.matched.slice(0,r).some((s,i)=>s.components?.default!==t.matched[i]?.components?.default)||n&&gf({route:e,Component:n})!==gf({route:t,Component:n})}function lF(t,e,n){return t?e.matched.findIndex(s=>s.components?.default===n?.type)<e.matched.length-1:!1}function hF(t,e){const n=t(e);return n.length===1?Nt(n[0]):Nt(Vt,void 0,n)}const fF=os({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>Nt(Ur[t.name],t.layoutProps,e.slots)}}),dF={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},pF=os({name:"NuxtLayout",inheritAttrs:!1,props:dF,setup(t,e){const n=mt(),r=kt(Hs),i=!r||r===dl()?Iw():r,o=sn(()=>{let h=je(t.name)??i?.meta.layout??"default";return h&&!(h in Ur)&&t.fallback&&(h=je(t.fallback)),h}),a=Hi();e.expose({layoutRef:a});const c=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",c);un().beforeEach(h)}let l;return()=>{const h=o.value&&o.value in Ur,f=i?.meta.layoutTransition??oP,p=l;return l=o.value,bw(h&&f,{default:()=>Nt(yd,{suspensible:!0,onResolve:()=>{Gi(c)}},{default:()=>Nt(mF,{layoutProps:PE(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:m=>m!==p&&m===o.value,hasTransition:!!f},e.slots)})}).default()}}}),mF=os({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&Gr(ew,{isCurrent:i=>n===(i.meta.layout??"default")});const r=kt(Hs);if(r&&r===dl()){const i=Iw(),o={};for(const a in i){const c=a;Object.defineProperty(o,c,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[c]:r[c]})}Gr(Hs,$n(o))}return()=>!n||typeof n=="string"&&!(n in Ur)?e.slots.default?.():Nt(fF,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),gF=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},_F={};function yF(t,e){const n=aF,r=pF;return pn(),jn(r,null,{default:hd(()=>[tt(n)]),_:1})}const vF=gF(_F,[["render",yF]]),EF={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error;n.stack&&n.stack.split(`
`).splice(1).map(f=>({text:f.replace("webpack:/","").replace(".vue",".js").trim(),internal:f.includes("node_modules")&&!f.includes(".cache")||f.includes("internal")||f.includes("new Promise")})).map(f=>`<span class="stack${f.internal?" internal":""}">${f.text}</span>`).join(`
`);const r=Number(n.statusCode||500),s=r===404,i=n.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=s?Kh(()=>fn(()=>import("./B78ev5Uj.js"),__vite__mapDeps([28,3,29,30]),import.meta.url)):Kh(()=>fn(()=>import("./DbsU1BWQ.js"),__vite__mapDeps([31,29,32]),import.meta.url));return(f,p)=>(pn(),jn(je(h),NA(RE({statusCode:je(r),statusMessage:je(i),description:je(o),stack:je(a)})),null,16))}},wF={key:0},sv={__name:"nuxt-root",setup(t){const e=()=>null,n=mt(),r=n.deferHydration();if(n.isHydrating){const l=n.hooks.hookOnce("app:error",r);un().beforeEach(l)}const s=!1;Gr(Hs,dl()),n.hooks.callHookWith(l=>l.map(h=>h()),"vue:setup");const i=pl(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;Yv((l,h,f)=>{if(n.hooks.callHook("vue:error",l,h,f).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",l),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,l),!1;if(nw(l)&&(l.fatal||l.unhandled))return n.runWithContext(()=>Is(l)),!1});const c=!1;return(l,h)=>(pn(),jn(yd,{onResolve:je(r)},{default:hd(()=>[je(o)?(pn(),mS("div",wF)):je(i)?(pn(),jn(je(EF),{key:1,error:je(i)},null,8,["error"])):je(c)?(pn(),jn(je(e),{key:2,context:je(c)},null,8,["context"])):je(s)?(pn(),jn(FR(je(s)),{key:3})):(pn(),jn(je(vF),{key:4}))]),_:1},8,["onResolve"]))}};let iv;{let t;iv=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),r=n?t0(sv):e0(sv),s=hP({vueApp:r});async function i(o){await s.callHook("app:error",o),s.payload.error||=Us(o)}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)}),!n&&Og.id&&s.hook("app:suspense:resolve",()=>{document.getElementById(Og.id)?.remove()});try{await pP(s,iF)}catch(o){i(o)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(cP),await s.hooks.callHook("app:mounted",r),await Gi()}catch(o){i(o)}return r},t=iv().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{fl as $,kF as A,RF as B,bF as C,MF as D,TF as E,Vt as F,SF as G,CF as H,il as I,sl as J,PF as K,AF as L,un as M,xd as N,f_ as O,Hs as P,ac as Q,NF as R,FE as S,bP as T,Zx as U,sn as V,VF as W,xF as X,si as Y,wd as Z,gF as _,AE as a,S0 as a0,Au as a1,tt as b,mS as c,SE as d,mt as e,iw as f,os as g,fd as h,kt as i,Nt as j,md as k,Jv as l,zr as m,Re as n,pn as o,al as p,Gi as q,ar as r,Hi as s,LA as t,DF as u,AS as v,hd as w,IF as x,jn as y,OF as z};
