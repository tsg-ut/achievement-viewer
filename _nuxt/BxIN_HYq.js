const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BwgTRyNg.js","./C41xIF80.js","./Cpj98o6Y.js","./CVqhQzPW.js","./CdHfEb3j.js","./index.4iF0p84D.css","./D4DdvONk.js","./DfAzwDaU.js","./Ce2Bbz3M.js","./CdjJNdvM.js","./topic.UPFfNaHU.css","./hV1C6nB6.js","./index.BZVQuXzV.css","./RANa_Eef.js","./D4-Ydgik.js","./slow-quiz.XCwighz9.css","./BtzSWRPx.js","./CxUrwKUP.js","./AchievementCard.DIPBvmTw.css","./CtFqpgF9.js","./oneiromancy.D5JIcBwv.css","./p4oyPqCH.js","./BsmpYPfm.js","./index.B09IHu_1.css","./B58avgJC.js","./twenty-questions._MGYqerZ.css","./D1OxibOv.js","./default.5rRBYkF3.css","./CcB2akJ3.js","./Dz29w1D-.js","./error-404.BLrjNXsr.css","./BPbMBxfd.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ed(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Be={},Vi=[],qn=()=>{},iv=()=>!1,rc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),td=t=>t.startsWith("onUpdate:"),vt=Object.assign,nd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},TA=Object.prototype.hasOwnProperty,De=(t,e)=>TA.call(t,e),le=Array.isArray,Di=t=>To(t)==="[object Map]",Zu=t=>To(t)==="[object Set]",qm=t=>To(t)==="[object Date]",IA=t=>To(t)==="[object RegExp]",de=t=>typeof t=="function",Qe=t=>typeof t=="string",Rn=t=>typeof t=="symbol",Me=t=>t!==null&&typeof t=="object",ov=t=>(Me(t)||de(t))&&de(t.then)&&de(t.catch),av=Object.prototype.toString,To=t=>av.call(t),bA=t=>To(t).slice(8,-1),cv=t=>To(t)==="[object Object]",el=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ni=ed(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),tl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},AA=/-\w/g,_n=tl(t=>t.replace(AA,e=>e.slice(1).toUpperCase())),RA=/\B([A-Z])/g,ti=tl(t=>t.replace(RA,"-$1").toLowerCase()),nl=tl(t=>t.charAt(0).toUpperCase()+t.slice(1)),sh=tl(t=>t?`on${nl(t)}`:""),qr=(t,e)=>!Object.is(t,e),ki=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},uv=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},rd=t=>{const e=parseFloat(t);return isNaN(e)?t:e},lv=t=>{const e=Qe(t)?Number(t):NaN;return isNaN(e)?t:e};let Hm;const rl=()=>Hm||(Hm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function sl(t){if(le(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Qe(r)?xA(r):sl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Qe(t)||Me(t))return t}const SA=/;(?![^(]*\))/g,PA=/:([^]+)/,CA=/\/\*[^]*?\*\//g;function xA(t){const e={};return t.replace(CA,"").split(SA).forEach(n=>{if(n){const r=n.split(PA);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function il(t){let e="";if(Qe(t))e=t;else if(le(t))for(let n=0;n<t.length;n++){const r=il(t[n]);r&&(e+=r+" ")}else if(Me(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function VA(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Qe(e)&&(t.class=il(e)),n&&(t.style=sl(n)),t}const DA="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",NA=ed(DA);function hv(t){return!!t||t===""}function kA(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=$i(t[r],e[r]);return n}function $i(t,e){if(t===e)return!0;let n=qm(t),r=qm(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Rn(t),r=Rn(e),n||r)return t===e;if(n=le(t),r=le(e),n||r)return n&&r?kA(t,e):!1;if(n=Me(t),r=Me(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!$i(t[o],e[o]))return!1}}return String(t)===String(e)}function fv(t,e){return t.findIndex(n=>$i(n,e))}const dv=t=>!!(t&&t.__v_isRef===!0),OA=t=>Qe(t)?t:t==null?"":le(t)||Me(t)&&(t.toString===av||!de(t.toString))?dv(t)?OA(t.value):JSON.stringify(t,pv,2):String(t),pv=(t,e)=>dv(e)?pv(t,e.value):Di(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[ih(r,i)+" =>"]=s,n),{})}:Zu(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ih(n))}:Rn(e)?ih(e):Me(e)&&!le(e)&&!cv(e)?String(e):e,ih=(t,e="")=>{var n;return Rn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zt;class mv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=zt,!e&&zt&&(this.index=(zt.scopes||(zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=zt;try{return zt=this,e()}finally{zt=n}}}on(){++this._on===1&&(this.prevScope=zt,zt=this)}off(){this._on>0&&--this._on===0&&(zt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function gv(t){return new mv(t)}function _v(){return zt}let Ue;const oh=new WeakSet;class yv{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,zt&&zt.active&&zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,oh.has(this)&&(oh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ev(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Gm(this),wv(this);const e=Ue,n=Tn;Ue=this,Tn=!0;try{return this.fn()}finally{Tv(this),Ue=e,Tn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)od(e);this.deps=this.depsTail=void 0,Gm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?oh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){jh(this)&&this.run()}get dirty(){return jh(this)}}let vv=0,pa,ma;function Ev(t,e=!1){if(t.flags|=8,e){t.next=ma,ma=t;return}t.next=pa,pa=t}function sd(){vv++}function id(){if(--vv>0)return;if(ma){let e=ma;for(ma=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;pa;){let e=pa;for(pa=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function wv(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Tv(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),od(r),MA(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function jh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Iv(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Iv(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===xa)||(t.globalVersion=xa,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!jh(t))))return;t.flags|=2;const e=t.dep,n=Ue,r=Tn;Ue=t,Tn=!0;try{wv(t);const s=t.fn(t._value);(e.version===0||qr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ue=n,Tn=r,Tv(t),t.flags&=-3}}function od(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)od(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function MA(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Tn=!0;const bv=[];function lr(){bv.push(Tn),Tn=!1}function hr(){const t=bv.pop();Tn=t===void 0?!0:t}function Gm(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ue;Ue=void 0;try{e()}finally{Ue=n}}}let xa=0;class LA{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ad{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ue||!Tn||Ue===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ue)n=this.activeLink=new LA(Ue,this),Ue.deps?(n.prevDep=Ue.depsTail,Ue.depsTail.nextDep=n,Ue.depsTail=n):Ue.deps=Ue.depsTail=n,Av(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ue.depsTail,n.nextDep=void 0,Ue.depsTail.nextDep=n,Ue.depsTail=n,Ue.deps===n&&(Ue.deps=r)}return n}trigger(e){this.version++,xa++,this.notify(e)}notify(e){sd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{id()}}}function Av(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Av(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const fu=new WeakMap,Ms=Symbol(""),$h=Symbol(""),Va=Symbol("");function Vt(t,e,n){if(Tn&&Ue){let r=fu.get(t);r||fu.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new ad),s.map=r,s.key=n),s.track()}}function rr(t,e,n,r,s,i){const o=fu.get(t);if(!o){xa++;return}const a=c=>{c&&c.trigger()};if(sd(),e==="clear")o.forEach(a);else{const c=le(t),l=c&&el(n);if(c&&n==="length"){const h=Number(r);o.forEach((f,p)=>{(p==="length"||p===Va||!Rn(p)&&p>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(Va)),e){case"add":c?l&&a(o.get("length")):(a(o.get(Ms)),Di(t)&&a(o.get($h)));break;case"delete":c||(a(o.get(Ms)),Di(t)&&a(o.get($h)));break;case"set":Di(t)&&a(o.get(Ms));break}}id()}function FA(t,e){const n=fu.get(t);return n&&n.get(e)}function di(t){const e=Re(t);return e===t?e:(Vt(e,"iterate",Va),on(t)?e:e.map(Sn))}function ol(t){return Vt(t=Re(t),"iterate",Va),t}function kr(t,e){return zn(t)?Hr(t)?qi(Sn(e)):qi(e):Sn(e)}const BA={__proto__:null,[Symbol.iterator](){return ah(this,Symbol.iterator,t=>kr(this,t))},concat(...t){return di(this).concat(...t.map(e=>le(e)?di(e):e))},entries(){return ah(this,"entries",t=>(t[1]=kr(this,t[1]),t))},every(t,e){return Xn(this,"every",t,e,void 0,arguments)},filter(t,e){return Xn(this,"filter",t,e,n=>n.map(r=>kr(this,r)),arguments)},find(t,e){return Xn(this,"find",t,e,n=>kr(this,n),arguments)},findIndex(t,e){return Xn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Xn(this,"findLast",t,e,n=>kr(this,n),arguments)},findLastIndex(t,e){return Xn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Xn(this,"forEach",t,e,void 0,arguments)},includes(...t){return ch(this,"includes",t)},indexOf(...t){return ch(this,"indexOf",t)},join(t){return di(this).join(t)},lastIndexOf(...t){return ch(this,"lastIndexOf",t)},map(t,e){return Xn(this,"map",t,e,void 0,arguments)},pop(){return Qo(this,"pop")},push(...t){return Qo(this,"push",t)},reduce(t,...e){return zm(this,"reduce",t,e)},reduceRight(t,...e){return zm(this,"reduceRight",t,e)},shift(){return Qo(this,"shift")},some(t,e){return Xn(this,"some",t,e,void 0,arguments)},splice(...t){return Qo(this,"splice",t)},toReversed(){return di(this).toReversed()},toSorted(t){return di(this).toSorted(t)},toSpliced(...t){return di(this).toSpliced(...t)},unshift(...t){return Qo(this,"unshift",t)},values(){return ah(this,"values",t=>kr(this,t))}};function ah(t,e,n){const r=ol(t),s=r[e]();return r!==t&&!on(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const UA=Array.prototype;function Xn(t,e,n,r,s,i){const o=ol(t),a=o!==t&&!on(t),c=o[e];if(c!==UA[e]){const f=c.apply(t,i);return a?Sn(f):f}let l=n;o!==t&&(a?l=function(f,p){return n.call(this,kr(t,f),p,t)}:n.length>2&&(l=function(f,p){return n.call(this,f,p,t)}));const h=c.call(o,l,r);return a&&s?s(h):h}function zm(t,e,n,r){const s=ol(t);let i=n;return s!==t&&(on(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,kr(t,a),c,t)}),s[e](i,...r)}function ch(t,e,n){const r=Re(t);Vt(r,"iterate",Va);const s=r[e](...n);return(s===-1||s===!1)&&al(n[0])?(n[0]=Re(n[0]),r[e](...n)):s}function Qo(t,e,n=[]){lr(),sd();const r=Re(t)[e].apply(t,n);return id(),hr(),r}const jA=ed("__proto__,__v_isRef,__isVue"),Rv=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Rn));function $A(t){Rn(t)||(t=String(t));const e=Re(this);return Vt(e,"has",t),e.hasOwnProperty(t)}class Sv{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?XA:Vv:i?xv:Cv).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=le(e);if(!s){let c;if(o&&(c=BA[n]))return c;if(n==="hasOwnProperty")return $A}const a=Reflect.get(e,n,at(e)?e:r);if((Rn(n)?Rv.has(n):jA(n))||(s||Vt(e,"get",n),i))return a;if(at(a)){const c=o&&el(n)?a:a.value;return s&&Me(c)?Hh(c):c}return Me(a)?s?Hh(a):gr(a):a}}class Pv extends Sv{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=le(e)&&el(n);if(!this._isShallow){const l=zn(i);if(!on(r)&&!zn(r)&&(i=Re(i),r=Re(r)),!o&&at(i)&&!at(r))return l||(i.value=r),!0}const a=o?Number(n)<e.length:De(e,n),c=Reflect.set(e,n,r,at(e)?e:s);return e===Re(s)&&(a?qr(r,i)&&rr(e,"set",n,r):rr(e,"add",n,r)),c}deleteProperty(e,n){const r=De(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&rr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Rn(n)||!Rv.has(n))&&Vt(e,"has",n),r}ownKeys(e){return Vt(e,"iterate",le(e)?"length":Ms),Reflect.ownKeys(e)}}class qA extends Sv{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const HA=new Pv,GA=new qA,zA=new Pv(!0);const qh=t=>t,Nc=t=>Reflect.getPrototypeOf(t);function KA(t,e,n){return function(...r){const s=this.__v_raw,i=Re(s),o=Di(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=s[t](...r),h=n?qh:e?qi:Sn;return!e&&Vt(i,"iterate",c?$h:Ms),{next(){const{value:f,done:p}=l.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function kc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function WA(t,e){const n={get(s){const i=this.__v_raw,o=Re(i),a=Re(s);t||(qr(s,a)&&Vt(o,"get",s),Vt(o,"get",a));const{has:c}=Nc(o),l=e?qh:t?qi:Sn;if(c.call(o,s))return l(i.get(s));if(c.call(o,a))return l(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Vt(Re(s),"iterate",Ms),s.size},has(s){const i=this.__v_raw,o=Re(i),a=Re(s);return t||(qr(s,a)&&Vt(o,"has",s),Vt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Re(a),l=e?qh:t?qi:Sn;return!t&&Vt(c,"iterate",Ms),a.forEach((h,f)=>s.call(i,l(h),l(f),o))}};return vt(n,t?{add:kc("add"),set:kc("set"),delete:kc("delete"),clear:kc("clear")}:{add(s){!e&&!on(s)&&!zn(s)&&(s=Re(s));const i=Re(this);return Nc(i).has.call(i,s)||(i.add(s),rr(i,"add",s,s)),this},set(s,i){!e&&!on(i)&&!zn(i)&&(i=Re(i));const o=Re(this),{has:a,get:c}=Nc(o);let l=a.call(o,s);l||(s=Re(s),l=a.call(o,s));const h=c.call(o,s);return o.set(s,i),l?qr(i,h)&&rr(o,"set",s,i):rr(o,"add",s,i),this},delete(s){const i=Re(this),{has:o,get:a}=Nc(i);let c=o.call(i,s);c||(s=Re(s),c=o.call(i,s)),a&&a.call(i,s);const l=i.delete(s);return c&&rr(i,"delete",s,void 0),l},clear(){const s=Re(this),i=s.size!==0,o=s.clear();return i&&rr(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=KA(s,t,e)}),n}function cd(t,e){const n=WA(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(De(n,s)&&s in r?n:r,s,i)}const QA={get:cd(!1,!1)},JA={get:cd(!1,!0)},YA={get:cd(!0,!1)};const Cv=new WeakMap,xv=new WeakMap,Vv=new WeakMap,XA=new WeakMap;function ZA(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function eR(t){return t.__v_skip||!Object.isExtensible(t)?0:ZA(bA(t))}function gr(t){return zn(t)?t:ud(t,!1,HA,QA,Cv)}function Un(t){return ud(t,!1,zA,JA,xv)}function Hh(t){return ud(t,!0,GA,YA,Vv)}function ud(t,e,n,r,s){if(!Me(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=eR(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Hr(t){return zn(t)?Hr(t.__v_raw):!!(t&&t.__v_isReactive)}function zn(t){return!!(t&&t.__v_isReadonly)}function on(t){return!!(t&&t.__v_isShallow)}function al(t){return t?!!t.__v_raw:!1}function Re(t){const e=t&&t.__v_raw;return e?Re(e):t}function tR(t){return!De(t,"__v_skip")&&Object.isExtensible(t)&&uv(t,"__v_skip",!0),t}const Sn=t=>Me(t)?gr(t):t,qi=t=>Me(t)?Hh(t):t;function at(t){return t?t.__v_isRef===!0:!1}function or(t){return Dv(t,!1)}function Hi(t){return Dv(t,!0)}function Dv(t,e){return at(t)?t:new nR(t,e)}class nR{constructor(e,n){this.dep=new ad,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Re(e),this._value=n?e:Sn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||on(e)||zn(e);e=r?e:Re(e),qr(e,n)&&(this._rawValue=e,this._value=r?e:Sn(e),this.dep.trigger())}}function je(t){return at(t)?t.value:t}function rR(t){return de(t)?t():je(t)}const sR={get:(t,e,n)=>e==="__v_raw"?t:je(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return at(s)&&!at(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Nv(t){return Hr(t)?t:new Proxy(t,sR)}class iR{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=Re(e);let s=!0,i=e;if(!le(e)||!el(String(n)))do s=!al(i)||on(i);while(s&&(i=i.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=je(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&at(this._raw[this._key])){const n=this._object[this._key];if(at(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return FA(this._raw,this._key)}}class oR{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function aR(t,e,n){return at(t)?t:de(t)?new oR(t):Me(t)&&arguments.length>1?cR(t,e,n):or(t)}function cR(t,e,n){return new iR(t,e,n)}class uR{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ad(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ue!==this)return Ev(this,!0),!0}get value(){const e=this.dep.track();return Iv(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function lR(t,e,n=!1){let r,s;return de(t)?r=t:(r=t.get,s=t.set),new uR(r,s,n)}const Oc={},du=new WeakMap;let Ts;function hR(t,e=!1,n=Ts){if(n){let r=du.get(n);r||du.set(n,r=[]),r.push(t)}}function fR(t,e,n=Be){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,l=C=>s?C:on(C)||s===!1||s===0?sr(C,1):sr(C);let h,f,p,m,y=!1,v=!1;if(at(t)?(f=()=>t.value,y=on(t)):Hr(t)?(f=()=>l(t),y=!0):le(t)?(v=!0,y=t.some(C=>Hr(C)||on(C)),f=()=>t.map(C=>{if(at(C))return C.value;if(Hr(C))return l(C);if(de(C))return c?c(C,2):C()})):de(t)?e?f=c?()=>c(t,2):t:f=()=>{if(p){lr();try{p()}finally{hr()}}const C=Ts;Ts=h;try{return c?c(t,3,[m]):t(m)}finally{Ts=C}}:f=qn,e&&s){const C=f,k=s===!0?1/0:s;f=()=>sr(C(),k)}const x=_v(),N=()=>{h.stop(),x&&x.active&&nd(x.effects,h)};if(i&&e){const C=e;e=(...k)=>{C(...k),N()}}let D=v?new Array(t.length).fill(Oc):Oc;const E=C=>{if(!(!(h.flags&1)||!h.dirty&&!C))if(e){const k=h.run();if(s||y||(v?k.some((U,I)=>qr(U,D[I])):qr(k,D))){p&&p();const U=Ts;Ts=h;try{const I=[k,D===Oc?void 0:v&&D[0]===Oc?[]:D,m];D=k,c?c(e,3,I):e(...I)}finally{Ts=U}}}else h.run()};return a&&a(E),h=new yv(f),h.scheduler=o?()=>o(E,!1):E,m=C=>hR(C,!1,h),p=h.onStop=()=>{const C=du.get(h);if(C){if(c)c(C,4);else for(const k of C)k();du.delete(h)}},e?r?E(!0):D=h.run():o?o(E.bind(null,!0),!0):h.run(),N.pause=h.pause.bind(h),N.resume=h.resume.bind(h),N.stop=N,N}function sr(t,e=1/0,n){if(e<=0||!Me(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,at(t))sr(t.value,e,n);else if(le(t))for(let r=0;r<t.length;r++)sr(t[r],e,n);else if(Zu(t)||Di(t))t.forEach(r=>{sr(r,e,n)});else if(cv(t)){for(const r in t)sr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&sr(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function sc(t,e,n,r){try{return r?t(...r):t()}catch(s){Io(s,e,n)}}function Pn(t,e,n,r){if(de(t)){const s=sc(t,e,n,r);return s&&ov(s)&&s.catch(i=>{Io(i,e,n)}),s}if(le(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Pn(t[i],e,n,r));return s}}function Io(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Be;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,c,l)===!1)return}a=a.parent}if(i){lr(),sc(i,null,10,[t,c,l]),hr();return}}dR(t,n,s,r,o)}function dR(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const $t=[];let On=-1;const Oi=[];let Or=null,Ii=0;const kv=Promise.resolve();let pu=null;function Gi(t){const e=pu||kv;return t?e.then(this?t.bind(this):t):e}function pR(t){let e=On+1,n=$t.length;for(;e<n;){const r=e+n>>>1,s=$t[r],i=Da(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function ld(t){if(!(t.flags&1)){const e=Da(t),n=$t[$t.length-1];!n||!(t.flags&2)&&e>=Da(n)?$t.push(t):$t.splice(pR(e),0,t),t.flags|=1,Ov()}}function Ov(){pu||(pu=kv.then(Mv))}function Gh(t){le(t)?Oi.push(...t):Or&&t.id===-1?Or.splice(Ii+1,0,t):t.flags&1||(Oi.push(t),t.flags|=1),Ov()}function Km(t,e,n=On+1){for(;n<$t.length;n++){const r=$t[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;$t.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function mu(t){if(Oi.length){const e=[...new Set(Oi)].sort((n,r)=>Da(n)-Da(r));if(Oi.length=0,Or){Or.push(...e);return}for(Or=e,Ii=0;Ii<Or.length;Ii++){const n=Or[Ii];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Or=null,Ii=0}}const Da=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Mv(t){try{for(On=0;On<$t.length;On++){const e=$t[On];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),sc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;On<$t.length;On++){const e=$t[On];e&&(e.flags&=-2)}On=-1,$t.length=0,mu(),pu=null,($t.length||Oi.length)&&Mv()}}let At=null,Lv=null;function gu(t){const e=At;return At=t,Lv=t&&t.type.__scopeId||null,e}function hd(t,e=At,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&wu(-1);const i=gu(e);let o;try{o=t(...s)}finally{gu(i),r._d&&wu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function EF(t,e){if(At===null)return t;const n=hl(At),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=Be]=e[s];i&&(de(i)&&(i={mounted:i,updated:i}),i.deep&&sr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Mn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(lr(),Pn(c,n,8,[t.el,a,t,e]),hr())}}function Gr(t,e){if(It){let n=It.provides;const r=It.parent&&It.parent.provides;r===n&&(n=It.provides=Object.create(r)),n[t]=e}}function kt(t,e,n=!1){const r=bo();if(r||Ls){let s=Ls?Ls._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&de(e)?e.call(r&&r.proxy):e}}function fd(){return!!(bo()||Ls)}const mR=Symbol.for("v-scx"),gR=()=>kt(mR);function _R(t,e){return dd(t,null,e)}function zr(t,e,n){return dd(t,e,n)}function dd(t,e,n=Be){const{immediate:r,deep:s,flush:i,once:o}=n,a=vt({},n),c=e&&r||!e&&i!=="post";let l;if(Wi){if(i==="sync"){const m=gR();l=m.__watcherHandles||(m.__watcherHandles=[])}else if(!c){const m=()=>{};return m.stop=qn,m.resume=qn,m.pause=qn,m}}const h=It;a.call=(m,y,v)=>Pn(m,h,y,v);let f=!1;i==="post"?a.scheduler=m=>{gt(m,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,y)=>{y?m():ld(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=fR(t,e,a);return Wi&&(l?l.push(p):c&&p()),p}function yR(t,e,n){const r=this.proxy,s=Qe(t)?t.includes(".")?Fv(r,t):()=>r[t]:t.bind(r,r);let i;de(e)?i=e:(i=e.handler,n=e);const o=ac(this),a=dd(s,i.bind(r),n);return o(),a}function Fv(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const vR=Symbol("_vte"),Bv=t=>t.__isTeleport,nr=Symbol("_leaveCb"),Mc=Symbol("_enterCb");function ER(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return md(()=>{t.isMounted=!0}),oc(()=>{t.isUnmounting=!0}),t}const hn=[Function,Array],Uv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hn,onEnter:hn,onAfterEnter:hn,onEnterCancelled:hn,onBeforeLeave:hn,onLeave:hn,onAfterLeave:hn,onLeaveCancelled:hn,onBeforeAppear:hn,onAppear:hn,onAfterAppear:hn,onAppearCancelled:hn},jv=t=>{const e=t.subTree;return e.component?jv(e.component):e},wR={name:"BaseTransition",props:Uv,setup(t,{slots:e}){const n=bo(),r=ER();return()=>{const s=e.default&&Hv(e.default(),!0);if(!s||!s.length)return;const i=$v(s),o=Re(t),{mode:a}=o;if(r.isLeaving)return uh(i);const c=Wm(i);if(!c)return uh(i);let l=zh(c,o,r,n,f=>l=f);c.type!==it&&zi(c,l);let h=n.subTree&&Wm(n.subTree);if(h&&h.type!==it&&!wn(h,c)&&jv(n).type!==it){let f=zh(h,o,r,n);if(zi(h,f),a==="out-in"&&c.type!==it)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},uh(i);a==="in-out"&&c.type!==it?f.delayLeave=(p,m,y)=>{const v=qv(r,h);v[String(h.key)]=h,p[nr]=()=>{m(),p[nr]=void 0,delete l.delayedLeave,h=void 0},l.delayedLeave=()=>{y(),delete l.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function $v(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==it){e=n;break}}return e}const TR=wR;function qv(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function zh(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:y,onLeaveCancelled:v,onBeforeAppear:x,onAppear:N,onAfterAppear:D,onAppearCancelled:E}=e,C=String(t.key),k=qv(n,t),U=(w,R)=>{w&&Pn(w,r,9,R)},I=(w,R)=>{const P=R[1];U(w,R),le(w)?w.every(S=>S.length<=1)&&P():w.length<=1&&P()},T={mode:o,persisted:a,beforeEnter(w){let R=c;if(!n.isMounted)if(i)R=x||c;else return;w[nr]&&w[nr](!0);const P=k[C];P&&wn(t,P)&&P.el[nr]&&P.el[nr](),U(R,[w])},enter(w){let R=l,P=h,S=f;if(!n.isMounted)if(i)R=N||l,P=D||h,S=E||f;else return;let b=!1;const fe=w[Mc]=Te=>{b||(b=!0,Te?U(S,[w]):U(P,[w]),T.delayedLeave&&T.delayedLeave(),w[Mc]=void 0)};R?I(R,[w,fe]):fe()},leave(w,R){const P=String(t.key);if(w[Mc]&&w[Mc](!0),n.isUnmounting)return R();U(p,[w]);let S=!1;const b=w[nr]=fe=>{S||(S=!0,R(),fe?U(v,[w]):U(y,[w]),w[nr]=void 0,k[P]===t&&delete k[P])};k[P]=t,m?I(m,[w,b]):b()},clone(w){const R=zh(w,e,n,r,s);return s&&s(R),R}};return T}function uh(t){if(ic(t))return t=fr(t),t.children=null,t}function Wm(t){if(!ic(t))return Bv(t.type)&&t.children?$v(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&de(n.default))return n.default()}}function zi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,zi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Hv(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Tt?(o.patchFlag&128&&s++,r=r.concat(Hv(o.children,e,a))):(e||o.type!==it)&&r.push(a!=null?fr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function os(t,e){return de(t)?vt({name:t.name},e,{setup:t}):t}function pd(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const _u=new WeakMap;function Mi(t,e,n,r,s=!1){if(le(t)){t.forEach((y,v)=>Mi(y,e&&(le(e)?e[v]:e),n,r,s));return}if(ar(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Mi(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?hl(r.component):r.el,o=s?null:i,{i:a,r:c}=t,l=e&&e.r,h=a.refs===Be?a.refs={}:a.refs,f=a.setupState,p=Re(f),m=f===Be?iv:y=>De(p,y);if(l!=null&&l!==c){if(Qm(e),Qe(l))h[l]=null,m(l)&&(f[l]=null);else if(at(l)){l.value=null;const y=e;y.k&&(h[y.k]=null)}}if(de(c))sc(c,a,12,[o,h]);else{const y=Qe(c),v=at(c);if(y||v){const x=()=>{if(t.f){const N=y?m(c)?f[c]:h[c]:c.value;if(s)le(N)&&nd(N,i);else if(le(N))N.includes(i)||N.push(i);else if(y)h[c]=[i],m(c)&&(f[c]=h[c]);else{const D=[i];c.value=D,t.k&&(h[t.k]=D)}}else y?(h[c]=o,m(c)&&(f[c]=o)):v&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const N=()=>{x(),_u.delete(t)};N.id=-1,_u.set(t,N),gt(N,n)}else Qm(t),x()}}}function Qm(t){const e=_u.get(t);e&&(e.flags|=8,_u.delete(t))}let Jm=!1;const pi=()=>{Jm||(console.error("Hydration completed but contains mismatches."),Jm=!0)},IR=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",bR=t=>t.namespaceURI.includes("MathML"),Lc=t=>{if(t.nodeType===1){if(IR(t))return"svg";if(bR(t))return"mathml"}},xi=t=>t.nodeType===8;function AR(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:c,createComment:l}}=t,h=(E,C)=>{if(!C.hasChildNodes()){n(null,E,C),mu(),C._vnode=E;return}f(C.firstChild,E,null,null,null),mu(),C._vnode=E},f=(E,C,k,U,I,T=!1)=>{T=T||!!C.dynamicChildren;const w=xi(E)&&E.data==="[",R=()=>v(E,C,k,U,I,w),{type:P,ref:S,shapeFlag:b,patchFlag:fe}=C;let Te=E.nodeType;C.el=E,fe===-2&&(T=!1,C.dynamicChildren=null);let ie=null;switch(P){case Fs:Te!==3?C.children===""?(c(C.el=s(""),o(E),E),ie=E):ie=R():(E.data!==C.children&&(pi(),E.data=C.children),ie=i(E));break;case it:D(E)?(ie=i(E),N(C.el=E.content.firstChild,E,k)):Te!==8||w?ie=R():ie=i(E);break;case Jc:if(w&&(E=i(E),Te=E.nodeType),Te===1||Te===3){ie=E;const pe=!C.children.length;for(let re=0;re<C.staticCount;re++)pe&&(C.children+=ie.nodeType===1?ie.outerHTML:ie.data),re===C.staticCount-1&&(C.anchor=ie),ie=i(ie);return w?i(ie):ie}else R();break;case Tt:w?ie=y(E,C,k,U,I,T):ie=R();break;default:if(b&1)(Te!==1||C.type.toLowerCase()!==E.tagName.toLowerCase())&&!D(E)?ie=R():ie=p(E,C,k,U,I,T);else if(b&6){C.slotScopeIds=I;const pe=o(E);if(w?ie=x(E):xi(E)&&E.data==="teleport start"?ie=x(E,E.data,"teleport end"):ie=i(E),e(C,pe,null,k,U,Lc(pe),T),ar(C)&&!C.type.__asyncResolved){let re;w?(re=tt(Tt),re.anchor=ie?ie.previousSibling:pe.lastChild):re=E.nodeType===3?AE(""):tt("div"),re.el=E,C.component.subTree=re}}else b&64?Te!==8?ie=R():ie=C.type.hydrate(E,C,k,U,I,T,t,m):b&128&&(ie=C.type.hydrate(E,C,k,U,Lc(o(E)),I,T,t,f))}return S!=null&&Mi(S,null,U,C),ie},p=(E,C,k,U,I,T)=>{T=T||!!C.dynamicChildren;const{type:w,props:R,patchFlag:P,shapeFlag:S,dirs:b,transition:fe}=C,Te=w==="input"||w==="option";if(Te||P!==-1){b&&Mn(C,null,k,"created");let ie=!1;if(D(E)){ie=pE(null,fe)&&k&&k.vnode.props&&k.vnode.props.appear;const re=E.content.firstChild;if(ie){const Ce=re.getAttribute("class");Ce&&(re.$cls=Ce),fe.beforeEnter(re)}N(re,E,k),C.el=E=re}if(S&16&&!(R&&(R.innerHTML||R.textContent))){let re=m(E.firstChild,C,E,k,U,I,T);for(;re;){Fc(E,1)||pi();const Ce=re;re=re.nextSibling,a(Ce)}}else if(S&8){let re=C.children;re[0]===`
`&&(E.tagName==="PRE"||E.tagName==="TEXTAREA")&&(re=re.slice(1));const{textContent:Ce}=E;Ce!==re&&Ce!==re.replace(/\r\n|\r/g,`
`)&&(Fc(E,0)||pi(),E.textContent=C.children)}if(R){if(Te||!T||P&48){const re=E.tagName.includes("-");for(const Ce in R)(Te&&(Ce.endsWith("value")||Ce==="indeterminate")||rc(Ce)&&!Ni(Ce)||Ce[0]==="."||re)&&r(E,Ce,null,R[Ce],void 0,k)}else if(R.onClick)r(E,"onClick",null,R.onClick,void 0,k);else if(P&4&&Hr(R.style))for(const re in R.style)R.style[re]}let pe;(pe=R&&R.onVnodeBeforeMount)&&Kt(pe,k,C),b&&Mn(C,null,k,"beforeMount"),((pe=R&&R.onVnodeMounted)||b||ie)&&vE(()=>{pe&&Kt(pe,k,C),ie&&fe.enter(E),b&&Mn(C,null,k,"mounted")},U)}return E.nextSibling},m=(E,C,k,U,I,T,w)=>{w=w||!!C.dynamicChildren;const R=C.children,P=R.length;for(let S=0;S<P;S++){const b=w?R[S]:R[S]=rn(R[S]),fe=b.type===Fs;E?(fe&&!w&&S+1<P&&rn(R[S+1]).type===Fs&&(c(s(E.data.slice(b.children.length)),k,i(E)),E.data=b.children),E=f(E,b,U,I,T,w)):fe&&!b.children?c(b.el=s(""),k):(Fc(k,1)||pi(),n(null,b,k,null,U,I,Lc(k),T))}return E},y=(E,C,k,U,I,T)=>{const{slotScopeIds:w}=C;w&&(I=I?I.concat(w):w);const R=o(E),P=m(i(E),C,R,k,U,I,T);return P&&xi(P)&&P.data==="]"?i(C.anchor=P):(pi(),c(C.anchor=l("]"),R,P),P)},v=(E,C,k,U,I,T)=>{if(Fc(E.parentElement,1)||pi(),C.el=null,T){const P=x(E);for(;;){const S=i(E);if(S&&S!==P)a(S);else break}}const w=i(E),R=o(E);return a(E),n(null,C,R,w,k,U,Lc(R),I),k&&(k.vnode.el=C.el,ll(k,C.el)),w},x=(E,C="[",k="]")=>{let U=0;for(;E;)if(E=i(E),E&&xi(E)&&(E.data===C&&U++,E.data===k)){if(U===0)return i(E);U--}return E},N=(E,C,k)=>{const U=C.parentNode;U&&U.replaceChild(E,C);let I=k;for(;I;)I.vnode.el===C&&(I.vnode.el=I.subTree.el=E),I=I.parent},D=E=>E.nodeType===1&&E.tagName==="TEMPLATE";return[h,f]}const Ym="data-allow-mismatch",RR={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Fc(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Ym);)t=t.parentElement;const n=t&&t.getAttribute(Ym);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(RR[e])}}rl().requestIdleCallback;rl().cancelIdleCallback;function SR(t,e){if(xi(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(xi(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const ar=t=>!!t.type.__asyncLoader;function Kh(t){de(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:c}=t;let l=null,h,f=0;const p=()=>(f++,l=null,m()),m=()=>{let y;return l||(y=l=e().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),c)return new Promise((x,N)=>{c(v,()=>x(p()),()=>N(v),f+1)});throw v}).then(v=>y!==l&&l?l:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),h=v,v)))};return os({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(y,v,x){let N=!1;(v.bu||(v.bu=[])).push(()=>N=!0);const D=()=>{N||x()},E=i?()=>{const C=i(D,k=>SR(y,k));C&&(v.bum||(v.bum=[])).push(C)}:D;h?E():m().then(()=>!v.isUnmounted&&E())},get __asyncResolved(){return h},setup(){const y=It;if(pd(y),h)return()=>Bc(h,y);const v=E=>{l=null,Io(E,y,13,!r)};if(a&&y.suspense||Wi)return m().then(E=>()=>Bc(E,y)).catch(E=>(v(E),()=>r?tt(r,{error:E}):null));const x=or(!1),N=or(),D=or(!!s);return s&&setTimeout(()=>{D.value=!1},s),o!=null&&setTimeout(()=>{if(!x.value&&!N.value){const E=new Error(`Async component timed out after ${o}ms.`);v(E),N.value=E}},o),m().then(()=>{x.value=!0,y.parent&&ic(y.parent.vnode)&&y.parent.update()}).catch(E=>{v(E),N.value=E}),()=>{if(x.value&&h)return Bc(h,y);if(N.value&&r)return tt(r,{error:N.value});if(n&&!D.value)return Bc(n,y)}}})}function Bc(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=tt(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const ic=t=>t.type.__isKeepAlive,PR={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=bo(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:c,m:l,um:h,o:{createElement:f}}}=r,p=f("div");r.activate=(D,E,C,k,U)=>{const I=D.component;l(D,E,C,0,a),c(I.vnode,D,E,C,I,a,k,D.slotScopeIds,U),gt(()=>{I.isDeactivated=!1,I.a&&ki(I.a);const T=D.props&&D.props.onVnodeMounted;T&&Kt(T,I.parent,D)},a)},r.deactivate=D=>{const E=D.component;vu(E.m),vu(E.a),l(D,p,null,1,a),gt(()=>{E.da&&ki(E.da);const C=D.props&&D.props.onVnodeUnmounted;C&&Kt(C,E.parent,D),E.isDeactivated=!0},a)};function m(D){lh(D),h(D,n,a,!0)}function y(D){s.forEach((E,C)=>{const k=tf(ar(E)?E.type.__asyncResolved||{}:E.type);k&&!D(k)&&v(C)})}function v(D){const E=s.get(D);E&&(!o||!wn(E,o))?m(E):o&&lh(o),s.delete(D),i.delete(D)}zr(()=>[t.include,t.exclude],([D,E])=>{D&&y(C=>aa(D,C)),E&&y(C=>!aa(E,C))},{flush:"post",deep:!0});let x=null;const N=()=>{x!=null&&(Eu(n.subTree.type)?gt(()=>{s.set(x,Uc(n.subTree))},n.subTree.suspense):s.set(x,Uc(n.subTree)))};return md(N),Wv(N),oc(()=>{s.forEach(D=>{const{subTree:E,suspense:C}=n,k=Uc(E);if(D.type===k.type&&D.key===k.key){lh(k);const U=k.component.da;U&&gt(U,C);return}m(D)})}),()=>{if(x=null,!e.default)return o=null;const D=e.default(),E=D[0];if(D.length>1)return o=null,D;if(!js(E)||!(E.shapeFlag&4)&&!(E.shapeFlag&128))return o=null,E;let C=Uc(E);if(C.type===it)return o=null,C;const k=C.type,U=tf(ar(C)?C.type.__asyncResolved||{}:k),{include:I,exclude:T,max:w}=t;if(I&&(!U||!aa(I,U))||T&&U&&aa(T,U))return C.shapeFlag&=-257,o=C,E;const R=C.key==null?k:C.key,P=s.get(R);return C.el&&(C=fr(C),E.shapeFlag&128&&(E.ssContent=C)),x=R,P?(C.el=P.el,C.component=P.component,C.transition&&zi(C,C.transition),C.shapeFlag|=512,i.delete(R),i.add(R)):(i.add(R),w&&i.size>parseInt(w,10)&&v(i.values().next().value)),C.shapeFlag|=256,o=C,Eu(E.type)?E:C}}},CR=PR;function aa(t,e){return le(t)?t.some(n=>aa(n,e)):Qe(t)?t.split(",").includes(e):IA(t)?(t.lastIndex=0,t.test(e)):!1}function Gv(t,e){Kv(t,"a",e)}function zv(t,e){Kv(t,"da",e)}function Kv(t,e,n=It){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(cl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)ic(s.parent.vnode)&&xR(r,e,n,s),s=s.parent}}function xR(t,e,n,r){const s=cl(e,t,r,!0);Qv(()=>{nd(r[e],s)},n)}function lh(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Uc(t){return t.shapeFlag&128?t.ssContent:t}function cl(t,e,n=It,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{lr();const a=ac(n),c=Pn(e,n,t,o);return a(),hr(),c});return r?s.unshift(i):s.push(i),i}}const _r=t=>(e,n=It)=>{(!Wi||t==="sp")&&cl(t,(...r)=>e(...r),n)},VR=_r("bm"),md=_r("m"),DR=_r("bu"),Wv=_r("u"),oc=_r("bum"),Qv=_r("um"),NR=_r("sp"),kR=_r("rtg"),OR=_r("rtc");function Jv(t,e=It){cl("ec",t,e)}const Yv="components";function wF(t,e){return Zv(Yv,t,!0,e)||t}const Xv=Symbol.for("v-ndc");function MR(t){return Qe(t)?Zv(Yv,t,!1)||t:t||Xv}function Zv(t,e,n=!0,r=!1){const s=At||It;if(s){const i=s.type;{const a=tf(i,!1);if(a&&(a===e||a===_n(e)||a===nl(_n(e))))return i}const o=Xm(s[t]||i[t],e)||Xm(s.appContext[t],e);return!o&&r?i:o}}function Xm(t,e){return t&&(t[e]||t[_n(e)]||t[nl(_n(e))])}function TF(t,e,n,r){let s;const i=n,o=le(t);if(o||Qe(t)){const a=o&&Hr(t);let c=!1,l=!1;a&&(c=!on(t),l=zn(t),t=ol(t)),s=new Array(t.length);for(let h=0,f=t.length;h<f;h++)s[h]=e(c?l?qi(Sn(t[h])):Sn(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(Me(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const h=a[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}function IF(t,e,n={},r,s){if(At.ce||At.parent&&ar(At.parent)&&At.parent.ce){const l=Object.keys(n).length>0;return pn(),Bn(Tt,null,[tt("slot",n,r)],l?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),pn();const o=i&&eE(i(n)),a=n.key||o&&o.key,c=Bn(Tt,{key:(a&&!Rn(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function eE(t){return t.some(e=>js(e)?!(e.type===it||e.type===Tt&&!eE(e.children)):!0)?t:null}const Wh=t=>t?SE(t)?hl(t):Wh(t.parent):null,ga=vt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Wh(t.parent),$root:t=>Wh(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>nE(t),$forceUpdate:t=>t.f||(t.f=()=>{ld(t.update)}),$nextTick:t=>t.n||(t.n=Gi.bind(t.proxy)),$watch:t=>yR.bind(t)}),hh=(t,e)=>t!==Be&&!t.__isScriptSetup&&De(t,e),LR={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(hh(r,e))return o[e]=1,r[e];if(s!==Be&&De(s,e))return o[e]=2,s[e];if(De(i,e))return o[e]=3,i[e];if(n!==Be&&De(n,e))return o[e]=4,n[e];Qh&&(o[e]=0)}}const l=ga[e];let h,f;if(l)return e==="$attrs"&&Vt(t.attrs,"get",""),l(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Be&&De(n,e))return o[e]=4,n[e];if(f=c.config.globalProperties,De(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return hh(s,e)?(s[e]=n,!0):r!==Be&&De(r,e)?(r[e]=n,!0):De(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},a){let c;return!!(n[a]||t!==Be&&a[0]!=="$"&&De(t,a)||hh(e,a)||De(i,a)||De(r,a)||De(ga,a)||De(s.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:De(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Zm(t){return le(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Qh=!0;function FR(t){const e=nE(t),n=t.proxy,r=t.ctx;Qh=!1,e.beforeCreate&&eg(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:h,beforeMount:f,mounted:p,beforeUpdate:m,updated:y,activated:v,deactivated:x,beforeDestroy:N,beforeUnmount:D,destroyed:E,unmounted:C,render:k,renderTracked:U,renderTriggered:I,errorCaptured:T,serverPrefetch:w,expose:R,inheritAttrs:P,components:S,directives:b,filters:fe}=e;if(l&&BR(l,r,null),o)for(const pe in o){const re=o[pe];de(re)&&(r[pe]=re.bind(n))}if(s){const pe=s.call(n,n);Me(pe)&&(t.data=gr(pe))}if(Qh=!0,i)for(const pe in i){const re=i[pe],Ce=de(re)?re.bind(n,n):de(re.get)?re.get.bind(n,n):qn,Dn=!de(re)&&de(re.set)?re.set.bind(n):qn,Zt=sn({get:Ce,set:Dn});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>Zt.value,set:Et=>Zt.value=Et})}if(a)for(const pe in a)tE(a[pe],r,n,pe);if(c){const pe=de(c)?c.call(n):c;Reflect.ownKeys(pe).forEach(re=>{Gr(re,pe[re])})}h&&eg(h,t,"c");function ie(pe,re){le(re)?re.forEach(Ce=>pe(Ce.bind(n))):re&&pe(re.bind(n))}if(ie(VR,f),ie(md,p),ie(DR,m),ie(Wv,y),ie(Gv,v),ie(zv,x),ie(Jv,T),ie(OR,U),ie(kR,I),ie(oc,D),ie(Qv,C),ie(NR,w),le(R))if(R.length){const pe=t.exposed||(t.exposed={});R.forEach(re=>{Object.defineProperty(pe,re,{get:()=>n[re],set:Ce=>n[re]=Ce,enumerable:!0})})}else t.exposed||(t.exposed={});k&&t.render===qn&&(t.render=k),P!=null&&(t.inheritAttrs=P),S&&(t.components=S),b&&(t.directives=b),w&&pd(t)}function BR(t,e,n=qn){le(t)&&(t=Jh(t));for(const r in t){const s=t[r];let i;Me(s)?"default"in s?i=kt(s.from||r,s.default,!0):i=kt(s.from||r):i=kt(s),at(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function eg(t,e,n){Pn(le(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function tE(t,e,n,r){let s=r.includes(".")?Fv(n,r):()=>n[r];if(Qe(t)){const i=e[t];de(i)&&zr(s,i)}else if(de(t))zr(s,t.bind(n));else if(Me(t))if(le(t))t.forEach(i=>tE(i,e,n,r));else{const i=de(t.handler)?t.handler.bind(n):e[t.handler];de(i)&&zr(s,i,t)}}function nE(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(l=>yu(c,l,o,!0)),yu(c,e,o)),Me(e)&&i.set(e,c),c}function yu(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&yu(t,i,n,!0),s&&s.forEach(o=>yu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=UR[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const UR={data:tg,props:ng,emits:ng,methods:ca,computed:ca,beforeCreate:Ft,created:Ft,beforeMount:Ft,mounted:Ft,beforeUpdate:Ft,updated:Ft,beforeDestroy:Ft,beforeUnmount:Ft,destroyed:Ft,unmounted:Ft,activated:Ft,deactivated:Ft,errorCaptured:Ft,serverPrefetch:Ft,components:ca,directives:ca,watch:$R,provide:tg,inject:jR};function tg(t,e){return e?t?function(){return vt(de(t)?t.call(this,this):t,de(e)?e.call(this,this):e)}:e:t}function jR(t,e){return ca(Jh(t),Jh(e))}function Jh(t){if(le(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ft(t,e){return t?[...new Set([].concat(t,e))]:e}function ca(t,e){return t?vt(Object.create(null),t,e):e}function ng(t,e){return t?le(t)&&le(e)?[...new Set([...t,...e])]:vt(Object.create(null),Zm(t),Zm(e??{})):e}function $R(t,e){if(!t)return e;if(!e)return t;const n=vt(Object.create(null),t);for(const r in e)n[r]=Ft(t[r],e[r]);return n}function rE(){return{app:null,config:{isNativeTag:iv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qR=0;function HR(t,e){return function(r,s=null){de(r)||(r=vt({},r)),s!=null&&!Me(s)&&(s=null);const i=rE(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:qR++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:IS,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&de(h.install)?(o.add(h),h.install(l,...f)):de(h)&&(o.add(h),h(l,...f))),l},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),l},component(h,f){return f?(i.components[h]=f,l):i.components[h]},directive(h,f){return f?(i.directives[h]=f,l):i.directives[h]},mount(h,f,p){if(!c){const m=l._ceVNode||tt(r,s);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(m,h):t(m,h,p),c=!0,l._container=h,h.__vue_app__=l,hl(m.component)}},onUnmount(h){a.push(h)},unmount(){c&&(Pn(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(h,f){return i.provides[h]=f,l},runWithContext(h){const f=Ls;Ls=l;try{return h()}finally{Ls=f}}};return l}}let Ls=null;const GR=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${_n(e)}Modifiers`]||t[`${ti(e)}Modifiers`];function zR(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Be;let s=n;const i=e.startsWith("update:"),o=i&&GR(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Qe(h)?h.trim():h)),o.number&&(s=n.map(rd)));let a,c=r[a=sh(e)]||r[a=sh(_n(e))];!c&&i&&(c=r[a=sh(ti(e))]),c&&Pn(c,t,6,s);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Pn(l,t,6,s)}}const KR=new WeakMap;function sE(t,e,n=!1){const r=n?KR:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!de(t)){const c=l=>{const h=sE(l,e,!0);h&&(a=!0,vt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Me(t)&&r.set(t,null),null):(le(i)?i.forEach(c=>o[c]=null):vt(o,i),Me(t)&&r.set(t,o),o)}function ul(t,e){return!t||!rc(e)?!1:(e=e.slice(2).replace(/Once$/,""),De(t,e[0].toLowerCase()+e.slice(1))||De(t,ti(e))||De(t,e))}function fh(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:h,props:f,data:p,setupState:m,ctx:y,inheritAttrs:v}=t,x=gu(t);let N,D;try{if(n.shapeFlag&4){const C=s||r,k=C;N=rn(l.call(k,C,h,f,m,p,y)),D=a}else{const C=e;N=rn(C.length>1?C(f,{attrs:a,slots:o,emit:c}):C(f,null)),D=e.props?a:QR(a)}}catch(C){_a.length=0,Io(C,t,1),N=tt(it)}let E=N;if(D&&v!==!1){const C=Object.keys(D),{shapeFlag:k}=E;C.length&&k&7&&(i&&C.some(td)&&(D=JR(D,i)),E=fr(E,D,!1,!0))}return n.dirs&&(E=fr(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&zi(E,n.transition),N=E,gu(x),N}function WR(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(js(s)){if(s.type!==it||s.children==="v-if"){if(n)return;n=s}}else return}return n}const QR=t=>{let e;for(const n in t)(n==="class"||n==="style"||rc(n))&&((e||(e={}))[n]=t[n]);return e},JR=(t,e)=>{const n={};for(const r in t)(!td(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function YR(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?rg(r,o,l):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==r[p]&&!ul(l,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?rg(r,o,l):!0:!!o;return!1}function rg(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ul(n,i))return!0}return!1}function ll({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const iE={},oE=()=>Object.create(iE),aE=t=>Object.getPrototypeOf(t)===iE;function XR(t,e,n,r=!1){const s={},i=oE();t.propsDefaults=Object.create(null),cE(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Un(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function ZR(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Re(s),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(ul(t.emitsOptions,p))continue;const m=e[p];if(c)if(De(i,p))m!==i[p]&&(i[p]=m,l=!0);else{const y=_n(p);s[y]=Yh(c,a,y,m,t,!1)}else m!==i[p]&&(i[p]=m,l=!0)}}}else{cE(t,e,s,i)&&(l=!0);let h;for(const f in a)(!e||!De(e,f)&&((h=ti(f))===f||!De(e,h)))&&(c?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=Yh(c,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!De(e,f))&&(delete i[f],l=!0)}l&&rr(t.attrs,"set","")}function cE(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Ni(c))continue;const l=e[c];let h;s&&De(s,h=_n(c))?!i||!i.includes(h)?n[h]=l:(a||(a={}))[h]=l:ul(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=Re(n),l=a||Be;for(let h=0;h<i.length;h++){const f=i[h];n[f]=Yh(s,c,f,l[f],t,!De(l,f))}}return o}function Yh(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=De(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&de(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const h=ac(s);r=l[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===ti(n))&&(r=!0))}return r}const eS=new WeakMap;function uE(t,e,n=!1){const r=n?eS:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!de(t)){const h=f=>{c=!0;const[p,m]=uE(f,e,!0);vt(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Me(t)&&r.set(t,Vi),Vi;if(le(i))for(let h=0;h<i.length;h++){const f=_n(i[h]);sg(f)&&(o[f]=Be)}else if(i)for(const h in i){const f=_n(h);if(sg(f)){const p=i[h],m=o[f]=le(p)||de(p)?{type:p}:vt({},p),y=m.type;let v=!1,x=!0;if(le(y))for(let N=0;N<y.length;++N){const D=y[N],E=de(D)&&D.name;if(E==="Boolean"){v=!0;break}else E==="String"&&(x=!1)}else v=de(y)&&y.name==="Boolean";m[0]=v,m[1]=x,(v||De(m,"default"))&&a.push(f)}}const l=[o,a];return Me(t)&&r.set(t,l),l}function sg(t){return t[0]!=="$"&&!Ni(t)}const gd=t=>t==="_"||t==="_ctx"||t==="$stable",_d=t=>le(t)?t.map(rn):[rn(t)],tS=(t,e,n)=>{if(e._n)return e;const r=hd((...s)=>_d(e(...s)),n);return r._c=!1,r},lE=(t,e,n)=>{const r=t._ctx;for(const s in t){if(gd(s))continue;const i=t[s];if(de(i))e[s]=tS(s,i,r);else if(i!=null){const o=_d(i);e[s]=()=>o}}},hE=(t,e)=>{const n=_d(e);t.slots.default=()=>n},fE=(t,e,n)=>{for(const r in e)(n||!gd(r))&&(t[r]=e[r])},nS=(t,e,n)=>{const r=t.slots=oE();if(t.vnode.shapeFlag&32){const s=e._;s?(fE(r,e,n),n&&uv(r,"_",s,!0)):lE(e,r)}else e&&hE(t,e)},rS=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Be;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:fE(s,e,n):(i=!e.$stable,lE(e,s)),o=e}else e&&(hE(t,e),o={default:1});if(i)for(const a in s)!gd(a)&&o[a]==null&&delete s[a]},gt=vE;function sS(t){return dE(t)}function iS(t){return dE(t,AR)}function dE(t,e){const n=rl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:h,parentNode:f,nextSibling:p,setScopeId:m=qn,insertStaticContent:y}=t,v=(A,V,L,H=null,j=null,z=null,Q=void 0,W=null,J=!!V.dynamicChildren)=>{if(A===V)return;A&&!wn(A,V)&&(H=$(A),Et(A,j,z,!0),A=null),V.patchFlag===-2&&(J=!1,V.dynamicChildren=null);const{type:K,ref:he,shapeFlag:te}=V;switch(K){case Fs:x(A,V,L,H);break;case it:N(A,V,L,H);break;case Jc:A==null&&D(V,L,H,Q);break;case Tt:S(A,V,L,H,j,z,Q,W,J);break;default:te&1?k(A,V,L,H,j,z,Q,W,J):te&6?b(A,V,L,H,j,z,Q,W,J):(te&64||te&128)&&K.process(A,V,L,H,j,z,Q,W,J,ue)}he!=null&&j?Mi(he,A&&A.ref,z,V||A,!V):he==null&&A&&A.ref!=null&&Mi(A.ref,null,z,A,!0)},x=(A,V,L,H)=>{if(A==null)r(V.el=a(V.children),L,H);else{const j=V.el=A.el;V.children!==A.children&&l(j,V.children)}},N=(A,V,L,H)=>{A==null?r(V.el=c(V.children||""),L,H):V.el=A.el},D=(A,V,L,H)=>{[A.el,A.anchor]=y(A.children,V,L,H,A.el,A.anchor)},E=({el:A,anchor:V},L,H)=>{let j;for(;A&&A!==V;)j=p(A),r(A,L,H),A=j;r(V,L,H)},C=({el:A,anchor:V})=>{let L;for(;A&&A!==V;)L=p(A),s(A),A=L;s(V)},k=(A,V,L,H,j,z,Q,W,J)=>{if(V.type==="svg"?Q="svg":V.type==="math"&&(Q="mathml"),A==null)U(V,L,H,j,z,Q,W,J);else{const K=A.el&&A.el._isVueCE?A.el:null;try{K&&K._beginPatch(),w(A,V,j,z,Q,W,J)}finally{K&&K._endPatch()}}},U=(A,V,L,H,j,z,Q,W)=>{let J,K;const{props:he,shapeFlag:te,transition:ae,dirs:me}=A;if(J=A.el=o(A.type,z,he&&he.is,he),te&8?h(J,A.children):te&16&&T(A.children,J,null,H,j,dh(A,z),Q,W),me&&Mn(A,null,H,"created"),I(J,A,A.scopeId,Q,H),he){for(const xe in he)xe!=="value"&&!Ni(xe)&&i(J,xe,null,he[xe],z,H);"value"in he&&i(J,"value",null,he.value,z),(K=he.onVnodeBeforeMount)&&Kt(K,H,A)}me&&Mn(A,null,H,"beforeMount");const Ee=pE(j,ae);Ee&&ae.beforeEnter(J),r(J,V,L),((K=he&&he.onVnodeMounted)||Ee||me)&&gt(()=>{K&&Kt(K,H,A),Ee&&ae.enter(J),me&&Mn(A,null,H,"mounted")},j)},I=(A,V,L,H,j)=>{if(L&&m(A,L),H)for(let z=0;z<H.length;z++)m(A,H[z]);if(j){let z=j.subTree;if(V===z||Eu(z.type)&&(z.ssContent===V||z.ssFallback===V)){const Q=j.vnode;I(A,Q,Q.scopeId,Q.slotScopeIds,j.parent)}}},T=(A,V,L,H,j,z,Q,W,J=0)=>{for(let K=J;K<A.length;K++){const he=A[K]=W?Mr(A[K]):rn(A[K]);v(null,he,V,L,H,j,z,Q,W)}},w=(A,V,L,H,j,z,Q)=>{const W=V.el=A.el;let{patchFlag:J,dynamicChildren:K,dirs:he}=V;J|=A.patchFlag&16;const te=A.props||Be,ae=V.props||Be;let me;if(L&&_s(L,!1),(me=ae.onVnodeBeforeUpdate)&&Kt(me,L,V,A),he&&Mn(V,A,L,"beforeUpdate"),L&&_s(L,!0),(te.innerHTML&&ae.innerHTML==null||te.textContent&&ae.textContent==null)&&h(W,""),K?R(A.dynamicChildren,K,W,L,H,dh(V,j),z):Q||re(A,V,W,null,L,H,dh(V,j),z,!1),J>0){if(J&16)P(W,te,ae,L,j);else if(J&2&&te.class!==ae.class&&i(W,"class",null,ae.class,j),J&4&&i(W,"style",te.style,ae.style,j),J&8){const Ee=V.dynamicProps;for(let xe=0;xe<Ee.length;xe++){const Pe=Ee[xe],Pt=te[Pe],ut=ae[Pe];(ut!==Pt||Pe==="value")&&i(W,Pe,Pt,ut,j,L)}}J&1&&A.children!==V.children&&h(W,V.children)}else!Q&&K==null&&P(W,te,ae,L,j);((me=ae.onVnodeUpdated)||he)&&gt(()=>{me&&Kt(me,L,V,A),he&&Mn(V,A,L,"updated")},H)},R=(A,V,L,H,j,z,Q)=>{for(let W=0;W<V.length;W++){const J=A[W],K=V[W],he=J.el&&(J.type===Tt||!wn(J,K)||J.shapeFlag&198)?f(J.el):L;v(J,K,he,null,H,j,z,Q,!0)}},P=(A,V,L,H,j)=>{if(V!==L){if(V!==Be)for(const z in V)!Ni(z)&&!(z in L)&&i(A,z,V[z],null,j,H);for(const z in L){if(Ni(z))continue;const Q=L[z],W=V[z];Q!==W&&z!=="value"&&i(A,z,W,Q,j,H)}"value"in L&&i(A,"value",V.value,L.value,j)}},S=(A,V,L,H,j,z,Q,W,J)=>{const K=V.el=A?A.el:a(""),he=V.anchor=A?A.anchor:a("");let{patchFlag:te,dynamicChildren:ae,slotScopeIds:me}=V;me&&(W=W?W.concat(me):me),A==null?(r(K,L,H),r(he,L,H),T(V.children||[],L,he,j,z,Q,W,J)):te>0&&te&64&&ae&&A.dynamicChildren&&A.dynamicChildren.length===ae.length?(R(A.dynamicChildren,ae,L,j,z,Q,W),(V.key!=null||j&&V===j.subTree)&&mE(A,V,!0)):re(A,V,L,he,j,z,Q,W,J)},b=(A,V,L,H,j,z,Q,W,J)=>{V.slotScopeIds=W,A==null?V.shapeFlag&512?j.ctx.activate(V,L,H,Q,J):fe(V,L,H,j,z,Q,J):Te(A,V,J)},fe=(A,V,L,H,j,z,Q)=>{const W=A.component=_S(A,H,j);if(ic(A)&&(W.ctx.renderer=ue),yS(W,!1,Q),W.asyncDep){if(j&&j.registerDep(W,ie,Q),!A.el){const J=W.subTree=tt(it);N(null,J,V,L),A.placeholder=J.el}}else ie(W,A,V,L,j,z,Q)},Te=(A,V,L)=>{const H=V.component=A.component;if(YR(A,V,L))if(H.asyncDep&&!H.asyncResolved){pe(H,V,L);return}else H.next=V,H.update();else V.el=A.el,H.vnode=V},ie=(A,V,L,H,j,z,Q)=>{const W=()=>{if(A.isMounted){let{next:te,bu:ae,u:me,parent:Ee,vnode:xe}=A;{const lt=gE(A);if(lt){te&&(te.el=xe.el,pe(A,te,Q)),lt.asyncDep.then(()=>{A.isUnmounted||W()});return}}let Pe=te,Pt;_s(A,!1),te?(te.el=xe.el,pe(A,te,Q)):te=xe,ae&&ki(ae),(Pt=te.props&&te.props.onVnodeBeforeUpdate)&&Kt(Pt,Ee,te,xe),_s(A,!0);const ut=fh(A),Gt=A.subTree;A.subTree=ut,v(Gt,ut,f(Gt.el),$(Gt),A,j,z),te.el=ut.el,Pe===null&&ll(A,ut.el),me&&gt(me,j),(Pt=te.props&&te.props.onVnodeUpdated)&&gt(()=>Kt(Pt,Ee,te,xe),j)}else{let te;const{el:ae,props:me}=V,{bm:Ee,m:xe,parent:Pe,root:Pt,type:ut}=A,Gt=ar(V);if(_s(A,!1),Ee&&ki(Ee),!Gt&&(te=me&&me.onVnodeBeforeMount)&&Kt(te,Pe,V),_s(A,!0),ae&&Le){const lt=()=>{A.subTree=fh(A),Le(ae,A.subTree,A,j,null)};Gt&&ut.__asyncHydrate?ut.__asyncHydrate(ae,A,lt):lt()}else{Pt.ce&&Pt.ce._def.shadowRoot!==!1&&Pt.ce._injectChildStyle(ut);const lt=A.subTree=fh(A);v(null,lt,L,H,A,j,z),V.el=lt.el}if(xe&&gt(xe,j),!Gt&&(te=me&&me.onVnodeMounted)){const lt=V;gt(()=>Kt(te,Pe,lt),j)}(V.shapeFlag&256||Pe&&ar(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&A.a&&gt(A.a,j),A.isMounted=!0,V=L=H=null}};A.scope.on();const J=A.effect=new yv(W);A.scope.off();const K=A.update=J.run.bind(J),he=A.job=J.runIfDirty.bind(J);he.i=A,he.id=A.uid,J.scheduler=()=>ld(he),_s(A,!0),K()},pe=(A,V,L)=>{V.component=A;const H=A.vnode.props;A.vnode=V,A.next=null,ZR(A,V.props,H,L),rS(A,V.children,L),lr(),Km(A),hr()},re=(A,V,L,H,j,z,Q,W,J=!1)=>{const K=A&&A.children,he=A?A.shapeFlag:0,te=V.children,{patchFlag:ae,shapeFlag:me}=V;if(ae>0){if(ae&128){Dn(K,te,L,H,j,z,Q,W,J);return}else if(ae&256){Ce(K,te,L,H,j,z,Q,W,J);return}}me&8?(he&16&&St(K,j,z),te!==K&&h(L,te)):he&16?me&16?Dn(K,te,L,H,j,z,Q,W,J):St(K,j,z,!0):(he&8&&h(L,""),me&16&&T(te,L,H,j,z,Q,W,J))},Ce=(A,V,L,H,j,z,Q,W,J)=>{A=A||Vi,V=V||Vi;const K=A.length,he=V.length,te=Math.min(K,he);let ae;for(ae=0;ae<te;ae++){const me=V[ae]=J?Mr(V[ae]):rn(V[ae]);v(A[ae],me,L,null,j,z,Q,W,J)}K>he?St(A,j,z,!0,!1,te):T(V,L,H,j,z,Q,W,J,te)},Dn=(A,V,L,H,j,z,Q,W,J)=>{let K=0;const he=V.length;let te=A.length-1,ae=he-1;for(;K<=te&&K<=ae;){const me=A[K],Ee=V[K]=J?Mr(V[K]):rn(V[K]);if(wn(me,Ee))v(me,Ee,L,null,j,z,Q,W,J);else break;K++}for(;K<=te&&K<=ae;){const me=A[te],Ee=V[ae]=J?Mr(V[ae]):rn(V[ae]);if(wn(me,Ee))v(me,Ee,L,null,j,z,Q,W,J);else break;te--,ae--}if(K>te){if(K<=ae){const me=ae+1,Ee=me<he?V[me].el:H;for(;K<=ae;)v(null,V[K]=J?Mr(V[K]):rn(V[K]),L,Ee,j,z,Q,W,J),K++}}else if(K>ae)for(;K<=te;)Et(A[K],j,z,!0),K++;else{const me=K,Ee=K,xe=new Map;for(K=Ee;K<=ae;K++){const Ze=V[K]=J?Mr(V[K]):rn(V[K]);Ze.key!=null&&xe.set(Ze.key,K)}let Pe,Pt=0;const ut=ae-Ee+1;let Gt=!1,lt=0;const Yn=new Array(ut);for(K=0;K<ut;K++)Yn[K]=0;for(K=me;K<=te;K++){const Ze=A[K];if(Pt>=ut){Et(Ze,j,z,!0);continue}let en;if(Ze.key!=null)en=xe.get(Ze.key);else for(Pe=Ee;Pe<=ae;Pe++)if(Yn[Pe-Ee]===0&&wn(Ze,V[Pe])){en=Pe;break}en===void 0?Et(Ze,j,z,!0):(Yn[en-Ee]=K+1,en>=lt?lt=en:Gt=!0,v(Ze,V[en],L,null,j,z,Q,W,J),Pt++)}const ui=Gt?oS(Yn):Vi;for(Pe=ui.length-1,K=ut-1;K>=0;K--){const Ze=Ee+K,en=V[Ze],fs=V[Ze+1],ko=Ze+1<he?fs.el||_E(fs):H;Yn[K]===0?v(null,en,L,ko,j,z,Q,W,J):Gt&&(Pe<0||K!==ui[Pe]?Zt(en,L,ko,2):Pe--)}}},Zt=(A,V,L,H,j=null)=>{const{el:z,type:Q,transition:W,children:J,shapeFlag:K}=A;if(K&6){Zt(A.component.subTree,V,L,H);return}if(K&128){A.suspense.move(V,L,H);return}if(K&64){Q.move(A,V,L,ue);return}if(Q===Tt){r(z,V,L);for(let te=0;te<J.length;te++)Zt(J[te],V,L,H);r(A.anchor,V,L);return}if(Q===Jc){E(A,V,L);return}if(H!==2&&K&1&&W)if(H===0)W.beforeEnter(z),r(z,V,L),gt(()=>W.enter(z),j);else{const{leave:te,delayLeave:ae,afterLeave:me}=W,Ee=()=>{A.ctx.isUnmounted?s(z):r(z,V,L)},xe=()=>{z._isLeaving&&z[nr](!0),te(z,()=>{Ee(),me&&me()})};ae?ae(z,Ee,xe):xe()}else r(z,V,L)},Et=(A,V,L,H=!1,j=!1)=>{const{type:z,props:Q,ref:W,children:J,dynamicChildren:K,shapeFlag:he,patchFlag:te,dirs:ae,cacheIndex:me}=A;if(te===-2&&(j=!1),W!=null&&(lr(),Mi(W,null,L,A,!0),hr()),me!=null&&(V.renderCache[me]=void 0),he&256){V.ctx.deactivate(A);return}const Ee=he&1&&ae,xe=!ar(A);let Pe;if(xe&&(Pe=Q&&Q.onVnodeBeforeUnmount)&&Kt(Pe,V,A),he&6)vn(A.component,L,H);else{if(he&128){A.suspense.unmount(L,H);return}Ee&&Mn(A,null,V,"beforeUnmount"),he&64?A.type.remove(A,V,L,ue,H):K&&!K.hasOnce&&(z!==Tt||te>0&&te&64)?St(K,V,L,!1,!0):(z===Tt&&te&384||!j&&he&16)&&St(J,V,L),H&&Jn(A)}(xe&&(Pe=Q&&Q.onVnodeUnmounted)||Ee)&&gt(()=>{Pe&&Kt(Pe,V,A),Ee&&Mn(A,null,V,"unmounted")},L)},Jn=A=>{const{type:V,el:L,anchor:H,transition:j}=A;if(V===Tt){yn(L,H);return}if(V===Jc){C(A);return}const z=()=>{s(L),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(A.shapeFlag&1&&j&&!j.persisted){const{leave:Q,delayLeave:W}=j,J=()=>Q(L,z);W?W(A.el,z,J):J()}else z()},yn=(A,V)=>{let L;for(;A!==V;)L=p(A),s(A),A=L;s(V)},vn=(A,V,L)=>{const{bum:H,scope:j,job:z,subTree:Q,um:W,m:J,a:K}=A;vu(J),vu(K),H&&ki(H),j.stop(),z&&(z.flags|=8,Et(Q,A,V,L)),W&&gt(W,V),gt(()=>{A.isUnmounted=!0},V)},St=(A,V,L,H=!1,j=!1,z=0)=>{for(let Q=z;Q<A.length;Q++)Et(A[Q],V,L,H,j)},$=A=>{if(A.shapeFlag&6)return $(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const V=p(A.anchor||A.el),L=V&&V[vR];return L?p(L):V};let se=!1;const ee=(A,V,L)=>{let H;A==null?V._vnode&&(Et(V._vnode,null,null,!0),H=V._vnode.component):v(V._vnode||null,A,V,null,null,null,L),V._vnode=A,se||(se=!0,Km(H),mu(),se=!1)},ue={p:v,um:Et,m:Zt,r:Jn,mt:fe,mc:T,pc:re,pbc:R,n:$,o:t};let ve,Le;return e&&([ve,Le]=e(ue)),{render:ee,hydrate:ve,createApp:HR(ee,ve)}}function dh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function _s({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function pE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function mE(t,e,n=!1){const r=t.children,s=e.children;if(le(r)&&le(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Mr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&mE(o,a)),a.type===Fs&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===Tt?1:0)),a.type===it&&!a.el&&(a.el=o.el)}}function oS(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(s=n[n.length-1],t[s]<l){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function gE(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:gE(e)}function vu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function _E(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?_E(e.subTree):null}const Eu=t=>t.__isSuspense;let Xh=0;const aS={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,c,l){if(t==null)cS(e,n,r,s,i,o,a,c,l);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}uS(t,e,n,r,s,o,a,c,l)}},hydrate:lS,normalize:hS},yd=aS;function Na(t,e){const n=t.props&&t.props[e];de(n)&&n()}function cS(t,e,n,r,s,i,o,a,c){const{p:l,o:{createElement:h}}=c,f=h("div"),p=t.suspense=yE(t,s,r,e,f,n,i,o,a,c);l(null,p.pendingBranch=t.ssContent,f,null,r,p,i,o),p.deps>0?(Na(t,"onPending"),Na(t,"onFallback"),l(null,t.ssFallback,e,n,r,null,i,o),Li(p,t.ssFallback)):p.resolve(!1,!0)}function uS(t,e,n,r,s,i,o,a,{p:c,um:l,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,m=e.ssFallback,{activeBranch:y,pendingBranch:v,isInFallback:x,isHydrating:N}=f;if(v)f.pendingBranch=p,wn(v,p)?(c(v,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():x&&(N||(c(y,m,n,r,s,null,i,o,a),Li(f,m)))):(f.pendingId=Xh++,N?(f.isHydrating=!1,f.activeBranch=v):l(v,s,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),x?(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():(c(y,m,n,r,s,null,i,o,a),Li(f,m))):y&&wn(y,p)?(c(y,p,n,r,s,f,i,o,a),f.resolve(!0)):(c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0&&f.resolve()));else if(y&&wn(y,p))c(y,p,n,r,s,f,i,o,a),Li(f,p);else if(Na(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=Xh++,c(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:D,pendingId:E}=f;D>0?setTimeout(()=>{f.pendingId===E&&f.fallback(m)},D):D===0&&f.fallback(m)}}function yE(t,e,n,r,s,i,o,a,c,l,h=!1){const{p:f,m:p,um:m,n:y,o:{parentNode:v,remove:x}}=l;let N;const D=fS(t);D&&e&&e.pendingBranch&&(N=e.pendingId,e.deps++);const E=t.props?lv(t.props.timeout):void 0,C=i,k={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:Xh++,timeout:typeof E=="number"?E:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(U=!1,I=!1){const{vnode:T,activeBranch:w,pendingBranch:R,pendingId:P,effects:S,parentComponent:b,container:fe,isInFallback:Te}=k;let ie=!1;k.isHydrating?k.isHydrating=!1:U||(ie=w&&R.transition&&R.transition.mode==="out-in",ie&&(w.transition.afterLeave=()=>{P===k.pendingId&&(p(R,fe,i===C?y(w):i,0),Gh(S),Te&&T.ssFallback&&(T.ssFallback.el=null))}),w&&(v(w.el)===fe&&(i=y(w)),m(w,b,k,!0),!ie&&Te&&T.ssFallback&&gt(()=>T.ssFallback.el=null,k)),ie||p(R,fe,i,0)),Li(k,R),k.pendingBranch=null,k.isInFallback=!1;let pe=k.parent,re=!1;for(;pe;){if(pe.pendingBranch){pe.effects.push(...S),re=!0;break}pe=pe.parent}!re&&!ie&&Gh(S),k.effects=[],D&&e&&e.pendingBranch&&N===e.pendingId&&(e.deps--,e.deps===0&&!I&&e.resolve()),Na(T,"onResolve")},fallback(U){if(!k.pendingBranch)return;const{vnode:I,activeBranch:T,parentComponent:w,container:R,namespace:P}=k;Na(I,"onFallback");const S=y(T),b=()=>{k.isInFallback&&(f(null,U,R,S,w,null,P,a,c),Li(k,U))},fe=U.transition&&U.transition.mode==="out-in";fe&&(T.transition.afterLeave=b),k.isInFallback=!0,m(T,w,null,!0),fe||b()},move(U,I,T){k.activeBranch&&p(k.activeBranch,U,I,T),k.container=U},next(){return k.activeBranch&&y(k.activeBranch)},registerDep(U,I,T){const w=!!k.pendingBranch;w&&k.deps++;const R=U.vnode.el;U.asyncDep.catch(P=>{Io(P,U,0)}).then(P=>{if(U.isUnmounted||k.isUnmounted||k.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:S}=U;ef(U,P),R&&(S.el=R);const b=!R&&U.subTree.el;I(U,S,v(R||U.subTree.el),R?null:y(U.subTree),k,o,T),b&&(S.placeholder=null,x(b)),ll(U,S.el),w&&--k.deps===0&&k.resolve()})},unmount(U,I){k.isUnmounted=!0,k.activeBranch&&m(k.activeBranch,n,U,I),k.pendingBranch&&m(k.pendingBranch,n,U,I)}};return k}function lS(t,e,n,r,s,i,o,a,c){const l=e.suspense=yE(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=c(t,l.pendingBranch=e.ssContent,n,l,i,o);return l.deps===0&&l.resolve(!1,!0),h}function hS(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=ig(r?n.default:n),t.ssFallback=r?ig(n.fallback):tt(it)}function ig(t){let e;if(de(t)){const n=Ki&&t._c;n&&(t._d=!1,pn()),t=t(),n&&(t._d=!0,e=Wt,EE())}return le(t)&&(t=WR(t)),t=rn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function vE(t,e){e&&e.pendingBranch?le(t)?e.effects.push(...t):e.effects.push(t):Gh(t)}function Li(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,ll(r,s))}function fS(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Tt=Symbol.for("v-fgt"),Fs=Symbol.for("v-txt"),it=Symbol.for("v-cmt"),Jc=Symbol.for("v-stc"),_a=[];let Wt=null;function pn(t=!1){_a.push(Wt=t?null:[])}function EE(){_a.pop(),Wt=_a[_a.length-1]||null}let Ki=1;function wu(t,e=!1){Ki+=t,t<0&&Wt&&e&&(Wt.hasOnce=!0)}function wE(t){return t.dynamicChildren=Ki>0?Wt||Vi:null,EE(),Ki>0&&Wt&&Wt.push(t),t}function dS(t,e,n,r,s,i){return wE(IE(t,e,n,r,s,i,!0))}function Bn(t,e,n,r,s){return wE(tt(t,e,n,r,s,!0))}function js(t){return t?t.__v_isVNode===!0:!1}function wn(t,e){return t.type===e.type&&t.key===e.key}const TE=({key:t})=>t??null,Yc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||at(t)||de(t)?{i:At,r:t,k:e,f:!!n}:t:null);function IE(t,e=null,n=null,r=0,s=null,i=t===Tt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&TE(e),ref:e&&Yc(e),scopeId:Lv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:At};return a?(vd(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Qe(n)?8:16),Ki>0&&!o&&Wt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Wt.push(c),c}const tt=pS;function pS(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Xv)&&(t=it),js(t)){const a=fr(t,e,!0);return n&&vd(a,n),Ki>0&&!i&&Wt&&(a.shapeFlag&6?Wt[Wt.indexOf(t)]=a:Wt.push(a)),a.patchFlag=-2,a}if(TS(t)&&(t=t.__vccOpts),e){e=bE(e);let{class:a,style:c}=e;a&&!Qe(a)&&(e.class=il(a)),Me(c)&&(al(c)&&!le(c)&&(c=vt({},c)),e.style=sl(c))}const o=Qe(t)?1:Eu(t)?128:Bv(t)?64:Me(t)?4:de(t)?2:0;return IE(t,e,n,r,s,o,i,!0)}function bE(t){return t?al(t)||aE(t)?vt({},t):t:null}function fr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,l=e?RE(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&TE(l),ref:e&&e.ref?n&&i?le(i)?i.concat(Yc(e)):[i,Yc(e)]:Yc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Tt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&fr(t.ssContent),ssFallback:t.ssFallback&&fr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&zi(h,c.clone(h)),h}function AE(t=" ",e=0){return tt(Fs,null,t,e)}function bF(t="",e=!1){return e?(pn(),Bn(it,null,t)):tt(it,null,t)}function rn(t){return t==null||typeof t=="boolean"?tt(it):le(t)?tt(Tt,null,t.slice()):js(t)?Mr(t):tt(Fs,null,String(t))}function Mr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:fr(t)}function vd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(le(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),vd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!aE(e)?e._ctx=At:s===3&&At&&(At.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:At},n=32):(e=String(e),r&64?(n=16,e=[AE(e)]):n=8);t.children=e,t.shapeFlag|=n}function RE(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=il([e.class,r.class]));else if(s==="style")e.style=sl([e.style,r.style]);else if(rc(s)){const i=e[s],o=r[s];o&&i!==o&&!(le(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Kt(t,e,n,r=null){Pn(t,e,7,[n,r])}const mS=rE();let gS=0;function _S(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||mS,i={uid:gS++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new mv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:uE(r,s),emitsOptions:sE(r,s),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:r.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=zR.bind(null,i),t.ce&&t.ce(i),i}let It=null;const bo=()=>It||At;let Tu,Zh;{const t=rl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Tu=e("__VUE_INSTANCE_SETTERS__",n=>It=n),Zh=e("__VUE_SSR_SETTERS__",n=>Wi=n)}const ac=t=>{const e=It;return Tu(t),t.scope.on(),()=>{t.scope.off(),Tu(e)}},og=()=>{It&&It.scope.off(),Tu(null)};function SE(t){return t.vnode.shapeFlag&4}let Wi=!1;function yS(t,e=!1,n=!1){e&&Zh(e);const{props:r,children:s}=t.vnode,i=SE(t);XR(t,r,i,e),nS(t,s,n||e);const o=i?vS(t,e):void 0;return e&&Zh(!1),o}function vS(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,LR);const{setup:r}=n;if(r){lr();const s=t.setupContext=r.length>1?wS(t):null,i=ac(t),o=sc(r,t,0,[t.props,s]),a=ov(o);if(hr(),i(),(a||t.sp)&&!ar(t)&&pd(t),a){if(o.then(og,og),e)return o.then(c=>{ef(t,c)}).catch(c=>{Io(c,t,0)});t.asyncDep=o}else ef(t,o)}else PE(t)}function ef(t,e,n){de(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Me(e)&&(t.setupState=Nv(e)),PE(t)}function PE(t,e,n){const r=t.type;t.render||(t.render=r.render||qn);{const s=ac(t);lr();try{FR(t)}finally{hr(),s()}}}const ES={get(t,e){return Vt(t,"get",""),t[e]}};function wS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,ES),slots:t.slots,emit:t.emit,expose:e}}function hl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Nv(tR(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ga)return ga[n](t)},has(e,n){return n in e||n in ga}})):t.proxy}function tf(t,e=!0){return de(t)?t.displayName||t.name:t.name||e&&t.__name}function TS(t){return de(t)&&"__vccOpts"in t}const sn=(t,e)=>lR(t,e,Wi);function Nt(t,e,n){try{wu(-1);const r=arguments.length;return r===2?Me(e)&&!le(e)?js(e)?tt(t,null,[e]):tt(t,e):tt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&js(n)&&(n=[n]),tt(t,e,n))}finally{wu(1)}}const IS="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nf;const ag=typeof window<"u"&&window.trustedTypes;if(ag)try{nf=ag.createPolicy("vue",{createHTML:t=>t})}catch{}const CE=nf?t=>nf.createHTML(t):t=>t,bS="http://www.w3.org/2000/svg",AS="http://www.w3.org/1998/Math/MathML",tr=typeof document<"u"?document:null,cg=tr&&tr.createElement("template"),RS={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?tr.createElementNS(bS,t):e==="mathml"?tr.createElementNS(AS,t):n?tr.createElement(t,{is:n}):tr.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>tr.createTextNode(t),createComment:t=>tr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>tr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{cg.innerHTML=CE(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=cg.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Pr="transition",Jo="animation",ka=Symbol("_vtc"),xE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},SS=vt({},Uv,xE),PS=t=>(t.displayName="Transition",t.props=SS,t),CS=PS((t,{slots:e})=>Nt(TR,xS(t),e)),ys=(t,e=[])=>{le(t)?t.forEach(n=>n(...e)):t&&t(...e)},ug=t=>t?le(t)?t.some(e=>e.length>1):t.length>1:!1;function xS(t){const e={};for(const S in t)S in xE||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,y=VS(s),v=y&&y[0],x=y&&y[1],{onBeforeEnter:N,onEnter:D,onEnterCancelled:E,onLeave:C,onLeaveCancelled:k,onBeforeAppear:U=N,onAppear:I=D,onAppearCancelled:T=E}=e,w=(S,b,fe,Te)=>{S._enterCancelled=Te,vs(S,b?h:a),vs(S,b?l:o),fe&&fe()},R=(S,b)=>{S._isLeaving=!1,vs(S,f),vs(S,m),vs(S,p),b&&b()},P=S=>(b,fe)=>{const Te=S?I:D,ie=()=>w(b,S,fe);ys(Te,[b,ie]),lg(()=>{vs(b,S?c:i),Zn(b,S?h:a),ug(Te)||hg(b,r,v,ie)})};return vt(e,{onBeforeEnter(S){ys(N,[S]),Zn(S,i),Zn(S,o)},onBeforeAppear(S){ys(U,[S]),Zn(S,c),Zn(S,l)},onEnter:P(!1),onAppear:P(!0),onLeave(S,b){S._isLeaving=!0;const fe=()=>R(S,b);Zn(S,f),S._enterCancelled?(Zn(S,p),pg(S)):(pg(S),Zn(S,p)),lg(()=>{S._isLeaving&&(vs(S,f),Zn(S,m),ug(C)||hg(S,r,x,fe))}),ys(C,[S,fe])},onEnterCancelled(S){w(S,!1,void 0,!0),ys(E,[S])},onAppearCancelled(S){w(S,!0,void 0,!0),ys(T,[S])},onLeaveCancelled(S){R(S),ys(k,[S])}})}function VS(t){if(t==null)return null;if(Me(t))return[ph(t.enter),ph(t.leave)];{const e=ph(t);return[e,e]}}function ph(t){return lv(t)}function Zn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ka]||(t[ka]=new Set)).add(e)}function vs(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[ka];n&&(n.delete(e),n.size||(t[ka]=void 0))}function lg(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let DS=0;function hg(t,e,n,r){const s=t._endId=++DS,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=NS(t,e);if(!o)return r();const l=o+"end";let h=0;const f=()=>{t.removeEventListener(l,p),i()},p=m=>{m.target===t&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},a+1),t.addEventListener(l,p)}function NS(t,e){const n=window.getComputedStyle(t),r=y=>(n[y]||"").split(", "),s=r(`${Pr}Delay`),i=r(`${Pr}Duration`),o=fg(s,i),a=r(`${Jo}Delay`),c=r(`${Jo}Duration`),l=fg(a,c);let h=null,f=0,p=0;e===Pr?o>0&&(h=Pr,f=o,p=i.length):e===Jo?l>0&&(h=Jo,f=l,p=c.length):(f=Math.max(o,l),h=f>0?o>l?Pr:Jo:null,p=h?h===Pr?i.length:c.length:0);const m=h===Pr&&/\b(?:transform|all)(?:,|$)/.test(r(`${Pr}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:m}}function fg(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>dg(n)+dg(t[r])))}function dg(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function pg(t){return(t?t.ownerDocument:document).body.offsetHeight}function kS(t,e,n){const r=t[ka];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const mg=Symbol("_vod"),OS=Symbol("_vsh"),MS=Symbol(""),LS=/(?:^|;)\s*display\s*:/;function FS(t,e,n){const r=t.style,s=Qe(n);let i=!1;if(n&&!s){if(e)if(Qe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Xc(r,a,"")}else for(const o in e)n[o]==null&&Xc(r,o,"");for(const o in n)o==="display"&&(i=!0),Xc(r,o,n[o])}else if(s){if(e!==n){const o=r[MS];o&&(n+=";"+o),r.cssText=n,i=LS.test(n)}}else e&&t.removeAttribute("style");mg in t&&(t[mg]=i?r.display:"",t[OS]&&(r.display="none"))}const gg=/\s*!important$/;function Xc(t,e,n){if(le(n))n.forEach(r=>Xc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=BS(t,e);gg.test(n)?t.setProperty(ti(r),n.replace(gg,""),"important"):t[r]=n}}const _g=["Webkit","Moz","ms"],mh={};function BS(t,e){const n=mh[e];if(n)return n;let r=_n(e);if(r!=="filter"&&r in t)return mh[e]=r;r=nl(r);for(let s=0;s<_g.length;s++){const i=_g[s]+r;if(i in t)return mh[e]=i}return e}const yg="http://www.w3.org/1999/xlink";function vg(t,e,n,r,s,i=NA(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(yg,e.slice(6,e.length)):t.setAttributeNS(yg,e,n):n==null||i&&!hv(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Rn(n)?String(n):n)}function Eg(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?CE(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=hv(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Fr(t,e,n,r){t.addEventListener(e,n,r)}function US(t,e,n,r){t.removeEventListener(e,n,r)}const wg=Symbol("_vei");function jS(t,e,n,r,s=null){const i=t[wg]||(t[wg]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=$S(e);if(r){const l=i[e]=GS(r,s);Fr(t,a,l,c)}else o&&(US(t,a,o,c),i[e]=void 0)}}const Tg=/(?:Once|Passive|Capture)$/;function $S(t){let e;if(Tg.test(t)){e={};let r;for(;r=t.match(Tg);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ti(t.slice(2)),e]}let gh=0;const qS=Promise.resolve(),HS=()=>gh||(qS.then(()=>gh=0),gh=Date.now());function GS(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Pn(zS(r,n.value),e,5,[r])};return n.value=t,n.attached=HS(),n}function zS(t,e){if(le(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Ig=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,KS=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?kS(t,r,o):e==="style"?FS(t,n,r):rc(e)?td(e)||jS(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):WS(t,e,r,o))?(Eg(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&vg(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Qe(r))?Eg(t,_n(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),vg(t,e,r,o))};function WS(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ig(e)&&de(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Ig(e)&&Qe(n)?!1:e in t}const Qi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return le(e)?n=>ki(e,n):e};function QS(t){t.target.composing=!0}function bg(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const cr=Symbol("_assign");function Ag(t,e,n){return e&&(t=t.trim()),n&&(t=rd(t)),t}const AF={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[cr]=Qi(s);const i=r||s.props&&s.props.type==="number";Fr(t,e?"change":"input",o=>{o.target.composing||t[cr](Ag(t.value,n,i))}),(n||i)&&Fr(t,"change",()=>{t.value=Ag(t.value,n,i)}),e||(Fr(t,"compositionstart",QS),Fr(t,"compositionend",bg),Fr(t,"change",bg))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[cr]=Qi(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?rd(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},RF={deep:!0,created(t,e,n){t[cr]=Qi(n),Fr(t,"change",()=>{const r=t._modelValue,s=VE(t),i=t.checked,o=t[cr];if(le(r)){const a=fv(r,s),c=a!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const l=[...r];l.splice(a,1),o(l)}}else if(Zu(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(DE(t,i))})},mounted:Rg,beforeUpdate(t,e,n){t[cr]=Qi(n),Rg(t,e,n)}};function Rg(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(le(e))s=fv(e,r.props.value)>-1;else if(Zu(e))s=e.has(r.props.value);else{if(e===n)return;s=$i(e,DE(t,!0))}t.checked!==s&&(t.checked=s)}const SF={created(t,{value:e},n){t.checked=$i(e,n.props.value),t[cr]=Qi(n),Fr(t,"change",()=>{t[cr](VE(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[cr]=Qi(r),e!==n&&(t.checked=$i(e,r.props.value))}};function VE(t){return"_value"in t?t._value:t.value}function DE(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const NE=vt({patchProp:KS},RS);let ya,Sg=!1;function JS(){return ya||(ya=sS(NE))}function YS(){return ya=Sg?ya:iS(NE),Sg=!0,ya}const XS=((...t)=>{const e=JS().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=OE(r);if(!s)return;const i=e._component;!de(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,kE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e}),ZS=((...t)=>{const e=YS().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=OE(r);if(s)return n(s,!0,kE(s))},e});function kE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function OE(t){return Qe(t)?document.querySelector(t):t}const e0=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,t0=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,n0=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function r0(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){s0(t);return}return e}function s0(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Iu(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!n0.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(e0.test(t)||t0.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,r0)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const i0=/#/g,o0=/&/g,a0=/\//g,c0=/=/g,Ed=/\+/g,u0=/%5e/gi,l0=/%60/gi,h0=/%7c/gi,f0=/%20/gi;function d0(t){return encodeURI(""+t).replace(h0,"|")}function rf(t){return d0(typeof t=="string"?t:JSON.stringify(t)).replace(Ed,"%2B").replace(f0,"+").replace(i0,"%23").replace(o0,"%26").replace(l0,"`").replace(u0,"^").replace(a0,"%2F")}function _h(t){return rf(t).replace(c0,"%3D")}function bu(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function p0(t){return bu(t.replace(Ed," "))}function m0(t){return bu(t.replace(Ed," "))}function ME(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=p0(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=m0(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function g0(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${_h(t)}=${rf(n)}`).join("&"):`${_h(t)}=${rf(e)}`:_h(t)}function _0(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>g0(e,t[e])).filter(Boolean).join("&")}const y0=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,v0=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,E0=/^([/\\]\s*){2,}[^/\\]/,w0=/^[\s\0]*(blob|data|javascript|vbscript):$/i,T0=/\/$|\/\?|\/#/,I0=/^\.?\//;function ni(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?y0.test(t):v0.test(t)||(e.acceptRelative?E0.test(t):!1)}function b0(t){return!!t&&w0.test(t)}function sf(t="",e){return e?T0.test(t):t.endsWith("/")}function Au(t="",e){if(!e)return(sf(t)?t.slice(0,-1):t)||"/";if(!sf(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");s!==-1&&(n=t.slice(0,s),r=t.slice(s));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function A0(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(sf(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");if(s!==-1&&(n=t.slice(0,s),r=t.slice(s),!n))return r;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function R0(t,e){if(FE(e)||ni(t))return t;const n=Au(e);return t.startsWith(n)?t:wd(n,t)}function Pg(t,e){if(FE(e))return t;const n=Au(e);if(!t.startsWith(n))return t;const r=t.slice(n.length);return r[0]==="/"?r:"/"+r}function LE(t,e){const n=jE(t),r={...ME(n.search),...e};return n.search=_0(r),C0(n)}function FE(t){return!t||t==="/"}function S0(t){return t&&t!=="/"}function wd(t,...e){let n=t||"";for(const r of e.filter(s=>S0(s)))if(n){const s=r.replace(I0,"");n=A0(n)+s}else n=r;return n}function BE(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),r=[];let s=0;for(const o of n)if(!(!o||o==="/")){for(const[a,c]of o.split(e).entries())if(!(!c||c===".")){if(c===".."){if(r.length===1&&ni(r[0]))continue;r.pop(),s--;continue}if(a===1&&r[r.length-1]?.endsWith(":/")){r[r.length-1]+="/"+c;continue}r.push(c),s++}}let i=r.join("/");return s>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function P0(t,e){return bu(Au(t))===bu(Au(e))}const UE=Symbol.for("ufo:protocolRelative");function jE(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,p=""]=n;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!ni(t,{acceptRelative:!0}))return Cg(t);const[,r="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:l,hash:h}=Cg(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:l,hash:h,[UE]:!r}}function Cg(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function C0(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[UE]?(t.protocol||"")+"//":"")+s+i+e+n+r}class x0 extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function V0(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",r=t.request?.url||String(t.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new x0(o,t.error?{cause:t.error}:void 0);for(const c of["request","options","response"])Object.defineProperty(a,c,{get(){return t[c]}});for(const[c,l]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,c,{get(){return t.response&&t.response[l]}});return a}const D0=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function xg(t="GET"){return D0.has(t.toUpperCase())}function N0(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const k0=new Set(["image/svg","application/xml","application/xhtml","application/html"]),O0=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function M0(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return O0.test(e)?"json":k0.has(e)||e.startsWith("text/")?"text":"blob"}function L0(t,e,n,r){const s=F0(e?.headers??t?.headers,n?.headers,r);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:s}}function F0(t,e,n){if(!e)return new n(t);const r=new n(e);if(t)for(const[s,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))r.set(s,i);return r}async function jc(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const B0=new Set([408,409,425,429,500,502,503,504]),U0=new Set([101,204,205,304]);function $E(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function s(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let h;typeof a.options.retry=="number"?h=a.options.retry:h=xg(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):B0.has(f))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(m=>setTimeout(m,p)),i(a.request,{...a.options,retry:h-1})}}const l=V0(a);throw Error.captureStackTrace&&Error.captureStackTrace(l,i),l}const i=async function(c,l={}){const h={request:c,options:L0(c,l,t.defaults,n),response:void 0,error:void 0};h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&await jc(h,h.options.onRequest),typeof h.request=="string"&&(h.options.baseURL&&(h.request=R0(h.request,h.options.baseURL)),h.options.query&&(h.request=LE(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&xg(h.options.method)&&(N0(h.options.body)?(h.options.body=typeof h.options.body=="string"?h.options.body:JSON.stringify(h.options.body),h.options.headers=new n(h.options.headers||{}),h.options.headers.has("content-type")||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")):("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half")));let f;if(!h.options.signal&&h.options.timeout){const m=new r;f=setTimeout(()=>{const y=new Error("[TimeoutError]: The operation was aborted due to timeout");y.name="TimeoutError",y.code=23,m.abort(y)},h.options.timeout),h.options.signal=m.signal}try{h.response=await e(h.request,h.options)}catch(m){return h.error=m,h.options.onRequestError&&await jc(h,h.options.onRequestError),await s(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!U0.has(h.response.status)&&h.options.method!=="HEAD"){const m=(h.options.parseResponse?"json":h.options.responseType)||M0(h.response.headers.get("content-type")||"");switch(m){case"json":{const y=await h.response.text(),v=h.options.parseResponse||Iu;h.response._data=v(y);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[m]()}}return h.options.onResponse&&await jc(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await jc(h,h.options.onResponseError),await s(h)):h.response},o=async function(c,l){return(await i(c,l))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},c={})=>$E({...t,...c,defaults:{...t.defaults,...c.defaults,...a}}),o}const Ru=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),j0=Ru.fetch?(...t)=>Ru.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),$0=Ru.Headers,q0=Ru.AbortController,H0=$E({fetch:j0,Headers:$0,AbortController:q0}),G0=H0,z0=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,Td=()=>z0().app,K0=()=>Td().baseURL,W0=()=>Td().buildAssetsDir,Id=(...t)=>BE(qE(),W0(),...t),qE=(...t)=>{const e=Td(),n=e.cdnURL||e.baseURL;return t.length?BE(n,...t):n};globalThis.__buildAssetsURL=Id,globalThis.__publicAssetsURL=qE;globalThis.$fetch||(globalThis.$fetch=G0.create({baseURL:K0()}));"global"in globalThis||(globalThis.global=globalThis);function of(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?of(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const Q0={run:t=>t()},J0=()=>Q0,HE=typeof console.createTask<"u"?console.createTask:J0;function Y0(t,e){const n=e.shift(),r=HE(n);return t.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function X0(t,e){const n=e.shift(),r=HE(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}function yh(t,e){for(const n of[...t])n(e)}class Z0{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=of(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const n=of(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(Y0,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(X0,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&yh(this._before,s);const i=e(n in this._hooks?[...this._hooks[n]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&yh(this._after,s)}):(this._after&&s&&yh(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function GE(){return new Z0}function eP(t={}){let e,n=!1;const r=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||r(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{r(o),e=o;try{return s?s.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const c=()=>{e=o},l=()=>e===o?c:void 0;af.add(l);try{const h=s?s.run(o,a):a();return n||(e=void 0),await h}finally{af.delete(l)}}}}function tP(t={}){const e={};return{get(n,r={}){return e[n]||(e[n]=eP({...t,...r})),e[n]}}}const Su=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Vg="__unctx__",nP=Su[Vg]||(Su[Vg]=tP()),rP=(t,e={})=>nP.get(t,e),Dg="__unctx_async_handlers__",af=Su[Dg]||(Su[Dg]=new Set);function Fi(t){const e=[];for(const s of af){const i=s();i&&e.push(i)}const n=()=>{for(const s of e)s()};let r=t();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const sP=!1,Ng=!1,iP=!1,kg={id:"__nuxt-loader"},PF={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},oP="#__nuxt",zE="nuxt-app",Og=36e5,aP="vite:preloadError";function KE(t=zE){return rP(t,{asyncContext:!1})}const cP="__nuxt_plugin";function uP(t){let e=0;const n={_id:t.id||zE||"nuxt-app",_scope:gv(),provide:void 0,versions:{get nuxt(){return"4.2.0"},get vue(){return n.vueApp.version}},payload:Un({...t.ssrContext?.payload||{},data:Un({}),state:gr({}),once:new Set,_errors:Un({})}),static:{data:{}},runWithContext(s){return n._scope.active&&!_v()?n._scope.run(()=>Mg(n,s)):Mg(n,s)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let s=!1;return()=>{if(!s&&(s=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Un({}),_payloadRevivers:{},...t};{const s=window.__NUXT__;if(s)for(const i in s)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],s[i]);break;default:n.payload[i]=s[i]}}n.hooks=GE(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(s,i)=>{const o="$"+s;$c(n,o,i),$c(n.vueApp.config.globalProperties,o,i)},$c(n.vueApp,"$nuxt",n),$c(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(aP,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=dt;const s=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",s)}const r=n.payload.config;return n.provide("config",r),n}function lP(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function hP(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}}async function fP(t,e){const n=new Set,r=[],s=[];let i,o=0;async function a(c){const l=c.dependsOn?.filter(h=>e.some(f=>f._name===h)&&!n.has(h))??[];if(l.length>0)r.push([new Set(l),c]);else{const h=hP(t,c).then(async()=>{c._name&&(n.add(c._name),await Promise.all(r.map(async([f,p])=>{f.has(c._name)&&(f.delete(c._name),f.size===0&&(o++,await a(p)))})))}).catch(f=>{if(!c.parallel&&!t.payload.error)throw f;i||=f});c.parallel?s.push(h):await h}}for(const c of e)lP(t,c);for(const c of e)await a(c);if(await Promise.all(s),o)for(let c=0;c<o;c++)await Promise.all(s);if(i)throw t.payload.error||i}function Qn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[cP]:!0,_name:e})}function Mg(t,e,n){const r=()=>e();return KE(t._id).set(t),t.vueApp.runWithContext(r)}function dP(t){let e;return fd()&&(e=bo()?.appContext.app.$nuxt),e||=KE(t).tryUse(),e||null}function dt(t){const e=dP(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function fl(t){return dt().$config}function $c(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function pP(t,e){return{ctx:{table:t},matchAll:n=>QE(n,t)}}function WE(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([r,s])=>[r,WE(s)])):new Map(Object.entries(t[n]));return e}function mP(t){return pP(WE(t))}function QE(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const r=[];for(const[i,o]of Lg(e.wildcard))(t===i||t.startsWith(i+"/"))&&r.push(o);for(const[i,o]of Lg(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");r.push(...QE(a,o))}const s=e.static.get(t);return s&&r.push(s),r.filter(Boolean)}function Lg(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function vh(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function cf(t,e,n=".",r){if(!vh(e))return cf(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:vh(o)&&vh(s[i])?s[i]=cf(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function gP(t){return(...e)=>e.reduce((n,r)=>cf(n,r,"",t),{})}const JE=gP();function _P(t,e){try{return e in t}catch{return!1}}class Fg extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:uf(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=YE(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function yP(t){if(typeof t=="string")return new Fg(t);if(vP(t))return t;const e=new Fg(t.message??t.statusMessage??"",{cause:t.cause||t});if(_P(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=uf(t.statusCode,e.statusCode):t.status&&(e.statusCode=uf(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;YE(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function vP(t){return t?.constructor?.__h3_error__===!0}const EP=/[^\u0009\u0020-\u007E]/g;function YE(t=""){return t.replace(EP,"")}function uf(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const XE=Symbol("layout-meta"),$s=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const un=()=>dt()?.$router,dl=()=>fd()?kt($s,dt()._route):dt()._route;const wP=()=>{try{if(dt()._processingMiddleware)return!0}catch{return!1}return!1},CF=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?TP(t):un().resolve(t).href;if(e?.open){const{target:c="_blank",windowFeatures:l={}}=e.open,h=[];for(const[f,p]of Object.entries(l))p!==void 0&&h.push(`${f.toLowerCase()}=${p}`);return open(n,c,h.join(", ")),Promise.resolve()}const r=ni(n,{acceptRelative:!0}),s=e?.external||r;if(s){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(n,window.location.href);if(c&&b0(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const i=wP();if(!s&&i){if(e?.replace){if(typeof t=="string"){const{pathname:c,search:l,hash:h}=jE(t);return{path:c,...l&&{query:ME(l)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=un(),a=dt();return s?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function TP(t){return LE(t.path||"",t.query||{})+(t.hash||"")}const ZE="__nuxt_error",pl=()=>aR(dt().payload,"error"),Is=t=>{const e=Bs(t);try{const n=pl();dt().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},IP=async(t={})=>{const e=dt(),n=pl();e.callHook("app:error:cleared",t),t.redirect&&await un().replace(t.redirect),n.value=void 0},ew=t=>!!t&&typeof t=="object"&&ZE in t,Bs=t=>{const e=yP(t);return Object.defineProperty(e,ZE,{value:!0,configurable:!1,writable:!1}),e};function bP(t){const e=RP(t),n=new ArrayBuffer(e.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return n}const AP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function RP(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,r=0;for(let s=0;s<t.length;s++)n<<=6,n|=AP.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,e+=String.fromCharCode(n)):r===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const SP=-1,PP=-2,CP=-3,xP=-4,VP=-5,DP=-6;function NP(t,e){return kP(JSON.parse(t),e)}function kP(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);function s(i,o=!1){if(i===SP)return;if(i===CP)return NaN;if(i===xP)return 1/0;if(i===VP)return-1/0;if(i===DP)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in r)return r[i];const a=n[i];if(!a||typeof a!="object")r[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],l=e?.[c];if(l){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),r[i]=l(s(h))}switch(c){case"Date":r[i]=new Date(a[1]);break;case"Set":const h=new Set;r[i]=h;for(let m=1;m<a.length;m+=1)h.add(s(a[m]));break;case"Map":const f=new Map;r[i]=f;for(let m=1;m<a.length;m+=2)f.set(s(a[m]),s(a[m+1]));break;case"RegExp":r[i]=new RegExp(a[1],a[2]);break;case"Object":r[i]=Object(a[1]);break;case"BigInt":r[i]=BigInt(a[1]);break;case"null":const p=Object.create(null);r[i]=p;for(let m=1;m<a.length;m+=2)p[a[m]]=s(a[m+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const m=globalThis[c],y=new m(s(a[1]));r[i]=a[2]!==void 0?y.subarray(a[2],a[3]):y;break}case"ArrayBuffer":{const m=a[1],y=bP(m);r[i]=y;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const m=c.slice(9);r[i]=Temporal[m].from(a[1]);break}case"URL":{const m=new URL(a[1]);r[i]=m;break}case"URLSearchParams":{const m=new URLSearchParams(a[1]);r[i]=m;break}default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);r[i]=c;for(let l=0;l<a.length;l+=1){const h=a[l];h!==PP&&(c[l]=s(h))}}else{const c={};r[i]=c;for(const l in a){if(l==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[l];c[l]=s(h)}}return r[i]}return s(0)}const OP=new Set(["link","style","script","noscript"]),MP=new Set(["title","titleTemplate","script","style","noscript"]),Bg=new Set(["base","meta","link","style","script","noscript"]),LP=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),FP=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),BP=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),UP=new Set(["templateParams","htmlAttrs","bodyAttrs"]),jP=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),$P=["name","property","http-equiv"],qP=new Set(["viewport","description","keywords","robots"]);function tw(t){const e=t.split(":");return e.length?jP.has(e[1]):!1}function lf(t){const{props:e,tag:n}=t;if(FP.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const r of $P)if(e[r]!==void 0){const s=e[r],i=s.includes(":"),o=qP.has(s),c=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${s}${c}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(MP.has(n)){const r=t.textContent||t.innerHTML;if(r)return`${n}:content:${r}`}}function Ug(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function Pu(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());let s;if(e&&(s=e(n,t)),Array.isArray(s))return s.map(i=>Pu(i,e));if(s?.constructor===Object){const i={};for(const o of Object.keys(s))i[o]=Pu(s[o],e,o);return i}return s}function HP(t,e){const n=t==="style"?new Map:new Set;function r(s){const i=s.trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(c=>c.trim());o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(r):r(e):Array.isArray(e)?e.forEach(s=>r(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{i&&i!=="false"&&(t==="style"?n.set(s.trim(),i):r(s))}),n}function nw(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,r])=>{if(r===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=HP(n,r);return}if(BP.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof r=="object"){let o=e.type;if(e.type||(o="application/json"),!o?.endsWith("json")&&o!=="speculationrules")return;e.type=o,t.props.type=o,t[n]=JSON.stringify(r)}else t[n]=r;return}const s=String(r),i=n.startsWith("data-");s==="true"||s===""?t.props[n]=i?s:!0:!r&&i&&s==="false"?t.props[n]="false":r!==void 0&&(t.props[n]=r)}),t):t}function GP(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},r=nw({tag:t,props:{}},n);return r.key&&OP.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function zP(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(s,i)=>{for(let o=0;o<e.length;o++)i=e[o](s,i);return i};t=n(void 0,t);const r=[];return t=Pu(t,n),Object.entries(t||{}).forEach(([s,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])r.push(GP(s,o))}),r.flat()}const jg=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,$g={base:-10,title:10},KP={critical:-8,high:-1,low:2},qg={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},WP=/@import/,Yo=t=>t===""||t===!0;function QP(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const r=KP[e.tagPriority]||0,s=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:qg;if(e.tag in $g)n=$g[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=qg.meta[i])}else e.tag==="link"&&e.props.rel?n=s.link[e.props.rel]:e.tag==="script"?Yo(e.props.async)?n=s.script.async:e.props.src&&!Yo(e.props.defer)&&!Yo(e.props.async)&&e.props.type!=="module"&&!e.props.type?.endsWith("json")?n=s.script.sync:Yo(e.props.defer)&&e.props.src&&!Yo(e.props.async)&&(n=s.script.defer):e.tag==="style"&&(n=e.innerHTML&&WP.test(e.innerHTML)?s.style.imported:s.style.sync);return(n||100)+r}function Hg(t,e){const n=typeof e=="function"?e(t):e,r=n.key||String(t.plugins.size+1);t.plugins.get(r)||(t.plugins.set(r,n),t.hooks.addHooks(n.hooks||{}))}function JP(t={}){const e=GE();e.addHooks(t.hooks||{});const n=!t.document,r=new Map,s=new Map,i=new Set,o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:r,headEntries(){return[...r.values()]},use:a=>Hg(o,a),push(a,c){const l={...c||{}};delete l.head;const h=l._index??o._entryCount++,f={_i:h,input:a,options:l},p={_poll(m=!1){o.dirty=!0,!m&&i.add(h),e.callHook("entries:updated",o)},dispose(){r.delete(h)&&o.invalidate()},patch(m){(!l.mode||l.mode==="server"&&n||l.mode==="client"&&!n)&&(f.input=m,r.set(h,f),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const p=i.values().next().value;i.delete(p);const m=r.get(p);if(m){const y={tags:zP(m.input,t.propResolvers||[]).map(v=>Object.assign(v,m.options)),entry:m};await e.callHook("entries:normalize",y),m._tags=y.tags.map((v,x)=>(v._w=QP(o,v),v._p=(m._i<<10)+x,v._d=lf(v),v))}}let c=!1;a.entries.flatMap(p=>(p._tags||[]).map(m=>({...m,props:{...m.props}}))).sort(jg).reduce((p,m)=>{const y=String(m._d||m._p);if(!p.has(y))return p.set(y,m);const v=p.get(y);if((m?.tagDuplicateStrategy||(UP.has(m.tag)?"merge":null)||(m.key&&m.key===v.key?"merge":null))==="merge"){const N={...v.props};Object.entries(m.props).forEach(([D,E])=>N[D]=D==="style"?new Map([...v.props.style||new Map,...E]):D==="class"?new Set([...v.props.class||new Set,...E]):E),p.set(y,{...m,props:N})}else m._p>>10===v._p>>10&&m.tag==="meta"&&tw(y)?(p.set(y,Object.assign([...Array.isArray(v)?v:[v],m],m)),c=!0):(m._w===v._w?m._p>v._p:m?._w<v?._w)&&p.set(y,m);return p},a.tagMap);const l=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=l?.textContent,h){const p=h?.textContent;if(o._titleTemplate=p,p){let m=typeof p=="function"?p(l?.textContent):p;typeof m=="string"&&!o.plugins.has("template-params")&&(m=m.replace("%s",l?.textContent||"")),l?m===null?a.tagMap.delete("title"):a.tagMap.set("title",{...l,textContent:m}):(h.tag="title",h.textContent=m)}}a.tags=Array.from(a.tagMap.values()),c&&(a.tags=a.tags.flat().sort(jg)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const f=[];for(const p of a.tags){const{innerHTML:m,tag:y,props:v}=p;if(LP.has(y)&&!(Object.keys(v).length===0&&!p.innerHTML&&!p.textContent)&&!(y==="meta"&&!v.content&&!v["http-equiv"]&&!v.charset)){if(y==="script"&&m){if(v.type?.endsWith("json")){const x=typeof m=="string"?m:JSON.stringify(m);p.innerHTML=x.replace(/</g,"\\u003C")}else typeof m=="string"&&(p.innerHTML=m.replace(new RegExp(`</${y}`,"g"),`<\\/${y}`));p._d=lf(p)}f.push(p)}}return f},invalidate(){for(const a of r.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>Hg(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const YP=(t,e)=>at(e)?rR(e):e,rw="usehead";function XP(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(rw,t)}}.install}function ZP(){if(fd()){const t=kt(rw);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function xF(t,e={}){const n=e.head||ZP();return n.ssr?n.push(t||{},e):eC(n,t,e)}function eC(t,e,n={}){const r=or(!1);let s;return _R(()=>{const o=r.value?{}:Pu(e,YP);s?s.patch(o):s=t.push(o,n)}),bo()&&(oc(()=>{s.dispose()}),zv(()=>{r.value=!0}),Gv(()=>{r.value=!1})),s}let Zc,eu;function tC(){return Zc=$fetch(Id(`builds/meta/${fl().app.buildId}.json`),{responseType:"json"}),Zc.then(t=>{eu=mP(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),Zc}function ml(){return Zc||tC()}async function bd(t){const e=typeof t=="string"?t:t.path;if(await ml(),!eu)return console.error("[nuxt] Error creating app manifest matcher.",eu),{};try{return JE({},...eu.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function Gg(t,e={}){if(!await iw(t))return null;const r=await rC(t,e);return await sw(r)||null}const nC="_payload.json";async function rC(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||ni(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const r=fl(),s=e.hash||(e.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await iw(t)?i:r.app.baseURL;return wd(o,n.pathname,nC+(s?`?${s}`:""))}async function sw(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(ow));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function iw(t=dl().path){const e=dt();return t=t==="/"?t:t.replace(/\/$/,""),(await ml()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const r=await bd({path:t});return!!r.prerender&&!r.redirect})}let Es=null;async function sC(){if(Es)return Es;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await ow(t.textContent||""),n=t.dataset.src?await sw(t.dataset.src):void 0;return Es={...e,...n,...window.__NUXT__},Es.config?.public&&(Es.config.public=gr(Es.config.public)),Es}async function ow(t){return await NP(t,dt()._payloadRevivers)}function iC(t,e){dt()._payloadRevivers[t]=e}const oC=[["NuxtError",t=>Bs(t)],["EmptyShallowRef",t=>Hi(t==="_"?void 0:t==="0n"?BigInt(0):Iu(t))],["EmptyRef",t=>or(t==="_"?void 0:t==="0n"?BigInt(0):Iu(t))],["ShallowRef",t=>Hi(t)],["ShallowReactive",t=>Un(t)],["Ref",t=>or(t)],["Reactive",t=>gr(t)]],aC=Qn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[r,s]of oC)iC(r,s);Object.assign(t.payload,([e,n]=Fi(()=>t.runWithContext(sC)),e=await e,n(),e)),delete window.__NUXT__}});async function Ad(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{const i=new Map,o=new Promise(m=>{t.resolveTags().then(y=>{m(y.map(v=>{const x=i.get(v._d)||0,N={tag:v,id:(x?`${v._d}:${x}`:v._d)||Ug(v),shouldRender:!0};return v._d&&tw(v._d)&&i.set(v._d,x+1),N}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const m of["body","head"]){const y=n[m]?.children;for(const v of y){const x=v.tagName.toLowerCase();if(!Bg.has(x))continue;const N=nw({tag:x,props:{}},{innerHTML:v.innerHTML,...v.getAttributeNames().reduce((D,E)=>(D[E]=v.getAttribute(E),D),{})||{}});if(N.key=v.getAttribute("data-hid")||void 0,N._d=lf(N)||Ug(N),a.elMap.has(N._d)){let D=1,E=N._d;for(;a.elMap.has(E);)E=`${N._d}:${D++}`;a.elMap.set(E,v)}else a.elMap.set(N._d,v)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function c(m,y,v){const x=`${m}:${y}`;a.sideEffects[x]=v,delete a.pendingSideEffects[x]}function l({id:m,$el:y,tag:v}){const x=v.tag.endsWith("Attrs");a.elMap.set(m,y),x||(v.textContent&&v.textContent!==y.textContent&&(y.textContent=v.textContent),v.innerHTML&&v.innerHTML!==y.innerHTML&&(y.innerHTML=v.innerHTML),c(m,"el",()=>{y?.remove(),a.elMap.delete(m)}));for(const N in v.props){if(!Object.prototype.hasOwnProperty.call(v.props,N))continue;const D=v.props[N];if(N.startsWith("on")&&typeof D=="function"){const C=y?.dataset;if(C&&C[`${N}fired`]){const k=N.slice(0,-5);D.call(y,new Event(k.substring(2)))}y.getAttribute(`data-${N}`)!==""&&((v.tag==="bodyAttrs"?n.defaultView:y).addEventListener(N.substring(2),D.bind(y)),y.setAttribute(`data-${N}`,""));continue}const E=`attr:${N}`;if(N==="class"){if(!D)continue;for(const C of D)x&&c(m,`${E}:${C}`,()=>y.classList.remove(C)),!y.classList.contains(C)&&y.classList.add(C)}else if(N==="style"){if(!D)continue;for(const[C,k]of D)c(m,`${E}:${C}`,()=>{y.style.removeProperty(C)}),y.style.setProperty(C,k)}else D!==!1&&D!==null&&(y.getAttribute(N)!==D&&y.setAttribute(N,D===!0?"":String(D)),x&&c(m,E,()=>y.removeAttribute(N)))}}const h=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const m of p){const{tag:y,shouldRender:v,id:x}=m;if(v){if(y.tag==="title"){n.title=y.textContent,c("title","",()=>n.title=a.title);continue}m.$el=m.$el||a.elMap.get(x),m.$el?l(m):Bg.has(y.tag)&&h.push(m)}}for(const m of h){const y=m.tag.tagPosition||"head";m.$el=n.createElement(m.tag.tag),l(m),f[y]=f[y]||n.createDocumentFragment(),f[y].appendChild(m.$el)}for(const m of p)await t.hooks.callHook("dom:renderTag",m,n,c);f.head&&n.head.appendChild(f.head),f.bodyOpen&&n.body.insertBefore(f.bodyOpen,n.body.firstChild),f.bodyClose&&n.body.appendChild(f.bodyClose);for(const m in a.pendingSideEffects)a.pendingSideEffects[m]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function cC(t={}){const e=t.domOptions?.render||Ad;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return JP({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function uC(t,e){let n=0;return()=>{const r=++n;e(()=>{n===r&&t()})}}function lC(t={}){const e=cC({domOptions:{render:uC(()=>Ad(e),n=>setTimeout(n,0))},...t});return e.install=XP(e),e}const hC={disableDefaults:!0},fC=Qn({name:"nuxt:head",enforce:"pre",setup(t){const e=lC(hC);t.vueApp.use(e);{let n=!0;const r=async()=>{n=!1,await Ad(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||r()}),t.hooks.hook("app:error",r),t.hooks.hook("app:suspense:resolve",r)}}});function dC(){return aw().__VUE_DEVTOOLS_GLOBAL_HOOK__}function aw(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const pC=typeof Proxy=="function",mC="devtools-plugin:setup",gC="plugin:settings:set";let mi,hf;function _C(){var t;return mi!==void 0||(typeof window<"u"&&window.performance?(mi=!0,hf=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(mi=!0,hf=globalThis.perf_hooks.performance):mi=!1),mi}function yC(){return _C()?hf.now():Date.now()}class vC{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),a=JSON.parse(o);Object.assign(i,a)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return yC()}},n&&n.on(gC,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...c)=>{this.onQueue.push({method:a,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...c)=>(this.targetQueue.push({method:a,args:c,resolve:()=>{}}),this.fallbacks[a](...c)):(...c)=>new Promise(l=>{this.targetQueue.push({method:a,args:c,resolve:l})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function EC(t,e){const n=t,r=aw(),s=dC(),i=pC&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(mC,t,e);else{const o=i?new vC(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const bi=typeof document<"u";function cw(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function wC(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&cw(t.default)}const Ve=Object.assign;function Eh(t,e){const n={};for(const r in e){const s=e[r];n[r]=Cn(s)?s.map(t):t(s)}return n}const va=()=>{},Cn=Array.isArray;function zg(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const uw=/#/g,TC=/&/g,IC=/\//g,bC=/=/g,AC=/\?/g,lw=/\+/g,RC=/%5B/g,SC=/%5D/g,hw=/%5E/g,PC=/%60/g,fw=/%7B/g,CC=/%7C/g,dw=/%7D/g,xC=/%20/g;function Rd(t){return t==null?"":encodeURI(""+t).replace(CC,"|").replace(RC,"[").replace(SC,"]")}function VC(t){return Rd(t).replace(fw,"{").replace(dw,"}").replace(hw,"^")}function ff(t){return Rd(t).replace(lw,"%2B").replace(xC,"+").replace(uw,"%23").replace(TC,"%26").replace(PC,"`").replace(fw,"{").replace(dw,"}").replace(hw,"^")}function DC(t){return ff(t).replace(bC,"%3D")}function NC(t){return Rd(t).replace(uw,"%23").replace(AC,"%3F")}function kC(t){return NC(t).replace(IC,"%2F")}function Oa(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const OC=/\/$/,MC=t=>t.replace(OC,"");function wh(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return c=a>=0&&c>a?-1:c,c>=0&&(r=e.slice(0,c),i=e.slice(c,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=UC(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Oa(o)}}function LC(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Kg(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function FC(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ji(e.matched[r],n.matched[s])&&pw(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ji(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function pw(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!BC(t[n],e[n]))return!1;return!0}function BC(t,e){return Cn(t)?Wg(t,e):Cn(e)?Wg(e,t):t===e}function Wg(t,e){return Cn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function UC(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const dn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let df=(function(t){return t.pop="pop",t.push="push",t})({}),Th=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function jC(t){if(!t)if(bi){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),MC(t)}const $C=/^[^#]+#/;function qC(t,e){return t.replace($C,"#")+e}function HC(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const gl=()=>({left:window.scrollX,top:window.scrollY});function GC(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=HC(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Qg(t,e){return(history.state?history.state.position-e:-1)+t}const pf=new Map;function zC(t,e){pf.set(t,e)}function KC(t){const e=pf.get(t);return pf.delete(t),e}function WC(t){return typeof t=="string"||t&&typeof t=="object"}function mw(t){return typeof t=="string"||typeof t=="symbol"}let Ye=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const gw=Symbol("");Ye.MATCHER_NOT_FOUND+"",Ye.NAVIGATION_GUARD_REDIRECT+"",Ye.NAVIGATION_ABORTED+"",Ye.NAVIGATION_CANCELLED+"",Ye.NAVIGATION_DUPLICATED+"";function Yi(t,e){return Ve(new Error,{type:t,[gw]:!0},e)}function er(t,e){return t instanceof Error&&gw in t&&(e==null||!!(t.type&e))}const QC=["params","query","hash"];function JC(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of QC)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function YC(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(lw," "),i=s.indexOf("="),o=Oa(i<0?s:s.slice(0,i)),a=i<0?null:Oa(s.slice(i+1));if(o in e){let c=e[o];Cn(c)||(c=e[o]=[c]),c.push(a)}else e[o]=a}return e}function Jg(t){let e="";for(let n in t){const r=t[n];if(n=DC(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Cn(r)?r.map(s=>s&&ff(s)):[r&&ff(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function XC(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Cn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const ZC=Symbol(""),Yg=Symbol(""),Sd=Symbol(""),Pd=Symbol(""),mf=Symbol("");function Xo(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Lr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const l=p=>{p===!1?c(Yi(Ye.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?c(p):WC(p)?c(Yi(Ye.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(r&&r.instances[s],e,n,l));let f=Promise.resolve(h);t.length<3&&(f=f.then(l)),f.catch(p=>c(p))})}function Ih(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(cw(c)){const l=(c.__vccOpts||c)[e];l&&i.push(Lr(l,n,r,o,a,s))}else{let l=c();i.push(()=>l.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=wC(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Lr(p,n,r,o,a,s)()}))}}return i}function ex(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>Ji(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Ji(l,c))||s.push(c))}return[n,r,s]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let tx=()=>location.protocol+"//"+location.host;function _w(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),Kg(a,"")}return Kg(n,t)+r+s}function nx(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const m=_w(t,location),y=n.value,v=e.value;let x=0;if(p){if(n.value=m,e.value=p,o&&o===y){o=null;return}x=v?p.position-v.position:0}else r(m);s.forEach(N=>{N(n.value,y,{delta:x,type:df.pop,direction:x?x>0?Th.forward:Th.back:Th.unknown})})};function c(){o=n.value}function l(p){s.push(p);const m=()=>{const y=s.indexOf(p);y>-1&&s.splice(y,1)};return i.push(m),m}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Ve({},p.state,{scroll:gl()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:c,listen:l,destroy:f}}function Xg(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?gl():null}}function rx(t){const{history:e,location:n}=window,r={value:_w(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:tx()+t+c;try{e[h?"replaceState":"pushState"](l,"",p),s.value=l}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(c,l){i(c,Ve({},e.state,Xg(s.value.back,c,s.value.forward,!0),l,{position:s.value.position}),!0),r.value=c}function a(c,l){const h=Ve({},s.value,e.state,{forward:c,scroll:gl()});i(h.current,h,!0),i(c,Ve({},Xg(r.value,c,null),{position:h.position+1},l),!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function sx(t){t=jC(t);const e=rx(t),n=nx(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ve({location:"",base:t,go:r,createHref:qC.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Ds=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var ft=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(ft||{});const ix={type:Ds.Static,value:""},ox=/[a-zA-Z0-9_]/;function ax(t){if(!t)return[[]];if(t==="/")return[[ix]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${l}": ${m}`)}let n=ft.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",h="";function f(){l&&(n===ft.Static?i.push({type:Ds.Static,value:l}):n===ft.Param||n===ft.ParamRegExp||n===ft.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Ds.Param,value:l,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function p(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==ft.ParamRegExp){r=n,n=ft.EscapeNext;continue}switch(n){case ft.Static:c==="/"?(l&&f(),o()):c===":"?(f(),n=ft.Param):p();break;case ft.EscapeNext:p(),n=r;break;case ft.Param:c==="("?n=ft.ParamRegExp:ox.test(c)?p():(f(),n=ft.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case ft.ParamRegExp:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=ft.ParamRegExpEnd:h+=c;break;case ft.ParamRegExpEnd:f(),n=ft.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===ft.ParamRegExp&&e(`Unfinished custom RegExp for param "${l}"`),f(),o(),s}const Zg="[^/]+?",cx={sensitive:!1,strict:!1,start:!0,end:!0};var Bt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Bt||{});const ux=/[.+*?^${}()[\]/\\]/g;function lx(t,e){const n=Ve({},cx,e),r=[];let s=n.start?"^":"";const i=[];for(const l of t){const h=l.length?[]:[Bt.Root];n.strict&&!l.length&&(s+="/");for(let f=0;f<l.length;f++){const p=l[f];let m=Bt.Segment+(n.sensitive?Bt.BonusCaseSensitive:0);if(p.type===Ds.Static)f||(s+="/"),s+=p.value.replace(ux,"\\$&"),m+=Bt.Static;else if(p.type===Ds.Param){const{value:y,repeatable:v,optional:x,regexp:N}=p;i.push({name:y,repeatable:v,optional:x});const D=N||Zg;if(D!==Zg){m+=Bt.BonusCustomRegExp;try{`${D}`}catch(C){throw new Error(`Invalid custom RegExp for param "${y}" (${D}): `+C.message)}}let E=v?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;f||(E=x&&l.length<2?`(?:/${E})`:"/"+E),x&&(E+="?"),s+=E,m+=Bt.Dynamic,x&&(m+=Bt.BonusOptional),v&&(m+=Bt.BonusRepeatable),D===".*"&&(m+=Bt.BonusWildcard)}h.push(m)}r.push(h)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=Bt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const h=l.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",y=i[p-1];f[y.name]=m&&y.repeatable?m.split("/"):m}return f}function c(l){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const m of p)if(m.type===Ds.Static)h+=m.value;else if(m.type===Ds.Param){const{value:y,repeatable:v,optional:x}=m,N=y in l?l[y]:"";if(Cn(N)&&!v)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const D=Cn(N)?N.join("/"):N;if(!D)if(x)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${y}"`);h+=D}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function hx(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Bt.Static+Bt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Bt.Static+Bt.Segment?1:-1:0}function yw(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=hx(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(e_(r))return 1;if(e_(s))return-1}return s.length-r.length}function e_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const fx={strict:!1,end:!0,sensitive:!1};function dx(t,e,n){const r=lx(ax(t.path),n),s=Ve(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function px(t,e){const n=[],r=new Map;e=zg(fx,e);function s(f){return r.get(f)}function i(f,p,m){const y=!m,v=n_(f);v.aliasOf=m&&m.record;const x=zg(e,f),N=[v];if("alias"in f){const C=typeof f.alias=="string"?[f.alias]:f.alias;for(const k of C)N.push(n_(Ve({},v,{components:m?m.record.components:v.components,path:k,aliasOf:m?m.record:v})))}let D,E;for(const C of N){const{path:k}=C;if(p&&k[0]!=="/"){const U=p.record.path,I=U[U.length-1]==="/"?"":"/";C.path=p.record.path+(k&&I+k)}if(D=dx(C,p,x),m?m.alias.push(D):(E=E||D,E!==D&&E.alias.push(D),y&&f.name&&!r_(D)&&o(f.name)),vw(D)&&c(D),v.children){const U=v.children;for(let I=0;I<U.length;I++)i(U[I],D,m&&m.children[I])}m=m||D}return E?()=>{o(E)}:va}function o(f){if(mw(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function c(f){const p=_x(f,n);n.splice(p,0,f),f.record.name&&!r_(f)&&r.set(f.record.name,f)}function l(f,p){let m,y={},v,x;if("name"in f&&f.name){if(m=r.get(f.name),!m)throw Yi(Ye.MATCHER_NOT_FOUND,{location:f});x=m.record.name,y=Ve(t_(p.params,m.keys.filter(E=>!E.optional).concat(m.parent?m.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),f.params&&t_(f.params,m.keys.map(E=>E.name))),v=m.stringify(y)}else if(f.path!=null)v=f.path,m=n.find(E=>E.re.test(v)),m&&(y=m.parse(v),x=m.record.name);else{if(m=p.name?r.get(p.name):n.find(E=>E.re.test(p.path)),!m)throw Yi(Ye.MATCHER_NOT_FOUND,{location:f,currentLocation:p});x=m.record.name,y=Ve({},p.params,f.params),v=m.stringify(y)}const N=[];let D=m;for(;D;)N.unshift(D.record),D=D.parent;return{name:x,path:v,params:y,matched:N,meta:gx(N)}}t.forEach(f=>i(f));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:l,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function t_(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function n_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:mx(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function mx(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function r_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function gx(t){return t.reduce((e,n)=>Ve(e,n.meta),{})}function _x(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;yw(t,e[i])<0?r=i:n=i+1}const s=yx(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function yx(t){let e=t;for(;e=e.parent;)if(vw(e)&&yw(t,e)===0)return e}function vw({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function s_(t){const e=kt(Sd),n=kt(Pd),r=sn(()=>{const c=je(t.to);return e.resolve(c)}),s=sn(()=>{const{matched:c}=r.value,{length:l}=c,h=c[l-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(Ji.bind(null,h));if(p>-1)return p;const m=i_(c[l-2]);return l>1&&i_(h)===m&&f[f.length-1].path!==m?f.findIndex(Ji.bind(null,c[l-2])):p}),i=sn(()=>s.value>-1&&Ix(n.params,r.value.params)),o=sn(()=>s.value>-1&&s.value===n.matched.length-1&&pw(n.params,r.value.params));function a(c={}){if(Tx(c)){const l=e[je(t.replace)?"replace":"push"](je(t.to)).catch(va);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:sn(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function vx(t){return t.length===1?t[0]:t}const Ex=os({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:s_,setup(t,{slots:e}){const n=gr(s_(t)),{options:r}=kt(Sd),s=sn(()=>({[o_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[o_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&vx(e.default(n));return t.custom?i:Nt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),wx=Ex;function Tx(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Ix(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Cn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function i_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const o_=(t,e,n)=>t??e??n,bx=os({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=kt(mf),s=sn(()=>t.route||r.value),i=kt(Yg,0),o=sn(()=>{let l=je(i);const{matched:h}=s.value;let f;for(;(f=h[l])&&!f.components;)l++;return l}),a=sn(()=>s.value.matched[o.value]);Gr(Yg,sn(()=>o.value+1)),Gr(ZC,a),Gr(mf,s);const c=or();return zr(()=>[c.value,a.value,t.name],([l,h,f],[p,m,y])=>{h&&(h.instances[f]=l,m&&m!==h&&l&&l===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),l&&h&&(!m||!Ji(h,m)||!p)&&(h.enterCallbacks[f]||[]).forEach(v=>v(l))},{flush:"post"}),()=>{const l=s.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return a_(n.default,{Component:p,route:l});const m=f.props[h],y=m?m===!0?l.params:typeof m=="function"?m(l):m:null,x=Nt(p,Ve({},y,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return a_(n.default,{Component:x,route:l})||x}}});function a_(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Ew=bx;function Ax(t){const e=px(t.routes,t),n=t.parseQuery||YC,r=t.stringifyQuery||Jg,s=t.history,i=Xo(),o=Xo(),a=Xo(),c=Hi(dn);let l=dn;bi&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Eh.bind(null,$=>""+$),f=Eh.bind(null,kC),p=Eh.bind(null,Oa);function m($,se){let ee,ue;return mw($)?(ee=e.getRecordMatcher($),ue=se):ue=$,e.addRoute(ue,ee)}function y($){const se=e.getRecordMatcher($);se&&e.removeRoute(se)}function v(){return e.getRoutes().map($=>$.record)}function x($){return!!e.getRecordMatcher($)}function N($,se){if(se=Ve({},se||c.value),typeof $=="string"){const V=wh(n,$,se.path),L=e.resolve({path:V.path},se),H=s.createHref(V.fullPath);return Ve(V,L,{params:p(L.params),hash:Oa(V.hash),redirectedFrom:void 0,href:H})}let ee;if($.path!=null)ee=Ve({},$,{path:wh(n,$.path,se.path).path});else{const V=Ve({},$.params);for(const L in V)V[L]==null&&delete V[L];ee=Ve({},$,{params:f(V)}),se.params=f(se.params)}const ue=e.resolve(ee,se),ve=$.hash||"";ue.params=h(p(ue.params));const Le=LC(r,Ve({},$,{hash:VC(ve),path:ue.path})),A=s.createHref(Le);return Ve({fullPath:Le,hash:ve,query:r===Jg?XC($.query):$.query||{}},ue,{redirectedFrom:void 0,href:A})}function D($){return typeof $=="string"?wh(n,$,c.value.path):Ve({},$)}function E($,se){if(l!==$)return Yi(Ye.NAVIGATION_CANCELLED,{from:se,to:$})}function C($){return I($)}function k($){return C(Ve(D($),{replace:!0}))}function U($,se){const ee=$.matched[$.matched.length-1];if(ee&&ee.redirect){const{redirect:ue}=ee;let ve=typeof ue=="function"?ue($,se):ue;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=D(ve):{path:ve},ve.params={}),Ve({query:$.query,hash:$.hash,params:ve.path!=null?{}:$.params},ve)}}function I($,se){const ee=l=N($),ue=c.value,ve=$.state,Le=$.force,A=$.replace===!0,V=U(ee,ue);if(V)return I(Ve(D(V),{state:typeof V=="object"?Ve({},ve,V.state):ve,force:Le,replace:A}),se||ee);const L=ee;L.redirectedFrom=se;let H;return!Le&&FC(r,ue,ee)&&(H=Yi(Ye.NAVIGATION_DUPLICATED,{to:L,from:ue}),Zt(ue,ue,!0,!1)),(H?Promise.resolve(H):R(L,ue)).catch(j=>er(j)?er(j,Ye.NAVIGATION_GUARD_REDIRECT)?j:Dn(j):re(j,L,ue)).then(j=>{if(j){if(er(j,Ye.NAVIGATION_GUARD_REDIRECT))return I(Ve({replace:A},D(j.to),{state:typeof j.to=="object"?Ve({},ve,j.to.state):ve,force:Le}),se||L)}else j=S(L,ue,!0,A,ve);return P(L,ue,j),j})}function T($,se){const ee=E($,se);return ee?Promise.reject(ee):Promise.resolve()}function w($){const se=yn.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext($):$()}function R($,se){let ee;const[ue,ve,Le]=ex($,se);ee=Ih(ue.reverse(),"beforeRouteLeave",$,se);for(const V of ue)V.leaveGuards.forEach(L=>{ee.push(Lr(L,$,se))});const A=T.bind(null,$,se);return ee.push(A),St(ee).then(()=>{ee=[];for(const V of i.list())ee.push(Lr(V,$,se));return ee.push(A),St(ee)}).then(()=>{ee=Ih(ve,"beforeRouteUpdate",$,se);for(const V of ve)V.updateGuards.forEach(L=>{ee.push(Lr(L,$,se))});return ee.push(A),St(ee)}).then(()=>{ee=[];for(const V of Le)if(V.beforeEnter)if(Cn(V.beforeEnter))for(const L of V.beforeEnter)ee.push(Lr(L,$,se));else ee.push(Lr(V.beforeEnter,$,se));return ee.push(A),St(ee)}).then(()=>($.matched.forEach(V=>V.enterCallbacks={}),ee=Ih(Le,"beforeRouteEnter",$,se,w),ee.push(A),St(ee))).then(()=>{ee=[];for(const V of o.list())ee.push(Lr(V,$,se));return ee.push(A),St(ee)}).catch(V=>er(V,Ye.NAVIGATION_CANCELLED)?V:Promise.reject(V))}function P($,se,ee){a.list().forEach(ue=>w(()=>ue($,se,ee)))}function S($,se,ee,ue,ve){const Le=E($,se);if(Le)return Le;const A=se===dn,V=bi?history.state:{};ee&&(ue||A?s.replace($.fullPath,Ve({scroll:A&&V&&V.scroll},ve)):s.push($.fullPath,ve)),c.value=$,Zt($,se,ee,A),Dn()}let b;function fe(){b||(b=s.listen(($,se,ee)=>{if(!vn.listening)return;const ue=N($),ve=U(ue,vn.currentRoute.value);if(ve){I(Ve(ve,{replace:!0,force:!0}),ue).catch(va);return}l=ue;const Le=c.value;bi&&zC(Qg(Le.fullPath,ee.delta),gl()),R(ue,Le).catch(A=>er(A,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_CANCELLED)?A:er(A,Ye.NAVIGATION_GUARD_REDIRECT)?(I(Ve(D(A.to),{force:!0}),ue).then(V=>{er(V,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===df.pop&&s.go(-1,!1)}).catch(va),Promise.reject()):(ee.delta&&s.go(-ee.delta,!1),re(A,ue,Le))).then(A=>{A=A||S(ue,Le,!1),A&&(ee.delta&&!er(A,Ye.NAVIGATION_CANCELLED)?s.go(-ee.delta,!1):ee.type===df.pop&&er(A,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),P(ue,Le,A)}).catch(va)}))}let Te=Xo(),ie=Xo(),pe;function re($,se,ee){Dn($);const ue=ie.list();return ue.length?ue.forEach(ve=>ve($,se,ee)):console.error($),Promise.reject($)}function Ce(){return pe&&c.value!==dn?Promise.resolve():new Promise(($,se)=>{Te.add([$,se])})}function Dn($){return pe||(pe=!$,fe(),Te.list().forEach(([se,ee])=>$?ee($):se()),Te.reset()),$}function Zt($,se,ee,ue){const{scrollBehavior:ve}=t;if(!bi||!ve)return Promise.resolve();const Le=!ee&&KC(Qg($.fullPath,0))||(ue||!ee)&&history.state&&history.state.scroll||null;return Gi().then(()=>ve($,se,Le)).then(A=>A&&GC(A)).catch(A=>re(A,$,se))}const Et=$=>s.go($);let Jn;const yn=new Set,vn={currentRoute:c,listening:!0,addRoute:m,removeRoute:y,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:v,resolve:N,options:t,push:C,replace:k,go:Et,back:()=>Et(-1),forward:()=>Et(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ie.add,isReady:Ce,install($){$.component("RouterLink",wx),$.component("RouterView",Ew),$.config.globalProperties.$router=vn,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>je(c)}),bi&&!Jn&&c.value===dn&&(Jn=!0,C(s.location).catch(ue=>{}));const se={};for(const ue in dn)Object.defineProperty(se,ue,{get:()=>c.value[ue],enumerable:!0});$.provide(Sd,vn),$.provide(Pd,Un(se)),$.provide(mf,c);const ee=$.unmount;yn.add($),$.unmount=function(){yn.delete($),yn.size<1&&(l=dn,b&&b(),b=null,c.value=dn,Jn=!1,pe=!1),ee()}}};function St($){return $.reduce((se,ee)=>se.then(()=>w(ee)),Promise.resolve())}return vn}function ww(t){return kt(Pd)}const Rx=/(:\w+)\([^)]+\)/g,Sx=/(:\w+)[?+*]/g,Px=/:\w+/g,Cx=(t,e)=>e.path.replace(Rx,"$1").replace(Sx,"$1").replace(Px,n=>t.params[n.slice(1)]?.toString()||""),gf=(t,e)=>{const n=t.route.matched.find(s=>s.components?.default===t.Component.type),r=e??n?.meta.key??(n&&Cx(t.route,n));return typeof r=="function"?r(t.route):r},xx=(t,e)=>({default:()=>t?Nt(CR,t===!0?{}:t,e):e});function Cd(t){return Array.isArray(t)?t:[t]}const Vx="modulepreload",Dx=function(t,e){return new URL(t,e).href},c_={},fn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=l(n.map(h=>{if(h=Dx(h,r),h in c_)return;c_[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(r)for(let y=o.length-1;y>=0;y--){const v=o[y];if(v.href===h&&(!f||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":Vx,f||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},bh=[{name:"index",path:"/",component:()=>fn(()=>import("./BwgTRyNg.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)},{name:"records-topic",path:"/records/topic",component:()=>fn(()=>import("./D4DdvONk.js"),__vite__mapDeps([6,1,2,3,7,8,9,10]),import.meta.url)},{name:"users-id",path:"/users/:id()",component:()=>fn(()=>import("./hV1C6nB6.js"),__vite__mapDeps([11,1,2,4,3,9,12]),import.meta.url)},{name:"records-slow-quiz",path:"/records/slow-quiz",component:()=>fn(()=>import("./RANa_Eef.js"),__vite__mapDeps([13,1,2,7,8,9,14,15]),import.meta.url)},{name:"achievements",path:"/achievements",component:()=>fn(()=>import("./BtzSWRPx.js"),__vite__mapDeps([16,17,4,2,3,18]),import.meta.url)},{name:"records-oneiromancy",path:"/records/oneiromancy",component:()=>fn(()=>import("./CtFqpgF9.js"),__vite__mapDeps([19,1,2,3,7,8,9,20]),import.meta.url)},{name:"categories-id",path:"/categories/:id()",component:()=>fn(()=>import("./p4oyPqCH.js"),__vite__mapDeps([21,17,4,2,3,18]),import.meta.url)},{name:"achievements-id",path:"/achievements/:id()",component:()=>fn(()=>import("./BsmpYPfm.js"),__vite__mapDeps([22,1,2,3,4,23]),import.meta.url)},{name:"records-twenty-questions",path:"/records/twenty-questions",component:()=>fn(()=>import("./B58avgJC.js"),__vite__mapDeps([24,1,2,7,14,25]),import.meta.url)}],Tw=(t,e)=>({default:()=>t?Nt(CS,t===!0?{}:t,e):e.default?.()}),Nx=/(:\w+)\([^)]+\)/g,kx=/(:\w+)[?+*]/g,Ox=/:\w+/g;function u_(t){const e=t?.meta.key??t.path.replace(Nx,"$1").replace(kx,"$1").replace(Ox,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function Mx(t,e){return t===e||e===dn?!1:u_(t)!==u_(e)?!0:!t.matched.every((r,s)=>r.components&&r.components.default===e.matched[s]?.components?.default)}const Lx={scrollBehavior(t,e,n){const r=dt(),s=un().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:Iw(t.hash),behavior:s}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=r._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===dn){a(l_(t,e,n,s));return}r.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(l_(t,e,n,s)))})})}};function Iw(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function l_(t,e,n,r){if(n)return n;const s=Mx(t,e);return t.hash?{el:t.hash,top:Iw(t.hash),behavior:s?r:"instant"}:{left:0,top:0}}const Fx={hashMode:!1,scrollBehaviorType:"auto"},Cr={...Fx,...Lx},Bx=async(t,e)=>{let n,r;if(!t.meta?.validate)return;const s=([n,r]=Fi(()=>Promise.resolve(t.meta.validate(t))),n=await n,r(),n);if(s===!0)return;const i=Bs({fatal:!0,statusCode:s&&s.statusCode||404,statusMessage:s&&s.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},Ux=async t=>{let e,n;const r=([e,n]=Fi(()=>bd({path:t.path})),e=await e,n(),e);if(r.redirect){const s=r.redirect.includes("#")?r.redirect:r.redirect+t.hash;return ni(s,{acceptRelative:!0})?(window.location.href=s,!1):s}},jx=[Bx,Ux],_f={};function $x(t,e,n){const{pathname:r,search:s,hash:i}=e,o=t.indexOf("#");if(o>-1){const l=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(l);return h[0]!=="/"&&(h="/"+h),Pg(h,"")}const a=Pg(r,t),c=!n||P0(a,n)?a:n;return c+(c.includes("?")?"":s)+i}const qx=Qn({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,r=fl().app.baseURL;const s=Cr.history?.(r)??sx(r),i=Cr.routes?([e,n]=Fi(()=>Cr.routes(bh)),e=await e,n(),e??bh):bh;let o;const a=Ax({...Cr,scrollBehavior:(x,N,D)=>{if(N===dn){o=D;return}if(Cr.scrollBehavior){if(a.options.scrollBehavior=Cr.scrollBehavior,"scrollRestoration"in window.history){const E=a.beforeEach(()=>{E(),window.history.scrollRestoration="manual"})}return Cr.scrollBehavior(x,dn,o||D)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const c=Hi(a.currentRoute.value);a.afterEach((x,N)=>{c.value=N}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const l=$x(r,window.location,t.payload.path),h=Hi(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};t.hook("page:finish",f),a.afterEach((x,N)=>{x.matched[x.matched.length-1]?.components?.default===N.matched[N.matched.length-1]?.components?.default&&f()});const p={};for(const x in h.value)Object.defineProperty(p,x,{get:()=>h.value[x],enumerable:!0});t._route=Un(p),t._middleware||={global:[],named:{}};const m=pl();a.afterEach(async(x,N,D)=>{delete t._processingMiddleware,!t.isHydrating&&m.value&&await t.runWithContext(IP),D&&await t.callHook("page:loading:end")});try{[e,n]=Fi(()=>a.isReady()),await e,n()}catch(x){[e,n]=Fi(()=>t.runWithContext(()=>Is(x))),await e,n()}const y=l!==a.currentRoute.value.fullPath?a.resolve(l):a.currentRoute.value;f();const v=t.payload.state._layout;return a.beforeEach(async(x,N)=>{await t.callHook("page:loading:start"),x.meta=gr(x.meta),t.isHydrating&&v&&!zn(x.meta.layout)&&(x.meta.layout=v),t._processingMiddleware=!0;{const D=new Set([...jx,...t._middleware.global]);for(const E of x.matched){const C=E.meta.middleware;if(C)for(const k of Cd(C))D.add(k)}{const E=await t.runWithContext(()=>bd({path:x.path}));if(E.appMiddleware)for(const C in E.appMiddleware)E.appMiddleware[C]?D.add(C):D.delete(C)}for(const E of D){const C=typeof E=="string"?t._middleware.named[E]||await _f[E]?.().then(k=>k.default||k):E;if(!C)throw new Error(`Unknown route middleware: '${E}'.`);try{const k=await t.runWithContext(()=>C(x,N));if(!t.payload.serverRendered&&t.isHydrating&&(k===!1||k instanceof Error)){const U=k||Bs({statusCode:404,statusMessage:`Page Not Found: ${l}`});return await t.runWithContext(()=>Is(U)),!1}if(k===!0)continue;if(k===!1)return k;if(k)return ew(k)&&k.fatal&&await t.runWithContext(()=>Is(k)),k}catch(k){const U=Bs(k);return U.fatal&&await t.runWithContext(()=>Is(U)),U}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(x=>{if(x.matched.length===0)return t.runWithContext(()=>Is(Bs({statusCode:404,fatal:!1,statusMessage:`Page not found: ${x.fullPath}`,data:{path:x.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in y&&(y.name=void 0),await a.replace({...y,force:!0}),a.options.scrollBehavior=Cr.scrollBehavior}catch(x){await t.runWithContext(()=>Is(x))}}),{provide:{router:a}}}}),h_=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),VF=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),xd=t=>{const e=dt();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{h_(()=>t())}):h_(()=>t())},Hx=Qn({name:"nuxt:payload",setup(t){const e=new Set;un().beforeResolve(async(n,r)=>{if(n.path===r.path)return;const s=await Gg(n.path);if(s){for(const i of e)delete t.static.data[i];for(const i in s.data)i in t.static.data||e.add(i),t.static.data[i]=s.data[i]}}),xd(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await Gg(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(ml,1e3)})}}),Gx=Qn(()=>{const t=un();xd(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),zx=Qn(t=>{let e;async function n(){let r;try{r=await ml()}catch(s){const i=s;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,Og);try{const s=await $fetch(Id("builds/latest.json")+`?${Date.now()}`);s.id!==r?.id&&(t.hooks.callHook("app:manifest:update",s),e&&clearTimeout(e))}catch{}}xd(()=>{e=setTimeout(n,Og)})});function Kx(t={}){const e=t.path||window.location.pathname;let n={};try{n=Iu(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:dt().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const Wx=Qn({name:"nuxt:chunk-reload",setup(t){const e=un(),n=fl(),r=new Set;e.beforeEach(()=>{r.clear()}),t.hook("app:chunkError",({error:i})=>{r.add(i)});function s(i){const o=wd(n.app.baseURL,i.fullPath);Kx({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{r.has(i)&&s(o)})}}),Qx=Qn({name:"nuxt:global-components"}),Ur={default:Kh(()=>fn(()=>import("./D1OxibOv.js"),__vite__mapDeps([26,3,27]),import.meta.url).then(t=>t.default||t))};function Jx(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function Yx(t,e=un()){const{path:n,matched:r}=e.resolve(t);if(!r.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const s=e._preloadPromises||=[];if(s.length>4)return Promise.all(s).then(()=>Yx(t,e));e._routePreloaded.add(n);for(const i of r){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>s.splice(s.indexOf(a)));s.push(a)}await Promise.all(s)}const Xx=Qn({name:"nuxt:prefetch",setup(t){const e=un();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const r=n?.meta?.layout;r&&typeof Ur[r]=="function"&&await Ur[r]()})}),t.hooks.hook("link:prefetch",n=>{if(ni(n))return;const r=e.resolve(n);if(!r)return;const s=r.meta.layout;let i=Cd(r.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof _f[o]=="function"&&_f[o]();typeof s=="string"&&s in Ur&&Jx(Ur[s])})}});/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var Zx="store";function Ao(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function bw(t){return t!==null&&typeof t=="object"}function e1(t){return t&&typeof t.then=="function"}function t1(t,e){return function(){return t(e)}}function Aw(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function Rw(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;_l(t,n,[],t._modules.root,!0),Vd(t,n,e)}function Vd(t,e,n){var r=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},a={},c=gv(!0);c.run(function(){Ao(i,function(l,h){o[h]=t1(l,t),a[h]=sn(function(){return o[h]()}),Object.defineProperty(t.getters,h,{get:function(){return a[h].value},enumerable:!0})})}),t._state=gr({data:e}),t._scope=c,t.strict&&o1(t),r&&n&&t._withCommit(function(){r.data=null}),s&&s.stop()}function _l(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var a=Dd(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit(function(){a[c]=r.state})}var l=r.context=n1(t,o,n);r.forEachMutation(function(h,f){var p=o+f;r1(t,p,h,l)}),r.forEachAction(function(h,f){var p=h.root?f:o+f,m=h.handler||h;s1(t,p,m,l)}),r.forEachGetter(function(h,f){var p=o+f;i1(t,p,h,l)}),r.forEachChild(function(h,f){_l(t,e,n.concat(f),h,s)})}function n1(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,a){var c=Cu(i,o,a),l=c.payload,h=c.options,f=c.type;return(!h||!h.root)&&(f=e+f),t.dispatch(f,l)},commit:r?t.commit:function(i,o,a){var c=Cu(i,o,a),l=c.payload,h=c.options,f=c.type;(!h||!h.root)&&(f=e+f),t.commit(f,l,h)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return Sw(t,e)}},state:{get:function(){return Dd(t.state,n)}}}),s}function Sw(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function r1(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function s1(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return e1(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):a})}function i1(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function o1(t){zr(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Dd(t,e){return e.reduce(function(n,r){return n[r]},t)}function Cu(t,e,n){return bw(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var a1="vuex bindings",f_="vuex:mutations",Ah="vuex:actions",gi="vuex",c1=0;function u1(t,e){EC({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[a1]},function(n){n.addTimelineLayer({id:f_,label:"Vuex Mutations",color:d_}),n.addTimelineLayer({id:Ah,label:"Vuex Actions",color:d_}),n.addInspector({id:gi,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===gi)if(r.filter){var s=[];Vw(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[xw(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===gi){var s=r.nodeId;Sw(e,s),r.state=f1(p1(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===gi){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(gi),n.sendInspectorState(gi),n.addTimelineEvent({layerId:f_,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=c1++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:Ah,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:Ah,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var d_=8702998,l1=6710886,h1=16777215,Pw={label:"namespaced",textColor:h1,backgroundColor:l1};function Cw(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function xw(t,e){return{id:e||"root",label:Cw(e),tags:t.namespaced?[Pw]:[],children:Object.keys(t._children).map(function(n){return xw(t._children[n],e+n+"/")})}}function Vw(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[Pw]:[]}),Object.keys(e._children).forEach(function(s){Vw(t,e._children[s],n,r+s+"/")})}function f1(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=d1(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?Cw(o):o,editable:!1,value:yf(function(){return i[o]})}})}return s}function d1(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=yf(function(){return t[n]})}else e[n]=yf(function(){return t[n]})}),e}function p1(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function yf(t){try{return t()}catch(e){return e}}var xn=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},Dw={namespaced:{configurable:!0}};Dw.namespaced.get=function(){return!!this._rawModule.namespaced};xn.prototype.addChild=function(e,n){this._children[e]=n};xn.prototype.removeChild=function(e){delete this._children[e]};xn.prototype.getChild=function(e){return this._children[e]};xn.prototype.hasChild=function(e){return e in this._children};xn.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};xn.prototype.forEachChild=function(e){Ao(this._children,e)};xn.prototype.forEachGetter=function(e){this._rawModule.getters&&Ao(this._rawModule.getters,e)};xn.prototype.forEachAction=function(e){this._rawModule.actions&&Ao(this._rawModule.actions,e)};xn.prototype.forEachMutation=function(e){this._rawModule.mutations&&Ao(this._rawModule.mutations,e)};Object.defineProperties(xn.prototype,Dw);var ri=function(e){this.register([],e,!1)};ri.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};ri.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};ri.prototype.update=function(e){Nw([],this.root,e)};ri.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new xn(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&Ao(n.modules,function(a,c){s.register(e.concat(c),a,r)})};ri.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};ri.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function Nw(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;Nw(t.concat(r),e.getChild(r),n.modules[r])}}function m1(t){return new Xt(t)}var Xt=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ri(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,a=this,c=a.dispatch,l=a.commit;this.dispatch=function(p,m){return c.call(o,p,m)},this.commit=function(p,m,y){return l.call(o,p,m,y)},this.strict=s;var h=this._modules.root.state;_l(this,h,[],this._modules.root),Vd(this,h),r.forEach(function(f){return f(n)})},Nd={state:{configurable:!0}};Xt.prototype.install=function(e,n){e.provide(n||Zx,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&u1(e,this)};Nd.state.get=function(){return this._state.data};Nd.state.set=function(t){};Xt.prototype.commit=function(e,n,r){var s=this,i=Cu(e,n,r),o=i.type,a=i.payload,c={type:o,payload:a},l=this._mutations[o];l&&(this._withCommit(function(){l.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(h){return h(c,s.state)}))};Xt.prototype.dispatch=function(e,n){var r=this,s=Cu(e,n),i=s.type,o=s.payload,a={type:i,payload:o},c=this._actions[i];if(c){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(a,r.state)})}catch{}var l=c.length>1?Promise.all(c.map(function(h){return h(o)})):c[0](o);return new Promise(function(h,f){l.then(function(p){try{r._actionSubscribers.filter(function(m){return m.after}).forEach(function(m){return m.after(a,r.state)})}catch{}h(p)},function(p){try{r._actionSubscribers.filter(function(m){return m.error}).forEach(function(m){return m.error(a,r.state,p)})}catch{}f(p)})})}};Xt.prototype.subscribe=function(e,n){return Aw(e,this._subscribers,n)};Xt.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return Aw(r,this._actionSubscribers,n)};Xt.prototype.watch=function(e,n,r){var s=this;return zr(function(){return e(s.state,s.getters)},n,Object.assign({},r))};Xt.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Xt.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),_l(this,this.state,e,this._modules.get(e),r.preserveState),Vd(this,this.state)};Xt.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=Dd(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),Rw(this)};Xt.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Xt.prototype.hotUpdate=function(e){this._modules.update(e),Rw(this,!0)};Xt.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Xt.prototype,Nd);var DF=Od(function(t,e){var n={};return kd(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){var a=this.$store.state,c=this.$store.getters;if(t){var l=Md(this.$store,"mapState",t);if(!l)return;a=l.context.state,c=l.context.getters}return typeof i=="function"?i.call(this,a,c):a[i]},n[s].vuex=!0}),n}),NF=Od(function(t,e){var n={};return kd(e).forEach(function(r){var s=r.key,i=r.val;i=t+i,n[s]=function(){if(!(t&&!Md(this.$store,"mapGetters",t)))return this.$store.getters[i]},n[s].vuex=!0}),n}),kF=Od(function(t,e){var n={};return kd(e).forEach(function(r){var s=r.key,i=r.val;n[s]=function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];var l=this.$store.dispatch;if(t){var h=Md(this.$store,"mapActions",t);if(!h)return;l=h.context.dispatch}return typeof i=="function"?i.apply(this,[l].concat(a)):l.apply(this.$store,[i].concat(a))}}),n});function kd(t){return g1(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function g1(t){return Array.isArray(t)||bw(t)}function Od(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function Md(t,e,n){var r=t._modulesNamespaceMap[n];return r}/*!
  * vuexfire v3.2.5
  * (c) 2020 Eduardo San Martin Morote
  * @license MIT
  */var kw="vuexfire/SET_VALUE",Ow="vuexfire/ARRAY_ADD",Mw="vuexfire/ARRAY_REMOVE";function Ld(t,e){return e.split(".").reduce(function(n,r){return n[r]},t)}function _1(t,e,n){var r=(""+e).split("."),s=r.pop(),i=r.reduce(function(o,a){return o[a]},t);return Array.isArray(i)?i.splice(Number(s),1,n):i[s]=n}function y1(t){return t&&typeof t=="object"}function v1(t){return t.toDate}function E1(t){return t&&t.onSnapshot}function w1(t,e){var n=!1;return function(){if(!n)return n=!0,t(e())}}function T1(t){return Object.defineProperty(t.data()||{},"id",{value:t.id})}function vf(t,e,n){var r=[{},{}],s=Object.keys(n).reduce(function(o,a){var c=n[a];return o[c.path]=c.data(),o},{});function i(o,a,c,l){a=a||{};var h=l[0],f=l[1];Object.getOwnPropertyNames(o).forEach(function(x){var N=Object.getOwnPropertyDescriptor(o,x);N&&!N.enumerable&&Object.defineProperty(h,x,N)});for(var p in o){var m=o[p];if(m==null||m instanceof Date||v1(m)||m.longitude&&m.latitude)h[p]=m;else if(E1(m))h[p]=typeof a=="object"&&p in a&&typeof a[p]!="string"?a[p]:m.path,f[c+p]=m;else if(Array.isArray(m)){h[p]=Array(m.length);for(var y=0;y<m.length;y++){var v=m[y];v&&v.path in s&&(h[p][y]=s[v.path])}i(m,a[p]||h[p],c+p+".",[h[p],f])}else y1(m)?(h[p]={},i(m,a[p],c+p+".",[h[p],f])):h[p]=m}}return i(t,e,"",r),r}var Ma={maxRefDepth:2,reset:!0,serialize:T1,wait:!1};function xu(t){for(var e in t)t[e].unsub()}function Lw(t,e,n,r,s,i,o,a){var c=vf(t.serialize(r),Ld(e,n),s),l=c[0],h=c[1];i.set(e,n,l),Ef(t,e,n,s,h,i,o,a)}function I1(t,e){var n=t.ref,r=t.target,s=t.path,i=t.depth,o=t.resolve,a=t.ops,c=Object.create(null),l=n.onSnapshot(function(h){h.exists?Lw(e,r,s,h,c,a,i,o):(a.set(r,s,null),o())});return function(){l(),xu(c)}}function Ef(t,e,n,r,s,i,o,a){var c=Object.keys(s),l=Object.keys(r).filter(function(y){return c.indexOf(y)<0});if(l.forEach(function(y){r[y].unsub(),delete r[y]}),!c.length||++o>t.maxRefDepth)return a(n);var h=0,f=c.length,p=Object.create(null);function m(y){y in p&&++h>=f&&a(n)}c.forEach(function(y){var v=r[y],x=s[y],N=n+"."+y;if(p[N]=!0,v)if(v.path!==x.path)v.unsub();else return;r[y]={data:function(){return Ld(e,N)},unsub:I1({ref:x,target:e,path:N,depth:o,ops:i,resolve:m.bind(null,N)},t),path:x.path}})}function b1(t,e){var n=t.vm,r=t.key,s=t.collection,i=t.ops,o=t.resolve,a=t.reject;e===void 0&&(e=Ma);var c=Object.assign({},Ma,e),l=c.wait?[]:i.set(n,r,[]),h=o,f,p=[],m={added:function(v){var x=v.newIndex,N=v.doc;p.splice(x,0,Object.create(null));var D=p[x],E=vf(c.serialize(N),void 0,D),C=E[0],k=E[1];i.add(l,x,C),Ef(c,l,x,D,k,i,0,o.bind(null,N))},modified:function(v){var x=v.oldIndex,N=v.newIndex,D=v.doc,E=p[x],C=l[x],k=vf(c.serialize(D),C,E),U=k[0],I=k[1];p.splice(N,0,E),i.remove(l,x),i.add(l,N,U),Ef(c,l,N,E,I,i,0,o)},removed:function(v){var x=v.oldIndex;i.remove(l,x),xu(p.splice(x,1)[0])}},y=s.onSnapshot(function(v){var x=typeof v.docChanges=="function"?v.docChanges():v.docChanges;if(!f&&x.length){f=!0;for(var N=0,D=x.length,E=Object.create(null),C=0;C<D;C++)E[x[C].doc.id]=!0;o=function(k){var U=k.id;U in E&&++N>=D&&(c.wait&&i.set(n,r,l),h(n[r]),o=function(){})}}x.forEach(function(k){m[k.type](k)}),x.length||(c.wait&&i.set(n,r,l),o(l))},a);return function(v){if(y(),v!==!1){var x=typeof v=="function"?v():[];i.set(n,r,x)}p.forEach(xu)}}function A1(t,e){var n=t.vm,r=t.key,s=t.document,i=t.resolve,o=t.reject,a=t.ops;e===void 0&&(e=Ma);var c=Object.assign({},Ma,e),l=Object.create(null);i=w1(i,function(){return Ld(n,r)});var h=s.onSnapshot(function(f){f.exists?Lw(c,n,r,f,l,a,0,i):(a.set(n,r,null),i(null))},o);return function(f){if(h(),f!==!1){var p=typeof f=="function"?f():null;a.set(n,r,p)}xu(l)}}var Zo,R1=(Zo={},Zo[kw]=function(t,e){var n=e.path,r=e.target,s=e.data;_1(r,n,s)},Zo[Ow]=function(t,e){var n=e.newIndex,r=e.data,s=e.target;s.splice(n,0,r)},Zo[Mw]=function(t,e){var n=e.oldIndex,r=e.target;return r.splice(n,1)[0]},Zo);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vu=function(){return Vu=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vu.apply(this,arguments)},Rh={root:!0},wf=new WeakMap;function S1(t,e,n,r,s,i){var o=wf.get(e);return o||(o=Object.create(null),wf.set(e,o)),n in o&&Fw(e,n,i.wait?typeof i.reset=="function"?i.reset:!1:i.reset),new Promise(function(a,c){o[n]="where"in r?b1({vm:t,key:n,collection:r,ops:s,resolve:a,reject:c},i):A1({vm:t,key:n,document:r,ops:s,resolve:a,reject:c},i)})}function Fw(t,e,n){var r=wf.get(t);!r||!r[e]||(r[e](n),delete r[e])}function an(t){return function(n,r){var s=n.state,i=n.commit,o={set:function(a,c,l){return i(kw,{path:c,target:a,data:l},Rh),l},add:function(a,c,l){return i(Ow,{target:a,newIndex:c,data:l},Rh)},remove:function(a,c){var l=a[c];return i(Mw,{target:a,oldIndex:c},Rh),[l]}};return t.call(this,Vu(Vu({},n),{bindFirestoreRef:function(a,c,l){return S1(s,i,a,c,o,Object.assign({},Ma,l))},unbindFirestoreRef:function(a,c){return Fw(i,a,c)}}),r)}}const P1=()=>{};var p_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},C1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Uw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(p=64)),r.push(n[h],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||f==null)throw new x1;const p=i<<2|a>>4;if(r.push(p),l!==64){const m=a<<4&240|l>>2;if(r.push(m),f!==64){const y=l<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class x1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V1=function(t){const e=Bw(t);return Uw.encodeByteArray(e,!0)},Du=function(t){return V1(t).replace(/\./g,"")},jw=function(t){try{return Uw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Nu(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!D1(n)||(t[n]=Nu(t[n],e[n]));return t}function D1(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=()=>Fd().__FIREBASE_DEFAULTS__,k1=()=>{if(typeof process>"u"||typeof p_>"u")return;const t=p_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},O1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jw(t[1]);return e&&JSON.parse(e)},$w=()=>{try{return P1()||N1()||k1()||O1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bd=()=>$w()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Du(JSON.stringify(n)),Du(JSON.stringify(o)),""].join(".")}const Ea={};function B1(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ea))Ea[e]?t.emulator.push(e):t.prod.push(e);return t}function U1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let m_=!1;function j1(t,e){if(typeof window>"u"||typeof document>"u"||!Ud(window.location.host)||Ea[t]===e||Ea[t]||m_)return;Ea[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=B1().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function l(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{m_=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=U1(r),m=n("text"),y=document.getElementById(m)||document.createElement("span"),v=n("learnmore"),x=document.getElementById(v)||document.createElement("a"),N=n("preprendIcon"),D=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const E=p.element;a(E),h(x,v);const C=l();c(D,N),E.append(D,y,x,C),document.body.appendChild(E)}i?(y.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qw(){const t=$w()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $1(){return typeof window<"u"||Hw()}function Hw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Gw(){return!qw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zw(){return!qw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Kw(){try{return typeof indexedDB=="object"}catch{return!1}}function q1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="FirebaseError";class si extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=H1,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?G1(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new si(s,a,r)}}function G1(t,e){return t.replace(z1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const z1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(__(i)&&__(o)){if(!Xi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function __(t){return t!==null&&typeof t=="object"}function K1(t,e){const n=new W1(t,e);return n.subscribe.bind(n)}class W1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Q1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Sh),s.error===void 0&&(s.error=Sh),s.complete===void 0&&(s.complete=Sh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Q1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class qs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new M1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X1(e))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bs){return this.instances.has(e)}getOptions(e=bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Y1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bs){return this.component?this.component.multipleInstances?e:bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y1(t){return t===bs?void 0:t}function X1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new J1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=[];var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const Qw={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},Z1=be.INFO,eV={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},tV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=eV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $d{constructor(e){this.name=e,this._logLevel=Z1,this._logHandler=tV,this._userLogHandler=null,jd.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Qw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}function nV(t){jd.forEach(e=>{e.setLogLevel(t)})}function rV(t,e){for(const n of jd){let r=null;e&&e.level&&(r=Qw[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(r??s.logLevel)&&t({level:be[i].toLowerCase(),message:a,args:o,type:s.name})}}}const sV=(t,e)=>e.some(n=>t instanceof n);let y_,v_;function iV(){return y_||(y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oV(){return v_||(v_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jw=new WeakMap,Tf=new WeakMap,Yw=new WeakMap,Ph=new WeakMap,qd=new WeakMap;function aV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Kr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Jw.set(n,t)}).catch(()=>{}),qd.set(e,t),e}function cV(t){if(Tf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Tf.set(t,e)}let If={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Yw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uV(t){If=t(If)}function lV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ch(this),e,...n);return Yw.set(r,e.sort?e.sort():[e]),Kr(r)}:oV().includes(t)?function(...e){return t.apply(Ch(this),e),Kr(Jw.get(this))}:function(...e){return Kr(t.apply(Ch(this),e))}}function hV(t){return typeof t=="function"?lV(t):(t instanceof IDBTransaction&&cV(t),sV(t,iV())?new Proxy(t,If):t)}function Kr(t){if(t instanceof IDBRequest)return aV(t);if(Ph.has(t))return Ph.get(t);const e=hV(t);return e!==t&&(Ph.set(t,e),qd.set(e,t)),e}const Ch=t=>qd.get(t);function fV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Kr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Kr(o.result),c.oldVersion,c.newVersion,Kr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const dV=["get","getKey","getAll","getAllKeys","count"],pV=["put","add","delete","clear"],xh=new Map;function E_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xh.get(e))return xh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=pV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||dV.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return xh.set(e,i),i}uV(t=>({...t,get:(e,n,r)=>E_(e,n)||t.get(e,n,r),has:(e,n)=>!!E_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gV(t){return t.getComponent()?.type==="VERSION"}const Ou="@firebase/app",bf="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new $d("@firebase/app"),_V="@firebase/app-compat",yV="@firebase/analytics-compat",vV="@firebase/analytics",EV="@firebase/app-check-compat",wV="@firebase/app-check",TV="@firebase/auth",IV="@firebase/auth-compat",bV="@firebase/database",AV="@firebase/data-connect",RV="@firebase/database-compat",SV="@firebase/functions",PV="@firebase/functions-compat",CV="@firebase/installations",xV="@firebase/installations-compat",VV="@firebase/messaging",DV="@firebase/messaging-compat",NV="@firebase/performance",kV="@firebase/performance-compat",OV="@firebase/remote-config",MV="@firebase/remote-config-compat",LV="@firebase/storage",FV="@firebase/storage-compat",BV="@firebase/firestore",UV="@firebase/ai",jV="@firebase/firestore-compat",$V="firebase",qV="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]",HV={[Ou]:"fire-core",[_V]:"fire-core-compat",[vV]:"fire-analytics",[yV]:"fire-analytics-compat",[wV]:"fire-app-check",[EV]:"fire-app-check-compat",[TV]:"fire-auth",[IV]:"fire-auth-compat",[bV]:"fire-rtdb",[AV]:"fire-data-connect",[RV]:"fire-rtdb-compat",[SV]:"fire-fn",[PV]:"fire-fn-compat",[CV]:"fire-iid",[xV]:"fire-iid-compat",[VV]:"fire-fcm",[DV]:"fire-fcm-compat",[NV]:"fire-perf",[kV]:"fire-perf-compat",[OV]:"fire-rc",[MV]:"fire-rc-compat",[LV]:"fire-gcs",[FV]:"fire-gcs-compat",[BV]:"fire-fst",[jV]:"fire-fst-compat",[UV]:"fire-vertex","fire-js":"fire-js",[$V]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new Map,Zi=new Map,eo=new Map;function La(t,e){try{t.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xw(t,e){t.container.addOrOverwriteComponent(e)}function to(t){const e=t.name;if(eo.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;eo.set(e,t);for(const n of Xr.values())La(n,t);for(const n of Zi.values())La(n,t);return!0}function Zw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function GV(t,e,n=Yr){Zw(t,e).clearInstance(n)}function Hd(t){return t.options!==void 0}function eT(t){return Hd(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function tT(t){return t==null?!1:t.settings!==void 0}function zV(){eo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cn=new yl("app","Firebase",KV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nT=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){const n=jw(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(n).exp*1e3,i=new Date().getTime();s-i<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class WV extends nT{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const a=e;super(a.options,o,s)}this._serverConfig={automaticDataCollectionEnabled:i,...n},this._serverConfig.authIdToken&&w_(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&w_(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,ur(Ou,bf,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Kd(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw cn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=qV;function zd(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Yr,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw cn.create("bad-app-name",{appName:String(s)});if(n||(n=Bd()),!n)throw cn.create("no-options");const i=Xr.get(s);if(i){if(Xi(n,i.options)&&Xi(r,i.config))return i;throw cn.create("duplicate-app",{appName:s})}const o=new Ww(s);for(const c of eo.values())o.addComponent(c);const a=new nT(n,r,o);return Xr.set(s,a),a}function QV(t,e={}){if($1()&&!Hw())throw cn.create("invalid-server-app-environment");let n,r=e||{};if(t&&(Hd(t)?n=t.options:eT(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=Bd()),!n)throw cn.create("no-options");const s={...r,...n};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const i=h=>[...h].reduce((f,p)=>Math.imul(31,f)+p.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw cn.create("finalization-registry-not-supported",{});const o=""+i(JSON.stringify(s)),a=Zi.get(o);if(a)return a.incRefCount(r.releaseOnDeref),a;const c=new Ww(o);for(const h of eo.values())c.addComponent(h);const l=new WV(n,r,o,c);return Zi.set(o,l),l}function JV(t=Yr){const e=Xr.get(t);if(!e&&t===Yr&&Bd())return zd();if(!e)throw cn.create("no-app",{appName:t});return e}function YV(){return Array.from(Xr.values())}async function Kd(t){let e=!1;const n=t.name;Xr.has(n)?(e=!0,Xr.delete(n)):Zi.has(n)&&t.decRefCount()<=0&&(Zi.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function ur(t,e,n){let r=HV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(o.join(" "));return}to(new qs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function rT(t,e){if(t!==null&&typeof t!="function")throw cn.create("invalid-log-argument");rV(t,e)}function sT(t){nV(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="firebase-heartbeat-database",ZV=1,Fa="firebase-heartbeat-store";let Vh=null;function iT(){return Vh||(Vh=fV(XV,ZV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fa)}catch(n){console.warn(n)}}}}).catch(t=>{throw cn.create("idb-open",{originalErrorMessage:t.message})})),Vh}async function eD(t){try{const n=(await iT()).transaction(Fa),r=await n.objectStore(Fa).get(oT(t));return await n.done,r}catch(e){if(e instanceof si)dr.warn(e.message);else{const n=cn.create("idb-get",{originalErrorMessage:e?.message});dr.warn(n.message)}}}async function T_(t,e){try{const r=(await iT()).transaction(Fa,"readwrite");await r.objectStore(Fa).put(e,oT(t)),await r.done}catch(n){if(n instanceof si)dr.warn(n.message);else{const r=cn.create("idb-set",{originalErrorMessage:n?.message});dr.warn(r.message)}}}function oT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=1024,nD=30;class rD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=I_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>nD){const s=oD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){dr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=I_(),{heartbeatsToSend:n,unsentEntries:r}=sD(this._heartbeatsCache.heartbeats),s=Du(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return dr.warn(e),""}}}function I_(){return new Date().toISOString().substring(0,10)}function sD(t,e=tD){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),b_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),b_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kw()?q1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eD(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function b_(t){return Du(JSON.stringify({version:2,heartbeats:t})).length}function oD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){to(new qs("platform-logger",e=>new mV(e),"PRIVATE")),to(new qs("heartbeat",e=>new rD(e),"PRIVATE")),ur(Ou,bf,t),ur(Ou,bf,"esm2020"),ur("fire-js","")}aD("");const cD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:si,SDK_VERSION:Gd,_DEFAULT_ENTRY_NAME:Yr,_addComponent:La,_addOrOverwriteComponent:Xw,_apps:Xr,_clearComponents:zV,_components:eo,_getProvider:Zw,_isFirebaseApp:Hd,_isFirebaseServerApp:tT,_isFirebaseServerAppSettings:eT,_registerComponent:to,_removeServiceInstance:GV,_serverApps:Zi,deleteApp:Kd,getApp:JV,getApps:YV,initializeApp:zd,initializeServerApp:QV,onLog:rT,registerVersion:ur,setLogLevel:sT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n){this._delegate=e,this.firebase=n,La(e,new qs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Kd(this._delegate)))}_getService(e,n=Yr){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=Yr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){La(this._delegate,e)}_addOrOverwriteComponent(e){Xw(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},A_=new yl("app-compat","Firebase",lD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:ur,setLogLevel:sT,onLog:rT,apps:null,SDK_VERSION:Gd,INTERNAL:{registerComponent:a,removeApp:r,useAsService:c,modularAPIs:cD}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(l){delete e[l]}function s(l){if(l=l||Yr,!g_(e,l))throw A_.create("no-app",{appName:l});return e[l]}s.App=t;function i(l,h={}){const f=zd(l,h);if(g_(e,f.name))return e[f.name];const p=new t(f,n);return e[f.name]=p,p}function o(){return Object.keys(e).map(l=>e[l])}function a(l){const h=l.name,f=h.replace("-compat","");if(to(l)&&l.type==="PUBLIC"){const p=(m=s())=>{if(typeof m[f]!="function")throw A_.create("invalid-app-argument",{appName:h});return m[f]()};l.serviceProps!==void 0&&Nu(p,l.serviceProps),n[f]=p,t.prototype[f]=function(...m){return this._getService.bind(this,h).apply(this,l.multipleInstances?m:[])}}return l.type==="PUBLIC"?n[f]:null}function c(l,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){const t=hD(uD);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:aT,extendNamespace:e,createSubscribe:K1,ErrorFactory:yl,deepExtend:Nu};function e(n){Nu(t,n)}return t}const fD=aT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new $d("@firebase/app-compat"),dD="@firebase/app-compat",pD="0.5.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){ur(dD,pD,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Fd();if(t.firebase!==void 0){R_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&R_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Ba=fD;mD();var gD="firebase",_D="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ba.registerVersion(gD,_D,"app-compat");var S_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,cT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,T){function w(){}w.prototype=T.prototype,I.F=T.prototype,I.prototype=new w,I.prototype.constructor=I,I.D=function(R,P,S){for(var b=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)b[fe-2]=arguments[fe];return T.prototype[P].apply(R,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,T,w){w||(w=0);const R=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)R[P]=T.charCodeAt(w++)|T.charCodeAt(w++)<<8|T.charCodeAt(w++)<<16|T.charCodeAt(w++)<<24;else for(P=0;P<16;++P)R[P]=T[w++]|T[w++]<<8|T[w++]<<16|T[w++]<<24;T=I.g[0],w=I.g[1],P=I.g[2];let S=I.g[3],b;b=T+(S^w&(P^S))+R[0]+3614090360&4294967295,T=w+(b<<7&4294967295|b>>>25),b=S+(P^T&(w^P))+R[1]+3905402710&4294967295,S=T+(b<<12&4294967295|b>>>20),b=P+(w^S&(T^w))+R[2]+606105819&4294967295,P=S+(b<<17&4294967295|b>>>15),b=w+(T^P&(S^T))+R[3]+3250441966&4294967295,w=P+(b<<22&4294967295|b>>>10),b=T+(S^w&(P^S))+R[4]+4118548399&4294967295,T=w+(b<<7&4294967295|b>>>25),b=S+(P^T&(w^P))+R[5]+1200080426&4294967295,S=T+(b<<12&4294967295|b>>>20),b=P+(w^S&(T^w))+R[6]+2821735955&4294967295,P=S+(b<<17&4294967295|b>>>15),b=w+(T^P&(S^T))+R[7]+4249261313&4294967295,w=P+(b<<22&4294967295|b>>>10),b=T+(S^w&(P^S))+R[8]+1770035416&4294967295,T=w+(b<<7&4294967295|b>>>25),b=S+(P^T&(w^P))+R[9]+2336552879&4294967295,S=T+(b<<12&4294967295|b>>>20),b=P+(w^S&(T^w))+R[10]+4294925233&4294967295,P=S+(b<<17&4294967295|b>>>15),b=w+(T^P&(S^T))+R[11]+2304563134&4294967295,w=P+(b<<22&4294967295|b>>>10),b=T+(S^w&(P^S))+R[12]+1804603682&4294967295,T=w+(b<<7&4294967295|b>>>25),b=S+(P^T&(w^P))+R[13]+4254626195&4294967295,S=T+(b<<12&4294967295|b>>>20),b=P+(w^S&(T^w))+R[14]+2792965006&4294967295,P=S+(b<<17&4294967295|b>>>15),b=w+(T^P&(S^T))+R[15]+1236535329&4294967295,w=P+(b<<22&4294967295|b>>>10),b=T+(P^S&(w^P))+R[1]+4129170786&4294967295,T=w+(b<<5&4294967295|b>>>27),b=S+(w^P&(T^w))+R[6]+3225465664&4294967295,S=T+(b<<9&4294967295|b>>>23),b=P+(T^w&(S^T))+R[11]+643717713&4294967295,P=S+(b<<14&4294967295|b>>>18),b=w+(S^T&(P^S))+R[0]+3921069994&4294967295,w=P+(b<<20&4294967295|b>>>12),b=T+(P^S&(w^P))+R[5]+3593408605&4294967295,T=w+(b<<5&4294967295|b>>>27),b=S+(w^P&(T^w))+R[10]+38016083&4294967295,S=T+(b<<9&4294967295|b>>>23),b=P+(T^w&(S^T))+R[15]+3634488961&4294967295,P=S+(b<<14&4294967295|b>>>18),b=w+(S^T&(P^S))+R[4]+3889429448&4294967295,w=P+(b<<20&4294967295|b>>>12),b=T+(P^S&(w^P))+R[9]+568446438&4294967295,T=w+(b<<5&4294967295|b>>>27),b=S+(w^P&(T^w))+R[14]+3275163606&4294967295,S=T+(b<<9&4294967295|b>>>23),b=P+(T^w&(S^T))+R[3]+4107603335&4294967295,P=S+(b<<14&4294967295|b>>>18),b=w+(S^T&(P^S))+R[8]+1163531501&4294967295,w=P+(b<<20&4294967295|b>>>12),b=T+(P^S&(w^P))+R[13]+2850285829&4294967295,T=w+(b<<5&4294967295|b>>>27),b=S+(w^P&(T^w))+R[2]+4243563512&4294967295,S=T+(b<<9&4294967295|b>>>23),b=P+(T^w&(S^T))+R[7]+1735328473&4294967295,P=S+(b<<14&4294967295|b>>>18),b=w+(S^T&(P^S))+R[12]+2368359562&4294967295,w=P+(b<<20&4294967295|b>>>12),b=T+(w^P^S)+R[5]+4294588738&4294967295,T=w+(b<<4&4294967295|b>>>28),b=S+(T^w^P)+R[8]+2272392833&4294967295,S=T+(b<<11&4294967295|b>>>21),b=P+(S^T^w)+R[11]+1839030562&4294967295,P=S+(b<<16&4294967295|b>>>16),b=w+(P^S^T)+R[14]+4259657740&4294967295,w=P+(b<<23&4294967295|b>>>9),b=T+(w^P^S)+R[1]+2763975236&4294967295,T=w+(b<<4&4294967295|b>>>28),b=S+(T^w^P)+R[4]+1272893353&4294967295,S=T+(b<<11&4294967295|b>>>21),b=P+(S^T^w)+R[7]+4139469664&4294967295,P=S+(b<<16&4294967295|b>>>16),b=w+(P^S^T)+R[10]+3200236656&4294967295,w=P+(b<<23&4294967295|b>>>9),b=T+(w^P^S)+R[13]+681279174&4294967295,T=w+(b<<4&4294967295|b>>>28),b=S+(T^w^P)+R[0]+3936430074&4294967295,S=T+(b<<11&4294967295|b>>>21),b=P+(S^T^w)+R[3]+3572445317&4294967295,P=S+(b<<16&4294967295|b>>>16),b=w+(P^S^T)+R[6]+76029189&4294967295,w=P+(b<<23&4294967295|b>>>9),b=T+(w^P^S)+R[9]+3654602809&4294967295,T=w+(b<<4&4294967295|b>>>28),b=S+(T^w^P)+R[12]+3873151461&4294967295,S=T+(b<<11&4294967295|b>>>21),b=P+(S^T^w)+R[15]+530742520&4294967295,P=S+(b<<16&4294967295|b>>>16),b=w+(P^S^T)+R[2]+3299628645&4294967295,w=P+(b<<23&4294967295|b>>>9),b=T+(P^(w|~S))+R[0]+4096336452&4294967295,T=w+(b<<6&4294967295|b>>>26),b=S+(w^(T|~P))+R[7]+1126891415&4294967295,S=T+(b<<10&4294967295|b>>>22),b=P+(T^(S|~w))+R[14]+2878612391&4294967295,P=S+(b<<15&4294967295|b>>>17),b=w+(S^(P|~T))+R[5]+4237533241&4294967295,w=P+(b<<21&4294967295|b>>>11),b=T+(P^(w|~S))+R[12]+1700485571&4294967295,T=w+(b<<6&4294967295|b>>>26),b=S+(w^(T|~P))+R[3]+2399980690&4294967295,S=T+(b<<10&4294967295|b>>>22),b=P+(T^(S|~w))+R[10]+4293915773&4294967295,P=S+(b<<15&4294967295|b>>>17),b=w+(S^(P|~T))+R[1]+2240044497&4294967295,w=P+(b<<21&4294967295|b>>>11),b=T+(P^(w|~S))+R[8]+1873313359&4294967295,T=w+(b<<6&4294967295|b>>>26),b=S+(w^(T|~P))+R[15]+4264355552&4294967295,S=T+(b<<10&4294967295|b>>>22),b=P+(T^(S|~w))+R[6]+2734768916&4294967295,P=S+(b<<15&4294967295|b>>>17),b=w+(S^(P|~T))+R[13]+1309151649&4294967295,w=P+(b<<21&4294967295|b>>>11),b=T+(P^(w|~S))+R[4]+4149444226&4294967295,T=w+(b<<6&4294967295|b>>>26),b=S+(w^(T|~P))+R[11]+3174756917&4294967295,S=T+(b<<10&4294967295|b>>>22),b=P+(T^(S|~w))+R[2]+718787259&4294967295,P=S+(b<<15&4294967295|b>>>17),b=w+(S^(P|~T))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+T&4294967295,I.g[1]=I.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.v=function(I,T){T===void 0&&(T=I.length);const w=T-this.blockSize,R=this.C;let P=this.h,S=0;for(;S<T;){if(P==0)for(;S<=w;)s(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<T;)if(R[P++]=I.charCodeAt(S++),P==this.blockSize){s(this,R),P=0;break}}else for(;S<T;)if(R[P++]=I[S++],P==this.blockSize){s(this,R),P=0;break}}this.h=P,this.o+=T},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var T=1;T<I.length-8;++T)I[T]=0;T=this.o*8;for(var w=I.length-8;w<I.length;++w)I[w]=T&255,T/=256;for(this.v(I),I=Array(16),T=0,w=0;w<4;++w)for(let R=0;R<32;R+=8)I[T++]=this.g[w]>>>R&255;return I};function i(I,T){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=T(I)}function o(I,T){this.h=T;const w=[];let R=!0;for(let P=I.length-1;P>=0;P--){const S=I[P]|0;R&&S==T||(w[P]=S,R=!1)}this.g=w}var a={};function c(I){return-128<=I&&I<128?i(I,function(T){return new o([T|0],T<0?-1:0)}):new o([I|0],I<0?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(I<0)return x(l(-I));const T=[];let w=1;for(let R=0;I>=w;R++)T[R]=I/w|0,w*=4294967296;return new o(T,0)}function h(I,T){if(I.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(I.charAt(0)=="-")return x(h(I.substring(1),T));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=l(Math.pow(T,8));let R=f;for(let S=0;S<I.length;S+=8){var P=Math.min(8,I.length-S);const b=parseInt(I.substring(S,S+P),T);P<8?(P=l(Math.pow(T,P)),R=R.j(P).add(l(b))):(R=R.j(w),R=R.add(l(b)))}return R}var f=c(0),p=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(v(this))return-x(this).m();let I=0,T=1;for(let w=0;w<this.g.length;w++){const R=this.i(w);I+=(R>=0?R:4294967296+R)*T,T*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(v(this))return"-"+x(this).toString(I);const T=l(Math.pow(I,6));var w=this;let R="";for(;;){const P=C(w,T).g;w=N(w,P.j(T));let S=((w.g.length>0?w.g[0]:w.h)>>>0).toString(I);if(w=P,y(w))return S+R;for(;S.length<6;)S="0"+S;R=S+R}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(let T=0;T<I.g.length;T++)if(I.g[T]!=0)return!1;return!0}function v(I){return I.h==-1}t.l=function(I){return I=N(this,I),v(I)?-1:y(I)?0:1};function x(I){const T=I.g.length,w=[];for(let R=0;R<T;R++)w[R]=~I.g[R];return new o(w,~I.h).add(p)}t.abs=function(){return v(this)?x(this):this},t.add=function(I){const T=Math.max(this.g.length,I.g.length),w=[];let R=0;for(let P=0;P<=T;P++){let S=R+(this.i(P)&65535)+(I.i(P)&65535),b=(S>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);R=b>>>16,S&=65535,b&=65535,w[P]=b<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function N(I,T){return I.add(x(T))}t.j=function(I){if(y(this)||y(I))return f;if(v(this))return v(I)?x(this).j(x(I)):x(x(this).j(I));if(v(I))return x(this.j(x(I)));if(this.l(m)<0&&I.l(m)<0)return l(this.m()*I.m());const T=this.g.length+I.g.length,w=[];for(var R=0;R<2*T;R++)w[R]=0;for(R=0;R<this.g.length;R++)for(let P=0;P<I.g.length;P++){const S=this.i(R)>>>16,b=this.i(R)&65535,fe=I.i(P)>>>16,Te=I.i(P)&65535;w[2*R+2*P]+=b*Te,D(w,2*R+2*P),w[2*R+2*P+1]+=S*Te,D(w,2*R+2*P+1),w[2*R+2*P+1]+=b*fe,D(w,2*R+2*P+1),w[2*R+2*P+2]+=S*fe,D(w,2*R+2*P+2)}for(I=0;I<T;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=T;I<2*T;I++)w[I]=0;return new o(w,0)};function D(I,T){for(;(I[T]&65535)!=I[T];)I[T+1]+=I[T]>>>16,I[T]&=65535,T++}function E(I,T){this.g=I,this.h=T}function C(I,T){if(y(T))throw Error("division by zero");if(y(I))return new E(f,f);if(v(I))return T=C(x(I),T),new E(x(T.g),x(T.h));if(v(T))return T=C(I,x(T)),new E(x(T.g),T.h);if(I.g.length>30){if(v(I)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var w=p,R=T;R.l(I)<=0;)w=k(w),R=k(R);var P=U(w,1),S=U(R,1);for(R=U(R,2),w=U(w,2);!y(R);){var b=S.add(R);b.l(I)<=0&&(P=P.add(w),S=b),R=U(R,1),w=U(w,1)}return T=N(I,P.j(T)),new E(P,T)}for(P=f;I.l(T)>=0;){for(w=Math.max(1,Math.floor(I.m()/T.m())),R=Math.ceil(Math.log(w)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),S=l(w),b=S.j(T);v(b)||b.l(I)>0;)w-=R,S=l(w),b=S.j(T);y(S)&&(S=p),P=P.add(S),I=N(I,b)}return new E(P,I)}t.B=function(I){return C(this,I).h},t.and=function(I){const T=Math.max(this.g.length,I.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)&I.i(R);return new o(w,this.h&I.h)},t.or=function(I){const T=Math.max(this.g.length,I.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)|I.i(R);return new o(w,this.h|I.h)},t.xor=function(I){const T=Math.max(this.g.length,I.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)^I.i(R);return new o(w,this.h^I.h)};function k(I){const T=I.g.length+1,w=[];for(let R=0;R<T;R++)w[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(w,I.h)}function U(I,T){const w=T>>5;T%=32;const R=I.g.length-w,P=[];for(let S=0;S<R;S++)P[S]=T>0?I.i(S+w)>>>T|I.i(S+w+1)<<32-T:I.i(S+w);return new o(P,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,cT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Wr=o}).apply(typeof S_<"u"?S_:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uT,ua,lT,tu,Af,hT,fT,dT;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var d=0;d<u.length;++d){var g=u[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,d){if(d)e:{var g=r;u=u.split(".");for(var _=0;_<u.length-1;_++){var M=u[_];if(!(M in g))break e;g=g[M]}u=u[u.length-1],_=g[u],d=d(_),d!=_&&d!=null&&e(g,u,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(d){var g=[],_;for(_ in d)Object.prototype.hasOwnProperty.call(d,_)&&g.push([_,d[_]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function c(u,d,g){return u.call.apply(u.bind,arguments)}function l(u,d,g){return l=c,l.apply(null,arguments)}function h(u,d){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function f(u,d){function g(){}g.prototype=d.prototype,u.Z=d.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(_,M,B){for(var X=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)X[ye-2]=arguments[ye];return d.prototype[M].apply(_,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const d=u.length;if(d>0){const g=Array(d);for(let _=0;_<d;_++)g[_]=u[_];return g}return[]}function y(u,d){for(let _=1;_<arguments.length;_++){const M=arguments[_];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=u.length||0;const B=M.length||0;u.length=g+B;for(let X=0;X<B;X++)u[g+X]=M[X]}else u.push(M)}}class v{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function x(u){o.setTimeout(()=>{throw u},0)}function N(){var u=I;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class D{constructor(){this.h=this.g=null}add(d,g){const _=E.get();_.set(d,g),this.h?this.h.next=_:this.g=_,this.h=_}}var E=new v(()=>new C,u=>u.reset());class C{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let k,U=!1,I=new D,T=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(w)}};function w(){for(var u;u=N();){try{u.h.call(u.g)}catch(g){x(g)}var d=E;d.j(u),d.h<100&&(d.h++,u.next=d.g,d.g=u)}U=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,d),o.removeEventListener("test",g,d)}catch{}return u})();function b(u){return/^[\s\xa0]*$/.test(u)}function fe(u,d){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,d)}f(fe,P),fe.prototype.init=function(u,d){const g=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget,d||(g=="mouseover"?d=u.fromElement:g=="mouseout"&&(d=u.toElement)),this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),ie=0;function pe(u,d,g,_,M){this.listener=u,this.proxy=null,this.src=d,this.type=g,this.capture=!!_,this.ha=M,this.key=++ie,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ce(u,d,g){for(const _ in u)d.call(g,u[_],_,u)}function Dn(u,d){for(const g in u)d.call(void 0,u[g],g,u)}function Zt(u){const d={};for(const g in u)d[g]=u[g];return d}const Et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jn(u,d){let g,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(g in _)u[g]=_[g];for(let B=0;B<Et.length;B++)g=Et[B],Object.prototype.hasOwnProperty.call(_,g)&&(u[g]=_[g])}}function yn(u){this.src=u,this.g={},this.h=0}yn.prototype.add=function(u,d,g,_,M){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const X=St(u,d,_,M);return X>-1?(d=u[X],g||(d.fa=!1)):(d=new pe(d,this.src,B,!!_,M),d.fa=g,u.push(d)),d};function vn(u,d){const g=d.type;if(g in u.g){var _=u.g[g],M=Array.prototype.indexOf.call(_,d,void 0),B;(B=M>=0)&&Array.prototype.splice.call(_,M,1),B&&(re(d),u.g[g].length==0&&(delete u.g[g],u.h--))}}function St(u,d,g,_){for(let M=0;M<u.length;++M){const B=u[M];if(!B.da&&B.listener==d&&B.capture==!!g&&B.ha==_)return M}return-1}var $="closure_lm_"+(Math.random()*1e6|0),se={};function ee(u,d,g,_,M){if(Array.isArray(d)){for(let B=0;B<d.length;B++)ee(u,d[B],g,_,M);return null}return g=z(g),u&&u[Te]?u.J(d,g,a(_)?!!_.capture:!1,M):ue(u,d,g,!1,_,M)}function ue(u,d,g,_,M,B){if(!d)throw Error("Invalid event type");const X=a(M)?!!M.capture:!!M;let ye=H(u);if(ye||(u[$]=ye=new yn(u)),g=ye.add(d,g,_,X,B),g.proxy)return g;if(_=ve(),g.proxy=_,_.src=u,_.listener=g,u.addEventListener)S||(M=X),M===void 0&&(M=!1),u.addEventListener(d.toString(),_,M);else if(u.attachEvent)u.attachEvent(V(d.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ve(){function u(g){return d.call(u.src,u.listener,g)}const d=L;return u}function Le(u,d,g,_,M){if(Array.isArray(d))for(var B=0;B<d.length;B++)Le(u,d[B],g,_,M);else _=a(_)?!!_.capture:!!_,g=z(g),u&&u[Te]?(u=u.i,B=String(d).toString(),B in u.g&&(d=u.g[B],g=St(d,g,_,M),g>-1&&(re(d[g]),Array.prototype.splice.call(d,g,1),d.length==0&&(delete u.g[B],u.h--)))):u&&(u=H(u))&&(d=u.g[d.toString()],u=-1,d&&(u=St(d,g,_,M)),(g=u>-1?d[u]:null)&&A(g))}function A(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Te])vn(d.i,u);else{var g=u.type,_=u.proxy;d.removeEventListener?d.removeEventListener(g,_,u.capture):d.detachEvent?d.detachEvent(V(g),_):d.addListener&&d.removeListener&&d.removeListener(_),(g=H(d))?(vn(g,u),g.h==0&&(g.src=null,d[$]=null)):re(u)}}}function V(u){return u in se?se[u]:se[u]="on"+u}function L(u,d){if(u.da)u=!0;else{d=new fe(d,this);const g=u.listener,_=u.ha||u.src;u.fa&&A(u),u=g.call(_,d)}return u}function H(u){return u=u[$],u instanceof yn?u:null}var j="__closure_events_fn_"+(Math.random()*1e9>>>0);function z(u){return typeof u=="function"?u:(u[j]||(u[j]=function(d){return u.handleEvent(d)}),u[j])}function Q(){R.call(this),this.i=new yn(this),this.M=this,this.G=null}f(Q,R),Q.prototype[Te]=!0,Q.prototype.removeEventListener=function(u,d,g,_){Le(this,u,d,g,_)};function W(u,d){var g,_=u.G;if(_)for(g=[];_;_=_.G)g.push(_);if(u=u.M,_=d.type||d,typeof d=="string")d=new P(d,u);else if(d instanceof P)d.target=d.target||u;else{var M=d;d=new P(_,u),Jn(d,M)}M=!0;let B,X;if(g)for(X=g.length-1;X>=0;X--)B=d.g=g[X],M=J(B,_,!0,d)&&M;if(B=d.g=u,M=J(B,_,!0,d)&&M,M=J(B,_,!1,d)&&M,g)for(X=0;X<g.length;X++)B=d.g=g[X],M=J(B,_,!1,d)&&M}Q.prototype.N=function(){if(Q.Z.N.call(this),this.i){var u=this.i;for(const d in u.g){const g=u.g[d];for(let _=0;_<g.length;_++)re(g[_]);delete u.g[d],u.h--}}this.G=null},Q.prototype.J=function(u,d,g,_){return this.i.add(String(u),d,!1,g,_)},Q.prototype.K=function(u,d,g,_){return this.i.add(String(u),d,!0,g,_)};function J(u,d,g,_){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();let M=!0;for(let B=0;B<d.length;++B){const X=d[B];if(X&&!X.da&&X.capture==g){const ye=X.listener,ht=X.ha||X.src;X.fa&&vn(u.i,X),M=ye.call(ht,_)!==!1&&M}}return M&&!_.defaultPrevented}function K(u,d){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=l(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(u,d||0)}function he(u){u.g=K(()=>{u.g=null,u.i&&(u.i=!1,he(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class te extends R{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(u){R.call(this),this.h=u,this.g={}}f(ae,R);var me=[];function Ee(u){Ce(u.g,function(d,g){this.g.hasOwnProperty(g)&&A(d)},u),u.g={}}ae.prototype.N=function(){ae.Z.N.call(this),Ee(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=o.JSON.stringify,Pe=o.JSON.parse,Pt=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ut(){}function Gt(){}var lt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yn(){P.call(this,"d")}f(Yn,P);function ui(){P.call(this,"c")}f(ui,P);var Ze={},en=null;function fs(){return en=en||new Q}Ze.Ia="serverreachability";function ko(u){P.call(this,Ze.Ia,u)}f(ko,P);function Oo(u){const d=fs();W(d,new ko(d))}Ze.STAT_EVENT="statevent";function nm(u,d){P.call(this,Ze.STAT_EVENT,u),this.stat=d}f(nm,P);function Lt(u){const d=fs();W(d,new nm(d,u))}Ze.Ja="timingevent";function rm(u,d){P.call(this,Ze.Ja,u),this.size=d}f(rm,P);function Mo(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},d)}function Lo(){this.g=!0}Lo.prototype.ua=function(){this.g=!1};function eA(u,d,g,_,M,B){u.info(function(){if(u.g)if(B){var X="",ye=B.split("&");for(let Fe=0;Fe<ye.length;Fe++){var ht=ye[Fe].split("=");if(ht.length>1){const mt=ht[0];ht=ht[1];const kn=mt.split("_");X=kn.length>=2&&kn[1]=="type"?X+(mt+"="+ht+"&"):X+(mt+"=redacted&")}}}else X=null;else X=B;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+d+`
`+g+`
`+X})}function tA(u,d,g,_,M,B,X){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+d+`
`+g+`
`+B+" "+X})}function li(u,d,g,_){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+rA(u,g)+(_?" "+_:"")})}function nA(u,d){u.info(function(){return"TIMEOUT: "+d})}Lo.prototype.info=function(){};function rA(u,d){if(!u.g)return d;if(!d)return null;try{const B=JSON.parse(d);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var g=B[u];if(!(g.length<2)){var _=g[1];if(Array.isArray(_)&&!(_.length<1)){var M=_[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<_.length;X++)_[X]=""}}}}return xe(B)}catch{return d}}var Ic={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sm={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},im;function Hl(){}f(Hl,ut),Hl.prototype.g=function(){return new XMLHttpRequest},im=new Hl;function Fo(u){return encodeURIComponent(String(u))}function sA(u){var d=1;u=u.split(":");const g=[];for(;d>0&&u.length;)g.push(u.shift()),d--;return u.length&&g.push(u.join(":")),g}function Tr(u,d,g,_){this.j=u,this.i=d,this.l=g,this.S=_||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new om}function om(){this.i=null,this.g="",this.h=!1}var am={},Gl={};function zl(u,d,g){u.M=1,u.A=Ac(Nn(d)),u.u=g,u.R=!0,cm(u,null)}function cm(u,d){u.F=Date.now(),bc(u),u.B=Nn(u.A);var g=u.B,_=u.S;Array.isArray(_)||(_=[String(_)]),wm(g.i,"t",_),u.C=0,g=u.j.L,u.h=new om,u.g=Bm(u.j,g?d:null,!u.u),u.P>0&&(u.O=new te(l(u.Y,u,u.g),u.P)),d=u.V,g=u.g,_=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(me[0]=M.toString()),M=me);for(let B=0;B<M.length;B++){const X=ee(g,M[B],_||d.handleEvent,!1,d.h||d);if(!X)break;d.g[X.key]=X}d=u.J?Zt(u.J):{},u.u?(u.v||(u.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,d)):(u.v="GET",u.g.ea(u.B,u.v,null,d)),Oo(),eA(u.i,u.v,u.B,u.l,u.S,u.u)}Tr.prototype.ba=function(u){u=u.target;const d=this.O;d&&Ar(u)==3?d.j():this.Y(u)},Tr.prototype.Y=function(u){try{if(u==this.g)e:{const ye=Ar(this.g),ht=this.g.ya(),Fe=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Pm(this.g)))){this.K||ye!=4||ht==7||(ht==8||Fe<=0?Oo(3):Oo(2)),Kl(this);var d=this.g.ca();this.X=d;var g=iA(this);if(this.o=d==200,tA(this.i,this.v,this.B,this.l,this.S,ye,d),this.o){if(this.U&&!this.L){t:{if(this.g){var _,M=this.g;if((_=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(_)){var B=_;break t}}B=null}if(u=B)li(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wl(this,u);else{this.o=!1,this.m=3,Lt(12),ds(this),Bo(this);break e}}if(this.R){u=!0;let mt;for(;!this.K&&this.C<g.length;)if(mt=oA(this,g),mt==Gl){ye==4&&(this.m=4,Lt(14),u=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==am){this.m=4,Lt(15),li(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else li(this.i,this.l,mt,null),Wl(this,mt);if(um(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||g.length!=0||this.h.h||(this.m=1,Lt(16),u=!1),this.o=this.o&&u,!u)li(this.i,this.l,g,"[Invalid Chunked Response]"),ds(this),Bo(this);else if(g.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),nh(X),X.P=!0,Lt(11))}}else li(this.i,this.l,g,null),Wl(this,g);ye==4&&ds(this),this.o&&!this.K&&(ye==4?Om(this.j,this):(this.o=!1,bc(this)))}else EA(this.g),d==400&&g.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),ds(this),Bo(this)}}}catch{}finally{}};function iA(u){if(!um(u))return u.g.la();const d=Pm(u.g);if(d==="")return"";let g="";const _=d.length,M=Ar(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ds(u),Bo(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<_;B++)u.h.h=!0,g+=u.h.i.decode(d[B],{stream:!(M&&B==_-1)});return d.length=0,u.h.g+=g,u.C=0,u.h.g}function um(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function oA(u,d){var g=u.C,_=d.indexOf(`
`,g);return _==-1?Gl:(g=Number(d.substring(g,_)),isNaN(g)?am:(_+=1,_+g>d.length?Gl:(d=d.slice(_,_+g),u.C=_+g,d)))}Tr.prototype.cancel=function(){this.K=!0,ds(this)};function bc(u){u.T=Date.now()+u.H,lm(u,u.H)}function lm(u,d){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Mo(l(u.aa,u),d)}function Kl(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Tr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(nA(this.i,this.B),this.M!=2&&(Oo(),Lt(17)),ds(this),this.m=2,Bo(this)):lm(this,this.T-u)};function Bo(u){u.j.I==0||u.K||Om(u.j,u)}function ds(u){Kl(u);var d=u.O;d&&typeof d.dispose=="function"&&d.dispose(),u.O=null,Ee(u.V),u.g&&(d=u.g,u.g=null,d.abort(),d.dispose())}function Wl(u,d){try{var g=u.j;if(g.I!=0&&(g.g==u||Ql(g.h,u))){if(!u.L&&Ql(g.h,u)&&g.I==3){try{var _=g.Ba.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)xc(g),Pc(g);else break e;th(g),Lt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Mo(l(g.Va,g),6e3));dm(g.h)<=1&&g.ta&&(g.ta=void 0)}else ms(g,11)}else if((u.L||g.g==u)&&xc(g),!b(d))for(M=g.Ba.g.parse(d),d=0;d<M.length;d++){let Fe=M[d];const mt=Fe[0];if(!(mt<=g.K))if(g.K=mt,Fe=Fe[1],g.I==2)if(Fe[0]=="c"){g.M=Fe[1],g.ba=Fe[2];const kn=Fe[3];kn!=null&&(g.ka=kn,g.j.info("VER="+g.ka));const gs=Fe[4];gs!=null&&(g.za=gs,g.j.info("SVER="+g.za));const Rr=Fe[5];Rr!=null&&typeof Rr=="number"&&Rr>0&&(_=1.5*Rr,g.O=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Sr=u.g;if(Sr){const Dc=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dc){var B=_.h;B.g||Dc.indexOf("spdy")==-1&&Dc.indexOf("quic")==-1&&Dc.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Jl(B,B.h),B.h=null))}if(_.G){const rh=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;rh&&(_.wa=rh,He(_.J,_.G,rh))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),_=g;var X=u;if(_.na=Fm(_,_.L?_.ba:null,_.W),X.L){pm(_.h,X);var ye=X,ht=_.O;ht&&(ye.H=ht),ye.D&&(Kl(ye),bc(ye)),_.g=X}else Nm(_);g.i.length>0&&Cc(g)}else Fe[0]!="stop"&&Fe[0]!="close"||ms(g,7);else g.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ms(g,7):eh(g):Fe[0]!="noop"&&g.l&&g.l.qa(Fe),g.A=0)}}Oo(4)}catch{}}var aA=class{constructor(u,d){this.g=u,this.map=d}};function hm(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fm(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function dm(u){return u.h?1:u.g?u.g.size:0}function Ql(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Jl(u,d){u.g?u.g.add(d):u.h=d}function pm(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}hm.prototype.cancel=function(){if(this.i=mm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function mm(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const g of u.g.values())d=d.concat(g.G);return d}return m(u.i)}var gm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cA(u,d){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const _=u[g].indexOf("=");let M,B=null;_>=0?(M=u[g].substring(0,_),B=u[g].substring(_+1)):M=u[g],d(M,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ir(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;u instanceof Ir?(this.l=u.l,Uo(this,u.j),this.o=u.o,this.g=u.g,jo(this,u.u),this.h=u.h,Yl(this,Tm(u.i)),this.m=u.m):u&&(d=String(u).match(gm))?(this.l=!1,Uo(this,d[1]||"",!0),this.o=$o(d[2]||""),this.g=$o(d[3]||"",!0),jo(this,d[4]),this.h=$o(d[5]||"",!0),Yl(this,d[6]||"",!0),this.m=$o(d[7]||"")):(this.l=!1,this.i=new Ho(null,this.l))}Ir.prototype.toString=function(){const u=[];var d=this.j;d&&u.push(qo(d,_m,!0),":");var g=this.g;return(g||d=="file")&&(u.push("//"),(d=this.o)&&u.push(qo(d,_m,!0),"@"),u.push(Fo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(qo(g,g.charAt(0)=="/"?hA:lA,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",qo(g,dA)),u.join("")},Ir.prototype.resolve=function(u){const d=Nn(this);let g=!!u.j;g?Uo(d,u.j):g=!!u.o,g?d.o=u.o:g=!!u.g,g?d.g=u.g:g=u.u!=null;var _=u.h;if(g)jo(d,u.u);else if(g=!!u.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var M=d.h.lastIndexOf("/");M!=-1&&(_=d.h.slice(0,M+1)+_)}if(M=_,M==".."||M==".")_="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){_=M.lastIndexOf("/",0)==0,M=M.split("/");const B=[];for(let X=0;X<M.length;){const ye=M[X++];ye=="."?_&&X==M.length&&B.push(""):ye==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),_&&X==M.length&&B.push("")):(B.push(ye),_=!0)}_=B.join("/")}else _=M}return g?d.h=_:g=u.i.toString()!=="",g?Yl(d,Tm(u.i)):g=!!u.m,g&&(d.m=u.m),d};function Nn(u){return new Ir(u)}function Uo(u,d,g){u.j=g?$o(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function jo(u,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);u.u=d}else u.u=null}function Yl(u,d,g){d instanceof Ho?(u.i=d,pA(u.i,u.l)):(g||(d=qo(d,fA)),u.i=new Ho(d,u.l))}function He(u,d,g){u.i.set(d,g)}function Ac(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function $o(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qo(u,d,g){return typeof u=="string"?(u=encodeURI(u).replace(d,uA),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function uA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _m=/[#\/\?@]/g,lA=/[#\?:]/g,hA=/[#\?]/g,fA=/[#\?@]/g,dA=/#/g;function Ho(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function ps(u){u.g||(u.g=new Map,u.h=0,u.i&&cA(u.i,function(d,g){u.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}t=Ho.prototype,t.add=function(u,d){ps(this),this.i=null,u=hi(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(d),this.h+=1,this};function ym(u,d){ps(u),d=hi(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function vm(u,d){return ps(u),d=hi(u,d),u.g.has(d)}t.forEach=function(u,d){ps(this),this.g.forEach(function(g,_){g.forEach(function(M){u.call(d,M,_,this)},this)},this)};function Em(u,d){ps(u);let g=[];if(typeof d=="string")vm(u,d)&&(g=g.concat(u.g.get(hi(u,d))));else for(u=Array.from(u.g.values()),d=0;d<u.length;d++)g=g.concat(u[d]);return g}t.set=function(u,d){return ps(this),this.i=null,u=hi(this,u),vm(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=Em(this,u),u.length>0?String(u[0]):d):d};function wm(u,d,g){ym(u,d),g.length>0&&(u.i=null,u.g.set(hi(u,d),m(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(let _=0;_<d.length;_++){var g=d[_];const M=Fo(g);g=Em(this,g);for(let B=0;B<g.length;B++){let X=M;g[B]!==""&&(X+="="+Fo(g[B])),u.push(X)}}return this.i=u.join("&")};function Tm(u){const d=new Ho;return d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),d}function hi(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function pA(u,d){d&&!u.j&&(ps(u),u.i=null,u.g.forEach(function(g,_){const M=_.toLowerCase();_!=M&&(ym(this,_),wm(this,M,g))},u)),u.j=d}function mA(u,d){const g=new Lo;if(o.Image){const _=new Image;_.onload=h(br,g,"TestLoadImage: loaded",!0,d,_),_.onerror=h(br,g,"TestLoadImage: error",!1,d,_),_.onabort=h(br,g,"TestLoadImage: abort",!1,d,_),_.ontimeout=h(br,g,"TestLoadImage: timeout",!1,d,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else d(!1)}function gA(u,d){const g=new Lo,_=new AbortController,M=setTimeout(()=>{_.abort(),br(g,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:_.signal}).then(B=>{clearTimeout(M),B.ok?br(g,"TestPingServer: ok",!0,d):br(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),br(g,"TestPingServer: error",!1,d)})}function br(u,d,g,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(g)}catch{}}function _A(){this.g=new Pt}function Xl(u){this.i=u.Sb||null,this.h=u.ab||!1}f(Xl,ut),Xl.prototype.g=function(){return new Rc(this.i,this.h)};function Rc(u,d){Q.call(this),this.H=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Rc,Q),t=Rc.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=d,this.readyState=1,zo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(d.body=u),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Go(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,zo(this)),this.g&&(this.readyState=3,zo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Im(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Im(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Go(this):zo(this),this.readyState==3&&Im(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Go(this))},t.Na=function(u){this.g&&(this.response=u,Go(this))},t.ga=function(){this.g&&Go(this)};function Go(u){u.readyState=4,u.l=null,u.j=null,u.B=null,zo(u)}t.setRequestHeader=function(u,d){this.A.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=d.next();return u.join(`\r
`)};function zo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Rc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function bm(u){let d="";return Ce(u,function(g,_){d+=_,d+=":",d+=g,d+=`\r
`}),d}function Zl(u,d,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=bm(g),typeof u=="string"?g!=null&&Fo(g):He(u,d,g))}function Je(u){Q.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Je,Q);var yA=/^https?$/i,vA=["POST","PUT"];t=Je.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,d,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():im.g(),this.g.onreadystatechange=p(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(B){Am(this,B);return}if(u=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)g.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const B of _.keys())g.set(B,_.get(B));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(B=>B.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(vA,d,void 0)>=0)||_||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,X]of g)this.g.setRequestHeader(B,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){Am(this,B)}};function Am(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.o=5,Rm(u),Sc(u)}function Rm(u){u.A||(u.A=!0,W(u,"complete"),W(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,W(this,"complete"),W(this,"abort"),Sc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sc(this,!0)),Je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sm(this):this.Xa())},t.Xa=function(){Sm(this)};function Sm(u){if(u.h&&typeof i<"u"){if(u.v&&Ar(u)==4)setTimeout(u.Ca.bind(u),0);else if(W(u,"readystatechange"),Ar(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var _;if(_=B===0){let X=String(u.D).match(gm)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),_=!yA.test(X?X.toLowerCase():"")}g=_}if(g)W(u,"complete"),W(u,"success");else{u.o=6;try{var M=Ar(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",Rm(u)}}finally{Sc(u)}}}}function Sc(u,d){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,d||W(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ar(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Ar(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Pe(d)}};function Pm(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function EA(u){const d={};u=(u.g&&Ar(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(b(u[_]))continue;var g=sA(u[_]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const B=d[M]||[];d[M]=B,B.push(g)}Dn(d,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ko(u,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||d}function Cm(u){this.za=0,this.i=[],this.j=new Lo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ko("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ko("baseRetryDelayMs",5e3,u),this.Za=Ko("retryDelaySeedMs",1e4,u),this.Ta=Ko("forwardChannelMaxRetries",2,u),this.va=Ko("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new hm(u&&u.concurrentRequestLimit),this.Ba=new _A,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Cm.prototype,t.ka=8,t.I=1,t.connect=function(u,d,g,_){Lt(0),this.W=u,this.H=d||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.J=Fm(this,null,this.W),Cc(this)};function eh(u){if(xm(u),u.I==3){var d=u.V++,g=Nn(u.J);if(He(g,"SID",u.M),He(g,"RID",d),He(g,"TYPE","terminate"),Wo(u,g),d=new Tr(u,u.j,d),d.M=2,d.A=Ac(Nn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=d.A,g=!0),g||(d.g=Bm(d.j,null),d.g.ea(d.A)),d.F=Date.now(),bc(d)}Lm(u)}function Pc(u){u.g&&(nh(u),u.g.cancel(),u.g=null)}function xm(u){Pc(u),u.v&&(o.clearTimeout(u.v),u.v=null),xc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Cc(u){if(!fm(u.h)&&!u.m){u.m=!0;var d=u.Ea;k||T(),U||(k(),U=!0),I.add(d,u),u.D=0}}function wA(u,d){return dm(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=d.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Mo(l(u.Ea,u,d),Mm(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Tr(this,this.j,u);let B=this.o;if(this.U&&(B?(B=Zt(B),Jn(B,this.U)):B=this.U),this.u!==null||this.R||(M.J=B,B=null),this.S)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,d>4096){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Dm(this,M,d),g=Nn(this.J),He(g,"RID",u),He(g,"CVER",22),this.G&&He(g,"X-HTTP-Session-Id",this.G),Wo(this,g),B&&(this.R?d="headers="+Fo(bm(B))+"&"+d:this.u&&Zl(g,this.u,B)),Jl(this.h,M),this.Ra&&He(g,"TYPE","init"),this.S?(He(g,"$req",d),He(g,"SID","null"),M.U=!0,zl(M,g,null)):zl(M,g,d),this.I=2}}else this.I==3&&(u?Vm(this,u):this.i.length==0||fm(this.h)||Vm(this))};function Vm(u,d){var g;d?g=d.l:g=u.V++;const _=Nn(u.J);He(_,"SID",u.M),He(_,"RID",g),He(_,"AID",u.K),Wo(u,_),u.u&&u.o&&Zl(_,u.u,u.o),g=new Tr(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),d&&(u.i=d.G.concat(u.i)),d=Dm(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Jl(u.h,g),zl(g,_,d)}function Wo(u,d){u.H&&Ce(u.H,function(g,_){He(d,_,g)}),u.l&&Ce({},function(g,_){He(d,_,g)})}function Dm(u,d,g){g=Math.min(u.i.length,g);const _=u.l?l(u.l.Ka,u.l,u):null;e:{var M=u.i;let ye=-1;for(;;){const ht=["count="+g];ye==-1?g>0?(ye=M[0].g,ht.push("ofs="+ye)):ye=0:ht.push("ofs="+ye);let Fe=!0;for(let mt=0;mt<g;mt++){var B=M[mt].g;const kn=M[mt].map;if(B-=ye,B<0)ye=Math.max(0,M[mt].g-100),Fe=!1;else try{B="req"+B+"_"||"";try{var X=kn instanceof Map?kn:Object.entries(kn);for(const[gs,Rr]of X){let Sr=Rr;a(Rr)&&(Sr=xe(Rr)),ht.push(B+gs+"="+encodeURIComponent(Sr))}}catch(gs){throw ht.push(B+"type="+encodeURIComponent("_badmap")),gs}}catch{_&&_(kn)}}if(Fe){X=ht.join("&");break e}}X=void 0}return u=u.i.splice(0,g),d.G=u,X}function Nm(u){if(!u.g&&!u.v){u.Y=1;var d=u.Da;k||T(),U||(k(),U=!0),I.add(d,u),u.A=0}}function th(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Mo(l(u.Da,u),Mm(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,km(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Mo(l(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),Pc(this),km(this))};function nh(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function km(u){u.g=new Tr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var d=Nn(u.na);He(d,"RID","rpc"),He(d,"SID",u.M),He(d,"AID",u.K),He(d,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(d,"TO",u.ia),He(d,"TYPE","xmlhttp"),Wo(u,d),u.u&&u.o&&Zl(d,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=Ac(Nn(d)),g.u=null,g.R=!0,cm(g,u)}t.Va=function(){this.C!=null&&(this.C=null,Pc(this),th(this),Lt(19))};function xc(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Om(u,d){var g=null;if(u.g==d){xc(u),nh(u),u.g=null;var _=2}else if(Ql(u.h,d))g=d.G,pm(u.h,d),_=1;else return;if(u.I!=0){if(d.o)if(_==1){g=d.u?d.u.length:0,d=Date.now()-d.F;var M=u.D;_=fs(),W(_,new rm(_,g)),Cc(u)}else Nm(u);else if(M=d.m,M==3||M==0&&d.X>0||!(_==1&&wA(u,d)||_==2&&th(u)))switch(g&&g.length>0&&(d=u.h,d.i=d.i.concat(g)),M){case 1:ms(u,5);break;case 4:ms(u,10);break;case 3:ms(u,6);break;default:ms(u,2)}}}function Mm(u,d){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*d}function ms(u,d){if(u.j.info("Error code "+d),d==2){var g=l(u.bb,u),_=u.Ua;const M=!_;_=new Ir(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Uo(_,"https"),Ac(_),M?mA(_.toString(),g):gA(_.toString(),g)}else Lt(2);u.I=0,u.l&&u.l.pa(d),Lm(u),xm(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Lm(u){if(u.I=0,u.ja=[],u.l){const d=mm(u.h);(d.length!=0||u.i.length!=0)&&(y(u.ja,d),y(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function Fm(u,d,g){var _=g instanceof Ir?Nn(g):new Ir(g);if(_.g!="")d&&(_.g=d+"."+_.g),jo(_,_.u);else{var M=o.location;_=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;const B=new Ir(null);_&&Uo(B,_),d&&(B.g=d),M&&jo(B,M),g&&(B.h=g),_=B}return g=u.G,d=u.wa,g&&d&&He(_,g,d),He(_,"VER",u.ka),Wo(u,_),_}function Bm(u,d,g){if(d&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Aa&&!u.ma?new Je(new Xl({ab:g})):new Je(u.ma),d.Fa(u.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Um(){}t=Um.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Vc(){}Vc.prototype.g=function(u,d){return new tn(u,d)};function tn(u,d){Q.call(this),this.g=new Cm(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(u?u["X-WebChannel-Client-Profile"]=d.sa:u={"X-WebChannel-Client-Profile":d.sa}),this.g.U=u,(u=d&&d.Qb)&&!b(u)&&(this.g.u=u),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!b(d)&&(this.g.G=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new fi(this)}f(tn,Q),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){eh(this.g)},tn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=xe(u),u=g);d.i.push(new aA(d.Ya++,u)),d.I==3&&Cc(d)},tn.prototype.N=function(){this.g.l=null,delete this.j,eh(this.g),delete this.g,tn.Z.N.call(this)};function jm(u){Yn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const g in d){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}f(jm,Yn);function $m(){ui.call(this),this.status=1}f($m,ui);function fi(u){this.g=u}f(fi,Um),fi.prototype.ra=function(){W(this.g,"a")},fi.prototype.qa=function(u){W(this.g,new jm(u))},fi.prototype.pa=function(u){W(this.g,new $m)},fi.prototype.oa=function(){W(this.g,"b")},Vc.prototype.createWebChannel=Vc.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,dT=function(){return new Vc},fT=function(){return fs()},hT=Ze,Af={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ic.NO_ERROR=0,Ic.TIMEOUT=8,Ic.HTTP_ERROR=6,tu=Ic,sm.COMPLETE="complete",lT=sm,Gt.EventType=lt,lt.OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",Q.prototype.listen=Q.prototype.J,ua=Gt,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,uT=Je}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="12.8.0";function yD(t){Ro=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new $d("@firebase/firestore");function Ai(){return Zr.logLevel}function vD(t){Zr.setLogLevel(t)}function G(t,...e){if(Zr.logLevel<=be.DEBUG){const n=e.map(Wd);Zr.debug(`Firestore (${Ro}): ${t}`,...n)}}function et(t,...e){if(Zr.logLevel<=be.ERROR){const n=e.map(Wd);Zr.error(`Firestore (${Ro}): ${t}`,...n)}}function Kn(t,...e){if(Zr.logLevel<=be.WARN){const n=e.map(Wd);Zr.warn(`Firestore (${Ro}): ${t}`,...n)}}function Wd(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,pT(t,r,n)}function pT(t,e,n){let r=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw et(r),new Error(r)}function oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||pT(e,s,r)}function ED(t,e){t||ne(57014,e)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends si{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(yt.UNAUTHENTICATED)))}shutdown(){}}class TD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class ID{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Rt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rt,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rt)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new mT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new yt(e)}}class bD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class AD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new bD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class P_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new P_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new P_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=SD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function Rf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Dh(s)===Dh(i)?ge(s,i):Dh(s)?1:-1}return ge(t.length,e.length)}const PD=55296,CD=57343;function Dh(t){const e=t.charCodeAt(0);return e>=PD&&e<=CD}function no(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}function gT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="__name__";class Ln{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ln.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ln?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ln.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ge(e.length,n.length)}static compareSegments(e,n){const r=Ln.isNumericId(e),s=Ln.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ln.extractNumericId(e).compare(Ln.extractNumericId(n)):Rf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wr.fromString(e.substring(4,e.length-2))}}class we extends Ln{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new we(n)}static emptyPath(){return new we([])}}const xD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends Ln{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return xD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===C_}static keyField(){return new Ke([C_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(we.fromString(e))}static fromName(e){return new Y(we.fromString(e).popFirst(5))}static empty(){return new Y(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new we(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _T(t,e,n,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function x_(t){if(!Y.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function V_(t){if(Y.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Se(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vl(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vT(t,e){if(e<=0)throw new q(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function cc(t,e){if(!yT(t))throw new q(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new q(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=-62135596800,N_=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*N_);return new Ne(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<D_)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N_}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cc(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-D_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:ot("string",Ne._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new Ne(0,0))}static max(){return new ce(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=-1;class Mu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Sf(t){return t.fields.find((e=>e.kind===2))}function As(t){return t.fields.filter((e=>e.kind!==2))}Mu.UNKNOWN_ID=-1;class nu{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ua{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ua(0,ln.min())}}function ET(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new ln(s,Y.empty(),e)}function wT(t){return new ln(t.readTime,t.key,ro)}class ln{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ln(ce.min(),Y.empty(),ro)}static max(){return new ln(ce.max(),Y.empty(),ro)}}function Yd(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function as(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==TT)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):O.reject(n)}static resolve(e){return new O(((n,r)=>{n(e)}))}static reject(e){return new O(((n,r)=>{r(e)}))}static waitFor(e){return new O(((n,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&n()}),(c=>r(c)))})),o=!0,i===s&&n()}))}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next((s=>s?O.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new O(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(e[l]).next((h=>{o[l]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new O(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="SimpleDb";class El{static open(e,n,r,s){try{return new El(n,e.transaction(s,r))}catch(i){throw new wa(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Rt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new wa(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Xd(r.target.error);this.S.reject(new wa(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(G(nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new DD(n)}}class Hn{static delete(e){return G(nn,"Removing database:",e),Ss(Fd().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Kw())return!1;if(Hn.F())return!0;const e=ku(),n=Hn.M(e),r=0<n&&n<10,s=bT(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Hn.M(ku())===12.2&&et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(G(nn,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new wa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new q(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new wa(e,o))},s.onupgradeneeded=i=>{G(nn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next((()=>{G(nn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=El.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next((l=>(a.C(),l))).catch((l=>(a.abort(l),O.reject(l)))).toPromise();return c.catch((()=>{})),await a.D,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(G(nn,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function bT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class VD{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Ss(this.U.delete())}}class wa extends q{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function cs(t){return t.name==="IndexedDbTransactionError"}class DD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G(nn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(G(nn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ss(r)}add(e){return G(nn,"ADD",this.store.name,e,e),Ss(this.store.add(e))}get(e){return Ss(this.store.get(e)).next((n=>(n===void 0&&(n=null),G(nn,"GET",this.store.name,e,n),n)))}delete(e){return G(nn,"DELETE",this.store.name,e),Ss(this.store.delete(e))}count(){return G(nn,"COUNT",this.store.name),Ss(this.store.count())}H(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new O(((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}}))}{const i=this.cursor(r),o=[];return this.J(i,((a,c)=>{o.push(c)})).next((()=>o))}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}X(e,n){G(nn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const s=this.cursor(r);return this.J(s,((i,o,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.J(s,n)}te(e){const n=this.cursor({});return new O(((r,s)=>{n.onerror=i=>{const o=Xd(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}J(e,n){const r=[];return new O(((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new VD(a),l=n(a.primaryKey,a.value,c);if(l instanceof O){const h=l.catch((f=>(c.done(),O.reject(f))));r.push(h)}c.isDone?s():c.G===null?a.continue():a.continue(c.G)}})).next((()=>O.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ss(t){return new O(((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Xd(r.target.error);n(s)}}))}let k_=!1;function Xd(t){const e=Hn.M(ku());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return k_||(k_=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Ta="IndexBackfiller";class ND{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){G(Ta,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();G(Ta,`Documents written: ${n}`)}catch(n){cs(n)?G(Ta,"Ignoring IndexedDB error during index backfill: ",n):await as(n)}await this.re(6e4)}))}}class kD{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let s=n,i=!0;return O.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return G(Ta,`Processing collection: ${o}`),this.oe(e,o,s).next((a=>{s-=a,r.add(o)}));i=!1})))).next((()=>n-s))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(s,i))).next((a=>(G(Ta,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((s,i)=>{const o=wT(i);Yd(o,r)>0&&(r=o)})),new ln(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qt.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=-1;function uc(t){return t==null}function ja(t){return t===0&&1/t==-1/0}function AT(t){return typeof t=="number"&&Number.isInteger(t)&&!ja(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="";function Ot(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=O_(e)),e=OD(t.get(n),e);return O_(e)}function OD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Lu:n+="";break;default:n+=i}}return n}function O_(t){return t+Lu+""}function jn(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===Lu&&t.charAt(1)==="",56145,{path:t}),we.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Lu,i);switch((o<0||o>n)&&ne(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ne(61167,{path:t})}i=o+2}return new we(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="remoteDocuments",lc="owner",_i="owner",$a="mutationQueues",MD="userId",En="mutations",M_="batchId",Ns="userMutationsIndex",L_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t,e){return[t,Ot(e)]}function RT(t,e,n){return[t,Ot(e),n]}const LD={},so="documentMutations",Fu="remoteDocumentsV14",FD=["prefixPath","collectionGroup","readTime","documentId"],su="documentKeyIndex",BD=["prefixPath","collectionGroup","documentId"],ST="collectionGroupIndex",UD=["collectionGroup","readTime","prefixPath","documentId"],qa="remoteDocumentGlobal",Pf="remoteDocumentGlobalKey",io="targets",PT="queryTargetsIndex",jD=["canonicalId","targetId"],oo="targetDocuments",$D=["targetId","path"],Zd="documentTargetsIndex",qD=["path","targetId"],Bu="targetGlobalKey",Us="targetGlobal",Ha="collectionParents",HD=["collectionId","parent"],ao="clientMetadata",GD="clientId",wl="bundles",zD="bundleId",Tl="namedQueries",KD="name",ep="indexConfiguration",WD="indexId",Cf="collectionGroupIndex",QD="collectionGroup",Ia="indexState",JD=["indexId","uid"],CT="sequenceNumberIndex",YD=["uid","sequenceNumber"],ba="indexEntries",XD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xT="documentKeyIndex",ZD=["indexId","uid","orderedDocumentKey"],Il="documentOverlays",eN=["userId","collectionPath","documentId"],xf="collectionPathOverlayIndex",tN=["userId","collectionPath","largestBatchId"],VT="collectionGroupOverlayIndex",nN=["userId","collectionGroup","largestBatchId"],tp="globals",rN="name",DT=[$a,En,so,Rs,io,lc,Us,oo,ao,qa,Ha,wl,Tl],sN=[...DT,Il],NT=[$a,En,so,Fu,io,lc,Us,oo,ao,qa,Ha,wl,Tl,Il],kT=NT,np=[...kT,ep,Ia,ba],iN=np,OT=[...np,tp],oN=OT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends IT{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function pt(t,e){const n=Z(t);return Hn.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function us(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hc(this.root,e,this.comparator,!0)}}class Hc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??wt.RED,this.left=s??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new wt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B_(this.data.getIterator())}getIteratorFrom(e){return new B_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Oe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Oe(this.comparator);return n.data=e,n}}class B_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yi(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new Oe(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return no(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new LT("Invalid base64 string: "+i):i}})(e);return new Xe(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const cN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=cN.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mr(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="server_timestamp",BT="__type__",UT="__previous_value__",jT="__local_write_time__";function bl(t){return(t?.mapValue?.fields||{})[BT]?.stringValue===FT}function Al(t){const e=t.mapValue.fields[UT];return bl(e)?Al(e):e}function Ga(t){const e=pr(t.mapValue.fields[jT].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r,s,i,o,a,c,l,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h,this.apiKey=f}}const Df="(default)";class es{constructor(e,n){this.projectId=e,this.database=n||Df}static empty(){return new es("","")}get isDefaultDatabase(){return this.database===Df}isEqual(e){return e instanceof es&&e.projectId===this.projectId&&e.database===this.database}}function lN(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new es(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="__type__",$T="__max__",jr={mapValue:{fields:{__type__:{stringValue:$T}}}},sp="__vector__",co="value",iu={nullValue:"NULL_VALUE"};function ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bl(t)?4:qT(t)?9007199254740991:Rl(t)?10:11:ne(28295,{value:t})}function Wn(t,e){if(t===e)return!0;const n=ts(t);if(n!==ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ga(t).isEqual(Ga(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=pr(s.timestampValue),a=pr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return mr(s.bytesValue).isEqual(mr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return ze(s.geoPointValue.latitude)===ze(i.geoPointValue.latitude)&&ze(s.geoPointValue.longitude)===ze(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return ze(s.integerValue)===ze(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ze(s.doubleValue),a=ze(i.doubleValue);return o===a?ja(o)===ja(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return no(t.arrayValue.values||[],e.arrayValue.values||[],Wn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(F_(o)!==F_(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Wn(o[c],a[c])))return!1;return!0})(t,e);default:return ne(52216,{left:t})}}function za(t,e){return(t.values||[]).find((n=>Wn(n,e)))!==void 0}function ns(t,e){if(t===e)return 0;const n=ts(t),r=ts(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=ze(i.integerValue||i.doubleValue),c=ze(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return U_(t.timestampValue,e.timestampValue);case 4:return U_(Ga(t),Ga(e));case 5:return Rf(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=mr(i),c=mr(o);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const h=ge(a[l],c[l]);if(h!==0)return h}return ge(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=ge(ze(i.latitude),ze(o.latitude));return a!==0?a:ge(ze(i.longitude),ze(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return j_(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},c=o.fields||{},l=a[co]?.arrayValue,h=c[co]?.arrayValue,f=ge(l?.values?.length||0,h?.values?.length||0);return f!==0?f:j_(l,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===jr.mapValue&&o===jr.mapValue)return 0;if(i===jr.mapValue)return 1;if(o===jr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Rf(c[f],h[f]);if(p!==0)return p;const m=ns(a[c[f]],l[h[f]]);if(m!==0)return m}return ge(c.length,h.length)})(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function U_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=pr(t),r=pr(e),s=ge(n.seconds,r.seconds);return s!==0?s:ge(n.nanos,r.nanos)}function j_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ns(n[s],r[s]);if(i)return i}return ge(n.length,r.length)}function uo(t){return Nf(t)}function Nf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=pr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return mr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Y.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Nf(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Nf(n.fields[o])}`;return s+"}"})(t.mapValue):ne(61005,{value:t})}function ou(t){switch(ts(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Al(t);return e?16+ou(e):16;case 5:return 2*t.stringValue.length;case 6:return mr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+ou(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return us(r.fields,((i,o)=>{s+=i.length+ou(o)})),s})(t.mapValue);default:throw ne(13486,{value:t})}}function Hs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kf(t){return!!t&&"integerValue"in t}function Ka(t){return!!t&&"arrayValue"in t}function $_(t){return!!t&&"nullValue"in t}function q_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function au(t){return!!t&&"mapValue"in t}function Rl(t){return(t?.mapValue?.fields||{})[rp]?.stringValue===sp}function Aa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return us(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Aa(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Aa(t.arrayValue.values[n]);return e}return{...t}}function qT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$T}const HT={mapValue:{fields:{[rp]:{stringValue:sp},[co]:{arrayValue:{}}}}};function hN(t){return"nullValue"in t?iu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Hs(es.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Rl(t)?HT:{mapValue:{}}:ne(35942,{value:t})}function fN(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Hs(es.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?HT:"mapValue"in t?Rl(t)?{mapValue:{}}:jr:ne(61959,{value:t})}function H_(t,e){const n=ns(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function G_(t,e){const n=ns(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!au(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Aa(n)}setAll(e){let n=Ke.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Aa(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());au(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];au(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){us(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new bt(Aa(this.value))}}function GT(t){const e=[];return us(t.fields,((n,r)=>{const s=new Ke([n]);if(au(r)){const i=GT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ge(e,0,ce.min(),ce.min(),ce.min(),bt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ge(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Ge(e,2,n,ce.min(),ce.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new Ge(e,3,n,ce.min(),ce.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ge&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n){this.position=e,this.inclusive=n}}function z_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=ns(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function K_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function dN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{}class Ie extends zT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pN(e,n,r):n==="array-contains"?new _N(e,r):n==="in"?new XT(e,r):n==="not-in"?new yN(e,r):n==="array-contains-any"?new vN(e,r):new Ie(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mN(e,r):new gN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ns(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(ns(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ke extends zT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ke(e,n)}matches(e){return lo(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lo(t){return t.op==="and"}function Of(t){return t.op==="or"}function ip(t){return KT(t)&&lo(t)}function KT(t){for(const e of t.filters)if(e instanceof ke)return!1;return!0}function Mf(t){if(t instanceof Ie)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(ip(t))return t.filters.map((e=>Mf(e))).join(",");{const e=t.filters.map((n=>Mf(n))).join(",");return`${t.op}(${e})`}}function WT(t,e){return t instanceof Ie?(function(r,s){return s instanceof Ie&&r.op===s.op&&r.field.isEqual(s.field)&&Wn(r.value,s.value)})(t,e):t instanceof ke?(function(r,s){return s instanceof ke&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&WT(o,s.filters[a])),!0):!1})(t,e):void ne(19439)}function QT(t,e){const n=t.filters.concat(e);return ke.create(n,t.op)}function JT(t){return t instanceof Ie?(function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`})(t):t instanceof ke?(function(n){return n.op.toString()+" {"+n.getFilters().map(JT).join(" ,")+"}"})(t):"Filter"}class pN extends Ie{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class mN extends Ie{constructor(e,n){super(e,"in",n),this.keys=YT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class gN extends Ie{constructor(e,n){super(e,"not-in",n),this.keys=YT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function YT(t,e){return(e.arrayValue?.values||[]).map((n=>Y.fromName(n.referenceValue)))}class _N extends Ie{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ka(n)&&za(n.arrayValue,this.value)}}class XT extends Ie{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&za(this.value.arrayValue,n)}}class yN extends Ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!za(this.value.arrayValue,n)}}class vN extends Ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ka(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>za(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Lf(t,e=null,n=[],r=[],s=null,i=null,o=null){return new EN(t,e,n,r,s,i,o)}function Gs(t){const e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Mf(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),uc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>uo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>uo(r))).join(",")),e.Te=n}return e.Te}function hc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!WT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!K_(t.startAt,e.startAt)&&K_(t.endAt,e.endAt)}function Uu(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ju(t,e){return t.filters.filter((n=>n instanceof Ie&&n.field.isEqual(e)))}function W_(t,e,n){let r=iu,s=!0;for(const i of ju(t,e)){let o=iu,a=!0;switch(i.op){case"<":case"<=":o=hN(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=iu}H_({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];H_({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Q_(t,e,n){let r=jr,s=!0;for(const i of ju(t,e)){let o=jr,a=!0;switch(i.op){case">=":case">":o=fN(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=jr}G_({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];G_({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function ZT(t,e,n,r,s,i,o,a){return new yr(t,e,n,r,s,i,o,a)}function So(t){return new yr(t)}function J_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wN(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function op(t){return t.collectionGroup!==null}function Bi(t){const e=Z(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Oe(Ke.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((l=>{l.isInequality()&&(a=a.add(l.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Wa(i,r))})),n.has(Ke.keyField().canonicalString())||e.Ie.push(new Wa(Ke.keyField(),r))}return e.Ie}function qt(t){const e=Z(t);return e.Ee||(e.Ee=TN(e,Bi(t))),e.Ee}function TN(t,e){if(t.limitType==="F")return Lf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Wa(s.field,i)}));const n=t.endAt?new rs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rs(t.startAt.position,t.startAt.inclusive):null;return Lf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ff(t,e){const n=t.filters.concat([e]);return new yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function IN(t,e){const n=t.explicitOrderBy.concat([e]);return new yr(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function $u(t,e,n){return new yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bN(t,e){return new yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function AN(t,e){return new yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function fc(t,e){return hc(qt(t),qt(e))&&t.limitType===e.limitType}function eI(t){return`${Gs(qt(t))}|lt:${t.limitType}`}function Ri(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>JT(s))).join(", ")}]`),uc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>uo(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>uo(s))).join(",")),`Target(${r})`})(qt(t))}; limitType=${t.limitType})`}function dc(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Bi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,c){const l=z_(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,Bi(r),s)||r.endAt&&!(function(o,a,c){const l=z_(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,Bi(r),s))})(t,e)}function tI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nI(t){return(e,n)=>{let r=!1;for(const s of Bi(t)){const i=RN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function RN(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):(function(i,o,a){const c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?ns(c,l):ne(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return MT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new qe(Y.comparator);function Yt(){return SN}const rI=new qe(Y.comparator);function la(...t){let e=rI;for(const n of t)e=e.insert(n.key,n);return e}function sI(t){let e=rI;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function $n(){return Ra()}function iI(){return Ra()}function Ra(){return new vr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const PN=new qe(Y.comparator),CN=new Oe(Y.comparator);function _e(...t){let e=CN;for(const n of t)e=e.add(n);return e}const xN=new Oe(ge);function ap(){return xN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ja(e)?"-0":e}}function oI(t){return{integerValue:""+t}}function aI(t,e){return AT(e)?oI(e):cp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this._=void 0}}function VN(t,e,n){return t instanceof ho?(function(s,i){const o={fields:{[BT]:{stringValue:FT},[jT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&bl(i)&&(i=Al(i)),i&&(o.fields[UT]=i),{mapValue:o}})(n,e):t instanceof zs?uI(t,e):t instanceof Ks?lI(t,e):(function(s,i){const o=cI(s,i),a=Y_(o)+Y_(s.Ae);return kf(o)&&kf(s.Ae)?oI(a):cp(s.serializer,a)})(t,e)}function DN(t,e,n){return t instanceof zs?uI(t,e):t instanceof Ks?lI(t,e):n}function cI(t,e){return t instanceof fo?(function(r){return kf(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class ho extends Sl{}class zs extends Sl{constructor(e){super(),this.elements=e}}function uI(t,e){const n=hI(e);for(const r of t.elements)n.some((s=>Wn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ks extends Sl{constructor(e){super(),this.elements=e}}function lI(t,e){let n=hI(e);for(const r of t.elements)n=n.filter((s=>!Wn(s,r)));return{arrayValue:{values:n}}}class fo extends Sl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Y_(t){return ze(t.integerValue||t.doubleValue)}function hI(t){return Ka(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.field=e,this.transform=n}}function NN(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof zs&&s instanceof zs||r instanceof Ks&&s instanceof Ks?no(r.elements,s.elements,Wn):r instanceof fo&&s instanceof fo?Wn(r.Ae,s.Ae):r instanceof ho&&s instanceof ho})(t.transform,e.transform)}class kN{constructor(e,n){this.version=e,this.transformResults=n}}class We{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new We}static exists(e){return new We(void 0,e)}static updateTime(e){return new We(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pl{}function fI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Co(t.key,We.none()):new Po(t.key,t.data,We.none());{const n=t.data,r=bt.empty();let s=new Oe(Ke.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Er(t.key,r,new Jt(s.toArray()),We.none())}}function ON(t,e,n){t instanceof Po?(function(s,i,o){const a=s.value.clone(),c=Z_(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Er?(function(s,i,o){if(!cu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Z_(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(dI(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Sa(t,e,n,r){return t instanceof Po?(function(i,o,a,c){if(!cu(i.precondition,o))return a;const l=i.value.clone(),h=ey(i.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Er?(function(i,o,a,c){if(!cu(i.precondition,o))return a;const l=ey(i.fieldTransforms,c,o),h=o.data;return h.setAll(dI(i)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(t,e,n,r):(function(i,o,a){return cu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function MN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=cI(r.transform,s||null);i!=null&&(n===null&&(n=bt.empty()),n.set(r.field,i))}return n||null}function X_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&no(r,s,((i,o)=>NN(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Po extends Pl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Er extends Pl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function dI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Z_(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,DN(o,a,n[s]))}return r}function ey(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,VN(i,o,e))}return r}class Co extends Pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class up extends Pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ON(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iI();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=fI(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),_e())}isEqual(e){return this.batchId===e.batchId&&no(this.mutations,e.mutations,((n,r)=>X_(n,r)))&&no(this.baseMutations,e.baseMutations,((n,r)=>X_(n,r)))}}class hp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return PN})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new hp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Ae;function pI(t){switch(t){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function mI(t){if(t===void 0)return et("GRPC error has no .code"),F.UNKNOWN;switch(t){case st.OK:return F.OK;case st.CANCELLED:return F.CANCELLED;case st.UNKNOWN:return F.UNKNOWN;case st.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case st.INTERNAL:return F.INTERNAL;case st.UNAVAILABLE:return F.UNAVAILABLE;case st.UNAUTHENTICATED:return F.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case st.NOT_FOUND:return F.NOT_FOUND;case st.ALREADY_EXISTS:return F.ALREADY_EXISTS;case st.PERMISSION_DENIED:return F.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case st.ABORTED:return F.ABORTED;case st.OUT_OF_RANGE:return F.OUT_OF_RANGE;case st.UNIMPLEMENTED:return F.UNIMPLEMENTED;case st.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:t})}}(Ae=st||(st={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new Wr([4294967295,4294967295],0);function ty(t){const e=gI().encode(t),n=new cT;return n.update(e),new Uint8Array(n.digest())}function ny(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Wr([n,r],0),new Wr([s,i],0)]}class dp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ha(`Invalid padding: ${n}`);if(r<0)throw new ha(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ha(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ha(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Wr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Wr.fromNumber(r)));return s.compare(FN)===1&&(s=new Wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ty(e),[r,s]=ny(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new dp(i,s,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=ty(e),[r,s]=ny(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,gc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mc(ce.min(),s,new qe(ge),Yt(),_e())}}class gc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new gc(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class _I{constructor(e,n){this.targetId=e,this.Ce=n}}class yI{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ry{constructor(){this.ve=0,this.Fe=sy(),this.Me=Xe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}})),new gc(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=sy()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class BN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yt(),this.He=Gc(),this.Je=Gc(),this.Ze=new qe(ge)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Uu(i))if(r===0){const o=new Y(i.path);this.et(n,o,Ge.newNoDocument(o,ce.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=mr(r).toUint8Array()}catch(c){if(c instanceof LT)return Kn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new dp(o,s,i)}catch(c){return Kn(c instanceof ha?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Uu(a.target)){const c=new Y(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ge.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}}));let r=_e();this.Je.forEach(((i,o)=>{let a=!0;o.forEachWhile((c=>{const l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new mc(e,n,this.Ze,this.je,r);return this.je=Yt(),this.He=Gc(),this.Je=Gc(),this.Ze=new qe(ge),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new ry,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Oe(ge),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Oe(ge),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ry),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gc(){return new qe(Y.comparator)}function sy(){return new qe(Y.comparator)}const UN={asc:"ASCENDING",desc:"DESCENDING"},jN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$N={and:"AND",or:"OR"};class qN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bf(t,e){return t.useProto3Json||uc(e)?e:{value:e}}function po(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HN(t,e){return po(t,e.toTimestamp())}function nt(t){return oe(!!t,49232),ce.fromTimestamp((function(n){const r=pr(n);return new Ne(r.seconds,r.nanos)})(t))}function pp(t,e){return Uf(t,e).canonicalString()}function Uf(t,e){const n=(function(s){return new we(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function EI(t){const e=we.fromString(t);return oe(xI(e),10190,{key:e.toString()}),e}function Qa(t,e){return pp(t.databaseId,e.path)}function Gn(t,e){const n=EI(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(II(n))}function wI(t,e){return pp(t.databaseId,e)}function TI(t){const e=EI(t);return e.length===4?we.emptyPath():II(e)}function jf(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function II(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function iy(t,e,n){return{name:Qa(t,e),fields:n.value.mapValue.fields}}function bI(t,e,n){const r=Gn(t,e.name),s=nt(e.updateTime),i=e.createTime?nt(e.createTime):ce.min(),o=new bt({mapValue:{fields:e.fields}}),a=Ge.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function GN(t,e){return"found"in e?(function(r,s){oe(!!s.found,43571),s.found.name,s.found.updateTime;const i=Gn(r,s.found.name),o=nt(s.found.updateTime),a=s.found.createTime?nt(s.found.createTime):ce.min(),c=new bt({mapValue:{fields:s.found.fields}});return Ge.newFoundDocument(i,o,a,c)})(t,e):"missing"in e?(function(r,s){oe(!!s.missing,3894),oe(!!s.readTime,22933);const i=Gn(r,s.missing),o=nt(s.readTime);return Ge.newNoDocument(i,o)})(t,e):ne(7234,{result:e})}function zN(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(l,h){return l.useProto3Json?(oe(h===void 0||typeof h=="string",58123),Xe.fromBase64String(h||"")):(oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Xe.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){const h=l.code===void 0?F.UNKNOWN:mI(l.code);return new q(h,l.message||"")})(o);n=new yI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gn(t,r.document.name),i=nt(r.document.updateTime),o=r.document.createTime?nt(r.document.createTime):ce.min(),a=new bt({mapValue:{fields:r.document.fields}}),c=Ge.newFoundDocument(s,i,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new uu(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gn(t,r.document),i=r.readTime?nt(r.readTime):ce.min(),o=Ge.newNoDocument(s,i),a=r.removedTargetIds||[];n=new uu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gn(t,r.document),i=r.removedTargetIds||[];n=new uu([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new LN(s,i),a=r.targetId;n=new _I(a,o)}}return n}function Ja(t,e){let n;if(e instanceof Po)n={update:iy(t,e.key,e.value)};else if(e instanceof Co)n={delete:Qa(t,e.key)};else if(e instanceof Er)n={update:iy(t,e.key,e.data),updateMask:XN(e.fieldMask)};else{if(!(e instanceof up))return ne(16599,{dt:e.type});n={verify:Qa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof ho)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ks)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fo)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ne(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:HN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)})(t,e.precondition)),n}function $f(t,e){const n=e.currentDocument?(function(i){return i.updateTime!==void 0?We.updateTime(nt(i.updateTime)):i.exists!==void 0?We.exists(i.exists):We.none()})(e.currentDocument):We.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(o,a){let c=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new ho;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new zs(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new Ks(h)}else"increment"in a?c=new fo(o,a.increment):ne(16584,{proto:a});const l=Ke.fromServerFormat(a.fieldPath);return new pc(l,c)})(t,s))):[];if(e.update){e.update.name;const s=Gn(t,e.update.name),i=new bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(c){const l=c.fieldPaths||[];return new Jt(l.map((h=>Ke.fromServerFormat(h))))})(e.updateMask);return new Er(s,i,o,n,r)}return new Po(s,i,n,r)}if(e.delete){const s=Gn(t,e.delete);return new Co(s,n)}if(e.verify){const s=Gn(t,e.verify);return new up(s,n)}return ne(1463,{proto:e})}function KN(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?nt(s.updateTime):nt(i);return o.isEqual(ce.min())&&(o=nt(i)),new kN(o,s.transformResults||[])})(n,e)))):[]}function AI(t,e){return{documents:[wI(t,e.path)]}}function RI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wI(t,s);const i=(function(l){if(l.length!==0)return CI(ke.create(l,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(l){if(l.length!==0)return l.map((h=>(function(p){return{field:Si(p.field),direction:QN(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Bf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:s}}function SI(t){let e=TI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){oe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(f){const p=PI(f);return p instanceof ke&&ip(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(f){return f.map((p=>(function(y){return new Wa(Pi(y.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(y.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,uc(p)?null:p})(n.limit));let c=null;n.startAt&&(c=(function(f){const p=!!f.before,m=f.values||[];return new rs(m,p)})(n.startAt));let l=null;return n.endAt&&(l=(function(f){const p=!f.before,m=f.values||[];return new rs(m,p)})(n.endAt)),ZT(e,s,o,i,a,"F",c,l)}function WN(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PI(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Pi(n.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Pi(n.unaryFilter.field);return Ie.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Pi(n.unaryFilter.field);return Ie.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pi(n.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ie.create(Pi(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ke.create(n.compositeFilter.filters.map((r=>PI(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}})(n.compositeFilter.op))})(t):ne(30097,{filter:t})}function QN(t){return UN[t]}function JN(t){return jN[t]}function YN(t){return $N[t]}function Si(t){return{fieldPath:t.canonicalString()}}function Pi(t){return Ke.fromServerFormat(t.fieldPath)}function CI(t){return t instanceof Ie?(function(n){if(n.op==="=="){if(q_(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NAN"}};if($_(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(q_(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NOT_NAN"}};if($_(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Si(n.field),op:JN(n.op),value:n.value}}})(t):t instanceof ke?(function(n){const r=n.getFilters().map((s=>CI(s)));return r.length===1?r[0]:{compositeFilter:{op:YN(n.op),filters:r}}})(t):ne(54877,{filter:t})}function XN(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function xI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function VI(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=Xe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.yt=e}}function ZN(t,e){let n;if(e.document)n=bI(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Y.fromSegments(e.noDocument.path),s=Qs(e.noDocument.readTime);n=Ge.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne(56709);{const r=Y.fromSegments(e.unknownDocument.path),s=Qs(e.unknownDocument.version);n=Ge.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime((function(s){const i=new Ne(s[0],s[1]);return ce.fromTimestamp(i)})(e.readTime)),n}function oy(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:qu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,o){return{name:Qa(i,o.key),fields:o.data.value.mapValue.fields,updateTime:po(i,o.version.toTimestamp()),createTime:po(i,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ws(e.version)};else{if(!e.isUnknownDocument())return ne(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Ws(e.version)}}return r}function qu(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ws(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qs(t){const e=new Ne(t.seconds,t.nanoseconds);return ce.fromTimestamp(e)}function Ps(t,e){const n=(e.baseMutations||[]).map((i=>$f(t.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>$f(t.yt,i))),s=Ne.fromMillis(e.localWriteTimeMs);return new lp(e.batchId,s,n,r)}function fa(t){const e=Qs(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Qs(t.lastLimboFreeSnapshotVersion):ce.min();let r;return r=(function(i){return i.documents!==void 0})(t.query)?(function(i){const o=i.documents.length;return oe(o===1,1966,{count:o}),qt(So(TI(i.documents[0])))})(t.query):(function(i){return qt(SI(i))})(t.query),new ir(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Xe.fromBase64String(t.resumeToken))}function NI(t,e){const n=Ws(e.snapshotVersion),r=Ws(e.lastLimboFreeSnapshotVersion);let s;s=Uu(e.target)?AI(t.yt,e.target):RI(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gs(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function mp(t){const e=SI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$u(e,e.limit,"L"):e}function Nh(t,e){return new fp(e.largestBatchId,$f(t.yt,e.overlayMutation))}function ay(t,e){const n=e.path.lastSegment();return[t,Ot(e.path.popLast()),n]}function cy(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ws(r.readTime),documentKey:Ot(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{getBundleMetadata(e,n){return uy(e).get(n).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:Qs(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,n){return uy(e).put((function(s){return{bundleId:s.id,createTime:Ws(nt(s.createTime)),version:s.version}})(n))}getNamedQuery(e,n){return ly(e).get(n).next((r=>{if(r)return(function(i){return{name:i.name,query:mp(i.bundledQuery),readTime:Qs(i.readTime)}})(r)}))}saveNamedQuery(e,n){return ly(e).put((function(s){return{name:s.name,readTime:Ws(nt(s.readTime)),bundledQuery:s.bundledQuery}})(n))}}function uy(t){return pt(t,wl)}function ly(t){return pt(t,Tl)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Cl(e,r)}getOverlay(e,n){return ea(e).get(ay(this.userId,n)).next((r=>r?Nh(this.serializer,r):null))}getOverlays(e,n){const r=$n();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){const s=[];return r.forEach(((i,o)=>{const a=new fp(n,o);s.push(this.bt(e,a))})),O.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach((o=>s.add(Ot(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(ea(e).X(xf,a))})),O.waitFor(i)}getOverlaysForCollection(e,n,r){const s=$n(),i=Ot(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ea(e).H(xf,o).next((a=>{for(const c of a){const l=Nh(this.serializer,c);s.set(l.getKey(),l)}return s}))}getOverlaysForCollectionGroup(e,n,r,s){const i=$n();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ea(e).ee({index:VT,range:a},((c,l,h)=>{const f=Nh(this.serializer,l);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()})).next((()=>i))}bt(e,n){return ea(e).put((function(s,i,o){const[a,c,l]=ay(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ja(s.yt,o.mutation)}})(this.serializer,this.userId,n))}}function ea(t){return pt(t,Il)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{St(e){return pt(e,tp)}getSessionToken(e){return this.St(e).get("sessionToken").next((n=>{const r=n?.value;return r?Xe.fromUint8Array(r):Xe.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(ze(e.integerValue));else if("doubleValue"in e){const r=ze(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),ja(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=pr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(mr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?qT(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Rl(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):ne(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const s=co,i=r[s].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(ze(i)),this.Ot(s,n),this.Ct(r[s],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),Y.fromName(e).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Cs.Wt=new Cs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=255;function nk(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function hy(t){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=nk(255&r[i]);if(s+=o,o!==8)break}return s})(t);return Math.ceil(e/8)}class rk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const s=n.codePointAt(0);this.Ht(240|s>>>18),this.Ht(128|63&s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s)}}this.Jt()}Yt(e){const n=this.en(e),r=hy(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=hy(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(vi),this.sn(255)}_n(){this.an(vi),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===vi?(this.sn(vi),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===vi?(this.an(vi),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class sk{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class ik{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ta{constructor(){this.cn=new rk,this.ascending=new sk(this.cn),this.descending=new ik(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,r,s){this.hn=e,this.Pn=n,this.Tn=r,this.In=s}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new xs(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:lu(this.Tn),directionalValue:lu(this.In),orderedDocumentKey:lu(n),documentKey:r.path.toArray()}}An(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function xr(t,e){let n=t.hn-e.hn;return n!==0?n:(n=fy(t.Tn,e.Tn),n!==0?n:(n=fy(t.In,e.In),n!==0?n:Y.comparator(t.Pn,e.Pn)))}function fy(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function lu(t){return zw()?(function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r})(t):t}function dy(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(t)}class py{constructor(e){this.Vn=new Oe(((n,r)=>Ke.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=Sf(e);if(n!==void 0&&!this.pn(n))return!1;const r=As(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.pn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Vn.size>0){const a=this.Vn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.yn(a,c)||!this.wn(this.dn[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.dn.length||!this.wn(this.dn[o++],a))return!1}return!0}bn(){if(this.fn)return null;let e=new Oe(Ke.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new nu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new nu(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new nu(r.field,r.dir==="asc"?0:1)));return new Mu(Mu.UNKNOWN_ID,this.collectionId,n,Ua.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t){if(oe(t instanceof Ie||t instanceof ke,20012),t instanceof Ie){if(t instanceof XT){const n=t.value.arrayValue?.values?.map((r=>Ie.create(t.field,"==",r)))||[];return ke.create(n,"or")}return t}const e=t.filters.map((n=>kI(n)));return ke.create(e,t.op)}function ok(t){if(t.getFilters().length===0)return[];const e=Gf(kI(t));return oe(OI(e),7391),qf(e)||Hf(e)?[e]:e.getFilters()}function qf(t){return t instanceof Ie}function Hf(t){return t instanceof ke&&ip(t)}function OI(t){return qf(t)||Hf(t)||(function(n){if(n instanceof ke&&Of(n)){for(const r of n.getFilters())if(!qf(r)&&!Hf(r))return!1;return!0}return!1})(t)}function Gf(t){if(oe(t instanceof Ie||t instanceof ke,34018),t instanceof Ie)return t;if(t.filters.length===1)return Gf(t.filters[0]);const e=t.filters.map((r=>Gf(r)));let n=ke.create(e,t.op);return n=Hu(n),OI(n)?n:(oe(n instanceof ke,64498),oe(lo(n),40251),oe(n.filters.length>1,57927),n.filters.reduce(((r,s)=>gp(r,s))))}function gp(t,e){let n;return oe(t instanceof Ie||t instanceof ke,38388),oe(e instanceof Ie||e instanceof ke,25473),n=t instanceof Ie?e instanceof Ie?(function(s,i){return ke.create([s,i],"and")})(t,e):my(t,e):e instanceof Ie?my(e,t):(function(s,i){if(oe(s.filters.length>0&&i.filters.length>0,48005),lo(s)&&lo(i))return QT(s,i.getFilters());const o=Of(s)?s:i,a=Of(s)?i:s,c=o.filters.map((l=>gp(l,a)));return ke.create(c,"or")})(t,e),Hu(n)}function my(t,e){if(lo(e))return QT(e,t.getFilters());{const n=e.filters.map((r=>gp(t,r)));return ke.create(n,"or")}}function Hu(t){if(oe(t instanceof Ie||t instanceof ke,11850),t instanceof Ie)return t;const e=t.getFilters();if(e.length===1)return Hu(e[0]);if(KT(t))return t;const n=e.map((s=>Hu(s))),r=[];return n.forEach((s=>{s instanceof Ie?r.push(s):s instanceof ke&&(s.op===t.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:ke.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.Sn=new _p}addToCollectionParentIndex(e,n){return this.Sn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(ln.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(ln.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class _p{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Oe(we.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Oe(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="IndexedDbIndexManager",zc=new Uint8Array(0);class ck{constructor(e,n){this.databaseId=n,this.Dn=new _p,this.Cn=new vr((r=>Gs(r)),((r,s)=>hc(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener((()=>{this.Dn.add(n)}));const i={collectionId:r,parent:Ot(s)};return _y(e).put(i)}return O.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[gT(n),""],!1,!0);return _y(e).H(s).next((i=>{for(const o of i){if(o.collectionId!==n)break;r.push(jn(o.parent))}return r}))}addFieldIndex(e,n){const r=na(e),s=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=wi(e);return i.next((a=>{o.put(cy(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return i.next()}deleteFieldIndex(e,n){const r=na(e),s=wi(e),i=Ei(e);return r.delete(n.indexId).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=na(e),r=Ei(e),s=wi(e);return n.X().next((()=>r.X())).next((()=>s.X()))}createTargetIndexes(e,n){return O.forEach(this.vn(n),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new py(r).bn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,n){const r=Ei(e);let s=!0;const i=new Map;return O.forEach(this.vn(n),(o=>this.Fn(e,o).next((a=>{s&&(s=!!a),i.set(o,a)})))).next((()=>{if(s){let o=_e();const a=[];return O.forEach(i,((c,l)=>{G(gy,`Using index ${(function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map((C=>`${C.fieldPath}:${C.kind}`)).join(",")}`})(c)} to execute ${Gs(n)}`);const h=(function(E,C){const k=Sf(C);if(k===void 0)return null;for(const U of ju(E,k.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null})(l,c),f=(function(E,C){const k=new Map;for(const U of As(C))for(const I of ju(E,U.fieldPath))switch(I.op){case"==":case"in":k.set(U.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return k.set(U.fieldPath.canonicalString(),I.value),Array.from(k.values())}return null})(l,c),p=(function(E,C){const k=[];let U=!0;for(const I of As(C)){const T=I.kind===0?W_(E,I.fieldPath,E.startAt):Q_(E,I.fieldPath,E.startAt);k.push(T.value),U&&(U=T.inclusive)}return new rs(k,U)})(l,c),m=(function(E,C){const k=[];let U=!0;for(const I of As(C)){const T=I.kind===0?Q_(E,I.fieldPath,E.endAt):W_(E,I.fieldPath,E.endAt);k.push(T.value),U&&(U=T.inclusive)}return new rs(k,U)})(l,c),y=this.Mn(c,l,p),v=this.Mn(c,l,m),x=this.xn(c,l,f),N=this.On(c.indexId,h,y,p.inclusive,v,m.inclusive,x);return O.forEach(N,(D=>r.Z(D,n.limit).next((E=>{E.forEach((C=>{const k=Y.fromSegments(C.documentKey);o.has(k)||(o=o.add(k),a.push(k))}))}))))})).next((()=>a))}return O.resolve(null)}))}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=ok(ke.create(e.filters,"and")).map((r=>Lf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,n),n)}On(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),l=c/(n!=null?n.length:1),h=[];for(let f=0;f<c;++f){const p=n?this.Nn(n[f/l]):zc,m=this.Bn(e,p,r[f%l],s),y=this.Ln(e,p,i[f%l],o),v=a.map((x=>this.Bn(e,p,x,!0)));h.push(...this.createRange(m,y,v))}return h}Bn(e,n,r,s){const i=new xs(e,Y.empty(),n,r);return s?i:i.En()}Ln(e,n,r,s){const i=new xs(e,Y.empty(),n,r);return s?i.En():i}Fn(e,n){const r=new py(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let o=null;for(const a of i)r.gn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const s=this.vn(n);return O.forEach(s,(i=>this.Fn(e,i).next((o=>{o?r!==0&&o.fields.length<(function(c){let l=new Oe(Ke.comparator),h=!1;for(const f of c.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:l=l.add(p.field));for(const f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(h?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&s.length>1&&r===2?1:r))}kn(e,n){const r=new ta;for(const s of As(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.ln(s.kind);Cs.Wt.Dt(i,o)}return r.un()}Nn(e){const n=new ta;return Cs.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new ta;return Cs.Wt.Dt(Hs(this.databaseId,n),r.ln((function(i){const o=As(i);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}xn(e,n,r){if(r===null)return[];let s=[];s.push(new ta);let i=0;for(const o of As(e)){const a=r[i++];for(const c of s)if(this.qn(n,o.fieldPath)&&Ka(a))s=this.Un(s,o,a);else{const l=c.ln(o.kind);Cs.Wt.Dt(a,l)}}return this.$n(s)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new ta;c.seed(a.un()),Cs.Wt.Dt(o,c.ln(n.kind)),i.push(c)}return i}qn(e,n){return!!e.filters.find((r=>r instanceof Ie&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=na(e),s=wi(e);return(n?r.H(Cf,IDBKeyRange.bound(n,n)):r.H()).next((i=>{const o=[];return O.forEach(i,(a=>s.get([a.indexId,this.uid]).next((c=>{o.push((function(h,f){const p=f?new Ua(f.sequenceNumber,new ln(Qs(f.readTime),new Y(jn(f.documentKey)),f.largestBatchId)):Ua.empty(),m=h.fields.map((([y,v])=>new nu(Ke.fromServerFormat(y),v)));return new Mu(h.indexId,h.collectionGroup,m,p)})(a,c))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ge(r.collectionGroup,s.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const s=na(e),i=wi(e);return this.Wn(e).next((o=>s.H(Cf,IDBKeyRange.bound(n,n)).next((a=>O.forEach(a,(c=>i.put(cy(c.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,((s,i)=>{const o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((a=>(r.set(s.collectionGroup,a),O.forEach(a,(c=>this.Qn(e,s,c).next((l=>{const h=this.Gn(i,c);return l.isEqual(h)?O.resolve():this.zn(e,i,c,l,h)})))))))}))}jn(e,n,r,s){return Ei(e).put(s.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,s){return Ei(e).delete(s.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const s=Ei(e);let i=new Oe(xr);return s.ee({index:xT,range:IDBKeyRange.only([r.indexId,this.uid,lu(this.Kn(r,n))])},((o,a)=>{i=i.add(new xs(r.indexId,n,dy(a.arrayValue),dy(a.directionalValue)))})).next((()=>i))}Gn(e,n){let r=new Oe(xr);const s=this.kn(n,e);if(s==null)return r;const i=Sf(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Ka(o))for(const a of o.arrayValue.values||[])r=r.add(new xs(n.indexId,e.key,this.Nn(a),s))}else r=r.add(new xs(n.indexId,e.key,zc,s));return r}zn(e,n,r,s,i){G(gy,"Updating index entries for document '%s'",n.key);const o=[];return(function(c,l,h,f,p){const m=c.getIterator(),y=l.getIterator();let v=yi(m),x=yi(y);for(;v||x;){let N=!1,D=!1;if(v&&x){const E=h(v,x);E<0?D=!0:E>0&&(N=!0)}else v!=null?D=!0:N=!0;N?(f(x),x=yi(y)):D?(p(v),v=yi(m)):(v=yi(m),x=yi(y))}})(s,i,xr,(a=>{o.push(this.jn(e,n,r,a))}),(a=>{o.push(this.Hn(e,n,r,a))})),O.waitFor(o)}Wn(e){let n=1;return wi(e).ee({index:CT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),n=s.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>xr(o,a))).filter(((o,a,c)=>!a||xr(o,c[a-1])!==0));const s=[];s.push(e);for(const o of r){const a=xr(o,e),c=xr(o,n);if(a===0)s[0]=e.En();else if(a>0&&c<0)s.push(o),s.push(o.En());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Jn(s[o],s[o+1]))return[];const a=s[o].An(this.uid,zc,Y.empty()),c=s[o+1].An(this.uid,zc,Y.empty());i.push(IDBKeyRange.bound(a,c))}return i}Jn(e,n){return xr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(yy)}getMinOffset(e,n){return O.mapArray(this.vn(n),(r=>this.Fn(e,r).next((s=>s||ne(44426))))).next(yy)}}function _y(t){return pt(t,Ha)}function Ei(t){return pt(t,ba)}function na(t){return pt(t,ep)}function wi(t){return pt(t,Ia)}function yy(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Yd(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new ln(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MI=41943040;class xt{static withCacheSize(e){return new xt(e,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t,e,n){const r=t.store(En),s=t.store(so),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.ee({range:o},((h,f,p)=>(a++,p.delete())));i.push(c.next((()=>{oe(a===1,47070,{batchId:n.batchId})})));const l=[];for(const h of n.mutations){const f=RT(e,h.key.path,n.batchId);i.push(s.delete(f)),l.push(h.key)}return O.waitFor(i).next((()=>l))}function Gu(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xt.DEFAULT_COLLECTION_PERCENTILE=10,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xt.DEFAULT=new xt(MI,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xt.DISABLED=new xt(-1,0,0);class xl{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Zn={}}static wt(e,n,r,s){oe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new xl(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).ee({index:Ns,range:r},((s,i,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,s){const i=Ci(e),o=Vr(e);return o.add({}).next((a=>{oe(typeof a=="number",49019);const c=new lp(a,n,r,s),l=(function(m,y,v){const x=v.baseMutations.map((D=>Ja(m.yt,D))),N=v.mutations.map((D=>Ja(m.yt,D)));return{userId:y,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:x,mutations:N}})(this.serializer,this.userId,c),h=[];let f=new Oe(((p,m)=>ge(p.canonicalString(),m.canonicalString())));for(const p of s){const m=RT(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(i.put(m,LD))}return f.forEach((p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))})),e.addOnCommittedListener((()=>{this.Zn[a]=c.keys()})),O.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return Vr(e).get(n).next((r=>r?(oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ps(this.serializer,r)):null))}Xn(e,n){return this.Zn[n]?O.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const s=r.keys();return this.Zn[n]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Vr(e).ee({index:Ns,range:s},((o,a,c)=>{a.userId===this.userId&&(oe(a.batchId>=r,47524,{Yn:r}),i=Ps(this.serializer,a)),c.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Qr;return Vr(e).ee({index:Ns,range:n,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Qr],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).H(Ns,n).next((r=>r.map((s=>Ps(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=ru(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Ci(e).ee({range:s},((o,a,c)=>{const[l,h,f]=o,p=jn(h);if(l===this.userId&&n.path.isEqual(p))return Vr(e).get(f).next((m=>{if(!m)throw ne(61480,{er:o,batchId:f});oe(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:f}),i.push(Ps(this.serializer,m))}));c.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(ge);const s=[];return n.forEach((i=>{const o=ru(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Ci(e).ee({range:a},((l,h,f)=>{const[p,m,y]=l,v=jn(m);p===this.userId&&i.path.isEqual(v)?r=r.add(y):f.done()}));s.push(c)})),O.waitFor(s).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=ru(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Oe(ge);return Ci(e).ee({range:o},((c,l,h)=>{const[f,p,m]=c,y=jn(p);f===this.userId&&r.isPrefixOf(y)?y.length===s&&(a=a.add(m)):h.done()})).next((()=>this.tr(e,a)))}tr(e,n){const r=[],s=[];return n.forEach((i=>{s.push(Vr(e).get(i).next((o=>{if(o===null)throw ne(35274,{batchId:i});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Ps(this.serializer,o))})))})),O.waitFor(s).next((()=>r))}removeMutationBatch(e,n){return LI(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.nr(n.batchId)})),O.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return Ci(e).ee({range:r},((i,o,a)=>{if(i[0]===this.userId){const c=jn(i[1]);s.push(c)}else a.done()})).next((()=>{oe(s.length===0,56720,{rr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,n){return FI(e,this.userId,n)}ir(e){return BI(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Qr,lastStreamToken:""}))}}function FI(t,e,n){const r=ru(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Ci(t).ee({range:i,Y:!0},((a,c,l)=>{const[h,f,p]=a;h===e&&f===s&&(o=!0),l.done()})).next((()=>o))}function Vr(t){return pt(t,En)}function Ci(t){return pt(t,so)}function BI(t){return pt(t,$a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Js(0)}static ar(){return new Js(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next((n=>{const r=new Js(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((n=>ce.fromTimestamp(new Ne(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.ur(e).next((s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.cr(e,s))))}addTargetData(e,n){return this.lr(e,n).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Ti(e).delete(n.targetId))).next((()=>this.ur(e))).next((r=>(oe(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,n,r){let s=0;const i=[];return Ti(e).ee(((o,a)=>{const c=fa(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))})).next((()=>O.waitFor(i))).next((()=>s))}forEachTarget(e,n){return Ti(e).ee(((r,s)=>{const i=fa(s);n(i)}))}ur(e){return Ey(e).get(Bu).next((n=>(oe(n!==null,2888),n)))}cr(e,n){return Ey(e).put(Bu,n)}lr(e,n){return Ti(e).put(NI(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Gs(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Ti(e).ee({range:s,index:PT},((o,a,c)=>{const l=fa(a);hc(n,l.target)&&(i=l,c.done())})).next((()=>i))}addMatchingKeys(e,n,r){const s=[],i=Br(e);return n.forEach((o=>{const a=Ot(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))})),O.waitFor(s)}removeMatchingKeys(e,n,r){const s=Br(e);return O.forEach(n,(i=>{const o=Ot(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,n){const r=Br(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Br(e);let i=_e();return s.ee({range:r,Y:!0},((o,a,c)=>{const l=jn(o[1]),h=new Y(l);i=i.add(h)})).next((()=>i))}containsKey(e,n){const r=Ot(n.path),s=IDBKeyRange.bound([r],[gT(r)],!1,!0);let i=0;return Br(e).ee({index:Zd,Y:!0,range:s},(([o,a],c,l)=>{o!==0&&(i++,l.done())})).next((()=>i>0))}At(e,n){return Ti(e).get(n).next((r=>r?fa(r):null))}}function Ti(t){return pt(t,io)}function Ey(t){return pt(t,Us)}function Br(t){return pt(t,oo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="LruGarbageCollector",lk=1048576;function Ty([t,e],[n,r]){const s=ge(t,n);return s===0?ge(e,r):s}class hk{constructor(e){this.Pr=e,this.buffer=new Oe(Ty),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ty(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class UI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){G(wy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){cs(n)?G(wy,"Ignoring IndexedDB error during garbage collection: ",n):await as(n)}await this.Ar(3e5)}))}}class fk{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Qt.ce);const r=new hk(n);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(vy)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vy):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,a,c,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s)))).next((f=>(r=f,a=Date.now(),this.removeTargets(e,r,n)))).next((f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(l=Date.now(),Ai()<=be.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f}))))}}function jI(t,e){return new fk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n){this.db=e,this.garbageCollector=jI(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,((r,s)=>n(s)))}addReference(e,n,r){return Kc(e,r)}removeReference(e,n,r){return Kc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Kc(e,n)}wr(e,n){return(function(s,i){let o=!1;return BI(s).te((a=>FI(s,a,i).next((c=>(c&&(o=!0),O.resolve(!c)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.yr(e,((o,a)=>{if(a<=n){const c=this.wr(e,o).next((l=>{if(!l)return i++,r.getEntry(e,o).next((()=>(r.removeEntry(o,ce.min()),Br(e).delete((function(f){return[0,Ot(f.path)]})(o)))))}));s.push(c)}})).next((()=>O.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Kc(e,n)}yr(e,n){const r=Br(e);let s,i=Qt.ce;return r.ee({index:Zd},(([o,a],{path:c,sequenceNumber:l})=>{o===0?(i!==Qt.ce&&n(new Y(jn(s)),i),i=l,s=c):i=Qt.ce})).next((()=>{i!==Qt.ce&&n(new Y(jn(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kc(t,e){return Br(t).put((function(r,s){return{targetId:0,path:Ot(r.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.changes=new vr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ge.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ws(e).put(r)}removeEntry(e,n,r){return ws(e).delete((function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],qu(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.br(e,r))))}getEntry(e,n){let r=Ge.newInvalidDocument(n);return ws(e).ee({index:su,range:IDBKeyRange.only(ra(n))},((s,i)=>{r=this.Sr(n,i)})).next((()=>r))}Dr(e,n){let r={size:0,document:Ge.newInvalidDocument(n)};return ws(e).ee({index:su,range:IDBKeyRange.only(ra(n))},((s,i)=>{r={document:this.Sr(n,i),size:Gu(i)}})).next((()=>r))}getEntries(e,n){let r=Yt();return this.Cr(e,n,((s,i)=>{const o=this.Sr(s,i);r=r.insert(s,o)})).next((()=>r))}vr(e,n){let r=Yt(),s=new qe(Y.comparator);return this.Cr(e,n,((i,o)=>{const a=this.Sr(i,o);r=r.insert(i,a),s=s.insert(i,Gu(o))})).next((()=>({documents:r,Fr:s})))}Cr(e,n,r){if(n.isEmpty())return O.resolve();let s=new Oe(Ay);n.forEach((c=>s=s.add(c)));const i=IDBKeyRange.bound(ra(s.first()),ra(s.last())),o=s.getIterator();let a=o.getNext();return ws(e).ee({index:su,range:i},((c,l,h)=>{const f=Y.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Ay(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.j(ra(a)):h.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),qu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ws(e).H(IDBKeyRange.bound(a,c,!0)).next((l=>{i?.incrementDocumentReadCount(l.length);let h=Yt();for(const f of l){const p=this.Sr(Y.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(dc(n,p)||s.has(p.key))&&(h=h.insert(p.key,p))}return h}))}getAllFromCollectionGroup(e,n,r,s){let i=Yt();const o=by(n,r),a=by(n,ln.max());return ws(e).ee({index:ST,range:IDBKeyRange.bound(o,a,!0)},((c,l,h)=>{const f=this.Sr(Y.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);i=i.insert(f.key,f),i.size===s&&h.done()})).next((()=>i))}newChangeBuffer(e){return new mk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return Iy(e).get(Pf).next((n=>(oe(!!n,20021),n)))}br(e,n){return Iy(e).put(Pf,n)}Sr(e,n){if(n){const r=ZN(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ce.min())))return r}return Ge.newInvalidDocument(e)}}function qI(t){return new pk(t)}class mk extends $I{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new vr((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const n=[];let r=0,s=new Oe(((i,o)=>ge(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.Or.get(i);if(n.push(this.Mr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=oy(this.Mr.serializer,o);s=s.add(i.path.popLast());const l=Gu(c);r+=l-a.size,n.push(this.Mr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=oy(this.Mr.serializer,o.convertToNoDocument(ce.min()));n.push(this.Mr.addEntry(e,i,c))}})),s.forEach((i=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,i))})),n.push(this.Mr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Mr.vr(e,n).next((({documents:r,Fr:s})=>(s.forEach(((i,o)=>{this.Or.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function Iy(t){return pt(t,qa)}function ws(t){return pt(t,Fu)}function ra(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function by(t,e){const n=e.documentKey.path.toArray();return[t,qu(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ay(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ge(n[i],r[i]),s)return s;return s=ge(n.length,r.length),s||(s=ge(n[n.length-2],r[r.length-2]),s||ge(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Sa(r.mutation,s,Jt.empty(),Ne.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,_e()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=_e()){const s=$n();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=la();return i.forEach(((a,c)=>{o=o.insert(a,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=$n();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,_e())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,s){let i=Yt();const o=Ra(),a=(function(){return Ra()})();return n.forEach(((c,l)=>{const h=r.get(l.key);s.has(l.key)&&(h===void 0||h.mutation instanceof Er)?i=i.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Sa(h.mutation,l,h.mutation.getFieldMask(),Ne.now())):o.set(l.key,Jt.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((l,h)=>o.set(l,h))),n.forEach(((l,h)=>a.set(l,new gk(h,o.get(l)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=Ra();let s=new qe(((o,a)=>o-a)),i=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((c=>{const l=n.get(c);if(l===null)return;let h=r.get(c)||Jt.empty();h=a.applyToLocalView(l,h),r.set(c,h);const f=(s.get(a.batchId)||_e()).add(c);s=s.insert(a.batchId,f)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,h=c.value,f=iI();h.forEach((p=>{if(!i.has(p)){const m=fI(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return O.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return wN(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):op(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve($n());let a=ro,c=i;return o.next((l=>O.forEach(l,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{c=c.insert(h,p)}))))).next((()=>this.populateOverlays(e,l,i))).next((()=>this.computeViews(e,c,l,_e()))).next((h=>({batchId:a,changes:sI(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next((r=>{let s=la();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=la();return this.indexManager.getCollectionParents(e,i).next((a=>O.forEach(a,(c=>{const l=(function(f,p){return new yr(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r,s).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((c,l)=>{const h=l.getKey();o.get(h)===null&&(o=o.insert(h,Ge.newInvalidDocument(h)))}));let a=la();return o.forEach(((c,l)=>{const h=i.get(c);h!==void 0&&Sa(h.mutation,l,Jt.empty(),Ne.now()),dc(n,l)&&(a=a.insert(c,l))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return O.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:nt(s.createTime)}})(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(s){return{name:s.name,query:mp(s.bundledQuery),readTime:nt(s.readTime)}})(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.overlays=new qe(Y.comparator),this.Lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$n();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.bt(e,n,i)})),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=$n(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new qe(((l,h)=>l-h));const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=i.get(l.largestBatchId);h===null&&(h=$n(),i=i.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=$n(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((l,h)=>a.set(l,h))),!(a.size()>=s)););return O.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new fp(n,r));let i=this.Lr.get(n);i===void 0&&(i=_e(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this.kr=new Oe(_t.Kr),this.qr=new Oe(_t.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new _t(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Y(new we([])),r=new _t(n,e),s=new _t(n,e+1),i=[];return this.qr.forEachInRange([r,s],(o=>{this.Wr(o),i.push(o.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Y(new we([])),r=new _t(n,e),s=new _t(n,e+1);let i=_e();return this.qr.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new _t(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Y.comparator(e.key,n.key)||ge(e.Hr,n.Hr)}static Ur(e,n){return ge(e.Hr,n.Hr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Oe(_t.Kr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lp(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Jr=this.Jr.add(new _t(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Qr:this.Yn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],(o=>{const a=this.Zr(o.Hr);i.push(a)})),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(ge);return n.forEach((s=>{const i=new _t(s,0),o=new _t(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],(a=>{r=r.add(a.Hr)}))})),O.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new _t(new Y(i),0);let a=new Oe(ge);return this.Jr.forEachWhile((c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c.Hr)),!0)}),o),O.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){oe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return O.forEach(n.mutations,(s=>{const i=new _t(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new _t(n,0),s=this.Jr.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.ti=e,this.docs=(function(){return new qe(Y.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Ge.newInvalidDocument(n))}getEntries(e,n){let r=Yt();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ge.newInvalidDocument(s))})),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yt();const o=n.path,a=new Y(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Yd(wT(h),r)<=0||(s.has(h.key)||dc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ni(e,n){return O.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Tk(this)}getSize(e){return O.resolve(this.size)}}class Tk extends $I{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),O.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.persistence=e,this.ri=new vr((n=>Gs(n)),hc),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.ii=0,this.si=new yp,this.targetCount=0,this.oi=Js._r()}forEachTarget(e,n){return this.ri.forEach(((r,s)=>n(s))),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),O.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Js(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.lr(n),O.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),O.waitFor(i).next((()=>s))}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n){this._i={},this.overlays={},this.ai=new Qt(0),this.ui=!1,this.ui=!0,this.ci=new vk,this.referenceDelegate=e(this),this.li=new Ik(this),this.indexManager=new ak,this.remoteDocumentCache=(function(s){return new wk(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new DI(n),this.Pi=new _k(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Ek(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new bk(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((i=>this.referenceDelegate.Ii(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(e,n){return O.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class bk extends IT{constructor(e){super(),this.currentSequenceNumber=e}}class Vl{constructor(e){this.persistence=e,this.Ri=new yp,this.Ai=null}static Vi(e){return new Vl(e)}get di(){if(this.Ai)return this.Ai;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.di.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,(r=>{const s=Y.fromPath(r);return this.mi(e,s).next((i=>{i||n.removeEntry(s,ce.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class zu{constructor(e,n){this.persistence=e,this.fi=new vr((r=>Ot(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=jI(this,n)}static Vi(e,n){return new zu(e,n)}Ti(){}Ii(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return O.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((i=>i?O.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,(o=>this.wr(e,o,n).next((a=>{a||(r++,i.removeEntry(o,ce.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ou(e.data.value)),n}wr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return O.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.serializer=e}k(e,n,r,s){const i=new El("createOrUpgrade",n);r<1&&s>=1&&((function(c){c.createObjectStore(lc)})(e),(function(c){c.createObjectStore($a,{keyPath:MD}),c.createObjectStore(En,{keyPath:M_,autoIncrement:!0}).createIndex(Ns,L_,{unique:!0}),c.createObjectStore(so)})(e),Ry(e),(function(c){c.createObjectStore(Rs)})(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&((function(c){c.deleteObjectStore(oo),c.deleteObjectStore(io),c.deleteObjectStore(Us)})(e),Ry(e)),o=o.next((()=>(function(c){const l=c.store(Us),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ce.min().toTimestamp(),targetCount:0};return l.put(Bu,h)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(c,l){return l.store(En).H().next((f=>{c.deleteObjectStore(En),c.createObjectStore(En,{keyPath:M_,autoIncrement:!0}).createIndex(Ns,L_,{unique:!0});const p=l.store(En),m=f.map((y=>p.put(y)));return O.waitFor(m)}))})(e,i)))),o=o.next((()=>{(function(c){c.createObjectStore(ao,{keyPath:GD})})(e)}))),r<5&&s>=5&&(o=o.next((()=>this.gi(i)))),r<6&&s>=6&&(o=o.next((()=>((function(c){c.createObjectStore(qa)})(e),this.pi(i))))),r<7&&s>=7&&(o=o.next((()=>this.yi(i)))),r<8&&s>=8&&(o=o.next((()=>this.wi(e,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(o=o.next((()=>this.bi(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(c){c.createObjectStore(wl,{keyPath:zD})})(e),(function(c){c.createObjectStore(Tl,{keyPath:KD})})(e)}))),r<12&&s>=12&&(o=o.next((()=>{(function(c){const l=c.createObjectStore(Il,{keyPath:eN});l.createIndex(xf,tN,{unique:!1}),l.createIndex(VT,nN,{unique:!1})})(e)}))),r<13&&s>=13&&(o=o.next((()=>(function(c){const l=c.createObjectStore(Fu,{keyPath:FD});l.createIndex(su,BD),l.createIndex(ST,UD)})(e))).next((()=>this.Si(e,i))).next((()=>e.deleteObjectStore(Rs)))),r<14&&s>=14&&(o=o.next((()=>this.Di(e,i)))),r<15&&s>=15&&(o=o.next((()=>(function(c){c.createObjectStore(ep,{keyPath:WD,autoIncrement:!0}).createIndex(Cf,QD,{unique:!1}),c.createObjectStore(Ia,{keyPath:JD}).createIndex(CT,YD,{unique:!1}),c.createObjectStore(ba,{keyPath:XD}).createIndex(xT,ZD,{unique:!1})})(e)))),r<16&&s>=16&&(o=o.next((()=>{n.objectStore(Ia).clear()})).next((()=>{n.objectStore(ba).clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(c){c.createObjectStore(tp,{keyPath:rN})})(e)}))),r<18&&s>=18&&zw()&&(o=o.next((()=>{n.objectStore(Ia).clear()})).next((()=>{n.objectStore(ba).clear()}))),o}pi(e){let n=0;return e.store(Rs).ee(((r,s)=>{n+=Gu(s)})).next((()=>{const r={byteSize:n};return e.store(qa).put(Pf,r)}))}gi(e){const n=e.store($a),r=e.store(En);return n.H().next((s=>O.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,Qr],[i.userId,i.lastAcknowledgedBatchId]);return r.H(Ns,o).next((a=>O.forEach(a,(c=>{oe(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const l=Ps(this.serializer,c);return LI(e,i.userId,l).next((()=>{}))}))))}))))}yi(e){const n=e.store(oo),r=e.store(Rs);return e.store(Us).get(Bu).next((s=>{const i=[];return r.ee(((o,a)=>{const c=new we(o),l=(function(f){return[0,Ot(f)]})(c);i.push(n.get(l).next((h=>h?O.resolve():(f=>n.put({targetId:0,path:Ot(f),sequenceNumber:s.highestListenSequenceNumber}))(c))))})).next((()=>O.waitFor(i)))}))}wi(e,n){e.createObjectStore(Ha,{keyPath:HD});const r=n.store(Ha),s=new _p,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Ot(c)})}};return n.store(Rs).ee({Y:!0},((o,a)=>{const c=new we(o);return i(c.popLast())})).next((()=>n.store(so).ee({Y:!0},(([o,a,c],l)=>{const h=jn(a);return i(h.popLast())}))))}bi(e){const n=e.store(io);return n.ee(((r,s)=>{const i=fa(s),o=NI(this.serializer,i);return n.put(o)}))}Si(e,n){const r=n.store(Rs),s=[];return r.ee(((i,o)=>{const a=n.store(Fu),c=(function(f){return f.document?new Y(we.fromString(f.document.name).popFirst(5)):f.noDocument?Y.fromSegments(f.noDocument.path):f.unknownDocument?Y.fromSegments(f.unknownDocument.path):ne(36783)})(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(l))})).next((()=>O.waitFor(s)))}Di(e,n){const r=n.store(En),s=qI(this.serializer),i=new vp(Vl.Vi,this.serializer.yt);return r.H().next((o=>{const a=new Map;return o.forEach((c=>{let l=a.get(c.userId)??_e();Ps(this.serializer,c).keys().forEach((h=>l=l.add(h))),a.set(c.userId,l)})),O.forEach(a,((c,l)=>{const h=new yt(l),f=Cl.wt(this.serializer,h),p=i.getIndexManager(h),m=xl.wt(h,this.serializer,p,i.referenceDelegate);return new HI(s,m,f,p).recalculateAndSaveOverlaysForDocumentKeys(new Vf(n,Qt.ce),c).next()}))}))}}function Ry(t){t.createObjectStore(oo,{keyPath:$D}).createIndex(Zd,qD,{unique:!0}),t.createObjectStore(io,{keyPath:"targetId"}).createIndex(PT,jD,{unique:!0}),t.createObjectStore(Us)}const Dr="IndexedDbPersistence",kh=18e5,Oh=5e3,Mh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",GI="main";class Ep{constructor(e,n,r,s,i,o,a,c,l,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=i,this.window=o,this.document=a,this.Fi=l,this.Mi=h,this.xi=f,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=p=>Promise.resolve(),!Ep.v())throw new q(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dk(this,s),this.Ki=n+GI,this.serializer=new DI(c),this.qi=new Hn(this.Ki,this.xi,new Ak(this.serializer)),this.ci=new tk,this.li=new uk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qI(this.serializer),this.Pi=new ek,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,h===!1&&et(Dr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,Mh);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Qt(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Wc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((n=>this.isPrimary&&!n?this.Ji(e).next((()=>!1)):!!n&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(cs(e))return G(Dr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G(Dr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return sa(e).get(_i).next((n=>O.resolve(this.Xi(n))))}Yi(e){return Wc(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,kh)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=pt(n,ao);return r.H().next((s=>{const i=this.ns(s,kh),o=s.filter((a=>i.indexOf(a)===-1));return O.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?O.resolve(!0):sa(e).get(_i).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Oh)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new q(F.FAILED_PRECONDITION,Mh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wc(e).H().next((r=>this.ns(r,Oh).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&G(Dr,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[lc,ao],(e=>{const n=new Vf(e,Qt.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(e,n){return e.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Wc(e).H().next((n=>this.ns(n,kh).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return xl.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ck(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Cl.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){G(Dr,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(function(c){return c===18?oN:c===17?OT:c===16?iN:c===15?np:c===14?kT:c===13?NT:c===12?sN:c===11?DT:void ne(60245)})(this.xi);let o;return this.qi.runTransaction(e,s,i,(a=>(o=new Vf(a,this.ai?this.ai.next():Qt.ce),n==="readwrite-primary"?this.ji(o).next((c=>!!c||this.Hi(o))).next((c=>{if(!c)throw et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new q(F.FAILED_PRECONDITION,TT);return r(o)})).next((c=>this.Zi(o).next((()=>c)))):this.Ps(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Ps(e){return sa(e).get(_i).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Oh)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(F.FAILED_PRECONDITION,Mh)}))}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sa(e).put(_i,n)}static v(){return Hn.v()}Ji(e){const n=sa(e);return n.get(_i).next((r=>this.Xi(r)?(G(Dr,"Releasing primary lease."),n.delete(_i)):O.resolve()))}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;Gw()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const n=this.Ui?.getItem(this.rs(e))!==null;return G(Dr,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return et(Dr,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){et("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sa(t){return pt(t,lc)}function Wc(t){return pt(t,ao)}function wp(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=_e(),s=_e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Tp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Gw()?8:bT(ku())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ps(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new Rk;return this.ys(e,n,o).next((a=>{if(i.result=a,this.As)return this.ws(e,n,o,a.size)}))})).next((()=>i.result))}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Ai()<=be.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Ri(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(Ai()<=be.DEBUG&&G("QueryEngine","Query:",Ri(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ai()<=be.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Ri(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qt(n))):O.resolve())}gs(e,n){if(J_(n))return O.resolve(null);let r=qt(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=$u(n,null,"F"),r=qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=_e(...i);return this.fs.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const l=this.bs(n,a);return this.Ss(n,l,o,c.readTime)?this.gs(e,$u(n,null,"F")):this.Ds(e,l,n,c)}))))})))))}ps(e,n,r,s){return J_(n)||s.isEqual(ce.min())?O.resolve(null):this.fs.getDocuments(e,r).next((i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?O.resolve(null):(Ai()<=be.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ri(n)),this.Ds(e,o,n,ET(s,ro)).next((a=>a)))}))}bs(e,n){let r=new Oe(nI(e));return n.forEach(((s,i)=>{dc(e,i)&&(r=r.add(i))})),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Ai()<=be.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Ri(n)),this.fs.getDocumentsMatchingQuery(e,n,ln.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="LocalStore",Sk=3e8;class Pk{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new qe(ge),this.Fs=new vr((i=>Gs(i)),hc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function KI(t,e,n,r){return new Pk(t,e,n,r)}async function WI(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let c=_e();for(const l of s){o.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}for(const l of i){a.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((l=>({Ns:l,removedBatchIds:o,addedBatchIds:a})))}))}))}function Ck(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,h){const f=l.batch,p=f.keys();let m=O.resolve();return p.forEach((y=>{m=m.next((()=>h.getEntry(c,y))).next((v=>{const x=l.docVersions.get(y);oe(x!==null,48541),v.version.compareTo(x)<0&&(f.applyToRemoteDocument(v,l),v.isValidDocument()&&(v.setReadTime(l.commitVersion),h.addEntry(v)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(c,f)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=_e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function QI(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function xk(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const a=[];e.targetChanges.forEach(((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.li.removeMatchingKeys(i,h.removedDocuments,f).next((()=>n.li.addMatchingKeys(i,h.addedDocuments,f))));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Xe.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(f,m),(function(v,x,N){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=Sk?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(p,m,h)&&a.push(n.li.updateTargetData(i,m))}));let c=Yt(),l=_e();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(JI(i,o,e.documentUpdates).next((h=>{c=h.Bs,l=h.Ls}))),!r.isEqual(ce.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next((f=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return O.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,l))).next((()=>c))})).then((i=>(n.vs=s,i)))}function JI(t,e,n){let r=_e(),s=_e();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=Yt();return n.forEach(((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):G(Ip,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)})),{Bs:o,Ls:s}}))}function Vk(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Qr),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function mo(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.li.getTargetData(r,e).next((i=>i?(s=i,O.resolve(s)):n.li.allocateTargetId(r).next((o=>(s=new ir(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function go(t,e,n){const r=Z(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!cs(o))throw o;G(Ip,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Ku(t,e,n){const r=Z(t);let s=ce.min(),i=_e();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,l,h){const f=Z(c),p=f.Fs.get(h);return p!==void 0?O.resolve(f.vs.get(p)):f.li.getTargetData(l,h)})(r,o,qt(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next((c=>{i=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:_e()))).next((a=>(ZI(r,tI(e),a),{documents:a,ks:i})))))}function YI(t,e){const n=Z(t),r=Z(n.li),s=n.vs.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(i=>r.At(i,e).next((o=>o?o.target:null))))}function XI(t,e){const n=Z(t),r=n.Ms.get(e)||ce.min();return n.persistence.runTransaction("Get new document changes","readonly",(s=>n.xs.getAllFromCollectionGroup(s,e,ET(r,ro),Number.MAX_SAFE_INTEGER))).then((s=>(ZI(n,e,s),s)))}function ZI(t,e,n){let r=t.Ms.get(e)||ce.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Ms.set(e,r)}async function Dk(t,e,n,r){const s=Z(t);let i=_e(),o=Yt();for(const l of n){const h=e.Ks(l.metadata.name);l.document&&(i=i.add(h));const f=e.qs(l);f.setReadTime(e.Us(l.metadata.readTime)),o=o.insert(h,f)}const a=s.xs.newChangeBuffer({trackRemovals:!0}),c=await mo(s,(function(h){return qt(So(we.fromString(`__bundle__/docs/${h}`)))})(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",(l=>JI(l,a,o).next((h=>(a.apply(l),h))).next((h=>s.li.removeMatchingKeysForTargetId(l,c.targetId).next((()=>s.li.addMatchingKeys(l,i,c.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(l,h.Bs,h.Ls))).next((()=>h.Bs))))))}async function Nk(t,e,n=_e()){const r=await mo(t,qt(mp(e.bundledQuery))),s=Z(t);return s.persistence.runTransaction("Save named query","readwrite",(i=>{const o=nt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Pi.saveNamedQuery(i,e);const a=r.withResumeToken(Xe.EMPTY_BYTE_STRING,o);return s.vs=s.vs.insert(a.targetId,a),s.li.updateTargetData(i,a).next((()=>s.li.removeMatchingKeysForTargetId(i,r.targetId))).next((()=>s.li.addMatchingKeys(i,n,r.targetId))).next((()=>s.Pi.saveNamedQuery(i,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="firestore_clients";function Sy(t,e){return`${eb}_${t}_${e}`}const tb="firestore_mutations";function Py(t,e,n){let r=`${tb}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const nb="firestore_targets";function Lh(t,e){return`${nb}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="SharedClientState";class Wu{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static $s(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new q(s.error.code,s.error.message))),o?new Wu(e,n,s.state,i):(et(Fn,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pa{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new q(r.error.code,r.error.message))),i?new Pa(e,r.state,s):(et(Fn,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qu{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=ap();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=AT(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Qu(e,i):(et(Fn,`Failed to parse client data for instance '${e}': ${n}`),null)}}class bp{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new bp(n.clientId,n.onlineState):(et(Fn,`Failed to parse online state: ${e}`),null)}}class zf{constructor(){this.activeTargetIds=ap()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fh{constructor(e,n,r,s,i){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new qe(ge),this.started=!1,this.Zs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Xs=Sy(this.persistenceKey,this.zs),this.Ys=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new zf),this.eo=new RegExp(`^${eb}_${o}_([^_]*)$`),this.no=new RegExp(`^${tb}_${o}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${nb}_${o}_(\\d+)$`),this.io=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.so=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const s=this.getItem(Sy(this.persistenceKey,r));if(s){const i=Qu.$s(r,s);i&&(this.Js=this.Js.insert(i.clientId,i))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Lh(this.persistenceKey,e));if(s){const i=Pa.$s(e,s);i&&(r=i.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Lh(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach((s=>{this.lo(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return G(Fn,"READ",e,n),n}setItem(e,n){G(Fn,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){G(Fn,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(G(Fn,"EVENT",n.key,n.newValue),n.key===this.Xs)return void et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(i){let o=Qt.ce;if(i!=null)try{const a=JSON.parse(i);oe(typeof a=="number",30636,{yo:i}),o=a}catch(a){et(Fn,"Failed to read sequence number from WebStorage",a)}return o})(n.newValue);r!==Qt.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((s=>this.syncEngine.bo(s))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const s=new Wu(this.currentUser,e,n,r),i=Py(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Ws())}lo(e){const n=Py(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const s=Lh(this.persistenceKey,e),i=new Pa(e,n,r);this.setItem(s,i.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return Qu.$s(r,n)}Vo(e,n){const r=this.no.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Wu.$s(new yt(i),s,n)}fo(e,n){const r=this.ro.exec(e),s=Number(r[1]);return Pa.$s(s,n)}_o(e){return bp.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);G(Fn,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),s=this.uo(this.Js),i=this.uo(r),o=[],a=[];return i.forEach((c=>{s.has(c)||o.push(c)})),s.forEach((c=>{i.has(c)||a.push(c)})),this.syncEngine.Co(o,a).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=ap();return e.forEach(((r,s)=>{n=n.unionWith(s.activeTargetIds)})),n}}class rb{constructor(){this.vo=new zf,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new zf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="ConnectivityMonitor";class xy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){G(Cy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){G(Cy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function Kf(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="RestConnection",Ok={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Mk{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Df?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Kf(),a=this.Qo(e,n.toUriEncodedString());G(Bh,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:l}=new URL(a),h=Ud(l);return this.zo(e,a,c,r,h).then((f=>(G(Bh,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw Kn(Bh,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f}))}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ro})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}Qo(e,n){const r=Ok[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection",ia=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Ui extends Mk{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ui.c_){const e=fT();ia(e,hT.STAT_EVENT,(n=>{n.stat===Af.PROXY?G(Ct,"STAT_EVENT: detected buffering proxy"):n.stat===Af.NOPROXY&&G(Ct,"STAT_EVENT: detected no buffering proxy")})),Ui.c_=!0}}zo(e,n,r,s,i){const o=Kf();return new Promise(((a,c)=>{const l=new uT;l.setWithCredentials(!0),l.listenOnce(lT.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case tu.NO_ERROR:const f=l.getResponseJson();G(Ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case tu.TIMEOUT:G(Ct,`RPC '${e}' ${o} timed out`),c(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case tu.HTTP_ERROR:const p=l.getStatus();if(G(Ct,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const v=(function(N){const D=N.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(D)>=0?D:F.UNKNOWN})(y.status);c(new q(v,y.message))}else c(new q(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new q(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{G(Ct,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);G(Ct,`RPC '${e}' ${o} sending request:`,s),l.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=Kf(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const l=i.join("");G(Ct,`Creating RPC '${e}' stream ${s}: ${l}`,a);const h=o.createWebChannel(l,a);this.I_(h);let f=!1,p=!1;const m=new Lk({Ho:y=>{p?G(Ct,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(f||(G(Ct,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),G(Ct,`RPC '${e}' stream ${s} sending:`,y),h.send(y))},Jo:()=>h.close()});return ia(h,ua.EventType.OPEN,(()=>{p||(G(Ct,`RPC '${e}' stream ${s} transport opened.`),m.i_())})),ia(h,ua.EventType.CLOSE,(()=>{p||(p=!0,G(Ct,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(h))})),ia(h,ua.EventType.ERROR,(y=>{p||(p=!0,Kn(Ct,`RPC '${e}' stream ${s} transport errored. Name:`,y.name,"Message:",y.message),m.o_(new q(F.UNAVAILABLE,"The operation could not be completed")))})),ia(h,ua.EventType.MESSAGE,(y=>{if(!p){const v=y.data[0];oe(!!v,16349);const x=v,N=x?.error||x[0]?.error;if(N){G(Ct,`RPC '${e}' stream ${s} received error:`,N);const D=N.status;let E=(function(U){const I=st[U];if(I!==void 0)return mI(I)})(D),C=N.message;E===void 0&&(E=F.INTERNAL,C="Unknown error status: "+D+" with message "+N.message),p=!0,m.o_(new q(E,C)),h.close()}else G(Ct,`RPC '${e}' stream ${s} received:`,v),m.__(v)}})),Ui.u_(),setTimeout((()=>{m.s_()}),0),m}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return dT()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){return new Ui(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(){return typeof window<"u"?window:null}function hu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t){return new qN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ui.c_=!1;class Ap{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="PersistentStream";class ib{constructor(e,n,r,s,i,o,a,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ap(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(et(n.toString()),et("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return G(Vy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(G(Vy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Bk extends ib{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=zN(this.serializer,e),r=(function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?nt(o.readTime):ce.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=jf(this.serializer),n.addTarget=(function(i,o){let a;const c=o.target;if(a=Uu(c)?{documents:AI(i,c)}:{query:RI(i,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=vI(i,o.resumeToken);const l=Bf(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=po(i,o.snapshotVersion.toTimestamp());const l=Bf(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);const r=WN(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=jf(this.serializer),n.removeTarget=e,this.K_(n)}}class Uk extends ib{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=KN(e.writeResults,e.commitTime),r=nt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jf(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Ja(this.serializer,r)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{}class $k extends jk{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Wo(e,Uf(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(F.UNKNOWN,i.toString())}))}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.jo(e,Uf(n,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function qk(t,e,n,r){return new $k(t,e,n,r)}class Hk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(et(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="RemoteStore";class Gk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((o=>{r.enqueueAndForget((async()=>{ls(this)&&(G(Ys,"Restarting streams for network reachability change."),await(async function(c){const l=Z(c);l.Ea.add(4),await xo(l),l.Va.set("Unknown"),l.Ea.delete(4),await yc(l)})(this))}))})),this.Va=new Hk(r,s)}}async function yc(t){if(ls(t))for(const e of t.Ra)await e(!0)}async function xo(t){for(const e of t.Ra)await e(!1)}function Dl(t,e){const n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Pp(n)?Sp(n):Do(n).O_()&&Rp(n,e))}function _o(t,e){const n=Z(t),r=Do(n);n.Ia.delete(e),r.O_()&&ob(n,e),n.Ia.size===0&&(r.O_()?r.L_():ls(n)&&n.Va.set("Unknown"))}function Rp(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Do(t).Z_(e)}function ob(t,e){t.da.$e(e),Do(t).X_(e)}function Sp(t){t.da=new BN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Do(t).start(),t.Va.ua()}function Pp(t){return ls(t)&&!Do(t).x_()&&t.Ia.size>0}function ls(t){return Z(t).Ea.size===0}function ab(t){t.da=void 0}async function zk(t){t.Va.set("Online")}async function Kk(t){t.Ia.forEach(((e,n)=>{Rp(t,e)}))}async function Wk(t,e){ab(t),Pp(t)?(t.Va.ha(e),Sp(t)):t.Va.set("Unknown")}async function Qk(t,e,n){if(t.Va.set("Online"),e instanceof yI&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.da.removeTarget(a))})(t,e)}catch(r){G(Ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ju(t,r)}else if(e instanceof uu?t.da.Xe(e):e instanceof _I?t.da.st(e):t.da.tt(e),!n.isEqual(ce.min()))try{const r=await QI(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const a=i.da.Tt(o);return a.targetChanges.forEach(((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(l);h&&i.Ia.set(l,h.withResumeToken(c.resumeToken,o))}})),a.targetMismatches.forEach(((c,l)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Xe.EMPTY_BYTE_STRING,h.snapshotVersion)),ob(i,c);const f=new ir(h.target,c,l,h.sequenceNumber);Rp(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){G(Ys,"Failed to raise snapshot:",r),await Ju(t,r)}}async function Ju(t,e,n){if(!cs(e))throw e;t.Ea.add(1),await xo(t),t.Va.set("Offline"),n||(n=()=>QI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{G(Ys,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await yc(t)}))}function cb(t,e){return e().catch((n=>Ju(t,n,e)))}async function Vo(t){const e=Z(t),n=ss(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qr;for(;Jk(e);)try{const s=await Vk(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Yk(e,s)}catch(s){await Ju(e,s)}ub(e)&&lb(e)}function Jk(t){return ls(t)&&t.Ta.length<10}function Yk(t,e){t.Ta.push(e);const n=ss(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function ub(t){return ls(t)&&!ss(t).x_()&&t.Ta.length>0}function lb(t){ss(t).start()}async function Xk(t){ss(t).ra()}async function Zk(t){const e=ss(t);for(const n of t.Ta)e.ea(n.mutations)}async function eO(t,e,n){const r=t.Ta.shift(),s=hp.from(r,e,n);await cb(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Vo(t)}async function tO(t,e){e&&ss(t).Y_&&await(async function(r,s){if((function(o){return pI(o)&&o!==F.ABORTED})(s.code)){const i=r.Ta.shift();ss(r).B_(),await cb(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Vo(r)}})(t,e),ub(t)&&lb(t)}async function Dy(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),G(Ys,"RemoteStore received new credentials");const r=ls(n);n.Ea.add(3),await xo(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await yc(n)}async function Wf(t,e){const n=Z(t);e?(n.Ea.delete(2),await yc(n)):e||(n.Ea.add(2),await xo(n),n.Va.set("Unknown"))}function Do(t){return t.ma||(t.ma=(function(n,r,s){const i=Z(n);return i.sa(),new Bk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:zk.bind(null,t),Yo:Kk.bind(null,t),t_:Wk.bind(null,t),J_:Qk.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Pp(t)?Sp(t):t.Va.set("Unknown")):(await t.ma.stop(),ab(t))}))),t.ma}function ss(t){return t.fa||(t.fa=(function(n,r,s){const i=Z(n);return i.sa(),new Uk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Xk.bind(null,t),t_:tO.bind(null,t),ta:Zk.bind(null,t),na:eO.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Vo(t)):(await t.fa.stop(),t.Ta.length>0&&(G(Ys,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Cp(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function No(t,e){if(et("AsyncQueue",`${e}: ${t}`),cs(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{static emptySet(e){return new ji(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=la(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ji)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ji;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.ga=new qe(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class yo{constructor(e,n,r,s,i,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new yo(e,n,ji.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class rO{constructor(){this.queries=ky(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=ky(),i.forEach(((o,a)=>{for(const c of a.ba)c.onError(r)}))})(this,new q(F.ABORTED,"Firestore shutting down"))}}function ky(){return new vr((t=>eI(t)),fc)}async function xp(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new nO,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=No(o,`Initialization of query '${Ri(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Dp(n)}async function Vp(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sO(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ba)a.Fa(s)&&(r=!0);o.wa=s}}r&&Dp(n)}function iO(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Dp(t){t.Ca.forEach((e=>{e.next()}))}var Qf,Oy;(Oy=Qf||(Qf={})).Ma="default",Oy.Cache="cache";class Np{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qf.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,n){this.qa=e,this.byteLength=n}Ua(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e){this.serializer=e}Ks(e){return Gn(this.serializer,e)}qs(e){return e.metadata.exists?bI(this.serializer,e.document,!1):Ge.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return nt(e)}}class aO{constructor(e,n){this.$a=e,this.serializer=n,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=hb(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const r=we.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new My(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Ks(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||_e()).add(i);n.set(o,a)}}return n}async ja(e){const n=await Dk(e,new My(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const s of this.Wa)await Nk(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:n}}}function hb(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.key=e}}class db{constructor(e){this.key=e}}class pb{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=_e(),this.mutatedKeys=_e(),this.eu=nI(e),this.tu=new ji(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Ny,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,f)=>{const p=s.get(h),m=dc(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;p&&m?p.data.isEqual(m.data)?y!==v&&(r.track({type:3,doc:m}),x=!0):this.su(p,m)||(r.track({type:2,doc:m}),x=!0,(c&&this.eu(m,c)>0||l&&this.eu(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),x=!0):p&&!m&&(r.track({type:1,doc:p}),x=!0,(c||l)&&(a=!0)),x&&(m?(o=o.add(m),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(m,y){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:x})}};return v(m)-v(y)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,l=c!==this.Xa;return this.Xa=c,o.length!==0||l?{snapshot:new yo(this.query,e.tu,i,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ny,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=_e(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new db(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new fb(r))})),n}cu(e){this.Za=e.ks,this.Ya=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return yo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const hs="SyncEngine";class cO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uO{constructor(e){this.key=e,this.hu=!1}}class lO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new vr((a=>eI(a)),fc),this.Iu=new Map,this.Eu=new Set,this.Ru=new qe(Y.comparator),this.Au=new Map,this.Vu=new yp,this.du={},this.mu=new Map,this.fu=Js.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hO(t,e,n=!0){const r=Nl(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await mb(r,e,n,!0),s}async function fO(t,e){const n=Nl(t);await mb(n,e,!0,!1)}async function mb(t,e,n,r){const s=await mo(t.localStore,qt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await kp(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Dl(t.remoteStore,s),a}async function kp(t,e,n,r,s){t.pu=(f,p,m)=>(async function(v,x,N,D){let E=x.view.ru(N);E.Ss&&(E=await Ku(v.localStore,x.query,!1).then((({documents:I})=>x.view.ru(I,E))));const C=D&&D.targetChanges.get(x.targetId),k=D&&D.targetMismatches.get(x.targetId)!=null,U=x.view.applyChanges(E,v.isPrimaryClient,C,k);return Jf(v,x.targetId,U.au),U.snapshot})(t,f,p,m);const i=await Ku(t.localStore,e,!0),o=new pb(e,i.ks),a=o.ru(i.documents),c=gc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),l=o.applyChanges(a,t.isPrimaryClient,c);Jf(t,n,l.au);const h=new cO(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function dO(t,e,n){const r=Z(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!fc(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await go(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_o(r.remoteStore,s.targetId),vo(r,s.targetId)})).catch(as)):(vo(r,s.targetId),await go(r.localStore,s.targetId,!0))}async function pO(t,e){const n=Z(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_o(n.remoteStore,r.targetId))}async function mO(t,e,n){const r=Fp(t);try{const s=await(function(o,a){const c=Z(o),l=Ne.now(),h=a.reduce(((m,y)=>m.add(y.key)),_e());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let y=Yt(),v=_e();return c.xs.getEntries(m,h).next((x=>{y=x,y.forEach(((N,D)=>{D.isValidDocument()||(v=v.add(N))}))})).next((()=>c.localDocuments.getOverlayedDocuments(m,y))).next((x=>{f=x;const N=[];for(const D of a){const E=MN(D,f.get(D.key).overlayedDocument);E!=null&&N.push(new Er(D.key,E,GT(E.value.mapValue),We.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,N,a)})).next((x=>{p=x;const N=x.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(m,x.batchId,N)}))})).then((()=>({batchId:p.batchId,changes:sI(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,c){let l=o.du[o.currentUser.toKey()];l||(l=new qe(ge)),l=l.insert(a,c),o.du[o.currentUser.toKey()]=l})(r,s.batchId,n),await wr(r,s.changes),await Vo(r.remoteStore)}catch(s){const i=No(s,"Failed to persist write");n.reject(i)}}async function gb(t,e){const n=Z(t);try{const r=await xk(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?oe(o.hu,14607):s.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))})),await wr(n,r,e)}catch(r){await as(r)}}function Ly(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const c=Z(o);c.onlineState=a;let l=!1;c.queries.forEach(((h,f)=>{for(const p of f.ba)p.va(a)&&(l=!0)})),l&&Dp(c)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gO(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new qe(Y.comparator);o=o.insert(i,Ge.newNoDocument(i,ce.min()));const a=_e().add(i),c=new mc(ce.min(),new Map,new qe(ge),o,a);await gb(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),Lp(r)}else await go(r.localStore,e,!1).then((()=>vo(r,e,n))).catch(as)}async function _O(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await Ck(n.localStore,e);Mp(n,r,null),Op(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wr(n,s)}catch(s){await as(s)}}async function yO(t,e,n){const r=Z(t);try{const s=await(function(o,a){const c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next((f=>(oe(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(l,f)))).next((()=>c.mutationQueue.performConsistencyCheck(l))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h))).next((()=>c.localDocuments.getDocuments(l,h)))}))})(r.localStore,e);Mp(r,e,n),Op(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wr(r,s)}catch(s){await as(s)}}async function vO(t,e){const n=Z(t);ls(n.remoteStore)||G(hs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(o){const a=Z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c)))})(n.localStore);if(r===Qr)return void e.resolve();const s=n.mu.get(r)||[];s.push(e),n.mu.set(r,s)}catch(r){const s=No(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Op(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Mp(t,e,n){const r=Z(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function vo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||_b(t,r)}))}function _b(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(_o(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Lp(t))}function Jf(t,e,n){for(const r of n)r instanceof fb?(t.Vu.addReference(r.key,e),EO(t,r)):r instanceof db?(G(hs,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||_b(t,r.key)):ne(19791,{wu:r})}function EO(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(G(hs,"New document in limbo: "+n),t.Eu.add(r),Lp(t))}function Lp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(we.fromString(e)),r=t.fu.next();t.Au.set(r,new uO(n)),t.Ru=t.Ru.insert(n,r),Dl(t.remoteStore,new ir(qt(So(n.path)),r,"TargetPurposeLimboResolution",Qt.ce))}}async function wr(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,c)=>{o.push(r.pu(c,e,n).then((l=>{if((l||n)&&r.isPrimaryClient){const h=l?!l.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){s.push(l);const h=Tp.Es(c.targetId,l);i.push(h)}})))})),await Promise.all(o),r.Pu.J_(s),await(async function(c,l){const h=Z(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>O.forEach(l,(p=>O.forEach(p.Ts,(m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m))).next((()=>O.forEach(p.Is,(m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))))))}catch(f){if(!cs(f))throw f;G(Ip,"Failed to update sequence numbers: "+f)}for(const f of l){const p=f.targetId;if(!f.fromCache){const m=h.vs.get(p),y=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(y);h.vs=h.vs.insert(p,v)}}})(r.localStore,i))}async function wO(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){G(hs,"User change. New user:",e.toKey());const r=await WI(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((c=>{c.reject(new q(F.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wr(n,r.Ns)}}function TO(t,e){const n=Z(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let s=_e();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function IO(t,e){const n=Z(t),r=await Ku(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Jf(n,e.targetId,s.au),s}async function bO(t,e){const n=Z(t);return XI(n.localStore,e).then((r=>wr(n,r)))}async function AO(t,e,n,r){const s=Z(t),i=await(function(a,c){const l=Z(a),h=Z(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",(f=>h.Xn(f,c).next((p=>p?l.localDocuments.getDocuments(f,p):O.resolve(null)))))})(s.localStore,e);i!==null?(n==="pending"?await Vo(s.remoteStore):n==="acknowledged"||n==="rejected"?(Mp(s,e,r||null),Op(s,e),(function(a,c){Z(Z(a).mutationQueue).nr(c)})(s.localStore,e)):ne(6720,"Unknown batchState",{bu:n}),await wr(s,i)):G(hs,"Cannot apply mutation batch with id: "+e)}async function RO(t,e){const n=Z(t);if(Nl(n),Fp(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await Fy(n,r.toArray());n.gu=!0,await Wf(n.remoteStore,!0);for(const i of s)Dl(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach(((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>(vo(n,o),go(n.localStore,o,!0)))),_o(n.remoteStore,o)})),await s,await Fy(n,r),(function(o){const a=Z(o);a.Au.forEach(((c,l)=>{_o(a.remoteStore,l)})),a.Vu.zr(),a.Au=new Map,a.Ru=new qe(Y.comparator)})(n),n.gu=!1,await Wf(n.remoteStore,!1)}}async function Fy(t,e,n){const r=Z(t),s=[],i=[];for(const o of e){let a;const c=r.Iu.get(o);if(c&&c.length!==0){a=await mo(r.localStore,qt(c[0]));for(const l of c){const h=r.Tu.get(l),f=await IO(r,h);f.snapshot&&i.push(f.snapshot)}}else{const l=await YI(r.localStore,o);a=await mo(r.localStore,l),await kp(r,yb(l),o,!1,a.resumeToken)}s.push(a)}return r.Pu.J_(i),s}function yb(t){return ZT(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function SO(t){return(function(n){return Z(Z(n).persistence).hs()})(Z(t).localStore)}async function PO(t,e,n,r){const s=Z(t);if(s.gu)return void G(hs,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await XI(s.localStore,tI(i[0])),a=mc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Xe.EMPTY_BYTE_STRING);await wr(s,o,a);break}case"rejected":await go(s.localStore,e,!0),vo(s,e,r);break;default:ne(64155,n)}}async function CO(t,e,n){const r=Nl(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){G(hs,"Adding an already active target "+s);continue}const i=await YI(r.localStore,s),o=await mo(r.localStore,i);await kp(r,yb(i),o.targetId,!1,o.resumeToken),Dl(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await go(r.localStore,s,!1).then((()=>{_o(r.remoteStore,s),vo(r,s)})).catch(as)}}function Nl(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gO.bind(null,e),e.Pu.J_=sO.bind(null,e.eventManager),e.Pu.yu=iO.bind(null,e.eventManager),e}function Fp(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_O.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yO.bind(null,e),e}function xO(t,e,n){const r=Z(t);(async function(i,o,a){try{const c=await o.getMetadata();if(await(function(m,y){const v=Z(m),x=nt(y.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",(N=>v.Pi.getBundleMetadata(N,y.id))).then((N=>!!N&&N.createTime.compareTo(x)>=0))})(i.localStore,c))return await o.close(),a._completeWith((function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}})(c)),Promise.resolve(new Set);a._updateProgress(hb(c));const l=new aO(c,o.serializer);let h=await o.Su();for(;h;){const p=await l.Ga(h);p&&a._updateProgress(p),h=await o.Su()}const f=await l.ja(i.localStore);return await wr(i,f.Ja,void 0),await(function(m,y){const v=Z(m);return v.persistence.runTransaction("Save bundle","readwrite",(x=>v.Pi.saveBundleMetadata(x,y)))})(i.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Ha)}catch(c){return Kn(hs,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(r,e,n).then((s=>{r.sharedClientState.notifyBundleLoaded(s)}))}class Ya{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_c(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return KI(this.persistence,new zI,e.initialUser,this.serializer)}Cu(e){return new vp(Vl.Vi,this.serializer)}Du(e){return new rb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ya.provider={build:()=>new Ya};class VO extends Ya{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof zu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new UI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new vp((r=>zu.Vi(r,n)),this.serializer)}}class vb extends Ya{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Fp(this.xu.syncEngine),await Vo(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return KI(this.persistence,new zI,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new UI(r,e.asyncQueue,n)}Mu(e,n){const r=new kD(n,this.persistence);return new ND(e.asyncQueue,r)}Cu(e){const n=wp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new Ep(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,sb(),hu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new rb}}class DO extends vb{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Fh&&(this.sharedClientState.syncEngine={So:AO.bind(null,n),Do:PO.bind(null,n),Co:CO.bind(null,n),hs:SO.bind(null,n),bo:bO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await RO(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=sb();if(!Fh.v(n))throw new q(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fh(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Xa{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ly(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wO.bind(null,this.syncEngine),await Wf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rO})()}createDatastore(e){const n=_c(e.databaseInfo.databaseId),r=Fk(e.databaseInfo);return qk(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,a){return new Gk(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ly(this.syncEngine,n,0)),(function(){return xy.v()?new xy:new kk})())}createSyncEngine(e,n){return(function(s,i,o,a,c,l,h){const f=new lO(s,i,o,a,c,l);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Z(n);G(Ys,"RemoteStore shutting down."),r.Ea.add(5),await xo(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xa.provider={build:()=>new Xa};function By(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):et("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Rt,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const s=await this.Uu(r);return new oO(JSON.parse(s),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kO=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,i){const o=Z(s),a={documents:i.map((f=>Qa(o.serializer,f)))},c=await o.jo("BatchGetDocuments",o.serializer.databaseId,we.emptyPath(),a,i.length),l=new Map;c.forEach((f=>{const p=GN(o.serializer,f);l.set(p.key.toString(),p)}));const h=[];return i.forEach((f=>{const p=l.get(f.toString());oe(!!p,55234,{key:f}),h.push(p)})),h})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Co(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const s=Y.fromPath(r);this.mutations.push(new up(s,this.precondition(s)))})),await(async function(r,s){const i=Z(r),o={writes:s.map((a=>Ja(i.serializer,a)))};await i.Wo("Commit",i.serializer.databaseId,we.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ne(50498,{Gu:e.constructor.name});n=ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ce.min())?We.exists(!1):We.updateTime(n):We.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ce.min()))throw new q(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return We.updateTime(n)}return We.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new Ap(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new kO(this.datastore),n=this.Ju(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Zu(s)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const n=this.updateFunction(e);return!uc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!pI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="FirestoreClient";class MO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=Qd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{G(is,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(G(is,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=No(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Uh(t,e){t.asyncQueue.verifyOperationInProgress(),G(is,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await WI(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Uy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Bp(t);G(is,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Dy(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Dy(e.remoteStore,s))),t._onlineComponents=e}async function Bp(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(is,"Using user provided OfflineComponentProvider");try{await Uh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Kn("Error using user provided cache. Falling back to memory cache: "+n),await Uh(t,new Ya)}}else G(is,"Using default OfflineComponentProvider"),await Uh(t,new VO(void 0));return t._offlineComponents}async function Ol(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(is,"Using user provided OnlineComponentProvider"),await Uy(t,t._uninitializedComponentsProvider._online)):(G(is,"Using default OnlineComponentProvider"),await Uy(t,new Xa))),t._onlineComponents}function Eb(t){return Bp(t).then((e=>e.persistence))}function Up(t){return Bp(t).then((e=>e.localStore))}function wb(t){return Ol(t).then((e=>e.remoteStore))}function jp(t){return Ol(t).then((e=>e.syncEngine))}function LO(t){return Ol(t).then((e=>e.datastore))}async function Eo(t){const e=await Ol(t),n=e.eventManager;return n.onListen=hO.bind(null,e.syncEngine),n.onUnlisten=dO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pO.bind(null,e.syncEngine),n}function FO(t){return t.asyncQueue.enqueue((async()=>{const e=await Eb(t),n=await wb(t);return e.setNetworkEnabled(!0),(function(s){const i=Z(s);return i.Ea.delete(0),yc(i)})(n)}))}function BO(t){return t.asyncQueue.enqueue((async()=>{const e=await Eb(t),n=await wb(t);return e.setNetworkEnabled(!1),(async function(s){const i=Z(s);i.Ea.add(0),await xo(i),i.Va.set("Offline")})(n)}))}function UO(t,e,n,r){const s=new kl(r),i=new Np(e,s,n);return t.asyncQueue.enqueueAndForget((async()=>xp(await Eo(t),i))),()=>{s.Nu(),t.asyncQueue.enqueueAndForget((async()=>Vp(await Eo(t),i)))}}function jO(t,e){const n=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await(function(l,h){const f=Z(l);return f.persistence.runTransaction("read document","readonly",(p=>f.localDocuments.getDocument(p,h)))})(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new q(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=No(a,`Failed to get document '${i} from cache`);o.reject(c)}})(await Up(t),e,n))),n.promise}function Tb(t,e,n={}){const r=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,l){const h=new kl({next:p=>{h.Nu(),o.enqueueAndForget((()=>Vp(i,f)));const m=p.docs.has(a);!m&&p.fromCache?l.reject(new q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?l.reject(new q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new Np(So(a.path),h,{includeMetadataChanges:!0,Ka:!0});return xp(i,f)})(await Eo(t),t.asyncQueue,e,n,r))),r.promise}function $O(t,e){const n=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const a=await Ku(s,i,!0),c=new pb(i,a.ks),l=c.ru(a.documents),h=c.applyChanges(l,!1);o.resolve(h.snapshot)}catch(a){const c=No(a,`Failed to execute query '${i} against cache`);o.reject(c)}})(await Up(t),e,n))),n.promise}function Ib(t,e,n={}){const r=new Rt;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,c,l){const h=new kl({next:p=>{h.Nu(),o.enqueueAndForget((()=>Vp(i,f))),p.fromCache&&c.source==="server"?l.reject(new q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new Np(a,h,{includeMetadataChanges:!0,Ka:!0});return xp(i,f)})(await Eo(t),t.asyncQueue,e,n,r))),r.promise}function qO(t,e){const n=new Rt;return t.asyncQueue.enqueueAndForget((async()=>mO(await jp(t),e,n))),n.promise}function HO(t,e){const n=new kl(e);return t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.add(i),i.next()})(await Eo(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Z(s).Ca.delete(i)})(await Eo(t),n)))}}function GO(t,e,n){const r=new Rt;return t.asyncQueue.enqueueAndForget((async()=>{const s=await LO(t);new OO(t.asyncQueue,s,n,e,r).ju()})),r.promise}function zO(t,e,n,r){const s=(function(o,a){let c;return c=typeof o=="string"?gI().encode(o):o,(function(h,f){return new NO(h,f)})((function(h,f){if(h instanceof Uint8Array)return By(h,f);if(h instanceof ArrayBuffer)return By(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),a)})(n,_c(e));t.asyncQueue.enqueueAndForget((async()=>{xO(await jp(t),s,r)}))}function KO(t,e){return t.asyncQueue.enqueue((async()=>(function(r,s){const i=Z(r);return i.persistence.runTransaction("Get named query","readonly",(o=>i.Pi.getNamedQuery(o,s)))})(await Up(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="ComponentProvider",jy=new Map;function QO(t,e,n,r,s){return new uN(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,bb(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="firestore.googleapis.com",$y=!0;class qy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ab,this.ssl=$y}else this.host=e.host,this.ssl=e.ssl??$y;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lk)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_T("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bb(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new wD;switch(r.type){case"firstParty":return new AD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=jy.get(n);r&&(G(WO,"Removing Datastore"),jy.delete(n),r.terminate())})(this),Promise.resolve()}}function JO(t,e,n,r={}){t=Se(t,vc);const s=Ud(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(L1(`https://${a}`),j1("Firestore",!0)),i.host!==Ab&&i.host!==a&&Kn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:a,ssl:s,emulatorOptions:r};if(!Xi(c,o)&&(t._setSettings(c),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=yt.MOCK_USER;else{l=F1(r.mockUserToken,t._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new yt(f)}t._authCredentials=new TD(new mT(l,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=class Rb{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rb(this.firestore,e,this._query)}},$e=class da{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new da(this.firestore,e,this._key)}toJSON(){return{type:da._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(cc(n,da._jsonSchema))return new da(e,r||null,new Y(we.fromString(n.referencePath)))}};$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:ot("string",$e._jsonSchemaVersion),referencePath:ot("string")};let Jr=class Sb extends Ht{constructor(e,n,r){super(e,n,So(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new Y(e))}withConverter(e){return new Sb(this.firestore,e,this._path)}};function Pb(t,e,...n){if(t=ct(t),Jd("collection","path",e),t instanceof vc){const r=we.fromString(e,...n);return V_(r),new Jr(t,null,r)}{if(!(t instanceof $e||t instanceof Jr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return V_(r),new Jr(t.firestore,null,r)}}function YO(t,e){if(t=Se(t,vc),Jd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ht(t,null,(function(r){return new yr(we.emptyPath(),r)})(e))}function Yu(t,e,...n){if(t=ct(t),arguments.length===1&&(e=Qd.newId()),Jd("doc","path",e),t instanceof vc){const r=we.fromString(e,...n);return x_(r),new $e(t,null,new Y(r))}{if(!(t instanceof $e||t instanceof Jr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return x_(r),new $e(t.firestore,t instanceof Jr?t.converter:null,new Y(r))}}function Cb(t,e){return t=ct(t),e=ct(e),(t instanceof $e||t instanceof Jr)&&(e instanceof $e||e instanceof Jr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function xb(t,e){return t=ct(t),e=ct(e),t instanceof Ht&&e instanceof Ht&&t.firestore===e.firestore&&fc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="AsyncQueue";class Gy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ap(this,"async_queue_retry"),this._c=()=>{const r=hu();r&&G(Hy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=hu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=hu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Rt;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!cs(e))throw e;G(Hy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,et("INTERNAL UNHANDLED ERROR: ",zy(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Cp.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:zy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function zy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=-1;let rt=class extends vc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Gy,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gy(e),this._firestoreClient=void 0,await e}}};function Mt(t){if(t._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Vb(t),t._firestoreClient}function Vb(t){const e=t._freezeSettings(),n=QO(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new MO(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}function eM(t,e){Kn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Db(t,Xa.provider,{build:r=>new vb(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function tM(t){Kn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();Db(t,Xa.provider,{build:n=>new DO(n,e.cacheSizeBytes)})}function Db(t,e,n){if((t=Se(t,rt))._firestoreClient||t._terminated)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new q(F.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Vb(t)}function nM(t){if(t._initialized&&!t._terminated)throw new q(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rt;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Hn.v())return Promise.resolve();const s=r+GI;await Hn.delete(s)})(wp(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function rM(t){return(function(n){const r=new Rt;return n.asyncQueue.enqueueAndForget((async()=>vO(await jp(n),r))),r.promise})(Mt(t=Se(t,rt)))}function sM(t){return FO(Mt(t=Se(t,rt)))}function iM(t){return BO(Mt(t=Se(t,rt)))}function oM(t,e){const n=Mt(t=Se(t,rt)),r=new XO;return zO(n,t._databaseId,e,r),r}function aM(t,e){return KO(Mt(t=Se(t,rt)),e).then((n=>n?new Ht(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dt(Xe.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dt(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cc(e,Dt._jsonSchema))return Dt.fromBase64String(e.bytes)}}Dt._jsonSchemaVersion="firestore/bytes/1.0",Dt._jsonSchema={type:ot("string",Dt._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ii=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:In._jsonSchemaVersion}}static fromJSON(e){if(cc(e,In._jsonSchema))return new In(e.latitude,e.longitude)}}In._jsonSchemaVersion="firestore/geoPoint/1.0",In._jsonSchema={type:ot("string",In._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cc(e,bn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new bn(e.vectorValues);throw new q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bn._jsonSchemaVersion="firestore/vectorValue/1.0",bn._jsonSchema={type:ot("string",bn._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=/^__.*__$/;class uM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,n,this.fieldTransforms):new Po(e,this.data,n,this.fieldTransforms)}}class Nb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Er(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{dataSource:t})}}class Ml{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ml({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Xu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(kb(this.dataSource)&&cM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class lM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_c(e)}createContext(e,n,r,s=!1){return new Ml({dataSource:e,methodName:n,targetDoc:r,path:Ke.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oi(t){const e=t._freezeSettings(),n=_c(t._databaseId);return new lM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ll(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);Wp("Data must be an object, but it was:",o,r);const a=Lb(r,o);let c,l;if(i.merge)c=new Jt(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Zs(e,f,n);if(!o.contains(p))throw new q(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Ub(h,p)||h.push(p)}c=new Jt(h),l=o.fieldTransforms.filter((f=>c.covers(f.field)))}else c=null,l=o.fieldTransforms;return new uM(new bt(a),c,l)}class Ec extends ii{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ec}}function Ob(t,e,n){return new Ml({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class $p extends ii{_toFieldTransform(e){return new pc(e.path,new ho)}isEqual(e){return e instanceof $p}}class qp extends ii{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=Ob(this,e,!0),r=this.Ac.map((i=>ai(i,n))),s=new zs(r);return new pc(e.path,s)}isEqual(e){return e instanceof qp&&Xi(this.Ac,e.Ac)}}class Hp extends ii{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=Ob(this,e,!0),r=this.Ac.map((i=>ai(i,n))),s=new Ks(r);return new pc(e.path,s)}isEqual(e){return e instanceof Hp&&Xi(this.Ac,e.Ac)}}class Gp extends ii{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new fo(e.serializer,aI(e.serializer,this.Vc));return new pc(e.path,n)}isEqual(e){return e instanceof Gp&&this.Vc===e.Vc}}function zp(t,e,n,r){const s=t.createContext(1,e,n);Wp("Data must be an object, but it was:",s,r);const i=[],o=bt.empty();us(r,((c,l)=>{const h=Bb(e,c,n);l=ct(l);const f=s.childContextForFieldPath(h);if(l instanceof Ec)i.push(h);else{const p=ai(l,f);p!=null&&(i.push(h),o.set(h,p))}}));const a=new Jt(i);return new Nb(o,a,s.fieldTransforms)}function Kp(t,e,n,r,s,i){const o=t.createContext(1,e,n),a=[Zs(e,r,n)],c=[s];if(i.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Zs(e,i[p])),c.push(i[p+1]);const l=[],h=bt.empty();for(let p=a.length-1;p>=0;--p)if(!Ub(l,a[p])){const m=a[p];let y=c[p];y=ct(y);const v=o.childContextForFieldPath(m);if(y instanceof Ec)l.push(m);else{const x=ai(y,v);x!=null&&(l.push(m),h.set(m,x))}}const f=new Jt(l);return new Nb(h,f,o.fieldTransforms)}function Mb(t,e,n,r=!1){return ai(n,t.createContext(r?4:3,e))}function ai(t,e){if(Fb(t=ct(t)))return Wp("Unsupported field value:",e,t),Lb(t,e);if(t instanceof ii)return(function(r,s){if(!kb(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let c=ai(a,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ne.fromDate(r);return{timestampValue:po(s.serializer,i)}}if(r instanceof Ne){const i=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:po(s.serializer,i)}}if(r instanceof In)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dt)return{bytesValue:vI(s.serializer,r._byteString)};if(r instanceof $e){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof bn)return(function(o,a){const c=o instanceof bn?o.toArray():o;return{mapValue:{fields:{[rp]:{stringValue:sp},[co]:{arrayValue:{values:c.map((h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return cp(a.serializer,h)}))}}}}}})(r,s);if(VI(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${vl(r)}`)})(t,e)}function Lb(t,e){const n={};return MT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(t,((r,s)=>{const i=ai(s,e.childContextForField(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Fb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof In||t instanceof Dt||t instanceof $e||t instanceof ii||t instanceof bn||VI(t))}function Wp(t,e,n){if(!Fb(n)||!yT(n)){const r=vl(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Zs(t,e,n){if((e=ct(e))instanceof Xs)return e._internalPath;if(typeof e=="string")return Bb(t,e);throw Xu("Field path arguments must be of type string or ",t,!1,void 0,n)}const hM=new RegExp("[~\\*/\\[\\]]");function Bb(t,e,n){if(e.search(hM)>=0)throw Xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xs(...e.split("."))._internalPath}catch{throw Xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(F.INVALID_ARGUMENT,a+t+c)}function Ub(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{convertValue(e,n="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return us(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[co].arrayValue?.values?.map((r=>ze(r.doubleValue)));return new bn(n)}convertGeoPoint(e){return new In(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Al(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ga(e));default:return null}}convertTimestamp(e){const n=pr(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);oe(xI(r),9688,{name:e});const s=new es(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||et(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Qp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(){return new Ec("deleteField")}function dM(){return new $p("serverTimestamp")}function pM(...t){return new qp("arrayUnion",t)}function mM(...t){return new Hp("arrayRemove",t)}function gM(t){return new Gp("increment",t)}const Ky="@firebase/firestore",Wy="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _M(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Zs("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _M extends Za{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jp{}class wc extends Jp{}function Nr(t,e,...n){let r=[];e instanceof Jp&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((c=>c instanceof Yp)).length,a=i.filter((c=>c instanceof Fl)).length;if(o>1||o>0&&a>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Fl extends wc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fl(e,n,r)}_apply(e){const n=this._parse(e);return qb(e._query,n),new Ht(e.firestore,e.converter,Ff(e._query,n))}_parse(e){const n=oi(e.firestore);return(function(i,o,a,c,l,h,f){let p;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Jy(f,h);const y=[];for(const v of f)y.push(Qy(c,i,v));p={arrayValue:{values:y}}}else p=Qy(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Jy(f,h),p=Mb(a,o,f,h==="in"||h==="not-in");return Ie.create(l,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yM(t,e,n){const r=e,s=Zs("where",t);return Fl._create(s,r,n)}class Yp extends Jp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yp(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ke.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)qb(o,c),o=Ff(o,c)})(e._query,n),new Ht(e.firestore,e.converter,Ff(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xp extends wc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xp(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wa(i,o)})(e._query,this._field,this._direction);return new Ht(e.firestore,e.converter,IN(e._query,n))}}function vM(t,e="asc"){const n=e,r=Zs("orderBy",t);return Xp._create(r,n)}class Bl extends wc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Bl(e,n,r)}_apply(e){return new Ht(e.firestore,e.converter,$u(e._query,this._limit,this._limitType))}}function EM(t){return vT("limit",t),Bl._create("limit",t,"F")}function wM(t){return vT("limitToLast",t),Bl._create("limitToLast",t,"L")}class Ul extends wc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ul(e,n,r)}_apply(e){const n=$b(e,this.type,this._docOrFields,this._inclusive);return new Ht(e.firestore,e.converter,bN(e._query,n))}}function TM(...t){return Ul._create("startAt",t,!0)}function IM(...t){return Ul._create("startAfter",t,!1)}class jl extends wc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new jl(e,n,r)}_apply(e){const n=$b(e,this.type,this._docOrFields,this._inclusive);return new Ht(e.firestore,e.converter,AN(e._query,n))}}function bM(...t){return jl._create("endBefore",t,!1)}function AM(...t){return jl._create("endAt",t,!0)}function $b(t,e,n,r){if(n[0]=ct(n[0]),n[0]instanceof Za)return(function(i,o,a,c,l){if(!c)throw new q(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of Bi(i))if(f.field.isKeyField())h.push(Hs(o,c.key));else{const p=c.data.field(f.field);if(bl(p))throw new q(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=f.field.canonicalString();throw new q(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(p)}return new rs(h,l)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=oi(t.firestore);return(function(o,a,c,l,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new q(F.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<h.length;y++){const v=h[y];if(p[y].field.isKeyField()){if(typeof v!="string")throw new q(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof v}`);if(!op(o)&&v.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${v}' contains a slash.`);const x=o.path.child(we.fromString(v));if(!Y.isDocumentKey(x))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const N=new Y(x);m.push(Hs(a,N))}else{const x=Mb(c,l,v);m.push(x)}}return new rs(m,f)})(t._query,t.firestore._databaseId,s,e,n,r)}}function Qy(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!op(e)&&n.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!Y.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hs(t,new Y(r))}if(n instanceof $e)return Hs(t,n._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vl(n)}.`)}function Jy(t,e){if(!Array.isArray(t)||t.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qb(t,e){const n=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function $l(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class RM extends Qp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}class ks{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let gn=class Hb extends Za{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ca(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Zs("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Hb._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};gn._jsonSchemaVersion="firestore/documentSnapshot/1.0",gn._jsonSchema={type:ot("string",gn._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};let Ca=class extends gn{data(e={}){return super.data(e)}},An=class Gb{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ks(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Ca(this._firestore,this._userDataWriter,r.key,r,new ks(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const c=new Ca(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ks(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const c=new Ca(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ks(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:SM(a.type),doc:c,oldIndex:l,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gb._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function SM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}function zb(t,e){return t instanceof gn&&e instanceof gn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof An&&e instanceof An&&t._firestore===e._firestore&&xb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An._jsonSchemaVersion="firestore/querySnapshot/1.0",An._jsonSchema={type:ot("string",An._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};const PM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CM=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=oi(e)}set(e,n,r){this._verifyNotCommitted();const s=$r(e,this._firestore),i=$l(s.converter,n,r),o=Ll(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,We.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=$r(e,this._firestore);let o;return o=typeof(n=ct(n))=="string"||n instanceof Xs?Kp(this._dataReader,"WriteBatch.update",i._key,n,r,s):zp(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,We.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$r(e,this._firestore);return this._mutations=this._mutations.concat(new Co(n._key,We.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function $r(t,e){if((t=ct(t)).firestore!==e)throw new q(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=oi(e)}get(e){const n=$r(e,this._firestore),r=new RM(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return ne(24041);const i=s[0];if(i.isFoundDocument())return new Za(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Za(this._firestore,r,n._key,null,n.converter);throw ne(18433,{doc:i})}))}set(e,n,r){const s=$r(e,this._firestore),i=$l(s.converter,n,r),o=Ll(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=$r(e,this._firestore);let o;return o=typeof(n=ct(n))=="string"||n instanceof Xs?Kp(this._dataReader,"Transaction.update",i._key,n,r,s):zp(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=$r(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VM=class extends xM{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=$r(e,this._firestore),r=new ci(this._firestore);return super.get(e).then((s=>new gn(this._firestore,r,n._key,s._document,new ks(!1,!1),n.converter)))}};function DM(t,e,n){t=Se(t,rt);const r={...PM,...n};(function(o){if(o.maxAttempts<1)throw new q(F.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const s=Mt(t);return GO(s,(i=>e(new VM(t,i))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t){t=Se(t,$e);const e=Se(t.firestore,rt),n=Mt(e);return Tb(n,t._key).then((r=>Zp(e,t,r)))}function kM(t){t=Se(t,$e);const e=Se(t.firestore,rt),n=Mt(e),r=new ci(e);return jO(n,t._key).then((s=>new gn(e,r,t._key,s,new ks(s!==null&&s.hasLocalMutations,!0),t.converter)))}function OM(t){t=Se(t,$e);const e=Se(t.firestore,rt),n=Mt(e);return Tb(n,t._key,{source:"server"}).then((r=>Zp(e,t,r)))}function MM(t){t=Se(t,Ht);const e=Se(t.firestore,rt),n=Mt(e),r=new ci(e);return jb(t._query),Ib(n,t._query).then((s=>new An(e,r,t,s)))}function LM(t){t=Se(t,Ht);const e=Se(t.firestore,rt),n=Mt(e),r=new ci(e);return $O(n,t._query).then((s=>new An(e,r,t,s)))}function FM(t){t=Se(t,Ht);const e=Se(t.firestore,rt),n=Mt(e),r=new ci(e);return Ib(n,t._query,{source:"server"}).then((s=>new An(e,r,t,s)))}function Yy(t,e,n){t=Se(t,$e);const r=Se(t.firestore,rt),s=$l(t.converter,e,n),i=oi(r);return Tc(r,[Ll(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,We.none())])}function Xy(t,e,n,...r){t=Se(t,$e);const s=Se(t.firestore,rt),i=oi(s);let o;return o=typeof(e=ct(e))=="string"||e instanceof Xs?Kp(i,"updateDoc",t._key,e,n,r):zp(i,"updateDoc",t._key,e),Tc(s,[o.toMutation(t._key,We.exists(!0))])}function BM(t){return Tc(Se(t.firestore,rt),[new Co(t._key,We.none())])}function UM(t,e){const n=Se(t.firestore,rt),r=Yu(t),s=$l(t.converter,e),i=oi(t.firestore);return Tc(n,[Ll(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,We.exists(!1))]).then((()=>r))}function Kb(t,...e){t=ct(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Yf(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Yf(e[r])){const l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let i,o,a;if(t instanceof $e)o=Se(t.firestore,rt),a=So(t._key.path),i={next:l=>{e[r]&&e[r](Zp(o,t,l))},error:e[r+1],complete:e[r+2]};else{const l=Se(t,Ht);o=Se(l.firestore,rt),a=l._query;const h=new ci(o);i={next:f=>{e[r]&&e[r](new An(o,h,l,f))},error:e[r+1],complete:e[r+2]},jb(t._query)}const c=Mt(o);return UO(c,a,s,i)}function jM(t,e){t=Se(t,rt);const n=Mt(t),r=Yf(e)?e:{next:e};return HO(n,r)}function Tc(t,e){const n=Mt(t);return qO(n,e)}function Zp(t,e,n){const r=n.docs.get(e._key),s=new ci(t);return new gn(t,s,e._key,r,new ks(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){yD(Gd),to(new qs("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new rt(new ID(r.getProvider("auth-internal")),new RD(o,r.getProvider("app-check-internal")),lN(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),ur(Ky,Wy,e),ur(Ky,Wy,"esm2020")})();const $M="@firebase/firestore-compat",qM="0.4.4";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new q("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(){if(typeof Uint8Array>"u")throw new q("unimplemented","Uint8Arrays are not available in this environment.")}function ev(){if(!aN())throw new q("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ec{constructor(e){this._delegate=e}static fromBase64String(e){return ev(),new ec(Dt.fromBase64String(e))}static fromUint8Array(e){return Zy(),new ec(Dt.fromUint8Array(e))}toBase64(){return ev(),this._delegate.toBase64()}toUint8Array(){return Zy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t){return HM(t,["next","error","complete"])}function HM(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{enableIndexedDbPersistence(e,n){return eM(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return tM(e._delegate)}clearIndexedDbPersistence(e){return nM(e._delegate)}}class Wb{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof es||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Kn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){JO(this._delegate,e,n,r)}enableNetwork(){return sM(this._delegate)}disableNetwork(){return iM(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_T("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return rM(this._delegate)}onSnapshotsInSync(e){return jM(this._delegate,e)}get app(){if(!this._appCompat)throw new q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wo(this,Pb(this._delegate,e))}catch(n){throw jt(n,"collection()","Firestore.collection()")}}doc(e){try{return new mn(this,Yu(this._delegate,e))}catch(n){throw jt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ut(this,YO(this._delegate,e))}catch(n){throw jt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return DM(this._delegate,n=>e(new Qb(this,n)))}batch(){return Mt(this._delegate),new Jb(new CM(this._delegate,e=>Tc(this._delegate,e)))}loadBundle(e){return oM(this._delegate,e)}namedQuery(e){return aM(this._delegate,e).then(n=>n?new Ut(this,n):null)}}class ql extends Qp{constructor(e){super(),this.firestore=e}convertBytes(e){return new ec(new Dt(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return mn.forKey(n,this.firestore,null)}}function zM(t){vD(t)}class Qb{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new ql(e)}get(e){const n=Os(e);return this._delegate.get(n).then(r=>new tc(this._firestore,new gn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=Os(e);return r?(em("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Os(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Os(e);return this._delegate.delete(n),this}}class Jb{constructor(e){this._delegate=e}set(e,n,r){const s=Os(e);return r?(em("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Os(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Os(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ei{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Ca(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new nc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=ei.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new ei(e,new ql(e),n),s.set(n,i)),i}}ei.INSTANCES=new WeakMap;class mn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ql(e)}static forPath(e,n,r){if(e.length%2!==0)throw new q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new mn(n,new $e(n._delegate,r,new Y(e)))}static forKey(e,n,r){return new mn(n,new $e(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new wo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wo(this.firestore,Pb(this._delegate,e))}catch(n){throw jt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ct(e),e instanceof $e?Cb(this._delegate,e):!1}set(e,n){n=em("DocumentReference.set",n);try{return n?Yy(this._delegate,e,n):Yy(this._delegate,e)}catch(r){throw jt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Xy(this._delegate,e):Xy(this._delegate,e,n,...r)}catch(s){throw jt(s,"updateDoc()","DocumentReference.update()")}}delete(){return BM(this._delegate)}onSnapshot(...e){const n=Yb(e),r=Xb(e,s=>new tc(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return Kb(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=kM(this._delegate):e?.source==="server"?n=OM(this._delegate):n=NM(this._delegate),n.then(r=>new tc(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new mn(this.firestore,e?this._delegate.withConverter(ei.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function jt(t,e,n){return t.message=t.message.replace(e,n),t}function Yb(t){for(const e of t)if(typeof e=="object"&&!Xf(e))return e;return{}}function Xb(t,e){let n;return Xf(t[0])?n=t[0]:Xf(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:r=>{n.next&&n.next(e(r))},error:n.error?.bind(n),complete:n.complete?.bind(n)}}class tc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new mn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return zb(this._delegate,e._delegate)}}class nc extends tc{data(e){const n=this._delegate.data(e);return this._delegate._converter||ED(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class Ut{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ql(e)}where(e,n,r){try{return new Ut(this.firestore,Nr(this._delegate,yM(e,n,r)))}catch(s){throw jt(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ut(this.firestore,Nr(this._delegate,vM(e,n)))}catch(r){throw jt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ut(this.firestore,Nr(this._delegate,EM(e)))}catch(n){throw jt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ut(this.firestore,Nr(this._delegate,wM(e)))}catch(n){throw jt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ut(this.firestore,Nr(this._delegate,TM(...e)))}catch(n){throw jt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ut(this.firestore,Nr(this._delegate,IM(...e)))}catch(n){throw jt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ut(this.firestore,Nr(this._delegate,bM(...e)))}catch(n){throw jt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ut(this.firestore,Nr(this._delegate,AM(...e)))}catch(n){throw jt(n,"endAt()","Query.endAt()")}}isEqual(e){return xb(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=LM(this._delegate):e?.source==="server"?n=FM(this._delegate):n=MM(this._delegate),n.then(r=>new Zf(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=Yb(e),r=Xb(e,s=>new Zf(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return Kb(this._delegate,n,r)}withConverter(e){return new Ut(this.firestore,e?this._delegate.withConverter(ei.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class KM{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new nc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Zf{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ut(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new nc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new KM(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new nc(this._firestore,r))})}isEqual(e){return zb(this._delegate,e._delegate)}}class wo extends Ut{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new mn(this.firestore,e):null}doc(e){try{return e===void 0?new mn(this.firestore,Yu(this._delegate)):new mn(this.firestore,Yu(this._delegate,e))}catch(n){throw jt(n,"doc()","CollectionReference.doc()")}}add(e){return UM(this._delegate,e).then(n=>new mn(this.firestore,n))}isEqual(e){return Cb(this._delegate,e._delegate)}withConverter(e){return new wo(this.firestore,e?this._delegate.withConverter(ei.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Os(t){return Se(t,$e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(...e){this._delegate=new Xs(...e)}static documentId(){return new tm(Ke.keyField().canonicalString())}isEqual(e){return e=ct(e),e instanceof Xs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{static serverTimestamp(){const e=dM();return e._methodName="FieldValue.serverTimestamp",new Vs(e)}static delete(){const e=fM();return e._methodName="FieldValue.delete",new Vs(e)}static arrayUnion(...e){const n=pM(...e);return n._methodName="FieldValue.arrayUnion",new Vs(n)}static arrayRemove(...e){const n=mM(...e);return n._methodName="FieldValue.arrayRemove",new Vs(n)}static increment(e){const n=gM(e);return n._methodName="FieldValue.increment",new Vs(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM={Firestore:Wb,GeoPoint:In,Timestamp:Ne,Blob:ec,Transaction:Qb,WriteBatch:Jb,DocumentReference:mn,DocumentSnapshot:tc,Query:Ut,QueryDocumentSnapshot:nc,QuerySnapshot:Zf,CollectionReference:wo,FieldPath:tm,FieldValue:Vs,setLogLevel:zM,CACHE_SIZE_UNLIMITED:ZO};function QM(t,e){t.INTERNAL.registerComponent(new qs("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps({...WM}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){QM(t,(e,n)=>new Wb(e,n,new GM)),t.registerVersion($M,qM)}JM(Ba);Ba.apps.length===0&&Ba.initializeApp({apiKey:"AIzaSyBiI-MHTxhqNpgJ6FMJaVTN3lcBMmL9cqU",authDomain:"tsg-slackbot.firebaseapp.com",projectId:"tsg-slackbot",storageBucket:"tsg-slackbot.appspot.com",messagingSenderId:"382537830947",appId:"1:382537830947:web:41aa27c8a7261f0fe61796",measurementId:"G-NZD98Q80NG"});const YM=Ba.apps[0],Vn=YM.firestore(),XM=Vn.collection("achievement_data"),ZM=()=>({isInitList:null,list:[]}),eL={initList(t){t.isInitList=!0}},tL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n}),getByCounter:t=>(e=>t.list.filter(n=>n.counter===e).sort((n,r)=>n.value-r.value)),getByCategory:t=>(e=>t.list.filter(n=>n.category===e).sort((n,r)=>(r.count||0)-(n.count||0)))},nL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",XM)})},rL=Object.freeze(Object.defineProperty({__proto__:null,actions:nL,getters:tL,mutations:eL,state:ZM},Symbol.toStringTag,{value:"Module"})),sL=Vn.collection("achievement_stats_by_category"),iL=()=>({isInitList:null,list:[]}),oL={initList(t){t.isInitList=!0}},aL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},cL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",sL)})},uL=Object.freeze(Object.defineProperty({__proto__:null,actions:cL,getters:aL,mutations:oL,state:iL},Symbol.toStringTag,{value:"Module"})),lL=Vn.collection("achievement_stats_by_difficulty"),hL=()=>({isInitList:null,list:[]}),fL={initList(t){t.isInitList=!0}},dL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},pL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",lL)})},mL=Object.freeze(Object.defineProperty({__proto__:null,actions:pL,getters:dL,mutations:fL,state:hL},Symbol.toStringTag,{value:"Module"})),gL=Vn.collection("achievement_stats_by_month"),_L=()=>({isInitList:null,list:[]}),yL={initList(t){t.isInitList=!0}},vL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},EL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",gL)})},wL=Object.freeze(Object.defineProperty({__proto__:null,actions:EL,getters:vL,mutations:yL,state:_L},Symbol.toStringTag,{value:"Module"})),oa=Vn.collection("achievements"),TL=()=>({isInitList:null,list:[],isInitLatestAchievemnts:null,latestAchievements:[],isInitUsers:{},isInitNames:{},isInitData:{}}),IL={initList(t){t.isInitList=!0},initLatestAchievements(t){t.isInitLatestAchievemnts=!0},initData(t,e){t.isInitData[e]=!0},setUser(t,{id:e,achievements:n}){t.isInitUsers[e]=!0,t[`user_${e}`]=n},setName(t,{name:e,achievements:n}){t.isInitNames[e]=!0,t[`name_${e}`]=n}},bL={list:t=>t.list,initLatestAchievements:t=>t.latestAchievements,data:t=>t.data,getByUser:t=>(e=>t.isInitList?t.list.filter(n=>n.user===e):t[`user_${e}`]||[]),getByName:t=>(e=>t.isInitList?t.list.filter(n=>n.name===e):t[`name_${e}`]||[])},AL={async initList({state:t,dispatch:e,commit:n}){t.isInitList||(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t})=>{await t("list",oa)}),async initLatestAchievements({state:t,dispatch:e,commit:n}){t.isInitLatestAchievemnts||(await e("bindLatestAchievements"),n("initLatestAchievements"))},bindLatestAchievements:an(async({bindFirestoreRef:t})=>{await t("latestAchievements",oa.orderBy("date","desc").limit(15))}),bind:an(async({bindFirestoreRef:t,state:e,commit:n},r)=>{if(e.isInitData[r]===!0||e.isInitList===!0)return;const s=oa.doc(r);await t(`data_${r}`,s),n("initData",r)}),fetchByUser:async({state:t,commit:e},n)=>{if(t.isInitUsers[n]===!0||t.isInitList===!0)return;const r=await oa.where("user","==",n).get();e({type:"setUser",id:n,achievements:r.docs.map(s=>s.data())})},fetchByName:async({state:t,commit:e},n)=>{if(t.isInitNames[n]===!0||t.isInitList===!0)return;const r=await oa.where("name","==",n).get();e({type:"setName",name:n,achievements:r.docs.map(s=>s.data())})}},RL=Object.freeze(Object.defineProperty({__proto__:null,actions:AL,getters:bL,mutations:IL,state:TL},Symbol.toStringTag,{value:"Module"})),SL=Vn.collection("oneiromancy_messages"),PL=Vn.collection("oneiromancy_criteria"),CL=()=>({isInitOneiromancyMessages:null,oneiromancyMessages:[],isInitOneiromancyCriteria:null,oneiromancyCriteria:[]}),xL={initOneiromancyMessages(t){t.isInitOneiromancyMessages=!0},initOneiromancyCriteria(t){t.isInitOneiromancyCriteria=!0}},VL={oneiromancyMessages:t=>t.oneiromancyMessages,oneiromancyCriteria:t=>t.oneiromancyCriteria},DL={async initOneiromancyMessages({state:t,dispatch:e,commit:n}){t.isInitOneiromancyMessages!==!0&&(await e("bindOneiromancyMessages"),n("initOneiromancyMessages"))},bindOneiromancyMessages:an(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyMessages",SL.orderBy("message.ts","desc")),e("initOneiromancyMessages")}),async initOneiromancyCriteria({state:t,dispatch:e,commit:n}){t.isInitOneiromancyCriteria!==!0&&(await e("bindOneiromancyCriteria"),n("initOneiromancyCriteria"))},bindOneiromancyCriteria:an(async({bindFirestoreRef:t,commit:e})=>{await t("oneiromancyCriteria",PL.orderBy("point","desc")),e("initOneiromancyCriteria")})},NL=Object.freeze(Object.defineProperty({__proto__:null,actions:DL,getters:VL,mutations:xL,state:CL},Symbol.toStringTag,{value:"Module"})),kL=()=>({isUnauthorized:!1,isInitUsers:!1,isInitTopicMessages:!1,users:[],userMap:new Map,topicMessages:[],topicMessagesMap:new Map}),OL={setUsers(t,e){t.isInitUsers=!0,t.users=e,t.userMap=new Map(e.map(n=>[n.id,n]))},setTopicMessages(t,e){t.isInitTopicMessages=!0,t.topicMessages=e.map(n=>({...n,randomSortKey:Math.random()})),t.topicMessagesMap=new Map(t.topicMessages.map(n=>[n.message.ts,n]))},addTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!0,n.likes=n.likes.concat([null]))},removeTopicMessageLike(t,e){const n=t.topicMessagesMap.get(e);n&&(n.isLiked=!1,n.likes=n.likes.slice(1))},isUnauthorized(t){t.isUnauthorized=!0}},ML={users:t=>t.users,getUser:t=>(e=>{const n=t.userMap.get(e);return n===void 0?{id:e}:n}),topicMessages:t=>t.topicMessages,getTopicMessage:t=>(e=>{const n=t.topicMessagesMap.get(e);return n===void 0?{ts:e}:n})},LL={async initUsers({state:t,commit:e}){if(!t.isInitUsers)try{const n=await fetch("https://slackbot-api.tsg.ne.jp/slack/users",{credentials:"include"});if(!n.ok){if(n.status===401){e("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();e("setUsers",r)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))e("isUnauthorized");else throw n}},async initTopicMessages({state:t,commit:e}){if(!t.isInitTopicMessages)try{const n=await fetch("https://slackbot-api.tsg.ne.jp/topic/topics",{credentials:"include"});if(!n.ok){if(n.status===401){e("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();e("setTopicMessages",r)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))e("isUnauthorized");else throw n}},async likeTopicMessage({commit:t},{ts:e}){try{const n=await fetch(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,{method:"PUT",body:"",credentials:"include",headers:{"Content-Type":"text/plain"}});if(!n.ok){if(n.status===401){t("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}t("addTopicMessageLike",e)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))t("isUnauthorized");else throw n}},async unlikeTopicMessage({commit:t},{ts:e}){try{const n=await fetch(`https://slackbot-api.tsg.ne.jp/topic/topics/${e}/like`,{method:"DELETE",credentials:"include"});if(!n.ok){if(n.status===401){t("isUnauthorized");return}throw new Error(`HTTP error! status: ${n.status}`)}t("removeTopicMessageLike",e)}catch(n){if(n?.message==="Network Error"||n?.message?.includes("Failed to fetch"))t("isUnauthorized");else throw n}}},FL=Object.freeze(Object.defineProperty({__proto__:null,actions:LL,getters:ML,mutations:OL,state:kL},Symbol.toStringTag,{value:"Module"})),BL=Vn.collection("slow_quiz_games"),UL=()=>({isInitList:null,list:[]}),jL={initList(t){t.isInitList=!0}},$L={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},qL={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t,commit:e})=>{await t("list",BL.where("status","==","finished").orderBy("finishDate","desc")),e("initList")})},HL=Object.freeze(Object.defineProperty({__proto__:null,actions:qL,getters:$L,mutations:jL,state:UL},Symbol.toStringTag,{value:"Module"})),GL=Vn.collection("twenty_questions_games"),zL=()=>({isInitList:null,list:[]}),KL={initList(t){t.isInitList=!0}},WL={list:t=>t.list,getById:t=>(e=>{const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},QL={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t,commit:e})=>{await t("list",GL.orderBy("finishedAt","desc")),e("initList")})},JL=Object.freeze(Object.defineProperty({__proto__:null,actions:QL,getters:WL,mutations:KL,state:zL},Symbol.toStringTag,{value:"Module"})),tv=Vn.collection("users");Vn.collection("achievements");const YL=()=>({isInitList:null,list:[],isInitData:{},data:{}}),XL={initList(t){t.isInitList=!0},initData(t,e){t.isInitData[e]=!0}},ZL={list:t=>t.list,data:t=>t.data,getById:t=>(e=>{if(t[`data_${e}`]!==void 0)return t[`data_${e}`];const n=t.list.find(r=>r.id===e);return n===void 0?{id:e}:n})},eF={async initList({state:t,dispatch:e,commit:n}){t.isInitList!==!0&&(await e("bindList"),n("initList"))},bindList:an(async({bindFirestoreRef:t,commit:e})=>{await t("list",tv),e("initList")}),bindById:an(async({bindFirestoreRef:t,state:e,dispatch:n,getters:r,commit:s},i)=>{const o=r.getById(i);if(o!==void 0&&e.isInitData[o.id]===!0)return;const a=await tv.doc(i).get();if(a.exists){const c=t(`data_${a.id}`,a.ref);s("initData",a.id),await Promise.all([c,n("achievements/fetchByUser",a.id,{root:!0})])}})},tF=Object.freeze(Object.defineProperty({__proto__:null,actions:eF,getters:ZL,mutations:XL,state:YL},Symbol.toStringTag,{value:"Module"})),nF=Qn(t=>{const e=m1({mutations:{...R1},modules:{achievements:{namespaced:!0,...RL},achievementData:{namespaced:!0,...rL},achievementStatsByCategory:{namespaced:!0,...uL},achievementStatsByDifficulty:{namespaced:!0,...mL},achievementStatsByMonth:{namespaced:!0,...wL},slowQuizGames:{namespaced:!0,...HL},twentyQuestionsGames:{namespaced:!0,...JL},users:{namespaced:!0,...tF},oneiromancies:{namespaced:!0,...NL},slackInfos:{namespaced:!0,...FL}}});return t.vueApp.use(e),{provide:{store:e}}}),rF=[aC,fC,qx,Hx,Gx,zx,Wx,Qx,Xx,nF],Zb=(t="RouteProvider")=>os({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,r=e.route,s={};for(const i in e.route)Object.defineProperty(s,i,{get:()=>n===e.renderKey?e.route[i]:r[i],enumerable:!0});return Gr($s,Un(s)),()=>e.vnode?Nt(e.vnode,{ref:e.vnodeRef}):e.vnode}}),sF=Zb(),nv=new WeakMap,iF=os({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:r}){const s=dt(),i=or(),o=kt($s,null);let a;r({pageRef:i});const c=kt(XE,null);let l;const h=s.deferHydration();if(s.isHydrating){const p=s.hooks.hookOnce("app:error",h);un().beforeEach(p)}t.pageKey&&zr(()=>t.pageKey,(p,m)=>{p!==m&&s.callHook("page:loading:start")});let f=!1;{const p=un().beforeResolve(()=>{f=!1});oc(()=>{p()})}return()=>Nt(Ew,{name:t.name,route:t.route,...e},{default:p=>{const m=aF(o,p.route,p.Component),y=o&&o.matched.length===p.route.matched.length;if(!p.Component){if(l&&!y)return l;h();return}if(l&&c&&!c.isCurrent(p.route))return l;if(m&&o&&(!c||c?.isCurrent(o)))return y?l:null;const v=gf(p,t.pageKey),x=cF(o,p.route,p.Component);!s.isHydrating&&a===v&&!x&&Gi(()=>{f=!0,s.callHook("page:loading:end")}),a=v;const N=!!(t.transition??p.route.meta.pageTransition??Ng),D=N&&oF([t.transition,p.route.meta.pageTransition,Ng,{onAfterLeave(){delete s._runningTransition,s.callHook("page:transition:finish",p.Component)}}]),E=t.keepalive??p.route.meta.keepalive??iP;return l=Tw(N&&D,xx(E,Nt(yd,{suspensible:!0,onPending:()=>{N&&(s._runningTransition=!0),s.callHook("page:start",p.Component)},onResolve:()=>{Gi(()=>s.callHook("page:finish",p.Component).then(()=>{if(delete s._runningTransition,!f&&!x)return f=!0,s.callHook("page:loading:end")}).finally(h))}},{default:()=>{const C={key:v||void 0,vnode:n.default?uF(n.default,p):p.Component,route:p.route,renderKey:v||void 0,trackRootNodes:N,vnodeRef:i};if(!E)return Nt(sF,C);const k=p.Component.type,U=k;let I=nv.get(U);return I||(I=Zb(k.name||k.__name),nv.set(U,I)),Nt(I,C)}}))).default(),l}})}});function oF(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?Cd(n.onAfterLeave):void 0});return JE(...e)}function aF(t,e,n){if(!t)return!1;const r=e.matched.findIndex(s=>s.components?.default===n?.type);return!r||r===-1?!1:e.matched.slice(0,r).some((s,i)=>s.components?.default!==t.matched[i]?.components?.default)||n&&gf({route:e,Component:n})!==gf({route:t,Component:n})}function cF(t,e,n){return t?e.matched.findIndex(s=>s.components?.default===n?.type)<e.matched.length-1:!1}function uF(t,e){const n=t(e);return n.length===1?Nt(n[0]):Nt(Tt,void 0,n)}const lF=os({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>Nt(Ur[t.name],t.layoutProps,e.slots)}}),hF={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},fF=os({name:"NuxtLayout",inheritAttrs:!1,props:hF,setup(t,e){const n=dt(),r=kt($s),i=!r||r===dl()?ww():r,o=sn(()=>{let h=je(t.name)??i?.meta.layout??"default";return h&&!(h in Ur)&&t.fallback&&(h=je(t.fallback)),h}),a=Hi();e.expose({layoutRef:a});const c=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",c);un().beforeEach(h)}let l;return()=>{const h=o.value&&o.value in Ur,f=i?.meta.layoutTransition??sP,p=l;return l=o.value,Tw(h&&f,{default:()=>Nt(yd,{suspensible:!0,onResolve:()=>{Gi(c)}},{default:()=>Nt(dF,{layoutProps:RE(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:m=>m!==p&&m===o.value,hasTransition:!!f},e.slots)})}).default()}}}),dF=os({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&Gr(XE,{isCurrent:i=>n===(i.meta.layout??"default")});const r=kt($s);if(r&&r===dl()){const i=ww(),o={};for(const a in i){const c=a;Object.defineProperty(o,c,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[c]:r[c]})}Gr($s,Un(o))}return()=>!n||typeof n=="string"&&!(n in Ur)?e.slots.default?.():Nt(lF,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),pF=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},mF={};function gF(t,e){const n=iF,r=fF;return pn(),Bn(r,null,{default:hd(()=>[tt(n)]),_:1})}const _F=pF(mF,[["render",gF]]),yF={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error;n.stack&&n.stack.split(`
`).splice(1).map(f=>({text:f.replace("webpack:/","").replace(".vue",".js").trim(),internal:f.includes("node_modules")&&!f.includes(".cache")||f.includes("internal")||f.includes("new Promise")})).map(f=>`<span class="stack${f.internal?" internal":""}">${f.text}</span>`).join(`
`);const r=Number(n.statusCode||500),s=r===404,i=n.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=s?Kh(()=>fn(()=>import("./CcB2akJ3.js"),__vite__mapDeps([28,3,29,30]),import.meta.url)):Kh(()=>fn(()=>import("./BPbMBxfd.js"),__vite__mapDeps([31,29,32]),import.meta.url));return(f,p)=>(pn(),Bn(je(h),VA(bE({statusCode:je(r),statusMessage:je(i),description:je(o),stack:je(a)})),null,16))}},vF={key:0},rv={__name:"nuxt-root",setup(t){const e=()=>null,n=dt(),r=n.deferHydration();if(n.isHydrating){const l=n.hooks.hookOnce("app:error",r);un().beforeEach(l)}const s=!1;Gr($s,dl()),n.hooks.callHookWith(l=>l.map(h=>h()),"vue:setup");const i=pl(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;Jv((l,h,f)=>{if(n.hooks.callHook("vue:error",l,h,f).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",l),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,l),!1;if(ew(l)&&(l.fatal||l.unhandled))return n.runWithContext(()=>Is(l)),!1});const c=!1;return(l,h)=>(pn(),Bn(yd,{onResolve:je(r)},{default:hd(()=>[je(o)?(pn(),dS("div",vF)):je(i)?(pn(),Bn(je(yF),{key:1,error:je(i)},null,8,["error"])):je(c)?(pn(),Bn(je(e),{key:2,context:je(c)},null,8,["context"])):je(s)?(pn(),Bn(MR(je(s)),{key:3})):(pn(),Bn(je(_F),{key:4}))]),_:1},8,["onResolve"]))}};let sv;{let t;sv=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),r=n?ZS(rv):XS(rv),s=uP({vueApp:r});async function i(o){await s.callHook("app:error",o),s.payload.error||=Bs(o)}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)}),!n&&kg.id&&s.hook("app:suspense:resolve",()=>{document.getElementById(kg.id)?.remove()});try{await fP(s,rF)}catch(o){i(o)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(oP),await s.hooks.callHook("app:mounted",r),await Gi()}catch(o){i(o)}return r},t=sv().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{PF as $,DF as A,bF as B,TF as C,kF as D,EF as E,Tt as F,AF as G,SF as H,il as I,sl as J,RF as K,IF as L,un as M,xd as N,h_ as O,$s as P,oc as Q,VF as R,ME as S,TP as T,Yx as U,sn as V,CF as W,ni as X,wd as Y,fl as Z,pF as _,IE as a,A0 as a0,Au as a1,tt as b,dS as c,AE as d,dt as e,rw as f,os as g,fd as h,kt as i,Nt as j,md as k,Qv as l,zr as m,Re as n,pn as o,al as p,Gi as q,or as r,Hi as s,OA as t,xF as u,IS as v,hd as w,wF as x,Bn as y,NF as z};
